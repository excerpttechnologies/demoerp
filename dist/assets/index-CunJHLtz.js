function VJ(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var AUe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fk={exports:{}},xb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kM;function qJ(){if(kM)return xb;kM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:o,ref:s!==void 0?s:null,props:i}}return xb.Fragment=t,xb.jsx=r,xb.jsxs=r,xb}var _M;function zJ(){return _M||(_M=1,Fk.exports=qJ()),Fk.exports}var n=zJ(),Lk={exports:{}},ja={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM;function HJ(){if(EM)return ja;EM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(Q){return Q===null||typeof Q!="object"?null:(Q=h&&Q[h]||Q["@@iterator"],typeof Q=="function"?Q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,g={};function b(Q,ie,M){this.props=Q,this.context=ie,this.refs=g,this.updater=M||p}b.prototype.isReactComponent={},b.prototype.setState=function(Q,ie){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ie,"setState")},b.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function y(){}y.prototype=b.prototype;function S(Q,ie,M){this.props=Q,this.context=ie,this.refs=g,this.updater=M||p}var w=S.prototype=new y;w.constructor=S,x(w,b.prototype),w.isPureReactComponent=!0;var k=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function E(Q,ie,M,V,W,ee){return M=ee.ref,{$$typeof:e,type:Q,key:ie,ref:M!==void 0?M:null,props:ee}}function A(Q,ie){return E(Q.type,ie,void 0,void 0,void 0,Q.props)}function I(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function L(Q){var ie={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(M){return ie[M]})}var P=/\/+/g;function O(Q,ie){return typeof Q=="object"&&Q!==null&&Q.key!=null?L(""+Q.key):ie.toString(36)}function Y(){}function q(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(Y,Y):(Q.status="pending",Q.then(function(ie){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ie)},function(ie){Q.status==="pending"&&(Q.status="rejected",Q.reason=ie)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function K(Q,ie,M,V,W){var ee=typeof Q;(ee==="undefined"||ee==="boolean")&&(Q=null);var re=!1;if(Q===null)re=!0;else switch(ee){case"bigint":case"string":case"number":re=!0;break;case"object":switch(Q.$$typeof){case e:case t:re=!0;break;case u:return re=Q._init,K(re(Q._payload),ie,M,V,W)}}if(re)return W=W(Q),re=V===""?"."+O(Q,0):V,k(W)?(M="",re!=null&&(M=re.replace(P,"$&/")+"/"),K(W,ie,M,"",function(ae){return ae})):W!=null&&(I(W)&&(W=A(W,M+(W.key==null||Q&&Q.key===W.key?"":(""+W.key).replace(P,"$&/")+"/")+re)),ie.push(W)),1;re=0;var ne=V===""?".":V+":";if(k(Q))for(var ce=0;ce<Q.length;ce++)V=Q[ce],ee=ne+O(V,ce),re+=K(V,ie,M,ee,W);else if(ce=f(Q),typeof ce=="function")for(Q=ce.call(Q),ce=0;!(V=Q.next()).done;)V=V.value,ee=ne+O(V,ce++),re+=K(V,ie,M,ee,W);else if(ee==="object"){if(typeof Q.then=="function")return K(q(Q),ie,M,V,W);throw ie=String(Q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return re}function U(Q,ie,M){if(Q==null)return Q;var V=[],W=0;return K(Q,V,"","",function(ee){return ie.call(M,ee,W++)}),V}function J(Q){if(Q._status===-1){var ie=Q._result;ie=ie(),ie.then(function(M){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=M)},function(M){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=M)}),Q._status===-1&&(Q._status=0,Q._result=ie)}if(Q._status===1)return Q._result.default;throw Q._result}var F=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function X(){}return ja.Children={map:U,forEach:function(Q,ie,M){U(Q,function(){ie.apply(this,arguments)},M)},count:function(Q){var ie=0;return U(Q,function(){ie++}),ie},toArray:function(Q){return U(Q,function(ie){return ie})||[]},only:function(Q){if(!I(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},ja.Component=b,ja.Fragment=r,ja.Profiler=s,ja.PureComponent=S,ja.StrictMode=a,ja.Suspense=c,ja.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ja.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return C.H.useMemoCache(Q)}},ja.cache=function(Q){return function(){return Q.apply(null,arguments)}},ja.cloneElement=function(Q,ie,M){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var V=x({},Q.props),W=Q.key,ee=void 0;if(ie!=null)for(re in ie.ref!==void 0&&(ee=void 0),ie.key!==void 0&&(W=""+ie.key),ie)!D.call(ie,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&ie.ref===void 0||(V[re]=ie[re]);var re=arguments.length-2;if(re===1)V.children=M;else if(1<re){for(var ne=Array(re),ce=0;ce<re;ce++)ne[ce]=arguments[ce+2];V.children=ne}return E(Q.type,W,void 0,void 0,ee,V)},ja.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:i,_context:Q},Q},ja.createElement=function(Q,ie,M){var V,W={},ee=null;if(ie!=null)for(V in ie.key!==void 0&&(ee=""+ie.key),ie)D.call(ie,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(W[V]=ie[V]);var re=arguments.length-2;if(re===1)W.children=M;else if(1<re){for(var ne=Array(re),ce=0;ce<re;ce++)ne[ce]=arguments[ce+2];W.children=ne}if(Q&&Q.defaultProps)for(V in re=Q.defaultProps,re)W[V]===void 0&&(W[V]=re[V]);return E(Q,ee,void 0,void 0,null,W)},ja.createRef=function(){return{current:null}},ja.forwardRef=function(Q){return{$$typeof:l,render:Q}},ja.isValidElement=I,ja.lazy=function(Q){return{$$typeof:u,_payload:{_status:-1,_result:Q},_init:J}},ja.memo=function(Q,ie){return{$$typeof:d,type:Q,compare:ie===void 0?null:ie}},ja.startTransition=function(Q){var ie=C.T,M={};C.T=M;try{var V=Q(),W=C.S;W!==null&&W(M,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(X,F)}catch(ee){F(ee)}finally{C.T=ie}},ja.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ja.use=function(Q){return C.H.use(Q)},ja.useActionState=function(Q,ie,M){return C.H.useActionState(Q,ie,M)},ja.useCallback=function(Q,ie){return C.H.useCallback(Q,ie)},ja.useContext=function(Q){return C.H.useContext(Q)},ja.useDebugValue=function(){},ja.useDeferredValue=function(Q,ie){return C.H.useDeferredValue(Q,ie)},ja.useEffect=function(Q,ie,M){var V=C.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(Q,ie)},ja.useId=function(){return C.H.useId()},ja.useImperativeHandle=function(Q,ie,M){return C.H.useImperativeHandle(Q,ie,M)},ja.useInsertionEffect=function(Q,ie){return C.H.useInsertionEffect(Q,ie)},ja.useLayoutEffect=function(Q,ie){return C.H.useLayoutEffect(Q,ie)},ja.useMemo=function(Q,ie){return C.H.useMemo(Q,ie)},ja.useOptimistic=function(Q,ie){return C.H.useOptimistic(Q,ie)},ja.useReducer=function(Q,ie,M){return C.H.useReducer(Q,ie,M)},ja.useRef=function(Q){return C.H.useRef(Q)},ja.useState=function(Q){return C.H.useState(Q)},ja.useSyncExternalStore=function(Q,ie,M){return C.H.useSyncExternalStore(Q,ie,M)},ja.useTransition=function(){return C.H.useTransition()},ja.version="19.1.0",ja}var DM;function sg(){return DM||(DM=1,Lk.exports=HJ()),Lk.exports}var j=sg();const Yt=Vd(j),uw=VJ({__proto__:null,default:Yt},[j]);var Bk={exports:{}},vb={},Uk={exports:{}},$k={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM;function WJ(){return AM||(AM=1,function(e){function t(U,J){var F=U.length;U.push(J);e:for(;0<F;){var X=F-1>>>1,Q=U[X];if(0<s(Q,J))U[X]=J,U[F]=Q,F=X;else break e}}function r(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var J=U[0],F=U.pop();if(F!==J){U[0]=F;e:for(var X=0,Q=U.length,ie=Q>>>1;X<ie;){var M=2*(X+1)-1,V=U[M],W=M+1,ee=U[W];if(0>s(V,F))W<Q&&0>s(ee,V)?(U[X]=ee,U[W]=F,X=W):(U[X]=V,U[M]=F,X=M);else if(W<Q&&0>s(ee,F))U[X]=ee,U[W]=F,X=W;else break e}}return J}function s(U,J){var F=U.sortIndex-J.sortIndex;return F!==0?F:U.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,x=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function k(U){for(var J=r(d);J!==null;){if(J.callback===null)a(d);else if(J.startTime<=U)a(d),J.sortIndex=J.expirationTime,t(c,J);else break;J=r(d)}}function C(U){if(g=!1,k(U),!x)if(r(c)!==null)x=!0,D||(D=!0,O());else{var J=r(d);J!==null&&K(C,J.startTime-U)}}var D=!1,E=-1,A=5,I=-1;function L(){return b?!0:!(e.unstable_now()-I<A)}function P(){if(b=!1,D){var U=e.unstable_now();I=U;var J=!0;try{e:{x=!1,g&&(g=!1,S(E),E=-1),p=!0;var F=f;try{t:{for(k(U),h=r(c);h!==null&&!(h.expirationTime>U&&L());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Q=X(h.expirationTime<=U);if(U=e.unstable_now(),typeof Q=="function"){h.callback=Q,k(U),J=!0;break t}h===r(c)&&a(c),k(U)}else a(c);h=r(c)}if(h!==null)J=!0;else{var ie=r(d);ie!==null&&K(C,ie.startTime-U),J=!1}}break e}finally{h=null,f=F,p=!1}J=void 0}}finally{J?O():D=!1}}}var O;if(typeof w=="function")O=function(){w(P)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,q=Y.port2;Y.port1.onmessage=P,O=function(){q.postMessage(null)}}else O=function(){y(P,0)};function K(U,J){E=y(function(){U(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(U){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var F=f;f=J;try{return U()}finally{f=F}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=f;f=U;try{return J()}finally{f=F}},e.unstable_scheduleCallback=function(U,J,F){var X=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=F+Q,U={id:u++,callback:J,priorityLevel:U,startTime:F,expirationTime:Q,sortIndex:-1},F>X?(U.sortIndex=F,t(d,U),r(c)===null&&U===r(d)&&(g?(S(E),E=-1):g=!0,K(C,F-X))):(U.sortIndex=Q,t(c,U),x||p||(x=!0,D||(D=!0,O()))),U},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(U){var J=f;return function(){var F=f;f=J;try{return U.apply(this,arguments)}finally{f=F}}}}($k)),$k}var TM;function GJ(){return TM||(TM=1,Uk.exports=WJ()),Uk.exports}var Vk={exports:{}},fo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM;function YJ(){if(IM)return fo;IM=1;var e=sg();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return fo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,fo.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},fo.flushSync=function(c){var d=o.T,u=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=u,a.d.f()}},fo.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},fo.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},fo.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),f=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:p}):u==="script"&&a.d.X(c,{crossOrigin:h,integrity:f,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},fo.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},fo.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);a.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},fo.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},fo.requestFormReset=function(c){a.d.r(c)},fo.unstable_batchedUpdates=function(c,d){return c(d)},fo.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},fo.useFormStatus=function(){return o.H.useHostTransitionStatus()},fo.version="19.1.0",fo}var PM;function cU(){if(PM)return Vk.exports;PM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vk.exports=YJ(),Vk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OM;function KJ(){if(OM)return vb;OM=1;var e=GJ(),t=sg(),r=cU();function a(m){var v="https://react.dev/errors/"+m;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)v+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var v=m,N=m;if(m.alternate)for(;v.return;)v=v.return;else{m=v;do v=m,(v.flags&4098)!==0&&(N=v.return),m=v.return;while(m)}return v.tag===3?N:null}function o(m){if(m.tag===13){var v=m.memoizedState;if(v===null&&(m=m.alternate,m!==null&&(v=m.memoizedState)),v!==null)return v.dehydrated}return null}function l(m){if(i(m)!==m)throw Error(a(188))}function c(m){var v=m.alternate;if(!v){if(v=i(m),v===null)throw Error(a(188));return v!==m?null:m}for(var N=m,_=v;;){var R=N.return;if(R===null)break;var H=R.alternate;if(H===null){if(_=R.return,_!==null){N=_;continue}break}if(R.child===H.child){for(H=R.child;H;){if(H===N)return l(R),m;if(H===_)return l(R),v;H=H.sibling}throw Error(a(188))}if(N.return!==_.return)N=R,_=H;else{for(var me=!1,Ee=R.child;Ee;){if(Ee===N){me=!0,N=R,_=H;break}if(Ee===_){me=!0,_=R,N=H;break}Ee=Ee.sibling}if(!me){for(Ee=H.child;Ee;){if(Ee===N){me=!0,N=H,_=R;break}if(Ee===_){me=!0,_=H,N=R;break}Ee=Ee.sibling}if(!me)throw Error(a(189))}}if(N.alternate!==_)throw Error(a(190))}if(N.tag!==3)throw Error(a(188));return N.stateNode.current===N?m:v}function d(m){var v=m.tag;if(v===5||v===26||v===27||v===6)return m;for(m=m.child;m!==null;){if(v=d(m),v!==null)return v;m=m.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(m){return m===null||typeof m!="object"?null:(m=P&&m[P]||m["@@iterator"],typeof m=="function"?m:null)}var Y=Symbol.for("react.client.reference");function q(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===Y?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case x:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList";case I:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case p:return"Portal";case w:return(m.displayName||"Context")+".Provider";case S:return(m._context.displayName||"Context")+".Consumer";case k:var v=m.render;return m=m.displayName,m||(m=v.displayName||v.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case E:return v=m.displayName||null,v!==null?v:q(m.type)||"Memo";case A:v=m._payload,m=m._init;try{return q(m(v))}catch{}}return null}var K=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},X=[],Q=-1;function ie(m){return{current:m}}function M(m){0>Q||(m.current=X[Q],X[Q]=null,Q--)}function V(m,v){Q++,X[Q]=m.current,m.current=v}var W=ie(null),ee=ie(null),re=ie(null),ne=ie(null);function ce(m,v){switch(V(re,v),V(ee,m),V(W,null),v.nodeType){case 9:case 11:m=(m=v.documentElement)&&(m=m.namespaceURI)?eM(m):0;break;default:if(m=v.tagName,v=v.namespaceURI)v=eM(v),m=tM(v,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}M(W),V(W,m)}function ae(){M(W),M(ee),M(re)}function Z(m){m.memoizedState!==null&&V(ne,m);var v=W.current,N=tM(v,m.type);v!==N&&(V(ee,m),V(W,N))}function de(m){ee.current===m&&(M(W),M(ee)),ne.current===m&&(M(ne),ub._currentValue=F)}var z=Object.prototype.hasOwnProperty,se=e.unstable_scheduleCallback,Ne=e.unstable_cancelCallback,ue=e.unstable_shouldYield,oe=e.unstable_requestPaint,ye=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,Me=e.unstable_ImmediatePriority,He=e.unstable_UserBlockingPriority,et=e.unstable_NormalPriority,ft=e.unstable_LowPriority,Be=e.unstable_IdlePriority,dt=e.log,Tt=e.unstable_setDisableYieldValue,At=null,qt=null;function xe(m){if(typeof dt=="function"&&Tt(m),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(At,m)}catch{}}var he=Math.clz32?Math.clz32:De,ve=Math.log,pe=Math.LN2;function De(m){return m>>>=0,m===0?32:31-(ve(m)/pe|0)|0}var Ke=256,Nt=4194304;function Je(m){var v=m&42;if(v!==0)return v;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function Qe(m,v,N){var _=m.pendingLanes;if(_===0)return 0;var R=0,H=m.suspendedLanes,me=m.pingedLanes;m=m.warmLanes;var Ee=_&134217727;return Ee!==0?(_=Ee&~H,_!==0?R=Je(_):(me&=Ee,me!==0?R=Je(me):N||(N=Ee&~m,N!==0&&(R=Je(N))))):(Ee=_&~H,Ee!==0?R=Je(Ee):me!==0?R=Je(me):N||(N=_&~m,N!==0&&(R=Je(N)))),R===0?0:v!==0&&v!==R&&(v&H)===0&&(H=R&-R,N=v&-v,H>=N||H===32&&(N&4194048)!==0)?v:R}function Ue(m,v){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&v)===0}function qe(m,v){switch(m){case 1:case 2:case 4:case 8:case 64:return v+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var m=Ke;return Ke<<=1,(Ke&4194048)===0&&(Ke=256),m}function Ie(){var m=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),m}function Xe(m){for(var v=[],N=0;31>N;N++)v.push(m);return v}function Ye(m,v){m.pendingLanes|=v,v!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function lt(m,v,N,_,R,H){var me=m.pendingLanes;m.pendingLanes=N,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=N,m.entangledLanes&=N,m.errorRecoveryDisabledLanes&=N,m.shellSuspendCounter=0;var Ee=m.entanglements,Ze=m.expirationTimes,Dt=m.hiddenUpdates;for(N=me&~N;0<N;){var Gt=31-he(N),tr=1<<Gt;Ee[Gt]=0,Ze[Gt]=-1;var It=Dt[Gt];if(It!==null)for(Dt[Gt]=null,Gt=0;Gt<It.length;Gt++){var Pt=It[Gt];Pt!==null&&(Pt.lane&=-536870913)}N&=~tr}_!==0&&Mt(m,_,0),H!==0&&R===0&&m.tag!==0&&(m.suspendedLanes|=H&~(me&~v))}function Mt(m,v,N){m.pendingLanes|=v,m.suspendedLanes&=~v;var _=31-he(v);m.entangledLanes|=v,m.entanglements[_]=m.entanglements[_]|1073741824|N&4194090}function Ae(m,v){var N=m.entangledLanes|=v;for(m=m.entanglements;N;){var _=31-he(N),R=1<<_;R&v|m[_]&v&&(m[_]|=v),N&=~R}}function ke(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function ot(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function bt(){var m=J.p;return m!==0?m:(m=window.event,m===void 0?32:yM(m.type))}function Xt(m,v){var N=J.p;try{return J.p=m,v()}finally{J.p=N}}var Ft=Math.random().toString(36).slice(2),rr="__reactFiber$"+Ft,pr="__reactProps$"+Ft,jr="__reactContainer$"+Ft,vt="__reactEvents$"+Ft,Lt="__reactListeners$"+Ft,fe="__reactHandles$"+Ft,Re="__reactResources$"+Ft,Te="__reactMarker$"+Ft;function _e(m){delete m[rr],delete m[pr],delete m[vt],delete m[Lt],delete m[fe]}function Le(m){var v=m[rr];if(v)return v;for(var N=m.parentNode;N;){if(v=N[jr]||N[rr]){if(N=v.alternate,v.child!==null||N!==null&&N.child!==null)for(m=sM(m);m!==null;){if(N=m[rr])return N;m=sM(m)}return v}m=N,N=m.parentNode}return null}function Ve(m){if(m=m[rr]||m[jr]){var v=m.tag;if(v===5||v===6||v===13||v===26||v===27||v===3)return m}return null}function pt(m){var v=m.tag;if(v===5||v===26||v===27||v===6)return m.stateNode;throw Error(a(33))}function wt(m){var v=m[Re];return v||(v=m[Re]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function st(m){m[Te]=!0}var St=new Set,Ct={};function Jt(m,v){ir(m,v),ir(m+"Capture",v)}function ir(m,v){for(Ct[m]=v,m=0;m<v.length;m++)St.add(v[m])}var xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),or={},ze={};function dr(m){return z.call(ze,m)?!0:z.call(or,m)?!1:xr.test(m)?ze[m]=!0:(or[m]=!0,!1)}function ur(m,v,N){if(dr(v))if(N===null)m.removeAttribute(v);else{switch(typeof N){case"undefined":case"function":case"symbol":m.removeAttribute(v);return;case"boolean":var _=v.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){m.removeAttribute(v);return}}m.setAttribute(v,""+N)}}function qr(m,v,N){if(N===null)m.removeAttribute(v);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(v);return}m.setAttribute(v,""+N)}}function va(m,v,N,_){if(_===null)m.removeAttribute(N);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(N);return}m.setAttributeNS(v,N,""+_)}}var rn,Qs;function Gn(m){if(rn===void 0)try{throw Error()}catch(N){var v=N.stack.trim().match(/\n( *(at )?)/);rn=v&&v[1]||"",Qs=-1<N.stack.indexOf(`
    at`)?" (<anonymous>)":-1<N.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rn+m+Qs}var xs=!1;function As(m,v){if(!m||xs)return"";xs=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(v){var tr=function(){throw Error()};if(Object.defineProperty(tr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tr,[])}catch(Pt){var It=Pt}Reflect.construct(m,[],tr)}else{try{tr.call()}catch(Pt){It=Pt}m.call(tr.prototype)}}else{try{throw Error()}catch(Pt){It=Pt}(tr=m())&&typeof tr.catch=="function"&&tr.catch(function(){})}}catch(Pt){if(Pt&&It&&typeof Pt.stack=="string")return[Pt.stack,It.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=_.DetermineComponentFrameRoot(),me=H[0],Ee=H[1];if(me&&Ee){var Ze=me.split(`
`),Dt=Ee.split(`
`);for(R=_=0;_<Ze.length&&!Ze[_].includes("DetermineComponentFrameRoot");)_++;for(;R<Dt.length&&!Dt[R].includes("DetermineComponentFrameRoot");)R++;if(_===Ze.length||R===Dt.length)for(_=Ze.length-1,R=Dt.length-1;1<=_&&0<=R&&Ze[_]!==Dt[R];)R--;for(;1<=_&&0<=R;_--,R--)if(Ze[_]!==Dt[R]){if(_!==1||R!==1)do if(_--,R--,0>R||Ze[_]!==Dt[R]){var Gt=`
`+Ze[_].replace(" at new "," at ");return m.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",m.displayName)),Gt}while(1<=_&&0<=R);break}}}finally{xs=!1,Error.prepareStackTrace=N}return(N=m?m.displayName||m.name:"")?Gn(N):""}function yt(m){switch(m.tag){case 26:case 27:case 5:return Gn(m.type);case 16:return Gn("Lazy");case 13:return Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 15:return As(m.type,!1);case 11:return As(m.type.render,!1);case 1:return As(m.type,!0);case 31:return Gn("Activity");default:return""}}function mr(m){try{var v="";do v+=yt(m),m=m.return;while(m);return v}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}function hr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Kr(m){var v=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Rr(m){var v=Kr(m)?"checked":"value",N=Object.getOwnPropertyDescriptor(m.constructor.prototype,v),_=""+m[v];if(!m.hasOwnProperty(v)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var R=N.get,H=N.set;return Object.defineProperty(m,v,{configurable:!0,get:function(){return R.call(this)},set:function(me){_=""+me,H.call(this,me)}}),Object.defineProperty(m,v,{enumerable:N.enumerable}),{getValue:function(){return _},setValue:function(me){_=""+me},stopTracking:function(){m._valueTracker=null,delete m[v]}}}}function cn(m){m._valueTracker||(m._valueTracker=Rr(m))}function Zo(m){if(!m)return!1;var v=m._valueTracker;if(!v)return!0;var N=v.getValue(),_="";return m&&(_=Kr(m)?m.checked?"true":"false":m.value),m=_,m!==N?(v.setValue(m),!0):!1}function as(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var Bo=/[\n"\\]/g;function xa(m){return m.replace(Bo,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function ui(m,v,N,_,R,H,me,Ee){m.name="",me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?m.type=me:m.removeAttribute("type"),v!=null?me==="number"?(v===0&&m.value===""||m.value!=v)&&(m.value=""+hr(v)):m.value!==""+hr(v)&&(m.value=""+hr(v)):me!=="submit"&&me!=="reset"||m.removeAttribute("value"),v!=null?tl(m,me,hr(v)):N!=null?tl(m,me,hr(N)):_!=null&&m.removeAttribute("value"),R==null&&H!=null&&(m.defaultChecked=!!H),R!=null&&(m.checked=R&&typeof R!="function"&&typeof R!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?m.name=""+hr(Ee):m.removeAttribute("name")}function el(m,v,N,_,R,H,me,Ee){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(m.type=H),v!=null||N!=null){if(!(H!=="submit"&&H!=="reset"||v!=null))return;N=N!=null?""+hr(N):"",v=v!=null?""+hr(v):N,Ee||v===m.value||(m.value=v),m.defaultValue=v}_=_??R,_=typeof _!="function"&&typeof _!="symbol"&&!!_,m.checked=Ee?m.checked:!!_,m.defaultChecked=!!_,me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"&&(m.name=me)}function tl(m,v,N){v==="number"&&as(m.ownerDocument)===m||m.defaultValue===""+N||(m.defaultValue=""+N)}function Vi(m,v,N,_){if(m=m.options,v){v={};for(var R=0;R<N.length;R++)v["$"+N[R]]=!0;for(N=0;N<m.length;N++)R=v.hasOwnProperty("$"+m[N].value),m[N].selected!==R&&(m[N].selected=R),R&&_&&(m[N].defaultSelected=!0)}else{for(N=""+hr(N),v=null,R=0;R<m.length;R++){if(m[R].value===N){m[R].selected=!0,_&&(m[R].defaultSelected=!0);return}v!==null||m[R].disabled||(v=m[R])}v!==null&&(v.selected=!0)}}function qa(m,v,N){if(v!=null&&(v=""+hr(v),v!==m.value&&(m.value=v),N==null)){m.defaultValue!==v&&(m.defaultValue=v);return}m.defaultValue=N!=null?""+hr(N):""}function qi(m,v,N,_){if(v==null){if(_!=null){if(N!=null)throw Error(a(92));if(K(_)){if(1<_.length)throw Error(a(93));_=_[0]}N=_}N==null&&(N=""),v=N}N=hr(v),m.defaultValue=N,_=m.textContent,_===N&&_!==""&&_!==null&&(m.value=_)}function Ts(m,v){if(v){var N=m.firstChild;if(N&&N===m.lastChild&&N.nodeType===3){N.nodeValue=v;return}}m.textContent=v}var fc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sd(m,v,N){var _=v.indexOf("--")===0;N==null||typeof N=="boolean"||N===""?_?m.setProperty(v,""):v==="float"?m.cssFloat="":m[v]="":_?m.setProperty(v,N):typeof N!="number"||N===0||fc.has(v)?v==="float"?m.cssFloat=N:m[v]=(""+N).trim():m[v]=N+"px"}function El(m,v,N){if(v!=null&&typeof v!="object")throw Error(a(62));if(m=m.style,N!=null){for(var _ in N)!N.hasOwnProperty(_)||v!=null&&v.hasOwnProperty(_)||(_.indexOf("--")===0?m.setProperty(_,""):_==="float"?m.cssFloat="":m[_]="");for(var R in v)_=v[R],v.hasOwnProperty(R)&&N[R]!==_&&sd(m,R,_)}else for(var H in v)v.hasOwnProperty(H)&&sd(m,H,v[H])}function id(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(m){return mc.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}var pc=null;function vs(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var xc=null,Tl=null;function Jr(m){var v=Ve(m);if(v&&(m=v.stateNode)){var N=m[pr]||null;e:switch(m=v.stateNode,v.type){case"input":if(ui(m,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name),v=N.name,N.type==="radio"&&v!=null){for(N=m;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll('input[name="'+xa(""+v)+'"][type="radio"]'),v=0;v<N.length;v++){var _=N[v];if(_!==m&&_.form===m.form){var R=_[pr]||null;if(!R)throw Error(a(90));ui(_,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(v=0;v<N.length;v++)_=N[v],_.form===m.form&&Zo(_)}break e;case"textarea":qa(m,N.value,N.defaultValue);break e;case"select":v=N.value,v!=null&&Vi(m,!!N.multiple,v,!1)}}}var hh=!1;function If(m,v,N){if(hh)return m(v,N);hh=!0;try{var _=m(v);return _}finally{if(hh=!1,(xc!==null||Tl!==null)&&(jj(),xc&&(v=xc,m=Tl,Tl=xc=null,Jr(v),m)))for(v=0;v<m.length;v++)Jr(m[v])}}function at(m,v){var N=m.stateNode;if(N===null)return null;var _=N[pr]||null;if(_===null)return null;N=_[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(m=m.type,_=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!_;break e;default:m=!1}if(m)return null;if(N&&typeof N!="function")throw Error(a(231,v,typeof N));return N}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(fr)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){ar=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{ar=!1}var _r=null,En=null,rl=null;function Pf(){if(rl)return rl;var m,v=En,N=v.length,_,R="value"in _r?_r.value:_r.textContent,H=R.length;for(m=0;m<N&&v[m]===R[m];m++);var me=N-m;for(_=1;_<=me&&v[N-_]===R[H-_];_++);return rl=R.slice(m,1<_?1-_:void 0)}function vc(m){var v=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&v===13&&(m=13)):m=v,m===10&&(m=13),32<=m||m===13?m:0}function al(){return!0}function nl(){return!1}function Is(m){function v(N,_,R,H,me){this._reactName=N,this._targetInst=R,this.type=_,this.nativeEvent=H,this.target=me,this.currentTarget=null;for(var Ee in m)m.hasOwnProperty(Ee)&&(N=m[Ee],this[Ee]=N?N(H):H[Ee]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?al:nl,this.isPropagationStopped=nl,this}return u(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),v}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=Is(Ci),sl=u({},Ci,{view:0,detail:0}),Of=Is(sl),od,Mf,Xd,Uo=u({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Xd&&(Xd&&m.type==="mousemove"?(od=m.screenX-Xd.screenX,Mf=m.screenY-Xd.screenY):Mf=od=0,Xd=m),od)},movementY:function(m){return"movementY"in m?m.movementY:Mf}}),bc=Is(Uo),Eg=u({},Uo,{dataTransfer:0}),Qd=Is(Eg),Il=u({},sl,{relatedTarget:0}),fh=Is(Il),mh=u({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Dg=Is(mh),Rf=u({},Ci,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Ag=Is(Rf),xp=u({},Ci,{data:0}),Ff=Is(xp),dv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gp(m){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(m):(m=vp[m])?!!v[m]:!1}function Bf(){return gp}var Tg=u({},sl,{key:function(m){if(m.key){var v=dv[m.key]||m.key;if(v!=="Unidentified")return v}return m.type==="keypress"?(m=vc(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Lf[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(m){return m.type==="keypress"?vc(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?vc(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Uf=Is(Tg),ph=u({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=Is(ph),Jd=u({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),bp=Is(Jd),G=u({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=Is(G),Ge=u({},Uo,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),rt=Is(Ge),jt=u({},Ci,{newState:0,oldState:0}),Vt=Is(jt),lr=[9,13,27,32],wr=fr&&"CompositionEvent"in window,Fr=null;fr&&"documentMode"in document&&(Fr=document.documentMode);var ha=fr&&"TextEvent"in window&&!Fr,ca=fr&&(!wr||Fr&&8<Fr&&11>=Fr),Ia=" ",In=!1;function Ln(m,v){switch(m){case"keyup":return lr.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ns(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var ss=!1;function Js(m,v){switch(m){case"compositionend":return ns(v);case"keypress":return v.which!==32?null:(In=!0,Ia);case"textInput":return m=v.data,m===Ia&&In?null:m;default:return null}}function Pl(m,v){if(ss)return m==="compositionend"||!wr&&Ln(m,v)?(m=Pf(),rl=En=_r=null,ss=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return ca&&v.locale!=="ko"?null:v.data;default:return null}}var $o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ol(m){var v=m&&m.nodeName&&m.nodeName.toLowerCase();return v==="input"?!!$o[m.type]:v==="textarea"}function yp(m,v,N,_){xc?Tl?Tl.push(_):Tl=[_]:xc=_,v=_j(v,"onChange"),0<v.length&&(N=new gc("onChange","change",null,N,_),m.push({event:N,listeners:v}))}var ld=null,cd=null;function Vf(m){KO(m,0)}function Zd(m){var v=pt(m);if(Zo(v))return m}function qf(m,v){if(m==="change")return v}var xh=!1;if(fr){var Ps;if(fr){var eu="oninput"in document;if(!eu){var vh=document.createElement("div");vh.setAttribute("oninput","return;"),eu=typeof vh.oninput=="function"}Ps=eu}else Ps=!1;xh=Ps&&(!document.documentMode||9<document.documentMode)}function gh(){ld&&(ld.detachEvent("onpropertychange",zf),cd=ld=null)}function zf(m){if(m.propertyName==="value"&&Zd(cd)){var v=[];yp(v,cd,m,vs(m)),If(Vf,v)}}function oo(m,v,N){m==="focusin"?(gh(),ld=v,cd=N,ld.attachEvent("onpropertychange",zf)):m==="focusout"&&gh()}function Ig(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Zd(cd)}function jp(m,v){if(m==="click")return Zd(v)}function uv(m,v){if(m==="input"||m==="change")return Zd(v)}function il(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var Zs=typeof Object.is=="function"?Object.is:il;function tu(m,v){if(Zs(m,v))return!0;if(typeof m!="object"||m===null||typeof v!="object"||v===null)return!1;var N=Object.keys(m),_=Object.keys(v);if(N.length!==_.length)return!1;for(_=0;_<N.length;_++){var R=N[_];if(!z.call(v,R)||!Zs(m[R],v[R]))return!1}return!0}function Np(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function dd(m,v){var N=Np(m);m=0;for(var _;N;){if(N.nodeType===3){if(_=m+N.textContent.length,m<=v&&_>=v)return{node:N,offset:v-m};m=_}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=Np(N)}}function ru(m,v){return m&&v?m===v?!0:m&&m.nodeType===3?!1:v&&v.nodeType===3?ru(m,v.parentNode):"contains"in m?m.contains(v):m.compareDocumentPosition?!!(m.compareDocumentPosition(v)&16):!1:!1}function zi(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var v=as(m.document);v instanceof m.HTMLIFrameElement;){try{var N=typeof v.contentWindow.location.href=="string"}catch{N=!1}if(N)m=v.contentWindow;else break;v=as(m.document)}return v}function hi(m){var v=m&&m.nodeName&&m.nodeName.toLowerCase();return v&&(v==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||v==="textarea"||m.contentEditable==="true")}var au=fr&&"documentMode"in document&&11>=document.documentMode,lo=null,Ml=null,yc=null,Rl=!1;function Yn(m,v,N){var _=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;Rl||lo==null||lo!==as(_)||(_=lo,"selectionStart"in _&&hi(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),yc&&tu(yc,_)||(yc=_,_=_j(Ml,"onSelect"),0<_.length&&(v=new gc("onSelect","select",null,v,N),m.push({event:v,listeners:_}),v.target=lo)))}function Fl(m,v){var N={};return N[m.toLowerCase()]=v.toLowerCase(),N["Webkit"+m]="webkit"+v,N["Moz"+m]="moz"+v,N}var gs={animationend:Fl("Animation","AnimationEnd"),animationiteration:Fl("Animation","AnimationIteration"),animationstart:Fl("Animation","AnimationStart"),transitionrun:Fl("Transition","TransitionRun"),transitionstart:Fl("Transition","TransitionStart"),transitioncancel:Fl("Transition","TransitionCancel"),transitionend:Fl("Transition","TransitionEnd")},co={},bh={};fr&&(bh=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function jc(m){if(co[m])return co[m];if(!gs[m])return m;var v=gs[m],N;for(N in v)if(v.hasOwnProperty(N)&&N in bh)return co[m]=v[N];return m}var Hf=jc("animationend"),nu=jc("animationiteration"),su=jc("animationstart"),iu=jc("transitionrun"),yh=jc("transitionstart"),Wf=jc("transitioncancel"),ou=jc("transitionend"),ud=new Map,jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jh.push("scrollEnd");function Kn(m,v){ud.set(m,v),Jt(v,[m])}var Vo=new WeakMap;function Ca(m,v){if(typeof m=="object"&&m!==null){var N=Vo.get(m);return N!==void 0?N:(v={value:m,source:v,stack:mr(v)},Vo.set(m,v),v)}return{value:m,source:v,stack:mr(v)}}var ka=[],wn=0,is=0;function ol(){for(var m=wn,v=is=wn=0;v<m;){var N=ka[v];ka[v++]=null;var _=ka[v];ka[v++]=null;var R=ka[v];ka[v++]=null;var H=ka[v];if(ka[v++]=null,_!==null&&R!==null){var me=_.pending;me===null?R.next=R:(R.next=me.next,me.next=R),_.pending=R}H!==0&&hv(N,R,H)}}function lu(m,v,N,_){ka[wn++]=m,ka[wn++]=v,ka[wn++]=N,ka[wn++]=_,is|=_,m.lanes|=_,m=m.alternate,m!==null&&(m.lanes|=_)}function cu(m,v,N,_){return lu(m,v,N,_),Nh(m)}function hd(m,v){return lu(m,null,null,v),Nh(m)}function hv(m,v,N){m.lanes|=N;var _=m.alternate;_!==null&&(_.lanes|=N);for(var R=!1,H=m.return;H!==null;)H.childLanes|=N,_=H.alternate,_!==null&&(_.childLanes|=N),H.tag===22&&(m=H.stateNode,m===null||m._visibility&1||(R=!0)),m=H,H=H.return;return m.tag===3?(H=m.stateNode,R&&v!==null&&(R=31-he(N),m=H.hiddenUpdates,_=m[R],_===null?m[R]=[v]:_.push(v),v.lane=N|536870912),H):null}function Nh(m){if(50<ab)throw ab=0,ok=null,Error(a(185));for(var v=m.return;v!==null;)m=v,v=m.return;return m.tag===3?m.stateNode:null}var ei={};function ll(m,v,N,_){this.tag=m,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(m,v,N,_){return new ll(m,v,N,_)}function Gf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Nc(m,v){var N=m.alternate;return N===null?(N=ki(m.tag,v,m.key,m.mode),N.elementType=m.elementType,N.type=m.type,N.stateNode=m.stateNode,N.alternate=m,m.alternate=N):(N.pendingProps=v,N.type=m.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=m.flags&65011712,N.childLanes=m.childLanes,N.lanes=m.lanes,N.child=m.child,N.memoizedProps=m.memoizedProps,N.memoizedState=m.memoizedState,N.updateQueue=m.updateQueue,v=m.dependencies,N.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},N.sibling=m.sibling,N.index=m.index,N.ref=m.ref,N.refCleanup=m.refCleanup,N}function wp(m,v){m.flags&=65011714;var N=m.alternate;return N===null?(m.childLanes=0,m.lanes=v,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=N.childLanes,m.lanes=N.lanes,m.child=N.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=N.memoizedProps,m.memoizedState=N.memoizedState,m.updateQueue=N.updateQueue,m.type=N.type,v=N.dependencies,m.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),m}function wh(m,v,N,_,R,H){var me=0;if(_=m,typeof m=="function")Gf(m)&&(me=1);else if(typeof m=="string")me=DJ(m,N,W.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case I:return m=ki(31,N,v,R),m.elementType=I,m.lanes=H,m;case x:return fd(N.children,R,H,v);case g:me=8,R|=24;break;case b:return m=ki(12,N,v,R|2),m.elementType=b,m.lanes=H,m;case C:return m=ki(13,N,v,R),m.elementType=C,m.lanes=H,m;case D:return m=ki(19,N,v,R),m.elementType=D,m.lanes=H,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case y:case w:me=10;break e;case S:me=9;break e;case k:me=11;break e;case E:me=14;break e;case A:me=16,_=null;break e}me=29,N=Error(a(130,m===null?"null":typeof m,"")),_=null}return v=ki(me,N,v,R),v.elementType=m,v.type=_,v.lanes=H,v}function fd(m,v,N,_){return m=ki(7,m,_,v),m.lanes=N,m}function fv(m,v,N){return m=ki(6,m,null,v),m.lanes=N,m}function Sp(m,v,N){return v=ki(4,m.children!==null?m.children:[],m.key,v),v.lanes=N,v.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},v}var du=[],md=0,Yf=null,mv=0,cl=[],qo=0,Sh=null,pd=1,xd="";function Ch(m,v){du[md++]=mv,du[md++]=Yf,Yf=m,mv=v}function H1(m,v,N){cl[qo++]=pd,cl[qo++]=xd,cl[qo++]=Sh,Sh=m;var _=pd;m=xd;var R=32-he(_)-1;_&=~(1<<R),N+=1;var H=32-he(v)+R;if(30<H){var me=R-R%5;H=(_&(1<<me)-1).toString(32),_>>=me,R-=me,pd=1<<32-he(v)+R|N<<R|_,xd=H+m}else pd=1<<H|N<<R|_,xd=m}function Cp(m){m.return!==null&&(Ch(m,1),H1(m,1,0))}function kp(m){for(;m===Yf;)Yf=du[--md],du[md]=null,mv=du[--md],du[md]=null;for(;m===Sh;)Sh=cl[--qo],cl[qo]=null,xd=cl[--qo],cl[qo]=null,pd=cl[--qo],cl[qo]=null}var Os=null,Xn=null,za=!1,uu=null,wc=!1,Pg=Error(a(519));function kh(m){var v=Error(a(418,""));throw Kf(Ca(v,m)),Pg}function W1(m){var v=m.stateNode,N=m.type,_=m.memoizedProps;switch(v[rr]=m,v[pr]=_,N){case"dialog":Oa("cancel",v),Oa("close",v);break;case"iframe":case"object":case"embed":Oa("load",v);break;case"video":case"audio":for(N=0;N<sb.length;N++)Oa(sb[N],v);break;case"source":Oa("error",v);break;case"img":case"image":case"link":Oa("error",v),Oa("load",v);break;case"details":Oa("toggle",v);break;case"input":Oa("invalid",v),el(v,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),cn(v);break;case"select":Oa("invalid",v);break;case"textarea":Oa("invalid",v),qi(v,_.value,_.defaultValue,_.children),cn(v)}N=_.children,typeof N!="string"&&typeof N!="number"&&typeof N!="bigint"||v.textContent===""+N||_.suppressHydrationWarning===!0||ZO(v.textContent,N)?(_.popover!=null&&(Oa("beforetoggle",v),Oa("toggle",v)),_.onScroll!=null&&Oa("scroll",v),_.onScrollEnd!=null&&Oa("scrollend",v),_.onClick!=null&&(v.onclick=Ej),v=!0):v=!1,v||kh(m)}function vd(m){for(Os=m.return;Os;)switch(Os.tag){case 5:case 13:wc=!1;return;case 27:case 3:wc=!0;return;default:Os=Os.return}}function Hi(m){if(m!==Os)return!1;if(!za)return vd(m),za=!0,!1;var v=m.tag,N;if((N=v!==3&&v!==27)&&((N=v===5)&&(N=m.type,N=!(N!=="form"&&N!=="button")||wk(m.type,m.memoizedProps)),N=!N),N&&Xn&&kh(m),vd(m),v===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));e:{for(m=m.nextSibling,v=0;m;){if(m.nodeType===8)if(N=m.data,N==="/$"){if(v===0){Xn=Cd(m.nextSibling);break e}v--}else N!=="$"&&N!=="$!"&&N!=="$?"||v++;m=m.nextSibling}Xn=null}}else v===27?(v=Xn,hm(m.type)?(m=_k,_k=null,Xn=m):Xn=v):Xn=Os?Cd(m.stateNode.nextSibling):null;return!0}function zo(){Xn=Os=null,za=!1}function G1(){var m=uu;return m!==null&&(hl===null?hl=m:hl.push.apply(hl,m),uu=null),m}function Kf(m){uu===null?uu=[m]:uu.push(m)}var Sc=ie(null),ti=null,gd=null;function hu(m,v,N){V(Sc,v._currentValue),v._currentValue=N}function Cc(m){m._currentValue=Sc.current,M(Sc)}function pv(m,v,N){for(;m!==null;){var _=m.alternate;if((m.childLanes&v)!==v?(m.childLanes|=v,_!==null&&(_.childLanes|=v)):_!==null&&(_.childLanes&v)!==v&&(_.childLanes|=v),m===N)break;m=m.return}}function xv(m,v,N,_){var R=m.child;for(R!==null&&(R.return=m);R!==null;){var H=R.dependencies;if(H!==null){var me=R.child;H=H.firstContext;e:for(;H!==null;){var Ee=H;H=R;for(var Ze=0;Ze<v.length;Ze++)if(Ee.context===v[Ze]){H.lanes|=N,Ee=H.alternate,Ee!==null&&(Ee.lanes|=N),pv(H.return,N,m),_||(me=null);break e}H=Ee.next}}else if(R.tag===18){if(me=R.return,me===null)throw Error(a(341));me.lanes|=N,H=me.alternate,H!==null&&(H.lanes|=N),pv(me,N,m),me=null}else me=R.child;if(me!==null)me.return=R;else for(me=R;me!==null;){if(me===m){me=null;break}if(R=me.sibling,R!==null){R.return=me.return,me=R;break}me=me.return}R=me}}function Xf(m,v,N,_){m=null;for(var R=v,H=!1;R!==null;){if(!H){if((R.flags&524288)!==0)H=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var me=R.alternate;if(me===null)throw Error(a(387));if(me=me.memoizedProps,me!==null){var Ee=R.type;Zs(R.pendingProps.value,me.value)||(m!==null?m.push(Ee):m=[Ee])}}else if(R===ne.current){if(me=R.alternate,me===null)throw Error(a(387));me.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(m!==null?m.push(ub):m=[ub])}R=R.return}m!==null&&xv(v,m,N,_),v.flags|=262144}function vv(m){for(m=m.firstContext;m!==null;){if(!Zs(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function kc(m){ti=m,gd=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function Ms(m){return gv(ti,m)}function fu(m,v){return ti===null&&kc(m),gv(m,v)}function gv(m,v){var N=v._currentValue;if(v={context:v,memoizedValue:N,next:null},gd===null){if(m===null)throw Error(a(308));gd=v,m.dependencies={lanes:0,firstContext:v},m.flags|=524288}else gd=gd.next=v;return N}var IC=typeof AbortController<"u"?AbortController:function(){var m=[],v=this.signal={aborted:!1,addEventListener:function(N,_){m.push(_)}};this.abort=function(){v.aborted=!0,m.forEach(function(N){return N()})}},Y1=e.unstable_scheduleCallback,PC=e.unstable_NormalPriority,Rs={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Og(){return{controller:new IC,data:new Map,refCount:0}}function _p(m){m.refCount--,m.refCount===0&&Y1(PC,function(){m.controller.abort()})}var Ep=null,Mg=0,_h=0,bd=null;function OC(m,v){if(Ep===null){var N=Ep=[];Mg=0,_h=mk(),bd={status:"pending",value:void 0,then:function(_){N.push(_)}}}return Mg++,v.then(K1,K1),v}function K1(){if(--Mg===0&&Ep!==null){bd!==null&&(bd.status="fulfilled");var m=Ep;Ep=null,_h=0,bd=null;for(var v=0;v<m.length;v++)(0,m[v])()}}function X1(m,v){var N=[],_={status:"pending",value:null,reason:null,then:function(R){N.push(R)}};return m.then(function(){_.status="fulfilled",_.value=v;for(var R=0;R<N.length;R++)(0,N[R])(v)},function(R){for(_.status="rejected",_.reason=R,R=0;R<N.length;R++)(0,N[R])(void 0)}),_}var T=U.S;U.S=function(m,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&OC(m,v),T!==null&&T(m,v)};var B=ie(null);function te(){var m=B.current;return m!==null?m:On.pooledCache}function le(m,v){v===null?V(B,B.current):V(B,v.pool)}function ge(){var m=te();return m===null?null:{parent:Rs._currentValue,pool:m}}var we=Error(a(460)),Se=Error(a(474)),Ce=Error(a(542)),Pe={then:function(){}};function $e(m){return m=m.status,m==="fulfilled"||m==="rejected"}function nt(){}function Et(m,v,N){switch(N=m[N],N===void 0?m.push(v):N!==v&&(v.then(nt,nt),v=N),v.status){case"fulfilled":return v.value;case"rejected":throw m=v.reason,Zt(m),m;default:if(typeof v.status=="string")v.then(nt,nt);else{if(m=On,m!==null&&100<m.shellSuspendCounter)throw Error(a(482));m=v,m.status="pending",m.then(function(_){if(v.status==="pending"){var R=v;R.status="fulfilled",R.value=_}},function(_){if(v.status==="pending"){var R=v;R.status="rejected",R.reason=_}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw m=v.reason,Zt(m),m}throw kt=v,we}}var kt=null;function xt(){if(kt===null)throw Error(a(459));var m=kt;return kt=null,m}function Zt(m){if(m===we||m===Ce)throw Error(a(483))}var Rt=!1;function it(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ut(m,v){m=m.updateQueue,v.updateQueue===m&&(v.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function Wt(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function er(m,v,N){var _=m.updateQueue;if(_===null)return null;if(_=_.shared,(pn&2)!==0){var R=_.pending;return R===null?v.next=v:(v.next=R.next,R.next=v),_.pending=v,v=Nh(m),hv(m,null,N),v}return lu(m,_,v,N),Nh(m)}function Kt(m,v,N){if(v=v.updateQueue,v!==null&&(v=v.shared,(N&4194048)!==0)){var _=v.lanes;_&=m.pendingLanes,N|=_,v.lanes=N,Ae(m,N)}}function Sr(m,v){var N=m.updateQueue,_=m.alternate;if(_!==null&&(_=_.updateQueue,N===_)){var R=null,H=null;if(N=N.firstBaseUpdate,N!==null){do{var me={lane:N.lane,tag:N.tag,payload:N.payload,callback:null,next:null};H===null?R=H=me:H=H.next=me,N=N.next}while(N!==null);H===null?R=H=v:H=H.next=v}else R=H=v;N={baseState:_.baseState,firstBaseUpdate:R,lastBaseUpdate:H,shared:_.shared,callbacks:_.callbacks},m.updateQueue=N;return}m=N.lastBaseUpdate,m===null?N.firstBaseUpdate=v:m.next=v,N.lastBaseUpdate=v}var br=!1;function zr(){if(br){var m=bd;if(m!==null)throw m}}function yr(m,v,N,_){br=!1;var R=m.updateQueue;Rt=!1;var H=R.firstBaseUpdate,me=R.lastBaseUpdate,Ee=R.shared.pending;if(Ee!==null){R.shared.pending=null;var Ze=Ee,Dt=Ze.next;Ze.next=null,me===null?H=Dt:me.next=Dt,me=Ze;var Gt=m.alternate;Gt!==null&&(Gt=Gt.updateQueue,Ee=Gt.lastBaseUpdate,Ee!==me&&(Ee===null?Gt.firstBaseUpdate=Dt:Ee.next=Dt,Gt.lastBaseUpdate=Ze))}if(H!==null){var tr=R.baseState;me=0,Gt=Dt=Ze=null,Ee=H;do{var It=Ee.lane&-536870913,Pt=It!==Ee.lane;if(Pt?(Ua&It)===It:(_&It)===It){It!==0&&It===_h&&(br=!0),Gt!==null&&(Gt=Gt.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var oa=m,Qr=Ee;It=v;var Cn=N;switch(Qr.tag){case 1:if(oa=Qr.payload,typeof oa=="function"){tr=oa.call(Cn,tr,It);break e}tr=oa;break e;case 3:oa.flags=oa.flags&-65537|128;case 0:if(oa=Qr.payload,It=typeof oa=="function"?oa.call(Cn,tr,It):oa,It==null)break e;tr=u({},tr,It);break e;case 2:Rt=!0}}It=Ee.callback,It!==null&&(m.flags|=64,Pt&&(m.flags|=8192),Pt=R.callbacks,Pt===null?R.callbacks=[It]:Pt.push(It))}else Pt={lane:It,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},Gt===null?(Dt=Gt=Pt,Ze=tr):Gt=Gt.next=Pt,me|=It;if(Ee=Ee.next,Ee===null){if(Ee=R.shared.pending,Ee===null)break;Pt=Ee,Ee=Pt.next,Pt.next=null,R.lastBaseUpdate=Pt,R.shared.pending=null}}while(!0);Gt===null&&(Ze=tr),R.baseState=Ze,R.firstBaseUpdate=Dt,R.lastBaseUpdate=Gt,H===null&&(R.shared.lanes=0),lm|=me,m.lanes=me,m.memoizedState=tr}}function La(m,v){if(typeof m!="function")throw Error(a(191,m));m.call(v)}function Ka(m,v){var N=m.callbacks;if(N!==null)for(m.callbacks=null,m=0;m<N.length;m++)La(N[m],v)}var Sa=ie(null),ya=ie(0);function dn(m,v){m=Fh,V(ya,m),V(Sa,v),Fh=m|v.baseLanes}function Xa(){V(ya,Fh),V(Sa,Sa.current)}function ua(){Fh=ya.current,M(Sa),M(ya)}var mn=0,Yr=null,aa=null,Fa=null,Ba=!1,ri=!1,Fs=!1,os=0,ls=0,bs=null,dl=0;function Qa(){throw Error(a(321))}function ys(m,v){if(v===null)return!1;for(var N=0;N<v.length&&N<m.length;N++)if(!Zs(m[N],v[N]))return!1;return!0}function Ll(m,v,N,_,R,H){return mn=H,Yr=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,U.H=m===null||m.memoizedState===null?PP:OP,Fs=!1,H=N(_,R),Fs=!1,ri&&(H=Eh(v,N,_,R)),mu(m),H}function mu(m){U.H=lj;var v=aa!==null&&aa.next!==null;if(mn=0,Fa=aa=Yr=null,Ba=!1,ls=0,bs=null,v)throw Error(a(300));m===null||_i||(m=m.dependencies,m!==null&&vv(m)&&(_i=!0))}function Eh(m,v,N,_){Yr=m;var R=0;do{if(ri&&(bs=null),ls=0,ri=!1,25<=R)throw Error(a(301));if(R+=1,Fa=aa=null,m.updateQueue!=null){var H=m.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}U.H=UQ,H=v(N,_)}while(ri);return H}function pu(){var m=U.H,v=m.useState()[0];return v=typeof v.then=="function"?xu(v):v,m=m.useState()[0],(aa!==null?aa.memoizedState:null)!==m&&(Yr.flags|=1024),v}function Pn(){var m=os!==0;return os=0,m}function Dp(m,v,N){v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~N}function bv(m){if(Ba){for(m=m.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}Ba=!1}mn=0,Fa=aa=Yr=null,ri=!1,ls=os=0,bs=null}function Wi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fa===null?Yr.memoizedState=Fa=m:Fa=Fa.next=m,Fa}function Bn(){if(aa===null){var m=Yr.alternate;m=m!==null?m.memoizedState:null}else m=aa.next;var v=Fa===null?Yr.memoizedState:Fa.next;if(v!==null)Fa=v,aa=m;else{if(m===null)throw Yr.alternate===null?Error(a(467)):Error(a(310));aa=m,m={memoizedState:aa.memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},Fa===null?Yr.memoizedState=Fa=m:Fa=Fa.next=m}return Fa}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xu(m){var v=ls;return ls+=1,bs===null&&(bs=[]),m=Et(bs,m,v),v=Yr,(Fa===null?v.memoizedState:Fa.next)===null&&(v=v.alternate,U.H=v===null||v.memoizedState===null?PP:OP),m}function uo(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return xu(m);if(m.$$typeof===w)return Ms(m)}throw Error(a(438,String(m)))}function vu(m){var v=null,N=Yr.updateQueue;if(N!==null&&(v=N.memoCache),v==null){var _=Yr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(v={data:_.data.map(function(R){return R.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),N===null&&(N=Dh(),Yr.updateQueue=N),N.memoCache=v,N=v.data[v.index],N===void 0)for(N=v.data[v.index]=Array(m),_=0;_<m;_++)N[_]=L;return v.index++,N}function ho(m,v){return typeof v=="function"?v(m):v}function Ap(m){var v=Bn();return Qf(v,aa,m)}function Qf(m,v,N){var _=m.queue;if(_===null)throw Error(a(311));_.lastRenderedReducer=N;var R=m.baseQueue,H=_.pending;if(H!==null){if(R!==null){var me=R.next;R.next=H.next,H.next=me}v.baseQueue=R=H,_.pending=null}if(H=m.baseState,R===null)m.memoizedState=H;else{v=R.next;var Ee=me=null,Ze=null,Dt=v,Gt=!1;do{var tr=Dt.lane&-536870913;if(tr!==Dt.lane?(Ua&tr)===tr:(mn&tr)===tr){var It=Dt.revertLane;if(It===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),tr===_h&&(Gt=!0);else if((mn&It)===It){Dt=Dt.next,It===_h&&(Gt=!0);continue}else tr={lane:0,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Ze===null?(Ee=Ze=tr,me=H):Ze=Ze.next=tr,Yr.lanes|=It,lm|=It;tr=Dt.action,Fs&&N(H,tr),H=Dt.hasEagerState?Dt.eagerState:N(H,tr)}else It={lane:tr,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Ze===null?(Ee=Ze=It,me=H):Ze=Ze.next=It,Yr.lanes|=tr,lm|=tr;Dt=Dt.next}while(Dt!==null&&Dt!==v);if(Ze===null?me=H:Ze.next=Ee,!Zs(H,m.memoizedState)&&(_i=!0,Gt&&(N=bd,N!==null)))throw N;m.memoizedState=H,m.baseState=me,m.baseQueue=Ze,_.lastRenderedState=H}return R===null&&(_.lanes=0),[m.memoizedState,_.dispatch]}function yv(m){var v=Bn(),N=v.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=m;var _=N.dispatch,R=N.pending,H=v.memoizedState;if(R!==null){N.pending=null;var me=R=R.next;do H=m(H,me.action),me=me.next;while(me!==R);Zs(H,v.memoizedState)||(_i=!0),v.memoizedState=H,v.baseQueue===null&&(v.baseState=H),N.lastRenderedState=H}return[H,_]}function Tp(m,v,N){var _=Yr,R=Bn(),H=za;if(H){if(N===void 0)throw Error(a(407));N=N()}else N=v();var me=!Zs((aa||R).memoizedState,N);me&&(R.memoizedState=N,_i=!0),R=R.queue;var Ee=Jf.bind(null,_,R,m);if(tm(2048,8,Ee,[m]),R.getSnapshot!==v||me||Fa!==null&&Fa.memoizedState.tag&1){if(_.flags|=2048,jd(9,Mp(),Ip.bind(null,_,R,N,v),null),On===null)throw Error(a(349));H||(mn&124)!==0||jv(_,v,N)}return N}function jv(m,v,N){m.flags|=16384,m={getSnapshot:v,value:N},v=Yr.updateQueue,v===null?(v=Dh(),Yr.updateQueue=v,v.stores=[m]):(N=v.stores,N===null?v.stores=[m]:N.push(m))}function Ip(m,v,N,_){v.value=N,v.getSnapshot=_,Q1(v)&&J1(m)}function Jf(m,v,N){return N(function(){Q1(v)&&J1(m)})}function Q1(m){var v=m.getSnapshot;m=m.value;try{var N=v();return!Zs(m,N)}catch{return!0}}function J1(m){var v=hd(m,2);v!==null&&zl(v,m,2)}function Pp(m){var v=Wi();if(typeof m=="function"){var N=m;if(m=N(),Fs){xe(!0);try{N()}finally{xe(!1)}}}return v.memoizedState=v.baseState=m,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:m},v}function yd(m,v,N,_){return m.baseState=N,Qf(m,aa,typeof _=="function"?_:ho)}function MC(m,v,N,_,R){if(oj(m))throw Error(a(485));if(m=v.action,m!==null){var H={payload:R,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){H.listeners.push(me)}};U.T!==null?N(!0):H.isTransition=!1,_(H),N=v.pending,N===null?(H.next=v.pending=H,Z1(v,H)):(H.next=N.next,v.pending=N.next=H)}}function Z1(m,v){var N=v.action,_=v.payload,R=m.state;if(v.isTransition){var H=U.T,me={};U.T=me;try{var Ee=N(R,_),Ze=U.S;Ze!==null&&Ze(me,Ee),ej(m,v,Ee)}catch(Dt){Zf(m,v,Dt)}finally{U.T=H}}else try{H=N(R,_),ej(m,v,H)}catch(Dt){Zf(m,v,Dt)}}function ej(m,v,N){N!==null&&typeof N=="object"&&typeof N.then=="function"?N.then(function(_){Rg(m,v,_)},function(_){return Zf(m,v,_)}):Rg(m,v,N)}function Rg(m,v,N){v.status="fulfilled",v.value=N,Fg(v),m.state=N,v=m.pending,v!==null&&(N=v.next,N===v?m.pending=null:(N=N.next,v.next=N,Z1(m,N)))}function Zf(m,v,N){var _=m.pending;if(m.pending=null,_!==null){_=_.next;do v.status="rejected",v.reason=N,Fg(v),v=v.next;while(v!==_)}m.action=null}function Fg(m){m=m.listeners;for(var v=0;v<m.length;v++)(0,m[v])()}function Lg(m,v){return v}function Op(m,v){if(za){var N=On.formState;if(N!==null){e:{var _=Yr;if(za){if(Xn){t:{for(var R=Xn,H=wc;R.nodeType!==8;){if(!H){R=null;break t}if(R=Cd(R.nextSibling),R===null){R=null;break t}}H=R.data,R=H==="F!"||H==="F"?R:null}if(R){Xn=Cd(R.nextSibling),_=R.data==="F!";break e}}kh(_)}_=!1}_&&(v=N[0])}}return N=Wi(),N.memoizedState=N.baseState=v,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lg,lastRenderedState:v},N.queue=_,N=AP.bind(null,Yr,_),_.dispatch=N,_=Pp(!1),H=RC.bind(null,Yr,!1,_.queue),_=Wi(),R={state:v,dispatch:null,action:m,pending:null},_.queue=R,N=MC.bind(null,Yr,R,H,N),R.dispatch=N,_.memoizedState=m,[v,N,!1]}function Nv(m){var v=Bn();return em(v,aa,m)}function em(m,v,N){if(v=Qf(m,v,Lg)[0],m=Ap(ho)[0],typeof v=="object"&&v!==null&&typeof v.then=="function")try{var _=xu(v)}catch(me){throw me===we?Ce:me}else _=v;v=Bn();var R=v.queue,H=R.dispatch;return N!==v.memoizedState&&(Yr.flags|=2048,jd(9,Mp(),tj.bind(null,R,N),null)),[_,H,m]}function tj(m,v){m.action=v}function rj(m){var v=Bn(),N=aa;if(N!==null)return em(v,N,m);Bn(),v=v.memoizedState,N=Bn();var _=N.queue.dispatch;return N.memoizedState=m,[v,_,!1]}function jd(m,v,N,_){return m={tag:m,create:N,deps:_,inst:v,next:null},v=Yr.updateQueue,v===null&&(v=Dh(),Yr.updateQueue=v),N=v.lastEffect,N===null?v.lastEffect=m.next=m:(_=N.next,N.next=m,m.next=_,v.lastEffect=m),m}function Mp(){return{destroy:void 0,resource:void 0}}function wv(){return Bn().memoizedState}function Bl(m,v,N,_){var R=Wi();_=_===void 0?null:_,Yr.flags|=m,R.memoizedState=jd(1|v,Mp(),N,_)}function tm(m,v,N,_){var R=Bn();_=_===void 0?null:_;var H=R.memoizedState.inst;aa!==null&&_!==null&&ys(_,aa.memoizedState.deps)?R.memoizedState=jd(v,H,N,_):(Yr.flags|=m,R.memoizedState=jd(1|v,H,N,_))}function Bg(m,v){Bl(8390656,8,m,v)}function aj(m,v){tm(2048,8,m,v)}function Ug(m,v){return tm(4,2,m,v)}function Ah(m,v){return tm(4,4,m,v)}function nj(m,v){if(typeof v=="function"){m=m();var N=v(m);return function(){typeof N=="function"?N():v(null)}}if(v!=null)return m=m(),v.current=m,function(){v.current=null}}function $g(m,v,N){N=N!=null?N.concat([m]):null,tm(4,4,nj.bind(null,v,m),N)}function Vg(){}function qg(m,v){var N=Bn();v=v===void 0?null:v;var _=N.memoizedState;return v!==null&&ys(v,_[1])?_[0]:(N.memoizedState=[m,v],m)}function sj(m,v){var N=Bn();v=v===void 0?null:v;var _=N.memoizedState;if(v!==null&&ys(v,_[1]))return _[0];if(_=m(),Fs){xe(!0);try{m()}finally{xe(!1)}}return N.memoizedState=[_,v],_}function Th(m,v,N){return N===void 0||(mn&1073741824)!==0?m.memoizedState=v:(m.memoizedState=N,m=kO(),Yr.lanes|=m,lm|=m,N)}function Sv(m,v,N,_){return Zs(N,v)?N:Sa.current!==null?(m=Th(m,N,_),Zs(m,v)||(_i=!0),m):(mn&42)===0?(_i=!0,m.memoizedState=N):(m=kO(),Yr.lanes|=m,lm|=m,v)}function Rp(m,v,N,_,R){var H=J.p;J.p=H!==0&&8>H?H:8;var me=U.T,Ee={};U.T=Ee,RC(m,!1,v,N);try{var Ze=R(),Dt=U.S;if(Dt!==null&&Dt(Ee,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Gt=X1(Ze,_);Gg(m,v,Gt,ql(m))}else Gg(m,v,_,ql(m))}catch(tr){Gg(m,v,{then:function(){},status:"rejected",reason:tr},ql())}finally{J.p=H,U.T=me}}function Nd(){}function _c(m,v,N,_){if(m.tag!==5)throw Error(a(476));var R=wd(m).queue;Rp(m,R,v,F,N===null?Nd:function(){return Fp(m),N(_)})}function wd(m){var v=m.memoizedState;if(v!==null)return v;v={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:F},next:null};var N={};return v.next={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:N},next:null},m.memoizedState=v,m=m.alternate,m!==null&&(m.memoizedState=v),v}function Fp(m){var v=wd(m).next.queue;Gg(m,v,{},ql())}function Lp(){return Ms(ub)}function zg(){return Bn().memoizedState}function ij(){return Bn().memoizedState}function Hg(m){for(var v=m.return;v!==null;){switch(v.tag){case 24:case 3:var N=ql();m=Wt(N);var _=er(v,m,N);_!==null&&(zl(_,v,N),Kt(_,v,N)),v={cache:Og()},m.payload=v;return}v=v.return}}function Wg(m,v,N){var _=ql();N={lane:_,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null},oj(m)?TP(v,N):(N=cu(m,v,N,_),N!==null&&(zl(N,m,_),IP(N,v,_)))}function AP(m,v,N){var _=ql();Gg(m,v,N,_)}function Gg(m,v,N,_){var R={lane:_,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null};if(oj(m))TP(v,R);else{var H=m.alternate;if(m.lanes===0&&(H===null||H.lanes===0)&&(H=v.lastRenderedReducer,H!==null))try{var me=v.lastRenderedState,Ee=H(me,N);if(R.hasEagerState=!0,R.eagerState=Ee,Zs(Ee,me))return lu(m,v,R,0),On===null&&ol(),!1}catch{}finally{}if(N=cu(m,v,R,_),N!==null)return zl(N,m,_),IP(N,v,_),!0}return!1}function RC(m,v,N,_){if(_={lane:2,revertLane:mk(),action:_,hasEagerState:!1,eagerState:null,next:null},oj(m)){if(v)throw Error(a(479))}else v=cu(m,N,_,2),v!==null&&zl(v,m,2)}function oj(m){var v=m.alternate;return m===Yr||v!==null&&v===Yr}function TP(m,v){ri=Ba=!0;var N=m.pending;N===null?v.next=v:(v.next=N.next,N.next=v),m.pending=v}function IP(m,v,N){if((N&4194048)!==0){var _=v.lanes;_&=m.pendingLanes,N|=_,v.lanes=N,Ae(m,N)}}var lj={readContext:Ms,use:uo,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa},PP={readContext:Ms,use:uo,useCallback:function(m,v){return Wi().memoizedState=[m,v===void 0?null:v],m},useContext:Ms,useEffect:Bg,useImperativeHandle:function(m,v,N){N=N!=null?N.concat([m]):null,Bl(4194308,4,nj.bind(null,v,m),N)},useLayoutEffect:function(m,v){return Bl(4194308,4,m,v)},useInsertionEffect:function(m,v){Bl(4,2,m,v)},useMemo:function(m,v){var N=Wi();v=v===void 0?null:v;var _=m();if(Fs){xe(!0);try{m()}finally{xe(!1)}}return N.memoizedState=[_,v],_},useReducer:function(m,v,N){var _=Wi();if(N!==void 0){var R=N(v);if(Fs){xe(!0);try{N(v)}finally{xe(!1)}}}else R=v;return _.memoizedState=_.baseState=R,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:R},_.queue=m,m=m.dispatch=Wg.bind(null,Yr,m),[_.memoizedState,m]},useRef:function(m){var v=Wi();return m={current:m},v.memoizedState=m},useState:function(m){m=Pp(m);var v=m.queue,N=AP.bind(null,Yr,v);return v.dispatch=N,[m.memoizedState,N]},useDebugValue:Vg,useDeferredValue:function(m,v){var N=Wi();return Th(N,m,v)},useTransition:function(){var m=Pp(!1);return m=Rp.bind(null,Yr,m.queue,!0,!1),Wi().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,v,N){var _=Yr,R=Wi();if(za){if(N===void 0)throw Error(a(407));N=N()}else{if(N=v(),On===null)throw Error(a(349));(Ua&124)!==0||jv(_,v,N)}R.memoizedState=N;var H={value:N,getSnapshot:v};return R.queue=H,Bg(Jf.bind(null,_,H,m),[m]),_.flags|=2048,jd(9,Mp(),Ip.bind(null,_,H,N,v),null),N},useId:function(){var m=Wi(),v=On.identifierPrefix;if(za){var N=xd,_=pd;N=(_&~(1<<32-he(_)-1)).toString(32)+N,v=""+v+"R"+N,N=os++,0<N&&(v+="H"+N.toString(32)),v+=""}else N=dl++,v=""+v+"r"+N.toString(32)+"";return m.memoizedState=v},useHostTransitionStatus:Lp,useFormState:Op,useActionState:Op,useOptimistic:function(m){var v=Wi();v.memoizedState=v.baseState=m;var N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=N,v=RC.bind(null,Yr,!0,N),N.dispatch=v,[m,v]},useMemoCache:vu,useCacheRefresh:function(){return Wi().memoizedState=Hg.bind(null,Yr)}},OP={readContext:Ms,use:uo,useCallback:qg,useContext:Ms,useEffect:aj,useImperativeHandle:$g,useInsertionEffect:Ug,useLayoutEffect:Ah,useMemo:sj,useReducer:Ap,useRef:wv,useState:function(){return Ap(ho)},useDebugValue:Vg,useDeferredValue:function(m,v){var N=Bn();return Sv(N,aa.memoizedState,m,v)},useTransition:function(){var m=Ap(ho)[0],v=Bn().memoizedState;return[typeof m=="boolean"?m:xu(m),v]},useSyncExternalStore:Tp,useId:zg,useHostTransitionStatus:Lp,useFormState:Nv,useActionState:Nv,useOptimistic:function(m,v){var N=Bn();return yd(N,aa,m,v)},useMemoCache:vu,useCacheRefresh:ij},UQ={readContext:Ms,use:uo,useCallback:qg,useContext:Ms,useEffect:aj,useImperativeHandle:$g,useInsertionEffect:Ug,useLayoutEffect:Ah,useMemo:sj,useReducer:yv,useRef:wv,useState:function(){return yv(ho)},useDebugValue:Vg,useDeferredValue:function(m,v){var N=Bn();return aa===null?Th(N,m,v):Sv(N,aa.memoizedState,m,v)},useTransition:function(){var m=yv(ho)[0],v=Bn().memoizedState;return[typeof m=="boolean"?m:xu(m),v]},useSyncExternalStore:Tp,useId:zg,useHostTransitionStatus:Lp,useFormState:rj,useActionState:rj,useOptimistic:function(m,v){var N=Bn();return aa!==null?yd(N,aa,m,v):(N.baseState=m,[m,N.queue.dispatch])},useMemoCache:vu,useCacheRefresh:ij},Cv=null,Yg=0;function cj(m){var v=Yg;return Yg+=1,Cv===null&&(Cv=[]),Et(Cv,m,v)}function Kg(m,v){v=v.props.ref,m.ref=v!==void 0?v:null}function dj(m,v){throw v.$$typeof===h?Error(a(525)):(m=Object.prototype.toString.call(v),Error(a(31,m==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":m)))}function MP(m){var v=m._init;return v(m._payload)}function RP(m){function v(gt,ct){if(m){var _t=gt.deletions;_t===null?(gt.deletions=[ct],gt.flags|=16):_t.push(ct)}}function N(gt,ct){if(!m)return null;for(;ct!==null;)v(gt,ct),ct=ct.sibling;return null}function _(gt){for(var ct=new Map;gt!==null;)gt.key!==null?ct.set(gt.key,gt):ct.set(gt.index,gt),gt=gt.sibling;return ct}function R(gt,ct){return gt=Nc(gt,ct),gt.index=0,gt.sibling=null,gt}function H(gt,ct,_t){return gt.index=_t,m?(_t=gt.alternate,_t!==null?(_t=_t.index,_t<ct?(gt.flags|=67108866,ct):_t):(gt.flags|=67108866,ct)):(gt.flags|=1048576,ct)}function me(gt){return m&&gt.alternate===null&&(gt.flags|=67108866),gt}function Ee(gt,ct,_t,Qt){return ct===null||ct.tag!==6?(ct=fv(_t,gt.mode,Qt),ct.return=gt,ct):(ct=R(ct,_t),ct.return=gt,ct)}function Ze(gt,ct,_t,Qt){var Tr=_t.type;return Tr===x?Gt(gt,ct,_t.props.children,Qt,_t.key):ct!==null&&(ct.elementType===Tr||typeof Tr=="object"&&Tr!==null&&Tr.$$typeof===A&&MP(Tr)===ct.type)?(ct=R(ct,_t.props),Kg(ct,_t),ct.return=gt,ct):(ct=wh(_t.type,_t.key,_t.props,null,gt.mode,Qt),Kg(ct,_t),ct.return=gt,ct)}function Dt(gt,ct,_t,Qt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==_t.containerInfo||ct.stateNode.implementation!==_t.implementation?(ct=Sp(_t,gt.mode,Qt),ct.return=gt,ct):(ct=R(ct,_t.children||[]),ct.return=gt,ct)}function Gt(gt,ct,_t,Qt,Tr){return ct===null||ct.tag!==7?(ct=fd(_t,gt.mode,Qt,Tr),ct.return=gt,ct):(ct=R(ct,_t),ct.return=gt,ct)}function tr(gt,ct,_t){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=fv(""+ct,gt.mode,_t),ct.return=gt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case f:return _t=wh(ct.type,ct.key,ct.props,null,gt.mode,_t),Kg(_t,ct),_t.return=gt,_t;case p:return ct=Sp(ct,gt.mode,_t),ct.return=gt,ct;case A:var Qt=ct._init;return ct=Qt(ct._payload),tr(gt,ct,_t)}if(K(ct)||O(ct))return ct=fd(ct,gt.mode,_t,null),ct.return=gt,ct;if(typeof ct.then=="function")return tr(gt,cj(ct),_t);if(ct.$$typeof===w)return tr(gt,fu(gt,ct),_t);dj(gt,ct)}return null}function It(gt,ct,_t,Qt){var Tr=ct!==null?ct.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Tr!==null?null:Ee(gt,ct,""+_t,Qt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case f:return _t.key===Tr?Ze(gt,ct,_t,Qt):null;case p:return _t.key===Tr?Dt(gt,ct,_t,Qt):null;case A:return Tr=_t._init,_t=Tr(_t._payload),It(gt,ct,_t,Qt)}if(K(_t)||O(_t))return Tr!==null?null:Gt(gt,ct,_t,Qt,null);if(typeof _t.then=="function")return It(gt,ct,cj(_t),Qt);if(_t.$$typeof===w)return It(gt,ct,fu(gt,_t),Qt);dj(gt,_t)}return null}function Pt(gt,ct,_t,Qt,Tr){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return gt=gt.get(_t)||null,Ee(ct,gt,""+Qt,Tr);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case f:return gt=gt.get(Qt.key===null?_t:Qt.key)||null,Ze(ct,gt,Qt,Tr);case p:return gt=gt.get(Qt.key===null?_t:Qt.key)||null,Dt(ct,gt,Qt,Tr);case A:var Da=Qt._init;return Qt=Da(Qt._payload),Pt(gt,ct,_t,Qt,Tr)}if(K(Qt)||O(Qt))return gt=gt.get(_t)||null,Gt(ct,gt,Qt,Tr,null);if(typeof Qt.then=="function")return Pt(gt,ct,_t,cj(Qt),Tr);if(Qt.$$typeof===w)return Pt(gt,ct,_t,fu(ct,Qt),Tr);dj(ct,Qt)}return null}function oa(gt,ct,_t,Qt){for(var Tr=null,Da=null,Hr=ct,Zr=ct=0,Di=null;Hr!==null&&Zr<_t.length;Zr++){Hr.index>Zr?(Di=Hr,Hr=null):Di=Hr.sibling;var Ja=It(gt,Hr,_t[Zr],Qt);if(Ja===null){Hr===null&&(Hr=Di);break}m&&Hr&&Ja.alternate===null&&v(gt,Hr),ct=H(Ja,ct,Zr),Da===null?Tr=Ja:Da.sibling=Ja,Da=Ja,Hr=Di}if(Zr===_t.length)return N(gt,Hr),za&&Ch(gt,Zr),Tr;if(Hr===null){for(;Zr<_t.length;Zr++)Hr=tr(gt,_t[Zr],Qt),Hr!==null&&(ct=H(Hr,ct,Zr),Da===null?Tr=Hr:Da.sibling=Hr,Da=Hr);return za&&Ch(gt,Zr),Tr}for(Hr=_(Hr);Zr<_t.length;Zr++)Di=Pt(Hr,gt,Zr,_t[Zr],Qt),Di!==null&&(m&&Di.alternate!==null&&Hr.delete(Di.key===null?Zr:Di.key),ct=H(Di,ct,Zr),Da===null?Tr=Di:Da.sibling=Di,Da=Di);return m&&Hr.forEach(function(vm){return v(gt,vm)}),za&&Ch(gt,Zr),Tr}function Qr(gt,ct,_t,Qt){if(_t==null)throw Error(a(151));for(var Tr=null,Da=null,Hr=ct,Zr=ct=0,Di=null,Ja=_t.next();Hr!==null&&!Ja.done;Zr++,Ja=_t.next()){Hr.index>Zr?(Di=Hr,Hr=null):Di=Hr.sibling;var vm=It(gt,Hr,Ja.value,Qt);if(vm===null){Hr===null&&(Hr=Di);break}m&&Hr&&vm.alternate===null&&v(gt,Hr),ct=H(vm,ct,Zr),Da===null?Tr=vm:Da.sibling=vm,Da=vm,Hr=Di}if(Ja.done)return N(gt,Hr),za&&Ch(gt,Zr),Tr;if(Hr===null){for(;!Ja.done;Zr++,Ja=_t.next())Ja=tr(gt,Ja.value,Qt),Ja!==null&&(ct=H(Ja,ct,Zr),Da===null?Tr=Ja:Da.sibling=Ja,Da=Ja);return za&&Ch(gt,Zr),Tr}for(Hr=_(Hr);!Ja.done;Zr++,Ja=_t.next())Ja=Pt(Hr,gt,Zr,Ja.value,Qt),Ja!==null&&(m&&Ja.alternate!==null&&Hr.delete(Ja.key===null?Zr:Ja.key),ct=H(Ja,ct,Zr),Da===null?Tr=Ja:Da.sibling=Ja,Da=Ja);return m&&Hr.forEach(function($J){return v(gt,$J)}),za&&Ch(gt,Zr),Tr}function Cn(gt,ct,_t,Qt){if(typeof _t=="object"&&_t!==null&&_t.type===x&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case f:e:{for(var Tr=_t.key;ct!==null;){if(ct.key===Tr){if(Tr=_t.type,Tr===x){if(ct.tag===7){N(gt,ct.sibling),Qt=R(ct,_t.props.children),Qt.return=gt,gt=Qt;break e}}else if(ct.elementType===Tr||typeof Tr=="object"&&Tr!==null&&Tr.$$typeof===A&&MP(Tr)===ct.type){N(gt,ct.sibling),Qt=R(ct,_t.props),Kg(Qt,_t),Qt.return=gt,gt=Qt;break e}N(gt,ct);break}else v(gt,ct);ct=ct.sibling}_t.type===x?(Qt=fd(_t.props.children,gt.mode,Qt,_t.key),Qt.return=gt,gt=Qt):(Qt=wh(_t.type,_t.key,_t.props,null,gt.mode,Qt),Kg(Qt,_t),Qt.return=gt,gt=Qt)}return me(gt);case p:e:{for(Tr=_t.key;ct!==null;){if(ct.key===Tr)if(ct.tag===4&&ct.stateNode.containerInfo===_t.containerInfo&&ct.stateNode.implementation===_t.implementation){N(gt,ct.sibling),Qt=R(ct,_t.children||[]),Qt.return=gt,gt=Qt;break e}else{N(gt,ct);break}else v(gt,ct);ct=ct.sibling}Qt=Sp(_t,gt.mode,Qt),Qt.return=gt,gt=Qt}return me(gt);case A:return Tr=_t._init,_t=Tr(_t._payload),Cn(gt,ct,_t,Qt)}if(K(_t))return oa(gt,ct,_t,Qt);if(O(_t)){if(Tr=O(_t),typeof Tr!="function")throw Error(a(150));return _t=Tr.call(_t),Qr(gt,ct,_t,Qt)}if(typeof _t.then=="function")return Cn(gt,ct,cj(_t),Qt);if(_t.$$typeof===w)return Cn(gt,ct,fu(gt,_t),Qt);dj(gt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,ct!==null&&ct.tag===6?(N(gt,ct.sibling),Qt=R(ct,_t),Qt.return=gt,gt=Qt):(N(gt,ct),Qt=fv(_t,gt.mode,Qt),Qt.return=gt,gt=Qt),me(gt)):N(gt,ct)}return function(gt,ct,_t,Qt){try{Yg=0;var Tr=Cn(gt,ct,_t,Qt);return Cv=null,Tr}catch(Hr){if(Hr===we||Hr===Ce)throw Hr;var Da=ki(29,Hr,null,gt.mode);return Da.lanes=Qt,Da.return=gt,Da}finally{}}}var kv=RP(!0),FP=RP(!1),Ec=ie(null),gu=null;function rm(m){var v=m.alternate;V(fi,fi.current&1),V(Ec,m),gu===null&&(v===null||Sa.current!==null||v.memoizedState!==null)&&(gu=m)}function LP(m){if(m.tag===22){if(V(fi,fi.current),V(Ec,m),gu===null){var v=m.alternate;v!==null&&v.memoizedState!==null&&(gu=m)}}else am()}function am(){V(fi,fi.current),V(Ec,Ec.current)}function Ih(m){M(Ec),gu===m&&(gu=null),M(fi)}var fi=ie(0);function uj(m){for(var v=m;v!==null;){if(v.tag===13){var N=v.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||kk(N)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}function FC(m,v,N,_){v=m.memoizedState,N=N(_,v),N=N==null?v:u({},v,N),m.memoizedState=N,m.lanes===0&&(m.updateQueue.baseState=N)}var LC={enqueueSetState:function(m,v,N){m=m._reactInternals;var _=ql(),R=Wt(_);R.payload=v,N!=null&&(R.callback=N),v=er(m,R,_),v!==null&&(zl(v,m,_),Kt(v,m,_))},enqueueReplaceState:function(m,v,N){m=m._reactInternals;var _=ql(),R=Wt(_);R.tag=1,R.payload=v,N!=null&&(R.callback=N),v=er(m,R,_),v!==null&&(zl(v,m,_),Kt(v,m,_))},enqueueForceUpdate:function(m,v){m=m._reactInternals;var N=ql(),_=Wt(N);_.tag=2,v!=null&&(_.callback=v),v=er(m,_,N),v!==null&&(zl(v,m,N),Kt(v,m,N))}};function BP(m,v,N,_,R,H,me){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(_,H,me):v.prototype&&v.prototype.isPureReactComponent?!tu(N,_)||!tu(R,H):!0}function UP(m,v,N,_){m=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(N,_),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(N,_),v.state!==m&&LC.enqueueReplaceState(v,v.state,null)}function Bp(m,v){var N=v;if("ref"in v){N={};for(var _ in v)_!=="ref"&&(N[_]=v[_])}if(m=m.defaultProps){N===v&&(N=u({},N));for(var R in m)N[R]===void 0&&(N[R]=m[R])}return N}var hj=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)};function $P(m){hj(m)}function VP(m){console.error(m)}function qP(m){hj(m)}function fj(m,v){try{var N=m.onUncaughtError;N(v.value,{componentStack:v.stack})}catch(_){setTimeout(function(){throw _})}}function zP(m,v,N){try{var _=m.onCaughtError;_(N.value,{componentStack:N.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function BC(m,v,N){return N=Wt(N),N.tag=3,N.payload={element:null},N.callback=function(){fj(m,v)},N}function HP(m){return m=Wt(m),m.tag=3,m}function WP(m,v,N,_){var R=N.type.getDerivedStateFromError;if(typeof R=="function"){var H=_.value;m.payload=function(){return R(H)},m.callback=function(){zP(v,N,_)}}var me=N.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(m.callback=function(){zP(v,N,_),typeof R!="function"&&(cm===null?cm=new Set([this]):cm.add(this));var Ee=_.stack;this.componentDidCatch(_.value,{componentStack:Ee!==null?Ee:""})})}function $Q(m,v,N,_,R){if(N.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(v=N.alternate,v!==null&&Xf(v,N,R,!0),N=Ec.current,N!==null){switch(N.tag){case 13:return gu===null?ck():N.alternate===null&&js===0&&(js=3),N.flags&=-257,N.flags|=65536,N.lanes=R,_===Pe?N.flags|=16384:(v=N.updateQueue,v===null?N.updateQueue=new Set([_]):v.add(_),uk(m,_,R)),!1;case 22:return N.flags|=65536,_===Pe?N.flags|=16384:(v=N.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([_])},N.updateQueue=v):(N=v.retryQueue,N===null?v.retryQueue=new Set([_]):N.add(_)),uk(m,_,R)),!1}throw Error(a(435,N.tag))}return uk(m,_,R),ck(),!1}if(za)return v=Ec.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=R,_!==Pg&&(m=Error(a(422),{cause:_}),Kf(Ca(m,N)))):(_!==Pg&&(v=Error(a(423),{cause:_}),Kf(Ca(v,N))),m=m.current.alternate,m.flags|=65536,R&=-R,m.lanes|=R,_=Ca(_,N),R=BC(m.stateNode,_,R),Sr(m,R),js!==4&&(js=2)),!1;var H=Error(a(520),{cause:_});if(H=Ca(H,N),rb===null?rb=[H]:rb.push(H),js!==4&&(js=2),v===null)return!0;_=Ca(_,N),N=v;do{switch(N.tag){case 3:return N.flags|=65536,m=R&-R,N.lanes|=m,m=BC(N.stateNode,_,m),Sr(N,m),!1;case 1:if(v=N.type,H=N.stateNode,(N.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(cm===null||!cm.has(H))))return N.flags|=65536,R&=-R,N.lanes|=R,R=HP(R),WP(R,m,N,_),Sr(N,R),!1}N=N.return}while(N!==null);return!1}var GP=Error(a(461)),_i=!1;function Gi(m,v,N,_){v.child=m===null?FP(v,null,N,_):kv(v,m.child,N,_)}function YP(m,v,N,_,R){N=N.render;var H=v.ref;if("ref"in _){var me={};for(var Ee in _)Ee!=="ref"&&(me[Ee]=_[Ee])}else me=_;return kc(v),_=Ll(m,v,N,me,H,R),Ee=Pn(),m!==null&&!_i?(Dp(m,v,R),Ph(m,v,R)):(za&&Ee&&Cp(v),v.flags|=1,Gi(m,v,_,R),v.child)}function KP(m,v,N,_,R){if(m===null){var H=N.type;return typeof H=="function"&&!Gf(H)&&H.defaultProps===void 0&&N.compare===null?(v.tag=15,v.type=H,XP(m,v,H,_,R)):(m=wh(N.type,null,_,v,v.mode,R),m.ref=v.ref,m.return=v,v.child=m)}if(H=m.child,!GC(m,R)){var me=H.memoizedProps;if(N=N.compare,N=N!==null?N:tu,N(me,_)&&m.ref===v.ref)return Ph(m,v,R)}return v.flags|=1,m=Nc(H,_),m.ref=v.ref,m.return=v,v.child=m}function XP(m,v,N,_,R){if(m!==null){var H=m.memoizedProps;if(tu(H,_)&&m.ref===v.ref)if(_i=!1,v.pendingProps=_=H,GC(m,R))(m.flags&131072)!==0&&(_i=!0);else return v.lanes=m.lanes,Ph(m,v,R)}return UC(m,v,N,_,R)}function QP(m,v,N){var _=v.pendingProps,R=_.children,H=m!==null?m.memoizedState:null;if(_.mode==="hidden"){if((v.flags&128)!==0){if(_=H!==null?H.baseLanes|N:N,m!==null){for(R=v.child=m.child,H=0;R!==null;)H=H|R.lanes|R.childLanes,R=R.sibling;v.childLanes=H&~_}else v.childLanes=0,v.child=null;return JP(m,v,_,N)}if((N&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},m!==null&&le(v,H!==null?H.cachePool:null),H!==null?dn(v,H):Xa(),LP(v);else return v.lanes=v.childLanes=536870912,JP(m,v,H!==null?H.baseLanes|N:N,N)}else H!==null?(le(v,H.cachePool),dn(v,H),am(),v.memoizedState=null):(m!==null&&le(v,null),Xa(),am());return Gi(m,v,R,N),v.child}function JP(m,v,N,_){var R=te();return R=R===null?null:{parent:Rs._currentValue,pool:R},v.memoizedState={baseLanes:N,cachePool:R},m!==null&&le(v,null),Xa(),LP(v),m!==null&&Xf(m,v,_,!0),null}function mj(m,v){var N=v.ref;if(N===null)m!==null&&m.ref!==null&&(v.flags|=4194816);else{if(typeof N!="function"&&typeof N!="object")throw Error(a(284));(m===null||m.ref!==N)&&(v.flags|=4194816)}}function UC(m,v,N,_,R){return kc(v),N=Ll(m,v,N,_,void 0,R),_=Pn(),m!==null&&!_i?(Dp(m,v,R),Ph(m,v,R)):(za&&_&&Cp(v),v.flags|=1,Gi(m,v,N,R),v.child)}function ZP(m,v,N,_,R,H){return kc(v),v.updateQueue=null,N=Eh(v,_,N,R),mu(m),_=Pn(),m!==null&&!_i?(Dp(m,v,H),Ph(m,v,H)):(za&&_&&Cp(v),v.flags|=1,Gi(m,v,N,H),v.child)}function eO(m,v,N,_,R){if(kc(v),v.stateNode===null){var H=ei,me=N.contextType;typeof me=="object"&&me!==null&&(H=Ms(me)),H=new N(_,H),v.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=LC,v.stateNode=H,H._reactInternals=v,H=v.stateNode,H.props=_,H.state=v.memoizedState,H.refs={},it(v),me=N.contextType,H.context=typeof me=="object"&&me!==null?Ms(me):ei,H.state=v.memoizedState,me=N.getDerivedStateFromProps,typeof me=="function"&&(FC(v,N,me,_),H.state=v.memoizedState),typeof N.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(me=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),me!==H.state&&LC.enqueueReplaceState(H,H.state,null),yr(v,_,H,R),zr(),H.state=v.memoizedState),typeof H.componentDidMount=="function"&&(v.flags|=4194308),_=!0}else if(m===null){H=v.stateNode;var Ee=v.memoizedProps,Ze=Bp(N,Ee);H.props=Ze;var Dt=H.context,Gt=N.contextType;me=ei,typeof Gt=="object"&&Gt!==null&&(me=Ms(Gt));var tr=N.getDerivedStateFromProps;Gt=typeof tr=="function"||typeof H.getSnapshotBeforeUpdate=="function",Ee=v.pendingProps!==Ee,Gt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Ee||Dt!==me)&&UP(v,H,_,me),Rt=!1;var It=v.memoizedState;H.state=It,yr(v,_,H,R),zr(),Dt=v.memoizedState,Ee||It!==Dt||Rt?(typeof tr=="function"&&(FC(v,N,tr,_),Dt=v.memoizedState),(Ze=Rt||BP(v,N,Ze,_,It,Dt,me))?(Gt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(v.flags|=4194308)):(typeof H.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=_,v.memoizedState=Dt),H.props=_,H.state=Dt,H.context=me,_=Ze):(typeof H.componentDidMount=="function"&&(v.flags|=4194308),_=!1)}else{H=v.stateNode,ut(m,v),me=v.memoizedProps,Gt=Bp(N,me),H.props=Gt,tr=v.pendingProps,It=H.context,Dt=N.contextType,Ze=ei,typeof Dt=="object"&&Dt!==null&&(Ze=Ms(Dt)),Ee=N.getDerivedStateFromProps,(Dt=typeof Ee=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(me!==tr||It!==Ze)&&UP(v,H,_,Ze),Rt=!1,It=v.memoizedState,H.state=It,yr(v,_,H,R),zr();var Pt=v.memoizedState;me!==tr||It!==Pt||Rt||m!==null&&m.dependencies!==null&&vv(m.dependencies)?(typeof Ee=="function"&&(FC(v,N,Ee,_),Pt=v.memoizedState),(Gt=Rt||BP(v,N,Gt,_,It,Pt,Ze)||m!==null&&m.dependencies!==null&&vv(m.dependencies))?(Dt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(_,Pt,Ze),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(_,Pt,Ze)),typeof H.componentDidUpdate=="function"&&(v.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof H.componentDidUpdate!="function"||me===m.memoizedProps&&It===m.memoizedState||(v.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||me===m.memoizedProps&&It===m.memoizedState||(v.flags|=1024),v.memoizedProps=_,v.memoizedState=Pt),H.props=_,H.state=Pt,H.context=Ze,_=Gt):(typeof H.componentDidUpdate!="function"||me===m.memoizedProps&&It===m.memoizedState||(v.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||me===m.memoizedProps&&It===m.memoizedState||(v.flags|=1024),_=!1)}return H=_,mj(m,v),_=(v.flags&128)!==0,H||_?(H=v.stateNode,N=_&&typeof N.getDerivedStateFromError!="function"?null:H.render(),v.flags|=1,m!==null&&_?(v.child=kv(v,m.child,null,R),v.child=kv(v,null,N,R)):Gi(m,v,N,R),v.memoizedState=H.state,m=v.child):m=Ph(m,v,R),m}function tO(m,v,N,_){return zo(),v.flags|=256,Gi(m,v,N,_),v.child}var $C={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function VC(m){return{baseLanes:m,cachePool:ge()}}function qC(m,v,N){return m=m!==null?m.childLanes&~N:0,v&&(m|=Dc),m}function rO(m,v,N){var _=v.pendingProps,R=!1,H=(v.flags&128)!==0,me;if((me=H)||(me=m!==null&&m.memoizedState===null?!1:(fi.current&2)!==0),me&&(R=!0,v.flags&=-129),me=(v.flags&32)!==0,v.flags&=-33,m===null){if(za){if(R?rm(v):am(),za){var Ee=Xn,Ze;if(Ze=Ee){e:{for(Ze=Ee,Ee=wc;Ze.nodeType!==8;){if(!Ee){Ee=null;break e}if(Ze=Cd(Ze.nextSibling),Ze===null){Ee=null;break e}}Ee=Ze}Ee!==null?(v.memoizedState={dehydrated:Ee,treeContext:Sh!==null?{id:pd,overflow:xd}:null,retryLane:536870912,hydrationErrors:null},Ze=ki(18,null,null,0),Ze.stateNode=Ee,Ze.return=v,v.child=Ze,Os=v,Xn=null,Ze=!0):Ze=!1}Ze||kh(v)}if(Ee=v.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return kk(Ee)?v.lanes=32:v.lanes=536870912,null;Ih(v)}return Ee=_.children,_=_.fallback,R?(am(),R=v.mode,Ee=pj({mode:"hidden",children:Ee},R),_=fd(_,R,N,null),Ee.return=v,_.return=v,Ee.sibling=_,v.child=Ee,R=v.child,R.memoizedState=VC(N),R.childLanes=qC(m,me,N),v.memoizedState=$C,_):(rm(v),zC(v,Ee))}if(Ze=m.memoizedState,Ze!==null&&(Ee=Ze.dehydrated,Ee!==null)){if(H)v.flags&256?(rm(v),v.flags&=-257,v=HC(m,v,N)):v.memoizedState!==null?(am(),v.child=m.child,v.flags|=128,v=null):(am(),R=_.fallback,Ee=v.mode,_=pj({mode:"visible",children:_.children},Ee),R=fd(R,Ee,N,null),R.flags|=2,_.return=v,R.return=v,_.sibling=R,v.child=_,kv(v,m.child,null,N),_=v.child,_.memoizedState=VC(N),_.childLanes=qC(m,me,N),v.memoizedState=$C,v=R);else if(rm(v),kk(Ee)){if(me=Ee.nextSibling&&Ee.nextSibling.dataset,me)var Dt=me.dgst;me=Dt,_=Error(a(419)),_.stack="",_.digest=me,Kf({value:_,source:null,stack:null}),v=HC(m,v,N)}else if(_i||Xf(m,v,N,!1),me=(N&m.childLanes)!==0,_i||me){if(me=On,me!==null&&(_=N&-N,_=(_&42)!==0?1:ke(_),_=(_&(me.suspendedLanes|N))!==0?0:_,_!==0&&_!==Ze.retryLane))throw Ze.retryLane=_,hd(m,_),zl(me,m,_),GP;Ee.data==="$?"||ck(),v=HC(m,v,N)}else Ee.data==="$?"?(v.flags|=192,v.child=m.child,v=null):(m=Ze.treeContext,Xn=Cd(Ee.nextSibling),Os=v,za=!0,uu=null,wc=!1,m!==null&&(cl[qo++]=pd,cl[qo++]=xd,cl[qo++]=Sh,pd=m.id,xd=m.overflow,Sh=v),v=zC(v,_.children),v.flags|=4096);return v}return R?(am(),R=_.fallback,Ee=v.mode,Ze=m.child,Dt=Ze.sibling,_=Nc(Ze,{mode:"hidden",children:_.children}),_.subtreeFlags=Ze.subtreeFlags&65011712,Dt!==null?R=Nc(Dt,R):(R=fd(R,Ee,N,null),R.flags|=2),R.return=v,_.return=v,_.sibling=R,v.child=_,_=R,R=v.child,Ee=m.child.memoizedState,Ee===null?Ee=VC(N):(Ze=Ee.cachePool,Ze!==null?(Dt=Rs._currentValue,Ze=Ze.parent!==Dt?{parent:Dt,pool:Dt}:Ze):Ze=ge(),Ee={baseLanes:Ee.baseLanes|N,cachePool:Ze}),R.memoizedState=Ee,R.childLanes=qC(m,me,N),v.memoizedState=$C,_):(rm(v),N=m.child,m=N.sibling,N=Nc(N,{mode:"visible",children:_.children}),N.return=v,N.sibling=null,m!==null&&(me=v.deletions,me===null?(v.deletions=[m],v.flags|=16):me.push(m)),v.child=N,v.memoizedState=null,N)}function zC(m,v){return v=pj({mode:"visible",children:v},m.mode),v.return=m,m.child=v}function pj(m,v){return m=ki(22,m,null,v),m.lanes=0,m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},m}function HC(m,v,N){return kv(v,m.child,null,N),m=zC(v,v.pendingProps.children),m.flags|=2,v.memoizedState=null,m}function aO(m,v,N){m.lanes|=v;var _=m.alternate;_!==null&&(_.lanes|=v),pv(m.return,v,N)}function WC(m,v,N,_,R){var H=m.memoizedState;H===null?m.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:_,tail:N,tailMode:R}:(H.isBackwards=v,H.rendering=null,H.renderingStartTime=0,H.last=_,H.tail=N,H.tailMode=R)}function nO(m,v,N){var _=v.pendingProps,R=_.revealOrder,H=_.tail;if(Gi(m,v,_.children,N),_=fi.current,(_&2)!==0)_=_&1|2,v.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=v.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&aO(m,N,v);else if(m.tag===19)aO(m,N,v);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===v)break e;for(;m.sibling===null;){if(m.return===null||m.return===v)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}_&=1}switch(V(fi,_),R){case"forwards":for(N=v.child,R=null;N!==null;)m=N.alternate,m!==null&&uj(m)===null&&(R=N),N=N.sibling;N=R,N===null?(R=v.child,v.child=null):(R=N.sibling,N.sibling=null),WC(v,!1,R,N,H);break;case"backwards":for(N=null,R=v.child,v.child=null;R!==null;){if(m=R.alternate,m!==null&&uj(m)===null){v.child=R;break}m=R.sibling,R.sibling=N,N=R,R=m}WC(v,!0,N,null,H);break;case"together":WC(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Ph(m,v,N){if(m!==null&&(v.dependencies=m.dependencies),lm|=v.lanes,(N&v.childLanes)===0)if(m!==null){if(Xf(m,v,N,!1),(N&v.childLanes)===0)return null}else return null;if(m!==null&&v.child!==m.child)throw Error(a(153));if(v.child!==null){for(m=v.child,N=Nc(m,m.pendingProps),v.child=N,N.return=v;m.sibling!==null;)m=m.sibling,N=N.sibling=Nc(m,m.pendingProps),N.return=v;N.sibling=null}return v.child}function GC(m,v){return(m.lanes&v)!==0?!0:(m=m.dependencies,!!(m!==null&&vv(m)))}function VQ(m,v,N){switch(v.tag){case 3:ce(v,v.stateNode.containerInfo),hu(v,Rs,m.memoizedState.cache),zo();break;case 27:case 5:Z(v);break;case 4:ce(v,v.stateNode.containerInfo);break;case 10:hu(v,v.type,v.memoizedProps.value);break;case 13:var _=v.memoizedState;if(_!==null)return _.dehydrated!==null?(rm(v),v.flags|=128,null):(N&v.child.childLanes)!==0?rO(m,v,N):(rm(v),m=Ph(m,v,N),m!==null?m.sibling:null);rm(v);break;case 19:var R=(m.flags&128)!==0;if(_=(N&v.childLanes)!==0,_||(Xf(m,v,N,!1),_=(N&v.childLanes)!==0),R){if(_)return nO(m,v,N);v.flags|=128}if(R=v.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),V(fi,fi.current),_)break;return null;case 22:case 23:return v.lanes=0,QP(m,v,N);case 24:hu(v,Rs,m.memoizedState.cache)}return Ph(m,v,N)}function sO(m,v,N){if(m!==null)if(m.memoizedProps!==v.pendingProps)_i=!0;else{if(!GC(m,N)&&(v.flags&128)===0)return _i=!1,VQ(m,v,N);_i=(m.flags&131072)!==0}else _i=!1,za&&(v.flags&1048576)!==0&&H1(v,mv,v.index);switch(v.lanes=0,v.tag){case 16:e:{m=v.pendingProps;var _=v.elementType,R=_._init;if(_=R(_._payload),v.type=_,typeof _=="function")Gf(_)?(m=Bp(_,m),v.tag=1,v=eO(null,v,_,m,N)):(v.tag=0,v=UC(null,v,_,m,N));else{if(_!=null){if(R=_.$$typeof,R===k){v.tag=11,v=YP(null,v,_,m,N);break e}else if(R===E){v.tag=14,v=KP(null,v,_,m,N);break e}}throw v=q(_)||_,Error(a(306,v,""))}}return v;case 0:return UC(m,v,v.type,v.pendingProps,N);case 1:return _=v.type,R=Bp(_,v.pendingProps),eO(m,v,_,R,N);case 3:e:{if(ce(v,v.stateNode.containerInfo),m===null)throw Error(a(387));_=v.pendingProps;var H=v.memoizedState;R=H.element,ut(m,v),yr(v,_,null,N);var me=v.memoizedState;if(_=me.cache,hu(v,Rs,_),_!==H.cache&&xv(v,[Rs],N,!0),zr(),_=me.element,H.isDehydrated)if(H={element:_,isDehydrated:!1,cache:me.cache},v.updateQueue.baseState=H,v.memoizedState=H,v.flags&256){v=tO(m,v,_,N);break e}else if(_!==R){R=Ca(Error(a(424)),v),Kf(R),v=tO(m,v,_,N);break e}else{switch(m=v.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(Xn=Cd(m.firstChild),Os=v,za=!0,uu=null,wc=!0,N=FP(v,null,_,N),v.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling}else{if(zo(),_===R){v=Ph(m,v,N);break e}Gi(m,v,_,N)}v=v.child}return v;case 26:return mj(m,v),m===null?(N=cM(v.type,null,v.pendingProps,null))?v.memoizedState=N:za||(N=v.type,m=v.pendingProps,_=Dj(re.current).createElement(N),_[rr]=v,_[pr]=m,Ki(_,N,m),st(_),v.stateNode=_):v.memoizedState=cM(v.type,m.memoizedProps,v.pendingProps,m.memoizedState),null;case 27:return Z(v),m===null&&za&&(_=v.stateNode=iM(v.type,v.pendingProps,re.current),Os=v,wc=!0,R=Xn,hm(v.type)?(_k=R,Xn=Cd(_.firstChild)):Xn=R),Gi(m,v,v.pendingProps.children,N),mj(m,v),m===null&&(v.flags|=4194304),v.child;case 5:return m===null&&za&&((R=_=Xn)&&(_=xJ(_,v.type,v.pendingProps,wc),_!==null?(v.stateNode=_,Os=v,Xn=Cd(_.firstChild),wc=!1,R=!0):R=!1),R||kh(v)),Z(v),R=v.type,H=v.pendingProps,me=m!==null?m.memoizedProps:null,_=H.children,wk(R,H)?_=null:me!==null&&wk(R,me)&&(v.flags|=32),v.memoizedState!==null&&(R=Ll(m,v,pu,null,null,N),ub._currentValue=R),mj(m,v),Gi(m,v,_,N),v.child;case 6:return m===null&&za&&((m=N=Xn)&&(N=vJ(N,v.pendingProps,wc),N!==null?(v.stateNode=N,Os=v,Xn=null,m=!0):m=!1),m||kh(v)),null;case 13:return rO(m,v,N);case 4:return ce(v,v.stateNode.containerInfo),_=v.pendingProps,m===null?v.child=kv(v,null,_,N):Gi(m,v,_,N),v.child;case 11:return YP(m,v,v.type,v.pendingProps,N);case 7:return Gi(m,v,v.pendingProps,N),v.child;case 8:return Gi(m,v,v.pendingProps.children,N),v.child;case 12:return Gi(m,v,v.pendingProps.children,N),v.child;case 10:return _=v.pendingProps,hu(v,v.type,_.value),Gi(m,v,_.children,N),v.child;case 9:return R=v.type._context,_=v.pendingProps.children,kc(v),R=Ms(R),_=_(R),v.flags|=1,Gi(m,v,_,N),v.child;case 14:return KP(m,v,v.type,v.pendingProps,N);case 15:return XP(m,v,v.type,v.pendingProps,N);case 19:return nO(m,v,N);case 31:return _=v.pendingProps,N=v.mode,_={mode:_.mode,children:_.children},m===null?(N=pj(_,N),N.ref=v.ref,v.child=N,N.return=v,v=N):(N=Nc(m.child,_),N.ref=v.ref,v.child=N,N.return=v,v=N),v;case 22:return QP(m,v,N);case 24:return kc(v),_=Ms(Rs),m===null?(R=te(),R===null&&(R=On,H=Og(),R.pooledCache=H,H.refCount++,H!==null&&(R.pooledCacheLanes|=N),R=H),v.memoizedState={parent:_,cache:R},it(v),hu(v,Rs,R)):((m.lanes&N)!==0&&(ut(m,v),yr(v,null,null,N),zr()),R=m.memoizedState,H=v.memoizedState,R.parent!==_?(R={parent:_,cache:_},v.memoizedState=R,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=R),hu(v,Rs,_)):(_=H.cache,hu(v,Rs,_),_!==R.cache&&xv(v,[Rs],N,!0))),Gi(m,v,v.pendingProps.children,N),v.child;case 29:throw v.pendingProps}throw Error(a(156,v.tag))}function Oh(m){m.flags|=4}function iO(m,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!mM(v)){if(v=Ec.current,v!==null&&((Ua&4194048)===Ua?gu!==null:(Ua&62914560)!==Ua&&(Ua&536870912)===0||v!==gu))throw kt=Pe,Se;m.flags|=8192}}function xj(m,v){v!==null&&(m.flags|=4),m.flags&16384&&(v=m.tag!==22?Ie():536870912,m.lanes|=v,Av|=v)}function Xg(m,v){if(!za)switch(m.tailMode){case"hidden":v=m.tail;for(var N=null;v!==null;)v.alternate!==null&&(N=v),v=v.sibling;N===null?m.tail=null:N.sibling=null;break;case"collapsed":N=m.tail;for(var _=null;N!==null;)N.alternate!==null&&(_=N),N=N.sibling;_===null?v||m.tail===null?m.tail=null:m.tail.sibling=null:_.sibling=null}}function cs(m){var v=m.alternate!==null&&m.alternate.child===m.child,N=0,_=0;if(v)for(var R=m.child;R!==null;)N|=R.lanes|R.childLanes,_|=R.subtreeFlags&65011712,_|=R.flags&65011712,R.return=m,R=R.sibling;else for(R=m.child;R!==null;)N|=R.lanes|R.childLanes,_|=R.subtreeFlags,_|=R.flags,R.return=m,R=R.sibling;return m.subtreeFlags|=_,m.childLanes=N,v}function qQ(m,v,N){var _=v.pendingProps;switch(kp(v),v.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(v),null;case 1:return cs(v),null;case 3:return N=v.stateNode,_=null,m!==null&&(_=m.memoizedState.cache),v.memoizedState.cache!==_&&(v.flags|=2048),Cc(Rs),ae(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(m===null||m.child===null)&&(Hi(v)?Oh(v):m===null||m.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,G1())),cs(v),null;case 26:return N=v.memoizedState,m===null?(Oh(v),N!==null?(cs(v),iO(v,N)):(cs(v),v.flags&=-16777217)):N?N!==m.memoizedState?(Oh(v),cs(v),iO(v,N)):(cs(v),v.flags&=-16777217):(m.memoizedProps!==_&&Oh(v),cs(v),v.flags&=-16777217),null;case 27:de(v),N=re.current;var R=v.type;if(m!==null&&v.stateNode!=null)m.memoizedProps!==_&&Oh(v);else{if(!_){if(v.stateNode===null)throw Error(a(166));return cs(v),null}m=W.current,Hi(v)?W1(v):(m=iM(R,_,N),v.stateNode=m,Oh(v))}return cs(v),null;case 5:if(de(v),N=v.type,m!==null&&v.stateNode!=null)m.memoizedProps!==_&&Oh(v);else{if(!_){if(v.stateNode===null)throw Error(a(166));return cs(v),null}if(m=W.current,Hi(v))W1(v);else{switch(R=Dj(re.current),m){case 1:m=R.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:m=R.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":m=R.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":m=R.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":m=R.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof _.is=="string"?R.createElement("select",{is:_.is}):R.createElement("select"),_.multiple?m.multiple=!0:_.size&&(m.size=_.size);break;default:m=typeof _.is=="string"?R.createElement(N,{is:_.is}):R.createElement(N)}}m[rr]=v,m[pr]=_;e:for(R=v.child;R!==null;){if(R.tag===5||R.tag===6)m.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===v)break e;for(;R.sibling===null;){if(R.return===null||R.return===v)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}v.stateNode=m;e:switch(Ki(m,N,_),N){case"button":case"input":case"select":case"textarea":m=!!_.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Oh(v)}}return cs(v),v.flags&=-16777217,null;case 6:if(m&&v.stateNode!=null)m.memoizedProps!==_&&Oh(v);else{if(typeof _!="string"&&v.stateNode===null)throw Error(a(166));if(m=re.current,Hi(v)){if(m=v.stateNode,N=v.memoizedProps,_=null,R=Os,R!==null)switch(R.tag){case 27:case 5:_=R.memoizedProps}m[rr]=v,m=!!(m.nodeValue===N||_!==null&&_.suppressHydrationWarning===!0||ZO(m.nodeValue,N)),m||kh(v)}else m=Dj(m).createTextNode(_),m[rr]=v,v.stateNode=m}return cs(v),null;case 13:if(_=v.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(R=Hi(v),_!==null&&_.dehydrated!==null){if(m===null){if(!R)throw Error(a(318));if(R=v.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(a(317));R[rr]=v}else zo(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;cs(v),R=!1}else R=G1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=R),R=!0;if(!R)return v.flags&256?(Ih(v),v):(Ih(v),null)}if(Ih(v),(v.flags&128)!==0)return v.lanes=N,v;if(N=_!==null,m=m!==null&&m.memoizedState!==null,N){_=v.child,R=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(R=_.alternate.memoizedState.cachePool.pool);var H=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(H=_.memoizedState.cachePool.pool),H!==R&&(_.flags|=2048)}return N!==m&&N&&(v.child.flags|=8192),xj(v,v.updateQueue),cs(v),null;case 4:return ae(),m===null&&gk(v.stateNode.containerInfo),cs(v),null;case 10:return Cc(v.type),cs(v),null;case 19:if(M(fi),R=v.memoizedState,R===null)return cs(v),null;if(_=(v.flags&128)!==0,H=R.rendering,H===null)if(_)Xg(R,!1);else{if(js!==0||m!==null&&(m.flags&128)!==0)for(m=v.child;m!==null;){if(H=uj(m),H!==null){for(v.flags|=128,Xg(R,!1),m=H.updateQueue,v.updateQueue=m,xj(v,m),v.subtreeFlags=0,m=N,N=v.child;N!==null;)wp(N,m),N=N.sibling;return V(fi,fi.current&1|2),v.child}m=m.sibling}R.tail!==null&&ye()>bj&&(v.flags|=128,_=!0,Xg(R,!1),v.lanes=4194304)}else{if(!_)if(m=uj(H),m!==null){if(v.flags|=128,_=!0,m=m.updateQueue,v.updateQueue=m,xj(v,m),Xg(R,!0),R.tail===null&&R.tailMode==="hidden"&&!H.alternate&&!za)return cs(v),null}else 2*ye()-R.renderingStartTime>bj&&N!==536870912&&(v.flags|=128,_=!0,Xg(R,!1),v.lanes=4194304);R.isBackwards?(H.sibling=v.child,v.child=H):(m=R.last,m!==null?m.sibling=H:v.child=H,R.last=H)}return R.tail!==null?(v=R.tail,R.rendering=v,R.tail=v.sibling,R.renderingStartTime=ye(),v.sibling=null,m=fi.current,V(fi,_?m&1|2:m&1),v):(cs(v),null);case 22:case 23:return Ih(v),ua(),_=v.memoizedState!==null,m!==null?m.memoizedState!==null!==_&&(v.flags|=8192):_&&(v.flags|=8192),_?(N&536870912)!==0&&(v.flags&128)===0&&(cs(v),v.subtreeFlags&6&&(v.flags|=8192)):cs(v),N=v.updateQueue,N!==null&&xj(v,N.retryQueue),N=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),_=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(_=v.memoizedState.cachePool.pool),_!==N&&(v.flags|=2048),m!==null&&M(B),null;case 24:return N=null,m!==null&&(N=m.memoizedState.cache),v.memoizedState.cache!==N&&(v.flags|=2048),Cc(Rs),cs(v),null;case 25:return null;case 30:return null}throw Error(a(156,v.tag))}function zQ(m,v){switch(kp(v),v.tag){case 1:return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 3:return Cc(Rs),ae(),m=v.flags,(m&65536)!==0&&(m&128)===0?(v.flags=m&-65537|128,v):null;case 26:case 27:case 5:return de(v),null;case 13:if(Ih(v),m=v.memoizedState,m!==null&&m.dehydrated!==null){if(v.alternate===null)throw Error(a(340));zo()}return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 19:return M(fi),null;case 4:return ae(),null;case 10:return Cc(v.type),null;case 22:case 23:return Ih(v),ua(),m!==null&&M(B),m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 24:return Cc(Rs),null;case 25:return null;default:return null}}function oO(m,v){switch(kp(v),v.tag){case 3:Cc(Rs),ae();break;case 26:case 27:case 5:de(v);break;case 4:ae();break;case 13:Ih(v);break;case 19:M(fi);break;case 10:Cc(v.type);break;case 22:case 23:Ih(v),ua(),m!==null&&M(B);break;case 24:Cc(Rs)}}function Qg(m,v){try{var N=v.updateQueue,_=N!==null?N.lastEffect:null;if(_!==null){var R=_.next;N=R;do{if((N.tag&m)===m){_=void 0;var H=N.create,me=N.inst;_=H(),me.destroy=_}N=N.next}while(N!==R)}}catch(Ee){Dn(v,v.return,Ee)}}function nm(m,v,N){try{var _=v.updateQueue,R=_!==null?_.lastEffect:null;if(R!==null){var H=R.next;_=H;do{if((_.tag&m)===m){var me=_.inst,Ee=me.destroy;if(Ee!==void 0){me.destroy=void 0,R=v;var Ze=N,Dt=Ee;try{Dt()}catch(Gt){Dn(R,Ze,Gt)}}}_=_.next}while(_!==H)}}catch(Gt){Dn(v,v.return,Gt)}}function lO(m){var v=m.updateQueue;if(v!==null){var N=m.stateNode;try{Ka(v,N)}catch(_){Dn(m,m.return,_)}}}function cO(m,v,N){N.props=Bp(m.type,m.memoizedProps),N.state=m.memoizedState;try{N.componentWillUnmount()}catch(_){Dn(m,v,_)}}function Jg(m,v){try{var N=m.ref;if(N!==null){switch(m.tag){case 26:case 27:case 5:var _=m.stateNode;break;case 30:_=m.stateNode;break;default:_=m.stateNode}typeof N=="function"?m.refCleanup=N(_):N.current=_}}catch(R){Dn(m,v,R)}}function bu(m,v){var N=m.ref,_=m.refCleanup;if(N!==null)if(typeof _=="function")try{_()}catch(R){Dn(m,v,R)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof N=="function")try{N(null)}catch(R){Dn(m,v,R)}else N.current=null}function dO(m){var v=m.type,N=m.memoizedProps,_=m.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":N.autoFocus&&_.focus();break e;case"img":N.src?_.src=N.src:N.srcSet&&(_.srcset=N.srcSet)}}catch(R){Dn(m,m.return,R)}}function YC(m,v,N){try{var _=m.stateNode;uJ(_,m.type,N,v),_[pr]=v}catch(R){Dn(m,m.return,R)}}function uO(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&hm(m.type)||m.tag===4}function KC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||uO(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&hm(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function XC(m,v,N){var _=m.tag;if(_===5||_===6)m=m.stateNode,v?(N.nodeType===9?N.body:N.nodeName==="HTML"?N.ownerDocument.body:N).insertBefore(m,v):(v=N.nodeType===9?N.body:N.nodeName==="HTML"?N.ownerDocument.body:N,v.appendChild(m),N=N._reactRootContainer,N!=null||v.onclick!==null||(v.onclick=Ej));else if(_!==4&&(_===27&&hm(m.type)&&(N=m.stateNode,v=null),m=m.child,m!==null))for(XC(m,v,N),m=m.sibling;m!==null;)XC(m,v,N),m=m.sibling}function vj(m,v,N){var _=m.tag;if(_===5||_===6)m=m.stateNode,v?N.insertBefore(m,v):N.appendChild(m);else if(_!==4&&(_===27&&hm(m.type)&&(N=m.stateNode),m=m.child,m!==null))for(vj(m,v,N),m=m.sibling;m!==null;)vj(m,v,N),m=m.sibling}function hO(m){var v=m.stateNode,N=m.memoizedProps;try{for(var _=m.type,R=v.attributes;R.length;)v.removeAttributeNode(R[0]);Ki(v,_,N),v[rr]=m,v[pr]=N}catch(H){Dn(m,m.return,H)}}var Mh=!1,Ls=!1,QC=!1,fO=typeof WeakSet=="function"?WeakSet:Set,Ei=null;function HQ(m,v){if(m=m.containerInfo,jk=Mj,m=zi(m),hi(m)){if("selectionStart"in m)var N={start:m.selectionStart,end:m.selectionEnd};else e:{N=(N=m.ownerDocument)&&N.defaultView||window;var _=N.getSelection&&N.getSelection();if(_&&_.rangeCount!==0){N=_.anchorNode;var R=_.anchorOffset,H=_.focusNode;_=_.focusOffset;try{N.nodeType,H.nodeType}catch{N=null;break e}var me=0,Ee=-1,Ze=-1,Dt=0,Gt=0,tr=m,It=null;t:for(;;){for(var Pt;tr!==N||R!==0&&tr.nodeType!==3||(Ee=me+R),tr!==H||_!==0&&tr.nodeType!==3||(Ze=me+_),tr.nodeType===3&&(me+=tr.nodeValue.length),(Pt=tr.firstChild)!==null;)It=tr,tr=Pt;for(;;){if(tr===m)break t;if(It===N&&++Dt===R&&(Ee=me),It===H&&++Gt===_&&(Ze=me),(Pt=tr.nextSibling)!==null)break;tr=It,It=tr.parentNode}tr=Pt}N=Ee===-1||Ze===-1?null:{start:Ee,end:Ze}}else N=null}N=N||{start:0,end:0}}else N=null;for(Nk={focusedElem:m,selectionRange:N},Mj=!1,Ei=v;Ei!==null;)if(v=Ei,m=v.child,(v.subtreeFlags&1024)!==0&&m!==null)m.return=v,Ei=m;else for(;Ei!==null;){switch(v=Ei,H=v.alternate,m=v.flags,v.tag){case 0:break;case 11:case 15:break;case 1:if((m&1024)!==0&&H!==null){m=void 0,N=v,R=H.memoizedProps,H=H.memoizedState,_=N.stateNode;try{var oa=Bp(N.type,R,N.elementType===N.type);m=_.getSnapshotBeforeUpdate(oa,H),_.__reactInternalSnapshotBeforeUpdate=m}catch(Qr){Dn(N,N.return,Qr)}}break;case 3:if((m&1024)!==0){if(m=v.stateNode.containerInfo,N=m.nodeType,N===9)Ck(m);else if(N===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":Ck(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(a(163))}if(m=v.sibling,m!==null){m.return=v.return,Ei=m;break}Ei=v.return}}function mO(m,v,N){var _=N.flags;switch(N.tag){case 0:case 11:case 15:sm(m,N),_&4&&Qg(5,N);break;case 1:if(sm(m,N),_&4)if(m=N.stateNode,v===null)try{m.componentDidMount()}catch(me){Dn(N,N.return,me)}else{var R=Bp(N.type,v.memoizedProps);v=v.memoizedState;try{m.componentDidUpdate(R,v,m.__reactInternalSnapshotBeforeUpdate)}catch(me){Dn(N,N.return,me)}}_&64&&lO(N),_&512&&Jg(N,N.return);break;case 3:if(sm(m,N),_&64&&(m=N.updateQueue,m!==null)){if(v=null,N.child!==null)switch(N.child.tag){case 27:case 5:v=N.child.stateNode;break;case 1:v=N.child.stateNode}try{Ka(m,v)}catch(me){Dn(N,N.return,me)}}break;case 27:v===null&&_&4&&hO(N);case 26:case 5:sm(m,N),v===null&&_&4&&dO(N),_&512&&Jg(N,N.return);break;case 12:sm(m,N);break;case 13:sm(m,N),_&4&&vO(m,N),_&64&&(m=N.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(N=eJ.bind(null,N),gJ(m,N))));break;case 22:if(_=N.memoizedState!==null||Mh,!_){v=v!==null&&v.memoizedState!==null||Ls,R=Mh;var H=Ls;Mh=_,(Ls=v)&&!H?im(m,N,(N.subtreeFlags&8772)!==0):sm(m,N),Mh=R,Ls=H}break;case 30:break;default:sm(m,N)}}function pO(m){var v=m.alternate;v!==null&&(m.alternate=null,pO(v)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(v=m.stateNode,v!==null&&_e(v)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var Qn=null,ul=!1;function Rh(m,v,N){for(N=N.child;N!==null;)xO(m,v,N),N=N.sibling}function xO(m,v,N){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(At,N)}catch{}switch(N.tag){case 26:Ls||bu(N,v),Rh(m,v,N),N.memoizedState?N.memoizedState.count--:N.stateNode&&(N=N.stateNode,N.parentNode.removeChild(N));break;case 27:Ls||bu(N,v);var _=Qn,R=ul;hm(N.type)&&(Qn=N.stateNode,ul=!1),Rh(m,v,N),ob(N.stateNode),Qn=_,ul=R;break;case 5:Ls||bu(N,v);case 6:if(_=Qn,R=ul,Qn=null,Rh(m,v,N),Qn=_,ul=R,Qn!==null)if(ul)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(N.stateNode)}catch(H){Dn(N,v,H)}else try{Qn.removeChild(N.stateNode)}catch(H){Dn(N,v,H)}break;case 18:Qn!==null&&(ul?(m=Qn,nM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,N.stateNode),pb(m)):nM(Qn,N.stateNode));break;case 4:_=Qn,R=ul,Qn=N.stateNode.containerInfo,ul=!0,Rh(m,v,N),Qn=_,ul=R;break;case 0:case 11:case 14:case 15:Ls||nm(2,N,v),Ls||nm(4,N,v),Rh(m,v,N);break;case 1:Ls||(bu(N,v),_=N.stateNode,typeof _.componentWillUnmount=="function"&&cO(N,v,_)),Rh(m,v,N);break;case 21:Rh(m,v,N);break;case 22:Ls=(_=Ls)||N.memoizedState!==null,Rh(m,v,N),Ls=_;break;default:Rh(m,v,N)}}function vO(m,v){if(v.memoizedState===null&&(m=v.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{pb(m)}catch(N){Dn(v,v.return,N)}}function WQ(m){switch(m.tag){case 13:case 19:var v=m.stateNode;return v===null&&(v=m.stateNode=new fO),v;case 22:return m=m.stateNode,v=m._retryCache,v===null&&(v=m._retryCache=new fO),v;default:throw Error(a(435,m.tag))}}function JC(m,v){var N=WQ(m);v.forEach(function(_){var R=tJ.bind(null,m,_);N.has(_)||(N.add(_),_.then(R,R))})}function Ul(m,v){var N=v.deletions;if(N!==null)for(var _=0;_<N.length;_++){var R=N[_],H=m,me=v,Ee=me;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(hm(Ee.type)){Qn=Ee.stateNode,ul=!1;break e}break;case 5:Qn=Ee.stateNode,ul=!1;break e;case 3:case 4:Qn=Ee.stateNode.containerInfo,ul=!0;break e}Ee=Ee.return}if(Qn===null)throw Error(a(160));xO(H,me,R),Qn=null,ul=!1,H=R.alternate,H!==null&&(H.return=null),R.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)gO(v,m),v=v.sibling}var Sd=null;function gO(m,v){var N=m.alternate,_=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Ul(v,m),$l(m),_&4&&(nm(3,m,m.return),Qg(3,m),nm(5,m,m.return));break;case 1:Ul(v,m),$l(m),_&512&&(Ls||N===null||bu(N,N.return)),_&64&&Mh&&(m=m.updateQueue,m!==null&&(_=m.callbacks,_!==null&&(N=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=N===null?_:N.concat(_))));break;case 26:var R=Sd;if(Ul(v,m),$l(m),_&512&&(Ls||N===null||bu(N,N.return)),_&4){var H=N!==null?N.memoizedState:null;if(_=m.memoizedState,N===null)if(_===null)if(m.stateNode===null){e:{_=m.type,N=m.memoizedProps,R=R.ownerDocument||R;t:switch(_){case"title":H=R.getElementsByTagName("title")[0],(!H||H[Te]||H[rr]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=R.createElement(_),R.head.insertBefore(H,R.querySelector("head > title"))),Ki(H,_,N),H[rr]=m,st(H),_=H;break e;case"link":var me=hM("link","href",R).get(_+(N.href||""));if(me){for(var Ee=0;Ee<me.length;Ee++)if(H=me[Ee],H.getAttribute("href")===(N.href==null||N.href===""?null:N.href)&&H.getAttribute("rel")===(N.rel==null?null:N.rel)&&H.getAttribute("title")===(N.title==null?null:N.title)&&H.getAttribute("crossorigin")===(N.crossOrigin==null?null:N.crossOrigin)){me.splice(Ee,1);break t}}H=R.createElement(_),Ki(H,_,N),R.head.appendChild(H);break;case"meta":if(me=hM("meta","content",R).get(_+(N.content||""))){for(Ee=0;Ee<me.length;Ee++)if(H=me[Ee],H.getAttribute("content")===(N.content==null?null:""+N.content)&&H.getAttribute("name")===(N.name==null?null:N.name)&&H.getAttribute("property")===(N.property==null?null:N.property)&&H.getAttribute("http-equiv")===(N.httpEquiv==null?null:N.httpEquiv)&&H.getAttribute("charset")===(N.charSet==null?null:N.charSet)){me.splice(Ee,1);break t}}H=R.createElement(_),Ki(H,_,N),R.head.appendChild(H);break;default:throw Error(a(468,_))}H[rr]=m,st(H),_=H}m.stateNode=_}else fM(R,m.type,m.stateNode);else m.stateNode=uM(R,_,m.memoizedProps);else H!==_?(H===null?N.stateNode!==null&&(N=N.stateNode,N.parentNode.removeChild(N)):H.count--,_===null?fM(R,m.type,m.stateNode):uM(R,_,m.memoizedProps)):_===null&&m.stateNode!==null&&YC(m,m.memoizedProps,N.memoizedProps)}break;case 27:Ul(v,m),$l(m),_&512&&(Ls||N===null||bu(N,N.return)),N!==null&&_&4&&YC(m,m.memoizedProps,N.memoizedProps);break;case 5:if(Ul(v,m),$l(m),_&512&&(Ls||N===null||bu(N,N.return)),m.flags&32){R=m.stateNode;try{Ts(R,"")}catch(Pt){Dn(m,m.return,Pt)}}_&4&&m.stateNode!=null&&(R=m.memoizedProps,YC(m,R,N!==null?N.memoizedProps:R)),_&1024&&(QC=!0);break;case 6:if(Ul(v,m),$l(m),_&4){if(m.stateNode===null)throw Error(a(162));_=m.memoizedProps,N=m.stateNode;try{N.nodeValue=_}catch(Pt){Dn(m,m.return,Pt)}}break;case 3:if(Ij=null,R=Sd,Sd=Aj(v.containerInfo),Ul(v,m),Sd=R,$l(m),_&4&&N!==null&&N.memoizedState.isDehydrated)try{pb(v.containerInfo)}catch(Pt){Dn(m,m.return,Pt)}QC&&(QC=!1,bO(m));break;case 4:_=Sd,Sd=Aj(m.stateNode.containerInfo),Ul(v,m),$l(m),Sd=_;break;case 12:Ul(v,m),$l(m);break;case 13:Ul(v,m),$l(m),m.child.flags&8192&&m.memoizedState!==null!=(N!==null&&N.memoizedState!==null)&&(nk=ye()),_&4&&(_=m.updateQueue,_!==null&&(m.updateQueue=null,JC(m,_)));break;case 22:R=m.memoizedState!==null;var Ze=N!==null&&N.memoizedState!==null,Dt=Mh,Gt=Ls;if(Mh=Dt||R,Ls=Gt||Ze,Ul(v,m),Ls=Gt,Mh=Dt,$l(m),_&8192)e:for(v=m.stateNode,v._visibility=R?v._visibility&-2:v._visibility|1,R&&(N===null||Ze||Mh||Ls||Up(m)),N=null,v=m;;){if(v.tag===5||v.tag===26){if(N===null){Ze=N=v;try{if(H=Ze.stateNode,R)me=H.style,typeof me.setProperty=="function"?me.setProperty("display","none","important"):me.display="none";else{Ee=Ze.stateNode;var tr=Ze.memoizedProps.style,It=tr!=null&&tr.hasOwnProperty("display")?tr.display:null;Ee.style.display=It==null||typeof It=="boolean"?"":(""+It).trim()}}catch(Pt){Dn(Ze,Ze.return,Pt)}}}else if(v.tag===6){if(N===null){Ze=v;try{Ze.stateNode.nodeValue=R?"":Ze.memoizedProps}catch(Pt){Dn(Ze,Ze.return,Pt)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===m)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break e;for(;v.sibling===null;){if(v.return===null||v.return===m)break e;N===v&&(N=null),v=v.return}N===v&&(N=null),v.sibling.return=v.return,v=v.sibling}_&4&&(_=m.updateQueue,_!==null&&(N=_.retryQueue,N!==null&&(_.retryQueue=null,JC(m,N))));break;case 19:Ul(v,m),$l(m),_&4&&(_=m.updateQueue,_!==null&&(m.updateQueue=null,JC(m,_)));break;case 30:break;case 21:break;default:Ul(v,m),$l(m)}}function $l(m){var v=m.flags;if(v&2){try{for(var N,_=m.return;_!==null;){if(uO(_)){N=_;break}_=_.return}if(N==null)throw Error(a(160));switch(N.tag){case 27:var R=N.stateNode,H=KC(m);vj(m,H,R);break;case 5:var me=N.stateNode;N.flags&32&&(Ts(me,""),N.flags&=-33);var Ee=KC(m);vj(m,Ee,me);break;case 3:case 4:var Ze=N.stateNode.containerInfo,Dt=KC(m);XC(m,Dt,Ze);break;default:throw Error(a(161))}}catch(Gt){Dn(m,m.return,Gt)}m.flags&=-3}v&4096&&(m.flags&=-4097)}function bO(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var v=m;bO(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),m=m.sibling}}function sm(m,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)mO(m,v.alternate,v),v=v.sibling}function Up(m){for(m=m.child;m!==null;){var v=m;switch(v.tag){case 0:case 11:case 14:case 15:nm(4,v,v.return),Up(v);break;case 1:bu(v,v.return);var N=v.stateNode;typeof N.componentWillUnmount=="function"&&cO(v,v.return,N),Up(v);break;case 27:ob(v.stateNode);case 26:case 5:bu(v,v.return),Up(v);break;case 22:v.memoizedState===null&&Up(v);break;case 30:Up(v);break;default:Up(v)}m=m.sibling}}function im(m,v,N){for(N=N&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var _=v.alternate,R=m,H=v,me=H.flags;switch(H.tag){case 0:case 11:case 15:im(R,H,N),Qg(4,H);break;case 1:if(im(R,H,N),_=H,R=_.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Dt){Dn(_,_.return,Dt)}if(_=H,R=_.updateQueue,R!==null){var Ee=_.stateNode;try{var Ze=R.shared.hiddenCallbacks;if(Ze!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ze.length;R++)La(Ze[R],Ee)}catch(Dt){Dn(_,_.return,Dt)}}N&&me&64&&lO(H),Jg(H,H.return);break;case 27:hO(H);case 26:case 5:im(R,H,N),N&&_===null&&me&4&&dO(H),Jg(H,H.return);break;case 12:im(R,H,N);break;case 13:im(R,H,N),N&&me&4&&vO(R,H);break;case 22:H.memoizedState===null&&im(R,H,N),Jg(H,H.return);break;case 30:break;default:im(R,H,N)}v=v.sibling}}function ZC(m,v){var N=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),m=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(m=v.memoizedState.cachePool.pool),m!==N&&(m!=null&&m.refCount++,N!=null&&_p(N))}function ek(m,v){m=null,v.alternate!==null&&(m=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==m&&(v.refCount++,m!=null&&_p(m))}function yu(m,v,N,_){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)yO(m,v,N,_),v=v.sibling}function yO(m,v,N,_){var R=v.flags;switch(v.tag){case 0:case 11:case 15:yu(m,v,N,_),R&2048&&Qg(9,v);break;case 1:yu(m,v,N,_);break;case 3:yu(m,v,N,_),R&2048&&(m=null,v.alternate!==null&&(m=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==m&&(v.refCount++,m!=null&&_p(m)));break;case 12:if(R&2048){yu(m,v,N,_),m=v.stateNode;try{var H=v.memoizedProps,me=H.id,Ee=H.onPostCommit;typeof Ee=="function"&&Ee(me,v.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(Ze){Dn(v,v.return,Ze)}}else yu(m,v,N,_);break;case 13:yu(m,v,N,_);break;case 23:break;case 22:H=v.stateNode,me=v.alternate,v.memoizedState!==null?H._visibility&2?yu(m,v,N,_):Zg(m,v):H._visibility&2?yu(m,v,N,_):(H._visibility|=2,_v(m,v,N,_,(v.subtreeFlags&10256)!==0)),R&2048&&ZC(me,v);break;case 24:yu(m,v,N,_),R&2048&&ek(v.alternate,v);break;default:yu(m,v,N,_)}}function _v(m,v,N,_,R){for(R=R&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var H=m,me=v,Ee=N,Ze=_,Dt=me.flags;switch(me.tag){case 0:case 11:case 15:_v(H,me,Ee,Ze,R),Qg(8,me);break;case 23:break;case 22:var Gt=me.stateNode;me.memoizedState!==null?Gt._visibility&2?_v(H,me,Ee,Ze,R):Zg(H,me):(Gt._visibility|=2,_v(H,me,Ee,Ze,R)),R&&Dt&2048&&ZC(me.alternate,me);break;case 24:_v(H,me,Ee,Ze,R),R&&Dt&2048&&ek(me.alternate,me);break;default:_v(H,me,Ee,Ze,R)}v=v.sibling}}function Zg(m,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var N=m,_=v,R=_.flags;switch(_.tag){case 22:Zg(N,_),R&2048&&ZC(_.alternate,_);break;case 24:Zg(N,_),R&2048&&ek(_.alternate,_);break;default:Zg(N,_)}v=v.sibling}}var eb=8192;function Ev(m){if(m.subtreeFlags&eb)for(m=m.child;m!==null;)jO(m),m=m.sibling}function jO(m){switch(m.tag){case 26:Ev(m),m.flags&eb&&m.memoizedState!==null&&TJ(Sd,m.memoizedState,m.memoizedProps);break;case 5:Ev(m);break;case 3:case 4:var v=Sd;Sd=Aj(m.stateNode.containerInfo),Ev(m),Sd=v;break;case 22:m.memoizedState===null&&(v=m.alternate,v!==null&&v.memoizedState!==null?(v=eb,eb=16777216,Ev(m),eb=v):Ev(m));break;default:Ev(m)}}function NO(m){var v=m.alternate;if(v!==null&&(m=v.child,m!==null)){v.child=null;do v=m.sibling,m.sibling=null,m=v;while(m!==null)}}function tb(m){var v=m.deletions;if((m.flags&16)!==0){if(v!==null)for(var N=0;N<v.length;N++){var _=v[N];Ei=_,SO(_,m)}NO(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)wO(m),m=m.sibling}function wO(m){switch(m.tag){case 0:case 11:case 15:tb(m),m.flags&2048&&nm(9,m,m.return);break;case 3:tb(m);break;case 12:tb(m);break;case 22:var v=m.stateNode;m.memoizedState!==null&&v._visibility&2&&(m.return===null||m.return.tag!==13)?(v._visibility&=-3,gj(m)):tb(m);break;default:tb(m)}}function gj(m){var v=m.deletions;if((m.flags&16)!==0){if(v!==null)for(var N=0;N<v.length;N++){var _=v[N];Ei=_,SO(_,m)}NO(m)}for(m=m.child;m!==null;){switch(v=m,v.tag){case 0:case 11:case 15:nm(8,v,v.return),gj(v);break;case 22:N=v.stateNode,N._visibility&2&&(N._visibility&=-3,gj(v));break;default:gj(v)}m=m.sibling}}function SO(m,v){for(;Ei!==null;){var N=Ei;switch(N.tag){case 0:case 11:case 15:nm(8,N,v);break;case 23:case 22:if(N.memoizedState!==null&&N.memoizedState.cachePool!==null){var _=N.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:_p(N.memoizedState.cache)}if(_=N.child,_!==null)_.return=N,Ei=_;else e:for(N=m;Ei!==null;){_=Ei;var R=_.sibling,H=_.return;if(pO(_),_===N){Ei=null;break e}if(R!==null){R.return=H,Ei=R;break e}Ei=H}}}var GQ={getCacheForType:function(m){var v=Ms(Rs),N=v.data.get(m);return N===void 0&&(N=m(),v.data.set(m,N)),N}},YQ=typeof WeakMap=="function"?WeakMap:Map,pn=0,On=null,Pa=null,Ua=0,xn=0,Vl=null,om=!1,Dv=!1,tk=!1,Fh=0,js=0,lm=0,$p=0,rk=0,Dc=0,Av=0,rb=null,hl=null,ak=!1,nk=0,bj=1/0,yj=null,cm=null,Yi=0,dm=null,Tv=null,Iv=0,sk=0,ik=null,CO=null,ab=0,ok=null;function ql(){if((pn&2)!==0&&Ua!==0)return Ua&-Ua;if(U.T!==null){var m=_h;return m!==0?m:mk()}return bt()}function kO(){Dc===0&&(Dc=(Ua&536870912)===0||za?mt():536870912);var m=Ec.current;return m!==null&&(m.flags|=32),Dc}function zl(m,v,N){(m===On&&(xn===2||xn===9)||m.cancelPendingCommit!==null)&&(Pv(m,0),um(m,Ua,Dc,!1)),Ye(m,N),((pn&2)===0||m!==On)&&(m===On&&((pn&2)===0&&($p|=N),js===4&&um(m,Ua,Dc,!1)),ju(m))}function _O(m,v,N){if((pn&6)!==0)throw Error(a(327));var _=!N&&(v&124)===0&&(v&m.expiredLanes)===0||Ue(m,v),R=_?QQ(m,v):dk(m,v,!0),H=_;do{if(R===0){Dv&&!_&&um(m,v,0,!1);break}else{if(N=m.current.alternate,H&&!KQ(N)){R=dk(m,v,!1),H=!1;continue}if(R===2){if(H=v,m.errorRecoveryDisabledLanes&H)var me=0;else me=m.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){v=me;e:{var Ee=m;R=rb;var Ze=Ee.current.memoizedState.isDehydrated;if(Ze&&(Pv(Ee,me).flags|=256),me=dk(Ee,me,!1),me!==2){if(tk&&!Ze){Ee.errorRecoveryDisabledLanes|=H,$p|=H,R=4;break e}H=hl,hl=R,H!==null&&(hl===null?hl=H:hl.push.apply(hl,H))}R=me}if(H=!1,R!==2)continue}}if(R===1){Pv(m,0),um(m,v,0,!0);break}e:{switch(_=m,H=R,H){case 0:case 1:throw Error(a(345));case 4:if((v&4194048)!==v)break;case 6:um(_,v,Dc,!om);break e;case 2:hl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((v&62914560)===v&&(R=nk+300-ye(),10<R)){if(um(_,v,Dc,!om),Qe(_,0,!0)!==0)break e;_.timeoutHandle=rM(EO.bind(null,_,N,hl,yj,ak,v,Dc,$p,Av,om,H,2,-0,0),R);break e}EO(_,N,hl,yj,ak,v,Dc,$p,Av,om,H,0,-0,0)}}break}while(!0);ju(m)}function EO(m,v,N,_,R,H,me,Ee,Ze,Dt,Gt,tr,It,Pt){if(m.timeoutHandle=-1,tr=v.subtreeFlags,(tr&8192||(tr&16785408)===16785408)&&(db={stylesheets:null,count:0,unsuspend:AJ},jO(v),tr=IJ(),tr!==null)){m.cancelPendingCommit=tr(MO.bind(null,m,v,H,N,_,R,me,Ee,Ze,Gt,1,It,Pt)),um(m,H,me,!Dt);return}MO(m,v,H,N,_,R,me,Ee,Ze)}function KQ(m){for(var v=m;;){var N=v.tag;if((N===0||N===11||N===15)&&v.flags&16384&&(N=v.updateQueue,N!==null&&(N=N.stores,N!==null)))for(var _=0;_<N.length;_++){var R=N[_],H=R.getSnapshot;R=R.value;try{if(!Zs(H(),R))return!1}catch{return!1}}if(N=v.child,v.subtreeFlags&16384&&N!==null)N.return=v,v=N;else{if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function um(m,v,N,_){v&=~rk,v&=~$p,m.suspendedLanes|=v,m.pingedLanes&=~v,_&&(m.warmLanes|=v),_=m.expirationTimes;for(var R=v;0<R;){var H=31-he(R),me=1<<H;_[H]=-1,R&=~me}N!==0&&Mt(m,N,v)}function jj(){return(pn&6)===0?(nb(0),!1):!0}function lk(){if(Pa!==null){if(xn===0)var m=Pa.return;else m=Pa,gd=ti=null,bv(m),Cv=null,Yg=0,m=Pa;for(;m!==null;)oO(m.alternate,m),m=m.return;Pa=null}}function Pv(m,v){var N=m.timeoutHandle;N!==-1&&(m.timeoutHandle=-1,fJ(N)),N=m.cancelPendingCommit,N!==null&&(m.cancelPendingCommit=null,N()),lk(),On=m,Pa=N=Nc(m.current,null),Ua=v,xn=0,Vl=null,om=!1,Dv=Ue(m,v),tk=!1,Av=Dc=rk=$p=lm=js=0,hl=rb=null,ak=!1,(v&8)!==0&&(v|=v&32);var _=m.entangledLanes;if(_!==0)for(m=m.entanglements,_&=v;0<_;){var R=31-he(_),H=1<<R;v|=m[R],_&=~H}return Fh=v,ol(),N}function DO(m,v){Yr=null,U.H=lj,v===we||v===Ce?(v=xt(),xn=3):v===Se?(v=xt(),xn=4):xn=v===GP?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,Vl=v,Pa===null&&(js=1,fj(m,Ca(v,m.current)))}function AO(){var m=U.H;return U.H=lj,m===null?lj:m}function TO(){var m=U.A;return U.A=GQ,m}function ck(){js=4,om||(Ua&4194048)!==Ua&&Ec.current!==null||(Dv=!0),(lm&134217727)===0&&($p&134217727)===0||On===null||um(On,Ua,Dc,!1)}function dk(m,v,N){var _=pn;pn|=2;var R=AO(),H=TO();(On!==m||Ua!==v)&&(yj=null,Pv(m,v)),v=!1;var me=js;e:do try{if(xn!==0&&Pa!==null){var Ee=Pa,Ze=Vl;switch(xn){case 8:lk(),me=6;break e;case 3:case 2:case 9:case 6:Ec.current===null&&(v=!0);var Dt=xn;if(xn=0,Vl=null,Ov(m,Ee,Ze,Dt),N&&Dv){me=0;break e}break;default:Dt=xn,xn=0,Vl=null,Ov(m,Ee,Ze,Dt)}}XQ(),me=js;break}catch(Gt){DO(m,Gt)}while(!0);return v&&m.shellSuspendCounter++,gd=ti=null,pn=_,U.H=R,U.A=H,Pa===null&&(On=null,Ua=0,ol()),me}function XQ(){for(;Pa!==null;)IO(Pa)}function QQ(m,v){var N=pn;pn|=2;var _=AO(),R=TO();On!==m||Ua!==v?(yj=null,bj=ye()+500,Pv(m,v)):Dv=Ue(m,v);e:do try{if(xn!==0&&Pa!==null){v=Pa;var H=Vl;t:switch(xn){case 1:xn=0,Vl=null,Ov(m,v,H,1);break;case 2:case 9:if($e(H)){xn=0,Vl=null,PO(v);break}v=function(){xn!==2&&xn!==9||On!==m||(xn=7),ju(m)},H.then(v,v);break e;case 3:xn=7;break e;case 4:xn=5;break e;case 7:$e(H)?(xn=0,Vl=null,PO(v)):(xn=0,Vl=null,Ov(m,v,H,7));break;case 5:var me=null;switch(Pa.tag){case 26:me=Pa.memoizedState;case 5:case 27:var Ee=Pa;if(!me||mM(me)){xn=0,Vl=null;var Ze=Ee.sibling;if(Ze!==null)Pa=Ze;else{var Dt=Ee.return;Dt!==null?(Pa=Dt,Nj(Dt)):Pa=null}break t}}xn=0,Vl=null,Ov(m,v,H,5);break;case 6:xn=0,Vl=null,Ov(m,v,H,6);break;case 8:lk(),js=6;break e;default:throw Error(a(462))}}JQ();break}catch(Gt){DO(m,Gt)}while(!0);return gd=ti=null,U.H=_,U.A=R,pn=N,Pa!==null?0:(On=null,Ua=0,ol(),js)}function JQ(){for(;Pa!==null&&!ue();)IO(Pa)}function IO(m){var v=sO(m.alternate,m,Fh);m.memoizedProps=m.pendingProps,v===null?Nj(m):Pa=v}function PO(m){var v=m,N=v.alternate;switch(v.tag){case 15:case 0:v=ZP(N,v,v.pendingProps,v.type,void 0,Ua);break;case 11:v=ZP(N,v,v.pendingProps,v.type.render,v.ref,Ua);break;case 5:bv(v);default:oO(N,v),v=Pa=wp(v,Fh),v=sO(N,v,Fh)}m.memoizedProps=m.pendingProps,v===null?Nj(m):Pa=v}function Ov(m,v,N,_){gd=ti=null,bv(v),Cv=null,Yg=0;var R=v.return;try{if($Q(m,R,v,N,Ua)){js=1,fj(m,Ca(N,m.current)),Pa=null;return}}catch(H){if(R!==null)throw Pa=R,H;js=1,fj(m,Ca(N,m.current)),Pa=null;return}v.flags&32768?(za||_===1?m=!0:Dv||(Ua&536870912)!==0?m=!1:(om=m=!0,(_===2||_===9||_===3||_===6)&&(_=Ec.current,_!==null&&_.tag===13&&(_.flags|=16384))),OO(v,m)):Nj(v)}function Nj(m){var v=m;do{if((v.flags&32768)!==0){OO(v,om);return}m=v.return;var N=qQ(v.alternate,v,Fh);if(N!==null){Pa=N;return}if(v=v.sibling,v!==null){Pa=v;return}Pa=v=m}while(v!==null);js===0&&(js=5)}function OO(m,v){do{var N=zQ(m.alternate,m);if(N!==null){N.flags&=32767,Pa=N;return}if(N=m.return,N!==null&&(N.flags|=32768,N.subtreeFlags=0,N.deletions=null),!v&&(m=m.sibling,m!==null)){Pa=m;return}Pa=m=N}while(m!==null);js=6,Pa=null}function MO(m,v,N,_,R,H,me,Ee,Ze){m.cancelPendingCommit=null;do wj();while(Yi!==0);if((pn&6)!==0)throw Error(a(327));if(v!==null){if(v===m.current)throw Error(a(177));if(H=v.lanes|v.childLanes,H|=is,lt(m,N,H,me,Ee,Ze),m===On&&(Pa=On=null,Ua=0),Tv=v,dm=m,Iv=N,sk=H,ik=R,CO=_,(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,rJ(et,function(){return UO(),null})):(m.callbackNode=null,m.callbackPriority=0),_=(v.flags&13878)!==0,(v.subtreeFlags&13878)!==0||_){_=U.T,U.T=null,R=J.p,J.p=2,me=pn,pn|=4;try{HQ(m,v,N)}finally{pn=me,J.p=R,U.T=_}}Yi=1,RO(),FO(),LO()}}function RO(){if(Yi===1){Yi=0;var m=dm,v=Tv,N=(v.flags&13878)!==0;if((v.subtreeFlags&13878)!==0||N){N=U.T,U.T=null;var _=J.p;J.p=2;var R=pn;pn|=4;try{gO(v,m);var H=Nk,me=zi(m.containerInfo),Ee=H.focusedElem,Ze=H.selectionRange;if(me!==Ee&&Ee&&Ee.ownerDocument&&ru(Ee.ownerDocument.documentElement,Ee)){if(Ze!==null&&hi(Ee)){var Dt=Ze.start,Gt=Ze.end;if(Gt===void 0&&(Gt=Dt),"selectionStart"in Ee)Ee.selectionStart=Dt,Ee.selectionEnd=Math.min(Gt,Ee.value.length);else{var tr=Ee.ownerDocument||document,It=tr&&tr.defaultView||window;if(It.getSelection){var Pt=It.getSelection(),oa=Ee.textContent.length,Qr=Math.min(Ze.start,oa),Cn=Ze.end===void 0?Qr:Math.min(Ze.end,oa);!Pt.extend&&Qr>Cn&&(me=Cn,Cn=Qr,Qr=me);var gt=dd(Ee,Qr),ct=dd(Ee,Cn);if(gt&&ct&&(Pt.rangeCount!==1||Pt.anchorNode!==gt.node||Pt.anchorOffset!==gt.offset||Pt.focusNode!==ct.node||Pt.focusOffset!==ct.offset)){var _t=tr.createRange();_t.setStart(gt.node,gt.offset),Pt.removeAllRanges(),Qr>Cn?(Pt.addRange(_t),Pt.extend(ct.node,ct.offset)):(_t.setEnd(ct.node,ct.offset),Pt.addRange(_t))}}}}for(tr=[],Pt=Ee;Pt=Pt.parentNode;)Pt.nodeType===1&&tr.push({element:Pt,left:Pt.scrollLeft,top:Pt.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<tr.length;Ee++){var Qt=tr[Ee];Qt.element.scrollLeft=Qt.left,Qt.element.scrollTop=Qt.top}}Mj=!!jk,Nk=jk=null}finally{pn=R,J.p=_,U.T=N}}m.current=v,Yi=2}}function FO(){if(Yi===2){Yi=0;var m=dm,v=Tv,N=(v.flags&8772)!==0;if((v.subtreeFlags&8772)!==0||N){N=U.T,U.T=null;var _=J.p;J.p=2;var R=pn;pn|=4;try{mO(m,v.alternate,v)}finally{pn=R,J.p=_,U.T=N}}Yi=3}}function LO(){if(Yi===4||Yi===3){Yi=0,oe();var m=dm,v=Tv,N=Iv,_=CO;(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?Yi=5:(Yi=0,Tv=dm=null,BO(m,m.pendingLanes));var R=m.pendingLanes;if(R===0&&(cm=null),ot(N),v=v.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(At,v,void 0,(v.current.flags&128)===128)}catch{}if(_!==null){v=U.T,R=J.p,J.p=2,U.T=null;try{for(var H=m.onRecoverableError,me=0;me<_.length;me++){var Ee=_[me];H(Ee.value,{componentStack:Ee.stack})}}finally{U.T=v,J.p=R}}(Iv&3)!==0&&wj(),ju(m),R=m.pendingLanes,(N&4194090)!==0&&(R&42)!==0?m===ok?ab++:(ab=0,ok=m):ab=0,nb(0)}}function BO(m,v){(m.pooledCacheLanes&=v)===0&&(v=m.pooledCache,v!=null&&(m.pooledCache=null,_p(v)))}function wj(m){return RO(),FO(),LO(),UO()}function UO(){if(Yi!==5)return!1;var m=dm,v=sk;sk=0;var N=ot(Iv),_=U.T,R=J.p;try{J.p=32>N?32:N,U.T=null,N=ik,ik=null;var H=dm,me=Iv;if(Yi=0,Tv=dm=null,Iv=0,(pn&6)!==0)throw Error(a(331));var Ee=pn;if(pn|=4,wO(H.current),yO(H,H.current,me,N),pn=Ee,nb(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(At,H)}catch{}return!0}finally{J.p=R,U.T=_,BO(m,v)}}function $O(m,v,N){v=Ca(N,v),v=BC(m.stateNode,v,2),m=er(m,v,2),m!==null&&(Ye(m,2),ju(m))}function Dn(m,v,N){if(m.tag===3)$O(m,m,N);else for(;v!==null;){if(v.tag===3){$O(v,m,N);break}else if(v.tag===1){var _=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(cm===null||!cm.has(_))){m=Ca(N,m),N=HP(2),_=er(v,N,2),_!==null&&(WP(N,_,v,m),Ye(_,2),ju(_));break}}v=v.return}}function uk(m,v,N){var _=m.pingCache;if(_===null){_=m.pingCache=new YQ;var R=new Set;_.set(v,R)}else R=_.get(v),R===void 0&&(R=new Set,_.set(v,R));R.has(N)||(tk=!0,R.add(N),m=ZQ.bind(null,m,v,N),v.then(m,m))}function ZQ(m,v,N){var _=m.pingCache;_!==null&&_.delete(v),m.pingedLanes|=m.suspendedLanes&N,m.warmLanes&=~N,On===m&&(Ua&N)===N&&(js===4||js===3&&(Ua&62914560)===Ua&&300>ye()-nk?(pn&2)===0&&Pv(m,0):rk|=N,Av===Ua&&(Av=0)),ju(m)}function VO(m,v){v===0&&(v=Ie()),m=hd(m,v),m!==null&&(Ye(m,v),ju(m))}function eJ(m){var v=m.memoizedState,N=0;v!==null&&(N=v.retryLane),VO(m,N)}function tJ(m,v){var N=0;switch(m.tag){case 13:var _=m.stateNode,R=m.memoizedState;R!==null&&(N=R.retryLane);break;case 19:_=m.stateNode;break;case 22:_=m.stateNode._retryCache;break;default:throw Error(a(314))}_!==null&&_.delete(v),VO(m,N)}function rJ(m,v){return se(m,v)}var Sj=null,Mv=null,hk=!1,Cj=!1,fk=!1,Vp=0;function ju(m){m!==Mv&&m.next===null&&(Mv===null?Sj=Mv=m:Mv=Mv.next=m),Cj=!0,hk||(hk=!0,nJ())}function nb(m,v){if(!fk&&Cj){fk=!0;do for(var N=!1,_=Sj;_!==null;){if(m!==0){var R=_.pendingLanes;if(R===0)var H=0;else{var me=_.suspendedLanes,Ee=_.pingedLanes;H=(1<<31-he(42|m)+1)-1,H&=R&~(me&~Ee),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(N=!0,WO(_,H))}else H=Ua,H=Qe(_,_===On?H:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(H&3)===0||Ue(_,H)||(N=!0,WO(_,H));_=_.next}while(N);fk=!1}}function aJ(){qO()}function qO(){Cj=hk=!1;var m=0;Vp!==0&&(hJ()&&(m=Vp),Vp=0);for(var v=ye(),N=null,_=Sj;_!==null;){var R=_.next,H=zO(_,v);H===0?(_.next=null,N===null?Sj=R:N.next=R,R===null&&(Mv=N)):(N=_,(m!==0||(H&3)!==0)&&(Cj=!0)),_=R}nb(m)}function zO(m,v){for(var N=m.suspendedLanes,_=m.pingedLanes,R=m.expirationTimes,H=m.pendingLanes&-62914561;0<H;){var me=31-he(H),Ee=1<<me,Ze=R[me];Ze===-1?((Ee&N)===0||(Ee&_)!==0)&&(R[me]=qe(Ee,v)):Ze<=v&&(m.expiredLanes|=Ee),H&=~Ee}if(v=On,N=Ua,N=Qe(m,m===v?N:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),_=m.callbackNode,N===0||m===v&&(xn===2||xn===9)||m.cancelPendingCommit!==null)return _!==null&&_!==null&&Ne(_),m.callbackNode=null,m.callbackPriority=0;if((N&3)===0||Ue(m,N)){if(v=N&-N,v===m.callbackPriority)return v;switch(_!==null&&Ne(_),ot(N)){case 2:case 8:N=He;break;case 32:N=et;break;case 268435456:N=Be;break;default:N=et}return _=HO.bind(null,m),N=se(N,_),m.callbackPriority=v,m.callbackNode=N,v}return _!==null&&_!==null&&Ne(_),m.callbackPriority=2,m.callbackNode=null,2}function HO(m,v){if(Yi!==0&&Yi!==5)return m.callbackNode=null,m.callbackPriority=0,null;var N=m.callbackNode;if(wj()&&m.callbackNode!==N)return null;var _=Ua;return _=Qe(m,m===On?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),_===0?null:(_O(m,_,v),zO(m,ye()),m.callbackNode!=null&&m.callbackNode===N?HO.bind(null,m):null)}function WO(m,v){if(wj())return null;_O(m,v,!0)}function nJ(){mJ(function(){(pn&6)!==0?se(Me,aJ):qO()})}function mk(){return Vp===0&&(Vp=mt()),Vp}function GO(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:Al(""+m)}function YO(m,v){var N=v.ownerDocument.createElement("input");return N.name=v.name,N.value=v.value,m.id&&N.setAttribute("form",m.id),v.parentNode.insertBefore(N,v),m=new FormData(m),N.parentNode.removeChild(N),m}function sJ(m,v,N,_,R){if(v==="submit"&&N&&N.stateNode===R){var H=GO((R[pr]||null).action),me=_.submitter;me&&(v=(v=me[pr]||null)?GO(v.formAction):me.getAttribute("formAction"),v!==null&&(H=v,me=null));var Ee=new gc("action","action",null,_,R);m.push({event:Ee,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Vp!==0){var Ze=me?YO(R,me):new FormData(R);_c(N,{pending:!0,data:Ze,method:R.method,action:H},null,Ze)}}else typeof H=="function"&&(Ee.preventDefault(),Ze=me?YO(R,me):new FormData(R),_c(N,{pending:!0,data:Ze,method:R.method,action:H},H,Ze))},currentTarget:R}]})}}for(var pk=0;pk<jh.length;pk++){var xk=jh[pk],iJ=xk.toLowerCase(),oJ=xk[0].toUpperCase()+xk.slice(1);Kn(iJ,"on"+oJ)}Kn(Hf,"onAnimationEnd"),Kn(nu,"onAnimationIteration"),Kn(su,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(iu,"onTransitionRun"),Kn(yh,"onTransitionStart"),Kn(Wf,"onTransitionCancel"),Kn(ou,"onTransitionEnd"),ir("onMouseEnter",["mouseout","mouseover"]),ir("onMouseLeave",["mouseout","mouseover"]),ir("onPointerEnter",["pointerout","pointerover"]),ir("onPointerLeave",["pointerout","pointerover"]),Jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sb));function KO(m,v){v=(v&4)!==0;for(var N=0;N<m.length;N++){var _=m[N],R=_.event;_=_.listeners;e:{var H=void 0;if(v)for(var me=_.length-1;0<=me;me--){var Ee=_[me],Ze=Ee.instance,Dt=Ee.currentTarget;if(Ee=Ee.listener,Ze!==H&&R.isPropagationStopped())break e;H=Ee,R.currentTarget=Dt;try{H(R)}catch(Gt){hj(Gt)}R.currentTarget=null,H=Ze}else for(me=0;me<_.length;me++){if(Ee=_[me],Ze=Ee.instance,Dt=Ee.currentTarget,Ee=Ee.listener,Ze!==H&&R.isPropagationStopped())break e;H=Ee,R.currentTarget=Dt;try{H(R)}catch(Gt){hj(Gt)}R.currentTarget=null,H=Ze}}}}function Oa(m,v){var N=v[vt];N===void 0&&(N=v[vt]=new Set);var _=m+"__bubble";N.has(_)||(XO(v,m,2,!1),N.add(_))}function vk(m,v,N){var _=0;v&&(_|=4),XO(N,m,_,v)}var kj="_reactListening"+Math.random().toString(36).slice(2);function gk(m){if(!m[kj]){m[kj]=!0,St.forEach(function(N){N!=="selectionchange"&&(lJ.has(N)||vk(N,!1,m),vk(N,!0,m))});var v=m.nodeType===9?m:m.ownerDocument;v===null||v[kj]||(v[kj]=!0,vk("selectionchange",!1,v))}}function XO(m,v,N,_){switch(yM(v)){case 2:var R=MJ;break;case 8:R=RJ;break;default:R=Ik}N=R.bind(null,v,N,m),R=void 0,!ar||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(R=!0),_?R!==void 0?m.addEventListener(v,N,{capture:!0,passive:R}):m.addEventListener(v,N,!0):R!==void 0?m.addEventListener(v,N,{passive:R}):m.addEventListener(v,N,!1)}function bk(m,v,N,_,R){var H=_;if((v&1)===0&&(v&2)===0&&_!==null)e:for(;;){if(_===null)return;var me=_.tag;if(me===3||me===4){var Ee=_.stateNode.containerInfo;if(Ee===R)break;if(me===4)for(me=_.return;me!==null;){var Ze=me.tag;if((Ze===3||Ze===4)&&me.stateNode.containerInfo===R)return;me=me.return}for(;Ee!==null;){if(me=Le(Ee),me===null)return;if(Ze=me.tag,Ze===5||Ze===6||Ze===26||Ze===27){_=H=me;continue e}Ee=Ee.parentNode}}_=_.return}If(function(){var Dt=H,Gt=vs(N),tr=[];e:{var It=ud.get(m);if(It!==void 0){var Pt=gc,oa=m;switch(m){case"keypress":if(vc(N)===0)break e;case"keydown":case"keyup":Pt=Uf;break;case"focusin":oa="focus",Pt=fh;break;case"focusout":oa="blur",Pt=fh;break;case"beforeblur":case"afterblur":Pt=fh;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=Qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=bp;break;case Hf:case nu:case su:Pt=Dg;break;case ou:Pt=be;break;case"scroll":case"scrollend":Pt=Of;break;case"wheel":Pt=rt;break;case"copy":case"cut":case"paste":Pt=Ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=$f;break;case"toggle":case"beforetoggle":Pt=Vt}var Qr=(v&4)!==0,Cn=!Qr&&(m==="scroll"||m==="scrollend"),gt=Qr?It!==null?It+"Capture":null:It;Qr=[];for(var ct=Dt,_t;ct!==null;){var Qt=ct;if(_t=Qt.stateNode,Qt=Qt.tag,Qt!==5&&Qt!==26&&Qt!==27||_t===null||gt===null||(Qt=at(ct,gt),Qt!=null&&Qr.push(ib(ct,Qt,_t))),Cn)break;ct=ct.return}0<Qr.length&&(It=new Pt(It,oa,null,N,Gt),tr.push({event:It,listeners:Qr}))}}if((v&7)===0){e:{if(It=m==="mouseover"||m==="pointerover",Pt=m==="mouseout"||m==="pointerout",It&&N!==pc&&(oa=N.relatedTarget||N.fromElement)&&(Le(oa)||oa[jr]))break e;if((Pt||It)&&(It=Gt.window===Gt?Gt:(It=Gt.ownerDocument)?It.defaultView||It.parentWindow:window,Pt?(oa=N.relatedTarget||N.toElement,Pt=Dt,oa=oa?Le(oa):null,oa!==null&&(Cn=i(oa),Qr=oa.tag,oa!==Cn||Qr!==5&&Qr!==27&&Qr!==6)&&(oa=null)):(Pt=null,oa=Dt),Pt!==oa)){if(Qr=bc,Qt="onMouseLeave",gt="onMouseEnter",ct="mouse",(m==="pointerout"||m==="pointerover")&&(Qr=$f,Qt="onPointerLeave",gt="onPointerEnter",ct="pointer"),Cn=Pt==null?It:pt(Pt),_t=oa==null?It:pt(oa),It=new Qr(Qt,ct+"leave",Pt,N,Gt),It.target=Cn,It.relatedTarget=_t,Qt=null,Le(Gt)===Dt&&(Qr=new Qr(gt,ct+"enter",oa,N,Gt),Qr.target=_t,Qr.relatedTarget=Cn,Qt=Qr),Cn=Qt,Pt&&oa)t:{for(Qr=Pt,gt=oa,ct=0,_t=Qr;_t;_t=Rv(_t))ct++;for(_t=0,Qt=gt;Qt;Qt=Rv(Qt))_t++;for(;0<ct-_t;)Qr=Rv(Qr),ct--;for(;0<_t-ct;)gt=Rv(gt),_t--;for(;ct--;){if(Qr===gt||gt!==null&&Qr===gt.alternate)break t;Qr=Rv(Qr),gt=Rv(gt)}Qr=null}else Qr=null;Pt!==null&&QO(tr,It,Pt,Qr,!1),oa!==null&&Cn!==null&&QO(tr,Cn,oa,Qr,!0)}}e:{if(It=Dt?pt(Dt):window,Pt=It.nodeName&&It.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&It.type==="file")var Tr=qf;else if(Ol(It))if(xh)Tr=uv;else{Tr=Ig;var Da=oo}else Pt=It.nodeName,!Pt||Pt.toLowerCase()!=="input"||It.type!=="checkbox"&&It.type!=="radio"?Dt&&id(Dt.elementType)&&(Tr=qf):Tr=jp;if(Tr&&(Tr=Tr(m,Dt))){yp(tr,Tr,N,Gt);break e}Da&&Da(m,It,Dt),m==="focusout"&&Dt&&It.type==="number"&&Dt.memoizedProps.value!=null&&tl(It,"number",It.value)}switch(Da=Dt?pt(Dt):window,m){case"focusin":(Ol(Da)||Da.contentEditable==="true")&&(lo=Da,Ml=Dt,yc=null);break;case"focusout":yc=Ml=lo=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,Yn(tr,N,Gt);break;case"selectionchange":if(au)break;case"keydown":case"keyup":Yn(tr,N,Gt)}var Hr;if(wr)e:{switch(m){case"compositionstart":var Zr="onCompositionStart";break e;case"compositionend":Zr="onCompositionEnd";break e;case"compositionupdate":Zr="onCompositionUpdate";break e}Zr=void 0}else ss?Ln(m,N)&&(Zr="onCompositionEnd"):m==="keydown"&&N.keyCode===229&&(Zr="onCompositionStart");Zr&&(ca&&N.locale!=="ko"&&(ss||Zr!=="onCompositionStart"?Zr==="onCompositionEnd"&&ss&&(Hr=Pf()):(_r=Gt,En="value"in _r?_r.value:_r.textContent,ss=!0)),Da=_j(Dt,Zr),0<Da.length&&(Zr=new Ff(Zr,m,null,N,Gt),tr.push({event:Zr,listeners:Da}),Hr?Zr.data=Hr:(Hr=ns(N),Hr!==null&&(Zr.data=Hr)))),(Hr=ha?Js(m,N):Pl(m,N))&&(Zr=_j(Dt,"onBeforeInput"),0<Zr.length&&(Da=new Ff("onBeforeInput","beforeinput",null,N,Gt),tr.push({event:Da,listeners:Zr}),Da.data=Hr)),sJ(tr,m,Dt,N,Gt)}KO(tr,v)})}function ib(m,v,N){return{instance:m,listener:v,currentTarget:N}}function _j(m,v){for(var N=v+"Capture",_=[];m!==null;){var R=m,H=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||H===null||(R=at(m,N),R!=null&&_.unshift(ib(m,R,H)),R=at(m,v),R!=null&&_.push(ib(m,R,H))),m.tag===3)return _;m=m.return}return[]}function Rv(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function QO(m,v,N,_,R){for(var H=v._reactName,me=[];N!==null&&N!==_;){var Ee=N,Ze=Ee.alternate,Dt=Ee.stateNode;if(Ee=Ee.tag,Ze!==null&&Ze===_)break;Ee!==5&&Ee!==26&&Ee!==27||Dt===null||(Ze=Dt,R?(Dt=at(N,H),Dt!=null&&me.unshift(ib(N,Dt,Ze))):R||(Dt=at(N,H),Dt!=null&&me.push(ib(N,Dt,Ze)))),N=N.return}me.length!==0&&m.push({event:v,listeners:me})}var cJ=/\r\n?/g,dJ=/\u0000|\uFFFD/g;function JO(m){return(typeof m=="string"?m:""+m).replace(cJ,`
`).replace(dJ,"")}function ZO(m,v){return v=JO(v),JO(m)===v}function Ej(){}function Sn(m,v,N,_,R,H){switch(N){case"children":typeof _=="string"?v==="body"||v==="textarea"&&_===""||Ts(m,_):(typeof _=="number"||typeof _=="bigint")&&v!=="body"&&Ts(m,""+_);break;case"className":qr(m,"class",_);break;case"tabIndex":qr(m,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(m,N,_);break;case"style":El(m,_,H);break;case"data":if(v!=="object"){qr(m,"data",_);break}case"src":case"href":if(_===""&&(v!=="a"||N!=="href")){m.removeAttribute(N);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){m.removeAttribute(N);break}_=Al(""+_),m.setAttribute(N,_);break;case"action":case"formAction":if(typeof _=="function"){m.setAttribute(N,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(N==="formAction"?(v!=="input"&&Sn(m,v,"name",R.name,R,null),Sn(m,v,"formEncType",R.formEncType,R,null),Sn(m,v,"formMethod",R.formMethod,R,null),Sn(m,v,"formTarget",R.formTarget,R,null)):(Sn(m,v,"encType",R.encType,R,null),Sn(m,v,"method",R.method,R,null),Sn(m,v,"target",R.target,R,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){m.removeAttribute(N);break}_=Al(""+_),m.setAttribute(N,_);break;case"onClick":_!=null&&(m.onclick=Ej);break;case"onScroll":_!=null&&Oa("scroll",m);break;case"onScrollEnd":_!=null&&Oa("scrollend",m);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(a(61));if(N=_.__html,N!=null){if(R.children!=null)throw Error(a(60));m.innerHTML=N}}break;case"multiple":m.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":m.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){m.removeAttribute("xlink:href");break}N=Al(""+_),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",N);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?m.setAttribute(N,""+_):m.removeAttribute(N);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?m.setAttribute(N,""):m.removeAttribute(N);break;case"capture":case"download":_===!0?m.setAttribute(N,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?m.setAttribute(N,_):m.removeAttribute(N);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?m.setAttribute(N,_):m.removeAttribute(N);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?m.removeAttribute(N):m.setAttribute(N,_);break;case"popover":Oa("beforetoggle",m),Oa("toggle",m),ur(m,"popover",_);break;case"xlinkActuate":va(m,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":va(m,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":va(m,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":va(m,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":va(m,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":va(m,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":va(m,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":va(m,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":va(m,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":ur(m,"is",_);break;case"innerText":case"textContent":break;default:(!(2<N.length)||N[0]!=="o"&&N[0]!=="O"||N[1]!=="n"&&N[1]!=="N")&&(N=Dl.get(N)||N,ur(m,N,_))}}function yk(m,v,N,_,R,H){switch(N){case"style":El(m,_,H);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(a(61));if(N=_.__html,N!=null){if(R.children!=null)throw Error(a(60));m.innerHTML=N}}break;case"children":typeof _=="string"?Ts(m,_):(typeof _=="number"||typeof _=="bigint")&&Ts(m,""+_);break;case"onScroll":_!=null&&Oa("scroll",m);break;case"onScrollEnd":_!=null&&Oa("scrollend",m);break;case"onClick":_!=null&&(m.onclick=Ej);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ct.hasOwnProperty(N))e:{if(N[0]==="o"&&N[1]==="n"&&(R=N.endsWith("Capture"),v=N.slice(2,R?N.length-7:void 0),H=m[pr]||null,H=H!=null?H[N]:null,typeof H=="function"&&m.removeEventListener(v,H,R),typeof _=="function")){typeof H!="function"&&H!==null&&(N in m?m[N]=null:m.hasAttribute(N)&&m.removeAttribute(N)),m.addEventListener(v,_,R);break e}N in m?m[N]=_:_===!0?m.setAttribute(N,""):ur(m,N,_)}}}function Ki(m,v,N){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oa("error",m),Oa("load",m);var _=!1,R=!1,H;for(H in N)if(N.hasOwnProperty(H)){var me=N[H];if(me!=null)switch(H){case"src":_=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,v));default:Sn(m,v,H,me,N,null)}}R&&Sn(m,v,"srcSet",N.srcSet,N,null),_&&Sn(m,v,"src",N.src,N,null);return;case"input":Oa("invalid",m);var Ee=H=me=R=null,Ze=null,Dt=null;for(_ in N)if(N.hasOwnProperty(_)){var Gt=N[_];if(Gt!=null)switch(_){case"name":R=Gt;break;case"type":me=Gt;break;case"checked":Ze=Gt;break;case"defaultChecked":Dt=Gt;break;case"value":H=Gt;break;case"defaultValue":Ee=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(a(137,v));break;default:Sn(m,v,_,Gt,N,null)}}el(m,H,Ee,Ze,Dt,me,R,!1),cn(m);return;case"select":Oa("invalid",m),_=me=H=null;for(R in N)if(N.hasOwnProperty(R)&&(Ee=N[R],Ee!=null))switch(R){case"value":H=Ee;break;case"defaultValue":me=Ee;break;case"multiple":_=Ee;default:Sn(m,v,R,Ee,N,null)}v=H,N=me,m.multiple=!!_,v!=null?Vi(m,!!_,v,!1):N!=null&&Vi(m,!!_,N,!0);return;case"textarea":Oa("invalid",m),H=R=_=null;for(me in N)if(N.hasOwnProperty(me)&&(Ee=N[me],Ee!=null))switch(me){case"value":_=Ee;break;case"defaultValue":R=Ee;break;case"children":H=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(91));break;default:Sn(m,v,me,Ee,N,null)}qi(m,_,R,H),cn(m);return;case"option":for(Ze in N)if(N.hasOwnProperty(Ze)&&(_=N[Ze],_!=null))switch(Ze){case"selected":m.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Sn(m,v,Ze,_,N,null)}return;case"dialog":Oa("beforetoggle",m),Oa("toggle",m),Oa("cancel",m),Oa("close",m);break;case"iframe":case"object":Oa("load",m);break;case"video":case"audio":for(_=0;_<sb.length;_++)Oa(sb[_],m);break;case"image":Oa("error",m),Oa("load",m);break;case"details":Oa("toggle",m);break;case"embed":case"source":case"link":Oa("error",m),Oa("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Dt in N)if(N.hasOwnProperty(Dt)&&(_=N[Dt],_!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,v));default:Sn(m,v,Dt,_,N,null)}return;default:if(id(v)){for(Gt in N)N.hasOwnProperty(Gt)&&(_=N[Gt],_!==void 0&&yk(m,v,Gt,_,N,void 0));return}}for(Ee in N)N.hasOwnProperty(Ee)&&(_=N[Ee],_!=null&&Sn(m,v,Ee,_,N,null))}function uJ(m,v,N,_){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,H=null,me=null,Ee=null,Ze=null,Dt=null,Gt=null;for(Pt in N){var tr=N[Pt];if(N.hasOwnProperty(Pt)&&tr!=null)switch(Pt){case"checked":break;case"value":break;case"defaultValue":Ze=tr;default:_.hasOwnProperty(Pt)||Sn(m,v,Pt,null,_,tr)}}for(var It in _){var Pt=_[It];if(tr=N[It],_.hasOwnProperty(It)&&(Pt!=null||tr!=null))switch(It){case"type":H=Pt;break;case"name":R=Pt;break;case"checked":Dt=Pt;break;case"defaultChecked":Gt=Pt;break;case"value":me=Pt;break;case"defaultValue":Ee=Pt;break;case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(a(137,v));break;default:Pt!==tr&&Sn(m,v,It,Pt,_,tr)}}ui(m,me,Ee,Ze,Dt,Gt,H,R);return;case"select":Pt=me=Ee=It=null;for(H in N)if(Ze=N[H],N.hasOwnProperty(H)&&Ze!=null)switch(H){case"value":break;case"multiple":Pt=Ze;default:_.hasOwnProperty(H)||Sn(m,v,H,null,_,Ze)}for(R in _)if(H=_[R],Ze=N[R],_.hasOwnProperty(R)&&(H!=null||Ze!=null))switch(R){case"value":It=H;break;case"defaultValue":Ee=H;break;case"multiple":me=H;default:H!==Ze&&Sn(m,v,R,H,_,Ze)}v=Ee,N=me,_=Pt,It!=null?Vi(m,!!N,It,!1):!!_!=!!N&&(v!=null?Vi(m,!!N,v,!0):Vi(m,!!N,N?[]:"",!1));return;case"textarea":Pt=It=null;for(Ee in N)if(R=N[Ee],N.hasOwnProperty(Ee)&&R!=null&&!_.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:Sn(m,v,Ee,null,_,R)}for(me in _)if(R=_[me],H=N[me],_.hasOwnProperty(me)&&(R!=null||H!=null))switch(me){case"value":It=R;break;case"defaultValue":Pt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:R!==H&&Sn(m,v,me,R,_,H)}qa(m,It,Pt);return;case"option":for(var oa in N)if(It=N[oa],N.hasOwnProperty(oa)&&It!=null&&!_.hasOwnProperty(oa))switch(oa){case"selected":m.selected=!1;break;default:Sn(m,v,oa,null,_,It)}for(Ze in _)if(It=_[Ze],Pt=N[Ze],_.hasOwnProperty(Ze)&&It!==Pt&&(It!=null||Pt!=null))switch(Ze){case"selected":m.selected=It&&typeof It!="function"&&typeof It!="symbol";break;default:Sn(m,v,Ze,It,_,Pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qr in N)It=N[Qr],N.hasOwnProperty(Qr)&&It!=null&&!_.hasOwnProperty(Qr)&&Sn(m,v,Qr,null,_,It);for(Dt in _)if(It=_[Dt],Pt=N[Dt],_.hasOwnProperty(Dt)&&It!==Pt&&(It!=null||Pt!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(a(137,v));break;default:Sn(m,v,Dt,It,_,Pt)}return;default:if(id(v)){for(var Cn in N)It=N[Cn],N.hasOwnProperty(Cn)&&It!==void 0&&!_.hasOwnProperty(Cn)&&yk(m,v,Cn,void 0,_,It);for(Gt in _)It=_[Gt],Pt=N[Gt],!_.hasOwnProperty(Gt)||It===Pt||It===void 0&&Pt===void 0||yk(m,v,Gt,It,_,Pt);return}}for(var gt in N)It=N[gt],N.hasOwnProperty(gt)&&It!=null&&!_.hasOwnProperty(gt)&&Sn(m,v,gt,null,_,It);for(tr in _)It=_[tr],Pt=N[tr],!_.hasOwnProperty(tr)||It===Pt||It==null&&Pt==null||Sn(m,v,tr,It,_,Pt)}var jk=null,Nk=null;function Dj(m){return m.nodeType===9?m:m.ownerDocument}function eM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tM(m,v){if(m===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&v==="foreignObject"?0:m}function wk(m,v){return m==="textarea"||m==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var Sk=null;function hJ(){var m=window.event;return m&&m.type==="popstate"?m===Sk?!1:(Sk=m,!0):(Sk=null,!1)}var rM=typeof setTimeout=="function"?setTimeout:void 0,fJ=typeof clearTimeout=="function"?clearTimeout:void 0,aM=typeof Promise=="function"?Promise:void 0,mJ=typeof queueMicrotask=="function"?queueMicrotask:typeof aM<"u"?function(m){return aM.resolve(null).then(m).catch(pJ)}:rM;function pJ(m){setTimeout(function(){throw m})}function hm(m){return m==="head"}function nM(m,v){var N=v,_=0,R=0;do{var H=N.nextSibling;if(m.removeChild(N),H&&H.nodeType===8)if(N=H.data,N==="/$"){if(0<_&&8>_){N=_;var me=m.ownerDocument;if(N&1&&ob(me.documentElement),N&2&&ob(me.body),N&4)for(N=me.head,ob(N),me=N.firstChild;me;){var Ee=me.nextSibling,Ze=me.nodeName;me[Te]||Ze==="SCRIPT"||Ze==="STYLE"||Ze==="LINK"&&me.rel.toLowerCase()==="stylesheet"||N.removeChild(me),me=Ee}}if(R===0){m.removeChild(H),pb(v);return}R--}else N==="$"||N==="$?"||N==="$!"?R++:_=N.charCodeAt(0)-48;else _=0;N=H}while(N);pb(v)}function Ck(m){var v=m.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var N=v;switch(v=v.nextSibling,N.nodeName){case"HTML":case"HEAD":case"BODY":Ck(N),_e(N);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(N.rel.toLowerCase()==="stylesheet")continue}m.removeChild(N)}}function xJ(m,v,N,_){for(;m.nodeType===1;){var R=N;if(m.nodeName.toLowerCase()!==v.toLowerCase()){if(!_&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(_){if(!m[Te])switch(v){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(H=m.getAttribute("rel"),H==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(H!==R.rel||m.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||m.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||m.getAttribute("title")!==(R.title==null?null:R.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(H=m.getAttribute("src"),(H!==(R.src==null?null:R.src)||m.getAttribute("type")!==(R.type==null?null:R.type)||m.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&H&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(v==="input"&&m.type==="hidden"){var H=R.name==null?null:""+R.name;if(R.type==="hidden"&&m.getAttribute("name")===H)return m}else return m;if(m=Cd(m.nextSibling),m===null)break}return null}function vJ(m,v,N){if(v==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!N||(m=Cd(m.nextSibling),m===null))return null;return m}function kk(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState==="complete"}function gJ(m,v){var N=m.ownerDocument;if(m.data!=="$?"||N.readyState==="complete")v();else{var _=function(){v(),N.removeEventListener("DOMContentLoaded",_)};N.addEventListener("DOMContentLoaded",_),m._reactRetry=_}}function Cd(m){for(;m!=null;m=m.nextSibling){var v=m.nodeType;if(v===1||v===3)break;if(v===8){if(v=m.data,v==="$"||v==="$!"||v==="$?"||v==="F!"||v==="F")break;if(v==="/$")return null}}return m}var _k=null;function sM(m){m=m.previousSibling;for(var v=0;m;){if(m.nodeType===8){var N=m.data;if(N==="$"||N==="$!"||N==="$?"){if(v===0)return m;v--}else N==="/$"&&v++}m=m.previousSibling}return null}function iM(m,v,N){switch(v=Dj(N),m){case"html":if(m=v.documentElement,!m)throw Error(a(452));return m;case"head":if(m=v.head,!m)throw Error(a(453));return m;case"body":if(m=v.body,!m)throw Error(a(454));return m;default:throw Error(a(451))}}function ob(m){for(var v=m.attributes;v.length;)m.removeAttributeNode(v[0]);_e(m)}var Ac=new Map,oM=new Set;function Aj(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Lh=J.d;J.d={f:bJ,r:yJ,D:jJ,C:NJ,L:wJ,m:SJ,X:kJ,S:CJ,M:_J};function bJ(){var m=Lh.f(),v=jj();return m||v}function yJ(m){var v=Ve(m);v!==null&&v.tag===5&&v.type==="form"?Fp(v):Lh.r(m)}var Fv=typeof document>"u"?null:document;function lM(m,v,N){var _=Fv;if(_&&typeof v=="string"&&v){var R=xa(v);R='link[rel="'+m+'"][href="'+R+'"]',typeof N=="string"&&(R+='[crossorigin="'+N+'"]'),oM.has(R)||(oM.add(R),m={rel:m,crossOrigin:N,href:v},_.querySelector(R)===null&&(v=_.createElement("link"),Ki(v,"link",m),st(v),_.head.appendChild(v)))}}function jJ(m){Lh.D(m),lM("dns-prefetch",m,null)}function NJ(m,v){Lh.C(m,v),lM("preconnect",m,v)}function wJ(m,v,N){Lh.L(m,v,N);var _=Fv;if(_&&m&&v){var R='link[rel="preload"][as="'+xa(v)+'"]';v==="image"&&N&&N.imageSrcSet?(R+='[imagesrcset="'+xa(N.imageSrcSet)+'"]',typeof N.imageSizes=="string"&&(R+='[imagesizes="'+xa(N.imageSizes)+'"]')):R+='[href="'+xa(m)+'"]';var H=R;switch(v){case"style":H=Lv(m);break;case"script":H=Bv(m)}Ac.has(H)||(m=u({rel:"preload",href:v==="image"&&N&&N.imageSrcSet?void 0:m,as:v},N),Ac.set(H,m),_.querySelector(R)!==null||v==="style"&&_.querySelector(lb(H))||v==="script"&&_.querySelector(cb(H))||(v=_.createElement("link"),Ki(v,"link",m),st(v),_.head.appendChild(v)))}}function SJ(m,v){Lh.m(m,v);var N=Fv;if(N&&m){var _=v&&typeof v.as=="string"?v.as:"script",R='link[rel="modulepreload"][as="'+xa(_)+'"][href="'+xa(m)+'"]',H=R;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=Bv(m)}if(!Ac.has(H)&&(m=u({rel:"modulepreload",href:m},v),Ac.set(H,m),N.querySelector(R)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(N.querySelector(cb(H)))return}_=N.createElement("link"),Ki(_,"link",m),st(_),N.head.appendChild(_)}}}function CJ(m,v,N){Lh.S(m,v,N);var _=Fv;if(_&&m){var R=wt(_).hoistableStyles,H=Lv(m);v=v||"default";var me=R.get(H);if(!me){var Ee={loading:0,preload:null};if(me=_.querySelector(lb(H)))Ee.loading=5;else{m=u({rel:"stylesheet",href:m,"data-precedence":v},N),(N=Ac.get(H))&&Ek(m,N);var Ze=me=_.createElement("link");st(Ze),Ki(Ze,"link",m),Ze._p=new Promise(function(Dt,Gt){Ze.onload=Dt,Ze.onerror=Gt}),Ze.addEventListener("load",function(){Ee.loading|=1}),Ze.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,Tj(me,v,_)}me={type:"stylesheet",instance:me,count:1,state:Ee},R.set(H,me)}}}function kJ(m,v){Lh.X(m,v);var N=Fv;if(N&&m){var _=wt(N).hoistableScripts,R=Bv(m),H=_.get(R);H||(H=N.querySelector(cb(R)),H||(m=u({src:m,async:!0},v),(v=Ac.get(R))&&Dk(m,v),H=N.createElement("script"),st(H),Ki(H,"link",m),N.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},_.set(R,H))}}function _J(m,v){Lh.M(m,v);var N=Fv;if(N&&m){var _=wt(N).hoistableScripts,R=Bv(m),H=_.get(R);H||(H=N.querySelector(cb(R)),H||(m=u({src:m,async:!0,type:"module"},v),(v=Ac.get(R))&&Dk(m,v),H=N.createElement("script"),st(H),Ki(H,"link",m),N.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},_.set(R,H))}}function cM(m,v,N,_){var R=(R=re.current)?Aj(R):null;if(!R)throw Error(a(446));switch(m){case"meta":case"title":return null;case"style":return typeof N.precedence=="string"&&typeof N.href=="string"?(v=Lv(N.href),N=wt(R).hoistableStyles,_=N.get(v),_||(_={type:"style",instance:null,count:0,state:null},N.set(v,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(N.rel==="stylesheet"&&typeof N.href=="string"&&typeof N.precedence=="string"){m=Lv(N.href);var H=wt(R).hoistableStyles,me=H.get(m);if(me||(R=R.ownerDocument||R,me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(m,me),(H=R.querySelector(lb(m)))&&!H._p&&(me.instance=H,me.state.loading=5),Ac.has(m)||(N={rel:"preload",as:"style",href:N.href,crossOrigin:N.crossOrigin,integrity:N.integrity,media:N.media,hrefLang:N.hrefLang,referrerPolicy:N.referrerPolicy},Ac.set(m,N),H||EJ(R,m,N,me.state))),v&&_===null)throw Error(a(528,""));return me}if(v&&_!==null)throw Error(a(529,""));return null;case"script":return v=N.async,N=N.src,typeof N=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=Bv(N),N=wt(R).hoistableScripts,_=N.get(v),_||(_={type:"script",instance:null,count:0,state:null},N.set(v,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,m))}}function Lv(m){return'href="'+xa(m)+'"'}function lb(m){return'link[rel="stylesheet"]['+m+"]"}function dM(m){return u({},m,{"data-precedence":m.precedence,precedence:null})}function EJ(m,v,N,_){m.querySelector('link[rel="preload"][as="style"]['+v+"]")?_.loading=1:(v=m.createElement("link"),_.preload=v,v.addEventListener("load",function(){return _.loading|=1}),v.addEventListener("error",function(){return _.loading|=2}),Ki(v,"link",N),st(v),m.head.appendChild(v))}function Bv(m){return'[src="'+xa(m)+'"]'}function cb(m){return"script[async]"+m}function uM(m,v,N){if(v.count++,v.instance===null)switch(v.type){case"style":var _=m.querySelector('style[data-href~="'+xa(N.href)+'"]');if(_)return v.instance=_,st(_),_;var R=u({},N,{"data-href":N.href,"data-precedence":N.precedence,href:null,precedence:null});return _=(m.ownerDocument||m).createElement("style"),st(_),Ki(_,"style",R),Tj(_,N.precedence,m),v.instance=_;case"stylesheet":R=Lv(N.href);var H=m.querySelector(lb(R));if(H)return v.state.loading|=4,v.instance=H,st(H),H;_=dM(N),(R=Ac.get(R))&&Ek(_,R),H=(m.ownerDocument||m).createElement("link"),st(H);var me=H;return me._p=new Promise(function(Ee,Ze){me.onload=Ee,me.onerror=Ze}),Ki(H,"link",_),v.state.loading|=4,Tj(H,N.precedence,m),v.instance=H;case"script":return H=Bv(N.src),(R=m.querySelector(cb(H)))?(v.instance=R,st(R),R):(_=N,(R=Ac.get(H))&&(_=u({},N),Dk(_,R)),m=m.ownerDocument||m,R=m.createElement("script"),st(R),Ki(R,"link",_),m.head.appendChild(R),v.instance=R);case"void":return null;default:throw Error(a(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(_=v.instance,v.state.loading|=4,Tj(_,N.precedence,m));return v.instance}function Tj(m,v,N){for(var _=N.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=_.length?_[_.length-1]:null,H=R,me=0;me<_.length;me++){var Ee=_[me];if(Ee.dataset.precedence===v)H=Ee;else if(H!==R)break}H?H.parentNode.insertBefore(m,H.nextSibling):(v=N.nodeType===9?N.head:N,v.insertBefore(m,v.firstChild))}function Ek(m,v){m.crossOrigin==null&&(m.crossOrigin=v.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=v.referrerPolicy),m.title==null&&(m.title=v.title)}function Dk(m,v){m.crossOrigin==null&&(m.crossOrigin=v.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=v.referrerPolicy),m.integrity==null&&(m.integrity=v.integrity)}var Ij=null;function hM(m,v,N){if(Ij===null){var _=new Map,R=Ij=new Map;R.set(N,_)}else R=Ij,_=R.get(N),_||(_=new Map,R.set(N,_));if(_.has(m))return _;for(_.set(m,null),N=N.getElementsByTagName(m),R=0;R<N.length;R++){var H=N[R];if(!(H[Te]||H[rr]||m==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var me=H.getAttribute(v)||"";me=m+me;var Ee=_.get(me);Ee?Ee.push(H):_.set(me,[H])}}return _}function fM(m,v,N){m=m.ownerDocument||m,m.head.insertBefore(N,v==="title"?m.querySelector("head > title"):null)}function DJ(m,v,N){if(N===1||v.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return m=v.disabled,typeof v.precedence=="string"&&m==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function mM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}var db=null;function AJ(){}function TJ(m,v,N){if(db===null)throw Error(a(475));var _=db;if(v.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var R=Lv(N.href),H=m.querySelector(lb(R));if(H){m=H._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(_.count++,_=Pj.bind(_),m.then(_,_)),v.state.loading|=4,v.instance=H,st(H);return}H=m.ownerDocument||m,N=dM(N),(R=Ac.get(R))&&Ek(N,R),H=H.createElement("link"),st(H);var me=H;me._p=new Promise(function(Ee,Ze){me.onload=Ee,me.onerror=Ze}),Ki(H,"link",N),v.instance=H}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(v,m),(m=v.state.preload)&&(v.state.loading&3)===0&&(_.count++,v=Pj.bind(_),m.addEventListener("load",v),m.addEventListener("error",v))}}function IJ(){if(db===null)throw Error(a(475));var m=db;return m.stylesheets&&m.count===0&&Ak(m,m.stylesheets),0<m.count?function(v){var N=setTimeout(function(){if(m.stylesheets&&Ak(m,m.stylesheets),m.unsuspend){var _=m.unsuspend;m.unsuspend=null,_()}},6e4);return m.unsuspend=v,function(){m.unsuspend=null,clearTimeout(N)}}:null}function Pj(){if(this.count--,this.count===0){if(this.stylesheets)Ak(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var Oj=null;function Ak(m,v){m.stylesheets=null,m.unsuspend!==null&&(m.count++,Oj=new Map,v.forEach(PJ,m),Oj=null,Pj.call(m))}function PJ(m,v){if(!(v.state.loading&4)){var N=Oj.get(m);if(N)var _=N.get(null);else{N=new Map,Oj.set(m,N);for(var R=m.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<R.length;H++){var me=R[H];(me.nodeName==="LINK"||me.getAttribute("media")!=="not all")&&(N.set(me.dataset.precedence,me),_=me)}_&&N.set(null,_)}R=v.instance,me=R.getAttribute("data-precedence"),H=N.get(me)||_,H===_&&N.set(null,R),N.set(me,R),this.count++,_=Pj.bind(this),R.addEventListener("load",_),R.addEventListener("error",_),H?H.parentNode.insertBefore(R,H.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(R,m.firstChild)),v.state.loading|=4}}var ub={$$typeof:w,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function OJ(m,v,N,_,R,H,me,Ee){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xe(0),this.hiddenUpdates=Xe(null),this.identifierPrefix=_,this.onUncaughtError=R,this.onCaughtError=H,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function pM(m,v,N,_,R,H,me,Ee,Ze,Dt,Gt,tr){return m=new OJ(m,v,N,me,Ee,Ze,Dt,tr),v=1,H===!0&&(v|=24),H=ki(3,null,null,v),m.current=H,H.stateNode=m,v=Og(),v.refCount++,m.pooledCache=v,v.refCount++,H.memoizedState={element:_,isDehydrated:N,cache:v},it(H),m}function xM(m){return m?(m=ei,m):ei}function vM(m,v,N,_,R,H){R=xM(R),_.context===null?_.context=R:_.pendingContext=R,_=Wt(v),_.payload={element:N},H=H===void 0?null:H,H!==null&&(_.callback=H),N=er(m,_,v),N!==null&&(zl(N,m,v),Kt(N,m,v))}function gM(m,v){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var N=m.retryLane;m.retryLane=N!==0&&N<v?N:v}}function Tk(m,v){gM(m,v),(m=m.alternate)&&gM(m,v)}function bM(m){if(m.tag===13){var v=hd(m,67108864);v!==null&&zl(v,m,67108864),Tk(m,67108864)}}var Mj=!0;function MJ(m,v,N,_){var R=U.T;U.T=null;var H=J.p;try{J.p=2,Ik(m,v,N,_)}finally{J.p=H,U.T=R}}function RJ(m,v,N,_){var R=U.T;U.T=null;var H=J.p;try{J.p=8,Ik(m,v,N,_)}finally{J.p=H,U.T=R}}function Ik(m,v,N,_){if(Mj){var R=Pk(_);if(R===null)bk(m,v,_,Rj,N),jM(m,_);else if(LJ(R,m,v,N,_))_.stopPropagation();else if(jM(m,_),v&4&&-1<FJ.indexOf(m)){for(;R!==null;){var H=Ve(R);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var me=Je(H.pendingLanes);if(me!==0){var Ee=H;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;me;){var Ze=1<<31-he(me);Ee.entanglements[1]|=Ze,me&=~Ze}ju(H),(pn&6)===0&&(bj=ye()+500,nb(0))}}break;case 13:Ee=hd(H,2),Ee!==null&&zl(Ee,H,2),jj(),Tk(H,2)}if(H=Pk(_),H===null&&bk(m,v,_,Rj,N),H===R)break;R=H}R!==null&&_.stopPropagation()}else bk(m,v,_,null,N)}}function Pk(m){return m=vs(m),Ok(m)}var Rj=null;function Ok(m){if(Rj=null,m=Le(m),m!==null){var v=i(m);if(v===null)m=null;else{var N=v.tag;if(N===13){if(m=o(v),m!==null)return m;m=null}else if(N===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;m=null}else v!==m&&(m=null)}}return Rj=m,null}function yM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case Me:return 2;case He:return 8;case et:case ft:return 32;case Be:return 268435456;default:return 32}default:return 32}}var Mk=!1,fm=null,mm=null,pm=null,hb=new Map,fb=new Map,xm=[],FJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jM(m,v){switch(m){case"focusin":case"focusout":fm=null;break;case"dragenter":case"dragleave":mm=null;break;case"mouseover":case"mouseout":pm=null;break;case"pointerover":case"pointerout":hb.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":fb.delete(v.pointerId)}}function mb(m,v,N,_,R,H){return m===null||m.nativeEvent!==H?(m={blockedOn:v,domEventName:N,eventSystemFlags:_,nativeEvent:H,targetContainers:[R]},v!==null&&(v=Ve(v),v!==null&&bM(v)),m):(m.eventSystemFlags|=_,v=m.targetContainers,R!==null&&v.indexOf(R)===-1&&v.push(R),m)}function LJ(m,v,N,_,R){switch(v){case"focusin":return fm=mb(fm,m,v,N,_,R),!0;case"dragenter":return mm=mb(mm,m,v,N,_,R),!0;case"mouseover":return pm=mb(pm,m,v,N,_,R),!0;case"pointerover":var H=R.pointerId;return hb.set(H,mb(hb.get(H)||null,m,v,N,_,R)),!0;case"gotpointercapture":return H=R.pointerId,fb.set(H,mb(fb.get(H)||null,m,v,N,_,R)),!0}return!1}function NM(m){var v=Le(m.target);if(v!==null){var N=i(v);if(N!==null){if(v=N.tag,v===13){if(v=o(N),v!==null){m.blockedOn=v,Xt(m.priority,function(){if(N.tag===13){var _=ql();_=ke(_);var R=hd(N,_);R!==null&&zl(R,N,_),Tk(N,_)}});return}}else if(v===3&&N.stateNode.current.memoizedState.isDehydrated){m.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Fj(m){if(m.blockedOn!==null)return!1;for(var v=m.targetContainers;0<v.length;){var N=Pk(m.nativeEvent);if(N===null){N=m.nativeEvent;var _=new N.constructor(N.type,N);pc=_,N.target.dispatchEvent(_),pc=null}else return v=Ve(N),v!==null&&bM(v),m.blockedOn=N,!1;v.shift()}return!0}function wM(m,v,N){Fj(m)&&N.delete(v)}function BJ(){Mk=!1,fm!==null&&Fj(fm)&&(fm=null),mm!==null&&Fj(mm)&&(mm=null),pm!==null&&Fj(pm)&&(pm=null),hb.forEach(wM),fb.forEach(wM)}function Lj(m,v){m.blockedOn===v&&(m.blockedOn=null,Mk||(Mk=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,BJ)))}var Bj=null;function SM(m){Bj!==m&&(Bj=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Bj===m&&(Bj=null);for(var v=0;v<m.length;v+=3){var N=m[v],_=m[v+1],R=m[v+2];if(typeof _!="function"){if(Ok(_||N)===null)continue;break}var H=Ve(N);H!==null&&(m.splice(v,3),v-=3,_c(H,{pending:!0,data:R,method:N.method,action:_},_,R))}}))}function pb(m){function v(Ze){return Lj(Ze,m)}fm!==null&&Lj(fm,m),mm!==null&&Lj(mm,m),pm!==null&&Lj(pm,m),hb.forEach(v),fb.forEach(v);for(var N=0;N<xm.length;N++){var _=xm[N];_.blockedOn===m&&(_.blockedOn=null)}for(;0<xm.length&&(N=xm[0],N.blockedOn===null);)NM(N),N.blockedOn===null&&xm.shift();if(N=(m.ownerDocument||m).$$reactFormReplay,N!=null)for(_=0;_<N.length;_+=3){var R=N[_],H=N[_+1],me=R[pr]||null;if(typeof H=="function")me||SM(N);else if(me){var Ee=null;if(H&&H.hasAttribute("formAction")){if(R=H,me=H[pr]||null)Ee=me.formAction;else if(Ok(R)!==null)continue}else Ee=me.action;typeof Ee=="function"?N[_+1]=Ee:(N.splice(_,3),_-=3),SM(N)}}}function Rk(m){this._internalRoot=m}Uj.prototype.render=Rk.prototype.render=function(m){var v=this._internalRoot;if(v===null)throw Error(a(409));var N=v.current,_=ql();vM(N,_,m,v,null,null)},Uj.prototype.unmount=Rk.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var v=m.containerInfo;vM(m.current,2,null,m,null,null),jj(),v[jr]=null}};function Uj(m){this._internalRoot=m}Uj.prototype.unstable_scheduleHydration=function(m){if(m){var v=bt();m={blockedOn:null,target:m,priority:v};for(var N=0;N<xm.length&&v!==0&&v<xm[N].priority;N++);xm.splice(N,0,m),N===0&&NM(m)}};var CM=t.version;if(CM!=="19.1.0")throw Error(a(527,CM,"19.1.0"));J.findDOMNode=function(m){var v=m._reactInternals;if(v===void 0)throw typeof m.render=="function"?Error(a(188)):(m=Object.keys(m).join(","),Error(a(268,m)));return m=c(v),m=m!==null?d(m):null,m=m===null?null:m.stateNode,m};var UJ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $j=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$j.isDisabled&&$j.supportsFiber)try{At=$j.inject(UJ),qt=$j}catch{}}return vb.createRoot=function(m,v){if(!s(m))throw Error(a(299));var N=!1,_="",R=$P,H=VP,me=qP,Ee=null;return v!=null&&(v.unstable_strictMode===!0&&(N=!0),v.identifierPrefix!==void 0&&(_=v.identifierPrefix),v.onUncaughtError!==void 0&&(R=v.onUncaughtError),v.onCaughtError!==void 0&&(H=v.onCaughtError),v.onRecoverableError!==void 0&&(me=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Ee=v.unstable_transitionCallbacks)),v=pM(m,1,!1,null,null,N,_,R,H,me,Ee,null),m[jr]=v.current,gk(m),new Rk(v)},vb.hydrateRoot=function(m,v,N){if(!s(m))throw Error(a(299));var _=!1,R="",H=$P,me=VP,Ee=qP,Ze=null,Dt=null;return N!=null&&(N.unstable_strictMode===!0&&(_=!0),N.identifierPrefix!==void 0&&(R=N.identifierPrefix),N.onUncaughtError!==void 0&&(H=N.onUncaughtError),N.onCaughtError!==void 0&&(me=N.onCaughtError),N.onRecoverableError!==void 0&&(Ee=N.onRecoverableError),N.unstable_transitionCallbacks!==void 0&&(Ze=N.unstable_transitionCallbacks),N.formState!==void 0&&(Dt=N.formState)),v=pM(m,1,!0,v,N??null,_,R,H,me,Ee,Ze,Dt),v.context=xM(null),N=v.current,_=ql(),_=ke(_),R=Wt(_),R.callback=null,er(N,R,_),N=_,v.current.lanes=N,Ye(v,N),ju(v),m[jr]=v.current,gk(m),new Uj(v)},vb.version="19.1.0",vb}var MM;function XJ(){if(MM)return Bk.exports;MM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Bk.exports=KJ(),Bk.exports}var QJ=XJ(),gb={},RM;function JJ(){if(RM)return gb;RM=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.parse=o,gb.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,p){const x=new i,g=f.length;if(g<2)return x;const b=p?.decode||u;let y=0;do{const S=f.indexOf("=",y);if(S===-1)break;const w=f.indexOf(";",y),k=w===-1?g:w;if(S>k){y=f.lastIndexOf(";",S-1)+1;continue}const C=l(f,y,S),D=c(f,S,C),E=f.slice(C,D);if(x[E]===void 0){let A=l(f,S+1,k),I=c(f,k,A);const L=b(f.slice(A,I));x[E]=L}y=k+1}while(y<g);return x}function l(f,p,x){do{const g=f.charCodeAt(p);if(g!==32&&g!==9)return p}while(++p<x);return x}function c(f,p,x){for(;p>x;){const g=f.charCodeAt(--p);if(g!==32&&g!==9)return p+1}return x}function d(f,p,x){const g=x?.encode||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const b=g(p);if(!t.test(b))throw new TypeError(`argument val is invalid: ${p}`);let y=f+"="+b;if(!x)return y;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);y+="; Max-Age="+x.maxAge}if(x.domain){if(!r.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);y+="; Domain="+x.domain}if(x.path){if(!a.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);y+="; Path="+x.path}if(x.expires){if(!h(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);y+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(y+="; HttpOnly"),x.secure&&(y+="; Secure"),x.partitioned&&(y+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return y}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function h(f){return s.call(f)==="[object Date]"}return gb}JJ();var FM="popstate";function ZJ(e={}){function t(a,s){let{pathname:i,search:o,hash:l}=a.location;return WD("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:fy(s)}return tZ(t,r,null,e)}function ts(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ud(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function eZ(){return Math.random().toString(36).substring(2,10)}function LM(e,t){return{usr:e.state,key:e.key,idx:t}}function WD(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ig(t):t,state:r,key:t&&t.key||a||eZ()}}function fy({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ig(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function tZ(e,t,r,a={}){let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:y})}function f(b,y){l="PUSH";let S=WD(g.location,b,y);d=u()+1;let w=LM(S,d),k=g.createHref(S);try{o.pushState(w,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(k)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,y){l="REPLACE";let S=WD(g.location,b,y);d=u();let w=LM(S,d),k=g.createHref(S);o.replaceState(w,"",k),i&&c&&c({action:l,location:g.location,delta:0})}function x(b){return rZ(b)}let g={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(FM,h),c=b,()=>{s.removeEventListener(FM,h),c=null}},createHref(b){return t(s,b)},createURL:x,encodeLocation(b){let y=x(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}function rZ(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ts(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:fy(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function dU(e,t,r="/"){return aZ(e,t,r,!1)}function aZ(e,t,r,a){let s=typeof t=="string"?ig(t):t,i=of(s.pathname||"/",r);if(i==null)return null;let o=uU(e);nZ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=pZ(i);l=fZ(o[c],d,a)}return l}function uU(e,t=[],r=[],a=""){let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ts(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let d=Yh([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(ts(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),uU(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:uZ(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))s(i,o);else for(let l of hU(i.path))s(i,o,l)}),t}function hU(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let o=hU(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function nZ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hZ(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var sZ=/^:[\w-]+$/,iZ=3,oZ=2,lZ=1,cZ=10,dZ=-2,BM=e=>e==="*";function uZ(e,t){let r=e.split("/"),a=r.length;return r.some(BM)&&(a+=dZ),t&&(a+=oZ),r.filter(s=>!BM(s)).reduce((s,i)=>s+(sZ.test(i)?iZ:i===""?lZ:cZ),a)}function hZ(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function fZ(e,t,r=!1){let{routesMeta:a}=e,s={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=hw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!a[a.length-1].route.index&&(h=hw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Yh([i,h.pathname]),pathnameBase:bZ(Yh([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Yh([i,h.pathnameBase]))}return o}function hw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=mZ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let x=l[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function mZ(e,t=!1,r=!0){Ud(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function pZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ud(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function of(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function xZ(e,t="/"){let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?ig(e):e;return{pathname:r?r.startsWith("/")?r:vZ(r,t):t,search:yZ(a),hash:jZ(s)}}function vZ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function qk(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function aA(e){let t=gZ(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function nA(e,t,r,a=!1){let s;typeof e=="string"?s=ig(e):(s={...e},ts(!s.pathname||!s.pathname.includes("?"),qk("?","pathname","search",s)),ts(!s.pathname||!s.pathname.includes("#"),qk("#","pathname","hash",s)),ts(!s.search||!s.search.includes("#"),qk("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!a&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=xZ(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Yh=e=>e.join("/").replace(/\/\/+/g,"/"),bZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var fU=["POST","PUT","PATCH","DELETE"];new Set(fU);var wZ=["GET",...fU];new Set(wZ);var og=j.createContext(null);og.displayName="DataRouter";var aS=j.createContext(null);aS.displayName="DataRouterState";var mU=j.createContext({isTransitioning:!1});mU.displayName="ViewTransition";var SZ=j.createContext(new Map);SZ.displayName="Fetchers";var CZ=j.createContext(null);CZ.displayName="Await";var qd=j.createContext(null);qd.displayName="Navigation";var t1=j.createContext(null);t1.displayName="Location";var th=j.createContext({outlet:null,matches:[],isDataRoute:!1});th.displayName="Route";var sA=j.createContext(null);sA.displayName="RouteError";function kZ(e,{relative:t}={}){ts(lg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=j.useContext(qd),{hash:s,pathname:i,search:o}=r1(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Yh([r,i])),a.createHref({pathname:l,search:o,hash:s})}function lg(){return j.useContext(t1)!=null}function sp(){return ts(lg(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(t1).location}var pU="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xU(e){j.useContext(qd).static||j.useLayoutEffect(e)}function rh(){let{isDataRoute:e}=j.useContext(th);return e?BZ():_Z()}function _Z(){ts(lg(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(og),{basename:t,navigator:r}=j.useContext(qd),{matches:a}=j.useContext(th),{pathname:s}=sp(),i=JSON.stringify(aA(a)),o=j.useRef(!1);return xU(()=>{o.current=!0}),j.useCallback((c,d={})=>{if(Ud(o.current,pU),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=nA(c,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Yh([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,s,e])}j.createContext(null);function r1(e,{relative:t}={}){let{matches:r}=j.useContext(th),{pathname:a}=sp(),s=JSON.stringify(aA(r));return j.useMemo(()=>nA(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function EZ(e,t){return vU(e,t)}function vU(e,t,r,a){ts(lg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(qd),{matches:i}=j.useContext(th),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";gU(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=sp(),f;if(t){let y=typeof t=="string"?ig(t):t;ts(d==="/"||y.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),f=y}else f=h;let p=f.pathname||"/",x=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=dU(e,{pathname:x});Ud(u||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ud(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=PZ(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Yh([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Yh([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,a);return t&&b?j.createElement(t1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},b):b}function DZ(){let e=LZ(),t=NZ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:s},r):null,o)}var AZ=j.createElement(DZ,null),TZ=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(th.Provider,{value:this.props.routeContext},j.createElement(sA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IZ({routeContext:e,match:t,children:r}){let a=j.useContext(og);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(th.Provider,{value:e},r)}function PZ(e,t=[],r=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r?.errors;if(i!=null){let c=s.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);ts(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=r,f=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,u)=>{let h,f=!1,p=null,x=null;r&&(h=i&&d.route.id?i[d.route.id]:void 0,p=d.route.errorElement||AZ,o&&(l<0&&u===0?(gU("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,x=null):l===u&&(f=!0,x=d.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,u+1)),b=()=>{let y;return h?y=p:f?y=x:d.route.Component?y=j.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,j.createElement(IZ,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?j.createElement(TZ,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function iA(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OZ(e){let t=j.useContext(og);return ts(t,iA(e)),t}function MZ(e){let t=j.useContext(aS);return ts(t,iA(e)),t}function RZ(e){let t=j.useContext(th);return ts(t,iA(e)),t}function oA(e){let t=RZ(e),r=t.matches[t.matches.length-1];return ts(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function FZ(){return oA("useRouteId")}function LZ(){let e=j.useContext(sA),t=MZ("useRouteError"),r=oA("useRouteError");return e!==void 0?e:t.errors?.[r]}function BZ(){let{router:e}=OZ("useNavigate"),t=oA("useNavigate"),r=j.useRef(!1);return xU(()=>{r.current=!0}),j.useCallback(async(s,i={})=>{Ud(r.current,pU),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var UM={};function gU(e,t,r){!t&&!UM[e]&&(UM[e]=!0,Ud(!1,r))}j.memo(UZ);function UZ({routes:e,future:t,state:r}){return vU(e,void 0,r,t)}function $Z({to:e,replace:t,state:r,relative:a}){ts(lg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(qd);Ud(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(th),{pathname:o}=sp(),l=rh(),c=nA(e,aA(i),o,a==="path"),d=JSON.stringify(c);return j.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:a})},[l,d,a,t,r]),null}function cr(e){ts(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VZ({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:s,static:i=!1}){ts(!lg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=j.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=ig(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=r,p=j.useMemo(()=>{let x=of(c,o);return x==null?null:{location:{pathname:x,search:d,hash:u,state:h,key:f},navigationType:a}},[o,c,d,u,h,f,a]);return Ud(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:j.createElement(qd.Provider,{value:l},j.createElement(t1.Provider,{children:t,value:p}))}function qZ({children:e,location:t}){return EZ(GD(e),t)}function GD(e,t=[]){let r=[];return j.Children.forEach(e,(a,s)=>{if(!j.isValidElement(a))return;let i=[...t,s];if(a.type===j.Fragment){r.push.apply(r,GD(a.props.children,i));return}ts(a.type===cr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ts(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=GD(a.props.children,i)),r.push(o)}),r}var zN="get",HN="application/x-www-form-urlencoded";function nS(e){return e!=null&&typeof e.tagName=="string"}function zZ(e){return nS(e)&&e.tagName.toLowerCase()==="button"}function HZ(e){return nS(e)&&e.tagName.toLowerCase()==="form"}function WZ(e){return nS(e)&&e.tagName.toLowerCase()==="input"}function GZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function YZ(e,t){return e.button===0&&(!t||t==="_self")&&!GZ(e)}var Vj=null;function KZ(){if(Vj===null)try{new FormData(document.createElement("form"),0),Vj=!1}catch{Vj=!0}return Vj}var XZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zk(e){return e!=null&&!XZ.has(e)?(Ud(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${HN}"`),null):e}function QZ(e,t){let r,a,s,i,o;if(HZ(e)){let l=e.getAttribute("action");a=l?of(l,t):null,r=e.getAttribute("method")||zN,s=zk(e.getAttribute("enctype"))||HN,i=new FormData(e)}else if(zZ(e)||WZ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(a=c?of(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||zN,s=zk(e.getAttribute("formenctype"))||zk(l.getAttribute("enctype"))||HN,i=new FormData(l,e),!KZ()){let{name:d,type:u,value:h}=e;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(nS(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=zN,a=null,s=HN,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:s,formData:i,body:o}}function lA(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function JZ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function eee(e,t,r){let a=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await JZ(i,r);return o.links?o.links():[]}return[]}));return nee(a.flat(1).filter(ZZ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function $M(e,t,r,a,s,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>r[d].pathname!==c.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=a.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function tee(e,t,{includeHydrateFallback:r}={}){return ree(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function ree(e){return[...new Set(e)]}function aee(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function nee(e,t){let r=new Set;return new Set(t),e.reduce((a,s)=>{let i=JSON.stringify(aee(s));return r.has(i)||(r.add(i),a.push({key:i,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var see=new Set([100,101,204,205]);function iee(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&of(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function bU(){let e=j.useContext(og);return lA(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function oee(){let e=j.useContext(aS);return lA(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var cA=j.createContext(void 0);cA.displayName="FrameworkContext";function yU(){let e=j.useContext(cA);return lA(e,"You must render this element inside a <HydratedRouter> element"),e}function lee(e,t){let r=j.useContext(cA),[a,s]=j.useState(!1),[i,o]=j.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,f=j.useRef(null);j.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(S=>{o(S.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),j.useEffect(()=>{if(a){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[a]);let p=()=>{s(!0)},x=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:bb(l,p),onBlur:bb(c,x),onMouseEnter:bb(d,p),onMouseLeave:bb(u,x),onTouchStart:bb(h,p)}]:[!1,f,{}]}function bb(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function cee({page:e,...t}){let{router:r}=bU(),a=j.useMemo(()=>dU(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?j.createElement(uee,{page:e,matches:a,...t}):null}function dee(e){let{manifest:t,routeModules:r}=yU(),[a,s]=j.useState([]);return j.useEffect(()=>{let i=!1;return eee(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),a}function uee({page:e,matches:t,...r}){let a=sp(),{manifest:s,routeModules:i}=yU(),{basename:o}=bU(),{loaderData:l,matches:c}=oee(),d=j.useMemo(()=>$M(e,t,c,s,a,"data"),[e,t,c,s,a]),u=j.useMemo(()=>$M(e,t,c,s,a,"assets"),[e,t,c,s,a]),h=j.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let x=new Set,g=!1;if(t.forEach(y=>{let S=s.routes[y.route.id];!S||!S.hasLoader||(!d.some(w=>w.route.id===y.route.id)&&y.route.id in l&&i[y.route.id]?.shouldRevalidate||S.hasClientLoader?g=!0:x.add(y.route.id))}),x.size===0)return[];let b=iee(e,o);return g&&x.size>0&&b.searchParams.set("_routes",t.filter(y=>x.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,l,a,s,d,t,e,i]),f=j.useMemo(()=>tee(u,s),[u,s]),p=dee(u);return j.createElement(j.Fragment,null,h.map(x=>j.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),f.map(x=>j.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),p.map(({key:x,link:g})=>j.createElement("link",{key:x,...g})))}function hee(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var jU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jU&&(window.__reactRouterVersion="7.6.3")}catch{}function fee({basename:e,children:t,window:r}){let a=j.useRef();a.current==null&&(a.current=ZJ({window:r,v5Compat:!0}));let s=a.current,[i,o]=j.useState({action:s.action,location:s.location}),l=j.useCallback(c=>{j.startTransition(()=>o(c))},[o]);return j.useLayoutEffect(()=>s.listen(l),[s,l]),j.createElement(VZ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var NU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ex=j.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...f},p){let{basename:x}=j.useContext(qd),g=typeof d=="string"&&NU.test(d),b,y=!1;if(typeof d=="string"&&g&&(b=d,jU))try{let I=new URL(window.location.href),L=d.startsWith("//")?new URL(I.protocol+d):new URL(d),P=of(L.pathname,x);L.origin===I.origin&&P!=null?d=P+L.search+L.hash:y=!0}catch{Ud(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=kZ(d,{relative:s}),[w,k,C]=lee(a,f),D=vee(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function E(I){t&&t(I),I.defaultPrevented||D(I)}let A=j.createElement("a",{...f,...C,href:b||S,onClick:y||i?t:E,ref:hee(p,k),target:c,"data-discover":!g&&r==="render"?"true":void 0});return w&&!g?j.createElement(j.Fragment,null,A,j.createElement(cee,{page:S})):A});ex.displayName="Link";var mee=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=r1(o,{relative:d.relative}),f=sp(),p=j.useContext(aS),{navigator:x,basename:g}=j.useContext(qd),b=p!=null&&Nee(h)&&l===!0,y=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,S=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(S=S.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&g&&(w=of(w,g)||w);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=S===y||!s&&S.startsWith(y)&&S.charAt(k)==="/",D=w!=null&&(w===y||!s&&w.startsWith(y)&&w.charAt(y.length)==="/"),E={isActive:C,isPending:D,isTransitioning:b},A=C?t:void 0,I;typeof a=="function"?I=a(E):I=[a,C?"active":null,D?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(E):i;return j.createElement(ex,{...d,"aria-current":A,className:I,ref:u,style:L,to:o,viewTransition:l},typeof c=="function"?c(E):c)});mee.displayName="NavLink";var pee=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:s,state:i,method:o=zN,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...f},p)=>{let x=yee(),g=jee(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&NU.test(l),S=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,C=k?.getAttribute("formmethod")||o;x(k||w.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:s,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return j.createElement("form",{ref:p,method:b,action:g,onSubmit:a?c:S,...f,"data-discover":!y&&e==="render"?"true":void 0})});pee.displayName="Form";function xee(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wU(e){let t=j.useContext(og);return ts(t,xee(e)),t}function vee(e,{target:t,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=rh(),c=sp(),d=r1(e,{relative:i});return j.useCallback(u=>{if(YZ(u,t)){u.preventDefault();let h=r!==void 0?r:fy(c)===fy(d);l(e,{replace:h,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,r,a,t,e,s,i,o])}var gee=0,bee=()=>`__${String(++gee)}__`;function yee(){let{router:e}=wU("useSubmit"),{basename:t}=j.useContext(qd),r=FZ();return j.useCallback(async(a,s={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=QZ(a,t);if(s.navigate===!1){let u=s.fetcherKey||bee();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function jee(e,{relative:t}={}){let{basename:r}=j.useContext(qd),a=j.useContext(th);ts(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i={...r1(e||".",{relative:t})},o=sp();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Yh([r,i.pathname])),fy(i)}function Nee(e,t={}){let r=j.useContext(mU);ts(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=wU("useViewTransitionState"),s=r1(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=of(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=of(r.nextLocation.pathname,a)||r.nextLocation.pathname;return hw(s.pathname,o)!=null||hw(s.pathname,i)!=null}[...see];var a1=cU();const wee=Vd(a1);function SU(e,t){return function(){return e.apply(t,arguments)}}const{toString:See}=Object.prototype,{getPrototypeOf:dA}=Object,{iterator:sS,toStringTag:CU}=Symbol,iS=(e=>t=>{const r=See.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),zd=e=>(e=e.toLowerCase(),t=>iS(t)===e),oS=e=>t=>typeof t===e,{isArray:cg}=Array,my=oS("undefined");function Cee(e){return e!==null&&!my(e)&&e.constructor!==null&&!my(e.constructor)&&gl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const kU=zd("ArrayBuffer");function kee(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&kU(e.buffer),t}const _ee=oS("string"),gl=oS("function"),_U=oS("number"),lS=e=>e!==null&&typeof e=="object",Eee=e=>e===!0||e===!1,WN=e=>{if(iS(e)!=="object")return!1;const t=dA(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(CU in e)&&!(sS in e)},Dee=zd("Date"),Aee=zd("File"),Tee=zd("Blob"),Iee=zd("FileList"),Pee=e=>lS(e)&&gl(e.pipe),Oee=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||gl(e.append)&&((t=iS(e))==="formdata"||t==="object"&&gl(e.toString)&&e.toString()==="[object FormData]"))},Mee=zd("URLSearchParams"),[Ree,Fee,Lee,Bee]=["ReadableStream","Request","Response","Headers"].map(zd),Uee=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function n1(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),cg(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(a=0;a<o;a++)l=i[a],t.call(null,e[l],l,e)}}function EU(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,s;for(;a-- >0;)if(s=r[a],t===s.toLowerCase())return s;return null}const tx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DU=e=>!my(e)&&e!==tx;function YD(){const{caseless:e}=DU(this)&&this||{},t={},r=(a,s)=>{const i=e&&EU(t,s)||s;WN(t[i])&&WN(a)?t[i]=YD(t[i],a):WN(a)?t[i]=YD({},a):cg(a)?t[i]=a.slice():t[i]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&n1(arguments[a],r);return t}const $ee=(e,t,r,{allOwnKeys:a}={})=>(n1(t,(s,i)=>{r&&gl(s)?e[i]=SU(s,r):e[i]=s},{allOwnKeys:a}),e),Vee=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),qee=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},zee=(e,t,r,a)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!a||a(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&dA(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Hee=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},Wee=e=>{if(!e)return null;if(cg(e))return e;let t=e.length;if(!_U(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Gee=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dA(Uint8Array)),Yee=(e,t)=>{const a=(e&&e[sS]).call(e);let s;for(;(s=a.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Kee=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},Xee=zd("HTMLFormElement"),Qee=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,s){return a.toUpperCase()+s}),VM=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Jee=zd("RegExp"),AU=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};n1(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(a[i]=o||s)}),Object.defineProperties(e,a)},Zee=e=>{AU(e,(t,r)=>{if(gl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(gl(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ete=(e,t)=>{const r={},a=s=>{s.forEach(i=>{r[i]=!0})};return cg(e)?a(e):a(String(e).split(t)),r},tte=()=>{},rte=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ate(e){return!!(e&&gl(e.append)&&e[CU]==="FormData"&&e[sS])}const nte=e=>{const t=new Array(10),r=(a,s)=>{if(lS(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[s]=a;const i=cg(a)?[]:{};return n1(a,(o,l)=>{const c=r(o,s+1);!my(c)&&(i[l]=c)}),t[s]=void 0,i}}return a};return r(e,0)},ste=zd("AsyncFunction"),ite=e=>e&&(lS(e)||gl(e))&&gl(e.then)&&gl(e.catch),TU=((e,t)=>e?setImmediate:t?((r,a)=>(tx.addEventListener("message",({source:s,data:i})=>{s===tx&&i===r&&a.length&&a.shift()()},!1),s=>{a.push(s),tx.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",gl(tx.postMessage)),ote=typeof queueMicrotask<"u"?queueMicrotask.bind(tx):typeof process<"u"&&process.nextTick||TU,lte=e=>e!=null&&gl(e[sS]),$t={isArray:cg,isArrayBuffer:kU,isBuffer:Cee,isFormData:Oee,isArrayBufferView:kee,isString:_ee,isNumber:_U,isBoolean:Eee,isObject:lS,isPlainObject:WN,isReadableStream:Ree,isRequest:Fee,isResponse:Lee,isHeaders:Bee,isUndefined:my,isDate:Dee,isFile:Aee,isBlob:Tee,isRegExp:Jee,isFunction:gl,isStream:Pee,isURLSearchParams:Mee,isTypedArray:Gee,isFileList:Iee,forEach:n1,merge:YD,extend:$ee,trim:Uee,stripBOM:Vee,inherits:qee,toFlatObject:zee,kindOf:iS,kindOfTest:zd,endsWith:Hee,toArray:Wee,forEachEntry:Yee,matchAll:Kee,isHTMLForm:Xee,hasOwnProperty:VM,hasOwnProp:VM,reduceDescriptors:AU,freezeMethods:Zee,toObjectSet:ete,toCamelCase:Qee,noop:tte,toFiniteNumber:rte,findKey:EU,global:tx,isContextDefined:DU,isSpecCompliantForm:ate,toJSONObject:nte,isAsyncFn:ste,isThenable:ite,setImmediate:TU,asap:ote,isIterable:lte};function ga(e,t,r,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}$t.inherits(ga,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$t.toJSONObject(this.config),code:this.code,status:this.status}}});const IU=ga.prototype,PU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{PU[e]={value:e}});Object.defineProperties(ga,PU);Object.defineProperty(IU,"isAxiosError",{value:!0});ga.from=(e,t,r,a,s,i)=>{const o=Object.create(IU);return $t.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),ga.call(o,e.message,t,r,a,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const cte=null;function KD(e){return $t.isPlainObject(e)||$t.isArray(e)}function OU(e){return $t.endsWith(e,"[]")?e.slice(0,-2):e}function qM(e,t,r){return e?e.concat(t).map(function(s,i){return s=OU(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function dte(e){return $t.isArray(e)&&!e.some(KD)}const ute=$t.toFlatObject($t,{},null,function(t){return/^is[A-Z]/.test(t)});function cS(e,t,r){if(!$t.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=$t.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!$t.isUndefined(b[g])});const a=r.metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&$t.isSpecCompliantForm(t);if(!$t.isFunction(s))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if($t.isDate(x))return x.toISOString();if($t.isBoolean(x))return x.toString();if(!c&&$t.isBlob(x))throw new ga("Blob is not supported. Use a Buffer instead.");return $t.isArrayBuffer(x)||$t.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,g,b){let y=x;if(x&&!b&&typeof x=="object"){if($t.endsWith(g,"{}"))g=a?g:g.slice(0,-2),x=JSON.stringify(x);else if($t.isArray(x)&&dte(x)||($t.isFileList(x)||$t.endsWith(g,"[]"))&&(y=$t.toArray(x)))return g=OU(g),y.forEach(function(w,k){!($t.isUndefined(w)||w===null)&&t.append(o===!0?qM([g],k,i):o===null?g:g+"[]",d(w))}),!1}return KD(x)?!0:(t.append(qM(b,g,i),d(x)),!1)}const h=[],f=Object.assign(ute,{defaultVisitor:u,convertValue:d,isVisitable:KD});function p(x,g){if(!$t.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(x),$t.forEach(x,function(y,S){(!($t.isUndefined(y)||y===null)&&s.call(t,y,$t.isString(S)?S.trim():S,g,f))===!0&&p(y,g?g.concat(S):[S])}),h.pop()}}if(!$t.isObject(e))throw new TypeError("data must be an object");return p(e),t}function zM(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function uA(e,t){this._pairs=[],e&&cS(e,this,t)}const MU=uA.prototype;MU.append=function(t,r){this._pairs.push([t,r])};MU.toString=function(t){const r=t?function(a){return t.call(this,a,zM)}:zM;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function hte(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function RU(e,t,r){if(!t)return e;const a=r&&r.encode||hte;$t.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=$t.isURLSearchParams(t)?t.toString():new uA(t,r).toString(a),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class HM{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$t.forEach(this.handlers,function(a){a!==null&&t(a)})}}const FU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fte=typeof URLSearchParams<"u"?URLSearchParams:uA,mte=typeof FormData<"u"?FormData:null,pte=typeof Blob<"u"?Blob:null,xte={isBrowser:!0,classes:{URLSearchParams:fte,FormData:mte,Blob:pte},protocols:["http","https","file","blob","url","data"]},hA=typeof window<"u"&&typeof document<"u",XD=typeof navigator=="object"&&navigator||void 0,vte=hA&&(!XD||["ReactNative","NativeScript","NS"].indexOf(XD.product)<0),gte=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bte=hA&&window.location.href||"http://localhost",yte=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hA,hasStandardBrowserEnv:vte,hasStandardBrowserWebWorkerEnv:gte,navigator:XD,origin:bte},Symbol.toStringTag,{value:"Module"})),Eo={...yte,...xte};function jte(e,t){return cS(e,new Eo.classes.URLSearchParams,Object.assign({visitor:function(r,a,s,i){return Eo.isNode&&$t.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Nte(e){return $t.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wte(e){const t={},r=Object.keys(e);let a;const s=r.length;let i;for(a=0;a<s;a++)i=r[a],t[i]=e[i];return t}function LU(e){function t(r,a,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&$t.isArray(s)?s.length:o,c?($t.hasOwnProp(s,o)?s[o]=[s[o],a]:s[o]=a,!l):((!s[o]||!$t.isObject(s[o]))&&(s[o]=[]),t(r,a,s[o],i)&&$t.isArray(s[o])&&(s[o]=wte(s[o])),!l)}if($t.isFormData(e)&&$t.isFunction(e.entries)){const r={};return $t.forEachEntry(e,(a,s)=>{t(Nte(a),s,r,0)}),r}return null}function Ste(e,t,r){if($t.isString(e))try{return(t||JSON.parse)(e),$t.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const s1={transitional:FU,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",s=a.indexOf("application/json")>-1,i=$t.isObject(t);if(i&&$t.isHTMLForm(t)&&(t=new FormData(t)),$t.isFormData(t))return s?JSON.stringify(LU(t)):t;if($t.isArrayBuffer(t)||$t.isBuffer(t)||$t.isStream(t)||$t.isFile(t)||$t.isBlob(t)||$t.isReadableStream(t))return t;if($t.isArrayBufferView(t))return t.buffer;if($t.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return jte(t,this.formSerializer).toString();if((l=$t.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return cS(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Ste(t)):t}],transformResponse:[function(t){const r=this.transitional||s1.transitional,a=r&&r.forcedJSONParsing,s=this.responseType==="json";if($t.isResponse(t)||$t.isReadableStream(t))return t;if(t&&$t.isString(t)&&(a&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?ga.from(l,ga.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Eo.classes.FormData,Blob:Eo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$t.forEach(["delete","get","head","post","put","patch"],e=>{s1.headers[e]={}});const Cte=$t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kte=e=>{const t={};let r,a,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),a=o.substring(s+1).trim(),!(!r||t[r]&&Cte[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},WM=Symbol("internals");function yb(e){return e&&String(e).trim().toLowerCase()}function GN(e){return e===!1||e==null?e:$t.isArray(e)?e.map(GN):String(e)}function _te(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const Ete=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Hk(e,t,r,a,s){if($t.isFunction(a))return a.call(this,t,r);if(s&&(t=r),!!$t.isString(t)){if($t.isString(a))return t.indexOf(a)!==-1;if($t.isRegExp(a))return a.test(t)}}function Dte(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function Ate(e,t){const r=$t.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(s,i,o){return this[a].call(this,t,s,i,o)},configurable:!0})})}let bl=class{constructor(t){t&&this.set(t)}set(t,r,a){const s=this;function i(l,c,d){const u=yb(c);if(!u)throw new Error("header name must be a non-empty string");const h=$t.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=GN(l))}const o=(l,c)=>$t.forEach(l,(d,u)=>i(d,u,c));if($t.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if($t.isString(t)&&(t=t.trim())&&!Ete(t))o(kte(t),r);else if($t.isObject(t)&&$t.isIterable(t)){let l={},c,d;for(const u of t){if(!$t.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?$t.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,a);return this}get(t,r){if(t=yb(t),t){const a=$t.findKey(this,t);if(a){const s=this[a];if(!r)return s;if(r===!0)return _te(s);if($t.isFunction(r))return r.call(this,s,a);if($t.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=yb(t),t){const a=$t.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Hk(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let s=!1;function i(o){if(o=yb(o),o){const l=$t.findKey(a,o);l&&(!r||Hk(a,a[l],l,r))&&(delete a[l],s=!0)}}return $t.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let a=r.length,s=!1;for(;a--;){const i=r[a];(!t||Hk(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,a={};return $t.forEach(this,(s,i)=>{const o=$t.findKey(a,i);if(o){r[o]=GN(s),delete r[i];return}const l=t?Dte(i):String(i).trim();l!==i&&delete r[i],r[l]=GN(s),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return $t.forEach(this,(a,s)=>{a!=null&&a!==!1&&(r[s]=t&&$t.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[WM]=this[WM]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=yb(o);a[l]||(Ate(s,o),a[l]=!0)}return $t.isArray(t)?t.forEach(i):i(t),this}};bl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$t.reduceDescriptors(bl.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});$t.freezeMethods(bl);function Wk(e,t){const r=this||s1,a=t||r,s=bl.from(a.headers);let i=a.data;return $t.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function BU(e){return!!(e&&e.__CANCEL__)}function dg(e,t,r){ga.call(this,e??"canceled",ga.ERR_CANCELED,t,r),this.name="CanceledError"}$t.inherits(dg,ga,{__CANCEL__:!0});function UU(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new ga("Request failed with status code "+r.status,[ga.ERR_BAD_REQUEST,ga.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Tte(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ite(e,t){e=e||10;const r=new Array(e),a=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=a[i];o||(o=d),r[s]=c,a[s]=d;let h=i,f=0;for(;h!==s;)f+=r[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(f*1e3/p):void 0}}function Pte(e,t){let r=0,a=1e3/t,s,i;const o=(d,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=a?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},a-h)))},()=>s&&o(s)]}const fw=(e,t,r=3)=>{let a=0;const s=Ite(50,250);return Pte(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-a,d=s(c),u=o<=l;a=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},GM=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},YM=e=>(...t)=>$t.asap(()=>e(...t)),Ote=Eo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Eo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Eo.origin),Eo.navigator&&/(msie|trident)/i.test(Eo.navigator.userAgent)):()=>!0,Mte=Eo.hasStandardBrowserEnv?{write(e,t,r,a,s,i){const o=[e+"="+encodeURIComponent(t)];$t.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),$t.isString(a)&&o.push("path="+a),$t.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Rte(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Fte(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $U(e,t,r){let a=!Rte(t);return e&&(a||r==!1)?Fte(e,t):t}const KM=e=>e instanceof bl?{...e}:e;function Ex(e,t){t=t||{};const r={};function a(d,u,h,f){return $t.isPlainObject(d)&&$t.isPlainObject(u)?$t.merge.call({caseless:f},d,u):$t.isPlainObject(u)?$t.merge({},u):$t.isArray(u)?u.slice():u}function s(d,u,h,f){if($t.isUndefined(u)){if(!$t.isUndefined(d))return a(void 0,d,h,f)}else return a(d,u,h,f)}function i(d,u){if(!$t.isUndefined(u))return a(void 0,u)}function o(d,u){if($t.isUndefined(u)){if(!$t.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function l(d,u,h){if(h in t)return a(d,u);if(h in e)return a(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>s(KM(d),KM(u),h,!0)};return $t.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,f=h(e[u],t[u],u);$t.isUndefined(f)&&h!==l||(r[u]=f)}),r}const VU=e=>{const t=Ex({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=bl.from(o),t.url=RU($U(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if($t.isFormData(r)){if(Eo.hasStandardBrowserEnv||Eo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Eo.hasStandardBrowserEnv&&(a&&$t.isFunction(a)&&(a=a(t)),a||a!==!1&&Ote(t.url))){const d=s&&i&&Mte.read(i);d&&o.set(s,d)}return t},Lte=typeof XMLHttpRequest<"u",Bte=Lte&&function(e){return new Promise(function(r,a){const s=VU(e);let i=s.data;const o=bl.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,h,f,p,x;function g(){p&&p(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;const w=bl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:e,request:b};UU(function(E){r(E),g()},function(E){a(E),g()},C),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(a(new ga("Request aborted",ga.ECONNABORTED,e,b)),b=null)},b.onerror=function(){a(new ga("Network Error",ga.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||FU;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),a(new ga(k,C.clarifyTimeoutError?ga.ETIMEDOUT:ga.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&$t.forEach(o.toJSON(),function(k,C){b.setRequestHeader(C,k)}),$t.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),d&&([f,x]=fw(d,!0),b.addEventListener("progress",f)),c&&b.upload&&([h,p]=fw(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=w=>{b&&(a(!w||w.type?new dg(null,e,b):w),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const S=Tte(s.url);if(S&&Eo.protocols.indexOf(S)===-1){a(new ga("Unsupported protocol "+S+":",ga.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Ute=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;a.abort(u instanceof ga?u:new dg(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new ga(`timeout ${t} of ms exceeded`,ga.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>$t.asap(l),c}},$te=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,s;for(;a<r;)s=a+t,yield e.slice(a,s),a=s},Vte=async function*(e,t){for await(const r of qte(e))yield*$te(r,t)},qte=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},XM=(e,t,r,a)=>{const s=Vte(e,t);let i=0,o,l=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let f=i+=h;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},dS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qU=dS&&typeof ReadableStream=="function",zte=dS&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),zU=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Hte=qU&&zU(()=>{let e=!1;const t=new Request(Eo.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),QM=64*1024,QD=qU&&zU(()=>$t.isReadableStream(new Response("").body)),mw={stream:QD&&(e=>e.body)};dS&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!mw[t]&&(mw[t]=$t.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new ga(`Response type '${t}' is not supported`,ga.ERR_NOT_SUPPORT,a)})})})(new Response);const Wte=async e=>{if(e==null)return 0;if($t.isBlob(e))return e.size;if($t.isSpecCompliantForm(e))return(await new Request(Eo.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($t.isArrayBufferView(e)||$t.isArrayBuffer(e))return e.byteLength;if($t.isURLSearchParams(e)&&(e=e+""),$t.isString(e))return(await zte(e)).byteLength},Gte=async(e,t)=>{const r=$t.toFiniteNumber(e.getContentLength());return r??Wte(t)},Yte=dS&&(async e=>{let{url:t,method:r,data:a,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:f}=VU(e);d=d?(d+"").toLowerCase():"text";let p=Ute([s,i&&i.toAbortSignal()],o),x;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&Hte&&r!=="get"&&r!=="head"&&(b=await Gte(u,a))!==0){let C=new Request(t,{method:"POST",body:a,duplex:"half"}),D;if($t.isFormData(a)&&(D=C.headers.get("content-type"))&&u.setContentType(D),C.body){const[E,A]=GM(b,fw(YM(c)));a=XM(C.body,QM,E,A)}}$t.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;x=new Request(t,{...f,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:y?h:void 0});let S=await fetch(x,f);const w=QD&&(d==="stream"||d==="response");if(QD&&(l||w&&g)){const C={};["status","statusText","headers"].forEach(I=>{C[I]=S[I]});const D=$t.toFiniteNumber(S.headers.get("content-length")),[E,A]=l&&GM(D,fw(YM(l),!0))||[];S=new Response(XM(S.body,QM,E,()=>{A&&A(),g&&g()}),C)}d=d||"text";let k=await mw[$t.findKey(mw,d)||"text"](S,e);return!w&&g&&g(),await new Promise((C,D)=>{UU(C,D,{data:k,headers:bl.from(S.headers),status:S.status,statusText:S.statusText,config:e,request:x})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ga("Network Error",ga.ERR_NETWORK,e,x),{cause:y.cause||y}):ga.from(y,y&&y.code,e,x)}}),JD={http:cte,xhr:Bte,fetch:Yte};$t.forEach(JD,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const JM=e=>`- ${e}`,Kte=e=>$t.isFunction(e)||e===null||e===!1,HU={getAdapter:e=>{e=$t.isArray(e)?e:[e];const{length:t}=e;let r,a;const s={};for(let i=0;i<t;i++){r=e[i];let o;if(a=r,!Kte(r)&&(a=JD[(o=String(r)).toLowerCase()],a===void 0))throw new ga(`Unknown adapter '${o}'`);if(a)break;s[o||"#"+i]=a}if(!a){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(JM).join(`
`):" "+JM(i[0]):"as no adapter specified";throw new ga("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:JD};function Gk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dg(null,e)}function ZM(e){return Gk(e),e.headers=bl.from(e.headers),e.data=Wk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),HU.getAdapter(e.adapter||s1.adapter)(e).then(function(a){return Gk(e),a.data=Wk.call(e,e.transformResponse,a),a.headers=bl.from(a.headers),a},function(a){return BU(a)||(Gk(e),a&&a.response&&(a.response.data=Wk.call(e,e.transformResponse,a.response),a.response.headers=bl.from(a.response.headers))),Promise.reject(a)})}const WU="1.10.0",uS={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{uS[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const eR={};uS.transitional=function(t,r,a){function s(i,o){return"[Axios v"+WU+"] Transitional option '"+i+"'"+o+(a?". "+a:"")}return(i,o,l)=>{if(t===!1)throw new ga(s(o," has been removed"+(r?" in "+r:"")),ga.ERR_DEPRECATED);return r&&!eR[o]&&(eR[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};uS.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Xte(e,t,r){if(typeof e!="object")throw new ga("options must be an object",ga.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const i=a[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new ga("option "+i+" must be "+c,ga.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ga("Unknown option "+i,ga.ERR_BAD_OPTION)}}const YN={assertOptions:Xte,validators:uS},Nu=YN.validators;let mx=class{constructor(t){this.defaults=t||{},this.interceptors={request:new HM,response:new HM}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ex(this.defaults,r);const{transitional:a,paramsSerializer:s,headers:i}=r;a!==void 0&&YN.assertOptions(a,{silentJSONParsing:Nu.transitional(Nu.boolean),forcedJSONParsing:Nu.transitional(Nu.boolean),clarifyTimeoutError:Nu.transitional(Nu.boolean)},!1),s!=null&&($t.isFunction(s)?r.paramsSerializer={serialize:s}:YN.assertOptions(s,{encode:Nu.function,serialize:Nu.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),YN.assertOptions(r,{baseUrl:Nu.spelling("baseURL"),withXsrfToken:Nu.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&$t.merge(i.common,i[r.method]);i&&$t.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=bl.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!c){const x=[ZM.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,d),f=x.length,u=Promise.resolve(r);h<f;)u=u.then(x[h++],x[h++]);return u}f=l.length;let p=r;for(h=0;h<f;){const x=l[h++],g=l[h++];try{p=x(p)}catch(b){g.call(this,b);break}}try{u=ZM.call(this,p)}catch(x){return Promise.reject(x)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=Ex(this.defaults,t);const r=$U(t.baseURL,t.url,t.allowAbsoluteUrls);return RU(r,t.params,t.paramsSerializer)}};$t.forEach(["delete","get","head","options"],function(t){mx.prototype[t]=function(r,a){return this.request(Ex(a||{},{method:t,url:r,data:(a||{}).data}))}});$t.forEach(["post","put","patch"],function(t){function r(a){return function(i,o,l){return this.request(Ex(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mx.prototype[t]=r(),mx.prototype[t+"Form"]=r(!0)});let Qte=class GU{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(s=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](s);a._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{a.subscribe(l),i=l}).then(s);return o.cancel=function(){a.unsubscribe(i)},o},t(function(i,o,l){a.reason||(a.reason=new dg(i,o,l),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new GU(function(s){t=s}),cancel:t}}};function Jte(e){return function(r){return e.apply(null,r)}}function Zte(e){return $t.isObject(e)&&e.isAxiosError===!0}const ZD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ZD).forEach(([e,t])=>{ZD[t]=e});function YU(e){const t=new mx(e),r=SU(mx.prototype.request,t);return $t.extend(r,mx.prototype,t,{allOwnKeys:!0}),$t.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return YU(Ex(e,s))},r}const Oe=YU(s1);Oe.Axios=mx;Oe.CanceledError=dg;Oe.CancelToken=Qte;Oe.isCancel=BU;Oe.VERSION=WU;Oe.toFormData=cS;Oe.AxiosError=ga;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=Jte;Oe.isAxiosError=Zte;Oe.mergeConfig=Ex;Oe.AxiosHeaders=bl;Oe.formToJSON=e=>LU($t.isHTMLForm(e)?new FormData(e):e);Oe.getAdapter=HU.getAdapter;Oe.HttpStatusCode=ZD;Oe.default=Oe;const{Axios:PUe,AxiosError:OUe,CanceledError:MUe,isCancel:RUe,CancelToken:FUe,VERSION:LUe,all:BUe,Cancel:UUe,isAxiosError:$Ue,spread:VUe,toFormData:qUe,AxiosHeaders:zUe,HttpStatusCode:HUe,formToJSON:WUe,getAdapter:GUe,mergeConfig:YUe}=Oe,ere=()=>{const[e,t]=j.useState({dashboard:!1,superAdmin:!1,application:!1,call:!1,master:!1,category:!1,mrp:!1,purchase:!1,sales:!1,inventory:!1,accounts:!1,invoice:!1,billing:!1,purchasereport:!1,salesreport:!1,inventoryreport:!1,accountsreport:!1,crm:!1,vendorBilling:!1,project:!1,campaigns:!1,hrms:!1}),[r,a]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(""),c=rh(),d={purchasereport:"purchase",salesreport:"sales",inventoryreport:"inventory",accountsreport:"accounts",vendorBilling:"invoice",billing:"invoice"},u=x=>r.some(g=>g.name===x),h=(x,g)=>r.find(y=>y.name===x)?.subPermissions?.includes(g)||!1,f=x=>window.location.pathname===x,p=x=>{t(g=>{const b={...g},y=d[x];return y?(Object.keys(b).forEach(S=>{S!==x&&S!==y&&(b[S]=!1)}),b[x]=!g[x],b[y]=!0):(Object.keys(b).forEach(S=>{S!==x&&(b[S]=!1)}),b[x]=!g[x]),localStorage.setItem("openSubmenus",JSON.stringify(b)),b})};return j.useEffect(()=>{const x=localStorage.getItem("openSubmenus");x&&t(JSON.parse(x))},[]),j.useEffect(()=>{const x=async()=>{i(!0);try{const y=localStorage.getItem("activeRole");if(y){l(y);const w=(await Oe.get(`/api/permissions/${y}`)).data.data||[];if(a(w),localStorage.setItem("cachedPermissions",JSON.stringify(w)),localStorage.setItem("prevActiveRole",y),w.length>0){const k=w[0].subPermissions?.[0];k&&setTimeout(()=>{const C=document.querySelectorAll("a");for(let D of C)if(D.textContent?.trim()===k){const A=D.getAttribute("href");A&&c(A);break}},150)}}}catch(y){console.error("Error fetching permissions:",y),a([])}finally{i(!1)}},g=localStorage.getItem("prevActiveRole"),b=localStorage.getItem("activeRole");if(b&&b!==g)console.log("New role detected, fetching permissions"),x();else{console.log("Same role as before  loading cached permissions");const y=localStorage.getItem("cachedPermissions");y?(a(JSON.parse(y)),l(b),i(!1)):x()}},[c]),s?n.jsx("div",{className:"two-col-sidebar",id:"two-col-sidebar",children:n.jsx("div",{className:"sidebar",id:"sidebar-two",children:n.jsx("div",{className:"sidebar-inner",children:n.jsxs("div",{className:"text-center p-3",children:[n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading permissions..."})]})})})}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"sidebar",id:"sidebar",children:[n.jsxs("div",{className:"sidebar-logo",children:[n.jsx("a",{href:"/",className:"logo logo-normal",children:n.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),n.jsx("a",{href:"/",className:"logo-small",children:n.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),n.jsx("a",{href:"/",className:"dark-logo",children:n.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})})]}),n.jsx("div",{className:"sidebar-inner slimscroll",children:n.jsx("div",{id:"sidebar-menu",className:"sidebar-menu",children:n.jsxs("ul",{children:[u("Dashboard")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsx("li",{className:"submenu",children:n.jsxs("a",{href:"/",className:f("/")?"active":"",children:[n.jsx("i",{className:"ti ti-smart-home"}),n.jsx("span",{children:"Dashboard"})]})})})}),u("Master Data")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/material-form","/customer-form","/vendor-form","/customer-price-list","/vendor-price-list","/tax-form","/LocationMaster","/ProcessList","/GeneralCondition"].some(x=>f(x))&&e.master?"active subdrop":"",onClick:x=>{x.preventDefault(),p("master")},children:[n.jsx("i",{className:"ti ti-server"}),n.jsx("span",{children:"Master Data"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.master?"block":"none"},children:[h("Master Data","Material Master")&&n.jsx("li",{children:n.jsx("a",{href:"/material-form",className:f("/material-form")?"active":"",children:"Material Master"})}),h("Master Data","Customer Master")&&n.jsx("li",{children:n.jsx("a",{href:"/customer-form",className:f("/customer-form")?"active":"",children:"Customer Master"})}),h("Master Data","Vendor Master")&&n.jsx("li",{children:n.jsx("a",{href:"/vendor-form",className:f("/vendor-form")?"active":"",children:"Vendor Master"})}),h("Master Data","Customer Price List")&&n.jsx("li",{children:n.jsx("a",{href:"/customer-price-list",className:f("/customer-price-list")?"active":"",children:"Customer Price List"})}),h("Master Data","Vendor Price List")&&n.jsx("li",{children:n.jsx("a",{href:"/vendor-price-list",className:f("/vendor-price-list")?"active":"",children:"Vendor Price List"})}),h("Master Data","Tax List")&&n.jsx("li",{children:n.jsx("a",{href:"/tax-form",className:f("/tax-form")?"active":"",children:"Tax List"})}),h("Master Data","Location Master")&&n.jsx("li",{children:n.jsx("a",{href:"/LocationMaster",className:f("/LocationMaster")?"active":"",children:"Location Master"})}),h("Master Data","Process List Master")&&n.jsx("li",{children:n.jsx("a",{href:"/ProcessList",className:f("/ProcessList")?"active":"",children:"Process List Master"})}),h("Master Data","General Condition Master")&&n.jsx("li",{children:n.jsx("a",{href:"/GeneralCondition",className:f("/GeneralCondition")?"active":"",children:"General Condition Master"})})]})]})})}),u("MRP")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsx("li",{className:"submenu",children:n.jsxs("a",{href:"/MRP",className:f("/MRP")?"active":"",children:[n.jsx("i",{className:"ti ti-chart-line"}),n.jsx("span",{children:"MRP"})]})})})}),u("Category")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:e.category?"active subdrop":"",onClick:x=>{x.preventDefault(),p("category")},children:[n.jsx("i",{className:"bi bi-database"}),n.jsx("span",{children:"Category"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.category?"block":"none"},children:[h("Category","Material Category")&&n.jsx("li",{children:n.jsx("a",{href:"/MaterialCategory",className:f("/MaterialCategory")?"active":"",children:"Material Category"})}),h("Category","Customer Category")&&n.jsx("li",{children:n.jsx("a",{href:"/customer-category-form",className:f("/customer-category-form")?"active":"",children:"Customer Category"})}),h("Category","Vendor Category")&&n.jsx("li",{children:n.jsx("a",{href:"/vendor-category",className:f("/vendor-category")?"active":"",children:"Vendor Category"})}),h("Category","Purchase Indent Category")&&n.jsx("li",{children:n.jsx("a",{href:"/Purchaserequestcat",className:f("/Purchaserequestcat")?"active":"",children:"Purchase Indent Category"})}),h("Category","Sales Indent Category")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesCategory",className:f("/SalesCategory")?"active":"",children:"Sales Indent Category"})}),h("Category","PO Category")&&n.jsx("li",{children:n.jsx("a",{href:"/POCategory",className:f("/POCategory")?"active":"",children:"PO Category"})}),h("Category","Sales RFQ Category")&&n.jsx("li",{children:n.jsx("a",{href:"/sale-quotation-category-form",className:f("/sale-quotation-category-form")?"active":"",children:"Sales RFQ Category"})}),h("Category","Sales Order Category")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesOrderCategoryForm",className:f("/SalesOrderCategoryForm")?"active":"",children:"Sales Order Category"})}),h("Category","Goods Receipt Category")&&n.jsx("li",{children:n.jsx("a",{href:"/GoodsReceiptCategory",className:f("/GoodsReceiptCategory")?"active":"",children:"Goods Receipt Category"})}),h("Category","Goods Issue Category")&&n.jsx("li",{children:n.jsx("a",{href:"/GoodsIssueCategory",className:f("/GoodsIssueCategory")?"active":"",children:"Goods Issue Category"})}),h("Category","Invoice Category")&&n.jsx("li",{children:n.jsx("a",{href:"/InvoiceCategory",className:f("/InvoiceCategory")?"active":"",children:"Invoice Category"})}),h("Category","Billing Category")&&n.jsx("li",{children:n.jsx("a",{href:"/BillingCategory",className:f("/BillingCategory")?"active":"",children:"Billing Category"})}),h("Category","Sale Contract Category")&&n.jsx("li",{children:n.jsx("a",{href:"/SaleContractCategoryForm",className:f("/SaleContractCategoryForm")?"active":"",children:"Sale Contract Category"})}),h("Category","Transfer Category")&&n.jsx("li",{children:n.jsx("a",{href:"/TransferCategory",className:f("/TransferCategory")?"active":"",children:"Transfer Category"})}),h("Category","Purchase Quotation Category")&&n.jsx("li",{children:n.jsx("a",{href:"/RFQCategoryForm",className:f("/RFQCategoryForm")?"active":"",children:"RFQ Category"})}),h("Category","Purchase Contract Category")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseContractCategory",className:f("/PurchaseContractCategory")?"active":"",children:"Purchase Contract Category"})})]})]})})}),u("Purchase")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/PurchaseEnquiry","/PurchaseQuotation","/PurchaseContract","/PurchaseOrder","/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(x=>f(x))||e.purchase?"active subdrop":"",onClick:x=>{x.preventDefault(),p("purchase")},children:[n.jsx("i",{className:"ti ti-shopping-cart-dollar"}),n.jsx("span",{children:"Purchase"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.purchase?"block":"none"},children:[h("Purchase","Purchase Indent")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseEnquiry",className:f("/PurchaseEnquiry")?"active":"",children:"Purchase Enquiry"})}),h("Purchase","Purchase Quotation")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseQuotation",className:f("/PurchaseQuotation")?"active":"",children:"Purchase Quotation"})}),h("Purchase","Purchase Contract")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseContract",className:f("/PurchaseContract")?"active":"",children:"Purchase Contract"})}),h("Purchase","Purchase Order")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseOrder",className:f("/PurchaseOrder")?"active":"",children:"Purchase Order"})}),n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{style:{cursor:"pointer"},className:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(x=>f(x))||e.purchasereport?"active subdrop":"",onClick:x=>{x.preventDefault(),p("purchasereport")},children:["Purchase Report ",n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(x=>f(x))||e.purchasereport?"block":"none"},children:[h("Purchase","Purchase Indent List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseIndentsummary",className:f("/PurchaseIndentsummary")?"active":"",children:"Purchase Enquiry List"})}),h("Purchase","Purchase Quotations List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseQuotationsDisplay",className:f("/PurchaseQuotationsDisplay")?"active":"",children:"Purchase Quotations List"})}),h("Purchase","Purchase Contract List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseContractsummary",className:f("/PurchaseContractsummary")?"active":"",children:"Purchase Contract List"})}),h("Purchase","Purchase Order List")&&n.jsx("li",{children:n.jsx("a",{href:"/PurchaseOrderList",className:f("/PurchaseOrderList")?"active":"",children:"Purchase Order List"})})]})]})]})]})})}),u("Sales")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/SalesEnquiry","/SalesQuotation","/SalesContract","/SalesOrder","/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(x=>f(x))||e.sales?"active subdrop":"",onClick:x=>{x.preventDefault(),p("sales")},children:[n.jsx("i",{className:"ti ti-shopping-cart-dollar"}),n.jsx("span",{children:"Sales"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.sales?"block":"none"},children:[h("Sales","Sales Indent")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesEnquiry",className:f("/SalesEnquiry")?"active":"",children:"Sales Enquiry"})}),h("Sales","Sales Quotation Form")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesQuotation",className:f("/SalesQuotation")?"active":"",children:"Sales Quotation"})}),h("Sales","Sales Contract")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesContract",className:f("/SalesContract")?"active":"",children:"Sales Contract"})}),h("Sales","Sales Order")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesOrder",className:f("/SalesOrder")?"active":"",children:"Sales Order"})}),h("Sales","Sales Delivery")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesDelivery",className:f("/SalesDelivery")?"active":"",children:"Sales Delivery"})}),n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{style:{cursor:"pointer"},className:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(x=>f(x))||e.salesreport?"active subdrop":"",onClick:x=>{x.preventDefault(),p("salesreport")},children:["Sales Report ",n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(x=>f(x))||e.salesreport?"block":"none"},children:[h("Sales","Sales Indent List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesEnquiryList",className:f("/SalesEnquiryList")?"active":"",children:"Sales Enquiry List"})}),h("Sales","Sales Quotations List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesQuotationList",className:f("/SalesQuotationList")?"active":"",children:"Sales Quotations List"})}),h("Sales","Sales Contract List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesContractsummary",className:f("/SalesContractsummary")?"active":"",children:"Sales Contract List"})}),h("Sales","Sales Order List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesOrderList",className:f("/SalesOrderList")?"active":"",children:"Sales Order List"})}),h("Sales","Sales Delivery List")&&n.jsx("li",{children:n.jsx("a",{href:"/SalesDeliveryList",className:f("/SalesDeliveryList")?"active":"",children:"Sales Delivery List"})})]})]})]})]})})}),u("Inventory")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/MatrialReceipt","/MatrialIssue","/MatrialTransfer","/StockListERP","/MatrialReceiptList","/MatrialTransferList"].some(x=>f(x))||e.inventory?"active subdrop":"",onClick:x=>{x.preventDefault(),p("inventory")},children:[n.jsx("i",{className:"ti ti-box"}),n.jsx("span",{children:"Inventory"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.inventory?"block":"none"},children:[h("Inventory","Material Receipt")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialReceipt",className:f("/MatrialReceipt")?"active":"",children:"Material Receipt"})}),h("Inventory","Material Issue")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialIssue",className:f("/MatrialIssue")?"active":"",children:"Material Issue"})}),h("Inventory","Material Transfer")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialTransfer",className:f("/MatrialTransfer")?"active":"",children:"Delivery Challan"})}),h("Inventory","Stock List")&&n.jsx("li",{children:n.jsx("a",{href:"/StockListERP",className:f("/StockListERP")?"active":"",children:"Stock List"})}),n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{style:{cursor:"pointer"},className:["/MatrialReceiptList","/MaterialIssueList"].some(x=>f(x))||e.inventoryreport?"active subdrop":"",onClick:x=>{x.preventDefault(),p("inventoryreport")},children:["Inventory Report ",n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:["/MatrialReceiptList","/MaterialIssueList"].some(x=>f(x))||e.inventoryreport?"block":"none"},children:[h("Inventory","Material Receipt List")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialReceiptList",className:f("/MatrialReceiptList")?"active":"",children:"Material Receipt List"})}),h("Inventory","Material Issue List")&&n.jsx("li",{children:n.jsx("a",{href:"/MaterialIssueList",className:f("/MaterialIssueList")?"active":"",children:"Material Issue List"})}),h("Inventory","Material Issue List")&&n.jsx("li",{children:n.jsx("a",{href:"/MatrialTransferList",className:f("/MatrialTransferList")?"active":"",children:"Material Transfer List"})})]})]})]})]})})}),u("Invoice")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",onClick:x=>{x.preventDefault(),p("invoice")},className:["/InvoiceForm","/InvoiceList","/BillingForm","/BillingDisplay"].some(x=>f(x))||e.invoice?"active subdrop":"",children:[n.jsx("i",{className:"ti ti-file-dollar"}),n.jsx("span",{children:"Invoice"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.invoice?"block":"none"},children:[n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{href:"#",onClick:x=>{x.preventDefault(),p("vendorBilling")},className:["/InvoiceForm","/InvoiceList"].some(x=>f(x))||e.vendorBilling?"active subdrop":"",children:[n.jsx("span",{children:"Vendor Invoice"}),n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:e.vendorBilling?"block":"none"},children:[h("Invoice","Invoice Form")&&n.jsx("li",{children:n.jsx("a",{href:"/InvoiceForm",className:f("/InvoiceForm")?"active":"",children:"Vendor Invoice Creation"})}),h("Invoice","Invoice List")&&n.jsx("li",{children:n.jsx("a",{href:"/InvoiceList",className:f("/InvoiceList")?"active":"",children:"Vendor Invoice List"})})]})]}),u("Billing")&&n.jsxs("li",{className:"submenu submenu-two",children:[n.jsxs("a",{href:"#",onClick:x=>{x.preventDefault(),p("billing")},className:["/BillingForm","/BillingDisplay"].some(x=>f(x))||e.billing?"active subdrop":"",children:[n.jsx("span",{children:"Customer Invoice"}),n.jsx("span",{className:"menu-arrow inside-submenu"})]}),n.jsxs("ul",{style:{display:e.billing?"block":"none"},children:[h("Billing","Billing Form")&&n.jsx("li",{children:n.jsx("a",{href:"/BillingForm",className:f("/BillingForm")?"active":"",children:"Customer Invoice Creation"})}),h("Billing","Billing List")&&n.jsx("li",{children:n.jsx("a",{href:"/BillingDisplay",className:f("/BillingDisplay")?"active":"",children:"Customer Invoice List"})})]})]})]})]})})}),u("Accounts")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",onClick:x=>{x.preventDefault(),p("accounts")},className:["/gst","/Ledger","/PaymentDisplay"].some(x=>f(x))||e.accounts?"active subdrop":"",children:[n.jsx("i",{className:"ti ti-credit-card"}),n.jsx("span",{children:"Accounts"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.accounts?"block":"none"},children:[h("Accounts","GST")&&n.jsx("li",{children:n.jsx("a",{href:"/gst",className:f("/gst")?"active":"",children:"GST"})}),h("Accounts","Ledger")&&n.jsx("li",{children:n.jsx("a",{href:"/Ledger",className:f("/Ledger")?"active":"",children:"Ledger"})}),h("Accounts","Payments")&&n.jsx("li",{children:n.jsx("a",{href:"/PaymentDisplay",className:f("/PaymentDisplay")?"active":"",children:"Payments"})})]})]})})}),u("Dashboard")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsx("li",{className:"submenu",children:n.jsxs("a",{target:"_blank",href:"https://ewaybillgst.gov.in/login.aspx",children:[n.jsx("i",{className:"ti ti-smart-home"}),n.jsx("span",{children:"E-Way Bill"})]})})})}),u("CRM")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/contacts","/leads","/proposals","/sources","/lost-reason","/contact-stage","/industry","/calls"].some(x=>f(x))||e.crm?"active subdrop":"",onClick:x=>{x.preventDefault(),p("crm")},children:[n.jsx("i",{className:"ti ti-address-book"}),n.jsx("span",{children:"CRM"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.crm?"block":"none"},children:[h("CRM","Contacts List")&&n.jsx("li",{children:n.jsx("a",{href:"/contacts",className:f("/contacts")?"active":"",children:"Contacts List"})}),h("CRM","Leads")&&n.jsx("li",{children:n.jsx("a",{href:"/leads",className:f("/leads")?"active":"",children:"Leads"})}),h("CRM","Proposals")&&n.jsx("li",{children:n.jsx("a",{href:"/proposals",className:f("/proposals")?"active":"",children:"Proposals"})}),h("CRM","Sources")&&n.jsx("li",{children:n.jsx("a",{href:"/sources",className:f("/sources")?"active":"",children:"Sources"})}),h("CRM","Lost Reason")&&n.jsx("li",{children:n.jsx("a",{href:"/lost-reason",className:f("/lost-reason")?"active":"",children:"Lost Reason"})}),h("CRM","Contact Stage")&&n.jsx("li",{children:n.jsx("a",{href:"/contact-stage",className:f("/contact-stage")?"active":"",children:"Contact Stage"})}),h("CRM","Industry")&&n.jsx("li",{children:n.jsx("a",{href:"/industry",className:f("/industry")?"active":"",children:"Industry"})}),h("CRM","Calls")&&n.jsx("li",{children:n.jsx("a",{href:"/calls",className:f("/calls")?"active":"",children:"Calls"})})]})]})})}),u("Project Management")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/projects","/tasks","/milestones","/time-entries"].some(x=>f(x))||e.project?"active subdrop":"",onClick:x=>{x.preventDefault(),p("project")},children:[n.jsx("i",{className:"ti ti-briefcase"}),n.jsx("span",{children:"Project Management"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.project?"block":"none"},children:[h("Project Management","Projects")&&n.jsx("li",{children:n.jsx("a",{href:"/projects",className:f("/projects")?"active":"",children:"Projects"})}),h("Project Management","Tasks")&&n.jsx("li",{children:n.jsx("a",{href:"/tasks",className:f("/tasks")?"active":"",children:"Tasks"})}),h("Project Management","Milestones")&&n.jsx("li",{children:n.jsx("a",{href:"/milestones",className:f("/milestones")?"active":"",children:"Milestones"})}),h("Project Management","Time Entries")&&n.jsx("li",{children:n.jsx("a",{href:"/time-entries",className:f("/time-entries")?"active":"",children:"Time Entries"})})]})]})})}),u("Campaigns")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/campaigns","/analytics"].some(x=>f(x))||e.campaigns?"active subdrop":"",onClick:x=>{x.preventDefault(),p("campaigns")},children:[n.jsx("i",{className:"ti ti-brand-campaignmonitor"}),"  ",n.jsx("span",{children:"Campaigns"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.campaigns?"block":"none"},children:[h("Campaigns","Campaigns")&&n.jsx("li",{children:n.jsx("a",{href:"/campaigns",className:f("/campaigns")?"active":"",children:"Campaigns"})}),h("Campaigns","Analytics")&&n.jsx("li",{children:n.jsx("a",{href:"/analytics",className:f("/analytics")?"active":"",children:"Analytics"})})]})]})})}),u("HRMS")&&n.jsx("li",{children:n.jsx("ul",{children:n.jsxs("li",{className:"submenu",children:[n.jsxs("a",{href:"#",className:["/designation","/departments","/employee","/leaverequest","/leavemanagement","/payroll","/attendancereg","/attendancetaking","/attendancereport"].some(x=>f(x))||e.hrms?"active subdrop":"",onClick:x=>{x.preventDefault(),p("hrms")},children:[n.jsx("i",{className:"ti ti-user-circle"}),n.jsx("span",{children:"HRMS"}),n.jsx("span",{className:"menu-arrow"})]}),n.jsxs("ul",{style:{display:e.hrms?"block":"none"},children:[h("HRMS","Designation")&&n.jsx("li",{children:n.jsx("a",{href:"/designation",className:f("/designation")?"active":"",children:"Designation"})}),h("HRMS","Department")&&n.jsx("li",{children:n.jsx("a",{href:"/departments",className:f("/departments")?"active":"",children:"Departments"})}),h("HRMS","Employee")&&n.jsx("li",{children:n.jsx("a",{href:"/employee",className:f("/employee")?"active":"",children:"Employee"})}),h("HRMS","LeaveRequests")&&n.jsx("li",{children:n.jsx("a",{href:"/leaverequest",className:f("/leaverequest")?"active":"",children:"Leave Request"})}),h("HRMS","LeaveRequestManagement")&&n.jsx("li",{children:n.jsx("a",{href:"/leavemanagement",className:f("/leavemanagement")?"active":"",children:"Leave Management"})}),h("HRMS","Payroll")&&n.jsx("li",{children:n.jsx("a",{href:"/payroll",className:f("/payroll")?"active":"",children:"Payroll"})}),h("HRMS","AttendanceRegister")&&n.jsx("li",{children:n.jsx("a",{href:"/attendancereg",className:f("/attendancereg")?"active":"",children:"Attendance Register"})}),h("HRMS","AttendanceTaking")&&n.jsx("li",{children:n.jsx("a",{href:"/attendancetaking",className:f("/attendancetaking")?"active":"",children:"Attendance Taking"})}),h("HRMS","AttendanceReports")&&n.jsx("li",{children:n.jsx("a",{href:"/attendancereport",className:f("/attendancereport")?"active":"",children:"Attendance Reports"})})]})]})})}),r.length===0&&n.jsx("li",{className:"menu-title",children:n.jsxs("span",{children:["No permissions assigned for role: ",o]})})]})})})]})})};function tre({toggleSidebar:e}){rh();const[t,r]=j.useState(!1),[a,s]=j.useState(!1),i=JSON.parse(localStorage.getItem("user"));console.log("user",i);const o=i?.roles?.map(h=>h.roleName)||[],[l,c]=j.useState(()=>localStorage.getItem("activeRole")||o[0]||"");j.useEffect(()=>{!localStorage.getItem("activeRole")&&o.length>0&&(localStorage.setItem("activeRole",i.roles[0]?.roleName||""),c(o[0]))},[o]),console.log("Active Role:",l);const d=h=>{const f=h.target.value;c(f),localStorage.setItem("activeRole",i.roles[0]?.roleName||"")},u=()=>{localStorage.removeItem("user"),localStorage.removeItem("activeRole"),localStorage.removeItem("openSubmenus"),window.location.href="/login"};return n.jsx("div",{className:"header",children:n.jsxs("div",{className:"main-header",children:[n.jsxs("div",{className:"header-left",children:[n.jsx("a",{href:"index.html",className:"logo",children:n.jsx("h2",{children:"Jyothi Cloud ERP"})}),n.jsx("a",{href:"index.html",className:"dark-logo",children:n.jsx("h2",{children:"Jyothi Cloud ERP"})})]}),n.jsx("a",{id:"mobile_btn",className:"mobile_btn",onClick:h=>{h.preventDefault(),e()},children:n.jsxs("span",{className:"bar-icon",children:[n.jsx("span",{}),n.jsx("span",{}),n.jsx("span",{})]})}),n.jsx("div",{className:"header-user",children:n.jsxs("div",{className:"nav user-menu nav-list",children:[n.jsx("div",{className:"me-auto d-flex align-items-center",id:"header-search"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsxs("div",{className:"me-1 notification_item",children:[n.jsxs("a",{href:"#",className:"btn btn-menubar position-relative me-1",id:"notification_popup","data-bs-toggle":"dropdown",children:[n.jsx("i",{className:"ti ti-bell"}),n.jsx("span",{className:"notification-status-dot"})]}),n.jsxs("div",{className:"dropdown-menu dropdown-menu-end notification-dropdown p-4",children:[n.jsxs("div",{className:"d-flex align-items-center justify-content-between border-bottom p-0 pb-3 mb-3",children:[n.jsx("h4",{className:"notification-title",children:"Notifications (2)"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("a",{href:"#",className:"text-primary fs-15 me-3 lh-1",children:"Mark all as read"}),n.jsxs("div",{className:"dropdown",children:[n.jsxs("a",{href:"javascript:void(0);",className:"bg-white dropdown-toggle","data-bs-toggle":"dropdown",children:[n.jsx("i",{className:"ti ti-calendar-due me-1"}),"Today"]}),n.jsxs("ul",{className:"dropdown-menu mt-2 p-3",children:[n.jsx("li",{children:n.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"This Week"})}),n.jsx("li",{children:n.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Week"})}),n.jsx("li",{children:n.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Month"})})]})]})]})]}),n.jsx("div",{className:"noti-content",children:n.jsxs("div",{className:"d-flex flex-column",children:[n.jsx("div",{className:"border-bottom mb-3 pb-3",children:n.jsx("a",{href:"activity.html",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-27.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("span",{className:"text-dark fw-semibold",children:"Shawn"})," performance in Math is below the threshold."]}),n.jsx("span",{children:"Just Now"})]})]})})}),n.jsx("div",{className:"border-bottom mb-3 pb-3",children:n.jsx("a",{href:"activity.html",className:"pb-0",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-23.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("span",{className:"text-dark fw-semibold",children:"Sylvia"})," added appointment on 02:00 PM"]}),n.jsx("span",{children:"10 mins ago"}),n.jsxs("div",{className:"d-flex justify-content-start align-items-center mt-1",children:[n.jsx("span",{className:"btn btn-light btn-sm me-2",children:"Deny"}),n.jsx("span",{className:"btn btn-primary btn-sm",children:"Approve"})]})]})]})})}),n.jsx("div",{className:"border-bottom mb-3 pb-3",children:n.jsx("a",{href:"activity.html",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-25.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:["New student record ",n.jsx("span",{className:"text-dark fw-semibold",children:" George"})," is created by ",n.jsx("span",{className:"text-dark fw-semibold",children:"Teressa"})]}),n.jsx("span",{children:"2 hrs ago"})]})]})})}),n.jsx("div",{className:"border-0 mb-3 pb-0",children:n.jsx("a",{href:"activity.html",children:n.jsxs("div",{className:"d-flex",children:[n.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:n.jsx("img",{src:"assets/img/profiles/avatar-01.jpg",alt:"Profile"})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("p",{className:"mb-1",children:["A new teacher record for ",n.jsx("span",{className:"text-dark fw-semibold",children:"Elisa"})," "]}),n.jsx("span",{children:"09:45 AM"})]})]})})})]})}),n.jsxs("div",{className:"d-flex p-0",children:[n.jsx("a",{href:"#",className:"btn btn-light w-100 me-2",children:"Cancel"}),n.jsx("a",{href:"activity.html",className:"btn btn-primary w-100",children:"View All"})]})]})]}),n.jsxs("div",{className:"dropdown profile-dropdown",children:[n.jsx("a",{href:"javascript:void(0);",className:"dropdown-toggle d-flex align-items-center","data-bs-toggle":"dropdown",children:n.jsx("span",{className:"avatar avatar-sm online",children:n.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"Img",className:"img-fluid rounded-circle"})})}),n.jsx("div",{className:"dropdown-menu shadow-none",children:n.jsxs("div",{className:"card mb-0",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{className:"avatar avatar-lg me-2 avatar-rounded",children:n.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"img"})}),n.jsxs("div",{children:[n.jsx("h5",{className:"mb-0",children:i?.username||"User"}),n.jsxs("p",{className:"fs-12 fw-medium mb-0",children:["Active Role: ",n.jsx("strong",{children:l})," "]})]})]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",children:[n.jsx("label",{className:"mb-1 fw-medium",children:"Switch Role"}),n.jsx("select",{className:"form-select form-select-sm",value:l,onChange:d,children:o.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/profile",children:[n.jsx("i",{className:"isax isax-profile-circle me-2"}),"Profile Settings"]}),n.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/reports",children:[n.jsx("i",{className:"isax isax-document-text me-2"}),"Reports"]}),n.jsxs("div",{className:"form-check form-switch form-check-reverse d-flex align-items-center justify-content-between dropdown-item mb-0",children:[n.jsxs("label",{className:"form-check-label",htmlFor:"notify",children:[n.jsx("i",{className:"isax isax-notification me-2"}),"Notifications"]}),n.jsx("input",{className:"form-check-input",type:"checkbox",id:"notify"})]})]}),n.jsx("div",{className:"card-footer",children:n.jsxs("button",{className:"dropdown-item logout d-flex align-items-center",onClick:u,style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[n.jsx("i",{className:"isax isax-logout me-2"}),"Sign Out"]})})]})})]})]})]})}),n.jsxs("div",{className:"dropdown mobile-user-menu",children:[n.jsx("a",{href:"javascript:void(0);",className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:n.jsx("i",{className:"fa fa-ellipsis-v"})}),n.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[n.jsx("a",{className:"dropdown-item",href:"profile.html",children:"My Profile"}),n.jsx("a",{className:"dropdown-item",href:"profile-settings.html",children:"Settings"}),n.jsx("a",{className:"dropdown-item",onClick:u,children:"Logout"})]})]})]})})}const rre=({children:e})=>(()=>{const r=localStorage.getItem("user");return r&&r!=="null"&&r!=="undefined"})()?e:n.jsx($Z,{to:"/login",replace:!0});function KU(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=KU(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ia(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=KU(e))&&(a&&(a+=" "),a+=t);return a}var Yk={},Kk={},tR;function are(){return tR||(tR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(Kk)),Kk}var Xk={},rR;function XU(){return rR||(rR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(Xk)),Xk}var Qk={},aR;function QU(){return aR||(aR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t}(Qk)),Qk}var Jk={},nR;function fA(){return nR||(nR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],s=r.length;if(s===0)return a;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(a.push(""),i++);i<s;){const d=r[i];l?d==="\\"&&i+1<s?(i++,o+=r[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,a.push(o),o=""):o+=d:d==="["?(c=!0,o&&(a.push(o),o="")):d==="."?o&&(a.push(o),o=""):o+=d,i++}return o&&a.push(o),a}e.toPath=t}(Jk)),Jk}var sR;function mA(){return sR||(sR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=are(),r=XU(),a=QU(),s=fA();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,s.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i}(Yk)),Yk}var Zk,iR;function nre(){return iR||(iR=1,Zk=mA().get),Zk}var sre=nre();const Hm=Vd(sre);var e_={exports:{}},kn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR;function ire(){if(oR)return kn;oR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function x(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case a:case c:case d:case f:return g;default:switch(g=g&&g.$$typeof,g){case o:case l:case h:case u:return g;case i:return g;default:return b}}case t:return b}}}return kn.ContextConsumer=i,kn.ContextProvider=o,kn.Element=e,kn.ForwardRef=l,kn.Fragment=r,kn.Lazy=h,kn.Memo=u,kn.Portal=t,kn.Profiler=s,kn.StrictMode=a,kn.Suspense=c,kn.SuspenseList=d,kn.isContextConsumer=function(g){return x(g)===i},kn.isContextProvider=function(g){return x(g)===o},kn.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},kn.isForwardRef=function(g){return x(g)===l},kn.isFragment=function(g){return x(g)===r},kn.isLazy=function(g){return x(g)===h},kn.isMemo=function(g){return x(g)===u},kn.isPortal=function(g){return x(g)===t},kn.isProfiler=function(g){return x(g)===s},kn.isStrictMode=function(g){return x(g)===a},kn.isSuspense=function(g){return x(g)===c},kn.isSuspenseList=function(g){return x(g)===d},kn.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===a||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},kn.typeOf=x,kn}var lR;function ore(){return lR||(lR=1,e_.exports=ire()),e_.exports}var lre=ore(),Mi=e=>e===0?0:e>0?1:-1,Nl=e=>typeof e=="number"&&e!=+e,rx=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Cr=e=>(typeof e=="number"||e instanceof Number)&&!Nl(e),Xu=e=>Cr(e)||typeof e=="string",cre=0,Dx=e=>{var t=++cre;return"".concat(e||"").concat(t)},Xo=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Cr(t)&&typeof t!="string")return a;var i;if(rx(t)){if(r==null)return a;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Nl(i)&&(i=a),s&&r!=null&&i>r&&(i=r),i},JU=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},_m=(e,t)=>Cr(e)&&Cr(t)?r=>e+r*(t-e):()=>t;function Uv(e,t,r){return Cr(e)&&Cr(t)?e+r*(t-e):t}function ZU(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Hm(a,t))===r)}var Rn=e=>e===null||typeof e>"u",i1=e=>Rn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),dre=["viewBox","children"],ure=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cR=["points","pathLength"],t_={svg:dre,polygon:cR,polyline:cR},pA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],xA=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(s=>{pA.includes(s)&&(a[s]=i=>r[s](r,i))}),a},hre=(e,t,r)=>a=>(e(t,r,a),null),o1=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var i=e[s];pA.includes(s)&&typeof i=="function"&&(a||(a={}),a[s]=hre(i,t,r))}),a},dR=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uR=null,r_=null,e$=e=>{if(e===uR&&Array.isArray(r_))return r_;var t=[];return j.Children.forEach(e,r=>{Rn(r)||(lre.isFragment(r)?t=t.concat(e$(r.props.children)):t.push(r))}),r_=t,uR=e,t};function l1(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(s=>dR(s)):a=[dR(t)],e$(e).forEach(s=>{var i=Hm(s,"type.displayName")||Hm(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}var t$=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,fre=(e,t,r,a)=>{var s,i=(s=a&&t_?.[a])!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(a&&i.includes(t)||ure.includes(t))||r&&pA.includes(t)},Ma=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(j.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(i=>{var o;fre((o=a)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=a[i])}),s},mre=["children","width","height","viewBox","className","style","title","desc"];function e5(){return e5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},e5.apply(null,arguments)}function pre(e,t){if(e==null)return{};var r,a,s=xre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xre(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var vA=j.forwardRef((e,t)=>{var{children:r,width:a,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=pre(e,mre),h=i||{width:a,height:s,x:0,y:0},f=ia("recharts-surface",o);return j.createElement("svg",e5({},Ma(u,!0,"svg"),{className:f,width:a,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),j.createElement("title",null,c),j.createElement("desc",null,d),r)}),vre=["children","className"];function t5(){return t5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t5.apply(null,arguments)}function gre(e,t){if(e==null)return{};var r,a,s=bre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bre(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Gs=j.forwardRef((e,t)=>{var{children:r,className:a}=e,s=gre(e,vre),i=ia("recharts-layer",a);return j.createElement("g",t5({className:i},Ma(s,!0),{ref:t}),r)}),r$=j.createContext(null),yre=()=>j.useContext(r$);function Mn(e){return function(){return e}}const a$=Math.cos,pw=Math.sin,Hd=Math.sqrt,xw=Math.PI,hS=2*xw,r5=Math.PI,a5=2*r5,zp=1e-6,jre=a5-zp;function n$(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Nre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return n$;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class wre{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?n$:Nre(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-r,u=o-t,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>zp)if(!(Math.abs(h*c-d*u)>zp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=a-o,x=s-l,g=c*c+d*d,b=p*p+x*x,y=Math.sqrt(g),S=Math.sqrt(f),w=i*Math.tan((r5-Math.acos((g+f-b)/(2*y*S)))/2),k=w/S,C=w/y;Math.abs(k-1)>zp&&this._append`L${t+k*u},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*p>u*x)},${this._x1=t+C*c},${this._y1=r+C*d}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=r+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>zp||Math.abs(this._y1-u)>zp)&&this._append`L${d},${u}`,a&&(f<0&&(f=f%a5+a5),f>jre?this._append`A${a},${a},0,1,${h},${t-l},${r-c}A${a},${a},0,1,${h},${this._x1=d},${this._y1=u}`:f>zp&&this._append`A${a},${a},0,${+(f>=r5)},${h},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function gA(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new wre(t)}function bA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function s$(e){this._context=e}s$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fS(e){return new s$(e)}function i$(e){return e[0]}function o$(e){return e[1]}function l$(e,t){var r=Mn(!0),a=null,s=fS,i=null,o=gA(l);e=typeof e=="function"?e:e===void 0?i$:Mn(e),t=typeof t=="function"?t:t===void 0?o$:Mn(t);function l(c){var d,u=(c=bA(c)).length,h,f=!1,p;for(a==null&&(i=s(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Mn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Mn(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Mn(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function qj(e,t,r){var a=null,s=Mn(!0),i=null,o=fS,l=null,c=gA(d);e=typeof e=="function"?e:e===void 0?i$:Mn(+e),t=typeof t=="function"?t:Mn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?o$:Mn(+r);function d(h){var f,p,x,g=(h=bA(h)).length,b,y=!1,S,w=new Array(g),k=new Array(g);for(i==null&&(l=o(S=c())),f=0;f<=g;++f){if(!(f<g&&s(b=h[f],f,h))===y)if(y=!y)p=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=f-1;x>=p;--x)l.point(w[x],k[x]);l.lineEnd(),l.areaEnd()}y&&(w[f]=+e(b,f,h),k[f]=+t(b,f,h),l.point(a?+a(b,f,h):w[f],r?+r(b,f,h):k[f]))}if(S)return l=null,S+""||null}function u(){return l$().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Mn(+h),a=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Mn(+h),d):e},d.x1=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:Mn(+h),d):a},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Mn(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Mn(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Mn(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Mn(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class c${constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Sre(e){return new c$(e,!0)}function Cre(e){return new c$(e,!1)}const yA={draw(e,t){const r=Hd(t/xw);e.moveTo(r,0),e.arc(0,0,r,0,hS)}},kre={draw(e,t){const r=Hd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},d$=Hd(1/3),_re=d$*2,Ere={draw(e,t){const r=Hd(t/_re),a=r*d$;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},Dre={draw(e,t){const r=Hd(t),a=-r/2;e.rect(a,a,r,r)}},Are=.8908130915292852,u$=pw(xw/10)/pw(7*xw/10),Tre=pw(hS/10)*u$,Ire=-a$(hS/10)*u$,Pre={draw(e,t){const r=Hd(t*Are),a=Tre*r,s=Ire*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=hS*i/5,l=a$(o),c=pw(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},a_=Hd(3),Ore={draw(e,t){const r=-Hd(t/(a_*3));e.moveTo(0,r*2),e.lineTo(-a_*r,-r),e.lineTo(a_*r,-r),e.closePath()}},Tc=-.5,Ic=Hd(3)/2,n5=1/Hd(12),Mre=(n5/2+1)*3,Rre={draw(e,t){const r=Hd(t/Mre),a=r/2,s=r*n5,i=a,o=r*n5+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Tc*a-Ic*s,Ic*a+Tc*s),e.lineTo(Tc*i-Ic*o,Ic*i+Tc*o),e.lineTo(Tc*l-Ic*c,Ic*l+Tc*c),e.lineTo(Tc*a+Ic*s,Tc*s-Ic*a),e.lineTo(Tc*i+Ic*o,Tc*o-Ic*i),e.lineTo(Tc*l+Ic*c,Tc*c-Ic*l),e.closePath()}};function Fre(e,t){let r=null,a=gA(s);e=typeof e=="function"?e:Mn(e||yA),t=typeof t=="function"?t:Mn(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Mn(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function vw(){}function gw(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function h$(e){this._context=e}h$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lre(e){return new h$(e)}function f$(e){this._context=e}f$.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bre(e){return new f$(e)}function m$(e){this._context=e}m$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ure(e){return new m$(e)}function p$(e){this._context=e}p$.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $re(e){return new p$(e)}function hR(e){return e<0?-1:1}function fR(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(hR(i)+hR(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function mR(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function n_(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function bw(e){this._context=e}bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n_(this,this._t0,mR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,n_(this,mR(this,r=fR(this,e,t)),r);break;default:n_(this,this._t0,r=fR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function x$(e){this._context=new v$(e)}(x$.prototype=Object.create(bw.prototype)).point=function(e,t){bw.prototype.point.call(this,t,e)};function v$(e){this._context=e}v$.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function Vre(e){return new bw(e)}function qre(e){return new x$(e)}function g$(e){this._context=e}g$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=pR(e),s=pR(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pR(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function zre(e){return new g$(e)}function mS(e,t){this._context=e,this._t=t}mS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Hre(e){return new mS(e,.5)}function Wre(e){return new mS(e,0)}function Gre(e){return new mS(e,1)}function R0(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function s5(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Yre(e,t){return e[t]}function Kre(e){const t=[];return t.key=e,t}function Xre(){var e=Mn([]),t=s5,r=R0,a=Yre;function s(i){var o=Array.from(e.apply(this,arguments),Kre),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(h,o[l].key,d,i)]).data=h;for(l=0,u=bA(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Mn(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Mn(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?s5:typeof i=="function"?i:Mn(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??R0,s):r},s}function Qre(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}R0(e,t)}}function Jre(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}R0(e,t)}}function Zre(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[a][1]||0,f=u[a-1][1]||0,p=(h-f)/2,x=0;x<l;++x){var g=e[t[x]],b=g[a][1]||0,y=g[a-1][1]||0;p+=b-y}c+=h,d+=p*h}s[a-1][1]+=s[a-1][0]=r,c&&(r-=d/c)}s[a-1][1]+=s[a-1][0]=r,R0(e,t)}}var eae=["type","size","sizeType"];function i5(){return i5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i5.apply(null,arguments)}function xR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(r),!0).forEach(function(a){tae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tae(e,t,r){return(t=rae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rae(e){var t=aae(e,"string");return typeof t=="symbol"?t:t+""}function aae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nae(e,t){if(e==null)return{};var r,a,s=sae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sae(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var b$={symbolCircle:yA,symbolCross:kre,symbolDiamond:Ere,symbolSquare:Dre,symbolStar:Pre,symbolTriangle:Ore,symbolWye:Rre},iae=Math.PI/180,oae=e=>{var t="symbol".concat(i1(e));return b$[t]||yA},lae=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*iae;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},cae=(e,t)=>{b$["symbol".concat(i1(e))]=t},jA=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,s=nae(e,eae),i=vR(vR({},s),{},{type:t,size:r,sizeType:a}),o=()=>{var h=oae(t),f=Fre().type(h).size(lae(r,a,t));return f()},{className:l,cx:c,cy:d}=i,u=Ma(i,!0);return c===+c&&d===+d&&r===+r?j.createElement("path",i5({},u,{className:ia("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};jA.registerSymbol=cae;function o5(){return o5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o5.apply(null,arguments)}function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(a){NA(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NA(e,t,r){return(t=uae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uae(e){var t=hae(e,"string");return typeof t=="symbol"?t:t+""}function hae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pc=32;class wA extends j.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,s=Pc/2,i=Pc/6,o=Pc/3,l=t.inactive?a:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return j.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:Pc,y2:s,className:"recharts-legend-icon"});if(c==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Pc,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return j.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Pc/8,"h").concat(Pc,"v").concat(Pc*3/4,"h").concat(-Pc,"z"),className:"recharts-legend-icon"});if(j.isValidElement(t.legendIcon)){var d=dae({},t);return delete d.legendIcon,j.cloneElement(t.legendIcon,d)}return j.createElement(jA,{fill:l,cx:s,cy:s,size:Pc,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:s,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:Pc,height:Pc},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=ia({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var x=u.inactive?i:u.color,g=f?f(u.value,u,h):u.value;return j.createElement("li",o5({className:p,style:c,key:"legend-item-".concat(h)},o1(this.props,u,h)),j.createElement(vA,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),j.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}NA(wA,"displayName","Legend");NA(wA,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var s_={},i_={},bR;function fae(){return bR||(bR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=a(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t}(i_)),i_}var o_={},yR;function y$(){return yR||(yR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(o_)),o_}var l_={},c_={},d_={},jR;function mae(){return jR||(jR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(d_)),d_}var NR;function SA(){return NR||(NR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mae();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(c_)),c_}var u_={},wR;function pae(){return wR||(wR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(u_)),u_}var SR;function xae(){return SR||(SR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SA(),r=pae();function a(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a}(l_)),l_}var h_={},f_={},CR;function vae(){return CR||(CR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mA();function r(a){return function(s){return t.get(s,a)}}e.property=r}(f_)),f_}var m_={},p_={},x_={},v_={},kR;function j$(){return kR||(kR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(v_)),v_}var g_={},_R;function N$(){return _R||(_R=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(g_)),g_}var b_={},ER;function CA(){return ER||(ER=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(b_)),b_}var DR;function gae(){return DR||(DR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kA(),r=j$(),a=N$(),s=CA();function i(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function x(g,b,y,S,w,k){const C=p(g,b,y,S,w,k);return C!==void 0?!!C:o(g,b,x,k)},new Map)}function o(h,f,p,x){if(f===h)return!0;switch(typeof f){case"object":return l(h,f,p,x);case"function":return Object.keys(f).length>0?o(h,{...f},p,x):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function l(h,f,p,x){if(f==null)return!0;if(Array.isArray(f))return d(h,f,p,x);if(f instanceof Map)return c(h,f,p,x);if(f instanceof Set)return u(h,f,p,x);const g=Object.keys(f);if(h==null)return g.length===0;if(g.length===0)return!0;if(x&&x.has(f))return x.get(f)===h;x&&x.set(f,h);try{for(let b=0;b<g.length;b++){const y=g[b];if(!a.isPrimitive(h)&&!(y in h)||f[y]===void 0&&h[y]!==void 0||f[y]===null&&h[y]!==null||!p(h[y],f[y],y,h,f,x))return!1}return!0}finally{x&&x.delete(f)}}function c(h,f,p,x){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[g,b]of f.entries()){const y=h.get(g);if(p(y,b,g,h,f,x)===!1)return!1}return!0}function d(h,f,p,x){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const g=new Set;for(let b=0;b<f.length;b++){const y=f[b];let S=!1;for(let w=0;w<h.length;w++){if(g.has(w))continue;const k=h[w];let C=!1;if(p(k,y,b,h,f,x)&&(C=!0),C){g.add(w),S=!0;break}}if(!S)return!1}return!0}function u(h,f,p,x){return f.size===0?!0:h instanceof Set?d([...h],[...f],p,x):!1}e.isMatchWith=i,e.isSetMatch=u}(x_)),x_}var AR;function kA(){return AR||(AR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gae();function r(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=r}(p_)),p_}var y_={},j_={},N_={},TR;function w$(){return TR||(TR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(N_)),N_}var w_={},IR;function _A(){return IR||(IR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(w_)),w_}var S_={},PR;function EA(){return PR||(PR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",x="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]",k="[object BigUint64Array]",C="[object Int8Array]",D="[object Int16Array]",E="[object Int32Array]",A="[object BigInt64Array]",I="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=k,e.booleanTag=s,e.dataViewTag=g,e.dateTag=l,e.errorTag=x,e.float32ArrayTag=I,e.float64ArrayTag=L,e.functionTag=h,e.int16ArrayTag=D,e.int32ArrayTag=E,e.int8ArrayTag=C,e.mapTag=c,e.numberTag=a,e.objectTag=p,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=S,e.uint32ArrayTag=w,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(S_)),S_}var C_={},OR;function bae(){return OR||(OR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(C_)),C_}var MR;function S$(){return MR||(MR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w$(),r=_A(),a=EA(),s=N$(),i=bae();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,f,p=new Map,x=void 0){const g=x?.(u,h,f,p);if(g!=null)return g;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,f,p,x);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[y,S]of u)b.set(y,l(S,y,f,p,x));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const y of u)b.add(l(y,void 0,f,p,x));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,f,p,x);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),c(b,u,f,p,x),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),c(b,u,f,p,x),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),c(b,u,f,p,x),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,f,p,x),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),c(b,u,f,p,x),b}return u}function c(u,h,f=u,p,x){const g=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<g.length;b++){const y=g[b],S=Object.getOwnPropertyDescriptor(u,y);(S==null||S.writable)&&(u[y]=l(h[y],y,f,p,x))}}function d(u){switch(r.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(j_)),j_}var RR;function yae(){return RR||(RR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S$();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(y_)),y_}var FR;function jae(){return FR||(FR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kA(),r=yae();function a(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=a}(m_)),m_}var k_={},__={},E_={},LR;function Nae(){return LR||(LR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S$(),r=EA();function a(s,i){return t.cloneDeepWith(s,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!=null)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=a}(E_)),E_}var BR;function wae(){return BR||(BR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nae();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}(__)),__}var D_={},A_={},UR;function C$(){return UR||(UR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(A_)),A_}var T_={},$R;function Sae(){return $R||($R=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_A();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}(T_)),T_}var VR;function Cae(){return VR||(VR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XU(),r=C$(),a=Sae(),s=fA();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||a.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i}(D_)),D_}var qR;function kae(){return qR||(qR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kA(),r=QU(),a=wae(),s=mA(),i=Cae();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=a.cloneDeep(c),function(d){const u=s.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(k_)),k_}var zR;function _ae(){return zR||(zR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y$(),r=vae(),a=jae(),s=kae();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(h_)),h_}var HR;function Eae(){return HR||(HR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fae(),r=y$(),a=xae(),s=_ae();function i(o,l=r.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i}(s_)),s_}var I_,WR;function Dae(){return WR||(WR=1,I_=Eae().uniqBy),I_}var Aae=Dae();const GR=Vd(Aae);function k$(e,t,r){return t===!0?GR(e,r):typeof t=="function"?GR(e,t):e}var P_={exports:{}},O_={},M_={exports:{}},R_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YR;function Tae(){if(YR)return R_;YR=1;var e=sg();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,f){var p=f(),x=a({inst:{value:p,getSnapshot:f}}),g=x[0].inst,b=x[1];return i(function(){g.value=p,g.getSnapshot=f,c(g)&&b({inst:g})},[h,p,f]),s(function(){return c(g)&&b({inst:g}),h(function(){c(g)&&b({inst:g})})},[h]),o(p),p}function c(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!r(h,p)}catch{return!0}}function d(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return R_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,R_}var KR;function Iae(){return KR||(KR=1,M_.exports=Tae()),M_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR;function Pae(){if(XR)return O_;XR=1;var e=sg(),t=Iae();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return O_.useSyncExternalStoreWithSelector=function(d,u,h,f,p){var x=i(null);if(x.current===null){var g={hasValue:!1,value:null};x.current=g}else g=x.current;x=l(function(){function y(D){if(!S){if(S=!0,w=D,D=f(D),p!==void 0&&g.hasValue){var E=g.value;if(p(E,D))return k=E}return k=D}if(E=k,a(w,D))return E;var A=f(D);return p!==void 0&&p(E,A)?(w=D,E):(w=D,k=A)}var S=!1,w,k,C=h===void 0?null:h;return[function(){return y(u())},C===null?void 0:function(){return y(C())}]},[u,h,f,p]);var b=s(d,x[0],x[1]);return o(function(){g.hasValue=!0,g.value=b},[b]),c(b),b},O_}var QR;function Oae(){return QR||(QR=1,P_.exports=Pae()),P_.exports}var Mae=Oae(),DA=j.createContext(null),Rae=e=>e,rs=()=>{var e=j.useContext(DA);return e?e.store.dispatch:Rae},KN=()=>{},Fae=()=>KN,Lae=(e,t)=>e===t;function Mr(e){var t=j.useContext(DA);return Mae.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Fae,t?t.store.getState:KN,t?t.store.getState:KN,t?e:KN,Lae)}function Bae(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Uae(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function $ae(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var JR=e=>Array.isArray(e)?e:[e];function Vae(e){const t=Array.isArray(e[0])?e[0]:e;return $ae(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function qae(e,t){const r=[],{length:a}=e;for(let s=0;s<a;s++)r.push(e[s].apply(null,t));return r}var zae=class{constructor(e){this.value=e}deref(){return this.value}},Hae=typeof WeakRef<"u"?WeakRef:zae,Wae=0,ZR=1;function zj(){return{s:Wae,v:void 0,o:null,p:null}}function _$(e,t={}){let r=zj();const{resultEqualityCheck:a}=t;let s,i=0;function o(){let l=r;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const g=x.get(p);g===void 0?(l=zj(),x.set(p,l)):l=g}else{let x=l.p;x===null&&(l.p=x=new Map);const g=x.get(p);g===void 0?(l=zj(),x.set(p,l)):l=g}}const d=l;let u;if(l.s===ZR)u=l.v;else if(u=e.apply(null,arguments),i++,a){const h=s?.deref?.()??s;h!=null&&a(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new Hae(u):u}return d.s=ZR,d.v=u,u}return o.clearCache=()=>{r=zj(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Gae(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let i=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),Bae(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:p=_$,argsMemoizeOptions:x=[]}=u,g=JR(f),b=JR(x),y=Vae(s),S=h(function(){return i++,d.apply(null,arguments)},...g),w=p(function(){o++;const C=qae(y,arguments);return l=S.apply(null,C),l},...b);return Object.assign(w,{resultFunc:d,memoizedResultFunc:S,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(a,{withTypes:()=>a}),a}var Bt=Gae(_$),Yae=Object.assign((e,t=Bt)=>{Uae(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>Yae}),F_={},L_={},B_={},eF;function Kae(){return eF||(eF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,s,i)=>{if(a!==s){const o=t(a),l=t(s);if(o===l&&o===0){if(a<s)return i==="desc"?1:-1;if(a>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(B_)),B_}var U_={},$_={},tF;function E$(){return tF||(tF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}($_)),$_}var rF;function Xae(){return rF||(rF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E$(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s}(U_)),U_}var aF;function Qae(){return aF||(aF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kae(),r=Xae(),a=fA();function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const d=(p,x)=>{let g=p;for(let b=0;b<x.length&&g!=null;++b)g=g[x[b]];return g},u=(p,x)=>x==null||p==null?x:typeof p=="object"&&"key"in p?Object.hasOwn(x,p.key)?x[p.key]:d(x,p.path):typeof p=="function"?p(x):Array.isArray(p)?d(x,p):typeof x=="object"?x[p]:x,h=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:a.toPath(p)}));return i.map(p=>({original:p,criteria:h.map(x=>u(x,p))})).slice().sort((p,x)=>{for(let g=0;g<h.length;g++){const b=t.compareValues(p.criteria[g],x.criteria[g],l[g]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=s}(L_)),L_}var V_={},nF;function Jae(){return nF||(nF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const s=[],i=Math.floor(a),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):s.push(u)}};return o(r,0),s}e.flatten=t}(V_)),V_}var q_={},sF;function D$(){return sF||(sF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C$(),r=SA(),a=j$(),s=CA();function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i}(q_)),q_}var iF;function Zae(){return iF||(iF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qae(),r=Jae(),a=D$();function s(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s}(F_)),F_}var z_,oF;function ene(){return oF||(oF=1,z_=Zae().sortBy),z_}var tne=ene();const pS=Vd(tne);var A$=e=>e.legend.settings,rne=e=>e.legend.size,ane=e=>e.legend.payload,nne=Bt([ane,A$],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?pS(a,r):a});function sne(){return Mr(nne)}var Hj=1;function T$(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=j.useState({height:0,left:0,top:0,width:0}),a=j.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Hj||Math.abs(o.left-t.left)>Hj||Math.abs(o.top-t.top)>Hj||Math.abs(o.width-t.width)>Hj)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Qi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ine=typeof Symbol=="function"&&Symbol.observable||"@@observable",lF=ine,H_=()=>Math.random().toString(36).substring(7).split("").join("."),one={INIT:`@@redux/INIT${H_()}`,REPLACE:`@@redux/REPLACE${H_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${H_()}`},yw=one;function AA(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function I$(e,t,r){if(typeof e!="function")throw new Error(Qi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qi(1));return r(I$)(e,t)}let a=e,s=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function u(){if(c)throw new Error(Qi(3));return s}function h(b){if(typeof b!="function")throw new Error(Qi(4));if(c)throw new Error(Qi(5));let y=!0;d();const S=l++;return o.set(S,b),function(){if(y){if(c)throw new Error(Qi(6));y=!1,d(),o.delete(S),i=null}}}function f(b){if(!AA(b))throw new Error(Qi(7));if(typeof b.type>"u")throw new Error(Qi(8));if(typeof b.type!="string")throw new Error(Qi(17));if(c)throw new Error(Qi(9));try{c=!0,s=a(s,b)}finally{c=!1}return(i=o).forEach(S=>{S()}),b}function p(b){if(typeof b!="function")throw new Error(Qi(10));a=b,f({type:yw.REPLACE})}function x(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Qi(11));function S(){const k=y;k.next&&k.next(u())}return S(),{unsubscribe:b(S)}},[lF](){return this}}}return f({type:yw.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[lF]:x}}function lne(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:yw.INIT})>"u")throw new Error(Qi(12));if(typeof r(void 0,{type:yw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qi(13))})}function P$(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let s;try{lne(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let u=0;u<a.length;u++){const h=a[u],f=r[h],p=o[h],x=f(p,l);if(typeof x>"u")throw l&&l.type,new Error(Qi(14));d[h]=x,c=c||x!==p}return c=c||a.length!==Object.keys(o).length,c?d:o}}function jw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function cne(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(Qi(15))};const o={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=jw(...l)(s.dispatch),{...s,dispatch:i}}}function O$(e){return AA(e)&&"type"in e&&typeof e.type=="string"}var M$=Symbol.for("immer-nothing"),cF=Symbol.for("immer-draftable"),dc=Symbol.for("immer-state");function Td(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var F0=Object.getPrototypeOf;function Ax(e){return!!e&&!!e[dc]}function lf(e){return e?R$(e)||Array.isArray(e)||!!e[cF]||!!e.constructor?.[cF]||vS(e)||gS(e):!1}var dne=Object.prototype.constructor.toString();function R$(e){if(!e||typeof e!="object")return!1;const t=F0(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===dne}function Nw(e,t){xS(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function xS(e){const t=e[dc];return t?t.type_:Array.isArray(e)?1:vS(e)?2:gS(e)?3:0}function l5(e,t){return xS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function F$(e,t,r){const a=xS(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function une(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function vS(e){return e instanceof Map}function gS(e){return e instanceof Set}function Hp(e){return e.copy_||e.base_}function c5(e,t){if(vS(e))return new Map(e);if(gS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=R$(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[dc];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const o=s[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(F0(e),a)}else{const a=F0(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function TA(e,t=!1){return bS(e)||Ax(e)||!lf(e)||(xS(e)>1&&(e.set=e.add=e.clear=e.delete=hne),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>TA(a,!0))),e}function hne(){Td(2)}function bS(e){return Object.isFrozen(e)}var fne={};function Tx(e){const t=fne[e];return t||Td(0,e),t}var py;function L$(){return py}function mne(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dF(e,t){t&&(Tx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function d5(e){u5(e),e.drafts_.forEach(pne),e.drafts_=null}function u5(e){e===py&&(py=e.parent_)}function uF(e){return py=mne(py,e)}function pne(e){const t=e[dc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[dc].modified_&&(d5(t),Td(4)),lf(e)&&(e=ww(t,e),t.parent_||Sw(t,e)),t.patches_&&Tx("Patches").generateReplacementPatches_(r[dc].base_,e,t.patches_,t.inversePatches_)):e=ww(t,r,[]),d5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==M$?e:void 0}function ww(e,t,r){if(bS(t))return t;const a=t[dc];if(!a)return Nw(t,(s,i)=>fF(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Sw(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,o=!1;a.type_===3&&(i=new Set(s),s.clear(),o=!0),Nw(i,(l,c)=>fF(e,a,s,l,c,r,o)),Sw(e,s,!1),r&&e.patches_&&Tx("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function fF(e,t,r,a,s,i,o){if(Ax(s)){const l=i&&t&&t.type_!==3&&!l5(t.assigned_,a)?i.concat(a):void 0,c=ww(e,s,l);if(F$(r,a,c),Ax(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(lf(s)&&!bS(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ww(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&Sw(e,s)}}function Sw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&TA(t,r)}function xne(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:L$(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=IA;r&&(s=[a],i=xy);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return a.draft_=l,a.revoke_=o,l}var IA={get(e,t){if(t===dc)return e;const r=Hp(e);if(!l5(r,t))return vne(e,r,t);const a=r[t];return e.finalized_||!lf(a)?a:a===W_(e.base_,t)?(G_(e),e.copy_[t]=f5(a,e)):a},has(e,t){return t in Hp(e)},ownKeys(e){return Reflect.ownKeys(Hp(e))},set(e,t,r){const a=B$(Hp(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=W_(Hp(e),t),i=s?.[dc];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(une(r,s)&&(r!==void 0||l5(e.base_,t)))return!0;G_(e),h5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return W_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,G_(e),h5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Hp(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Td(11)},getPrototypeOf(e){return F0(e.base_)},setPrototypeOf(){Td(12)}},xy={};Nw(IA,(e,t)=>{xy[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xy.deleteProperty=function(e,t){return xy.set.call(this,e,t,void 0)};xy.set=function(e,t,r){return IA.set.call(this,e[0],t,r,e[0])};function W_(e,t){const r=e[dc];return(r?Hp(r):e)[t]}function vne(e,t,r){const a=B$(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function B$(e,t){if(!(t in e))return;let r=F0(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=F0(r)}}function h5(e){e.modified_||(e.modified_=!0,e.parent_&&h5(e.parent_))}function G_(e){e.copy_||(e.copy_=c5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gne=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&Td(6),a!==void 0&&typeof a!="function"&&Td(7);let s;if(lf(t)){const i=uF(this),o=f5(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?d5(i):u5(i)}return dF(i,a),hF(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===M$&&(s=void 0),this.autoFreeze_&&TA(s,!0),a){const i=[],o=[];Tx("Patches").generateReplacementPatches_(t,s,i,o),a(i,o)}return s}else Td(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,s;return[this.produce(t,r,(o,l)=>{a=o,s=l}),a,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){lf(e)||Td(8),Ax(e)&&(e=Kh(e));const t=uF(this),r=f5(e,void 0);return r[dc].isManual_=!0,u5(t),r}finishDraft(e,t){const r=e&&e[dc];(!r||!r.isManual_)&&Td(9);const{scope_:a}=r;return dF(a,t),hF(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=Tx("Patches").applyPatches_;return Ax(e)?a(e,t):this.produce(e,s=>a(s,t))}};function f5(e,t){const r=vS(e)?Tx("MapSet").proxyMap_(e,t):gS(e)?Tx("MapSet").proxySet_(e,t):xne(e,t);return(t?t.scope_:L$()).drafts_.push(r),r}function Kh(e){return Ax(e)||Td(10,e),U$(e)}function U$(e){if(!lf(e)||bS(e))return e;const t=e[dc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=c5(e,t.scope_.immer_.useStrictShallowCopy_)}else r=c5(e,!0);return Nw(r,(a,s)=>{F$(r,a,U$(s))}),t&&(t.finalized_=!1),r}var uc=new gne,$$=uc.produce;uc.produceWithPatches.bind(uc);uc.setAutoFreeze.bind(uc);uc.setUseStrictShallowCopy.bind(uc);uc.applyPatches.bind(uc);uc.createDraft.bind(uc);uc.finishDraft.bind(uc);function V$(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var bne=V$(),yne=V$,jne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jw:jw.apply(null,arguments)};function Xc(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(ic(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>O$(a)&&a.type===e,r}var q$=class zb extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zb.prototype)}static get[Symbol.species](){return zb}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zb(...t[0].concat(this)):new zb(...t.concat(this))}};function mF(e){return lf(e)?$$(e,()=>{}):e}function Wj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Nne(e){return typeof e=="boolean"}var wne=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new q$;return r&&(Nne(r)?o.push(bne):o.push(yne(r.extraArgument))),o},Sne="RTK_autoBatch",pF=e=>t=>{setTimeout(t,e)},Cne=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pF(10):e.type==="callback"?e.queueNotification:pF(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const h=()=>s&&u(),f=a.subscribe(h);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){try{return s=!u?.meta?.[Sne],i=!s,i&&(o||(o=!0,c(d))),a.dispatch(u)}finally{s=!0}}})},kne=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new q$(e);return a&&s.push(Cne(typeof a=="object"?a:void 0)),s};function _ne(e){const t=wne(),{reducer:r=void 0,middleware:a,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(AA(r))l=P$(r);else throw new Error(ic(1));let c;typeof a=="function"?c=a(t):c=t();let d=jw;s&&(d=jne({trace:!1,...typeof s=="object"&&s}));const u=cne(...c),h=kne(u);let f=typeof o=="function"?o(h):h();const p=d(...f);return I$(l,i,p)}function z$(e){const t={},r=[];let a;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(ic(28));if(l in t)throw new Error(ic(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function Ene(e){return typeof e=="function"}function Dne(e,t){let[r,a,s]=z$(t),i;if(Ene(e))i=()=>mF(e());else{const l=mF(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...a.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[s]),d.reduce((u,h)=>{if(h)if(Ax(u)){const p=h(u,c);return p===void 0?u:p}else{if(lf(u))return $$(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=i,o}var Ane="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Tne=(e=21)=>{let t="",r=e;for(;r--;)t+=Ane[Math.random()*64|0];return t},Ine=Symbol.for("rtk-slice-createasyncthunk");function Pne(e,t){return`${e}/${t}`}function One({creators:e}={}){const t=e?.asyncThunk?.[Ine];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(ic(11));const o=(typeof a.reducers=="function"?a.reducers(Rne()):a.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,k){const C=typeof w=="string"?w:w.type;if(!C)throw new Error(ic(12));if(C in c.sliceCaseReducersByType)throw new Error(ic(13));return c.sliceCaseReducersByType[C]=k,d},addMatcher(w,k){return c.sliceMatchers.push({matcher:w,reducer:k}),d},exposeAction(w,k){return c.actionCreators[w]=k,d},exposeCaseReducer(w,k){return c.sliceCaseReducersByName[w]=k,d}};l.forEach(w=>{const k=o[w],C={reducerName:w,type:Pne(s,w),createNotation:typeof a.reducers=="function"};Lne(k)?Une(C,k,d,t):Fne(C,k,d)});function u(){const[w={},k=[],C=void 0]=typeof a.extraReducers=="function"?z$(a.extraReducers):[a.extraReducers],D={...w,...c.sliceCaseReducersByType};return Dne(a.initialState,E=>{for(let A in D)E.addCase(A,D[A]);for(let A of c.sliceMatchers)E.addMatcher(A.matcher,A.reducer);for(let A of k)E.addMatcher(A.matcher,A.reducer);C&&E.addDefaultCase(C)})}const h=w=>w,f=new Map,p=new WeakMap;let x;function g(w,k){return x||(x=u()),x(w,k)}function b(){return x||(x=u()),x.getInitialState()}function y(w,k=!1){function C(E){let A=E[w];return typeof A>"u"&&k&&(A=Wj(p,C,b)),A}function D(E=h){const A=Wj(f,k,()=>new WeakMap);return Wj(A,E,()=>{const I={};for(const[L,P]of Object.entries(a.selectors??{}))I[L]=Mne(P,E,()=>Wj(p,E,b),k);return I})}return{reducerPath:w,getSelectors:D,get selectors(){return D(C)},selectSlice:C}}const S={name:s,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...y(i),injectInto(w,{reducerPath:k,...C}={}){const D=k??i;return w.inject({reducerPath:D,reducer:g},C),{...S,...y(D,!0)}}};return S}}function Mne(e,t,r,a){function s(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var ed=One();function Rne(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Fne({type:e,reducerName:t,createNotation:r},a,s){let i,o;if("reducer"in a){if(r&&!Bne(a))throw new Error(ic(17));i=a.reducer,o=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Xc(e,o):Xc(e))}function Lne(e){return e._reducerDefinitionType==="asyncThunk"}function Bne(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Une({type:e,reducerName:t},r,a,s){if(!s)throw new Error(ic(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=s(e,i,u);a.exposeAction(t,h),o&&a.addCase(h.fulfilled,o),l&&a.addCase(h.pending,l),c&&a.addCase(h.rejected,c),d&&a.addMatcher(h.settled,d),a.exposeCaseReducer(t,{fulfilled:o||Gj,pending:l||Gj,rejected:c||Gj,settled:d||Gj})}function Gj(){}var $ne="task",H$="listener",W$="completed",PA="cancelled",Vne=`task-${PA}`,qne=`task-${W$}`,m5=`${H$}-${PA}`,zne=`${H$}-${W$}`,yS=class{constructor(e){this.code=e,this.message=`${$ne} ${PA} (reason: ${e})`}name="TaskAbortError";message},OA=(e,t)=>{if(typeof e!="function")throw new TypeError(ic(32))},Cw=()=>{},G$=(e,t=Cw)=>(e.catch(t),e),Y$=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),px=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},xx=e=>{if(e.aborted){const{reason:t}=e;throw new yS(t)}};function K$(e,t){let r=Cw;return new Promise((a,s)=>{const i=()=>s(new yS(e.reason));if(e.aborted){i();return}r=Y$(e,i),t.finally(()=>r()).then(a,s)}).finally(()=>{r=Cw})}var Hne=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof yS?"cancelled":"rejected",error:r}}finally{t?.()}},kw=e=>t=>G$(K$(e,t).then(r=>(xx(e),r))),X$=e=>{const t=kw(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:p0}=Object,xF={},jS="listenerMiddleware",Wne=(e,t)=>{const r=a=>Y$(e,()=>px(a,e.reason));return(a,s)=>{OA(a);const i=new AbortController;r(i);const o=Hne(async()=>{xx(e),xx(i.signal);const l=await a({pause:kw(i.signal),delay:X$(i.signal),signal:i.signal});return xx(i.signal),l},()=>px(i,qne));return s?.autoJoin&&t.push(o.catch(Cw)),{result:kw(e)(o),cancel(){px(i,Vne)}}}},Gne=(e,t)=>{const r=async(a,s)=>{xx(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:a,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{u(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await K$(t,Promise.race(l));return xx(t),c}finally{i()}};return(a,s)=>G$(r(a,s))},Q$=e=>{let{type:t,actionCreator:r,matcher:a,predicate:s,effect:i}=e;if(t)s=Xc(t).match;else if(r)t=r.type,s=r.match;else if(a)s=a;else if(!s)throw new Error(ic(21));return OA(i),{predicate:s,type:t,effect:i}},J$=p0(e=>{const{type:t,predicate:r,effect:a}=Q$(e);return{id:Tne(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ic(22))}}},{withTypes:()=>J$}),vF=(e,t)=>{const{type:r,effect:a,predicate:s}=Q$(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===a)},p5=e=>{e.pending.forEach(t=>{px(t,m5)})},Yne=e=>()=>{e.forEach(p5),e.clear()},gF=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},Z$=p0(Xc(`${jS}/add`),{withTypes:()=>Z$}),Kne=Xc(`${jS}/removeAll`),eV=p0(Xc(`${jS}/remove`),{withTypes:()=>eV}),Xne=(...e)=>{console.error(`${jS}/error`,...e)},c1=(e={})=>{const t=new Map,{extra:r,onError:a=Xne}=e;OA(a);const s=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h?.cancelActive&&p5(u)}),i=u=>{const h=vF(t,u)??J$(u);return s(h)};p0(i,{withTypes:()=>i});const o=u=>{const h=vF(t,u);return h&&(h.unsubscribe(),u.cancelActive&&p5(h)),!!h};p0(o,{withTypes:()=>o});const l=async(u,h,f,p)=>{const x=new AbortController,g=Gne(i,x.signal),b=[];try{u.pending.add(x),await Promise.resolve(u.effect(h,p0({},f,{getOriginalState:p,condition:(y,S)=>g(y,S).then(Boolean),take:g,delay:X$(x.signal),pause:kw(x.signal),extra:r,signal:x.signal,fork:Wne(x.signal,b),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,S,w)=>{y!==x&&(px(y,m5),w.delete(y))})},cancel:()=>{px(x,m5),u.pending.delete(x)},throwIfCancelled:()=>{xx(x.signal)}})))}catch(y){y instanceof yS||gF(a,y,{raisedBy:"effect"})}finally{await Promise.all(b),px(x,zne),u.pending.delete(x)}},c=Yne(t);return{middleware:u=>h=>f=>{if(!O$(f))return h(f);if(Z$.match(f))return i(f.payload);if(Kne.match(f)){c();return}if(eV.match(f))return o(f.payload);let p=u.getState();const x=()=>{if(p===xF)throw new Error(ic(23));return p};let g;try{if(g=h(f),t.size>0){const b=u.getState(),y=Array.from(t.values());for(const S of y){let w=!1;try{w=S.predicate(f,b,p)}catch(k){w=!1,gF(a,k,{raisedBy:"predicate"})}w&&l(S,f,u,x)}}}finally{p=xF}return g},startListening:i,stopListening:o,clearListeners:c}};function ic(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Qne={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},tV=ed({name:"chartLayout",initialState:Qne,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Jne,setLayout:Zne,setChartSize:ese,setScale:tse}=tV.actions,rse=tV.reducer;function bF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(r),!0).forEach(function(a){ase(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ase(e,t,r){return(t=nse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nse(e){var t=sse(e,"string");return typeof t=="symbol"?t:t+""}function sse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _w=Math.PI/180,ise=e=>e*180/Math.PI,ci=(e,t,r,a)=>({x:e+Math.cos(-_w*a)*r,y:t+Math.sin(-_w*a)*r}),rV=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},ose=(e,t)=>{var{x:r,y:a}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(a-i)**2)},lse=(e,t)=>{var{x:r,y:a}=e,{cx:s,cy:i}=t,o=ose({x:r,y:a},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:ise(c),angleInRadian:c}},cse=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(a,s);return{startAngle:t-i*360,endAngle:r-i*360}},dse=(e,t)=>{var{startAngle:r,endAngle:a}=t,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return e+o*360},use=(e,t)=>{var{x:r,y:a}=e,{radius:s,angle:i}=lse({x:r,y:a},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=cse(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?yF(yF({},t),{},{radius:s,angle:dse(u,t)}):null};function jF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jF(Object(r),!0).forEach(function(a){hse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hse(e,t,r){return(t=fse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fse(e){var t=mse(e,"string");return typeof t=="symbol"?t:t+""}function mse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qn(e,t,r){return Rn(e)||Rn(t)?r:Xu(t)?Hm(e,t,r):typeof t=="function"?t(e):r}var pse=(e,t,r,a,s)=>{var i,o=-1,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(Mi(u-d)!==Mi(h-u)){var p=[];if(Mi(h-u)===Mi(s[1]-s[0])){f=h;var x=u+s[1]-s[0];p[0]=Math.min(x,(x+d)/2),p[1]=Math.max(x,(x+d)/2)}else{f=d;var g=h+s[1]-s[0];p[0]=Math.min(u,(g+u)/2),p[1]=Math.max(u,(g+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,h),S=Math.max(d,h);if(e>(y+u)/2&&e<=(S+u)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},xse=(e,t,r)=>{if(t&&r){var{width:a,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Cr(e[i]))return qc(qc({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Cr(e[o]))return qc(qc({},e),{},{[o]:e[o]+(s||0)})}return e},mf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",aV=(e,t,r,a)=>{if(a)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},nV=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var x=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=s==="category"&&o.bandwidth?o.bandwidth()/x:0;if(g=p==="angleAxis"&&i&&i.length>=2?Mi(i[0]-i[1])*2*g:g,h||f){var b=(h||f||[]).map((y,S)=>{var w=a?a.indexOf(y):y;return{coordinate:o(w)+g,value:y,offset:g,index:S}});return b.filter(y=>!Nl(y.coordinate))}return c&&d?d.map((y,S)=>({coordinate:o(y)+g,value:y,index:S,offset:g})):o.ticks&&u!=null?o.ticks(u).map((y,S)=>({coordinate:o(y)+g,value:y,offset:g,index:S})):o.domain().map((y,S)=>({coordinate:o(y)+g,value:a?a[y]:y,index:S,offset:g}))},NF=1e-4,vse=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),s=Math.min(a[0],a[1])-NF,i=Math.max(a[0],a[1])+NF,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},gse=(e,t)=>{if(!t||t.length!==2||!Cr(t[0])||!Cr(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Cr(e[0])||e[0]<r)&&(s[0]=r),(!Cr(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},bse=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0,o=0;o<t;++o){var l=Nl(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},yse=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0;i<t;++i){var o=Nl(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},jse={sign:bse,expand:Qre,none:R0,silhouette:Jre,wiggle:Zre,positive:yse},Nse=(e,t,r)=>{var a=jse[r],s=Xre().keys(t).value((i,o)=>+qn(i,o,0)).order(s5).offset(a);return s(e)};function MA(e){return e==null?void 0:String(e)}function wF(e){var{axis:t,ticks:r,bandSize:a,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Rn(s[t.dataKey])){var l=ZU(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=qn(s,Rn(o)?t.dataKey:o);return Rn(c)?null:t.scale(c)}var SF=e=>{var{axis:t,ticks:r,offset:a,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+a:null;var l=qn(i,t.dataKey,t.scale.domain()[o]);return Rn(l)?null:t.scale(l)-s/2+a},wse=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},Sse=e=>{var t=e.flat(2).filter(Cr);return[Math.min(...t),Math.max(...t)]},Cse=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],kse=(e,t,r)=>{if(e!=null)return Cse(Object.keys(e).reduce((a,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Sse(d.slice(t,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},CF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vy=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var s=pS(t,u=>u.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function _F(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:s,name:i}=e;return qc(qc({},t),{},{dataKey:r,payload:a,value:s,name:i})}function ug(e,t){if(e)return String(e);if(typeof t=="string")return t}function _se(e,t,r,a,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return a?use({x:e,y:t},a):null}var Ese=(e,t,r,a)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=a;return qc(qc(qc({},a),ci(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=a;return qc(qc(qc({},a),ci(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},Dse=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,pf=e=>e.layout.width,xf=e=>e.layout.height,Ase=e=>e.layout.scale,sV=e=>e.layout.margin,RA=Bt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),FA=Bt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),iV="data-recharts-item-index",oV="data-recharts-item-data-key",NS=60;function EF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EF(Object(r),!0).forEach(function(a){Tse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Tse(e,t,r){return(t=Ise(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ise(e){var t=Pse(e,"string");return typeof t=="symbol"?t:t+""}function Pse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ose=e=>e.brush.height,Ni=Bt([pf,xf,sV,Ose,RA,FA,A$,rne],(e,t,r,a,s,i,o,l)=>{var c=i.reduce((x,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:NS;return gm(gm({},x),{},{[b]:x[b]+y})}return x},{left:r.left||0,right:r.right||0}),d=s.reduce((x,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?gm(gm({},x),{},{[b]:Hm(x,"".concat(b))+g.height}):x},{top:r.top||0,bottom:r.bottom||0}),u=gm(gm({},d),c),h=u.bottom;u.bottom+=a,u=xse(u,o,l);var f=e-u.left-u.right,p=t-u.top-u.bottom;return gm(gm({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),Mse=Bt(Ni,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),lV=Bt(pf,xf,(e,t)=>({x:0,y:0,width:e,height:t})),Rse=j.createContext(null),Jo=()=>j.useContext(Rse)!=null,wS=e=>e.brush,SS=Bt([wS,Ni,sV],(e,t,r)=>({height:e.height,x:Cr(e.x)?e.x:t.left,y:Cr(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Cr(e.width)?e.width:t.width})),LA=()=>{var e,t=Jo(),r=Mr(Mse),a=Mr(SS),s=(e=Mr(wS))===null||e===void 0?void 0:e.padding;return!t||!a||!s?r:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},Fse={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},cV=()=>{var e;return(e=Mr(Ni))!==null&&e!==void 0?e:Fse},BA=()=>Mr(pf),UA=()=>Mr(xf),Lse={top:0,right:0,bottom:0,left:0},Bse=()=>{var e;return(e=Mr(t=>t.layout.margin))!==null&&e!==void 0?e:Lse},tn=e=>e.layout.layoutType,CS=()=>Mr(tn),Use={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},dV=ed({name:"legend",initialState:Use,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Kh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:DF,setLegendSettings:$se,addLegendPayload:uV,removeLegendPayload:hV}=dV.actions,Vse=dV.reducer,qse=["contextPayload"];function x5(){return x5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x5.apply(null,arguments)}function AF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function L0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AF(Object(r),!0).forEach(function(a){$A(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $A(e,t,r){return(t=zse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zse(e){var t=Hse(e,"string");return typeof t=="symbol"?t:t+""}function Hse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wse(e,t){if(e==null)return{};var r,a,s=Gse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Gse(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Yse(e){return e.value}function Kse(e){var{contextPayload:t}=e,r=Wse(e,qse),a=k$(t,e.payloadUniqBy,Yse),s=L0(L0({},r),{},{payload:a});return j.isValidElement(e.content)?j.cloneElement(e.content,s):typeof e.content=="function"?j.createElement(e.content,s):j.createElement(wA,s)}function Xse(e,t,r,a,s,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((a||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((s||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),L0(L0({},d),u)}function Qse(e){var t=rs();return j.useEffect(()=>{t($se(e))},[t,e]),null}function Jse(e){var t=rs();return j.useEffect(()=>(t(DF(e)),()=>{t(DF({width:0,height:0}))}),[t,e]),null}function Zse(e){var t=sne(),r=yre(),a=Bse(),{width:s,height:i,wrapperStyle:o,portal:l}=e,[c,d]=T$([t]),u=BA(),h=UA(),f=u-(a.left||0)-(a.right||0),p=ax.getWidthOrHeight(e.layout,i,s,f),x=l?o:L0(L0({position:"absolute",width:p?.width||s||"auto",height:p?.height||i||"auto"},Xse(o,e,a,u,h,c)),o),g=l??r;if(g==null)return null;var b=j.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:d},j.createElement(Qse,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),j.createElement(Jse,{width:c.width,height:c.height}),j.createElement(Kse,x5({},e,p,{margin:a,chartWidth:u,chartHeight:h,contextPayload:t})));return a1.createPortal(b,g)}class ax extends j.PureComponent{static getWidthOrHeight(t,r,a,s){return t==="vertical"&&Cr(r)?{height:r}:t==="horizontal"?{width:a||s}:null}render(){return j.createElement(Zse,this.props)}}$A(ax,"displayName","Legend");$A(ax,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function v5(){return v5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},v5.apply(null,arguments)}function TF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(r),!0).forEach(function(a){eie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eie(e,t,r){return(t=tie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tie(e){var t=rie(e,"string");return typeof t=="symbol"?t:t+""}function rie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aie(e){return Array.isArray(e)&&Xu(e[0])&&Xu(e[1])?e.join(" ~ "):e}var nie=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(i&&i.length){var C={padding:0,margin:0},D=(l?pS(i,l):i).map((E,A)=>{if(E.type==="none")return null;var I=E.formatter||o||aie,{value:L,name:P}=E,O=L,Y=P;if(I){var q=I(L,P,E,A,i);if(Array.isArray(q))[O,Y]=q;else if(q!=null)O=q;else return null}var K=Y_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},a);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:K},Xu(Y)?j.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Xu(Y)?j.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,j.createElement("span",{className:"recharts-tooltip-item-value"},O),j.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:C},D)}return null},x=Y_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=Y_({margin:0},s),b=!Rn(u),y=b?u:"",S=ia("recharts-default-tooltip",c),w=ia("recharts-tooltip-label",d);b&&h&&i!==void 0&&i!==null&&(y=h(u,i));var k=f?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",v5({className:S,style:x},k),j.createElement("p",{className:w,style:g},j.isValidElement(y)?y:"".concat(y)),p())},jb="recharts-tooltip-wrapper",sie={visibility:"hidden"};function iie(e){var{coordinate:t,translateX:r,translateY:a}=e;return ia(jb,{["".concat(jb,"-right")]:Cr(r)&&t&&Cr(t.x)&&r>=t.x,["".concat(jb,"-left")]:Cr(r)&&t&&Cr(t.x)&&r<t.x,["".concat(jb,"-bottom")]:Cr(a)&&t&&Cr(t.y)&&a>=t.y,["".concat(jb,"-top")]:Cr(a)&&t&&Cr(t.y)&&a<t.y})}function IF(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Cr(i[a]))return i[a];var u=r[a]-l-(s>0?s:0),h=r[a]+s;if(t[a])return o[a]?u:h;var f=c[a];if(f==null)return 0;if(o[a]){var p=u,x=f;return p<x?Math.max(h,f):Math.max(u,f)}if(d==null)return 0;var g=h+l,b=f+d;return g>b?Math.max(u,f):Math.max(h,f)}function oie(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function lie(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=IF({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=IF({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=oie({translateX:u,translateY:h,useTranslate3d:l})):d=sie,{cssProperties:d,cssClasses:iie({translateX:u,translateY:h,coordinate:r})}}function PF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PF(Object(r),!0).forEach(function(a){g5(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function g5(e,t,r){return(t=cie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cie(e){var t=die(e,"string");return typeof t=="symbol"?t:t+""}function die(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uie extends j.PureComponent{constructor(){super(...arguments),g5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),g5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:x,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:S,cssProperties:w}=lie({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:g.height,width:g.width},useTranslate3d:f,viewBox:p}),k=y?{}:Yj(Yj({transition:c&&t?"transform ".concat(a,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),C=Yj(Yj({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},x);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:C,ref:b},i)}}var hie=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Hx={isSsr:hie()},fV=()=>Mr(e=>e.rootProps.accessibilityLayer);function so(e){return Number.isFinite(e)}function B0(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function b5(){return b5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},b5.apply(null,arguments)}function OF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function MF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(r),!0).forEach(function(a){fie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fie(e,t,r){return(t=mie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mie(e){var t=pie(e,"string");return typeof t=="symbol"?t:t+""}function pie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RF={curveBasisClosed:Bre,curveBasisOpen:Ure,curveBasis:Lre,curveBumpX:Sre,curveBumpY:Cre,curveLinearClosed:$re,curveLinear:fS,curveMonotoneX:Vre,curveMonotoneY:qre,curveNatural:zre,curveStep:Hre,curveStepAfter:Gre,curveStepBefore:Wre},Kj=e=>so(e.x)&&so(e.y),Nb=e=>e.x,wb=e=>e.y,xie=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(i1(e));return(r==="curveMonotone"||r==="curveBump")&&t?RF["".concat(r).concat(t==="vertical"?"Y":"X")]:RF[r]||fS},vie=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:s,connectNulls:i=!1}=e,o=xie(t,s),l=i?r.filter(Kj):r,c;if(Array.isArray(a)){var d=i?a.filter(h=>Kj(h)):a,u=l.map((h,f)=>MF(MF({},h),{},{base:d[f]}));return s==="vertical"?c=qj().y(wb).x1(Nb).x0(h=>h.base.x):c=qj().x(Nb).y1(wb).y0(h=>h.base.y),c.defined(Kj).curve(o),c(u)}return s==="vertical"&&Cr(a)?c=qj().y(wb).x1(Nb).x0(a):Cr(a)?c=qj().x(Nb).y1(wb).y0(a):c=l$().x(Nb).y(wb),c.defined(Kj).curve(o),c(l)},Jb=e=>{var{className:t,points:r,path:a,pathRef:s}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?vie(e):a;return j.createElement("path",b5({},Ma(e,!1),xA(e),{className:ia("recharts-curve",t),d:i===null?void 0:i,ref:s}))},gie=["x","y","top","left","width","height","className"];function y5(){return y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y5.apply(null,arguments)}function FF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FF(Object(r),!0).forEach(function(a){yie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yie(e,t,r){return(t=jie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jie(e){var t=Nie(e,"string");return typeof t=="symbol"?t:t+""}function Nie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wie(e,t){if(e==null)return{};var r,a,s=Sie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Sie(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Cie=(e,t,r,a,s,i)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),kie=e=>{var{x:t=0,y:r=0,top:a=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=wie(e,gie),d=bie({x:t,y:r,top:a,left:s,width:i,height:o},c);return!Cr(t)||!Cr(r)||!Cr(i)||!Cr(o)||!Cr(a)||!Cr(s)?null:j.createElement("path",y5({},Ma(d,!0),{className:ia("recharts-cross",l),d:Cie(t,r,i,o,a,s)}))};function _ie(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function LF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Eie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LF(Object(r),!0).forEach(function(a){Die(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Die(e,t,r){return(t=Aie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aie(e){var t=Tie(e,"string");return typeof t=="symbol"?t:t+""}function Tie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function td(e,t){var r=Eie({},e),a=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),r);return i}var K_={},X_={},Q_={},BF;function Iie(){return BF||(BF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(Q_)),Q_}var UF;function Pie(){return UF||(UF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iie(),r=w$(),a=_A(),s=EA(),i=CA();function o(d,u,h){return l(d,u,void 0,void 0,void 0,void 0,h)}function l(d,u,h,f,p,x,g){const b=g(d,u,h,f,p,x);if(b!==void 0)return b;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,x,g)}return c(d,u,x,g)}function c(d,u,h,f){if(Object.is(d,u))return!0;let p=a.getTag(d),x=a.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),x===s.argumentsTag&&(x=s.objectTag),p!==x)return!1;switch(p){case s.stringTag:return d.toString()===u.toString();case s.numberTag:{const y=d.valueOf(),S=u.valueOf();return i.eq(y,S)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(d.valueOf(),u.valueOf());case s.regexpTag:return d.source===u.source&&d.flags===u.flags;case s.functionTag:return d===u}h=h??new Map;const g=h.get(d),b=h.get(u);if(g!=null&&b!=null)return g===u;h.set(d,u),h.set(u,d);try{switch(p){case s.mapTag:{if(d.size!==u.size)return!1;for(const[y,S]of d.entries())if(!u.has(y)||!l(S,u.get(y),y,d,u,h,f))return!1;return!0}case s.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),S=Array.from(u.values());for(let w=0;w<y.length;w++){const k=y[w],C=S.findIndex(D=>l(k,D,void 0,d,u,h,f));if(C===-1)return!1;S.splice(C,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,h,f))return!1;return!0}case s.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case s.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case s.errorTag:return d.name===u.name&&d.message===u.message;case s.objectTag:{if(!(c(d.constructor,u.constructor,h,f)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const S=[...Object.keys(d),...r.getSymbols(d)],w=[...Object.keys(u),...r.getSymbols(u)];if(S.length!==w.length)return!1;for(let k=0;k<S.length;k++){const C=S[k],D=d[C];if(!Object.hasOwn(u,C))return!1;const E=u[C];if(!l(D,E,C,d,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=o}(X_)),X_}var J_={},$F;function Oie(){return $F||($F=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(J_)),J_}var VF;function Mie(){return VF||(VF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pie(),r=Oie();function a(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=a}(K_)),K_}var Z_,qF;function Rie(){return qF||(qF=1,Z_=Mie().isEqual),Z_}var Fie=Rie();const Lie=Vd(Fie);function Bie(e){var t={},r=()=>null,a=!1,s=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,d),c);return}i(c),s=e.setTimeout(i.bind(null,d));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var Ew=1e-4,mV=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],pV=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),zF=(e,t)=>r=>{var a=mV(e,t);return pV(a,r)},Uie=(e,t)=>r=>{var a=mV(e,t),s=[...a.map((i,o)=>i*o).slice(1),0];return pV(s,r)},HF=function(){for(var t,r,a,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,r,s]=[0,0,1,1];break;case"ease":[t,a,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,s]=[.42,0,1,1];break;case"ease-out":[t,a,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,r,s]=c[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else o.length===4&&([t,a,r,s]=o);var d=zF(t,r),u=zF(a,s),h=Uie(t,r),f=x=>x>1?1:x<0?0:x,p=x=>{for(var g=x>1?1:x,b=g,y=0;y<8;++y){var S=d(b)-g,w=h(b);if(Math.abs(S-g)<Ew||w<Ew)return u(b);b=f(b-S/w)}return u(b)};return p.isStepper=!1,p},$ie=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:s=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*a,h=c+(d-u)*s/1e3,f=c*s/1e3+o;return Math.abs(f-l)<Ew&&Math.abs(h)<Ew?[l,0]:[f,h]};return i.isStepper=!0,i.dt=s,i},Vie=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HF(e);case"spring":return $ie();default:if(e.split("(")[0]==="cubic-bezier")return HF(e)}return typeof e=="function"?e:null};function WF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function GF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WF(Object(r),!0).forEach(function(a){qie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qie(e,t,r){return(t=zie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zie(e){var t=Hie(e,"string");return typeof t=="symbol"?t:t+""}function Hie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wie=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Gie=(e,t,r)=>e.map(a=>"".concat(Wie(a)," ").concat(t,"ms ").concat(r)).join(","),Yie=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(s=>a.includes(s))),gy=(e,t)=>Object.keys(t).reduce((r,a)=>GF(GF({},r),{},{[a]:e(a,t[a])}),{});function YF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YF(Object(r),!0).forEach(function(a){Kie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kie(e,t,r){return(t=Xie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xie(e){var t=Qie(e,"string");return typeof t=="symbol"?t:t+""}function Qie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dw=(e,t,r)=>e+(t-e)*r,j5=e=>{var{from:t,to:r}=e;return t!==r},xV=(e,t,r)=>{var a=gy((s,i)=>{if(j5(i)){var[o,l]=e(i.from,i.to,i.velocity);return Zi(Zi({},i),{},{from:o,velocity:l})}return i},t);return r<1?gy((s,i)=>j5(i)?Zi(Zi({},i),{},{velocity:Dw(i.velocity,a[s].velocity,r),from:Dw(i.from,a[s].from,r)}):i,t):xV(e,a,r-1)};function Jie(e,t,r,a,s,i){var o,l=a.reduce((f,p)=>Zi(Zi({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>gy((f,p)=>p.from,l),d=()=>!Object.values(l).filter(j5).length,u=null,h=f=>{o||(o=f);var p=f-o,x=p/r.dt;l=xV(r,l,x),s(Zi(Zi(Zi({},e),t),c())),o=f,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function Zie(e,t,r,a,s,i,o){var l=null,c=s.reduce((h,f)=>Zi(Zi({},h),{},{[f]:[e[f],t[f]]}),{}),d,u=h=>{d||(d=h);var f=(h-d)/a,p=gy((g,b)=>Dw(...b,r(f)),c);if(i(Zi(Zi(Zi({},e),t),p)),f<1)l=o.setTimeout(u);else{var x=gy((g,b)=>Dw(...b,r(1)),c);i(Zi(Zi(Zi({},e),t),x))}};return()=>(l=o.setTimeout(u),()=>{l()})}const eoe=(e,t,r,a,s,i)=>{var o=Yie(e,t);return r.isStepper===!0?Jie(e,t,r,o,s,i):Zie(e,t,r,a,o,s,i)};class toe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,i=o=>{o-a>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var roe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function N5(){return N5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},N5.apply(null,arguments)}function aoe(e,t){if(e==null)return{};var r,a,s=noe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function noe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function KF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KF(Object(r),!0).forEach(function(a){nx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KF(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nx(e,t,r){return(t=soe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function soe(e){var t=ioe(e,"string");return typeof t=="symbol"?t:t+""}function ioe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ooe(){return Bie(new toe)}class VA extends j.PureComponent{constructor(t,r){super(t,r),nx(this,"mounted",!1),nx(this,"manager",null),nx(this,"stopJSAnimation",null),nx(this,"unSubscribe",null);var{isActive:a,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!r){var d={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(d);return}if(!(Lie(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?l:t.to;if(this.state&&c){var f={style:s?{[s]:h}:h};(s&&c[s]!==h||!s&&c!==h)&&this.setState(f)}this.runAnimation(bm(bm({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=eoe(r,a,Vie(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,s,l])}runAnimation(t){var{begin:r,duration:a,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=Gie(Object.keys(u),a,o);this.manager.start([l,r,bm(bm({},u),{},{transition:h}),a,c])}render(){var t=this.props,{children:r,begin:a,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:p,animationManager:x}=t,g=aoe(t,roe),b=j.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||b===0||s<=0)return r;var S=w=>{var{style:k={},className:C}=w.props,D=j.cloneElement(w,bm(bm({},g),{},{style:bm(bm({},k),y),className:C}));return D};return b===1?S(j.Children.only(r)):j.createElement("div",null,j.Children.map(r,w=>S(w)))}}nx(VA,"displayName","Animate");nx(VA,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var loe=j.createContext(null);function Wm(e){var t,r,a=j.useContext(loe);return j.createElement(VA,N5({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:a)!==null&&t!==void 0?t:ooe()}))}function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Aw.apply(null,arguments)}var XF=(e,t,r,a,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),o=a>=0?1:-1,l=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0,d;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>i?i:s[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+a-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+a)),d+="L ".concat(e+l*u[3],",").concat(t+a),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*u[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);d="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,`
            L `).concat(e+r-l*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+a-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+a,`
            L `).concat(e+l*p,",").concat(t+a,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*p," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},coe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vV=e=>{var t=td(e,coe),r=j.useRef(null),[a,s]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:x,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var b=ia("recharts-rectangle",u);return g?j.createElement(Wm,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:g},y=>{var{width:S,height:w,x:k,y:C}=y;return j.createElement(Wm,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:x,easing:h},j.createElement("path",Aw({},Ma(t,!0),{className:b,d:XF(k,C,S,w,d),ref:r})))}):j.createElement("path",Aw({},Ma(t,!0),{className:b,d:XF(i,o,l,c,d)}))};function gV(e){var{cx:t,cy:r,radius:a,startAngle:s,endAngle:i}=e,o=ci(t,r,a,s),l=ci(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function w5(){return w5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w5.apply(null,arguments)}var doe=(e,t)=>{var r=Mi(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},Xj=e=>{var{cx:t,cy:r,radius:a,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+a,u=Math.asin(l/d)/_w,h=c?s:s+i*u,f=ci(t,r,d,h),p=ci(t,r,a,h),x=c?s-i*u:s,g=ci(t,r,d*Math.cos(u*_w),x);return{center:f,circleTangency:p,lineTangency:g,theta:u}},bV=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:i,endAngle:o}=e,l=doe(i,o),c=i+l,d=ci(t,r,s,i),u=ci(t,r,s,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var f=ci(t,r,a,i),p=ci(t,r,a,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},uoe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=Mi(d-c),{circleTangency:h,lineTangency:f,theta:p}=Xj({cx:t,cy:r,radius:s,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:x,lineTangency:g,theta:b}=Xj({cx:t,cy:r,radius:s,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-p-b;if(y<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):bV({cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:c,endAngle:d});var S="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var{circleTangency:w,lineTangency:k,theta:C}=Xj({cx:t,cy:r,radius:a,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:D,lineTangency:E,theta:A}=Xj({cx:t,cy:r,radius:a,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),I=l?Math.abs(c-d):Math.abs(c-d)-C-A;if(I<0&&i===0)return"".concat(S,"L").concat(t,",").concat(r,"Z");S+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else S+="L".concat(t,",").concat(r,"Z");return S},hoe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yV=e=>{var t=td(e,hoe),{cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<s||d===u)return null;var f=ia("recharts-sector",h),p=i-s,x=Xo(o,p,0,!0),g;return x>0&&Math.abs(d-u)<360?g=uoe({cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(x,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):g=bV({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),j.createElement("path",w5({},Ma(t,!0),{className:f,d:g}))};function foe(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,f=ci(l,c,d,h),p=ci(l,c,u,h);a=f.x,s=f.y,i=p.x,o=p.y}else return gV(t);return[{x:a,y:s},{x:i,y:o}]}var eE={},tE={},rE={},QF;function moe(){return QF||(QF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E$();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(rE)),rE}var JF;function poe(){return JF||(JF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=moe();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(tE)),tE}var ZF;function xoe(){return ZF||(ZF=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D$(),r=poe();function a(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=a}(eE)),eE}var aE,eL;function voe(){return eL||(eL=1,aE=xoe().range),aE}var goe=voe();const jV=Vd(goe);function Fm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function boe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qA(e){let t,r,a;e.length!==2?(t=Fm,r=(l,c)=>Fm(e(l),c),a=(l,c)=>e(l)-c):(t=e===Fm||e===boe?e:yoe,r=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&a(l[h-1],c)>-a(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function yoe(){return 0}function NV(e){return e===null?NaN:+e}function*joe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Noe=qA(Fm),d1=Noe.right;qA(NV).center;class tL extends Map{constructor(t,r=Coe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(rL(this,t))}has(t){return super.has(rL(this,t))}set(t,r){return super.set(woe(this,t),r)}delete(t){return super.delete(Soe(this,t))}}function rL({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function woe({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function Soe({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function Coe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function koe(e=Fm){if(e===Fm)return wV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function wV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _oe=Math.sqrt(50),Eoe=Math.sqrt(10),Doe=Math.sqrt(2);function Tw(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=_oe?10:i>=Eoe?5:i>=Doe?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?Tw(e,t,r*2):[l,c,d]}function S5(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?Tw(t,e,r):Tw(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function C5(e,t,r){return t=+t,e=+e,r=+r,Tw(e,t,r)[2]}function k5(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?C5(t,e,r):C5(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function aL(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function nL(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function SV(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?wV:koe(s);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*h/c+f)),x=Math.min(a,Math.floor(t+(c-d)*h/c+f));SV(e,t,p,x,s)}const i=e[t];let o=r,l=a;for(Sb(e,r,t),s(e[a],i)>0&&Sb(e,r,a);o<l;){for(Sb(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Sb(e,r,l):(++l,Sb(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Sb(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function Aoe(e,t,r){if(e=Float64Array.from(joe(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return nL(e);if(t>=1)return aL(e);var a,s=(a-1)*t,i=Math.floor(s),o=aL(SV(e,i).subarray(0,i+1)),l=nL(e.subarray(i+1));return o+(l-o)*(s-i)}}function Toe(e,t,r=NV){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function Ioe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function rd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _5=Symbol("implicit");function zA(){var e=new tL,t=[],r=[],a=_5;function s(i){let o=e.get(i);if(o===void 0){if(a!==_5)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new tL;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return zA(t,r).unknown(a)},rd.apply(s,arguments),s}function HA(){var e=zA().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<a,x=p?s:a,g=p?a:s;i=(g-x)/Math.max(1,f-c+d*2),l&&(i=Math.floor(i)),x+=(g-x-i*(f-c))*u,o=i*(1-c),l&&(x=Math.round(x),o=Math.round(o));var b=Ioe(f).map(function(y){return x+i*y});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([a,s]=f,a=+a,s=+s,h()):[a,s]},e.rangeRound=function(f){return[a,s]=f,a=+a,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return HA(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},rd.apply(h(),arguments)}function CV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CV(t())},e}function Poe(){return CV(HA.apply(null,arguments).paddingInner(1))}function WA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kV(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function u1(){}var by=.7,Iw=1/by,x0="\\s*([+-]?\\d+)\\s*",yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ooe=/^#([0-9a-f]{3,8})$/,Moe=new RegExp(`^rgb\\(${x0},${x0},${x0}\\)$`),Roe=new RegExp(`^rgb\\(${qu},${qu},${qu}\\)$`),Foe=new RegExp(`^rgba\\(${x0},${x0},${x0},${yy}\\)$`),Loe=new RegExp(`^rgba\\(${qu},${qu},${qu},${yy}\\)$`),Boe=new RegExp(`^hsl\\(${yy},${qu},${qu}\\)$`),Uoe=new RegExp(`^hsla\\(${yy},${qu},${qu},${yy}\\)$`),sL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WA(u1,jy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iL,formatHex:iL,formatHex8:$oe,formatHsl:Voe,formatRgb:oL,toString:oL});function iL(){return this.rgb().formatHex()}function $oe(){return this.rgb().formatHex8()}function Voe(){return _V(this).formatHsl()}function oL(){return this.rgb().formatRgb()}function jy(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Ooe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?lL(t):r===3?new vl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Qj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Qj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Moe.exec(e))?new vl(t[1],t[2],t[3],1):(t=Roe.exec(e))?new vl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Foe.exec(e))?Qj(t[1],t[2],t[3],t[4]):(t=Loe.exec(e))?Qj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Boe.exec(e))?uL(t[1],t[2]/100,t[3]/100,1):(t=Uoe.exec(e))?uL(t[1],t[2]/100,t[3]/100,t[4]):sL.hasOwnProperty(e)?lL(sL[e]):e==="transparent"?new vl(NaN,NaN,NaN,0):null}function lL(e){return new vl(e>>16&255,e>>8&255,e&255,1)}function Qj(e,t,r,a){return a<=0&&(e=t=r=NaN),new vl(e,t,r,a)}function qoe(e){return e instanceof u1||(e=jy(e)),e?(e=e.rgb(),new vl(e.r,e.g,e.b,e.opacity)):new vl}function E5(e,t,r,a){return arguments.length===1?qoe(e):new vl(e,t,r,a??1)}function vl(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}WA(vl,E5,kV(u1,{brighter(e){return e=e==null?Iw:Math.pow(Iw,e),new vl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?by:Math.pow(by,e),new vl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vl(vx(this.r),vx(this.g),vx(this.b),Pw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cL,formatHex:cL,formatHex8:zoe,formatRgb:dL,toString:dL}));function cL(){return`#${sx(this.r)}${sx(this.g)}${sx(this.b)}`}function zoe(){return`#${sx(this.r)}${sx(this.g)}${sx(this.b)}${sx((isNaN(this.opacity)?1:this.opacity)*255)}`}function dL(){const e=Pw(this.opacity);return`${e===1?"rgb(":"rgba("}${vx(this.r)}, ${vx(this.g)}, ${vx(this.b)}${e===1?")":`, ${e})`}`}function Pw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sx(e){return e=vx(e),(e<16?"0":"")+e.toString(16)}function uL(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Id(e,t,r,a)}function _V(e){if(e instanceof Id)return new Id(e.h,e.s,e.l,e.opacity);if(e instanceof u1||(e=jy(e)),!e)return new Id;if(e instanceof Id)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Id(o,l,c,e.opacity)}function Hoe(e,t,r,a){return arguments.length===1?_V(e):new Id(e,t,r,a??1)}function Id(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}WA(Id,Hoe,kV(u1,{brighter(e){return e=e==null?Iw:Math.pow(Iw,e),new Id(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?by:Math.pow(by,e),new Id(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new vl(nE(e>=240?e-240:e+120,s,a),nE(e,s,a),nE(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Id(hL(this.h),Jj(this.s),Jj(this.l),Pw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pw(this.opacity);return`${e===1?"hsl(":"hsla("}${hL(this.h)}, ${Jj(this.s)*100}%, ${Jj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hL(e){return e=(e||0)%360,e<0?e+360:e}function Jj(e){return Math.max(0,Math.min(1,e||0))}function nE(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const GA=e=>()=>e;function Woe(e,t){return function(r){return e+r*t}}function Goe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function Yoe(e){return(e=+e)==1?EV:function(t,r){return r-t?Goe(t,r,e):GA(isNaN(t)?r:t)}}function EV(e,t){var r=t-e;return r?Woe(e,r):GA(isNaN(e)?t:e)}const fL=function e(t){var r=Yoe(t);function a(s,i){var o=r((s=E5(s)).r,(i=E5(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=EV(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a}(1);function Koe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function Xoe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Qoe(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=hg(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function Joe(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Ow(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Zoe(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=hg(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var D5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sE=new RegExp(D5.source,"g");function ele(e){return function(){return e}}function tle(e){return function(t){return e(t)+""}}function rle(e,t){var r=D5.lastIndex=sE.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=D5.exec(e))&&(s=sE.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Ow(a,s)})),r=sE.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?tle(c[0].x):ele(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function hg(e,t){var r=typeof t,a;return t==null||r==="boolean"?GA(t):(r==="number"?Ow:r==="string"?(a=jy(t))?(t=a,fL):rle:t instanceof jy?fL:t instanceof Date?Joe:Xoe(t)?Koe:Array.isArray(t)?Qoe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zoe:Ow)(e,t)}function YA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ale(e,t){t===void 0&&(t=e,e=hg);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function nle(e){return function(){return e}}function Mw(e){return+e}var mL=[0,1];function Yo(e){return e}function A5(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:nle(isNaN(t)?NaN:.5)}function sle(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function ile(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=A5(s,a),i=r(o,i)):(a=A5(a,s),i=r(i,o)),function(l){return i(a(l))}}function ole(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=A5(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=d1(e,l,1,a)-1;return i[c](s[c](l))}}function h1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function kS(){var e=mL,t=mL,r=hg,a,s,i,o=Yo,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==Yo&&(o=sle(e[0],e[f-1])),l=f>2?ole:ile,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(a),t,r)))(a(o(f)))}return h.invert=function(f){return o(s((d||(d=l(t,e.map(a),Ow)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Mw),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=YA,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Yo,u()):o!==Yo},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,p){return a=f,s=p,u()}}function KA(){return kS()(Yo,Yo)}function lle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function U0(e){return e=Rw(Math.abs(e)),e?e[1]:NaN}function cle(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function dle(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ule=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ny(e){if(!(t=ule.exec(e)))throw new Error("invalid format: "+e);var t;return new XA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ny.prototype=XA.prototype;function XA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}XA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hle(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var DV;function fle(e,t){var r=Rw(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(DV=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Rw(e,Math.max(0,t+i-1))[0]}function pL(e,t){var r=Rw(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const xL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:lle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pL(e*100,t),r:pL,s:fle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vL(e){return e}var gL=Array.prototype.map,bL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mle(e){var t=e.grouping===void 0||e.thousands===void 0?vL:cle(gL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?vL:dle(gL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=Ny(h);var f=h.fill,p=h.align,x=h.sign,g=h.symbol,b=h.zero,y=h.width,S=h.comma,w=h.precision,k=h.trim,C=h.type;C==="n"?(S=!0,C="g"):xL[C]||(w===void 0&&(w=12),k=!0,C="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",E=g==="$"?a:/[%p]/.test(C)?o:"",A=xL[C],I=/[defgprs%]/.test(C);w=w===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function L(P){var O=D,Y=E,q,K,U;if(C==="c")Y=A(P)+Y,P="";else{P=+P;var J=P<0||1/P<0;if(P=isNaN(P)?c:A(Math.abs(P),w),k&&(P=hle(P)),J&&+P==0&&x!=="+"&&(J=!1),O=(J?x==="("?x:l:x==="-"||x==="("?"":x)+O,Y=(C==="s"?bL[8+DV/3]:"")+Y+(J&&x==="("?")":""),I){for(q=-1,K=P.length;++q<K;)if(U=P.charCodeAt(q),48>U||U>57){Y=(U===46?s+P.slice(q+1):P.slice(q))+Y,P=P.slice(0,q);break}}}S&&!b&&(P=t(P,1/0));var F=O.length+P.length+Y.length,X=F<y?new Array(y-F+1).join(f):"";switch(S&&b&&(P=t(X+P,X.length?y-Y.length:1/0),X=""),p){case"<":P=O+P+Y+X;break;case"=":P=O+X+P+Y;break;case"^":P=X.slice(0,F=X.length>>1)+O+P+Y+X.slice(F);break;default:P=X+O+P+Y;break}return i(P)}return L.toString=function(){return h+""},L}function u(h,f){var p=d((h=Ny(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(U0(f)/3)))*3,g=Math.pow(10,-x),b=bL[8+x/3];return function(y){return p(g*y)+b}}return{format:d,formatPrefix:u}}var Zj,QA,AV;ple({thousands:",",grouping:[3],currency:["$",""]});function ple(e){return Zj=mle(e),QA=Zj.format,AV=Zj.formatPrefix,Zj}function xle(e){return Math.max(0,-U0(Math.abs(e)))}function vle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(U0(t)/3)))*3-U0(Math.abs(e)))}function gle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,U0(t)-U0(e))+1}function TV(e,t,r,a){var s=k5(e,t,r),i;switch(a=Ny(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=vle(s,o))&&(a.precision=i),AV(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=gle(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=xle(s))&&(a.precision=i-(a.type==="%")*2);break}}return QA(a)}function ip(e){var t=e.domain;return e.ticks=function(r){var a=t();return S5(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return TV(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=C5(o,l,r),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function IV(){var e=KA();return e.copy=function(){return h1(e,IV())},rd.apply(e,arguments),ip(e)}function PV(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Mw),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return PV(e).unknown(t)},e=arguments.length?Array.from(e,Mw):[0,1],ip(r)}function OV(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function yL(e){return Math.log(e)}function jL(e){return Math.exp(e)}function ble(e){return-Math.log(-e)}function yle(e){return-Math.exp(-e)}function jle(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Nle(e){return e===10?jle:e===Math.E?Math.exp:t=>Math.pow(e,t)}function wle(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function NL(e){return(t,r)=>-e(-t,r)}function JA(e){const t=e(yL,jL),r=t.domain;let a=10,s,i;function o(){return s=wle(a),i=Nle(a),r()[0]<0?(s=NL(s),i=NL(i),e(ble,yle)):e(yL,jL),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=s(d),p=s(u),x,g;const b=l==null?10:+l;let y=[];if(!(a%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),d>0){for(;f<=p;++f)for(x=1;x<a;++x)if(g=f<0?x/i(-f):x*i(f),!(g<d)){if(g>u)break;y.push(g)}}else for(;f<=p;++f)for(x=a-1;x>=1;--x)if(g=f>0?x/i(-f):x*i(f),!(g<d)){if(g>u)break;y.push(g)}y.length*2<b&&(y=S5(d,u,b))}else y=S5(f,p,Math.min(p-f,b)).map(i);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Ny(c)).precision==null&&(c.trim=!0),c=QA(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*a<a-.5&&(h*=a),h<=d?c(u):""}},t.nice=()=>r(OV(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function MV(){const e=JA(kS()).domain([1,10]);return e.copy=()=>h1(e,MV()).base(e.base()),rd.apply(e,arguments),e}function wL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function SL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ZA(e){var t=1,r=e(wL(t),SL(t));return r.constant=function(a){return arguments.length?e(wL(t=+a),SL(t)):t},ip(r)}function RV(){var e=ZA(kS());return e.copy=function(){return h1(e,RV()).constant(e.constant())},rd.apply(e,arguments)}function CL(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Sle(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Cle(e){return e<0?-e*e:e*e}function eT(e){var t=e(Yo,Yo),r=1;function a(){return r===1?e(Yo,Yo):r===.5?e(Sle,Cle):e(CL(r),CL(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},ip(t)}function tT(){var e=eT(kS());return e.copy=function(){return h1(e,tT()).exponent(e.exponent())},rd.apply(e,arguments),e}function kle(){return tT.apply(null,arguments).exponent(.5)}function kL(e){return Math.sign(e)*e*e}function _le(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function FV(){var e=KA(),t=[0,1],r=!1,a;function s(i){var o=_le(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(kL(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Mw)).map(kL)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return FV(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},rd.apply(s,arguments),ip(s)}function LV(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Toe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[d1(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Fm),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return LV().domain(e).range(t).unknown(a)},rd.apply(i,arguments)}function BV(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[d1(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return BV().domain([e,t]).range(s).unknown(i)},rd.apply(ip(o),arguments)}function UV(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[d1(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return UV().domain(e).range(t).unknown(r)},rd.apply(s,arguments)}const iE=new Date,oE=new Date;function wi(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>wi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(iE.setTime(+i),oE.setTime(+o),e(iE),e(oE),Math.floor(r(iE,oE))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Fw=wi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Fw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Fw);Fw.range;const Hh=1e3,Gc=Hh*60,Wh=Gc*60,cf=Wh*24,rT=cf*7,_L=cf*30,lE=cf*365,ix=wi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Hh)},(e,t)=>(t-e)/Hh,e=>e.getUTCSeconds());ix.range;const aT=wi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hh)},(e,t)=>{e.setTime(+e+t*Gc)},(e,t)=>(t-e)/Gc,e=>e.getMinutes());aT.range;const nT=wi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gc)},(e,t)=>(t-e)/Gc,e=>e.getUTCMinutes());nT.range;const sT=wi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hh-e.getMinutes()*Gc)},(e,t)=>{e.setTime(+e+t*Wh)},(e,t)=>(t-e)/Wh,e=>e.getHours());sT.range;const iT=wi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wh)},(e,t)=>(t-e)/Wh,e=>e.getUTCHours());iT.range;const f1=wi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gc)/cf,e=>e.getDate()-1);f1.range;const _S=wi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cf,e=>e.getUTCDate()-1);_S.range;const $V=wi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cf,e=>Math.floor(e/cf));$V.range;function Wx(e){return wi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Gc)/rT)}const ES=Wx(0),Lw=Wx(1),Ele=Wx(2),Dle=Wx(3),$0=Wx(4),Ale=Wx(5),Tle=Wx(6);ES.range;Lw.range;Ele.range;Dle.range;$0.range;Ale.range;Tle.range;function Gx(e){return wi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/rT)}const DS=Gx(0),Bw=Gx(1),Ile=Gx(2),Ple=Gx(3),V0=Gx(4),Ole=Gx(5),Mle=Gx(6);DS.range;Bw.range;Ile.range;Ple.range;V0.range;Ole.range;Mle.range;const oT=wi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oT.range;const lT=wi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lT.range;const df=wi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());df.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});df.range;const uf=wi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());uf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});uf.range;function VV(e,t,r,a,s,i){const o=[[ix,1,Hh],[ix,5,5*Hh],[ix,15,15*Hh],[ix,30,30*Hh],[i,1,Gc],[i,5,5*Gc],[i,15,15*Gc],[i,30,30*Gc],[s,1,Wh],[s,3,3*Wh],[s,6,6*Wh],[s,12,12*Wh],[a,1,cf],[a,2,2*cf],[r,1,rT],[t,1,_L],[t,3,3*_L],[e,1,lE]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),x=p?p.range(d,+u+1):[];return f?x.reverse():x}function c(d,u,h){const f=Math.abs(u-d)/h,p=qA(([,,b])=>b).right(o,f);if(p===o.length)return e.every(k5(d/lE,u/lE,h));if(p===0)return Fw.every(Math.max(k5(d,u,h),1));const[x,g]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return x.every(g)}return[l,c]}const[Rle,Fle]=VV(uf,lT,DS,$V,iT,nT),[Lle,Ble]=VV(df,oT,ES,f1,sT,aT);function cE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Ule(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=kb(s),u=_b(s),h=kb(i),f=_b(i),p=kb(o),x=_b(o),g=kb(l),b=_b(l),y=kb(c),S=_b(c),w={a:J,A:F,b:X,B:Q,c:null,d:PL,e:PL,f:cce,g:bce,G:jce,H:ice,I:oce,j:lce,L:qV,m:dce,M:uce,p:ie,q:M,Q:RL,s:FL,S:hce,u:fce,U:mce,V:pce,w:xce,W:vce,x:null,X:null,y:gce,Y:yce,Z:Nce,"%":ML},k={a:V,A:W,b:ee,B:re,c:null,d:OL,e:OL,f:kce,g:Rce,G:Lce,H:wce,I:Sce,j:Cce,L:HV,m:_ce,M:Ece,p:ne,q:ce,Q:RL,s:FL,S:Dce,u:Ace,U:Tce,V:Ice,w:Pce,W:Oce,x:null,X:null,y:Mce,Y:Fce,Z:Bce,"%":ML},C={a:L,A:P,b:O,B:Y,c:q,d:TL,e:TL,f:rce,g:AL,G:DL,H:IL,I:IL,j:Jle,L:tce,m:Qle,M:Zle,p:I,q:Xle,Q:nce,s:sce,S:ece,u:Hle,U:Wle,V:Gle,w:zle,W:Yle,x:K,X:U,y:AL,Y:DL,Z:Kle,"%":ace};w.x=D(r,w),w.X=D(a,w),w.c=D(t,w),k.x=D(r,k),k.X=D(a,k),k.c=D(t,k);function D(ae,Z){return function(de){var z=[],se=-1,Ne=0,ue=ae.length,oe,ye,je;for(de instanceof Date||(de=new Date(+de));++se<ue;)ae.charCodeAt(se)===37&&(z.push(ae.slice(Ne,se)),(ye=EL[oe=ae.charAt(++se)])!=null?oe=ae.charAt(++se):ye=oe==="e"?" ":"0",(je=Z[oe])&&(oe=je(de,ye)),z.push(oe),Ne=se+1);return z.push(ae.slice(Ne,se)),z.join("")}}function E(ae,Z){return function(de){var z=Cb(1900,void 0,1),se=A(z,ae,de+="",0),Ne,ue;if(se!=de.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(Z&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(Ne=dE(Cb(z.y,0,1)),ue=Ne.getUTCDay(),Ne=ue>4||ue===0?Bw.ceil(Ne):Bw(Ne),Ne=_S.offset(Ne,(z.V-1)*7),z.y=Ne.getUTCFullYear(),z.m=Ne.getUTCMonth(),z.d=Ne.getUTCDate()+(z.w+6)%7):(Ne=cE(Cb(z.y,0,1)),ue=Ne.getDay(),Ne=ue>4||ue===0?Lw.ceil(Ne):Lw(Ne),Ne=f1.offset(Ne,(z.V-1)*7),z.y=Ne.getFullYear(),z.m=Ne.getMonth(),z.d=Ne.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),ue="Z"in z?dE(Cb(z.y,0,1)).getUTCDay():cE(Cb(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(ue+5)%7:z.w+z.U*7-(ue+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,dE(z)):cE(z)}}function A(ae,Z,de,z){for(var se=0,Ne=Z.length,ue=de.length,oe,ye;se<Ne;){if(z>=ue)return-1;if(oe=Z.charCodeAt(se++),oe===37){if(oe=Z.charAt(se++),ye=C[oe in EL?Z.charAt(se++):oe],!ye||(z=ye(ae,de,z))<0)return-1}else if(oe!=de.charCodeAt(z++))return-1}return z}function I(ae,Z,de){var z=d.exec(Z.slice(de));return z?(ae.p=u.get(z[0].toLowerCase()),de+z[0].length):-1}function L(ae,Z,de){var z=p.exec(Z.slice(de));return z?(ae.w=x.get(z[0].toLowerCase()),de+z[0].length):-1}function P(ae,Z,de){var z=h.exec(Z.slice(de));return z?(ae.w=f.get(z[0].toLowerCase()),de+z[0].length):-1}function O(ae,Z,de){var z=y.exec(Z.slice(de));return z?(ae.m=S.get(z[0].toLowerCase()),de+z[0].length):-1}function Y(ae,Z,de){var z=g.exec(Z.slice(de));return z?(ae.m=b.get(z[0].toLowerCase()),de+z[0].length):-1}function q(ae,Z,de){return A(ae,t,Z,de)}function K(ae,Z,de){return A(ae,r,Z,de)}function U(ae,Z,de){return A(ae,a,Z,de)}function J(ae){return o[ae.getDay()]}function F(ae){return i[ae.getDay()]}function X(ae){return c[ae.getMonth()]}function Q(ae){return l[ae.getMonth()]}function ie(ae){return s[+(ae.getHours()>=12)]}function M(ae){return 1+~~(ae.getMonth()/3)}function V(ae){return o[ae.getUTCDay()]}function W(ae){return i[ae.getUTCDay()]}function ee(ae){return c[ae.getUTCMonth()]}function re(ae){return l[ae.getUTCMonth()]}function ne(ae){return s[+(ae.getUTCHours()>=12)]}function ce(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Z=D(ae+="",w);return Z.toString=function(){return ae},Z},parse:function(ae){var Z=E(ae+="",!1);return Z.toString=function(){return ae},Z},utcFormat:function(ae){var Z=D(ae+="",k);return Z.toString=function(){return ae},Z},utcParse:function(ae){var Z=E(ae+="",!0);return Z.toString=function(){return ae},Z}}}var EL={"-":"",_:" ",0:"0"},Bi=/^\s*\d+/,$le=/^%/,Vle=/[\\^$*+?|[\]().{}]/g;function en(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function qle(e){return e.replace(Vle,"\\$&")}function kb(e){return new RegExp("^(?:"+e.map(qle).join("|")+")","i")}function _b(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function zle(e,t,r){var a=Bi.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function Hle(e,t,r){var a=Bi.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function Wle(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function Gle(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function Yle(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function DL(e,t,r){var a=Bi.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function AL(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function Kle(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function Xle(e,t,r){var a=Bi.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function Qle(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function TL(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function Jle(e,t,r){var a=Bi.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function IL(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function Zle(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function ece(e,t,r){var a=Bi.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function tce(e,t,r){var a=Bi.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function rce(e,t,r){var a=Bi.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function ace(e,t,r){var a=$le.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function nce(e,t,r){var a=Bi.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function sce(e,t,r){var a=Bi.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function PL(e,t){return en(e.getDate(),t,2)}function ice(e,t){return en(e.getHours(),t,2)}function oce(e,t){return en(e.getHours()%12||12,t,2)}function lce(e,t){return en(1+f1.count(df(e),e),t,3)}function qV(e,t){return en(e.getMilliseconds(),t,3)}function cce(e,t){return qV(e,t)+"000"}function dce(e,t){return en(e.getMonth()+1,t,2)}function uce(e,t){return en(e.getMinutes(),t,2)}function hce(e,t){return en(e.getSeconds(),t,2)}function fce(e){var t=e.getDay();return t===0?7:t}function mce(e,t){return en(ES.count(df(e)-1,e),t,2)}function zV(e){var t=e.getDay();return t>=4||t===0?$0(e):$0.ceil(e)}function pce(e,t){return e=zV(e),en($0.count(df(e),e)+(df(e).getDay()===4),t,2)}function xce(e){return e.getDay()}function vce(e,t){return en(Lw.count(df(e)-1,e),t,2)}function gce(e,t){return en(e.getFullYear()%100,t,2)}function bce(e,t){return e=zV(e),en(e.getFullYear()%100,t,2)}function yce(e,t){return en(e.getFullYear()%1e4,t,4)}function jce(e,t){var r=e.getDay();return e=r>=4||r===0?$0(e):$0.ceil(e),en(e.getFullYear()%1e4,t,4)}function Nce(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+en(t/60|0,"0",2)+en(t%60,"0",2)}function OL(e,t){return en(e.getUTCDate(),t,2)}function wce(e,t){return en(e.getUTCHours(),t,2)}function Sce(e,t){return en(e.getUTCHours()%12||12,t,2)}function Cce(e,t){return en(1+_S.count(uf(e),e),t,3)}function HV(e,t){return en(e.getUTCMilliseconds(),t,3)}function kce(e,t){return HV(e,t)+"000"}function _ce(e,t){return en(e.getUTCMonth()+1,t,2)}function Ece(e,t){return en(e.getUTCMinutes(),t,2)}function Dce(e,t){return en(e.getUTCSeconds(),t,2)}function Ace(e){var t=e.getUTCDay();return t===0?7:t}function Tce(e,t){return en(DS.count(uf(e)-1,e),t,2)}function WV(e){var t=e.getUTCDay();return t>=4||t===0?V0(e):V0.ceil(e)}function Ice(e,t){return e=WV(e),en(V0.count(uf(e),e)+(uf(e).getUTCDay()===4),t,2)}function Pce(e){return e.getUTCDay()}function Oce(e,t){return en(Bw.count(uf(e)-1,e),t,2)}function Mce(e,t){return en(e.getUTCFullYear()%100,t,2)}function Rce(e,t){return e=WV(e),en(e.getUTCFullYear()%100,t,2)}function Fce(e,t){return en(e.getUTCFullYear()%1e4,t,4)}function Lce(e,t){var r=e.getUTCDay();return e=r>=4||r===0?V0(e):V0.ceil(e),en(e.getUTCFullYear()%1e4,t,4)}function Bce(){return"+0000"}function ML(){return"%"}function RL(e){return+e}function FL(e){return Math.floor(+e/1e3)}var $v,GV,YV;Uce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Uce(e){return $v=Ule(e),GV=$v.format,$v.parse,YV=$v.utcFormat,$v.utcParse,$v}function $ce(e){return new Date(e)}function Vce(e){return e instanceof Date?+e:+new Date(+e)}function cT(e,t,r,a,s,i,o,l,c,d){var u=KA(),h=u.invert,f=u.domain,p=d(".%L"),x=d(":%S"),g=d("%I:%M"),b=d("%I %p"),y=d("%a %d"),S=d("%b %d"),w=d("%B"),k=d("%Y");function C(D){return(c(D)<D?p:l(D)<D?x:o(D)<D?g:i(D)<D?b:a(D)<D?s(D)<D?y:S:r(D)<D?w:k)(D)}return u.invert=function(D){return new Date(h(D))},u.domain=function(D){return arguments.length?f(Array.from(D,Vce)):f().map($ce)},u.ticks=function(D){var E=f();return e(E[0],E[E.length-1],D??10)},u.tickFormat=function(D,E){return E==null?C:d(E)},u.nice=function(D){var E=f();return(!D||typeof D.range!="function")&&(D=t(E[0],E[E.length-1],D??10)),D?f(OV(E,D)):u},u.copy=function(){return h1(u,cT(e,t,r,a,s,i,o,l,c,d))},u}function qce(){return rd.apply(cT(Lle,Ble,df,oT,ES,f1,sT,aT,ix,GV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zce(){return rd.apply(cT(Rle,Fle,uf,lT,DS,_S,iT,nT,ix,YV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function AS(){var e=0,t=1,r,a,s,i,o=Yo,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var p,x;return arguments.length?([p,x]=f,o=h(p,x),d):[o(0),o(1)]}}return d.range=u(hg),d.rangeRound=u(YA),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),a=h(t),s=r===a?0:1/(a-r),d}}function op(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function KV(){var e=ip(AS()(Yo));return e.copy=function(){return op(e,KV())},vf.apply(e,arguments)}function XV(){var e=JA(AS()).domain([1,10]);return e.copy=function(){return op(e,XV()).base(e.base())},vf.apply(e,arguments)}function QV(){var e=ZA(AS());return e.copy=function(){return op(e,QV()).constant(e.constant())},vf.apply(e,arguments)}function dT(){var e=eT(AS());return e.copy=function(){return op(e,dT()).exponent(e.exponent())},vf.apply(e,arguments)}function Hce(){return dT.apply(null,arguments).exponent(.5)}function JV(){var e=[],t=Yo;function r(a){if(a!=null&&!isNaN(a=+a))return t((d1(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Fm),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>Aoe(e,i/a))},r.copy=function(){return JV(t).domain(e)},vf.apply(r,arguments)}function TS(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,d=Yo,u,h=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-i)*(a*g<a*i?l:c),d(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(d=g,p):d};function x(g){return function(b){var y,S,w;return arguments.length?([y,S,w]=b,d=ale(g,[y,S,w]),p):[d(0),d(.5),d(1)]}}return p.range=x(hg),p.rangeRound=x(YA),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return u=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p}}function ZV(){var e=ip(TS()(Yo));return e.copy=function(){return op(e,ZV())},vf.apply(e,arguments)}function eq(){var e=JA(TS()).domain([.1,1,10]);return e.copy=function(){return op(e,eq()).base(e.base())},vf.apply(e,arguments)}function tq(){var e=ZA(TS());return e.copy=function(){return op(e,tq()).constant(e.constant())},vf.apply(e,arguments)}function uT(){var e=eT(TS());return e.copy=function(){return op(e,uT()).exponent(e.exponent())},vf.apply(e,arguments)}function Wce(){return uT.apply(null,arguments).exponent(.5)}const Hb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:HA,scaleDiverging:ZV,scaleDivergingLog:eq,scaleDivergingPow:uT,scaleDivergingSqrt:Wce,scaleDivergingSymlog:tq,scaleIdentity:PV,scaleImplicit:_5,scaleLinear:IV,scaleLog:MV,scaleOrdinal:zA,scalePoint:Poe,scalePow:tT,scaleQuantile:LV,scaleQuantize:BV,scaleRadial:FV,scaleSequential:KV,scaleSequentialLog:XV,scaleSequentialPow:dT,scaleSequentialQuantile:JV,scaleSequentialSqrt:Hce,scaleSequentialSymlog:QV,scaleSqrt:kle,scaleSymlog:RV,scaleThreshold:UV,scaleTime:qce,scaleUtc:zce,tickFormat:TV},Symbol.toStringTag,{value:"Module"}));var Yx=e=>e.chartData,hT=Bt([Yx],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),fT=(e,t,r,a)=>a?hT(e):Yx(e);function q0(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(so(t)&&so(r))return!0}return!1}function LL(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Gce(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,s,i;if(so(r))s=r;else if(typeof r=="function")return;if(so(a))i=a;else if(typeof a=="function")return;var o=[s,i];if(q0(o))return o}}function Yce(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(q0(a))return LL(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Cr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t?.[0]))}catch{}else if(typeof s=="string"&&CF.test(s)){var c=CF.exec(s);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Cr(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&kF.test(i)){var u=kF.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t?.[1];var f=[o,l];if(q0(f))return t==null?f:LL(f,t,r)}}}var fg=1e9,Kce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pT,Zn=!0,Qc="[DecimalError] ",gx=Qc+"Invalid argument: ",mT=Qc+"Exponent out of range: ",mg=Math.floor,Wp=Math.pow,Xce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zl,Ti=1e7,$n=7,rq=9007199254740991,Uw=mg(rq/$n),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*$n;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return Xh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Tn(Xh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return di(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Zl))throw Error(Qc+"NaN");if(r.s<1)throw Error(Qc+(r.s?"NaN":"-Infinity"));return r.eq(Zl)?new a(0):(Zn=!1,t=Xh(wy(r,i),wy(e,i),i),Zn=!0,Tn(t,s))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sq(t,e):aq(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Qc+"NaN");return r.s?(Zn=!1,t=Xh(r,e,0,1).times(e),Zn=!0,r.minus(t)):Tn(new a(r),s)};Ar.naturalExponential=Ar.exp=function(){return nq(this)};Ar.naturalLogarithm=Ar.ln=function(){return wy(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aq(t,e):sq(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(gx+e);if(t=di(s)+1,a=s.d.length-1,r=a*$n+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Qc+"NaN")}for(e=di(l),Zn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Lu(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=mg((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus(Xh(l,i,o+2)).times(.5),Lu(i.d).slice(0,o)===(t=Lu(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Tn(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return Zn=!0,Tn(a,r)};Ar.times=Ar.mul=function(e){var t,r,a,s,i,o,l,c,d,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=f.length,d=p.length,c<d&&(i=f,f=p,p=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+p[a]*f[s-a-1]+t,i[s--]=l%Ti|0,t=l/Ti|0;i[s]=(i[s]+t)%Ti|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Zn?Tn(e,h.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Qu(e,0,fg),t===void 0?t=a.rounding:Qu(t,0,8),Tn(r,e+di(r)+1,t))};Ar.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Ix(a,!0):(Qu(e,0,fg),t===void 0?t=s.rounding:Qu(t,0,8),a=Tn(new s(a),e+1,t),r=Ix(a,!0,e+1)),r};Ar.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Ix(s):(Qu(e,0,fg),t===void 0?t=i.rounding:Qu(t,0,8),a=Tn(new i(s),e+di(s)+1,t),r=Ix(a.abs(),!1,e+di(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Tn(new t(e),di(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Zl);if(l=new c(l),!l.s){if(e.s<1)throw Error(Qc+"Infinity");return l}if(l.eq(Zl))return l;if(a=c.precision,e.eq(Zl))return Tn(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=rq){for(s=new c(Zl),t=Math.ceil(a/$n+4),Zn=!1;r%2&&(s=s.times(l),UL(s.d,t)),r=mg(r/2),r!==0;)l=l.times(l),UL(l.d,t);return Zn=!0,e.s<0?new c(Zl).div(s):Tn(s,a)}}else if(i<0)throw Error(Qc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Zn=!1,s=e.times(wy(l,a+d)),Zn=!0,s=nq(s),s.s=i,s};Ar.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=di(s),a=Ix(s,r<=i.toExpNeg||r>=i.toExpPos)):(Qu(e,1,fg),t===void 0?t=i.rounding:Qu(t,0,8),s=Tn(new i(s),e,t),r=di(s),a=Ix(s,e<=r||r<=i.toExpNeg,e)),a};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Qu(e,1,fg),t===void 0?t=a.rounding:Qu(t,0,8)),Tn(new a(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=di(e),r=e.constructor;return Ix(e,t<=r.toExpNeg||t>=r.toExpPos)};function aq(e,t){var r,a,s,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Zn?Tn(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(h/$n),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/Ti|0,c[i]%=Ti;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Zn?Tn(t,h):t}function Qu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(gx+e)}function Lu(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=$n-a.length,r&&(i+=Em(r)),i+=a;o=e[t],a=o+"",r=$n-a.length,r&&(i+=Em(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Xh=function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%Ti|0,o=i/Ti|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*Ti+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A,I=a.constructor,L=a.s==s.s?1:-1,P=a.d,O=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(Qc+"Division by zero");for(c=a.e-s.e,E=O.length,C=P.length,p=new I(L),x=p.d=[],d=0;O[d]==(P[d]||0);)++d;if(O[d]>(P[d]||0)&&--c,i==null?S=i=I.precision:o?S=i+(di(a)-di(s))+1:S=i,S<0)return new I(0);if(S=S/$n+2|0,d=0,E==1)for(u=0,O=O[0],S++;(d<C||u)&&S--;d++)w=u*Ti+(P[d]||0),x[d]=w/O|0,u=w%O|0;else{for(u=Ti/(O[0]+1)|0,u>1&&(O=e(O,u),P=e(P,u),E=O.length,C=P.length),k=E,g=P.slice(0,E),b=g.length;b<E;)g[b++]=0;A=O.slice(),A.unshift(0),D=O[0],O[1]>=Ti/2&&++D;do u=0,l=t(O,g,E,b),l<0?(y=g[0],E!=b&&(y=y*Ti+(g[1]||0)),u=y/D|0,u>1?(u>=Ti&&(u=Ti-1),h=e(O,u),f=h.length,b=g.length,l=t(h,g,f,b),l==1&&(u--,r(h,E<f?A:O,f))):(u==0&&(l=u=1),h=O.slice()),f=h.length,f<b&&h.unshift(0),r(g,h,b),l==-1&&(b=g.length,l=t(O,g,E,b),l<1&&(u++,r(g,E<b?A:O,b))),b=g.length):l===0&&(u++,g=[0]),x[d++]=u,l&&g[0]?g[b++]=P[k]||0:(g=[P[k]],b=1);while((k++<C||g[0]!==void 0)&&S--)}return x[0]||x.shift(),p.e=c,Tn(p,o?i+di(p)+1:i)}}();function nq(e,t){var r,a,s,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(di(e)>16)throw Error(mT+di(e));if(!e.s)return new u(Zl);for(Zn=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(Wp(2,d))/Math.LN10*2+5|0,l+=a,r=s=i=new u(Zl),u.precision=l;;){if(s=Tn(s.times(e),l),r=r.times(++c),o=i.plus(Xh(s,r,l)),Lu(o.d).slice(0,l)===Lu(i.d).slice(0,l)){for(;d--;)i=Tn(i.times(i),l);return u.precision=h,t==null?(Zn=!0,Tn(i,h)):i}i=o}}function di(e){for(var t=e.e*$n,r=e.d[0];r>=10;r/=10)t++;return t}function uE(e,t,r){if(t>e.LN10.sd())throw Zn=!0,r&&(e.precision=r),Error(Qc+"LN10 precision limit exceeded");return Tn(new e(e.LN10),t)}function Em(e){for(var t="";e--;)t+="0";return t}function wy(e,t){var r,a,s,i,o,l,c,d,u,h=1,f=10,p=e,x=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(Qc+(p.s?"NaN":"-Infinity"));if(p.eq(Zl))return new g(0);if(t==null?(Zn=!1,d=b):d=t,p.eq(10))return t==null&&(Zn=!0),uE(g,d);if(d+=f,g.precision=d,r=Lu(x),a=r.charAt(0),i=di(p),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=Lu(p.d),a=r.charAt(0),h++;i=di(p),a>1?(p=new g("0."+r),i++):p=new g(a+"."+r.slice(1))}else return c=uE(g,d+2,b).times(i+""),p=wy(new g(a+"."+r.slice(1)),d-f).plus(c),g.precision=b,t==null?(Zn=!0,Tn(p,b)):p;for(l=o=p=Xh(p.minus(Zl),p.plus(Zl),d),u=Tn(p.times(p),d),s=3;;){if(o=Tn(o.times(u),d),c=l.plus(Xh(o,new g(s),d)),Lu(c.d).slice(0,d)===Lu(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(uE(g,d+2,b).times(i+""))),l=Xh(l,new g(h),d),g.precision=b,t==null?(Zn=!0,Tn(l,b)):l;l=c,s+=2}}function BL(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=mg(r/$n),e.d=[],a=(r+1)%$n,r<0&&(a+=$n),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=$n;a<s;)e.d.push(+t.slice(a,a+=$n));t=t.slice(a),a=$n-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),Zn&&(e.e>Uw||e.e<-Uw))throw Error(mT+r)}else e.s=0,e.e=0,e.d=[0];return e}function Tn(e,t,r){var a,s,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=$n,s=t,d=h[u=0];else{if(u=Math.ceil((a+1)/$n),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;a%=$n,s=a-$n+o}if(r!==void 0&&(i=Wp(10,o-s-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?d/Wp(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=di(e),h.length=1,t=t-i-1,h[0]=Wp(10,($n-t%$n)%$n),e.e=mg(-t/$n)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(a==0?(h.length=u,i=1,u--):(h.length=u+1,i=Wp(10,$n-a),h[u]=s>0?(d/Wp(10,o-s)%Wp(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==Ti&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=Ti)break;h[u--]=0,i=1}for(a=h.length;h[--a]===0;)h.pop();if(Zn&&(e.e>Uw||e.e<-Uw))throw Error(mT+di(e));return e}function sq(e,t){var r,a,s,i,o,l,c,d,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Zn?Tn(t,p):t;if(c=e.d,h=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,a=d,l=c.length),s=Math.max(Math.ceil(p/$n),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=Ti-1;--c[i],c[s]+=Ti}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Zn?Tn(t,p):t):new f(0)}function Ix(e,t,r){var a,s=di(e),i=Lu(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Em(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Em(-s-1)+i,r&&(a=r-o)>0&&(i+=Em(a))):s>=o?(i+=Em(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+Em(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=Em(a))),e.s<0?"-"+i:i}function UL(e,t){if(e.length>t)return e.length=t,!0}function iq(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(gx+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return BL(o,i.toString())}else if(typeof i!="string")throw Error(gx+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Xce.test(i))BL(o,i);else throw Error(gx+i)}if(s.prototype=Ar,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=iq,s.config=s.set=Qce,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function Qce(e){if(!e||typeof e!="object")throw Error(Qc+"Object expected");var t,r,a,s=["precision",1,fg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(mg(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(gx+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(gx+r+": "+a);return this}var pT=iq(Kce);Zl=new pT(1);const yn=pT;var Jce=e=>e,oq={},lq=e=>e===oq,$L=e=>function t(){return arguments.length===0||arguments.length===1&&lq(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},cq=(e,t)=>e===1?t:$L(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.filter(o=>o!==oq).length;return i>=e?t(...a):cq(e-i,$L(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=a.map(u=>lq(u)?l.shift():u);return t(...d,...l)}))}),IS=e=>cq(e.length,e),T5=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},Zce=IS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),ede=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return Jce;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},I5=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),dq=e=>{var t=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function uq(e){var t;return e===0?t=1:t=Math.floor(new yn(e).abs().log(10).toNumber())+1,t}function hq(e,t,r){for(var a=new yn(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}IS((e,t,r)=>{var a=+e,s=+t;return a+r*(s-a)});IS((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});IS((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var fq=e=>{var[t,r]=e,[a,s]=[t,r];return t>r&&([a,s]=[r,t]),[a,s]},mq=(e,t,r)=>{if(e.lte(0))return new yn(0);var a=uq(e.toNumber()),s=new yn(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new yn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new yn(c.toNumber()):new yn(Math.ceil(c.toNumber()))},tde=(e,t,r)=>{var a=new yn(1),s=new yn(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new yn(10).pow(uq(e)-1),s=new yn(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new yn(Math.floor(e)))}else e===0?s=new yn(Math.floor((t-1)/2)):r||(s=new yn(Math.floor(e)));var o=Math.floor((t-1)/2),l=ede(Zce(c=>s.add(new yn(c-o).mul(a)).toNumber()),T5);return l(0,t)},pq=function(t,r,a,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new yn(0),tickMin:new yn(0),tickMax:new yn(0)};var o=mq(new yn(r).sub(t).div(a-1),s,i),l;t<=0&&r>=0?l=new yn(0):(l=new yn(t).add(r).div(2),l=l.sub(new yn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new yn(r).sub(l).div(o).toNumber()),u=c+d+1;return u>a?pq(t,r,a,s,i+1):(u<a&&(d=r>0?d+(a-u):d,c=r>0?c:c+(a-u)),{step:o,tickMin:l.sub(new yn(c).mul(o)),tickMax:l.add(new yn(d).mul(o))})};function rde(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,l]=fq([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...T5(0,a-1).map(()=>1/0)]:[...T5(0,a-1).map(()=>-1/0),l];return t>r?I5(c):c}if(o===l)return tde(o,a,s);var{step:d,tickMin:u,tickMax:h}=pq(o,l,i,s,0),f=hq(u,h.add(new yn(.1).mul(d)),d);return t>r?I5(f):f}function ade(e,t){var[r,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=fq([r,a]);if(i===-1/0||o===1/0)return[r,a];if(i===o)return[i];var l=Math.max(t,2),c=mq(new yn(o).sub(i).div(l-1),s,0),d=[...hq(new yn(i),new yn(o),c),o];return s===!1&&(d=d.map(u=>Math.round(u))),r>a?I5(d):d}var nde=dq(rde),sde=dq(ade),xq=e=>e.rootProps.maxBarSize,ide=e=>e.rootProps.barGap,vq=e=>e.rootProps.barCategoryGap,ode=e=>e.rootProps.barSize,m1=e=>e.rootProps.stackOffset,xT=e=>e.options.chartName,vT=e=>e.rootProps.syncId,gq=e=>e.rootProps.syncMethod,gT=e=>e.options.eventEmitter,Vh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},PS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},lde={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vh.angleAxisId,includeHidden:!1,name:void 0,reversed:Vh.reversed,scale:Vh.scale,tick:Vh.tick,tickCount:void 0,ticks:void 0,type:Vh.type,unit:void 0},cde={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:Gl.type,unit:void 0},dde={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Vh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vh.scale,tick:Vh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ude={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:"category",unit:void 0},bT=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?dde:lde,yT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?ude:cde,OS=e=>e.polarOptions,jT=Bt([pf,xf,Ni],rV),bq=Bt([OS,jT],(e,t)=>{if(e!=null)return Xo(e.innerRadius,t,0)}),yq=Bt([OS,jT],(e,t)=>{if(e!=null)return Xo(e.outerRadius,t,t*.8)}),hde=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},jq=Bt([OS],hde);Bt([bT,jq],PS);var Nq=Bt([jT,bq,yq],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Bt([yT,Nq],PS);var fde=Bt([tn,OS,bq,yq,pf,xf],(e,t,r,a,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Xo(o,s,s/2),cy:Xo(l,i,i/2),innerRadius:r,outerRadius:a,startAngle:c,endAngle:d,clockWise:!1}}}),Ys=(e,t)=>t,p1=(e,t,r)=>r;function VL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $w(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(r),!0).forEach(function(a){mde(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mde(e,t,r){return(t=pde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pde(e){var t=xde(e,"string");return typeof t=="symbol"?t:t+""}function xde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P5=[0,"auto"],Hl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gf=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Hl},Wl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:P5,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:NS},lp=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Wl},vde={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},NT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??vde},Ks=(e,t,r)=>{switch(t){case"xAxis":return gf(e,r);case"yAxis":return lp(e,r);case"zAxis":return NT(e,r);case"angleAxis":return bT(e,r);case"radiusAxis":return yT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},gde=(e,t,r)=>{switch(t){case"xAxis":return gf(e,r);case"yAxis":return lp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},x1=(e,t,r)=>{switch(t){case"xAxis":return gf(e,r);case"yAxis":return lp(e,r);case"angleAxis":return bT(e,r);case"radiusAxis":return yT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},wq=e=>e.graphicalItems.countOfBars>0;function wT(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var MS=e=>e.graphicalItems.cartesianItems,bde=Bt([Ys,p1],wT),ST=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),v1=Bt([MS,Ks,bde],ST),Sq=e=>e.filter(t=>t.stackId===void 0),yde=Bt([v1],Sq),CT=e=>e.map(t=>t.data).filter(Boolean).flat(1),jde=Bt([v1],CT),kT=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:r.slice(a,s+1)},RS=Bt([jde,fT],kT),_T=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:qn(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:qn(s,a)}))):e.map(a=>({value:a})),FS=Bt([RS,Ks,v1],_T);function Cq(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Kx(e){return e.filter(t=>Xu(t)||t instanceof Date).map(Number).filter(t=>Nl(t)===!1)}function Nde(e,t,r){return!r||typeof t!="number"||Nl(t)?[]:r.length?Kx(r.flatMap(a=>{var s=qn(e,a.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!so(i)||!so(o)))return[t-i,t+o]})):[]}var kq=(e,t,r)=>{var a={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),a);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(d=>d.dataKey);return[o,{stackedData:Nse(e,c,r),graphicalItems:l}]}))},Sy=Bt([RS,v1,m1],kq),_q=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(r!=="zAxis"){var i=kse(e,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},wde=Bt([Sy,Yx,Ys],_q),Eq=(e,t,r,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>Cq(a,u)),d=qn(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:Nde(s,d,c)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:qn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Sde=Bt(RS,Ks,yde,Ys,Eq);function Cde(e){var{value:t}=e;if(Xu(t)||t instanceof Date)return t}var kde=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=Kx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_de=(e,t,r)=>{var a=e.map(Cde).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&JU(a))?jV(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},ET=e=>{var t;if(e==null||!("domain"in e))return P5;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Kx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:P5},DT=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},Dq=e=>e.referenceElements.dots,pg=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),Ede=Bt([Dq,Ys,p1],pg),Aq=e=>e.referenceElements.areas,Dde=Bt([Aq,Ys,p1],pg),Tq=e=>e.referenceElements.lines,Ade=Bt([Tq,Ys,p1],pg),Iq=(e,t)=>{var r=Kx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Tde=Bt(Ede,Ys,Iq),Pq=(e,t)=>{var r=Kx(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Ide=Bt([Dde,Ys],Pq),Oq=(e,t)=>{var r=Kx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Pde=Bt(Ade,Ys,Oq),Ode=Bt(Tde,Pde,Ide,(e,t,r)=>DT(e,r,t)),Mq=Bt([Ks],ET),AT=(e,t,r,a,s)=>{var i=Gce(t,e.allowDataOverflow);return i??Yce(t,DT(r,s,kde(a)),e.allowDataOverflow)},Mde=Bt([Ks,Mq,wde,Sde,Ode],AT),Rde=[0,1],TT=(e,t,r,a,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,d=mf(t,i);return d&&l==null?jV(0,r.length):c==="category"?_de(a,e,d):s==="expand"?Rde:o}},IT=Bt([Ks,tn,RS,FS,m1,Ys,Mde],TT),Rq=(e,t,r,a,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(i1(i));return l in Hb?l:"point"}}},xg=Bt([Ks,tn,wq,xT,Ys],Rq);function Fde(e){if(e!=null){if(e in Hb)return Hb[e]();var t="scale".concat(i1(e));if(t in Hb)return Hb[t]()}}function PT(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var s=Fde(t);if(s!=null){var i=s.domain(r).range(a);return vse(i),i}}}var OT=(e,t,r)=>{var a=ET(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&q0(e))return nde(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&q0(e))return sde(e,t.tickCount,t.allowDecimals)}},MT=Bt([IT,x1,xg],OT),RT=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&q0(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},Lde=Bt([Ks,IT,MT,Ys],RT),Bde=Bt(FS,Ks,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Kx(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var s=a[a.length-1]-a[0];if(s===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];r=Math.min(r,o)}return r/s}}),Fq=Bt(Bde,tn,vq,Ni,(e,t,r,a)=>a,(e,t,r,a,s)=>{if(!so(e))return 0;var i=t==="vertical"?a.height:a.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Xo(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),Ude=(e,t)=>{var r=gf(e,t);return r==null||typeof r.padding!="string"?0:Fq(e,"xAxis",t,r.padding)},$de=(e,t)=>{var r=lp(e,t);return r==null||typeof r.padding!="string"?0:Fq(e,"yAxis",t,r.padding)},Vde=Bt(gf,Ude,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),qde=Bt(lp,$de,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),zde=Bt([Ni,Vde,SS,wS,(e,t,r)=>r],(e,t,r,a,s)=>{var{padding:i}=a;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Hde=Bt([Ni,tn,qde,SS,wS,(e,t,r)=>r],(e,t,r,a,s,i)=>{var{padding:o}=s;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),g1=(e,t,r,a)=>{var s;switch(t){case"xAxis":return zde(e,r,a);case"yAxis":return Hde(e,r,a);case"zAxis":return(s=NT(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return jq(e);case"radiusAxis":return Nq(e,r);default:return}},Lq=Bt([Ks,g1],PS),vg=Bt([Ks,xg,Lde,Lq],PT);Bt(v1,Ys,(e,t)=>e.flatMap(r=>{var a;return(a=r.errorBars)!==null&&a!==void 0?a:[]}).filter(r=>Cq(t,r)));function Bq(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var LS=(e,t)=>t,BS=(e,t,r)=>r,Wde=Bt(RA,LS,BS,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(Bq)),Gde=Bt(FA,LS,BS,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(Bq)),Uq=(e,t)=>({width:e.width,height:t.height}),Yde=(e,t)=>{var r=typeof t.width=="number"?t.width:NS;return{width:r,height:e.height}},$q=Bt(Ni,gf,Uq),Kde=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Xde=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Qde=Bt(xf,Ni,Wde,LS,BS,(e,t,r,a,s)=>{var i={},o;return r.forEach(l=>{var c=Uq(t,l);o==null&&(o=Kde(t,a,e));var d=a==="top"&&!s||a==="bottom"&&s;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),Jde=Bt(pf,Ni,Gde,LS,BS,(e,t,r,a,s)=>{var i={},o;return r.forEach(l=>{var c=Yde(t,l);o==null&&(o=Xde(t,a,e));var d=a==="left"&&!s||a==="right"&&s;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),Zde=(e,t)=>{var r=Ni(e),a=gf(e,t);if(a!=null){var s=Qde(e,a.orientation,a.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},eue=(e,t)=>{var r=Ni(e),a=lp(e,t);if(a!=null){var s=Jde(e,a.orientation,a.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},Vq=Bt(Ni,lp,(e,t)=>{var r=typeof t.width=="number"?t.width:NS;return{width:r,height:e.height}}),qL=(e,t,r)=>{switch(t){case"xAxis":return $q(e,r).width;case"yAxis":return Vq(e,r).height;default:return}},qq=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=mf(e,a),c=t.map(d=>d.value);if(o&&l&&i==="category"&&s&&JU(c))return c}},FT=Bt([tn,FS,Ks,Ys],qq),zq=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=mf(e,a);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},LT=Bt([tn,FS,x1,Ys],zq),zL=Bt([tn,gde,xg,vg,FT,LT,g1,MT,Ys],(e,t,r,a,s,i,o,l,c)=>{if(t==null)return null;var d=mf(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:a}}),tue=(e,t,r,a,s,i,o,l,c)=>{if(!(t==null||a==null)){var d=mf(e,c),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,x=u==="category"&&a.bandwidth?a.bandwidth()/p:0;x=c==="angleAxis"&&i!=null&&i.length>=2?Mi(i[0]-i[1])*2*x:x;var g=h||s;if(g){var b=g.map((y,S)=>{var w=o?o.indexOf(y):y;return{index:S,coordinate:a(w)+x,value:y,offset:x}});return b.filter(y=>!Nl(y.coordinate))}return d&&l?l.map((y,S)=>({coordinate:a(y)+x,value:y,index:S,offset:x})):a.ticks?a.ticks(f).map(y=>({coordinate:a(y)+x,value:y,offset:x})):a.domain().map((y,S)=>({coordinate:a(y)+x,value:o?o[y]:y,index:S,offset:x}))}},Hq=Bt([tn,x1,xg,vg,MT,g1,FT,LT,Ys],tue),rue=(e,t,r,a,s,i,o)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var l=mf(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&a?.length>=2?Mi(a[0]-a[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:s?s[u]:u,index:h,offset:d}))}},Gm=Bt([tn,x1,vg,g1,FT,LT,Ys],rue),Ju=Bt(Ks,vg,(e,t)=>{if(!(e==null||t==null))return $w($w({},e),{},{scale:t})}),aue=Bt([Ks,xg,IT,Lq],PT);Bt((e,t,r)=>NT(e,r),aue,(e,t)=>{if(!(e==null||t==null))return $w($w({},e),{},{scale:t})});var nue=Bt([tn,RA,FA],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Wq=e=>e.options.defaultTooltipEventType,Gq=e=>e.options.validateTooltipEventTypes;function Yq(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function BT(e,t){var r=Wq(e),a=Gq(e);return Yq(t,r,a)}function sue(e){return Mr(t=>BT(t,e))}var Kq=(e,t)=>{var r,a=Number(t);if(!(Nl(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},iue=e=>e.tooltip.settings,Dm={active:!1,index:null,dataKey:void 0,coordinate:void 0},oue={itemInteraction:{click:Dm,hover:Dm},axisInteraction:{click:Dm,hover:Dm},keyboardInteraction:Dm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Xq=ed({name:"tooltip",initialState:oue,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Kh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:lue,removeTooltipEntrySettings:cue,setTooltipSettingsState:due,setActiveMouseOverItemIndex:Qq,mouseLeaveItem:uue,mouseLeaveChart:Jq,setActiveClickItemIndex:hue,setMouseOverAxisIndex:Zq,setMouseClickAxisIndex:fue,setSyncInteraction:O5,setKeyboardInteraction:M5}=Xq.actions,mue=Xq.reducer;function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(a){pue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pue(e,t,r){return(t=xue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xue(e){var t=vue(e,"string");return typeof t=="symbol"?t:t+""}function vue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gue(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function bue(e){return e.index!=null}var ez=(e,t,r,a)=>{if(t==null)return Dm;var s=gue(e,t,r);if(s==null)return Dm;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(bue(s)){if(i)return eN(eN({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return eN(eN({},Dm),{},{coordinate:s.coordinate})},UT=(e,t)=>{var r=e?.index;if(r==null)return null;var a=Number(r);if(!so(a))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(a,i)))},tz=(e,t,r,a,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=s?.[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},rz=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},b1=e=>e.options.tooltipPayloadSearcher,gg=e=>e.tooltip;function WL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function GL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WL(Object(r),!0).forEach(function(a){yue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yue(e,t,r){return(t=jue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jue(e){var t=Nue(e,"string");return typeof t=="symbol"?t:t+""}function Nue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wue(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Sue(e,t){return e??t}var az=(e,t,r,a,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var x,{dataDefinedOnItem:g,settings:b}=p,y=Sue(g,l),S=wue(y,d,u),w=(x=b?.dataKey)!==null&&x!==void 0?x:a?.dataKey,k=b?.nameKey,C;if(a!=null&&a.dataKey&&Array.isArray(S)&&!Array.isArray(S[0])&&o==="axis"?C=ZU(S,a.dataKey,s):C=i(S,t,c,k),Array.isArray(C))C.forEach(E=>{var A=GL(GL({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});f.push(_F({tooltipEntrySettings:A,dataKey:E.dataKey,payload:E.payload,value:qn(E.payload,E.dataKey),name:E.name}))});else{var D;f.push(_F({tooltipEntrySettings:b,dataKey:w,payload:C,value:qn(C,w),name:(D=qn(C,k))!==null&&D!==void 0?D:b?.name}))}return f},h)}},Ui=e=>{var t=tn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},bg=e=>e.tooltip.settings.axisId,io=e=>{var t=Ui(e),r=bg(e);return x1(e,t,r)},$T=Bt([io,tn,wq,xT,Ui],Rq),Cue=Bt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),kue=Bt([Ui,bg],wT),US=Bt([Cue,io,kue],ST),_ue=Bt([US],CT),Xx=Bt([_ue,Yx],kT),VT=Bt([Xx,io,US],_T),Eue=Bt([io],ET),Due=Bt([Xx,US,m1],kq),Aue=Bt([Due,Yx,Ui],_q),Tue=Bt([US],Sq),Iue=Bt([Xx,io,Tue,Ui],Eq),Pue=Bt([Dq,Ui,bg],pg),Oue=Bt([Pue,Ui],Iq),Mue=Bt([Aq,Ui,bg],pg),Rue=Bt([Mue,Ui],Pq),Fue=Bt([Tq,Ui,bg],pg),Lue=Bt([Fue,Ui],Oq),Bue=Bt([Oue,Lue,Rue],DT),Uue=Bt([io,Eue,Aue,Iue,Bue],AT),nz=Bt([io,tn,Xx,VT,m1,Ui,Uue],TT),$ue=Bt([nz,io,$T],OT),Vue=Bt([io,nz,$ue,Ui],RT),sz=e=>{var t=Ui(e),r=bg(e),a=!1;return g1(e,t,r,a)},iz=Bt([io,sz],PS),oz=Bt([io,$T,Vue,iz],PT),que=Bt([tn,VT,io,Ui],qq),zue=Bt([tn,VT,io,Ui],zq),Hue=(e,t,r,a,s,i,o,l)=>{if(t){var{type:c}=t,d=mf(e,l);if(a){var u=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,h=c==="category"&&a.bandwidth?a.bandwidth()/u:0;return h=l==="angleAxis"&&s!=null&&s?.length>=2?Mi(s[0]-s[1])*2*h:h,d&&o?o.map((f,p)=>({coordinate:a(f)+h,value:f,index:p,offset:h})):a.domain().map((f,p)=>({coordinate:a(f)+h,value:i?i[f]:f,index:p,offset:h}))}}},bf=Bt([tn,io,$T,oz,sz,que,zue,Ui],Hue),qT=Bt([Wq,Gq,iue],(e,t,r)=>Yq(r.shared,e,t)),lz=e=>e.tooltip.settings.trigger,zT=e=>e.tooltip.settings.defaultIndex,$S=Bt([gg,qT,lz,zT],ez),Ym=Bt([$S,Xx],UT),cz=Bt([bf,Ym],Kq),dz=Bt([$S],e=>{if(e)return e.dataKey}),uz=Bt([gg,qT,lz,zT],rz),Wue=Bt([pf,xf,tn,Ni,bf,zT,uz,b1],tz),Gue=Bt([$S,Wue],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Yue=Bt([$S],e=>e.active),Kue=Bt([uz,Ym,Yx,io,cz,b1,qT],az),Xue=Bt([Kue],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function KL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(a){Que(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Que(e,t,r){return(t=Jue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jue(e){var t=Zue(e,"string");return typeof t=="symbol"?t:t+""}function Zue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ehe=()=>Mr(io),the=()=>{var e=ehe(),t=Mr(bf),r=Mr(oz);return vy(KL(KL({},e),{},{scale:r}),t)},hz=()=>Mr(xT),HT=(e,t)=>t,fz=(e,t,r)=>r,WT=(e,t,r,a)=>a,rhe=Bt(bf,e=>pS(e,t=>t.coordinate)),GT=Bt([gg,HT,fz,WT],ez),mz=Bt([GT,Xx],UT),ahe=(e,t,r)=>{if(t!=null){var a=gg(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},pz=Bt([gg,HT,fz,WT],rz),Vw=Bt([pf,xf,tn,Ni,bf,WT,pz,b1],tz),nhe=Bt([GT,Vw],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),xz=Bt(bf,mz,Kq),she=Bt([pz,mz,Yx,io,xz,b1,HT],az),ihe=Bt([GT],e=>({isActive:e.active,activeIndex:e.index})),ohe=(e,t,r,a,s,i,o,l)=>{if(!(!e||!t||!a||!s||!i)){var c=_se(e.chartX,e.chartY,t,r,l);if(c){var d=Dse(c,t),u=pse(d,o,i,a,s),h=Ese(t,i,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function R5(){return R5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R5.apply(null,arguments)}function XL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function tN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(r),!0).forEach(function(a){lhe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lhe(e,t,r){return(t=che(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function che(e){var t=dhe(e,"string");return typeof t=="symbol"?t:t+""}function dhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uhe(e){var{coordinate:t,payload:r,index:a,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=r,f=a;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var p,x;if(d==="ScatterChart")p=u,x=kie;else if(d==="BarChart")p=_ie(o,u,s,i),x=vV;else if(o==="radial"){var{cx:g,cy:b,radius:y,startAngle:S,endAngle:w}=gV(u);p={cx:g,cy:b,startAngle:S,endAngle:w,innerRadius:y,outerRadius:y},x=yV}else p={points:foe(o,u,s)},x=Jb;var k=typeof l=="object"&&"className"in l?l.className:void 0,C=tN(tN(tN(tN({stroke:"#ccc",pointerEvents:"none"},s),p),Ma(l,!1)),{},{payload:h,payloadIndex:f,className:ia("recharts-tooltip-cursor",k)});return j.isValidElement(l)?j.cloneElement(l,C):j.createElement(x,C)}function hhe(e){var t=the(),r=cV(),a=CS(),s=hz();return j.createElement(uhe,R5({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:s}))}var vz=j.createContext(null),fhe=()=>j.useContext(vz),hE={exports:{}},QL;function mhe(){return QL||(QL=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,f),x=r?r+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],p]:c._events[x].push(p):(c._events[x]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,x=new Array(p);f<p;f++)x[f]=h[f].fn;return x},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,p,x){var g=r?r+d:d;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,S,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,f),!0;case 5:return b.fn.call(b.context,u,h,f,p),!0;case 6:return b.fn.call(b.context,u,h,f,p,x),!0}for(w=1,S=new Array(y-1);w<y;w++)S[w-1]=arguments[w];b.fn.apply(b.context,S)}else{var k=b.length,C;for(w=0;w<k;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),y){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,u);break;case 3:b[w].fn.call(b[w].context,u,h);break;case 4:b[w].fn.call(b[w].context,u,h,f);break;default:if(!S)for(C=1,S=new Array(y-1);C<y;C++)S[C-1]=arguments[C];b[w].fn.apply(b[w].context,S)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var x=this._events[p];if(x.fn)x.fn===u&&(!f||x.once)&&(!h||x.context===h)&&o(this,p);else{for(var g=0,b=[],y=x.length;g<y;g++)(x[g].fn!==u||f&&!x[g].once||h&&x[g].context!==h)&&b.push(x[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(hE)),hE.exports}var phe=mhe();const xhe=Vd(phe);var Cy=new xhe,F5="recharts.syncEvent.tooltip",JL="recharts.syncEvent.brush";function YT(e,t){if(t){var r=Number.parseInt(t,10);if(!Nl(r))return e?.[r]}}var vhe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},gz=ed({name:"options",initialState:vhe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ghe=gz.reducer,{createEventEmitter:bhe}=gz.actions;function yhe(e){return e.tooltip.syncInteraction}var jhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},bz=ed({name:"chartData",initialState:jhe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:ZL,setDataStartEndIndexes:Nhe,setComputedData:KUe}=bz.actions,whe=bz.reducer,yz=()=>{};function She(){var e=Mr(vT),t=Mr(gT),r=rs(),a=Mr(gq),s=Mr(bf),i=CS(),o=LA(),l=Mr(c=>c.rootProps.className);j.useEffect(()=>{if(e==null)return yz;var c=(d,u,h)=>{if(t!==h&&e===d){if(a==="index"){r(u);return}if(s!=null){var f;if(typeof a=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},x=a(s,p);f=s[x]}else a==="value"&&(f=s.find(D=>String(D.value)===u.payload.label));var{coordinate:g}=u.payload;if(f==null||u.payload.active===!1||g==null||o==null){r(O5({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,S=Math.min(b,o.x+o.width),w=Math.min(y,o.y+o.height),k={x:i==="horizontal"?f.coordinate:S,y:i==="horizontal"?w:f.coordinate},C=O5({active:u.payload.active,coordinate:k,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(C)}}};return Cy.on(F5,c),()=>{Cy.off(F5,c)}},[l,r,t,e,a,s,i,o])}function Che(){var e=Mr(vT),t=Mr(gT),r=rs();j.useEffect(()=>{if(e==null)return yz;var a=(s,i,o)=>{t!==o&&e===s&&r(Nhe(i))};return Cy.on(JL,a),()=>{Cy.off(JL,a)}},[r,t,e])}function khe(){var e=rs();j.useEffect(()=>{e(bhe())},[e]),She(),Che()}function _he(e,t,r,a,s,i){var o=Mr(f=>ahe(f,e,t)),l=Mr(gT),c=Mr(vT),d=Mr(gq),u=Mr(yhe),h=u?.active;j.useEffect(()=>{if(!h&&c!=null&&l!=null){var f=O5({active:i,coordinate:r,dataKey:o,index:s,label:typeof a=="number"?String(a):a});Cy.emit(F5,c,f,l)}},[h,r,o,s,a,l,c,d,i])}function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(a){Ehe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ehe(e,t,r){return(t=Dhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dhe(e){var t=Ahe(e,"string");return typeof t=="symbol"?t:t+""}function Ahe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function The(e){return e.dataKey}function Ihe(e,t){return j.isValidElement(e)?j.cloneElement(e,t):typeof e=="function"?j.createElement(e,t):j.createElement(nie,t)}var r6=[],Phe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Hx.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function rN(e){var t=td(e,Phe),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:x,cursor:g,shared:b,trigger:y,defaultIndex:S,portal:w,axisId:k}=t,C=rs(),D=typeof S=="number"?String(S):S;j.useEffect(()=>{C(due({shared:b,trigger:y,axisId:k,active:r,defaultIndex:D}))},[C,b,y,k,r,D]);var E=LA(),A=fV(),I=sue(b),{activeIndex:L,isActive:P}=Mr(ee=>ihe(ee,I,y,D)),O=Mr(ee=>she(ee,I,y,D)),Y=Mr(ee=>xz(ee,I,y,D)),q=Mr(ee=>nhe(ee,I,y,D)),K=O,U=fhe(),J=r??P,[F,X]=T$([K,J]),Q=I==="axis"?Y:void 0;_he(I,y,q,Q,L,J);var ie=w??U;if(ie==null)return null;var M=K??r6;J||(M=r6),l&&M.length&&(M=k$(K.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),u,The));var V=M.length>0,W=j.createElement(uie,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:c,active:J,coordinate:q,hasPayload:V,offset:d,position:h,reverseDirection:f,useTranslate3d:p,viewBox:E,wrapperStyle:x,lastBoundingBox:F,innerRef:X,hasPortalFromProps:!!w},Ihe(o,t6(t6({},t),{},{payload:M,label:Q,active:J,coordinate:q,accessibilityLayer:A})));return j.createElement(j.Fragment,null,a1.createPortal(W,ie),J&&j.createElement(hhe,{cursor:g,tooltipEventType:I,coordinate:q,payload:K,index:L}))}var fE={},mE={},a6;function Ohe(){return a6||(a6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=0,s={}){typeof s!="object"&&(s={});let i=null,o=null,l=null,c=0,d=null,u;const{leading:h=!1,trailing:f=!0,maxWait:p}=s,x="maxWait"in s,g=x?Math.max(Number(p)||0,a):0,b=E=>(i!==null&&(u=r.apply(o,i)),i=o=null,c=E,u),y=E=>(c=E,d=setTimeout(C,a),h&&i!==null?b(E):u),S=E=>(d=null,f&&i!==null?b(E):u),w=E=>{if(l===null)return!0;const A=E-l,I=A>=a||A<0,L=x&&E-c>=g;return I||L},k=E=>{const A=l===null?0:E-l,I=a-A,L=g-(E-c);return x?Math.min(I,L):I},C=()=>{const E=Date.now();if(w(E))return S(E);d=setTimeout(C,k(E))},D=function(...E){const A=Date.now(),I=w(A);if(i=E,o=this,l=A,I){if(d===null)return y(A);if(x)return clearTimeout(d),d=setTimeout(C,a),b(A)}return d===null&&(d=setTimeout(C,a)),u};return D.cancel=()=>{d!==null&&clearTimeout(d),c=0,l=i=o=d=null},D.flush=()=>d===null?u:S(Date.now()),D}e.debounce=t}(mE)),mE}var n6;function Mhe(){return n6||(n6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ohe();function r(a,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r}(fE)),fE}var pE,s6;function Rhe(){return s6||(s6=1,pE=Mhe().throttle),pE}var Fhe=Rhe();const Lhe=Vd(Fhe);var Zb=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(a){Bhe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Bhe(e,t,r){return(t=Uhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uhe(e){var t=$he(e,"string");return typeof t=="symbol"?t:t+""}function $he(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aN=j.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:p,style:x={}}=e,g=j.useRef(null),b=j.useRef();b.current=p,j.useImperativeHandle(t,()=>g.current);var[y,S]=j.useState({containerWidth:a.width,containerHeight:a.height}),w=j.useCallback((C,D)=>{S(E=>{var A=Math.round(C),I=Math.round(D);return E.containerWidth===A&&E.containerHeight===I?E:{containerWidth:A,containerHeight:I}})},[]);j.useEffect(()=>{var C=I=>{var L,{width:P,height:O}=I[0].contentRect;w(P,O),(L=b.current)===null||L===void 0||L.call(b,P,O)};u>0&&(C=Lhe(C,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(C),{width:E,height:A}=g.current.getBoundingClientRect();return w(E,A),D.observe(g.current),()=>{D.disconnect()}},[w,u]);var k=j.useMemo(()=>{var{containerWidth:C,containerHeight:D}=y;if(C<0||D<0)return null;Zb(rx(s)||rx(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Zb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=rx(s)?C:s,A=rx(i)?D:i;return r&&r>0&&(E?A=E/r:A&&(E=A*r),c&&A>c&&(A=c)),Zb(E>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,A,s,i,o,l,r),j.Children.map(d,I=>j.cloneElement(I,{width:E,height:A,style:xE({width:E,height:A},I.props.style)}))},[r,d,i,c,l,o,y,s]);return j.createElement("div",{id:h?"".concat(h):void 0,className:ia("recharts-responsive-container",f),style:xE(xE({},x),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},j.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),Am=e=>null;Am.displayName="Cell";function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function L5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(a){Vhe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vhe(e,t,r){return(t=qhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=zhe(e,"string");return typeof t=="symbol"?t:t+""}function zhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vv={widthCache:{},cacheCount:0},Hhe=2e3,Whe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},l6="recharts_measurement_span";function Ghe(e){var t=L5({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var ey=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Hx.isSsr)return{width:0,height:0};var a=Ghe(r),s=JSON.stringify({text:t,copyStyle:a});if(Vv.widthCache[s])return Vv.widthCache[s];try{var i=document.getElementById(l6);i||(i=document.createElement("span"),i.setAttribute("id",l6),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=L5(L5({},Whe),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Vv.widthCache[s]=c,++Vv.cacheCount>Hhe&&(Vv.cacheCount=0,Vv.widthCache={}),c}catch{return{width:0,height:0}}},c6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Yhe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Khe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Xhe=Object.keys(jz),c0="NaN";function Qhe(e,t){return e*jz[t]}class fl{static parse(t){var r,[,a,s]=(r=Khe.exec(t))!==null&&r!==void 0?r:[];return new fl(parseFloat(a),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Nl(t)&&(this.unit=""),r!==""&&!Yhe.test(r)&&(this.num=NaN,this.unit=""),Xhe.includes(r)&&(this.num=Qhe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new fl(NaN,""):new fl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new fl(NaN,""):new fl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new fl(NaN,""):new fl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new fl(NaN,""):new fl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Nl(this.num)}}function Nz(e){if(e.includes(c0))return c0;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,s,i]=(r=c6.exec(t))!==null&&r!==void 0?r:[],o=fl.parse(a??""),l=fl.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return c0;t=t.replace(c6,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,f]=(d=d6.exec(t))!==null&&d!==void 0?d:[],p=fl.parse(u??""),x=fl.parse(f??""),g=h==="+"?p.add(x):p.subtract(x);if(g.isNaN())return c0;t=t.replace(d6,g.toString())}return t}var u6=/\(([^()]*)\)/;function Jhe(e){for(var t=e,r;(r=u6.exec(t))!=null;){var[,a]=r;t=t.replace(u6,Nz(a))}return t}function Zhe(e){var t=e.replace(/\s+/g,"");return t=Jhe(t),t=Nz(t),t}function efe(e){try{return Zhe(e)}catch{return c0}}function vE(e){var t=efe(e.slice(5,-1));return t===c0?"":t}var tfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],rfe=["dx","dy","angle","className","breakAll"];function B5(){return B5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B5.apply(null,arguments)}function h6(e,t){if(e==null)return{};var r,a,s=afe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function afe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var wz=/[ \f\n\r\t\v\u2028\u2029]+/,Sz=e=>{var{children:t,breakAll:r,style:a}=e;try{var s=[];Rn(t)||(r?s=t.toString().split(""):s=t.toString().split(wz));var i=s.map(l=>({word:l,width:ey(l,a).width})),o=r?0:ey("",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},nfe=(e,t,r,a,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Cr(i),u=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((O,Y)=>{var{word:q,width:K}=Y,U=O[O.length-1];if(U&&(a==null||s||U.width+K+r<Number(a)))U.words.push(q),U.width+=K+r;else{var J={words:[q],width:K};O.push(J)}return O},[])},f=h(t),p=L=>L.reduce((P,O)=>P.width>O.width?P:O);if(!d||s)return f;var x=f.length>i||p(f).width>Number(a);if(!x)return f;for(var g="",b=L=>{var P=u.slice(0,L),O=Sz({breakAll:c,style:l,children:P+g}).wordsWithComputedWidth,Y=h(O),q=Y.length>i||p(Y).width>Number(a);return[q,Y]},y=0,S=u.length-1,w=0,k;y<=S&&w<=u.length-1;){var C=Math.floor((y+S)/2),D=C-1,[E,A]=b(D),[I]=b(C);if(!E&&!I&&(y=C+1),E&&I&&(S=C-1),!E&&I){k=A;break}w++}return k||f},f6=e=>{var t=Rn(e)?[]:e.toString().split(wz);return[{words:t}]},sfe=e=>{var{width:t,scaleToFit:r,children:a,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Hx.isSsr){var l,c,d=Sz({breakAll:i,children:a,style:s});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return f6(a);return nfe({breakAll:i,children:a,maxLines:o,style:s},l,c,t,r)}return f6(a)},m6="#808080",VS=j.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=m6}=e,u=h6(e,tfe),h=j.useMemo(()=>sfe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:x,className:g,breakAll:b}=u,y=h6(u,rfe);if(!Xu(r)||!Xu(a))return null;var S=r+(Cr(f)?f:0),w=a+(Cr(p)?p:0),k;switch(c){case"start":k=vE("calc(".concat(i,")"));break;case"middle":k=vE("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:k=vE("calc(".concat(h.length-1," * -").concat(s,")"));break}var C=[];if(o){var D=h[0].width,{width:E}=u;C.push("scale(".concat(Cr(E)?E/D:1,")"))}return x&&C.push("rotate(".concat(x,", ").concat(S,", ").concat(w,")")),C.length&&(y.transform=C.join(" ")),j.createElement("text",B5({},Ma(y,!0),{ref:t,x:S,y:w,className:ia("recharts-text",g),textAnchor:l,fill:d.includes("url")?m6:d}),h.map((A,I)=>{var L=A.words.join(b?"":" ");return j.createElement("tspan",{x:S,dy:I===0?k:s,key:"".concat(L,"-").concat(I)},L)}))});VS.displayName="Text";var ife=["offset"],ofe=["labelRef"];function p6(e,t){if(e==null)return{};var r,a,s=lfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lfe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function x6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x6(Object(r),!0).forEach(function(a){cfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cfe(e,t,r){return(t=dfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dfe(e){var t=ufe(e,"string");return typeof t=="symbol"?t:t+""}function ufe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qh.apply(null,arguments)}var hfe=e=>{var{value:t,formatter:r}=e,a=Rn(e.children)?t:e.children;return typeof r=="function"?r(a):a},KT=e=>e!=null&&typeof e=="function",ffe=(e,t)=>{var r=Mi(t-e),a=Math.min(Math.abs(t-e),360);return r*a},mfe=(e,t,r)=>{var{position:a,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=s,x=(d+u)/2,g=ffe(h,f),b=g>=0?1:-1,y,S;a==="insideStart"?(y=h+b*i,S=p):a==="insideEnd"?(y=f-b*i,S=!p):a==="end"&&(y=f+b*i,S=p),S=g<=0?S:!S;var w=ci(l,c,x,y),k=ci(l,c,x,y+(S?1:-1)*359),C="M".concat(w.x,",").concat(w.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),D=Rn(e.id)?Dx("recharts-radial-line-"):e.id;return j.createElement("text",qh({},r,{dominantBaseline:"central",className:ia("recharts-radial-bar-label",o)}),j.createElement("defs",null,j.createElement("path",{id:D,d:C})),j.createElement("textPath",{xlinkHref:"#".concat(D)},t))},pfe=e=>{var{viewBox:t,offset:r,position:a}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(a==="outside"){var{x:h,y:f}=ci(s,i,l+r,u);return{x:h,y:f,textAnchor:h>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x,y:g}=ci(s,i,p,u);return{x,y:g,textAnchor:"middle",verticalAnchor:"middle"}},xfe=(e,t)=>{var{parentViewBox:r,offset:a,position:s}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*a,h=d>0?"end":"start",f=d>0?"start":"end",p=l>=0?1:-1,x=p*a,g=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var y={x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:h};return ni(ni({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var S={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:f};return ni(ni({},S),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return ni(ni({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var k={x:i+l+x,y:o+c/2,textAnchor:b,verticalAnchor:"middle"};return ni(ni({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:c}:{})}var C=r?{width:l,height:c}:{};return s==="insideLeft"?ni({x:i+x,y:o+c/2,textAnchor:b,verticalAnchor:"middle"},C):s==="insideRight"?ni({x:i+l-x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},C):s==="insideTop"?ni({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:f},C):s==="insideBottom"?ni({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},C):s==="insideTopLeft"?ni({x:i+x,y:o+u,textAnchor:b,verticalAnchor:f},C):s==="insideTopRight"?ni({x:i+l-x,y:o+u,textAnchor:g,verticalAnchor:f},C):s==="insideBottomLeft"?ni({x:i+x,y:o+c-u,textAnchor:b,verticalAnchor:h},C):s==="insideBottomRight"?ni({x:i+l-x,y:o+c-u,textAnchor:g,verticalAnchor:h},C):s&&typeof s=="object"&&(Cr(s.x)||rx(s.x))&&(Cr(s.y)||rx(s.y))?ni({x:i+Xo(s.x,l),y:o+Xo(s.y,c),textAnchor:"end",verticalAnchor:"end"},C):ni({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},C)},vfe=e=>"cx"in e&&Cr(e.cx);function Kl(e){var{offset:t=5}=e,r=p6(e,ife),a=ni({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:h}=a,f=LA(),p=s||f;if(!p||Rn(o)&&Rn(l)&&!j.isValidElement(c)&&typeof c!="function")return null;if(j.isValidElement(c)){var{labelRef:x}=a,g=p6(a,ofe);return j.cloneElement(c,g)}var b;if(typeof c=="function"){if(b=j.createElement(c,a),j.isValidElement(b))return b}else b=hfe(a);var y=vfe(p),S=Ma(a,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return mfe(a,b,S);var w=y?pfe(a):xfe(a,p);return j.createElement(VS,qh({ref:h,className:ia("recharts-label",d)},S,w,{breakAll:u}),b)}Kl.displayName="Label";var Cz=e=>{var{cx:t,cy:r,angle:a,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:h,top:f,left:p,width:x,height:g,clockWise:b,labelViewBox:y}=e;if(y)return y;if(Cr(x)&&Cr(g)){if(Cr(u)&&Cr(h))return{x:u,y:h,width:x,height:g};if(Cr(f)&&Cr(p))return{x:f,y:p,width:x,height:g}}if(Cr(u)&&Cr(h))return{x:u,y:h,width:0,height:0};if(Cr(t)&&Cr(r))return{cx:t,cy:r,startAngle:s||a||0,endAngle:i||a||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:b};if(e.viewBox)return e.viewBox},gfe=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?j.createElement(Kl,qh({key:"label-implicit"},a)):Xu(e)?j.createElement(Kl,qh({key:"label-implicit",value:e},a)):j.isValidElement(e)?e.type===Kl?j.cloneElement(e,ni({key:"label-implicit"},a)):j.createElement(Kl,qh({key:"label-implicit",content:e},a)):KT(e)?j.createElement(Kl,qh({key:"label-implicit",content:e},a)):e&&typeof e=="object"?j.createElement(Kl,qh({},e,{key:"label-implicit"},a)):null},bfe=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:s,labelRef:i}=t,o=Cz(t),l=l1(s,Kl).map((d,u)=>j.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!a)return l;var c=gfe(t.label,r||o,i);return[c,...l]};Kl.parseViewBox=Cz;Kl.renderCallByParent=bfe;var gE={},bE={},v6;function yfe(){return v6||(v6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(bE)),bE}var yE={},g6;function jfe(){return g6||(g6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(yE)),yE}var b6;function Nfe(){return b6||(b6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yfe(),r=jfe(),a=SA();function s(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(gE)),gE}var jE,y6;function wfe(){return y6||(y6=1,jE=Nfe().last),jE}var Sfe=wfe();const Cfe=Vd(Sfe);var kfe=["valueAccessor"],_fe=["data","dataKey","clockWise","id","textBreakAll"];function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qw.apply(null,arguments)}function j6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function N6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(r),!0).forEach(function(a){Efe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Efe(e,t,r){return(t=Dfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dfe(e){var t=Afe(e,"string");return typeof t=="symbol"?t:t+""}function Afe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w6(e,t){if(e==null)return{};var r,a,s=Tfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tfe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Ife=e=>Array.isArray(e.value)?Cfe(e.value):e.value;function Lm(e){var{valueAccessor:t=Ife}=e,r=w6(e,kfe),{data:a,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=w6(r,_fe);return!a||!a.length?null:j.createElement(Gs,{className:"recharts-label-list"},a.map((d,u)=>{var h=Rn(s)?t(d,u):qn(d&&d.payload,s),f=Rn(o)?{}:{id:"".concat(o,"-").concat(u)};return j.createElement(Kl,qw({},Ma(d,!0),c,f,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:Kl.parseViewBox(Rn(i)?d:N6(N6({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}Lm.displayName="LabelList";function Pfe(e,t){return e?e===!0?j.createElement(Lm,{key:"labelList-implicit",data:t}):j.isValidElement(e)||KT(e)?j.createElement(Lm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?j.createElement(Lm,qw({data:t},e,{key:"labelList-implicit"})):null:null}function Ofe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,s=l1(a,Lm).map((o,l)=>j.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=Pfe(e.label,t);return[i,...s]}Lm.renderCallByParent=Ofe;function U5(){return U5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U5.apply(null,arguments)}var kz=e=>{var{cx:t,cy:r,r:a,className:s}=e,i=ia("recharts-dot",s);return t===+t&&r===+r&&a===+a?j.createElement("circle",U5({},Ma(e,!1),xA(e),{className:i,cx:t,cy:r,r:a})):null},_z=e=>e.graphicalItems.polarItems,Mfe=Bt([Ys,p1],wT),XT=Bt([_z,Ks,Mfe],ST),Rfe=Bt([XT],CT),QT=Bt([Rfe,hT],kT),Ffe=Bt([QT,Ks,XT],_T),Lfe=Bt([QT,Ks,XT],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(s=>{var i,o=qn(a,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:qn(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),S6=()=>{},Bfe=Bt([Ks,Mq,S6,Lfe,S6],AT),Ez=Bt([Ks,tn,QT,Ffe,m1,Ys,Bfe],TT),Ufe=Bt([Ez,Ks,xg],OT);Bt([Ks,Ez,Ufe,Ys],RT);var $fe={radiusAxis:{},angleAxis:{}},Dz=ed({name:"polarAxis",initialState:$fe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:XUe,removeRadiusAxis:QUe,addAngleAxis:JUe,removeAngleAxis:ZUe}=Dz.actions,Vfe=Dz.reducer;function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(a){qfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qfe(e,t,r){return(t=zfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zfe(e){var t=Hfe(e,"string");return typeof t=="symbol"?t:t+""}function Hfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JT=(e,t)=>t,Wfe=[],ZT=(e,t,r)=>r?.length===0?Wfe:r,Az=Bt([hT,JT,ZT],(e,t,r)=>{var{chartData:a}=e,s;if(t?.data!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&r!=null&&(s=r.map(i=>k6(k6({},t.presentationProps),i.props))),s!=null)return s}),Gfe=Bt([Az,JT,ZT],(e,t,r)=>{if(e!=null)return e.map((a,s)=>{var i,o=qn(a,t.nameKey,t.name),l;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:ug(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),Yfe=Bt([_z,JT],(e,t)=>{if(e.some(r=>r.type==="pie"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),Kfe=Bt([Az,Yfe,ZT,Ni],(e,t,r,a)=>{if(!(t==null||e==null))return Ume({offset:a,pieSettings:t,displayedData:e,cells:r})}),Xfe={countOfBars:0,cartesianItems:[],polarItems:[]},Tz=ed({name:"graphicalItems",initialState:Xfe,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,s=Kh(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=a)},removeCartesianGraphicalItem(e,t){var r=Kh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Kh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:Qfe,removeBar:Jfe,addCartesianGraphicalItem:Zfe,replaceCartesianGraphicalItem:eme,removeCartesianGraphicalItem:tme,addPolarGraphicalItem:rme,removePolarGraphicalItem:ame}=Tz.actions,nme=Tz.reducer;function _6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function E6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(r),!0).forEach(function(a){sme(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sme(e,t,r){return(t=ime(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ime(e){var t=ome(e,"string");return typeof t=="symbol"?t:t+""}function ome(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lme(e){var t=rs(),r=j.useRef(null);return j.useEffect(()=>{var a=E6(E6({},e),{},{stackId:MA(e.stackId)});r.current===null?t(Zfe(a)):r.current!==a&&t(eme({prev:r.current,next:a})),r.current=a},[t,e]),j.useEffect(()=>()=>{r.current&&(t(tme(r.current)),r.current=null)},[t]),null}function cme(e){var t=rs();return j.useEffect(()=>(t(rme(e)),()=>{t(ame(e))}),[t,e]),null}var NE={},D6;function dme(){return D6||(D6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${s}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(NE)),NE}var wE,A6;function ume(){return A6||(A6=1,wE=dme().isPlainObject),wE}var hme=ume();const fme=Vd(hme);function zw(){return zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zw.apply(null,arguments)}var T6=(e,t,r,a,s)=>{var i=r-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-a,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},mme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pme=e=>{var t=td(e,mme),r=j.useRef(),[a,s]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||l===0&&c===0||d===0)return null;var g=ia("recharts-trapezoid",u);return x?j.createElement(Wm,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:f,animationEasing:h,isActive:x},b=>{var{upperWidth:y,lowerWidth:S,height:w,x:k,y:C}=b;return j.createElement(Wm,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},j.createElement("path",zw({},Ma(t,!0),{className:g,d:T6(k,C,y,S,w),ref:r})))}):j.createElement("g",null,j.createElement("path",zw({},Ma(t,!0),{className:g,d:T6(i,o,l,c,d)})))},xme=["option","shapeType","propTransformer","activeClassName","isActive"];function vme(e,t){if(e==null)return{};var r,a,s=gme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gme(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function I6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Hw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I6(Object(r),!0).forEach(function(a){bme(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bme(e,t,r){return(t=yme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yme(e){var t=jme(e,"string");return typeof t=="symbol"?t:t+""}function jme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nme(e,t){return Hw(Hw({},t),e)}function wme(e,t){return e==="symbols"}function P6(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return j.createElement(vV,r);case"trapezoid":return j.createElement(pme,r);case"sector":return j.createElement(yV,r);case"symbols":if(wme(t))return j.createElement(jA,r);break;default:return null}}function Sme(e){return j.isValidElement(e)?e.props:e}function Iz(e){var{option:t,shapeType:r,propTransformer:a=Nme,activeClassName:s="recharts-active-shape",isActive:i}=e,o=vme(e,xme),l;if(j.isValidElement(t))l=j.cloneElement(t,Hw(Hw({},o),Sme(t)));else if(typeof t=="function")l=t(o);else if(fme(t)&&typeof t!="boolean"){var c=a(t,o);l=j.createElement(P6,{shapeType:r,elementProps:c})}else{var d=o;l=j.createElement(P6,{shapeType:r,elementProps:d})}return i?j.createElement(Gs,{className:s},l):l}var e4=(e,t)=>{var r=rs();return(a,s)=>i=>{e?.(a,s,i),r(Qq({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},t4=e=>{var t=rs();return(r,a)=>s=>{e?.(r,a,s),t(uue())}},r4=(e,t)=>{var r=rs();return(a,s)=>i=>{e?.(a,s,i),r(hue({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function a4(e){var{fn:t,args:r}=e,a=rs(),s=Jo();return j.useEffect(()=>{if(!s){var i=t(r);return a(lue(i)),()=>{a(cue(i))}}},[t,r,a,s]),null}var Pz=()=>{};function Oz(e){var{legendPayload:t}=e,r=rs(),a=Jo();return j.useEffect(()=>a?Pz:(r(uV(t)),()=>{r(hV(t))}),[r,a,t]),null}function Cme(e){var{legendPayload:t}=e,r=rs(),a=Mr(tn);return j.useEffect(()=>a!=="centric"&&a!=="radial"?Pz:(r(uV(t)),()=>{r(hV(t))}),[r,a,t]),null}function n4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=j.useRef(Dx(t)),a=j.useRef(e);return a.current!==e&&(r.current=Dx(t),a.current=e),r.current}var kme=["onMouseEnter","onClick","onMouseLeave"];function _me(e,t){if(e==null)return{};var r,a,s=Eme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Eme(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function O6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(r),!0).forEach(function(a){qS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qS(e,t,r){return(t=Dme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dme(e){var t=Ame(e,"string");return typeof t=="symbol"?t:t+""}function Ame(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Px.apply(null,arguments)}function Tme(e){var t=j.useMemo(()=>Ma(e,!1),[e]),r=j.useMemo(()=>l1(e.children,Am),[e.children]),a=j.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),s=Mr(i=>Gfe(i,a,r));return j.createElement(Cme,{legendPayload:s})}function Ime(e){var{dataKey:t,nameKey:r,sectors:a,stroke:s,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:a?.map(u=>u.tooltipPayload),positions:a?.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:ug(l,t),hide:c,type:d,color:o,unit:""}}}var Pme=(e,t)=>e>t?"start":e<t?"end":"middle",Ome=(e,t,r)=>typeof t=="function"?t(e):Xo(t,r,r*.8),Mme=(e,t,r)=>{var{top:a,left:s,width:i,height:o}=t,l=rV(i,o),c=s+Xo(e.cx,i,i/2),d=a+Xo(e.cy,o,o/2),u=Xo(e.innerRadius,l,0),h=Ome(r,e.outerRadius,l),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:h,maxRadius:f}},Rme=(e,t)=>{var r=Mi(t-e),a=Math.min(Math.abs(t-e),360);return r*a},Fme=(e,t)=>{if(j.isValidElement(e))return j.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ia("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return j.createElement(Jb,Px({},t,{type:"linear",className:r}))},Lme=(e,t,r)=>{if(j.isValidElement(e))return j.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),j.isValidElement(a)))return a;var s=ia("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return j.createElement(VS,Px({},t,{alignmentBaseline:"middle",className:s}),a)};function Bme(e){var{sectors:t,props:r,showLabels:a}=e,{label:s,labelLine:i,dataKey:o}=r;if(!a||!s||!t)return null;var l=Ma(r,!1),c=Ma(s,!1),d=Ma(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,h=t.map((f,p)=>{var x=(f.startAngle+f.endAngle)/2,g=ci(f.cx,f.cy,f.outerRadius+u,x),b=Ss(Ss(Ss(Ss({},l),f),{},{stroke:"none"},c),{},{index:p,textAnchor:Pme(g.x,f.cx)},g),y=Ss(Ss(Ss(Ss({},l),f),{},{fill:"none",stroke:f.fill},d),{},{index:p,points:[ci(f.cx,f.cy,f.outerRadius,x),g],key:"line"});return j.createElement(Gs,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},i&&Fme(i,y),Lme(s,b,qn(f,o)))});return j.createElement(Gs,{className:"recharts-pie-labels"},h)}function Mz(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:s,showLabels:i}=e,o=Mr(Ym),{onMouseEnter:l,onClick:c,onMouseLeave:d}=s,u=_me(s,kme),h=e4(l,s.dataKey),f=t4(d),p=r4(c,s.dataKey);return t==null?null:j.createElement(j.Fragment,null,t.map((x,g)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var b=r&&String(g)===o,y=o?a:null,S=b?r:y,w=Ss(Ss({},x),{},{stroke:x.stroke,tabIndex:-1,[iV]:g,[oV]:s.dataKey});return j.createElement(Gs,Px({tabIndex:-1,className:"recharts-pie-sector"},o1(u,x,g),{onMouseEnter:h(x,g),onMouseLeave:f(x,g),onClick:p(x,g),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(g)}),j.createElement(Iz,Px({option:S,isActive:b,shapeType:"sector"},w)))}),j.createElement(Bme,{sectors:t,props:s,showLabels:i}))}function Ume(e){var t,{pieSettings:r,displayedData:a,cells:s,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=Rme(l,c),x=Math.abs(p),g=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=a.filter(D=>qn(D,d,0)!==0).length,y=(x>=360?b:b-1)*g,S=x-b*f-y,w=a.reduce((D,E)=>{var A=qn(E,d,0);return D+(Cr(A)?A:0)},0),k;if(w>0){var C;k=a.map((D,E)=>{var A=qn(D,d,0),I=qn(D,u,E),L=Mme(r,i,D),P=(Cr(A)?A:0)/w,O,Y=Ss(Ss({},D),s&&s[E]&&s[E].props);E?O=C.endAngle+Mi(p)*g*(A!==0?1:0):O=l;var q=O+Mi(p)*((A!==0?f:0)+P*S),K=(O+q)/2,U=(L.innerRadius+L.outerRadius)/2,J=[{name:I,value:A,payload:Y,dataKey:d,type:h}],F=ci(L.cx,L.cy,U,K);return C=Ss(Ss(Ss(Ss({},r.presentationProps),{},{percent:P,cornerRadius:o,name:I,tooltipPayload:J,midAngle:K,middleRadius:U,tooltipPosition:F},Y),L),{},{value:qn(D,d),startAngle:O,endAngle:q,payload:Y,paddingAngle:Mi(p)*g}),C})}return k}function $me(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=t,f=n4(t,"recharts-pie-"),p=r.current,[x,g]=j.useState(!0),b=j.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=j.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return j.createElement(Wm,{begin:i,duration:o,isActive:s,easing:l,from:{t:0},to:{t:1},onAnimationStart:y,onAnimationEnd:b,key:f},S=>{var{t:w}=S,k=[],C=a&&a[0],D=C.startAngle;return a.forEach((E,A)=>{var I=p&&p[A],L=A>0?Hm(E,"paddingAngle",0):0;if(I){var P=_m(I.endAngle-I.startAngle,E.endAngle-E.startAngle),O=Ss(Ss({},E),{},{startAngle:D+L,endAngle:D+P(w)+L});k.push(O),D=O.endAngle}else{var{endAngle:Y,startAngle:q}=E,K=_m(0,Y-q),U=K(w),J=Ss(Ss({},E),{},{startAngle:D+L,endAngle:D+U+L});k.push(J),D=J.endAngle}}),r.current=k,j.createElement(Gs,null,j.createElement(Mz,{sectors:k,activeShape:c,inactiveShape:d,allOtherPieProps:t,showLabels:!x}))})}function Vme(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:s}=e,i=j.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?j.createElement($me,{props:e,previousSectorsRef:i}):j.createElement(Mz,{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function qme(e){var{hide:t,className:r,rootTabIndex:a}=e,s=ia("recharts-pie",r);return t?null:j.createElement(Gs,{tabIndex:a,className:s},j.createElement(Vme,e))}var Rz={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Hx.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function zme(e){var t=td(e,Rz),r=j.useMemo(()=>l1(e.children,Am),[e.children]),a=Ma(t,!1),s=j.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:a}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,a]),i=Mr(o=>Kfe(o,s,r));return j.createElement(j.Fragment,null,j.createElement(a4,{fn:Ime,args:Ss(Ss({},t),{},{sectors:i})}),j.createElement(qme,Px({},t,{sectors:i})))}class Ww extends j.PureComponent{constructor(){super(...arguments),qS(this,"id",Dx("recharts-pie-"))}render(){return j.createElement(j.Fragment,null,j.createElement(cme,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),j.createElement(Tme,this.props),j.createElement(zme,this.props),this.props.children)}}qS(Ww,"displayName","Pie");qS(Ww,"defaultProps",Rz);var Hme=Bt([Ni],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Wme=Bt([Hme,pf,xf],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Gme=e=>{var t=Jo();return Mr(r=>Ju(r,"xAxis",e,t))},Yme=e=>{var t=Jo();return Mr(r=>Ju(r,"yAxis",e,t))},s4=()=>Mr(Wme),Kme=()=>Mr(Xue);function M6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function R6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M6(Object(r),!0).forEach(function(a){Xme(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Xme(e,t,r){return(t=Qme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qme(e){var t=Jme(e,"string");return typeof t=="symbol"?t:t+""}function Jme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zme=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=R6(R6({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ma(s,!1)),xA(s)),l;return j.isValidElement(s)?l=j.cloneElement(s,o):typeof s=="function"?l=s(o):l=j.createElement(kz,o),j.createElement(Gs,{className:"recharts-active-dot"},l)};function F6(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:s}=e,i=Mr(Ym),o=Kme();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Rn(l)?null:Zme({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:a})}var epe=()=>{var e=rs();return j.useEffect(()=>(e(Qfe()),()=>{e(Jfe())})),null},tpe=["children"];function rpe(e,t){if(e==null)return{};var r,a,s=ape(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ape(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var L6=()=>{},Fz=j.createContext({addErrorBar:L6,removeErrorBar:L6}),npe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Lz=j.createContext(npe);function spe(e){var{children:t}=e,r=rpe(e,tpe);return j.createElement(Lz.Provider,{value:r},t)}var ipe=()=>j.useContext(Lz),Bz=e=>{var{children:t,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:d,barSize:u}=e,[h,f]=j.useState([]),p=j.useCallback(b=>{f(y=>[...y,b])},[f]),x=j.useCallback(b=>{f(y=>y.filter(S=>S!==b))},[f]),g=Jo();return j.createElement(Fz.Provider,{value:{addErrorBar:p,removeErrorBar:x}},j.createElement(lme,{type:d,data:o,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,errorBars:h,stackId:l,hide:c,barSize:u,isPanorama:g}),t)};function ope(e){var{addErrorBar:t,removeErrorBar:r}=j.useContext(Fz);return j.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var lpe=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function Uz(e,t,r){return(t=cpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cpe(e){var t=dpe(e,"string");return typeof t=="symbol"?t:t+""}function dpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ky.apply(null,arguments)}function upe(e,t){if(e==null)return{};var r,a,s=hpe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hpe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function fpe(e){var{direction:t,width:r,dataKey:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=upe(e,lpe),d=Ma(c,!1),{data:u,dataPointFormatter:h,xAxisId:f,yAxisId:p,errorBarOffset:x}=ipe(),g=Gme(f),b=Yme(p);if(g?.scale==null||b?.scale==null||u==null||t==="x"&&g.type!=="number")return null;var y=u.map(S=>{var{x:w,y:k,value:C,errorVal:D}=h(S,a,t);if(!D)return null;var E=[],A,I;if(Array.isArray(D)?[A,I]=D:A=I=D,t==="x"){var{scale:L}=g,P=k+x,O=P+r,Y=P-r,q=L(C-A),K=L(C+I);E.push({x1:K,y1:O,x2:K,y2:Y}),E.push({x1:q,y1:P,x2:K,y2:P}),E.push({x1:q,y1:O,x2:q,y2:Y})}else if(t==="y"){var{scale:U}=b,J=w+x,F=J-r,X=J+r,Q=U(C-A),ie=U(C+I);E.push({x1:F,y1:ie,x2:X,y2:ie}),E.push({x1:J,y1:Q,x2:J,y2:ie}),E.push({x1:F,y1:Q,x2:X,y2:Q})}var M="".concat(w+x,"px ").concat(k+x,"px");return j.createElement(Gs,ky({className:"recharts-errorBar",key:"bar-".concat(E.map(V=>"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)))},d),E.map(V=>{var W=s?{transformOrigin:"".concat(V.x1-5,"px")}:void 0;return j.createElement(Wm,{from:{transform:"scaleY(0)",transformOrigin:M},to:{transform:"scaleY(1)",transformOrigin:M},begin:i,easing:l,isActive:s,duration:o,key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2),style:{transformOrigin:M}},j.createElement("line",ky({},V,{style:W})))}))});return j.createElement(Gs,{className:"recharts-errorBars"},y)}var $z=j.createContext(void 0);function mpe(e){var t=j.useContext($z);return e??t??"x"}function ppe(e){var{direction:t,children:r}=e;return j.createElement($z.Provider,{value:t},r)}var Vz={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function xpe(e){var t=mpe(e.direction),{width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o}=td(e,Vz);return j.createElement(j.Fragment,null,j.createElement(ope,{dataKey:e.dataKey,direction:t}),j.createElement(fpe,ky({},e,{direction:t,width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o})))}class qz extends j.Component{render(){return j.createElement(xpe,this.props)}}Uz(qz,"defaultProps",Vz);Uz(qz,"displayName","ErrorBar");var vpe="Invariant failed";function gpe(e,t){throw new Error(vpe)}var bpe=["x","y"];function $5(){return $5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$5.apply(null,arguments)}function B6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(r),!0).forEach(function(a){ype(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ype(e,t,r){return(t=jpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jpe(e){var t=Npe(e,"string");return typeof t=="symbol"?t:t+""}function Npe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wpe(e,t){if(e==null)return{};var r,a,s=Spe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Spe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Cpe(e,t){var{x:r,y:a}=e,s=wpe(e,bpe),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),h="".concat(t.width||s.width),f=parseInt(h,10);return Eb(Eb(Eb(Eb(Eb({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function zz(e){return j.createElement(Iz,$5({shapeType:"rectangle",propTransformer:Cpe,activeClassName:"recharts-active-bar"},e))}var kpe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,s)=>{if(Cr(t))return t;var i=Cr(a)||Rn(a);return i?t(a,s):(i||gpe(),r)}};function i4(e,t){var r,a,s=Mr(d=>gf(d,e)),i=Mr(d=>lp(d,t)),o=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Hl.allowDataOverflow,l=(a=i?.allowDataOverflow)!==null&&a!==void 0?a:Wl.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Hz(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,s=s4(),{needClipX:i,needClipY:o,needClip:l}=i4(t,r);if(!l)return null;var{x:c,y:d,width:u,height:h}=s;return j.createElement("clipPath",{id:"clipPath-".concat(a)},j.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var _pe=["onMouseEnter","onMouseLeave","onClick"],Epe=["value","background","tooltipPosition"],Dpe=["onMouseEnter","onClick","onMouseLeave"];function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_y.apply(null,arguments)}function U6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function So(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U6(Object(r),!0).forEach(function(a){zS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zS(e,t,r){return(t=Ape(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ape(e){var t=Tpe(e,"string");return typeof t=="symbol"?t:t+""}function Tpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V5(e,t){if(e==null)return{};var r,a,s=Ipe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ipe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Ppe=e=>{var{dataKey:t,name:r,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:ug(r,t),payload:e}]};function Ope(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:ug(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function Mpe(e){var t=Mr(Ym),{data:r,dataKey:a,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=V5(i,_pe),u=e4(o,a),h=t4(l),f=r4(c,a);if(!s||r==null)return null;var p=Ma(s,!1);return j.createElement(j.Fragment,null,r.map((x,g)=>{var{value:b,background:y,tooltipPosition:S}=x,w=V5(x,Epe);if(!y)return null;var k=u(x,g),C=h(x,g),D=f(x,g),E=So(So(So(So(So({option:s,isActive:String(g)===t},w),{},{fill:"#eee"},y),p),o1(d,x,g)),{},{onMouseEnter:k,onMouseLeave:C,onClick:D,dataKey:a,index:g,className:"recharts-bar-background-rectangle"});return j.createElement(zz,_y({key:"background-bar-".concat(g)},E))}))}function Wz(e){var{data:t,props:r,showLabels:a}=e,s=Ma(r,!1),{shape:i,dataKey:o,activeBar:l}=r,c=Mr(Ym),d=Mr(dz),{onMouseEnter:u,onClick:h,onMouseLeave:f}=r,p=V5(r,Dpe),x=e4(u,o),g=t4(f),b=r4(h,o);return t?j.createElement(j.Fragment,null,t.map((y,S)=>{var w=l&&String(S)===c&&(d==null||o===d),k=w?l:i,C=So(So(So({},s),y),{},{isActive:w,option:k,index:S,dataKey:o});return j.createElement(Gs,_y({className:"recharts-bar-rectangle"},o1(p,y,S),{onMouseEnter:x(y,S),onMouseLeave:g(y,S),onClick:b(y,S),key:"rectangle-".concat(y?.x,"-").concat(y?.y,"-").concat(y?.value,"-").concat(S)}),j.createElement(zz,C))}),a&&Lm.renderCallByParent(r,t)):null}function Rpe(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=r.current,f=n4(t,"recharts-bar-"),[p,x]=j.useState(!1),g=j.useCallback(()=>{typeof d=="function"&&d(),x(!1)},[d]),b=j.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return j.createElement(Wm,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:g,onAnimationStart:b,key:f},y=>{var{t:S}=y,w=S===1?a:a.map((k,C)=>{var D=h&&h[C];if(D){var E=_m(D.x,k.x),A=_m(D.y,k.y),I=_m(D.width,k.width),L=_m(D.height,k.height);return So(So({},k),{},{x:E(S),y:A(S),width:I(S),height:L(S)})}if(s==="horizontal"){var P=_m(0,k.height),O=P(S);return So(So({},k),{},{y:k.y+k.height-O,height:O})}var Y=_m(0,k.width),q=Y(S);return So(So({},k),{},{width:q})});return S>0&&(r.current=w),j.createElement(Gs,null,j.createElement(Wz,{props:t,data:w,showLabels:!p}))})}function Fpe(e){var{data:t,isAnimationActive:r}=e,a=j.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?j.createElement(Rpe,{previousRectanglesRef:a,props:e}):j.createElement(Wz,{props:e,data:t,showLabels:!0})}var Gz=0,Lpe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:qn(e,t)}};class Bpe extends j.PureComponent{constructor(){super(...arguments),zS(this,"id",Dx("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:a,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d,layout:u}=this.props;if(t)return null;var h=ia("recharts-bar",s),f=Rn(d)?this.id:d;return j.createElement(Gs,{className:h},l&&j.createElement("defs",null,j.createElement(Hz,{clipPathId:f,xAxisId:i,yAxisId:o})),j.createElement(Gs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):null},j.createElement(Mpe,{data:r,dataKey:a,background:c,allOtherBarProps:this.props}),j.createElement(Fpe,this.props)),j.createElement(ppe,{direction:u==="horizontal"?"y":"x"},this.props.children))}}var Yz={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Hx.isSsr,legendType:"rect",minPointSize:Gz,xAxisId:0,yAxisId:0};function Upe(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=td(e,Yz),{needClip:h}=i4(t,r),f=CS(),p=Jo(),x=j.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:MA(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),g=l1(e.children,Am),b=Mr(w=>mxe(w,t,r,p,x,g));if(f!=="vertical"&&f!=="horizontal")return null;var y,S=b?.[0];return S==null||S.height==null||S.width==null?y=0:y=f==="vertical"?S.height/2:S.width/2,j.createElement(spe,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:Lpe,errorBarOffset:y},j.createElement(Bpe,_y({},e,{layout:f,needClip:h,data:b,xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function $pe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:h,offset:f,cells:p}=e,x=t==="horizontal"?l:o,g=u?x.scale.domain():null,b=wse({numericAxis:x});return h.map((y,S)=>{var w,k,C,D,E,A;u?w=gse(u[S],g):(w=qn(y,r),Array.isArray(w)||(w=[b,w]));var I=kpe(a,Gz)(w[1],S);if(t==="horizontal"){var L,[P,O]=[l.scale(w[0]),l.scale(w[1])];k=SF({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:y,index:S}),C=(L=O??P)!==null&&L!==void 0?L:void 0,D=s.size;var Y=P-O;if(E=Nl(Y)?0:Y,A={x:k,y:f.top,width:D,height:f.height},Math.abs(I)>0&&Math.abs(E)<Math.abs(I)){var q=Mi(E||I)*(Math.abs(I)-Math.abs(E));C-=q,E+=q}}else{var[K,U]=[o.scale(w[0]),o.scale(w[1])];if(k=K,C=SF({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:y,index:S}),D=U-K,E=s.size,A={x:f.left,y:C,width:f.width,height:E},Math.abs(I)>0&&Math.abs(D)<Math.abs(I)){var J=Mi(D||I)*(Math.abs(I)-Math.abs(D));D+=J}}var F=So(So({},y),{},{x:k,y:C,width:D,height:E,value:u?w:w[1],payload:y,background:A,tooltipPosition:{x:k+D/2,y:C+E/2}},p&&p[S]&&p[S].props);return F})}class Gw extends j.PureComponent{render(){return j.createElement(Bz,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},j.createElement(epe,null),j.createElement(Oz,{legendPayload:Ppe(this.props)}),j.createElement(a4,{fn:Ope,args:this.props}),j.createElement(Upe,this.props))}}zS(Gw,"displayName","Bar");zS(Gw,"defaultProps",Yz);function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function nN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(r),!0).forEach(function(a){Vpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vpe(e,t,r){return(t=qpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qpe(e){var t=zpe(e,"string");return typeof t=="symbol"?t:t+""}function zpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hpe=(e,t)=>t,Wpe=(e,t,r)=>r,Gpe=(e,t,r,a)=>a,o4=(e,t,r,a,s)=>s,Ype=(e,t,r,a,s)=>s.maxBarSize,Kpe=(e,t,r,a,s,i)=>i,V6=(e,t,r)=>{var a=r??e;if(!Rn(a))return Xo(a,t,0)},Xpe=Bt([tn,MS,Hpe,Wpe,Gpe],(e,t,r,a,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Qpe=(e,t,r,a)=>{var s=tn(e);return s==="horizontal"?Sy(e,"yAxis",r,a):Sy(e,"xAxis",t,a)},Jpe=(e,t,r)=>{var a=tn(e);return a==="horizontal"?qL(e,"xAxis",t):qL(e,"yAxis",r)};function Zpe(e){return e.stackId!=null&&e.dataKey!=null}var exe=(e,t,r)=>{var a={},s=e.filter(Zpe),i=e.filter(d=>d.stackId==null),o=s.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),a),l=Object.entries(o).map(d=>{var[u,h]=d,f=h.map(x=>x.dataKey),p=V6(t,r,h[0].barSize);return{stackId:u,dataKeys:f,barSize:p}}),c=i.map(d=>{var u=[d.dataKey].filter(f=>f!=null),h=V6(t,r,d.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...l,...c]},txe=Bt([Xpe,ode,Jpe],exe),rxe=(e,t,r,a,s)=>{var i,o,l=tn(e),c=xq(e),{maxBarSize:d}=s,u=Rn(d)?c:d,h,f;return l==="horizontal"?(h=Ju(e,"xAxis",t,a),f=Gm(e,"xAxis",t,a)):(h=Ju(e,"yAxis",r,a),f=Gm(e,"yAxis",r,a)),(i=(o=vy(h,f,!0))!==null&&o!==void 0?o:u)!==null&&i!==void 0?i:0},Kz=(e,t,r,a)=>{var s=tn(e),i,o;return s==="horizontal"?(i=Ju(e,"xAxis",t,a),o=Gm(e,"xAxis",t,a)):(i=Ju(e,"yAxis",r,a),o=Gm(e,"yAxis",r,a)),vy(i,o)};function axe(e,t,r,a,s){var i=a.length;if(!(i<1)){var o=Xo(e,r,0,!0),l,c=[];if(so(a[0].barSize)){var d=!1,u=r/i,h=a.reduce((y,S)=>y+(S.barSize||0),0);h+=(i-1)*o,h>=r&&(h-=(i-1)*o,o=0),h>=r&&u>0&&(d=!0,u*=.9,h=i*u);var f=(r-h)/2>>0,p={offset:f-o,size:0};l=a.reduce((y,S)=>{var w,k={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:p.offset+p.size+o,size:d?u:(w=S.barSize)!==null&&w!==void 0?w:0}},C=[...y,k];return p=C[C.length-1].position,C},c)}else{var x=Xo(t,r,0,!0);r-2*x-(i-1)*o<=0&&(o=0);var g=(r-2*x-(i-1)*o)/i;g>1&&(g>>=0);var b=so(s)?Math.min(g,s):g;l=a.reduce((y,S,w)=>[...y,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:x+(g+o)*w+(g-b)/2,size:b}}],c)}return l}}var nxe=(e,t,r,a,s,i,o)=>{var l=Rn(o)?t:o,c=axe(r,a,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(d=>nN(nN({},d),{},{position:nN(nN({},d.position),{},{offset:d.position.offset-s/2})}))),c},sxe=Bt([txe,xq,ide,vq,rxe,Kz,Ype],nxe),ixe=(e,t,r,a)=>Ju(e,"xAxis",t,a),oxe=(e,t,r,a)=>Ju(e,"yAxis",r,a),lxe=(e,t,r,a)=>Gm(e,"xAxis",t,a),cxe=(e,t,r,a)=>Gm(e,"yAxis",r,a),dxe=Bt([sxe,o4],(e,t)=>{if(e!=null){var r=e.find(a=>a.stackId===t.stackId&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),uxe=(e,t)=>{if(!(!e||t?.dataKey==null)){var{stackId:r}=t;if(r!=null){var a=e[r];if(a){var{stackedData:s}=a;if(s){var i=s.find(o=>o.key===t.dataKey);return i}}}}},hxe=Bt([MS,o4],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),fxe=Bt([Qpe,o4],uxe),mxe=Bt([Ni,ixe,oxe,lxe,cxe,dxe,tn,fT,Kz,fxe,hxe,Kpe],(e,t,r,a,s,i,o,l,c,d,u,h)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:x}=l;if(!(u==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||a==null||s==null||c==null)){var{data:g}=u,b;if(g!=null&&g.length>0?b=g:b=f?.slice(p,x+1),b!=null)return $pe({layout:o,barSettings:u,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:b,offset:e,cells:h})}}),Xz=e=>{var{chartData:t}=e,r=rs(),a=Jo();return j.useEffect(()=>a?()=>{}:(r(ZL(t)),()=>{r(ZL(void 0))}),[t,r,a]),null},q6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Qz=ed({name:"brush",initialState:q6,reducers:{setBrushSettings(e,t){return t.payload==null?q6:t.payload}}}),{setBrushSettings:e$e}=Qz.actions,pxe=Qz.reducer;function xxe(e,t,r){return(t=vxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vxe(e){var t=gxe(e,"string");return typeof t=="symbol"?t:t+""}function gxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class l4{static create(t){return new l4(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}xxe(l4,"EPS",1e-4);function bxe(e){return(e%180+180)%180}var yxe=function(t){var{width:r,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=bxe(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},jxe={dots:[],areas:[],lines:[]},Jz=ed({name:"referenceElements",initialState:jxe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Kh(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Kh(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Kh(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:t$e,removeDot:r$e,addArea:a$e,removeArea:n$e,addLine:s$e,removeLine:i$e}=Jz.actions,Nxe=Jz.reducer,wxe=j.createContext(void 0),Sxe=e=>{var{children:t}=e,[r]=j.useState("".concat(Dx("recharts"),"-clip")),a=s4();if(a==null)return null;var{x:s,y:i,width:o,height:l}=a;return j.createElement(wxe.Provider,{value:r},j.createElement("defs",null,j.createElement("clipPath",{id:r},j.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function SE(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Zz(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function Cxe(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return yxe(a,r)}function kxe(e,t,r){var a=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function Yw(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function _xe(e,t){return Zz(e,t+1)}function Exe(e,t,r,a,s){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var x=a?.[c];if(x===void 0)return{v:Zz(a,d)};var g=c,b,y=()=>(b===void 0&&(b=r(x,g)),b),S=x.coordinate,w=c===0||Yw(e,S,y,u,l);w||(c=0,u=o,d+=1),w&&(u=S+e*(y()/2+s),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(r),!0).forEach(function(a){Dxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Dxe(e,t,r){return(t=Axe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Axe(e){var t=Txe(e,"string");return typeof t=="symbol"?t:t+""}function Txe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ixe(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(f){var p=i[f],x,g=()=>(x===void 0&&(x=r(p,f)),x);if(f===o-1){var b=e*(p.coordinate+e*g()/2-c);i[f]=p=yo(yo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[f]=p=yo(yo({},p),{},{tickCoord:p.coordinate});var y=Yw(e,p.tickCoord,g,l,c);y&&(c=p.tickCoord-e*(g()/2+s),i[f]=yo(yo({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Pxe(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=a[l-1],h=r(u,l-1),f=e*(u.coordinate+e*h/2-d);o[l-1]=u=yo(yo({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=Yw(e,u.tickCoord,()=>h,c,d);p&&(d=u.tickCoord-e*(h/2+s),o[l-1]=yo(yo({},u),{},{isShow:!0}))}for(var x=i?l-1:l,g=function(S){var w=o[S],k,C=()=>(k===void 0&&(k=r(w,S)),k);if(S===0){var D=e*(w.coordinate-e*C()/2-c);o[S]=w=yo(yo({},w),{},{tickCoord:D<0?w.coordinate-D*e:w.coordinate})}else o[S]=w=yo(yo({},w),{},{tickCoord:w.coordinate});var E=Yw(e,w.tickCoord,C,c,d);E&&(c=w.tickCoord+e*(C()/2+s),o[S]=yo(yo({},w),{},{isShow:!0}))},b=0;b<x;b++)g(b);return o}function c4(e,t,r){var{tick:a,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!a)return[];if(Cr(c)||Hx.isSsr){var f;return(f=_xe(s,Cr(c)?c:0))!==null&&f!==void 0?f:[]}var p=[],x=l==="top"||l==="bottom"?"width":"height",g=u&&x==="width"?ey(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(w,k)=>{var C=typeof d=="function"?d(w.value,k):w.value;return x==="width"?Cxe(ey(C,{fontSize:t,letterSpacing:r}),g,h):ey(C,{fontSize:t,letterSpacing:r})[x]},y=s.length>=2?Mi(s[1].coordinate-s[0].coordinate):1,S=kxe(i,y,x);return c==="equidistantPreserveStart"?Exe(y,S,b,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Pxe(y,S,b,s,o,c==="preserveStartEnd"):p=Ixe(y,S,b,s,o),p.filter(w=>w.isShow))}var Oxe=["viewBox"],Mxe=["viewBox"];function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d0.apply(null,arguments)}function H6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H6(Object(r),!0).forEach(function(a){d4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function W6(e,t){if(e==null)return{};var r,a,s=Rxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Rxe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function d4(e,t,r){return(t=Fxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fxe(e){var t=Lxe(e,"string");return typeof t=="symbol"?t:t+""}function Lxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cp extends j.Component{constructor(t){super(t),this.tickRefs=j.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,s=W6(t,Oxe),i=this.props,{viewBox:o}=i,l=W6(i,Mxe);return!SE(a,o)||!SE(s,l)||!SE(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,h,f,p,x,g,b=c?-1:1,y=t.tickSize||l,S=Cr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=a+ +!c*i,f=p-b*y,g=f-b*d,x=S;break;case"left":f=p=t.coordinate,h=r+ +!c*s,u=h-b*y,x=u-b*d,g=S;break;case"right":f=p=t.coordinate,h=r+ +c*s,u=h+b*y,x=u+b*d,g=S;break;default:u=h=t.coordinate,p=a+ +c*i,f=p+b*y,g=f+b*d,x=S;break}return{line:{x1:u,y1:f,x2:h,y2:p},tick:{x,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=mi(mi(mi({},Ma(this.props,!1)),Ma(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=mi(mi({},c),{},{x1:t,y1:r+d*s,x2:t+a,y2:r+d*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=mi(mi({},c),{},{x1:t+u*a,y1:r,x2:t+u*a,y2:r+s})}return j.createElement("line",d0({},c,{className:ia("recharts-cartesian-axis-line",Hm(l,"className"))}))}static renderTickItem(t,r,a){var s,i=ia(r.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(t))s=j.cloneElement(t,mi(mi({},r),{},{className:i}));else if(typeof t=="function")s=t(mi(mi({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=ia(o,t.className)),s=j.createElement(VS,d0({},r,{className:o}),a)}return s}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,d=c4(mi(mi({},this.props),{},{ticks:a}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=Ma(this.props,!1),p=Ma(o,!1),x=mi(mi({},f),{},{fill:"none"},Ma(s,!1)),g=d.map((b,y)=>{var{line:S,tick:w}=this.getTickLineCoord(b),k=mi(mi(mi(mi({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:i},p),w),{},{index:y,payload:b,visibleTicksCount:d.length,tickFormatter:l});return j.createElement(Gs,d0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},o1(this.props,b,y)),s&&j.createElement("line",d0({},x,S,{className:ia("recharts-cartesian-axis-tick-line",Hm(s,"className"))})),o&&cp.renderTickItem(o,k,"".concat(typeof l=="function"?l(b.value,y):b.value).concat(c||"")))});return g.length>0?j.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:t,width:r,height:a,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:j.createElement(Gs,{className:ia("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Kl.renderCallByParent(this.props))}}d4(cp,"displayName","CartesianAxis");d4(cp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Bxe=["x1","y1","x2","y2","key"],Uxe=["offset"],$xe=["xAxisId","yAxisId"],Vxe=["xAxisId","yAxisId"];function G6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G6(Object(r),!0).forEach(function(a){qxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qxe(e,t,r){return(t=zxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zxe(e){var t=Hxe(e,"string");return typeof t=="symbol"?t:t+""}function Hxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ox.apply(null,arguments)}function Kw(e,t){if(e==null)return{};var r,a,s=Wxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Wxe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Gxe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:s,width:i,height:o,ry:l}=e;return j.createElement("rect",{x:a,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function eH(e,t){var r;if(j.isValidElement(e))r=j.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:s,x2:i,y2:o,key:l}=t,c=Kw(t,Bxe),d=Ma(c,!1),{offset:u}=d,h=Kw(d,Uxe);r=j.createElement("line",ox({},h,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Yxe(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Kw(e,$xe),c=s.map((d,u)=>{var h=Co(Co({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return eH(a,h)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Kxe(e){var{y:t,height:r,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Kw(e,Vxe),c=s.map((d,u)=>{var h=Co(Co({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return eH(a,h)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Xxe(e){var{horizontalFill:t,fillOpacity:r,x:a,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var p=!d[f+1],x=p?s+o-h:d[f+1]-h;if(x<=0)return null;var g=f%t.length;return j.createElement("rect",{key:"react-".concat(f),y:h,x:a,height:x,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Qxe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var p=!d[f+1],x=p?s+o-h:d[f+1]-h;if(x<=0)return null;var g=f%r.length;return j.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:x,height:l,stroke:"none",fill:r[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Jxe=(e,t)=>{var{xAxis:r,width:a,height:s,offset:i}=e;return aV(c4(Co(Co(Co({},cp.defaultProps),r),{},{ticks:nV(r),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,t)},Zxe=(e,t)=>{var{yAxis:r,width:a,height:s,offset:i}=e;return aV(c4(Co(Co(Co({},cp.defaultProps),r),{},{ticks:nV(r),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,t)},eve={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function q5(e){var t=BA(),r=UA(),a=cV(),s=Co(Co({},td(e,eve)),{},{x:Cr(e.x)?e.x:a.left,y:Cr(e.y)?e.y:a.top,width:Cr(e.width)?e.width:a.width,height:Cr(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,x=Jo(),g=Mr(I=>zL(I,"xAxis",i,x)),b=Mr(I=>zL(I,"yAxis",o,x));if(!Cr(d)||d<=0||!Cr(u)||u<=0||!Cr(l)||l!==+l||!Cr(c)||c!==+c)return null;var y=s.verticalCoordinatesGenerator||Jxe,S=s.horizontalCoordinatesGenerator||Zxe,{horizontalPoints:w,verticalPoints:k}=s;if((!w||!w.length)&&typeof S=="function"){var C=f&&f.length,D=S({yAxis:b?Co(Co({},b),{},{ticks:C?f:b.ticks}):void 0,width:t,height:r,offset:a},C?!0:h);Zb(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(w=D)}if((!k||!k.length)&&typeof y=="function"){var E=p&&p.length,A=y({xAxis:g?Co(Co({},g),{},{ticks:E?p:g.ticks}):void 0,width:t,height:r,offset:a},E?!0:h);Zb(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(k=A)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(Gxe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),j.createElement(Xxe,ox({},s,{horizontalPoints:w})),j.createElement(Qxe,ox({},s,{verticalPoints:k})),j.createElement(Yxe,ox({},s,{offset:a,horizontalPoints:w,xAxis:g,yAxis:b})),j.createElement(Kxe,ox({},s,{offset:a,verticalPoints:k,xAxis:g,yAxis:b})))}q5.displayName="CartesianGrid";var tH=(e,t,r,a)=>Ju(e,"xAxis",t,a),rH=(e,t,r,a)=>Gm(e,"xAxis",t,a),aH=(e,t,r,a)=>Ju(e,"yAxis",r,a),nH=(e,t,r,a)=>Gm(e,"yAxis",r,a),tve=Bt([tn,tH,aH,rH,nH],(e,t,r,a,s)=>mf(e,"xAxis")?vy(t,a,!1):vy(r,s,!1)),rve=(e,t,r,a,s)=>{var i,o=tn(e),l=mf(o,"xAxis"),c;if(l?c=Sy(e,"yAxis",r,a):c=Sy(e,"xAxis",t,a),c!=null){var{dataKey:d,stackId:u}=s;if(u!=null){var h=(i=c[u])===null||i===void 0?void 0:i.stackedData;return h?.find(f=>f.key===d)}}},ave=(e,t,r,a,s)=>s,nve=Bt([MS,ave],(e,t)=>{if(e.some(r=>r.type==="area"&&t.dataKey===r.dataKey&&MA(t.stackId)===r.stackId&&t.data===r.data))return t}),sve=Bt([tn,tH,aH,rH,nH,rve,fT,tve,nve],(e,t,r,a,s,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||a==null||s==null||a.length===0||s.length===0||l==null)){var{data:f}=c,p;if(f&&f.length>0?p=f:p=d?.slice(u,h+1),p!=null){var x=void 0;return Sve({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:p,chartBaseValue:x,bandSize:l})}}}),ive=["layout","type","stroke","connectNulls","isRange"],ove=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function sH(e,t){if(e==null)return{};var r,a,s=lve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lve(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function lx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y6(Object(r),!0).forEach(function(a){HS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HS(e,t,r){return(t=cve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cve(e){var t=dve(e,"string");return typeof t=="symbol"?t:t+""}function dve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bm.apply(null,arguments)}function Xw(e,t){return e&&e!=="none"?e:t}var uve=e=>{var{dataKey:t,name:r,stroke:a,fill:s,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:Xw(a,s),value:ug(r,t),payload:e}]};function hve(e){var{dataKey:t,data:r,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:ug(o,t),hide:l,type:e.tooltipType,color:Xw(a,i),unit:c}}}var fve=(e,t)=>{var r;if(j.isValidElement(e))r=j.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=ia("recharts-area-dot",typeof e!="boolean"?e.className:"");r=j.createElement(kz,Bm({},t,{className:a}))}return r};function mve(e,t){return e==null?!1:t?!0:e.length===1}function pve(e){var{clipPathId:t,points:r,props:a}=e,{needClip:s,dot:i,dataKey:o}=a;if(!mve(r,i))return null;var l=t$(i),c=Ma(a,!1),d=Ma(i,!0),u=r.map((f,p)=>{var x=lx(lx(lx({key:"dot-".concat(p),r:3},c),d),{},{index:p,cx:f.x,cy:f.y,dataKey:o,value:f.value,payload:f.payload,points:r});return fve(i,x)}),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return j.createElement(Gs,Bm({className:"recharts-area-dots"},h),u)}function z5(e){var{points:t,baseLine:r,needClip:a,clipPathId:s,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:h}=i,f=sH(i,ive);return j.createElement(j.Fragment,null,t?.length>1&&j.createElement(Gs,{clipPath:a?"url(#clipPath-".concat(s,")"):void 0},j.createElement(Jb,Bm({},Ma(f,!0),{points:t,connectNulls:u,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&j.createElement(Jb,Bm({},Ma(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&j.createElement(Jb,Bm({},Ma(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:r}))),j.createElement(pve,{points:t,props:i,clipPathId:s}),o&&Lm.renderCallByParent(i,t))}function xve(e){var{alpha:t,baseLine:r,points:a,strokeWidth:s}=e,i=a[0].y,o=a[a.length-1].y;if(!so(i)||!so(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.x||0));return Cr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Cr(c)?j.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function vve(e){var{alpha:t,baseLine:r,points:a,strokeWidth:s}=e,i=a[0].x,o=a[a.length-1].x;if(!so(i)||!so(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.y||0));return Cr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Cr(c)?j.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function gve(e){var{alpha:t,layout:r,points:a,baseLine:s,strokeWidth:i}=e;return r==="vertical"?j.createElement(xve,{alpha:t,points:a,baseLine:s,strokeWidth:i}):j.createElement(vve,{alpha:t,points:a,baseLine:s,strokeWidth:i})}function bve(e){var{needClip:t,clipPathId:r,props:a,previousPointsRef:s,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:f,onAnimationEnd:p}=a,x=n4(a,"recharts-area-"),[g,b]=j.useState(!0),y=j.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),S=j.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]),w=s.current,k=i.current;return j.createElement(Wm,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:S,key:x},C=>{var{t:D}=C;if(w){var E=w.length/o.length,A=D===1?o:o.map((L,P)=>{var O=Math.floor(P*E);if(w[O]){var Y=w[O];return lx(lx({},L),{},{x:Uv(Y.x,L.x,D),y:Uv(Y.y,L.y,D)})}return L}),I;return Cr(l)?I=Uv(k,l,D):Rn(l)||Nl(l)?I=Uv(k,0,D):I=l.map((L,P)=>{var O=Math.floor(P*E);if(Array.isArray(k)&&k[O]){var Y=k[O];return lx(lx({},L),{},{x:Uv(Y.x,L.x,D),y:Uv(Y.y,L.y,D)})}return L}),D>0&&(s.current=A,i.current=I),j.createElement(z5,{points:A,baseLine:I,needClip:t,clipPathId:r,props:a,showLabels:!g})}return D>0&&(s.current=o,i.current=l),j.createElement(Gs,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(r)},j.createElement(gve,{alpha:D,points:o,baseLine:l,layout:a.layout,strokeWidth:a.strokeWidth}))),j.createElement(Gs,{clipPath:"url(#animationClipPath-".concat(r,")")},j.createElement(z5,{points:o,baseLine:l,needClip:t,clipPathId:r,props:a,showLabels:!0})))})}function yve(e){var{needClip:t,clipPathId:r,props:a}=e,{points:s,baseLine:i,isAnimationActive:o}=a,l=j.useRef(null),c=j.useRef(),d=l.current,u=c.current;return o&&s&&s.length&&(d!==s||u!==i)?j.createElement(bve,{needClip:t,clipPathId:r,props:a,previousPointsRef:l,previousBaselineRef:c}):j.createElement(z5,{points:s,baseLine:i,needClip:t,clipPathId:r,props:a,showLabels:!0})}class jve extends j.PureComponent{constructor(){super(...arguments),HS(this,"id",Dx("recharts-area-"))}render(){var t,{hide:r,dot:a,points:s,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:h,height:f,id:p,baseLine:x}=this.props;if(r)return null;var g=ia("recharts-area",i),b=Rn(p)?this.id:p,{r:y=3,strokeWidth:S=2}=(t=Ma(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=t$(a),k=y*2+S;return j.createElement(j.Fragment,null,j.createElement(Gs,{className:g},c&&j.createElement("defs",null,j.createElement(Hz,{clipPathId:b,xAxisId:d,yAxisId:u}),!w&&j.createElement("clipPath",{id:"clipPath-dots-".concat(b)},j.createElement("rect",{x:l-k/2,y:o-k/2,width:h+k,height:f+k}))),j.createElement(yve,{needClip:c,clipPathId:b,props:this.props})),j.createElement(F6,{points:s,mainColor:Xw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(x)&&j.createElement(F6,{points:x,mainColor:Xw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var iH={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Hx.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Nve(e){var t,r=td(e,iH),{activeDot:a,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:f,legendType:p,stroke:x,xAxisId:g,yAxisId:b}=r,y=sH(r,ove),S=CS(),w=hz(),{needClip:k}=i4(g,b),C=Jo(),D=j.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:E,isRange:A,baseLine:I}=(t=Mr(q=>sve(q,g,b,C,D)))!==null&&t!==void 0?t:{},{height:L,width:P,x:O,y:Y}=s4();return S!=="horizontal"&&S!=="vertical"||w!=="AreaChart"&&w!=="ComposedChart"?null:j.createElement(jve,Bm({},y,{activeDot:a,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:I,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:L,hide:h,layout:S,isAnimationActive:f,isRange:A,legendType:p,needClip:k,points:E,stroke:x,width:P,left:O,top:Y,xAxisId:g,yAxisId:b}))}var wve=(e,t,r,a,s)=>{var i=r??t;if(Cr(i))return i;var o=e==="horizontal"?s:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function Sve(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:a},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:f,bandSize:p}=e,x=s&&s.length,g=wve(i,o,r,l,c),b=i==="horizontal",y=!1,S=d.map((k,C)=>{var D;x?D=s[u+C]:(D=qn(k,a),Array.isArray(D)?y=!0:D=[g,D]);var E=D[1]==null||x&&!t&&qn(k,a)==null;return b?{x:wF({axis:l,ticks:h,bandSize:p,entry:k,index:C}),y:E?null:c.scale(D[1]),value:D,payload:k}:{x:E?null:l.scale(D[1]),y:wF({axis:c,ticks:f,bandSize:p,entry:k,index:C}),value:D,payload:k}}),w;return x||y?w=S.map(k=>{var C=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:C!=null&&k.y!=null?c.scale(C):null}:{x:C!=null?l.scale(C):null,y:k.y}}):w=b?c.scale(g):l.scale(g),{points:S,baseLine:w,isRange:y}}class u0 extends j.PureComponent{render(){return j.createElement(Bz,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},j.createElement(Oz,{legendPayload:uve(this.props)}),j.createElement(a4,{fn:hve,args:this.props}),j.createElement(Nve,this.props))}}HS(u0,"displayName","Area");HS(u0,"defaultProps",iH);function K6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function X6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K6(Object(r),!0).forEach(function(a){Cve(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cve(e,t,r){return(t=kve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kve(e){var t=_ve(e,"string");return typeof t=="symbol"?t:t+""}function _ve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eve={xAxis:{},yAxis:{},zAxis:{}},oH=ed({name:"cartesianAxis",initialState:Eve,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=X6(X6({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:Dve,removeXAxis:Ave,addYAxis:Tve,removeYAxis:Ive,addZAxis:o$e,removeZAxis:l$e,updateYAxisWidth:Pve}=oH.actions,Ove=oH.reducer,Mve=["children"],Rve=["dangerouslySetInnerHTML","ticks"];function lH(e,t,r){return(t=Fve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fve(e){var t=Lve(e,"string");return typeof t=="symbol"?t:t+""}function Lve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H5(){return H5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H5.apply(null,arguments)}function cH(e,t){if(e==null)return{};var r,a,s=Bve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Bve(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Uve(e){var t=rs(),r=j.useMemo(()=>{var{children:i}=e,o=cH(e,Mve);return o},[e]),a=Mr(i=>gf(i,r.id)),s=r===a;return j.useEffect(()=>(t(Dve(r)),()=>{t(Ave(r))}),[r,t]),s?e.children:null}var $ve=e=>{var{xAxisId:t,className:r}=e,a=Mr(lV),s=Jo(),i="xAxis",o=Mr(p=>vg(p,i,t,s)),l=Mr(p=>Hq(p,i,t,s)),c=Mr(p=>$q(p,t)),d=Mr(p=>Zde(p,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=cH(e,Rve);return j.createElement(cp,H5({},f,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:ia("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:l}))},Vve=e=>{var t,r,a,s,i;return j.createElement(Uve,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},j.createElement($ve,e))};class Qw extends j.Component{render(){return j.createElement(Vve,this.props)}}lH(Qw,"displayName","XAxis");lH(Qw,"defaultProps",{allowDataOverflow:Hl.allowDataOverflow,allowDecimals:Hl.allowDecimals,allowDuplicatedCategory:Hl.allowDuplicatedCategory,height:Hl.height,hide:!1,mirror:Hl.mirror,orientation:Hl.orientation,padding:Hl.padding,reversed:Hl.reversed,scale:Hl.scale,tickCount:Hl.tickCount,type:Hl.type,xAxisId:0});var qve=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,d=o+c+l+(r?a:0);return Math.round(d)}return 0},zve=["dangerouslySetInnerHTML","ticks"];function dH(e,t,r){return(t=Hve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hve(e){var t=Wve(e,"string");return typeof t=="symbol"?t:t+""}function Wve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W5.apply(null,arguments)}function Gve(e,t){if(e==null)return{};var r,a,s=Yve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yve(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Kve(e){var t=rs();return j.useEffect(()=>(t(Tve(e)),()=>{t(Ive(e))}),[e,t]),null}var Xve=e=>{var t,{yAxisId:r,className:a,width:s,label:i}=e,o=j.useRef(null),l=j.useRef(null),c=Mr(lV),d=Jo(),u=rs(),h="yAxis",f=Mr(w=>vg(w,h,r,d)),p=Mr(w=>Vq(w,r)),x=Mr(w=>eue(w,r)),g=Mr(w=>Hq(w,h,r,d));if(j.useLayoutEffect(()=>{var w;if(!(s!=="auto"||!p||KT(i)||j.isValidElement(i))){var k=o.current,C=k==null||(w=k.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:D,tickMargin:E}=k.props,A=qve({ticks:C,label:l.current,labelGapWithTick:5,tickSize:D,tickMargin:E});Math.round(p.width)!==Math.round(A)&&u(Pve({id:r,width:A}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p?.width,p,u,i,r,s]),p==null||x==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,S=Gve(e,zve);return j.createElement(cp,W5({},S,{ref:o,labelRef:l,scale:f,x:x.x,y:x.y,width:p.width,height:p.height,className:ia("recharts-".concat(h," ").concat(h),a),viewBox:c,ticks:g}))},Qve=e=>{var t,r,a,s,i;return j.createElement(j.Fragment,null,j.createElement(Kve,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),j.createElement(Xve,e))},Jve={allowDataOverflow:Wl.allowDataOverflow,allowDecimals:Wl.allowDecimals,allowDuplicatedCategory:Wl.allowDuplicatedCategory,hide:!1,mirror:Wl.mirror,orientation:Wl.orientation,padding:Wl.padding,reversed:Wl.reversed,scale:Wl.scale,tickCount:Wl.tickCount,type:Wl.type,width:Wl.width,yAxisId:0};class Jw extends j.Component{render(){return j.createElement(Qve,this.props)}}dH(Jw,"displayName","YAxis");dH(Jw,"defaultProps",Jve);var CE={exports:{}},kE={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q6;function Zve(){if(Q6)return kE;Q6=1;var e=sg();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return kE.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var x={hasValue:!1,value:null};p.current=x}else x=p.current;p=o(function(){function b(C){if(!y){if(y=!0,S=C,C=h(C),f!==void 0&&x.hasValue){var D=x.value;if(f(D,C))return w=D}return w=C}if(D=w,r(S,C))return D;var E=h(C);return f!==void 0&&f(D,E)?(S=C,D):(S=C,w=E)}var y=!1,S,w,k=u===void 0?null:u;return[function(){return b(d())},k===null?void 0:function(){return b(k())}]},[d,u,h,f]);var g=a(c,p[0],p[1]);return i(function(){x.hasValue=!0,x.value=g},[g]),l(g),g},kE}var J6;function e0e(){return J6||(J6=1,CE.exports=Zve()),CE.exports}e0e();function t0e(e){e()}function r0e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){t0e(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Z6={notify(){},get:()=>[]};function a0e(e,t){let r,a=Z6,s=0,i=!1;function o(g){u();const b=a.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),h())}}function l(){a.notify()}function c(){x.onStateChange&&x.onStateChange()}function d(){return i}function u(){s++,r||(r=e.subscribe(c),a=r0e())}function h(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=Z6)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const x={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>a};return x}var n0e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s0e=n0e(),i0e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",o0e=i0e(),l0e=()=>s0e||o0e?j.useLayoutEffect:j.useEffect,c0e=l0e(),d0e=Symbol.for("react-redux-context"),u0e=typeof globalThis<"u"?globalThis:{};function h0e(){if(!j.createContext)return{};const e=u0e[d0e]??=new Map;let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var f0e=h0e();function m0e(e){const{children:t,context:r,serverState:a,store:s}=e,i=j.useMemo(()=>{const c=a0e(s);return{store:s,subscription:c,getServerState:a?()=>a:void 0}},[s,a]),o=j.useMemo(()=>s.getState(),[s]);c0e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||f0e;return j.createElement(l.Provider,{value:i},t)}var p0e=m0e,x0e=(e,t)=>t,u4=Bt([x0e,tn,fde,Ui,iz,bf,rhe,Ni],ohe),h4=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},uH=Xc("mouseClick"),hH=c1();hH.startListening({actionCreator:uH,effect:(e,t)=>{var r=e.payload,a=u4(t.getState(),h4(r));a?.activeIndex!=null&&t.dispatch(fue({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var G5=Xc("mouseMove"),fH=c1();fH.startListening({actionCreator:G5,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=BT(a,a.tooltip.settings.shared),i=u4(a,h4(r));s==="axis"&&(i?.activeIndex!=null?t.dispatch(Zq({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Jq()))}});function v0e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var e8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},mH=ed({name:"rootProps",initialState:e8,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:e8.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),g0e=mH.reducer,{updateOptions:b0e}=mH.actions,pH=ed({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:y0e}=pH.actions,j0e=pH.reducer,xH=Xc("keyDown"),vH=Xc("focus"),f4=c1();f4.startListening({actionCreator:xH,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(UT(s,Xx(r))),l=bf(r);if(i==="Enter"){var c=Vw(r,"axis","hover",String(s.index));t.dispatch(M5({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=nue(r),u=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(l==null||f>=l.length||f<0)){var p=Vw(r,"axis","hover",String(f));t.dispatch(M5({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});f4.startListening({actionCreator:vH,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=Vw(r,"axis","hover",String(i));t.dispatch(M5({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Mc=Xc("externalEvent"),gH=c1();gH.startListening({actionCreator:Mc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:Gue(r),activeDataKey:dz(r),activeIndex:Ym(r),activeLabel:cz(r),activeTooltipIndex:Ym(r),isTooltipActive:Yue(r)};e.payload.handler(a,e.payload.reactEvent)}}});var N0e=Bt([gg],e=>e.tooltipItemPayloads),w0e=Bt([N0e,b1,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var s=e.find(l=>l.settings.dataKey===a);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),bH=Xc("touchMove"),yH=c1();yH.startListening({actionCreator:bH,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=BT(a,a.tooltip.settings.shared);if(s==="axis"){var i=u4(a,h4({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(Zq({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(iV),u=(o=c.getAttribute(oV))!==null&&o!==void 0?o:void 0,h=w0e(t.getState(),d,u);t.dispatch(Qq({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var S0e=P$({brush:pxe,cartesianAxis:Ove,chartData:whe,graphicalItems:nme,layout:rse,legend:Vse,options:ghe,polarAxis:Vfe,polarOptions:j0e,referenceElements:Nxe,rootProps:g0e,tooltip:mue}),C0e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return _ne({reducer:S0e,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([hH.middleware,fH.middleware,f4.middleware,gH.middleware,yH.middleware]),devTools:{serialize:{replacer:v0e},name:"recharts-".concat(r)}})};function jH(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,s=Jo(),i=j.useRef(null);if(s)return r;i.current==null&&(i.current=C0e(t,a));var o=DA;return j.createElement(p0e,{context:o,store:i.current},r)}function NH(e){var{layout:t,width:r,height:a,margin:s}=e,i=rs(),o=Jo();return j.useEffect(()=>{o||(i(Zne(t)),i(ese({width:r,height:a})),i(Jne(s)))},[i,o,t,r,a,s]),null}function wH(e){var t=rs();return j.useEffect(()=>{t(b0e(e))},[t,e]),null}var k0e=["children"];function _0e(e,t){if(e==null)return{};var r,a,s=E0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function E0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zw.apply(null,arguments)}var D0e={width:"100%",height:"100%"},A0e=j.forwardRef((e,t)=>{var r=BA(),a=UA(),s=fV();if(!B0(r)||!B0(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,j.createElement(vA,Zw({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:a,style:D0e,ref:t}),i)}),T0e=e=>{var{children:t}=e,r=Mr(SS);if(!r)return null;var{width:a,height:s,y:i,x:o}=r;return j.createElement(vA,{width:a,height:s,x:o,y:i},t)},t8=j.forwardRef((e,t)=>{var{children:r}=e,a=_0e(e,k0e),s=Jo();return s?j.createElement(T0e,null,r):j.createElement(A0e,Zw({ref:t},a),r)});function I0e(){var e=rs(),[t,r]=j.useState(null),a=Mr(Ase);return j.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;so(i)&&i!==a&&e(tse(i))}},[t,e,a]),r}function r8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function P0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r8(Object(r),!0).forEach(function(a){O0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function O0e(e,t,r){return(t=M0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M0e(e){var t=R0e(e,"string");return typeof t=="symbol"?t:t+""}function R0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F0e=j.forwardRef((e,t)=>{var{children:r,className:a,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:x,onTouchStart:g,style:b,width:y}=e,S=rs(),[w,k]=j.useState(null),[C,D]=j.useState(null);khe();var E=I0e(),A=j.useCallback(M=>{E(M),typeof t=="function"&&t(M),k(M),D(M)},[E,t,k,D]),I=j.useCallback(M=>{S(uH(M)),S(Mc({handler:i,reactEvent:M}))},[S,i]),L=j.useCallback(M=>{S(G5(M)),S(Mc({handler:d,reactEvent:M}))},[S,d]),P=j.useCallback(M=>{S(Jq()),S(Mc({handler:u,reactEvent:M}))},[S,u]),O=j.useCallback(M=>{S(G5(M)),S(Mc({handler:h,reactEvent:M}))},[S,h]),Y=j.useCallback(()=>{S(vH())},[S]),q=j.useCallback(M=>{S(xH(M.key))},[S]),K=j.useCallback(M=>{S(Mc({handler:o,reactEvent:M}))},[S,o]),U=j.useCallback(M=>{S(Mc({handler:l,reactEvent:M}))},[S,l]),J=j.useCallback(M=>{S(Mc({handler:c,reactEvent:M}))},[S,c]),F=j.useCallback(M=>{S(Mc({handler:f,reactEvent:M}))},[S,f]),X=j.useCallback(M=>{S(Mc({handler:g,reactEvent:M}))},[S,g]),Q=j.useCallback(M=>{S(bH(M)),S(Mc({handler:x,reactEvent:M}))},[S,x]),ie=j.useCallback(M=>{S(Mc({handler:p,reactEvent:M}))},[S,p]);return j.createElement(vz.Provider,{value:w},j.createElement(r$.Provider,{value:C},j.createElement("div",{className:ia("recharts-wrapper",a),style:P0e({position:"relative",cursor:"default",width:y,height:s},b),onClick:I,onContextMenu:K,onDoubleClick:U,onFocus:Y,onKeyDown:q,onMouseDown:J,onMouseEnter:L,onMouseLeave:P,onMouseMove:O,onMouseUp:F,onTouchEnd:ie,onTouchMove:Q,onTouchStart:X,ref:A},r)))}),L0e=["children","className","width","height","style","compact","title","desc"];function B0e(e,t){if(e==null)return{};var r,a,s=U0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function U0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var SH=j.forwardRef((e,t)=>{var{children:r,className:a,width:s,height:i,style:o,compact:l,title:c,desc:d}=e,u=B0e(e,L0e),h=Ma(u,!1);return l?j.createElement(t8,{otherAttributes:h,title:c,desc:d},r):j.createElement(F0e,{className:a,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},j.createElement(t8,{otherAttributes:h,title:c,desc:d,ref:t},j.createElement(Sxe,null,r)))}),$0e=["width","height"];function Y5(){return Y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y5.apply(null,arguments)}function V0e(e,t){if(e==null)return{};var r,a,s=q0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function q0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var z0e={top:5,right:5,bottom:5,left:5},H0e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:z0e,reverseStackOrder:!1,syncMethod:"index"},CH=j.forwardRef(function(t,r){var a,s=td(t.categoricalChartProps,H0e),{width:i,height:o}=s,l=V0e(s,$0e);if(!B0(i)||!B0(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:f}=t,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return j.createElement(jH,{preloadedState:{options:p},reduxStoreName:(a=f.id)!==null&&a!==void 0?a:c},j.createElement(Xz,{chartData:f.data}),j.createElement(NH,{width:i,height:o,layout:s.layout,margin:s.margin}),j.createElement(wH,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),j.createElement(SH,Y5({},l,{width:i,height:o,ref:r})))}),W0e=["axis","item"],G0e=j.forwardRef((e,t)=>j.createElement(CH,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:W0e,tooltipPayloadSearcher:YT,categoricalChartProps:e,ref:t}));function Y0e(e){var t=rs();return j.useEffect(()=>{t(y0e(e))},[t,e]),null}var K0e=["width","height","layout"];function K5(){return K5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K5.apply(null,arguments)}function X0e(e,t){if(e==null)return{};var r,a,s=Q0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Q0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var J0e={top:5,right:5,bottom:5,left:5},Z0e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:J0e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},ege=j.forwardRef(function(t,r){var a,s=td(t.categoricalChartProps,Z0e),{width:i,height:o,layout:l}=s,c=X0e(s,K0e);if(!B0(i)||!B0(o))return null;var{chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f}=t,p={chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return j.createElement(jH,{preloadedState:{options:p},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:d},j.createElement(Xz,{chartData:s.data}),j.createElement(NH,{width:i,height:o,layout:l,margin:s.margin}),j.createElement(wH,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),j.createElement(Y0e,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),j.createElement(SH,K5({width:i,height:o},c,{ref:r})))}),tge=["item"],rge={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},a8=j.forwardRef((e,t)=>{var r=td(e,rge);return j.createElement(ege,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:tge,tooltipPayloadSearcher:YT,categoricalChartProps:r,ref:t})}),age=["axis"],nge=j.forwardRef((e,t)=>j.createElement(CH,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:age,tooltipPayloadSearcher:YT,categoricalChartProps:e,ref:t}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sge=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ige=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),n8=e=>{const t=ige(e);return t.charAt(0).toUpperCase()+t.slice(1)},kH=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),oge=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cge=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...lge,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:kH("lucide",s),...!i&&!oge(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>j.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=(e,t)=>{const r=j.forwardRef(({className:a,...s},i)=>j.createElement(cge,{ref:i,iconNode:t,className:kH(`lucide-${sge(n8(e))}`,`lucide-${e}`,a),...s}));return r.displayName=n8(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],uge=y1("credit-card",dge);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],fge=y1("dollar-sign",hge);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_E=y1("file-text",mge);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],xge=y1("shopping-cart",pge);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],s8=y1("trending-up",vge),gge=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[u,h]=j.useState(!0),[f,p]=j.useState(new Date().getFullYear()),[x]=j.useState(localStorage.getItem("selectedCompanyId")||""),[g]=j.useState(localStorage.getItem("financialYear")||""),b=new Date().getFullYear(),y=[b-1,b,b+1];j.useEffect(()=>{(async()=>{h(!0);try{const A={companyId:x},[I,L,P,O,Y]=await Promise.all([Oe.get("/api/purchase-orders",{params:A}),Oe.get("/api/sales-orders",{params:A}),Oe.get("/api/stock/data",{params:A}),Oe.get("/api/invoiceform",{params:A}),Oe.get("/api/billingform",{params:A})]);t(I.data),a(L.data),i(P.data),l(O.data),console.log("Fetched Invoices:",O.data),d(Y.data)}catch(A){console.error("Data fetch error:",A)}finally{h(!1)}})()},[x,g]);const S=j.useMemo(()=>{let E=0,A=11,I=f;if(g&&/^\d{4}-\d{4}$/.test(g)){const[O,Y]=g.split("-").map(Number);E=3,A=2,I=O}const L=[];for(let O=0;O<12;O++){let Y=(E+O)%12,q=I+(Y<E?1:0);L.push({month:new Date(q,Y).toLocaleString("default",{month:"short"}),purchases:0,sales:0,inventory:0,invoices:0,billings:0,profitMargin:0})}const P=(O,Y,q,K)=>{O?.forEach(U=>{const J=new Date(U[Y]);if(!isNaN(J)){let F=I,X=g&&/^\d{4}-\d{4}$/.test(g)?Number(g.split("-")[1]):I,Q=!1;if(g&&/^\d{4}-\d{4}$/.test(g)?(J.getFullYear()===F&&J.getMonth()>=E||J.getFullYear()===X&&J.getMonth()<=A)&&(Q=!0):Q=J.getFullYear()===f,Q){let ie;g&&/^\d{4}-\d{4}$/.test(g)?ie=(J.getMonth()-E+12)%12:ie=J.getMonth(),L[ie][K]+=q?U[q]||0:1}}})};return P(e,"date","finalTotal","purchases"),P(r,"date","finalTotal","sales"),P(s,"createdAt",null,"inventory"),P(o,"documentDate","finalTotal","invoices"),P(c,"documentDate","finalTotal","billings"),L},[e,r,s,o,c,f,g]);e.reduce((E,A)=>E+(A.finalTotal||0),0),r.reduce((E,A)=>E+(A.finalTotal||0),0),o.reduce((E,A)=>E+(A.finalTotal||0),0),c.reduce((E,A)=>E+(A.finalTotal||0),0);const[w,k]=j.useState({paid:0,pending:0}),[C,D]=j.useState({paid:0,pending:0});return j.useEffect(()=>{console.log("Calculating invoice statuses...",o);const E=o.filter(P=>P.balance===0).length,A=o.filter(P=>P.balance>0).length;k({paid:E,pending:A});const I=c.filter(P=>P.balance===0).length,L=c.filter(P=>P.balance>0).length;D({paid:I,pending:L})},[o,c]),u?n.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:n.jsxs("div",{className:"text-center text-white",children:[n.jsx("div",{className:"spinner-border text-light mb-3",role:"status",style:{width:"4rem",height:"4rem"},children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"fs-5",children:"Loading your dashboard..."})]})}):n.jsxs("div",{className:"min-vh-100",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[n.jsx("style",{children:`
        .card-hover {
          transition: all 0.3s ease;
        }
        .card-hover:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;
        }
        .gradient-bg {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .metric-card {
          border: none;
          border-radius: 15px;
          overflow: hidden;
          position: relative;
        }
        .metric-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .chart-container {
          border-radius: 15px;
          border: none;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .stat-item {
          padding: 12px;
          margin: 5px 0;
          border-radius: 10px;
          background: rgba(255,255,255,0.7);
          transition: all 0.3s ease;
        }
        .stat-item:hover {
          background: rgba(255,255,255,0.9);
          transform: translateX(5px);
        }
        .progress-custom {
          height: 8px;
          border-radius: 10px;
          background: rgba(0,0,0,0.1);
        }
        .progress-bar-custom {
          border-radius: 10px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
      `}),n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"d-grid gap-4 mb-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[{title:"Purchase Orders",value:e.length,icon:xge,color:"primary",bgColor:"bg-primary"},{title:"Sales Orders",value:r.length,icon:fge,color:"success",bgColor:"bg-success"},{title:"Vendor Invoices",value:o.length,icon:_E,color:"info",bgColor:"bg-info"},{title:"Customer Invoices",value:c.length,icon:uge,color:"danger",bgColor:"bg-danger"}].map((E,A)=>n.jsx("div",{className:"card metric-card card-hover h-100",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("div",{className:`${E.bgColor} bg-opacity-10 p-3 rounded-3 text-center`,children:n.jsx(E.icon,{size:24,className:`text-${E.color}`})})}),n.jsxs("div",{className:"col-8 text-end",children:[n.jsx("div",{className:`h4 fw-bold text-${E.color} mb-1`,children:E.value}),n.jsx("div",{className:"small text-muted",children:E.title})]})]})})},A))}),n.jsxs("div",{className:"row g-4 mb-4",children:[n.jsx("div",{className:"col-lg-8",children:n.jsxs("div",{className:"card chart-container",children:[n.jsxs("div",{className:"card-header bg-transparent border-0 d-flex justify-content-between align-items-center",children:[n.jsxs("h5",{className:"card-title fw-bold mb-0 d-flex align-items-center",children:[n.jsx(s8,{size:20,className:"text-primary me-2"}),"Monthly Financial Trends (",f,")"]}),n.jsx("select",{className:"form-select w-auto",value:f,onChange:E=>p(Number(E.target.value)),children:y.map(E=>n.jsx("option",{value:E,children:E},E))})]}),n.jsx("div",{className:"card-body",children:n.jsx(aN,{width:"100%",height:350,children:n.jsxs(nge,{data:S,children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#28a745",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#28a745",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"colorPurchases",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#007bff",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#007bff",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"colorInvoices",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#6f42c1",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#6f42c1",stopOpacity:0})]}),n.jsxs("linearGradient",{id:"colorBillings",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#dc3545",stopOpacity:.15}),n.jsx("stop",{offset:"95%",stopColor:"#dc3545",stopOpacity:0})]})]}),n.jsx(q5,{strokeDasharray:"3 3",stroke:"#e9ecef"}),n.jsx(Qw,{dataKey:"month",stroke:"#6c757d"}),n.jsx(Jw,{tickFormatter:E=>`${(E/1e3).toFixed(0)}k`,stroke:"#6c757d"}),n.jsx(rN,{formatter:(E,A)=>["inventory"].includes(A.toLowerCase())?[`${E}`,A]:[`${E.toLocaleString()}`,A],contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),n.jsx(ax,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),n.jsx(u0,{type:"monotone",dataKey:"sales",stroke:"#28a745",fillOpacity:1,fill:"url(#colorSales)",strokeWidth:2,name:"Sales Orders"}),n.jsx(u0,{type:"monotone",dataKey:"purchases",stroke:"#007bff",fillOpacity:1,fill:"url(#colorPurchases)",strokeWidth:2,name:"Purchase Orders"}),n.jsx(u0,{type:"monotone",dataKey:"invoices",stroke:"#6f42c1",fillOpacity:1,fill:"url(#colorInvoices)",strokeWidth:2,name:"Invoices"}),n.jsx(u0,{type:"monotone",dataKey:"billings",stroke:"#dc3545",fillOpacity:1,fill:"url(#colorBillings)",strokeWidth:2,name:"Billings"})]})})})]})}),n.jsx("div",{className:"col-lg-4",children:n.jsxs("div",{className:"card chart-container",children:[n.jsx("div",{className:"card-header bg-transparent border-0",children:n.jsxs("h5",{className:"card-title fw-bold mb-0",children:[n.jsx(_E,{size:20,className:"text-info me-2"}),"Vendor Invoice Status"]})}),n.jsx("div",{className:"card-body",children:n.jsx(aN,{width:"100%",height:350,children:n.jsxs(a8,{children:[n.jsxs(Ww,{data:[{name:"Paid",value:w.paid},{name:"Pending",value:w.pending}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:[n.jsx(Am,{fill:"#28a745"}),n.jsx(Am,{fill:"#ffc107"})]}),n.jsx(rN,{}),n.jsx(ax,{})]})})})]})}),n.jsx("div",{className:"col-lg-8",children:n.jsxs("div",{className:"card chart-container",children:[n.jsx("div",{className:"card-header bg-transparent border-0",children:n.jsxs("h5",{className:"card-title fw-bold mb-0",children:[n.jsx(s8,{size:20,className:"text-primary me-2"}),"Sales vs Purchases"]})}),n.jsx("div",{className:"card-body",children:n.jsx(aN,{width:"100%",height:350,children:n.jsxs(G0e,{data:S,children:[n.jsx(q5,{strokeDasharray:"3 3"}),n.jsx(Qw,{dataKey:"month"}),n.jsx(Jw,{tickFormatter:E=>`${E/1e3}k`}),n.jsx(rN,{}),n.jsx(ax,{}),n.jsx(Gw,{dataKey:"sales",name:"Sales",fill:"#28a745"}),n.jsx(Gw,{dataKey:"purchases",name:"Purchases",fill:"#007bff"})]})})})]})}),n.jsx("div",{className:"col-lg-4",children:n.jsxs("div",{className:"card chart-container",children:[n.jsx("div",{className:"card-header bg-transparent border-0",children:n.jsxs("h5",{className:"card-title fw-bold mb-0",children:[n.jsx(_E,{size:20,className:"text-info me-2"}),"Customer Invoice Status"]})}),n.jsx("div",{className:"card-body",children:n.jsx(aN,{width:"100%",height:350,children:n.jsxs(a8,{children:[n.jsxs(Ww,{data:[{name:"Paid",value:C.paid},{name:"Pending",value:C.pending}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:[n.jsx(Am,{fill:"#28a745"}),n.jsx(Am,{fill:"#ffc107"})]}),n.jsx(rN,{}),n.jsx(ax,{})]})})})]})})]})]})]})},bge=()=>{const e=rh(),[t,r]=j.useState(""),[a,s]=j.useState(""),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(""),h=async f=>{f.preventDefault(),o(!0);try{const p=await Oe.post("/api/users/login",{identifier:d,password:a});console.log(" Logged in user:",p.data.user);const x=p.data.user;localStorage.setItem("user",JSON.stringify(x)),console.log("User data:",x),alert("Login successful!"),e("/loginscreen")}catch(p){alert("Login failed: "+(p.response?.data?.error||"Unknown error"))}finally{o(!1)}};return n.jsx("div",{className:"container-fluid min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundImage:'url("/assets/img/loginbg.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:n.jsx("div",{className:"row w-100 justify-content-center",children:n.jsxs("div",{className:"col-11 col-sm-9 col-md-7 col-lg-5 col-xl-4",children:[n.jsxs("div",{className:"card shadow-lg border-0 rounded-4",style:{maxHeight:"90vh",height:"auto"},children:[n.jsxs("div",{className:"card-body p-4 overflow-auto",children:[n.jsx("div",{className:"text-center mb-3",children:n.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"60px",height:"60px"},children:n.jsx("i",{className:"ti ti-building text-white",style:{fontSize:"1.8rem"}})})}),n.jsxs("div",{className:"text-center mb-3",children:[n.jsx("h1",{className:"fw-bold text-primary mb-1",style:{fontSize:"1.5rem"},children:"Jyothi Cloud ERP"}),n.jsx("p",{style:{textAlign:"center"},children:"(Endless Possibilities)"}),n.jsx("p",{className:"text-muted mb-0 small",children:"Enter your credentials to access your account"})]}),n.jsxs("form",{onSubmit:h,children:[n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[n.jsx("i",{className:"ti ti-mail me-2 text-primary"}),"Email or Phone"]}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text bg-light border-end-0",children:n.jsx("i",{className:"ti ti-user text-muted"})}),n.jsx("input",{type:"text",id:"identifier",value:d,onChange:f=>u(f.target.value),className:"form-control border-start-0 py-2",placeholder:"Enter your email or phone number",required:!0,disabled:i})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[n.jsx("i",{className:"ti ti-lock me-2 text-primary"}),"Password"]}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text bg-light border-end-0",children:n.jsx("i",{className:"ti ti-key text-muted"})}),n.jsx("input",{type:l?"text":"password",id:"password",value:a,onChange:f=>s(f.target.value),className:"form-control border-start-0 border-end-0 py-2",placeholder:"Enter your password",required:!0,disabled:i}),n.jsx("span",{className:"input-group-text bg-light border-start-0 cursor-pointer",onClick:()=>c(!l),style:{cursor:"pointer"},children:n.jsx("i",{className:`ti ${l?"ti-eye text-primary":"ti-eye-off text-muted"}`})})]})]}),n.jsx("div",{className:"mb-3",children:n.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-semibold",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"ti ti-login me-2"}),"Sign In"]})})})]})]}),n.jsx("div",{className:"card-footer bg-light border-0 text-center py-3",children:n.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",n.jsx(ex,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})})]}),n.jsx("div",{className:"text-center mt-3",children:n.jsx("div",{className:"bg-white bg-opacity-90 rounded-3 p-2 d-inline-block",children:n.jsxs("div",{className:"d-flex gap-3 justify-content-center",children:[n.jsxs(ex,{to:"#",className:"text-primary text-decoration-none small",children:[n.jsx("i",{className:"ti ti-phone me-1"}),"Support"]}),n.jsxs(ex,{to:"#",className:"text-primary text-decoration-none small",children:[n.jsx("i",{className:"ti ti-mail me-1"}),"Contact"]}),n.jsxs(ex,{to:"#",className:"text-primary text-decoration-none small",children:[n.jsx("i",{className:"ti ti-book me-1"}),"Guide"]})]})})})]})})})},yge=({onOpen:e})=>{const[t,r]=j.useState([]),[a,s]=j.useState(""),[i,o]=j.useState(()=>new Date().toISOString().split("T")[0]),[l,c]=j.useState([]),[d,u]=j.useState(""),[h,f]=j.useState(!1),p=rh(),x=JSON.parse(localStorage.getItem("user"))?.id;console.log("User ID from localStorage:",localStorage.getItem("user")),console.log("Fetching companies for user ID:",x),j.useEffect(()=>{if(!x)return;f(!0),Oe.get(`/api/users/${x}/companies`).then(w=>{r(w.data),w.data.length>0&&s(w.data[0]._id)}).catch(w=>{console.error("Error fetching companies:",w)}).finally(()=>{f(!1)});const b=[],S=new Date().getFullYear();for(let w=2020;w<=S;w++)b.push(`01/04/${w} - 31/03/${w+1}`);c(b.reverse())},[x]);const g=()=>{if(!a||!i)return alert("Please select all fields");localStorage.setItem("selectedCompanyId",a),console.log("financial",localStorage.getItem("financialYear")),e?.({companyId:a}),p("/")};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center",children:n.jsx("div",{className:"row w-100",children:n.jsx("div",{className:"col-12 col-md-6 col-lg-4 mx-auto",children:n.jsxs("div",{className:"card shadow-lg border-0",children:[n.jsx("div",{className:"card-header bg-primary  py-4",children:n.jsx("h3",{className:"mb-0 text-white text-center ",children:"Jyothi Cloud ERP"})}),n.jsx("div",{className:"card-body p-4",children:h?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading companies..."})]}):n.jsxs("form",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"form-label fw-semibold",children:[n.jsx("i",{className:"ti ti-building me-2 text-primary"}),"Company"]}),n.jsxs("select",{className:"form-select form-select-lg",value:a,onChange:b=>s(b.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Choose a company..."}),t.map(b=>n.jsx("option",{value:b._id,children:b.name},b._id))]})]}),n.jsx("div",{className:"d-grid gap-2",children:n.jsxs("button",{type:"button",onClick:g,className:"btn btn-primary btn-sm",disabled:!a||!i,children:[n.jsx("i",{className:"bi bi-box-arrow-in-right me-2"}),"Open Transaction"]})})]})}),n.jsxs("div",{className:"card-footer text-center py-3 bg-light",children:[n.jsxs("small",{className:"text-muted",children:[n.jsx("i",{className:"bi bi-shield-check me-1"}),"Secure transaction portal"]}),n.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",n.jsx(ex,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})]})]})})})}),n.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css",rel:"stylesheet"})]})},jge=()=>{const[e,t]=j.useState({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]}),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const[p,x]=await Promise.all([Oe.get("/api/companies"),Oe.get("/api/roles")]);a(p.data),i(x.data)}catch(p){console.error("Error fetching data:",p),alert("Error loading companies and roles")}finally{l(!1)}})()},[]);const c=(f,p)=>{t({...e,[f]:p})},d=f=>{const x=e.roles.includes(f)?e.roles.filter(g=>g!==f):[...e.roles,f];t({...e,roles:x})},u=async f=>{f.preventDefault();try{await Oe.post("/api/users/create",e),alert("User created successfully!"),t({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]})}catch(p){console.error("Error creating user:",p),alert("Error creating user. Please try again.")}},h=f=>e.roles.includes(f);return o?n.jsx("div",{className:"container mt-5",children:n.jsx("div",{className:"row justify-content-center",children:n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading form data..."})]})})})}):n.jsx("div",{className:"content",children:n.jsx("div",{className:"row justify-content-center",children:n.jsx("div",{className:"col-md-10 col-lg-8",children:n.jsxs("div",{className:"card shadow",children:[n.jsx("div",{className:"card-header bg-success text-white",children:n.jsxs("h3",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-user-plus me-2"}),"Create New User"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:u,children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("h5",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-user me-2"}),"Basic Information"]})})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"username",className:"form-label",children:[n.jsx("i",{className:"fas fa-user me-2"}),"Username ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",id:"username",className:"form-control",placeholder:"Enter username",value:e.username,onChange:f=>c("username",f.target.value),required:!0})]}),n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"email",className:"form-label",children:[n.jsx("i",{className:"fas fa-envelope me-2"}),"Email ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email address",value:e.email,onChange:f=>c("email",f.target.value),required:!0})]}),n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"phone",className:"form-label",children:[n.jsx("i",{className:"fas fa-phone me-2"}),"Phone ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"tel",id:"phone",className:"form-control",placeholder:"Enter phone number",value:e.phone,onChange:f=>{const p=f.target.value.replace(/[^0-9]/g,"").slice(0,10);(p.length===0||/^[6-9]/.test(p))&&c("phone",p)},required:!0})]}),n.jsxs("div",{className:"col-md-3 mb-3",children:[n.jsxs("label",{htmlFor:"password",className:"form-label",children:[n.jsx("i",{className:"fas fa-lock me-2"}),"Password ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",value:e.password,onChange:f=>c("password",f.target.value),required:!0})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("label",{htmlFor:"address",className:"form-label",children:[n.jsx("i",{className:"fas fa-map-marker-alt me-2"}),"Address ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("textarea",{id:"address",className:"form-control",rows:"3",placeholder:"Enter full address",value:e.address,onChange:f=>c("address",f.target.value),required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{htmlFor:"companies",className:"form-label",children:[n.jsx("i",{className:"fas fa-building me-2"}),"Select Companies ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("select",{id:"companies",multiple:!0,className:"form-select",style:{minHeight:"120px"},value:e.companies,onChange:f=>c("companies",Array.from(f.target.selectedOptions,p=>p.value)),required:!0,children:r.map(f=>n.jsx("option",{value:f._id,children:f.name},f._id))}),n.jsxs("div",{className:"form-text",children:[n.jsx("i",{className:"fas fa-info-circle me-1"}),"Hold Ctrl (Cmd on Mac) to select multiple companies"]})]}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("h5",{className:"text-primary mb-2",children:[n.jsx("i",{className:"fas fa-users-cog me-2"}),"Assign Roles"]})})}),n.jsx("div",{className:"row",children:s.map(f=>n.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:`role-${f._id}`,checked:h(f._id),onChange:()=>d(f._id)}),n.jsxs("label",{className:"form-check-label",htmlFor:`role-${f._id}`,children:[n.jsx("strong",{children:f.roleName}),n.jsx("br",{}),n.jsxs("small",{className:"text-muted",children:["(",f.roleId,")"]})]})]})},f._id))}),n.jsx("div",{className:"d-grid mt-4",children:n.jsxs("button",{type:"submit",className:"btn btn-success btn-lg",children:[n.jsx("i",{className:"fas fa-user-plus me-2"}),"Create User"]})})]})})]})})})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var e2={};e2.version="0.18.5";var _H=1252,Nge=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],m4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},p4=function(e){Nge.indexOf(e)!=-1&&(_H=m4[0]=e)};function wge(){p4(1252)}var Pd=function(e){p4(e)};function x4(){Pd(1200),wge()}function i8(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Sge(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function EH(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Wb=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Sge(e.slice(2)):t==254&&r==255?EH(e.slice(2)):t==65279?e.slice(1):e},sN=function(t){return String.fromCharCode(t)},o8=function(t){return String.fromCharCode(t)},Ey,Tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Dy(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,s=e.charCodeAt(d++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=Tm.charAt(i)+Tm.charAt(o)+Tm.charAt(l)+Tm.charAt(c);return t}function hc(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Tm.indexOf(e.charAt(d++)),o=Tm.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Tm.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=Tm.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var _a=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),yf=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Km(e){return _a?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function l8(e){return _a?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ec=function(t){return _a?yf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function WS(e){if(typeof ArrayBuffer>"u")return ec(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function dp(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Cge(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function v4(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return v4(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Oi=_a?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:yf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function kge(e){for(var t=[],r=0,a=e.length+250,s=Km(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=Km(65535),a=65530)}return t.push(s.slice(0,r)),Oi(t)}var Qo=/\u0000/g,Gb=/[\u0001-\u0006]/g;function v0(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Od(e,t){var r=""+e;return r.length>=t?r:Cs("0",t-r.length)+r}function g4(e,t){var r=""+e;return r.length>=t?r:Cs(" ",t-r.length)+r}function t2(e,t){var r=""+e;return r.length>=t?r:r+Cs(" ",t-r.length)}function _ge(e,t){var r=""+Math.round(e);return r.length>=t?r:Cs("0",t-r.length)+r}function Ege(e,t){var r=""+e;return r.length>=t?r:Cs("0",t-r.length)+r}var c8=Math.pow(2,32);function qv(e,t){if(e>c8||e<-c8)return _ge(e,t);var r=Math.round(e);return Ege(r,t)}function r2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var d8=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],EE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Dge(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ra={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},u8={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Age={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function a2(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,d=0,u=0,h=Math.floor(s);d<t&&(h=Math.floor(s),l=h*o+i,u=h*d+c,!(s-h<5e-8));)s=1/(s-h),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var f=Math.floor(a*l/u);return[f,a*l-f*u,u]}function cx(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Rge(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var DH=new Date(1899,11,31,0,0,0),Tge=DH.getTime(),Ige=new Date(1900,2,1,0,0,0);function AH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Ige&&(r+=24*60*60*1e3),(r-(Tge+(e.getTimezoneOffset()-DH.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function b4(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Pge(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Oge(e){var t=e<0?12:11,r=b4(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Mge(e){var t=b4(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ay(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Oge(e):t===10?r=e.toFixed(10).substr(0,12):r=Mge(e),b4(Pge(r.toUpperCase()))}function Ox(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ay(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Jc(14,AH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Rge(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Fge(e,t,r,a){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return EE[r.m-1][1];case 5:return EE[r.m-1][0];default:return EE[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return d8[r.q][0];default:return d8[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Od(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Od(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Od(c,d):"";return u}function Im(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var TH=/%/g;function Lge(e,t,r){var a=t.replace(TH,""),s=t.length-a.length;return Qh(e,a,r*Math.pow(10,2*s))+Cs("%",s)}function Bge(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Qh(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function IH(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+IH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var PH=/# (\?+)( ?)\/( ?)(\d+)/;function Uge(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Cs(" ",e[1].length+1+e[4].length):g4(o,e[1].length)+e[2]+"/"+e[3]+Od(l,e[4].length))}function $ge(e,t,r){return r+(t===0?"":""+t)+Cs(" ",e[1].length+2+e[4].length)}var OH=/^#*0*\.([0#]+)/,MH=/\).*[0#]/,RH=/\(###\) ###\\?-####/;function Ho(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function h8(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function f8(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Vge(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function qge(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Rc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(MH)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Rc("n",a,r):"("+Rc("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Bge(e,t,r);if(t.indexOf("%")!==-1)return Lge(e,t,r);if(t.indexOf("E")!==-1)return IH(t,r);if(t.charCodeAt(0)===36)return"$"+Rc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+qv(c,t.length);if(t.match(/^[#?]+$/))return s=qv(r,0),s==="0"&&(s=""),s.length>t.length?s:Ho(t.substr(0,t.length-s.length))+s;if(i=t.match(PH))return Uge(i,c,d);if(t.match(/^#+0+$/))return d+qv(c,t.length-t.indexOf("0"));if(i=t.match(OH))return s=h8(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ho(i[1])).replace(/\.$/,"."+Ho(i[1])).replace(/\.(\d*)$/,function(x,g){return"."+g+Cs("0",Ho(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+h8(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Im(qv(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Rc(e,t,-r):Im(""+(Math.floor(r)+Vge(r,i[1].length)))+"."+Od(f8(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Rc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=v0(Rc(e,t.replace(/[\\-]/g,""),r)),o=0,v0(v0(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return o<s.length?s.charAt(o++):x==="0"?"0":""}));if(t.match(RH))return s=Rc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=a2(c,Math.pow(10,o)-1,!1),s=""+d,u=Qh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=t2(l[2],o),u.length<i[4].length&&(u=Ho(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=a2(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?g4(l[1],o)+i[2]+"/"+i[3]+t2(l[2],o):Cs(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=qv(r,0),t.length<=s.length?s:Ho(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,f=t.length-s.length-h;return Ho(t.substr(0,h)+s+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=f8(r,i[1].length),r<0?"-"+Rc(e,t,-r):Im(qge(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Od(0,3-x.length):"")+x})+"."+Od(o,i[1].length);switch(t){case"###,##0.00":return Rc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Im(qv(c,0));return p!=="0"?d+p:"";case"###,###.00":return Rc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Rc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function zge(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Qh(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Hge(e,t,r){var a=t.replace(TH,""),s=t.length-a.length;return Qh(e,a,r*Math.pow(10,2*s))+Cs("%",s)}function FH(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+FH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Cu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(MH)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cu("n",a,r):"("+Cu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return zge(e,t,r);if(t.indexOf("%")!==-1)return Hge(e,t,r);if(t.indexOf("E")!==-1)return FH(t,r);if(t.charCodeAt(0)===36)return"$"+Cu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Od(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Ho(t.substr(0,t.length-s.length))+s;if(i=t.match(PH))return $ge(i,c,d);if(t.match(/^#+0+$/))return d+Od(c,t.length-t.indexOf("0"));if(i=t.match(OH))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Ho(i[1])).replace(/\.$/,"."+Ho(i[1])),s=s.replace(/\.(\d*)$/,function(x,g){return"."+g+Cs("0",Ho(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Im(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cu(e,t,-r):Im(""+r)+"."+Cs("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Cu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=v0(Cu(e,t.replace(/[\\-]/g,""),r)),o=0,v0(v0(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return o<s.length?s.charAt(o++):x==="0"?"0":""}));if(t.match(RH))return s=Cu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=a2(c,Math.pow(10,o)-1,!1),s=""+d,u=Qh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=t2(l[2],o),u.length<i[4].length&&(u=Ho(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=a2(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?g4(l[1],o)+i[2]+"/"+i[3]+t2(l[2],o):Cs(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Ho(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,f=t.length-s.length-h;return Ho(t.substr(0,h)+s+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Cu(e,t,-r):Im(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Od(0,3-x.length):"")+x})+"."+Od(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Im(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return Cu(e,t.slice(0,t.lastIndexOf(".")),r)+Ho(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Qh(e,t,r){return(r|0)===r?Cu(e,t,r):Rc(e,t,r)}function Wge(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var LH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function yg(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":r2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(LH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Gge(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",d,u,h,f="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!r2(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(h=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(h);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),x=p==="("||p===")"?p:"t";s[s.length]={t:x,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=cx(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=cx(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(d==null&&(d=cx(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",f="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",o+=5,f="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(g.v=d.H>=12?"":""),g.t="T",o+=5,f="h"):(g.t="t",++o),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(LH)){if(d==null&&(d=cx(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",yg(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,y=0,S;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=f,c="h",b<1&&(b=1);break;case"s":(S=s[o].v.match(/\.0+$/))&&(y=Math.max(y,S[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",k;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Fge(s[o].t.charCodeAt(0),s[o].v,d,y),s[o].t="t";break;case"n":case"?":for(k=o+1;s[k]!=null&&((l=s[k].t)==="?"||l==="D"||(l===" "||l==="t")&&s[k+1]!=null&&(s[k+1].t==="?"||s[k+1].t==="t"&&s[k+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[k].v==="/"||s[k].v===" "&&s[k+1]!=null&&s[k+1].t=="?"));)s[o].v+=s[k].v,s[k]={v:"",t:";"},++k;w+=s[o].v,o=k-1;break;case"G":s[o].t="t",s[o].v=Ox(t,r);break}var C="",D,E;if(w.length>0){w.charCodeAt(0)==40?(D=t<0&&w.charCodeAt(0)===45?-t:t,E=Qh("n",w,D)):(D=t<0&&a>1?-t:t,E=Qh("n",w,D),D<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),k=E.length-1;var A=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){A=o;break}var I=s.length;if(A===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(k>=s[o].v.length-1?(k-=s[o].v.length,s[o].v=E.substr(k+1,s[o].v.length)):k<0?s[o].v="":(s[o].v=E.substr(0,k+1),k=-1),s[o].t="t",I=o);k>=0&&I<s.length&&(s[I].v=E.substr(0,k+1)+s[I].v)}else if(A!==s.length&&E.indexOf("E")===-1){for(k=E.indexOf(".")-1,o=A;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===A?s[o].v.indexOf(".")-1:s[o].v.length-1,C=s[o].v.substr(u+1);u>=0;--u)k>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(C=E.charAt(k--)+C);s[o].v=C,s[o].t="t",I=o}for(k>=0&&I<s.length&&(s[I].v=E.substr(0,k+1)+s[I].v),k=E.indexOf(".")+1,o=A;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==A)){for(u=s[o].v.indexOf(".")>-1&&o===A?s[o].v.indexOf(".")+1:0,C=s[o].v.substr(0,u);u<s[o].v.length;++u)k<E.length&&(C+=E.charAt(k++));s[o].v=C,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(D=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Qh(s[o].t,s[o].v,D),s[o].t="t");var L="";for(o=0;o!==s.length;++o)s[o]!=null&&(L+=s[o].v);return L}var m8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function p8(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Yge(e,t){var r=Wge(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(m8),l=r[1].match(m8);return p8(t,o)?[a,r[0]]:p8(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function Jc(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:ra)[e],a==null&&(a=r.table&&r.table[u8[e]]||ra[u8[e]]),a==null&&(a=Age[e]||"General");break}if(r2(a,0))return Ox(t,r);t instanceof Date&&(t=AH(t,r.date1904));var s=Yge(a,t);if(r2(s[1]))return Ox(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Gge(s[1],t,r,s[0])}function Jh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ra[r]==null){t<0&&(t=r);continue}if(ra[r]==e){t=r;break}}t<0&&(t=391)}return ra[t]=e,t}function GS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Jh(e[t],t)}function jg(){ra=Dge()}var Kge={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},BH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Xge(e){var t=typeof e=="number"?ra[e]:e;return t=t.replace(BH,"(\\d+)"),new RegExp("^"+t+"$")}function Qge(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(BH)||[]).forEach(function(h,f){var p=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":a=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&s==-1&&i==-1?u:d+"T"+u}var Jge=function(){var e={};e.version="1.2.0";function t(){for(var E=0,A=new Array(256),I=0;I!=256;++I)E=I,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,A[I]=E;return typeof Int32Array<"u"?new Int32Array(A):A}var r=t();function a(E){var A=0,I=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=E[L];for(L=0;L!=256;++L)for(I=E[L],A=256+L;A<4096;A+=256)I=P[A]=I>>>8^E[I&255];var O=[];for(L=1;L!=16;++L)O[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return O}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],h=s[6],f=s[7],p=s[8],x=s[9],g=s[10],b=s[11],y=s[12],S=s[13],w=s[14];function k(E,A){for(var I=A^-1,L=0,P=E.length;L<P;)I=I>>>8^r[(I^E.charCodeAt(L++))&255];return~I}function C(E,A){for(var I=A^-1,L=E.length-15,P=0;P<L;)I=w[E[P++]^I&255]^S[E[P++]^I>>8&255]^y[E[P++]^I>>16&255]^b[E[P++]^I>>>24]^g[E[P++]]^x[E[P++]]^p[E[P++]]^f[E[P++]]^h[E[P++]]^u[E[P++]]^d[E[P++]]^c[E[P++]]^l[E[P++]]^o[E[P++]]^i[E[P++]]^r[E[P++]];for(L+=15;P<L;)I=I>>>8^r[(I^E[P++])&255];return~I}function D(E,A){for(var I=A^-1,L=0,P=E.length,O=0,Y=0;L<P;)O=E.charCodeAt(L++),O<128?I=I>>>8^r[(I^O)&255]:O<2048?(I=I>>>8^r[(I^(192|O>>6&31))&255],I=I>>>8^r[(I^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,Y=E.charCodeAt(L++)&1023,I=I>>>8^r[(I^(240|O>>8&7))&255],I=I>>>8^r[(I^(128|O>>2&63))&255],I=I>>>8^r[(I^(128|Y>>6&15|(O&3)<<4))&255],I=I>>>8^r[(I^(128|Y&63))&255]):(I=I>>>8^r[(I^(224|O>>12&15))&255],I=I>>>8^r[(I^(128|O>>6&63))&255],I=I>>>8^r[(I^(128|O&63))&255]);return~I}return e.table=r,e.bstr=k,e.buf=C,e.str=D,e}(),Wr=function(){var t={};t.version="1.2.1";function r(fe,Re){for(var Te=fe.split("/"),_e=Re.split("/"),Le=0,Ve=0,pt=Math.min(Te.length,_e.length);Le<pt;++Le){if(Ve=Te[Le].length-_e[Le].length)return Ve;if(Te[Le]!=_e[Le])return Te[Le]<_e[Le]?-1:1}return Te.length-_e.length}function a(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:a(fe.slice(0,-1));var Re=fe.lastIndexOf("/");return Re===-1?fe:fe.slice(0,Re+1)}function s(fe){if(fe.charAt(fe.length-1)=="/")return s(fe.slice(0,-1));var Re=fe.lastIndexOf("/");return Re===-1?fe:fe.slice(Re+1)}function i(fe,Re){typeof Re=="string"&&(Re=new Date(Re));var Te=Re.getHours();Te=Te<<6|Re.getMinutes(),Te=Te<<5|Re.getSeconds()>>>1,fe.write_shift(2,Te);var _e=Re.getFullYear()-1980;_e=_e<<4|Re.getMonth()+1,_e=_e<<5|Re.getDate(),fe.write_shift(2,_e)}function o(fe){var Re=fe.read_shift(2)&65535,Te=fe.read_shift(2)&65535,_e=new Date,Le=Te&31;Te>>>=5;var Ve=Te&15;Te>>>=4,_e.setMilliseconds(0),_e.setFullYear(Te+1980),_e.setMonth(Ve-1),_e.setDate(Le);var pt=Re&31;Re>>>=5;var wt=Re&63;return Re>>>=6,_e.setHours(Re),_e.setMinutes(wt),_e.setSeconds(pt<<1),_e}function l(fe){to(fe,0);for(var Re={},Te=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Le=fe.read_shift(2),Ve=fe.l+Le,pt={};switch(_e){case 21589:Te=fe.read_shift(1),Te&1&&(pt.mtime=fe.read_shift(4)),Le>5&&(Te&2&&(pt.atime=fe.read_shift(4)),Te&4&&(pt.ctime=fe.read_shift(4))),pt.mtime&&(pt.mt=new Date(pt.mtime*1e3));break}fe.l=Ve,Re[_e]=pt}return Re}var c;function d(){return c||(c={})}function u(fe,Re){if(fe[0]==80&&fe[1]==75)return Ie(fe,Re);if((fe[0]|32)==109&&(fe[1]|32)==105)return Xt(fe,Re);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Te=3,_e=512,Le=0,Ve=0,pt=0,wt=0,st=0,St=[],Ct=fe.slice(0,512);to(Ct,0);var Jt=h(Ct);switch(Te=Jt[0],Te){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Jt[1]==0)return Ie(fe,Re);default:throw new Error("Major Version: Expected 3 or 4 saw "+Te)}_e!==512&&(Ct=fe.slice(0,_e),to(Ct,28));var ir=fe.slice(0,_e);f(Ct,Te);var xr=Ct.read_shift(4,"i");if(Te===3&&xr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xr);Ct.l+=4,pt=Ct.read_shift(4,"i"),Ct.l+=4,Ct.chk("00100000","Mini Stream Cutoff Size: "),wt=Ct.read_shift(4,"i"),Le=Ct.read_shift(4,"i"),st=Ct.read_shift(4,"i"),Ve=Ct.read_shift(4,"i");for(var or=-1,ze=0;ze<109&&(or=Ct.read_shift(4,"i"),!(or<0));++ze)St[ze]=or;var dr=p(fe,_e);b(st,Ve,dr,_e,St);var ur=S(dr,pt,St,_e);ur[pt].name="!Directory",Le>0&&wt!==Y&&(ur[wt].name="!MiniFAT"),ur[St[0]].name="!FAT",ur.fat_addrs=St,ur.ssz=_e;var qr={},va=[],rn=[],Qs=[];w(pt,ur,dr,va,Le,qr,rn,wt),x(rn,Qs,va),va.shift();var Gn={FileIndex:rn,FullPaths:Qs};return Re&&Re.raw&&(Gn.raw={header:ir,sectors:dr}),Gn}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(q,"Header Signature: "),fe.l+=16;var Re=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Re]}function f(fe,Re){var Te=9;switch(fe.l+=2,Te=fe.read_shift(2)){case 9:if(Re!=3)throw new Error("Sector Shift: Expected 9 saw "+Te);break;case 12:if(Re!=4)throw new Error("Sector Shift: Expected 12 saw "+Te);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Te)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Re){for(var Te=Math.ceil(fe.length/Re)-1,_e=[],Le=1;Le<Te;++Le)_e[Le-1]=fe.slice(Le*Re,(Le+1)*Re);return _e[Te-1]=fe.slice(Te*Re),_e}function x(fe,Re,Te){for(var _e=0,Le=0,Ve=0,pt=0,wt=0,st=Te.length,St=[],Ct=[];_e<st;++_e)St[_e]=Ct[_e]=_e,Re[_e]=Te[_e];for(;wt<Ct.length;++wt)_e=Ct[wt],Le=fe[_e].L,Ve=fe[_e].R,pt=fe[_e].C,St[_e]===_e&&(Le!==-1&&St[Le]!==Le&&(St[_e]=St[Le]),Ve!==-1&&St[Ve]!==Ve&&(St[_e]=St[Ve])),pt!==-1&&(St[pt]=_e),Le!==-1&&_e!=St[_e]&&(St[Le]=St[_e],Ct.lastIndexOf(Le)<wt&&Ct.push(Le)),Ve!==-1&&_e!=St[_e]&&(St[Ve]=St[_e],Ct.lastIndexOf(Ve)<wt&&Ct.push(Ve));for(_e=1;_e<st;++_e)St[_e]===_e&&(Ve!==-1&&St[Ve]!==Ve?St[_e]=St[Ve]:Le!==-1&&St[Le]!==Le&&(St[_e]=St[Le]));for(_e=1;_e<st;++_e)if(fe[_e].type!==0){if(wt=_e,wt!=St[wt])do wt=St[wt],Re[_e]=Re[wt]+"/"+Re[_e];while(wt!==0&&St[wt]!==-1&&wt!=St[wt]);St[_e]=-1}for(Re[0]+="/",_e=1;_e<st;++_e)fe[_e].type!==2&&(Re[_e]+="/")}function g(fe,Re,Te){for(var _e=fe.start,Le=fe.size,Ve=[],pt=_e;Te&&Le>0&&pt>=0;)Ve.push(Re.slice(pt*O,pt*O+O)),Le-=O,pt=Qp(Te,pt*4);return Ve.length===0?zt(0):Oi(Ve).slice(0,fe.size)}function b(fe,Re,Te,_e,Le){var Ve=Y;if(fe===Y){if(Re!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var pt=Te[fe],wt=(_e>>>2)-1;if(!pt)return;for(var st=0;st<wt&&(Ve=Qp(pt,st*4))!==Y;++st)Le.push(Ve);b(Qp(pt,_e-4),Re-1,Te,_e,Le)}}function y(fe,Re,Te,_e,Le){var Ve=[],pt=[];Le||(Le=[]);var wt=_e-1,st=0,St=0;for(st=Re;st>=0;){Le[st]=!0,Ve[Ve.length]=st,pt.push(fe[st]);var Ct=Te[Math.floor(st*4/_e)];if(St=st*4&wt,_e<4+St)throw new Error("FAT boundary crossed: "+st+" 4 "+_e);if(!fe[Ct])break;st=Qp(fe[Ct],St)}return{nodes:Ve,data:_8([pt])}}function S(fe,Re,Te,_e){var Le=fe.length,Ve=[],pt=[],wt=[],st=[],St=_e-1,Ct=0,Jt=0,ir=0,xr=0;for(Ct=0;Ct<Le;++Ct)if(wt=[],ir=Ct+Re,ir>=Le&&(ir-=Le),!pt[ir]){st=[];var or=[];for(Jt=ir;Jt>=0;){or[Jt]=!0,pt[Jt]=!0,wt[wt.length]=Jt,st.push(fe[Jt]);var ze=Te[Math.floor(Jt*4/_e)];if(xr=Jt*4&St,_e<4+xr)throw new Error("FAT boundary crossed: "+Jt+" 4 "+_e);if(!fe[ze]||(Jt=Qp(fe[ze],xr),or[Jt]))break}Ve[ir]={nodes:wt,data:_8([st])}}return Ve}function w(fe,Re,Te,_e,Le,Ve,pt,wt){for(var st=0,St=_e.length?2:0,Ct=Re[fe].data,Jt=0,ir=0,xr;Jt<Ct.length;Jt+=128){var or=Ct.slice(Jt,Jt+128);to(or,64),ir=or.read_shift(2),xr=k4(or,0,ir-St),_e.push(xr);var ze={name:xr,type:or.read_shift(1),color:or.read_shift(1),L:or.read_shift(4,"i"),R:or.read_shift(4,"i"),C:or.read_shift(4,"i"),clsid:or.read_shift(16),state:or.read_shift(4,"i"),start:0,size:0},dr=or.read_shift(2)+or.read_shift(2)+or.read_shift(2)+or.read_shift(2);dr!==0&&(ze.ct=k(or,or.l-8));var ur=or.read_shift(2)+or.read_shift(2)+or.read_shift(2)+or.read_shift(2);ur!==0&&(ze.mt=k(or,or.l-8)),ze.start=or.read_shift(4,"i"),ze.size=or.read_shift(4,"i"),ze.size<0&&ze.start<0&&(ze.size=ze.type=0,ze.start=Y,ze.name=""),ze.type===5?(st=ze.start,Le>0&&st!==Y&&(Re[st].name="!StreamData")):ze.size>=4096?(ze.storage="fat",Re[ze.start]===void 0&&(Re[ze.start]=y(Te,ze.start,Re.fat_addrs,Re.ssz)),Re[ze.start].name=ze.name,ze.content=Re[ze.start].data.slice(0,ze.size)):(ze.storage="minifat",ze.size<0?ze.size=0:st!==Y&&ze.start!==Y&&Re[st]&&(ze.content=g(ze,Re[st].data,(Re[wt]||{}).data))),ze.content&&to(ze.content,0),Ve[xr]=ze,pt.push(ze)}}function k(fe,Re){return new Date((Ql(fe,Re+4)/1e7*Math.pow(2,32)+Ql(fe,Re)/1e7-11644473600)*1e3)}function C(fe,Re){return d(),u(c.readFileSync(fe),Re)}function D(fe,Re){var Te=Re&&Re.type;switch(Te||_a&&Buffer.isBuffer(fe)&&(Te="buffer"),Te||"base64"){case"file":return C(fe,Re);case"base64":return u(ec(hc(fe)),Re);case"binary":return u(ec(fe),Re)}return u(fe,Re)}function E(fe,Re){var Te=Re||{},_e=Te.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Te.CLSID&&(fe.FileIndex[0].clsid=Te.CLSID),A(fe)}function A(fe){var Re="Sh33tJ5";if(!Wr.find(fe,"/"+Re)){var Te=zt(4);Te[0]=55,Te[1]=Te[3]=50,Te[2]=54,fe.FileIndex.push({name:Re,type:2,content:Te,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Re),I(fe)}}function I(fe,Re){E(fe);for(var Te=!1,_e=!1,Le=fe.FullPaths.length-1;Le>=0;--Le){var Ve=fe.FileIndex[Le];switch(Ve.type){case 0:_e?Te=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Ve.R*Ve.L*Ve.C)&&(Te=!0),Ve.R>-1&&Ve.L>-1&&Ve.R==Ve.L&&(Te=!0);break;default:Te=!0;break}}if(!(!Te&&!Re)){var pt=new Date(1987,1,19),wt=0,st=Object.create?Object.create(null):{},St=[];for(Le=0;Le<fe.FullPaths.length;++Le)st[fe.FullPaths[Le]]=!0,fe.FileIndex[Le].type!==0&&St.push([fe.FullPaths[Le],fe.FileIndex[Le]]);for(Le=0;Le<St.length;++Le){var Ct=a(St[Le][0]);_e=st[Ct],_e||(St.push([Ct,{name:s(Ct).replace("/",""),type:1,clsid:U,ct:pt,mt:pt,content:null}]),st[Ct]=!0)}for(St.sort(function(xr,or){return r(xr[0],or[0])}),fe.FullPaths=[],fe.FileIndex=[],Le=0;Le<St.length;++Le)fe.FullPaths[Le]=St[Le][0],fe.FileIndex[Le]=St[Le][1];for(Le=0;Le<St.length;++Le){var Jt=fe.FileIndex[Le],ir=fe.FullPaths[Le];if(Jt.name=s(ir).replace("/",""),Jt.L=Jt.R=Jt.C=-(Jt.color=1),Jt.size=Jt.content?Jt.content.length:0,Jt.start=0,Jt.clsid=Jt.clsid||U,Le===0)Jt.C=St.length>1?1:-1,Jt.size=0,Jt.type=5;else if(ir.slice(-1)=="/"){for(wt=Le+1;wt<St.length&&a(fe.FullPaths[wt])!=ir;++wt);for(Jt.C=wt>=St.length?-1:wt,wt=Le+1;wt<St.length&&a(fe.FullPaths[wt])!=a(ir);++wt);Jt.R=wt>=St.length?-1:wt,Jt.type=1}else a(fe.FullPaths[Le+1]||"")==a(ir)&&(Jt.R=Le+1),Jt.type=2}}}function L(fe,Re){var Te=Re||{};if(Te.fileType=="mad")return Ft(fe,Te);switch(I(fe),Te.fileType){case"zip":return Ye(fe,Te)}var _e=function(xr){for(var or=0,ze=0,dr=0;dr<xr.FileIndex.length;++dr){var ur=xr.FileIndex[dr];if(ur.content){var qr=ur.content.length;qr>0&&(qr<4096?or+=qr+63>>6:ze+=qr+511>>9)}}for(var va=xr.FullPaths.length+3>>2,rn=or+7>>3,Qs=or+127>>7,Gn=rn+ze+va+Qs,xs=Gn+127>>7,As=xs<=109?0:Math.ceil((xs-109)/127);Gn+xs+As+127>>7>xs;)As=++xs<=109?0:Math.ceil((xs-109)/127);var yt=[1,As,xs,Qs,va,ze,or,0];return xr.FileIndex[0].size=or<<6,yt[7]=(xr.FileIndex[0].start=yt[0]+yt[1]+yt[2]+yt[3]+yt[4]+yt[5])+(yt[6]+7>>3),yt}(fe),Le=zt(_e[7]<<9),Ve=0,pt=0;{for(Ve=0;Ve<8;++Ve)Le.write_shift(1,K[Ve]);for(Ve=0;Ve<8;++Ve)Le.write_shift(2,0);for(Le.write_shift(2,62),Le.write_shift(2,3),Le.write_shift(2,65534),Le.write_shift(2,9),Le.write_shift(2,6),Ve=0;Ve<3;++Ve)Le.write_shift(2,0);for(Le.write_shift(4,0),Le.write_shift(4,_e[2]),Le.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Le.write_shift(4,0),Le.write_shift(4,4096),Le.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:Y),Le.write_shift(4,_e[3]),Le.write_shift(-4,_e[1]?_e[0]-1:Y),Le.write_shift(4,_e[1]),Ve=0;Ve<109;++Ve)Le.write_shift(-4,Ve<_e[2]?_e[1]+Ve:-1)}if(_e[1])for(pt=0;pt<_e[1];++pt){for(;Ve<236+pt*127;++Ve)Le.write_shift(-4,Ve<_e[2]?_e[1]+Ve:-1);Le.write_shift(-4,pt===_e[1]-1?Y:pt+1)}var wt=function(xr){for(pt+=xr;Ve<pt-1;++Ve)Le.write_shift(-4,Ve+1);xr&&(++Ve,Le.write_shift(-4,Y))};for(pt=Ve=0,pt+=_e[1];Ve<pt;++Ve)Le.write_shift(-4,J.DIFSECT);for(pt+=_e[2];Ve<pt;++Ve)Le.write_shift(-4,J.FATSECT);wt(_e[3]),wt(_e[4]);for(var st=0,St=0,Ct=fe.FileIndex[0];st<fe.FileIndex.length;++st)Ct=fe.FileIndex[st],Ct.content&&(St=Ct.content.length,!(St<4096)&&(Ct.start=pt,wt(St+511>>9)));for(wt(_e[6]+7>>3);Le.l&511;)Le.write_shift(-4,J.ENDOFCHAIN);for(pt=Ve=0,st=0;st<fe.FileIndex.length;++st)Ct=fe.FileIndex[st],Ct.content&&(St=Ct.content.length,!(!St||St>=4096)&&(Ct.start=pt,wt(St+63>>6)));for(;Le.l&511;)Le.write_shift(-4,J.ENDOFCHAIN);for(Ve=0;Ve<_e[4]<<2;++Ve){var Jt=fe.FullPaths[Ve];if(!Jt||Jt.length===0){for(st=0;st<17;++st)Le.write_shift(4,0);for(st=0;st<3;++st)Le.write_shift(4,-1);for(st=0;st<12;++st)Le.write_shift(4,0);continue}Ct=fe.FileIndex[Ve],Ve===0&&(Ct.start=Ct.size?Ct.start-1:Y);var ir=Ve===0&&Te.root||Ct.name;if(St=2*(ir.length+1),Le.write_shift(64,ir,"utf16le"),Le.write_shift(2,St),Le.write_shift(1,Ct.type),Le.write_shift(1,Ct.color),Le.write_shift(-4,Ct.L),Le.write_shift(-4,Ct.R),Le.write_shift(-4,Ct.C),Ct.clsid)Le.write_shift(16,Ct.clsid,"hex");else for(st=0;st<4;++st)Le.write_shift(4,0);Le.write_shift(4,Ct.state||0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,Ct.start),Le.write_shift(4,Ct.size),Le.write_shift(4,0)}for(Ve=1;Ve<fe.FileIndex.length;++Ve)if(Ct=fe.FileIndex[Ve],Ct.size>=4096)if(Le.l=Ct.start+1<<9,_a&&Buffer.isBuffer(Ct.content))Ct.content.copy(Le,Le.l,0,Ct.size),Le.l+=Ct.size+511&-512;else{for(st=0;st<Ct.size;++st)Le.write_shift(1,Ct.content[st]);for(;st&511;++st)Le.write_shift(1,0)}for(Ve=1;Ve<fe.FileIndex.length;++Ve)if(Ct=fe.FileIndex[Ve],Ct.size>0&&Ct.size<4096)if(_a&&Buffer.isBuffer(Ct.content))Ct.content.copy(Le,Le.l,0,Ct.size),Le.l+=Ct.size+63&-64;else{for(st=0;st<Ct.size;++st)Le.write_shift(1,Ct.content[st]);for(;st&63;++st)Le.write_shift(1,0)}if(_a)Le.l=Le.length;else for(;Le.l<Le.length;)Le.write_shift(1,0);return Le}function P(fe,Re){var Te=fe.FullPaths.map(function(st){return st.toUpperCase()}),_e=Te.map(function(st){var St=st.split("/");return St[St.length-(st.slice(-1)=="/"?2:1)]}),Le=!1;Re.charCodeAt(0)===47?(Le=!0,Re=Te[0].slice(0,-1)+Re):Le=Re.indexOf("/")!==-1;var Ve=Re.toUpperCase(),pt=Le===!0?Te.indexOf(Ve):_e.indexOf(Ve);if(pt!==-1)return fe.FileIndex[pt];var wt=!Ve.match(Gb);for(Ve=Ve.replace(Qo,""),wt&&(Ve=Ve.replace(Gb,"!")),pt=0;pt<Te.length;++pt)if((wt?Te[pt].replace(Gb,"!"):Te[pt]).replace(Qo,"")==Ve||(wt?_e[pt].replace(Gb,"!"):_e[pt]).replace(Qo,"")==Ve)return fe.FileIndex[pt];return null}var O=64,Y=-2,q="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Y,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function F(fe,Re,Te){d();var _e=L(fe,Te);c.writeFileSync(Re,_e)}function X(fe){for(var Re=new Array(fe.length),Te=0;Te<fe.length;++Te)Re[Te]=String.fromCharCode(fe[Te]);return Re.join("")}function Q(fe,Re){var Te=L(fe,Re);switch(Re&&Re.type||"buffer"){case"file":return d(),c.writeFileSync(Re.filename,Te),Te;case"binary":return typeof Te=="string"?Te:X(Te);case"base64":return Dy(typeof Te=="string"?Te:X(Te));case"buffer":if(_a)return Buffer.isBuffer(Te)?Te:yf(Te);case"array":return typeof Te=="string"?ec(Te):Te}return Te}var ie;function M(fe){try{var Re=fe.InflateRaw,Te=new Re;if(Te._processChunk(new Uint8Array([3,0]),Te._finishFlushFlag),Te.bytesRead)ie=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function V(fe,Re){if(!ie)return qe(fe,Re);var Te=ie.InflateRaw,_e=new Te,Le=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Le}function W(fe){return ie?ie.deflateRawSync(fe):ve(fe)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ce(fe){var Re=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Re>>16|Re>>8|Re)&255}for(var ae=typeof Uint8Array<"u",Z=ae?new Uint8Array(256):[],de=0;de<256;++de)Z[de]=ce(de);function z(fe,Re){var Te=Z[fe&255];return Re<=8?Te>>>8-Re:(Te=Te<<8|Z[fe>>8&255],Re<=16?Te>>>16-Re:(Te=Te<<8|Z[fe>>16&255],Te>>>24-Re))}function se(fe,Re){var Te=Re&7,_e=Re>>>3;return(fe[_e]|(Te<=6?0:fe[_e+1]<<8))>>>Te&3}function Ne(fe,Re){var Te=Re&7,_e=Re>>>3;return(fe[_e]|(Te<=5?0:fe[_e+1]<<8))>>>Te&7}function ue(fe,Re){var Te=Re&7,_e=Re>>>3;return(fe[_e]|(Te<=4?0:fe[_e+1]<<8))>>>Te&15}function oe(fe,Re){var Te=Re&7,_e=Re>>>3;return(fe[_e]|(Te<=3?0:fe[_e+1]<<8))>>>Te&31}function ye(fe,Re){var Te=Re&7,_e=Re>>>3;return(fe[_e]|(Te<=1?0:fe[_e+1]<<8))>>>Te&127}function je(fe,Re,Te){var _e=Re&7,Le=Re>>>3,Ve=(1<<Te)-1,pt=fe[Le]>>>_e;return Te<8-_e||(pt|=fe[Le+1]<<8-_e,Te<16-_e)||(pt|=fe[Le+2]<<16-_e,Te<24-_e)||(pt|=fe[Le+3]<<24-_e),pt&Ve}function Me(fe,Re,Te){var _e=Re&7,Le=Re>>>3;return _e<=5?fe[Le]|=(Te&7)<<_e:(fe[Le]|=Te<<_e&255,fe[Le+1]=(Te&7)>>8-_e),Re+3}function He(fe,Re,Te){var _e=Re&7,Le=Re>>>3;return Te=(Te&1)<<_e,fe[Le]|=Te,Re+1}function et(fe,Re,Te){var _e=Re&7,Le=Re>>>3;return Te<<=_e,fe[Le]|=Te&255,Te>>>=8,fe[Le+1]=Te,Re+8}function ft(fe,Re,Te){var _e=Re&7,Le=Re>>>3;return Te<<=_e,fe[Le]|=Te&255,Te>>>=8,fe[Le+1]=Te&255,fe[Le+2]=Te>>>8,Re+16}function Be(fe,Re){var Te=fe.length,_e=2*Te>Re?2*Te:Re+5,Le=0;if(Te>=Re)return fe;if(_a){var Ve=l8(_e);if(fe.copy)fe.copy(Ve);else for(;Le<fe.length;++Le)Ve[Le]=fe[Le];return Ve}else if(ae){var pt=new Uint8Array(_e);if(pt.set)pt.set(fe);else for(;Le<Te;++Le)pt[Le]=fe[Le];return pt}return fe.length=_e,fe}function dt(fe){for(var Re=new Array(fe),Te=0;Te<fe;++Te)Re[Te]=0;return Re}function Tt(fe,Re,Te){var _e=1,Le=0,Ve=0,pt=0,wt=0,st=fe.length,St=ae?new Uint16Array(32):dt(32);for(Ve=0;Ve<32;++Ve)St[Ve]=0;for(Ve=st;Ve<Te;++Ve)fe[Ve]=0;st=fe.length;var Ct=ae?new Uint16Array(st):dt(st);for(Ve=0;Ve<st;++Ve)St[Le=fe[Ve]]++,_e<Le&&(_e=Le),Ct[Ve]=0;for(St[0]=0,Ve=1;Ve<=_e;++Ve)St[Ve+16]=wt=wt+St[Ve-1]<<1;for(Ve=0;Ve<st;++Ve)wt=fe[Ve],wt!=0&&(Ct[Ve]=St[wt+16]++);var Jt=0;for(Ve=0;Ve<st;++Ve)if(Jt=fe[Ve],Jt!=0)for(wt=z(Ct[Ve],_e)>>_e-Jt,pt=(1<<_e+4-Jt)-1;pt>=0;--pt)Re[wt|pt<<Jt]=Jt&15|Ve<<4;return _e}var At=ae?new Uint16Array(512):dt(512),qt=ae?new Uint16Array(32):dt(32);if(!ae){for(var xe=0;xe<512;++xe)At[xe]=0;for(xe=0;xe<32;++xe)qt[xe]=0}(function(){for(var fe=[],Re=0;Re<32;Re++)fe.push(5);Tt(fe,qt,32);var Te=[];for(Re=0;Re<=143;Re++)Te.push(8);for(;Re<=255;Re++)Te.push(9);for(;Re<=279;Re++)Te.push(7);for(;Re<=287;Re++)Te.push(8);Tt(Te,At,288)})();var he=function(){for(var Re=ae?new Uint8Array(32768):[],Te=0,_e=0;Te<ne.length-1;++Te)for(;_e<ne[Te+1];++_e)Re[_e]=Te;for(;_e<32768;++_e)Re[_e]=29;var Le=ae?new Uint8Array(259):[];for(Te=0,_e=0;Te<re.length-1;++Te)for(;_e<re[Te+1];++_e)Le[_e]=Te;function Ve(wt,st){for(var St=0;St<wt.length;){var Ct=Math.min(65535,wt.length-St),Jt=St+Ct==wt.length;for(st.write_shift(1,+Jt),st.write_shift(2,Ct),st.write_shift(2,~Ct&65535);Ct-- >0;)st[st.l++]=wt[St++]}return st.l}function pt(wt,st){for(var St=0,Ct=0,Jt=ae?new Uint16Array(32768):[];Ct<wt.length;){var ir=Math.min(65535,wt.length-Ct);if(ir<10){for(St=Me(st,St,+(Ct+ir==wt.length)),St&7&&(St+=8-(St&7)),st.l=St/8|0,st.write_shift(2,ir),st.write_shift(2,~ir&65535);ir-- >0;)st[st.l++]=wt[Ct++];St=st.l*8;continue}St=Me(st,St,+(Ct+ir==wt.length)+2);for(var xr=0;ir-- >0;){var or=wt[Ct];xr=(xr<<5^or)&32767;var ze=-1,dr=0;if((ze=Jt[xr])&&(ze|=Ct&-32768,ze>Ct&&(ze-=32768),ze<Ct))for(;wt[ze+dr]==wt[Ct+dr]&&dr<250;)++dr;if(dr>2){or=Le[dr],or<=22?St=et(st,St,Z[or+1]>>1)-1:(et(st,St,3),St+=5,et(st,St,Z[or-23]>>5),St+=3);var ur=or<8?0:or-4>>2;ur>0&&(ft(st,St,dr-re[or]),St+=ur),or=Re[Ct-ze],St=et(st,St,Z[or]>>3),St-=3;var qr=or<4?0:or-2>>1;qr>0&&(ft(st,St,Ct-ze-ne[or]),St+=qr);for(var va=0;va<dr;++va)Jt[xr]=Ct&32767,xr=(xr<<5^wt[Ct])&32767,++Ct;ir-=dr-1}else or<=143?or=or+48:St=He(st,St,1),St=et(st,St,Z[or]),Jt[xr]=Ct&32767,++Ct}St=et(st,St,0)-1}return st.l=(St+7)/8|0,st.l}return function(st,St){return st.length<8?Ve(st,St):pt(st,St)}}();function ve(fe){var Re=zt(50+Math.floor(fe.length*1.1)),Te=he(fe,Re);return Re.slice(0,Te)}var pe=ae?new Uint16Array(32768):dt(32768),De=ae?new Uint16Array(32768):dt(32768),Ke=ae?new Uint16Array(128):dt(128),Nt=1,Je=1;function Qe(fe,Re){var Te=oe(fe,Re)+257;Re+=5;var _e=oe(fe,Re)+1;Re+=5;var Le=ue(fe,Re)+4;Re+=4;for(var Ve=0,pt=ae?new Uint8Array(19):dt(19),wt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],st=1,St=ae?new Uint8Array(8):dt(8),Ct=ae?new Uint8Array(8):dt(8),Jt=pt.length,ir=0;ir<Le;++ir)pt[ee[ir]]=Ve=Ne(fe,Re),st<Ve&&(st=Ve),St[Ve]++,Re+=3;var xr=0;for(St[0]=0,ir=1;ir<=st;++ir)Ct[ir]=xr=xr+St[ir-1]<<1;for(ir=0;ir<Jt;++ir)(xr=pt[ir])!=0&&(wt[ir]=Ct[xr]++);var or=0;for(ir=0;ir<Jt;++ir)if(or=pt[ir],or!=0){xr=Z[wt[ir]]>>8-or;for(var ze=(1<<7-or)-1;ze>=0;--ze)Ke[xr|ze<<or]=or&7|ir<<3}var dr=[];for(st=1;dr.length<Te+_e;)switch(xr=Ke[ye(fe,Re)],Re+=xr&7,xr>>>=3){case 16:for(Ve=3+se(fe,Re),Re+=2,xr=dr[dr.length-1];Ve-- >0;)dr.push(xr);break;case 17:for(Ve=3+Ne(fe,Re),Re+=3;Ve-- >0;)dr.push(0);break;case 18:for(Ve=11+ye(fe,Re),Re+=7;Ve-- >0;)dr.push(0);break;default:dr.push(xr),st<xr&&(st=xr);break}var ur=dr.slice(0,Te),qr=dr.slice(Te);for(ir=Te;ir<286;++ir)ur[ir]=0;for(ir=_e;ir<30;++ir)qr[ir]=0;return Nt=Tt(ur,pe,286),Je=Tt(qr,De,30),Re}function Ue(fe,Re){if(fe[0]==3&&!(fe[1]&3))return[Km(Re),2];for(var Te=0,_e=0,Le=l8(Re||1<<18),Ve=0,pt=Le.length>>>0,wt=0,st=0;(_e&1)==0;){if(_e=Ne(fe,Te),Te+=3,_e>>>1)_e>>1==1?(wt=9,st=5):(Te=Qe(fe,Te),wt=Nt,st=Je);else{Te&7&&(Te+=8-(Te&7));var St=fe[Te>>>3]|fe[(Te>>>3)+1]<<8;if(Te+=32,St>0)for(!Re&&pt<Ve+St&&(Le=Be(Le,Ve+St),pt=Le.length);St-- >0;)Le[Ve++]=fe[Te>>>3],Te+=8;continue}for(;;){!Re&&pt<Ve+32767&&(Le=Be(Le,Ve+32767),pt=Le.length);var Ct=je(fe,Te,wt),Jt=_e>>>1==1?At[Ct]:pe[Ct];if(Te+=Jt&15,Jt>>>=4,(Jt>>>8&255)===0)Le[Ve++]=Jt;else{if(Jt==256)break;Jt-=257;var ir=Jt<8?0:Jt-4>>2;ir>5&&(ir=0);var xr=Ve+re[Jt];ir>0&&(xr+=je(fe,Te,ir),Te+=ir),Ct=je(fe,Te,st),Jt=_e>>>1==1?qt[Ct]:De[Ct],Te+=Jt&15,Jt>>>=4;var or=Jt<4?0:Jt-2>>1,ze=ne[Jt];for(or>0&&(ze+=je(fe,Te,or),Te+=or),!Re&&pt<xr&&(Le=Be(Le,xr+100),pt=Le.length);Ve<xr;)Le[Ve]=Le[Ve-ze],++Ve}}}return Re?[Le,Te+7>>>3]:[Le.slice(0,Ve),Te+7>>>3]}function qe(fe,Re){var Te=fe.slice(fe.l||0),_e=Ue(Te,Re);return fe.l+=_e[1],_e[0]}function mt(fe,Re){if(fe)typeof console<"u"&&console.error(Re);else throw new Error(Re)}function Ie(fe,Re){var Te=fe;to(Te,0);var _e=[],Le=[],Ve={FileIndex:_e,FullPaths:Le};E(Ve,{root:Re.root});for(var pt=Te.length-4;(Te[pt]!=80||Te[pt+1]!=75||Te[pt+2]!=5||Te[pt+3]!=6)&&pt>=0;)--pt;Te.l=pt+4,Te.l+=4;var wt=Te.read_shift(2);Te.l+=6;var st=Te.read_shift(4);for(Te.l=st,pt=0;pt<wt;++pt){Te.l+=20;var St=Te.read_shift(4),Ct=Te.read_shift(4),Jt=Te.read_shift(2),ir=Te.read_shift(2),xr=Te.read_shift(2);Te.l+=8;var or=Te.read_shift(4),ze=l(Te.slice(Te.l+Jt,Te.l+Jt+ir));Te.l+=Jt+ir+xr;var dr=Te.l;Te.l=or+4,Xe(Te,St,Ct,Ve,ze),Te.l=dr}return Ve}function Xe(fe,Re,Te,_e,Le){fe.l+=2;var Ve=fe.read_shift(2),pt=fe.read_shift(2),wt=o(fe);if(Ve&8257)throw new Error("Unsupported ZIP encryption");for(var st=fe.read_shift(4),St=fe.read_shift(4),Ct=fe.read_shift(4),Jt=fe.read_shift(2),ir=fe.read_shift(2),xr="",or=0;or<Jt;++or)xr+=String.fromCharCode(fe[fe.l++]);if(ir){var ze=l(fe.slice(fe.l,fe.l+ir));(ze[21589]||{}).mt&&(wt=ze[21589].mt),((Le||{})[21589]||{}).mt&&(wt=Le[21589].mt)}fe.l+=ir;var dr=fe.slice(fe.l,fe.l+St);switch(pt){case 8:dr=V(fe,Ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pt)}var ur=!1;Ve&8&&(st=fe.read_shift(4),st==134695760&&(st=fe.read_shift(4),ur=!0),St=fe.read_shift(4),Ct=fe.read_shift(4)),St!=Re&&mt(ur,"Bad compressed size: "+Re+" != "+St),Ct!=Te&&mt(ur,"Bad uncompressed size: "+Te+" != "+Ct),pr(_e,xr,dr,{unsafe:!0,mt:wt})}function Ye(fe,Re){var Te=Re||{},_e=[],Le=[],Ve=zt(1),pt=Te.compression?8:0,wt=0,st=0,St=0,Ct=0,Jt=0,ir=fe.FullPaths[0],xr=ir,or=fe.FileIndex[0],ze=[],dr=0;for(st=1;st<fe.FullPaths.length;++st)if(xr=fe.FullPaths[st].slice(ir.length),or=fe.FileIndex[st],!(!or.size||!or.content||xr=="Sh33tJ5")){var ur=Ct,qr=zt(xr.length);for(St=0;St<xr.length;++St)qr.write_shift(1,xr.charCodeAt(St)&127);qr=qr.slice(0,qr.l),ze[Jt]=Jge.buf(or.content,0);var va=or.content;pt==8&&(va=W(va)),Ve=zt(30),Ve.write_shift(4,67324752),Ve.write_shift(2,20),Ve.write_shift(2,wt),Ve.write_shift(2,pt),or.mt?i(Ve,or.mt):Ve.write_shift(4,0),Ve.write_shift(-4,ze[Jt]),Ve.write_shift(4,va.length),Ve.write_shift(4,or.content.length),Ve.write_shift(2,qr.length),Ve.write_shift(2,0),Ct+=Ve.length,_e.push(Ve),Ct+=qr.length,_e.push(qr),Ct+=va.length,_e.push(va),Ve=zt(46),Ve.write_shift(4,33639248),Ve.write_shift(2,0),Ve.write_shift(2,20),Ve.write_shift(2,wt),Ve.write_shift(2,pt),Ve.write_shift(4,0),Ve.write_shift(-4,ze[Jt]),Ve.write_shift(4,va.length),Ve.write_shift(4,or.content.length),Ve.write_shift(2,qr.length),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(4,0),Ve.write_shift(4,ur),dr+=Ve.l,Le.push(Ve),dr+=qr.length,Le.push(qr),++Jt}return Ve=zt(22),Ve.write_shift(4,101010256),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,Jt),Ve.write_shift(2,Jt),Ve.write_shift(4,dr),Ve.write_shift(4,Ct),Ve.write_shift(2,0),Oi([Oi(_e),Oi(Le),Ve])}var lt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Mt(fe,Re){if(fe.ctype)return fe.ctype;var Te=fe.name||"",_e=Te.match(/\.([^\.]+)$/);return _e&&lt[_e[1]]||Re&&(_e=(Te=Re).match(/[\.\\]([^\.\\])+$/),_e&&lt[_e[1]])?lt[_e[1]]:"application/octet-stream"}function Ae(fe){for(var Re=Dy(fe),Te=[],_e=0;_e<Re.length;_e+=76)Te.push(Re.slice(_e,_e+76));return Te.join(`\r
`)+`\r
`}function ke(fe){var Re=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(St){var Ct=St.charCodeAt(0).toString(16).toUpperCase();return"="+(Ct.length==1?"0"+Ct:Ct)});Re=Re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Re.charAt(0)==`
`&&(Re="=0D"+Re.slice(1)),Re=Re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Te=[],_e=Re.split(`\r
`),Le=0;Le<_e.length;++Le){var Ve=_e[Le];if(Ve.length==0){Te.push("");continue}for(var pt=0;pt<Ve.length;){var wt=76,st=Ve.slice(pt,pt+wt);st.charAt(wt-1)=="="?wt--:st.charAt(wt-2)=="="?wt-=2:st.charAt(wt-3)=="="&&(wt-=3),st=Ve.slice(pt,pt+wt),pt+=wt,pt<Ve.length&&(st+="="),Te.push(st)}}return Te.join(`\r
`)}function ot(fe){for(var Re=[],Te=0;Te<fe.length;++Te){for(var _e=fe[Te];Te<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Te];Re.push(_e)}for(var Le=0;Le<Re.length;++Le)Re[Le]=Re[Le].replace(/[=][0-9A-Fa-f]{2}/g,function(Ve){return String.fromCharCode(parseInt(Ve.slice(1),16))});return ec(Re.join(`\r
`))}function bt(fe,Re,Te){for(var _e="",Le="",Ve="",pt,wt=0;wt<10;++wt){var st=Re[wt];if(!st||st.match(/^\s*$/))break;var St=st.match(/^(.*?):\s*([^\s].*)$/);if(St)switch(St[1].toLowerCase()){case"content-location":_e=St[2].trim();break;case"content-type":Ve=St[2].trim();break;case"content-transfer-encoding":Le=St[2].trim();break}}switch(++wt,Le.toLowerCase()){case"base64":pt=ec(hc(Re.slice(wt).join("")));break;case"quoted-printable":pt=ot(Re.slice(wt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Le)}var Ct=pr(fe,_e.slice(Te.length),pt,{unsafe:!0});Ve&&(Ct.ctype=Ve)}function Xt(fe,Re){if(X(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Te=Re&&Re.root||"",_e=(_a&&Buffer.isBuffer(fe)?fe.toString("binary"):X(fe)).split(`\r
`),Le=0,Ve="";for(Le=0;Le<_e.length;++Le)if(Ve=_e[Le],!!/^Content-Location:/i.test(Ve)&&(Ve=Ve.slice(Ve.indexOf("file")),Te||(Te=Ve.slice(0,Ve.lastIndexOf("/")+1)),Ve.slice(0,Te.length)!=Te))for(;Te.length>0&&(Te=Te.slice(0,Te.length-1),Te=Te.slice(0,Te.lastIndexOf("/")+1),Ve.slice(0,Te.length)!=Te););var pt=(_e[1]||"").match(/boundary="(.*?)"/);if(!pt)throw new Error("MAD cannot find boundary");var wt="--"+(pt[1]||""),st=[],St=[],Ct={FileIndex:st,FullPaths:St};E(Ct);var Jt,ir=0;for(Le=0;Le<_e.length;++Le){var xr=_e[Le];xr!==wt&&xr!==wt+"--"||(ir++&&bt(Ct,_e.slice(Jt,Le),Te),Jt=Le)}return Ct}function Ft(fe,Re){var Te=Re||{},_e=Te.boundary||"SheetJS";_e="------="+_e;for(var Le=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Ve=fe.FullPaths[0],pt=Ve,wt=fe.FileIndex[0],st=1;st<fe.FullPaths.length;++st)if(pt=fe.FullPaths[st].slice(Ve.length),wt=fe.FileIndex[st],!(!wt.size||!wt.content||pt=="Sh33tJ5")){pt=pt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(dr){return"_x"+dr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(dr){return"_u"+dr.charCodeAt(0).toString(16)+"_"});for(var St=wt.content,Ct=_a&&Buffer.isBuffer(St)?St.toString("binary"):X(St),Jt=0,ir=Math.min(1024,Ct.length),xr=0,or=0;or<=ir;++or)(xr=Ct.charCodeAt(or))>=32&&xr<128&&++Jt;var ze=Jt>=ir*4/5;Le.push(_e),Le.push("Content-Location: "+(Te.root||"file:///C:/SheetJS/")+pt),Le.push("Content-Transfer-Encoding: "+(ze?"quoted-printable":"base64")),Le.push("Content-Type: "+Mt(wt,pt)),Le.push(""),Le.push(ze?ke(Ct):Ae(Ct))}return Le.push(_e+`--\r
`),Le.join(`\r
`)}function rr(fe){var Re={};return E(Re,fe),Re}function pr(fe,Re,Te,_e){var Le=_e&&_e.unsafe;Le||E(fe);var Ve=!Le&&Wr.find(fe,Re);if(!Ve){var pt=fe.FullPaths[0];Re.slice(0,pt.length)==pt?pt=Re:(pt.slice(-1)!="/"&&(pt+="/"),pt=(pt+Re).replace("//","/")),Ve={name:s(Re),type:2},fe.FileIndex.push(Ve),fe.FullPaths.push(pt),Le||Wr.utils.cfb_gc(fe)}return Ve.content=Te,Ve.size=Te?Te.length:0,_e&&(_e.CLSID&&(Ve.clsid=_e.CLSID),_e.mt&&(Ve.mt=_e.mt),_e.ct&&(Ve.ct=_e.ct)),Ve}function jr(fe,Re){E(fe);var Te=Wr.find(fe,Re);if(Te){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Te)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function vt(fe,Re,Te){E(fe);var _e=Wr.find(fe,Re);if(_e){for(var Le=0;Le<fe.FileIndex.length;++Le)if(fe.FileIndex[Le]==_e)return fe.FileIndex[Le].name=s(Te),fe.FullPaths[Le]=Te,!0}return!1}function Lt(fe){I(fe,!0)}return t.find=P,t.read=D,t.parse=u,t.write=Q,t.writeFile=F,t.utils={cfb_new:rr,cfb_add:pr,cfb_del:jr,cfb_mov:vt,cfb_gc:Lt,ReadShift:ty,CheckField:oW,prep_blob:to,bconcat:Oi,use_zlib:M,_deflateRaw:ve,_inflateRaw:qe,consts:J},t}();function Zge(e){return typeof e=="string"?WS(e):Array.isArray(e)?Cge(e):e}function j1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=WS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Bu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([Zge(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=dp(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ebe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Es(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function x8(e,t){for(var r=[],a=Es(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function YS(e){for(var t=[],r=Es(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function KS(e){for(var t=[],r=Es(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function tbe(e){for(var t=[],r=Es(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var n2=new Date(1899,11,30,0,0,0);function bi(e,t){var r=e.getTime(),a=n2.getTime()+(e.getTimezoneOffset()-n2.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var UH=new Date,rbe=n2.getTime()+(UH.getTimezoneOffset()-n2.getTimezoneOffset())*6e4,v8=UH.getTimezoneOffset();function XS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+rbe),t.getTimezoneOffset()!==v8&&t.setTime(t.getTime()+(t.getTimezoneOffset()-v8)*6e4),t}function abe(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var g8=new Date("2017-02-19T19:06:09.000Z"),$H=isNaN(g8.getFullYear())?new Date("2/19/17"):g8,nbe=$H.getFullYear()==2017;function Hn(e,t){var r=new Date(e);if(nbe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if($H.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Mx(e,t){if(_a&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Bu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Bu(EH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Bu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Bu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Wn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Wn(e[r]));return t}function Cs(e,t){for(var r="";r.length<t;)r+=e;return r}function Rd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var sbe=["january","february","march","april","may","june","july","august","september","october","november","december"];function z0(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&sbe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var ibe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function VH(e){return e?e.content&&e.type?Mx(e.content,!0):e.data?Wb(e.data):e.asNodeBuffer&&_a?Wb(e.asNodeBuffer().toString("binary")):e.asBinary?Wb(e.asBinary()):e._data&&e._data.getContent?Wb(Mx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function qH(e){if(!e)return null;if(e.data)return i8(e.data);if(e.asNodeBuffer&&_a)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?i8(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function obe(e){return e&&e.name.slice(-4)===".bin"?qH(e):VH(e)}function Bc(e,t){for(var r=e.FullPaths||Es(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function y4(e,t){var r=Bc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function si(e,t,r){if(!r)return obe(y4(e,t));if(!t)return null;try{return si(e,t)}catch{return null}}function tc(e,t,r){if(!r)return VH(y4(e,t));if(!t)return null;try{return tc(e,t)}catch{return null}}function lbe(e,t,r){return qH(y4(e,t))}function b8(e){for(var t=e.FullPaths||Es(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function wa(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return _a?a=yf(r):a=kge(r),Wr.utils.cfb_add(e,t,a)}Wr.utils.cfb_add(e,t,r)}else e.file(t,r)}function j4(){return Wr.utils.cfb_new()}function zH(e,t){switch(t.type){case"base64":return Wr.read(e,{type:"base64"});case"binary":return Wr.read(e,{type:"binary"});case"buffer":case"array":return Wr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Yb(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Xs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,cbe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,y8=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,dbe=/<[^>]*>/g,Lo=Xs.match(y8)?y8:dbe,ube=/<\w*:/,hbe=/<(\/?)\w+:/;function la(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(cbe),l=0,c="",d=0,u="",h="",f=1;if(o)for(d=0;d!=o.length;++d){for(h=o[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(f=(s=h.charCodeAt(i+1))==34||s==39?1:0,c=h.slice(i+1+f,h.length-f),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var p=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[p]&&u.slice(l-3,l)=="ext")continue;a[p]=c,a[p.toLowerCase()]=c}}return a}function ah(e){return e.replace(hbe,"<$1")}var HH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},N4=YS(HH),Ga=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return HH[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),w4=/[&<>'"]/g,fbe=/[\u0000-\u0008\u000b-\u001f]/g;function jn(e){var t=e+"";return t.replace(w4,function(r){return N4[r]}).replace(fbe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function j8(e){return jn(e).replace(/ /g,"_x0020_")}var WH=/[\u0000-\u001f]/g;function S4(e){var t=e+"";return t.replace(w4,function(r){return N4[r]}).replace(/\n/g,"<br/>").replace(WH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function mbe(e){var t=e+"";return t.replace(w4,function(r){return N4[r]}).replace(WH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var N8=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function pbe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Vn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function DE(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function w8(e){var t=Km(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function S8(e){return yf(e,"binary").toString("utf8")}var iN="foo bar baz",_n=_a&&(S8(iN)==DE(iN)&&S8||w8(iN)==DE(iN)&&w8)||DE,Bu=_a?function(e){return yf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Ty=function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),GH=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}}(),xbe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),vbe=/<\/?(?:vt:)?variant>/g,gbe=/<(?:vt:)([^>]*)>([\s\S]*)</;function C8(e,t){var r=la(e),a=e.match(xbe(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(vbe,"").match(gbe);o&&s.push({v:_n(o[2]),t:o[1]})}),s}var YH=/(^\s|\s$|\n)/;function no(e,t){return"<"+e+(t.match(YH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Iy(e){return Es(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vr(e,t,r){return"<"+e+(r!=null?Iy(r):"")+(t!=null?(t.match(YH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function X5(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function bbe(e,t){switch(typeof e){case"string":var r=vr("vt:lpwstr",jn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return vr((e|0)==e?"vt:i4":"vt:r8",jn(String(e)));case"boolean":return vr("vt:bool",e?"true":"false")}if(e instanceof Date)return vr("vt:filetime",X5(e));throw new Error("Unable to serialize "+e)}function C4(e){if(_a&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return _n(dp(v4(e)));throw new Error("Bad input format: expected Buffer or string")}var Py=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,xi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Qx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Xl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function ybe(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function jbe(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var k8=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},_8=_a?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:yf(t)})):k8(e)}:k8,E8=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(Gh(e,s)));return a.join("").replace(Qo,"")},k4=_a?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Qo,""):E8(e,t,r)}:E8,D8=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},KH=_a?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):D8(e,t,r)}:D8,A8=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(t0(e,s)));return a.join("")},N1=_a?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):A8(t,r,a)}:A8,XH=function(e,t){var r=Ql(e,t);return r>0?N1(e,t+4,t+4+r-1):""},QH=XH,JH=function(e,t){var r=Ql(e,t);return r>0?N1(e,t+4,t+4+r-1):""},ZH=JH,eW=function(e,t){var r=2*Ql(e,t);return r>0?N1(e,t+4,t+4+r-1):""},tW=eW,rW=function(t,r){var a=Ql(t,r);return a>0?k4(t,r+4,r+4+a):""},aW=rW,nW=function(e,t){var r=Ql(e,t);return r>0?N1(e,t+4,t+4+r):""},sW=nW,iW=function(e,t){return ybe(e,t)},s2=iW,_4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};_a&&(QH=function(t,r){if(!Buffer.isBuffer(t))return XH(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},ZH=function(t,r){if(!Buffer.isBuffer(t))return JH(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},tW=function(t,r){if(!Buffer.isBuffer(t))return eW(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},aW=function(t,r){if(!Buffer.isBuffer(t))return rW(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},sW=function(t,r){if(!Buffer.isBuffer(t))return nW(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},s2=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):iW(t,r)},_4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var t0=function(e,t){return e[t]},Gh=function(e,t){return e[t+1]*256+e[t]},Nbe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ql=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Qp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},wbe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ty(e,t){var r="",a,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,_a&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Gh(this,d)),d+=2;e*=2;break;case"utf8":r=N1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=k4(this,this.l,this.l+e);break;case"wstr":return ty.call(this,e,"dbcs");case"lpstr-ansi":r=QH(this,this.l),e=4+Ql(this,this.l);break;case"lpstr-cp":r=ZH(this,this.l),e=4+Ql(this,this.l);break;case"lpwstr":r=tW(this,this.l),e=4+2*Ql(this,this.l);break;case"lpp4":e=4+Ql(this,this.l),r=aW(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ql(this,this.l),r=sW(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=t0(this,this.l+e++))!==0;)i.push(sN(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Gh(this,this.l+e))!==0;)i.push(sN(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=t0(this,d),this.l=d+1,l=ty.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(sN(Gh(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=t0(this,d),this.l=d+1,l=ty.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(sN(t0(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=t0(this,this.l),this.l++,a;case 2:return a=(t==="i"?Nbe:Gh)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?Qp:wbe)(this,this.l),this.l+=4,a):(s=Ql(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=s2(this,this.l):s=s2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=KH(this,this.l,e);break}}return this.l+=e,r}var Sbe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Cbe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},kbe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function _be(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)kbe(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Sbe(this,t,this.l);break;case 8:if(a=8,r==="f"){jbe(this,t,this.l);break}case 16:break;case-4:a=4,Cbe(this,t,this.l);break}return this.l+=a,this}function oW(e,t){var r=KH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function to(e,t){e.l=t,e.read_shift=ty,e.chk=oW,e.write_shift=_be}function Ro(e,t){e.l+=t}function zt(e){var t=Km(e);return to(t,0),t}function jf(e,t,r){if(e){var a,s,i;to(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=By[l]||By[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function yl(){var e=[],t=_a?256:2048,r=function(d){var u=zt(d);return to(u,0),u},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(s(),a=r(Math.max(d+1,t)))},o=function(){return s(),Oi(e)},l=function(d){s(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function sr(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=By[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&_4(r)&&e.push(r)}}function ry(e,t,r){var a=Wn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function T8(e,t,r){var a=Wn(e);return a.s=ry(a.s,t.s,r),a.e=ry(a.e,t.s,r),a}function ay(e,t){if(e.cRel&&e.c<0)for(e=Wn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Wn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=sa(e);return!e.cRel&&e.cRel!=null&&(r=Abe(r)),!e.rRel&&e.rRel!=null&&(r=Ebe(r)),r}function AE(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+hs(e.s.c)+":"+(e.e.cRel?"":"$")+hs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Hs(e.s.r)+":"+(e.e.rRel?"":"$")+Hs(e.e.r):ay(e.s,t.biff)+":"+ay(e.e,t.biff)}function E4(e){return parseInt(Dbe(e),10)-1}function Hs(e){return""+(e+1)}function Ebe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Dbe(e){return e.replace(/\$(\d+)$/,"$1")}function D4(e){for(var t=Tbe(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function hs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Abe(e){return e.replace(/^([A-Z])/,"$$$1")}function Tbe(e){return e.replace(/^\$([A-Z])/,"$1")}function Ibe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function fs(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function sa(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function wl(e){var t=e.indexOf(":");return t==-1?{s:fs(e),e:fs(e)}:{s:fs(e.slice(0,t)),e:fs(e.slice(t+1))}}function ba(e,t){return typeof t>"u"||typeof t=="number"?ba(e.s,e.e):(typeof e!="string"&&(e=sa(e)),typeof t!="string"&&(t=sa(t)),e==t?e:e+":"+t)}function Ya(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function I8(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Jc(e.z,r?bi(t):t)}catch{}try{return e.w=Jc((e.XF||{}).numFmtId||(r?14:0),r?bi(t):t)}catch{return""+t}}function hf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Nf[e.v]||e.v:t==null?I8(e,e.v):I8(e,t))}function up(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function lW(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?fs(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Ya(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[h].length;++f)if(!(typeof t[h][f]>"u")){var p={v:t[h][f]},x=o+h,g=l+f;if(d.s.r>x&&(d.s.r=x),d.s.c>g&&(d.s.c=g),d.e.r<x&&(d.e.r=x),d.e.c<g&&(d.e.c=g),t[h][f]&&typeof t[h][f]=="object"&&!Array.isArray(t[h][f])&&!(t[h][f]instanceof Date))p=t[h][f];else if(Array.isArray(p.v)&&(p.f=t[h][f][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||ra[14],a.cellDates?(p.t="d",p.w=Jc(p.z,bi(p.v))):(p.t="n",p.v=bi(p.v),p.w=Jc(p.z,p.v))):p.t="s";if(s)i[x]||(i[x]=[]),i[x][g]&&i[x][g].z&&(p.z=i[x][g].z),i[x][g]=p;else{var b=sa({c:g,r:x});i[b]&&i[b].z&&(p.z=i[b].z),i[b]=p}}}return d.s.c<1e7&&(i["!ref"]=ba(d)),i}function Ng(e,t){return lW(null,e,t)}function Pbe(e){return e.read_shift(4,"i")}function Fd(e,t){return t||(t=zt(4)),t.write_shift(4,e),t}function Mo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ri(e,t){var r=!1;return t==null&&(r=!0,t=zt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Obe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Mbe(e,t){return t||(t=zt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function A4(e,t){var r=e.l,a=e.read_shift(1),s=Mo(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Obe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Rbe(e,t){var r=!1;return t==null&&(r=!0,t=zt(15+4*e.t.length)),t.write_shift(1,0),Ri(e.t,t),r?t.slice(0,t.l):t}var Fbe=A4;function Lbe(e,t){var r=!1;return t==null&&(r=!0,t=zt(23+4*e.t.length)),t.write_shift(1,1),Ri(e.t,t),t.write_shift(4,1),Mbe({},t),r?t.slice(0,t.l):t}function ad(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Jx(e,t){return t==null&&(t=zt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Zx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function ev(e,t){return t==null&&(t=zt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Bbe=Mo,cW=Ri;function T4(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function i2(e,t){var r=!1;return t==null&&(r=!0,t=zt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Ube=Mo,Q5=T4,I4=i2;function P4(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?s2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Qp(t,0)>>2;return r?s/100:s}function dW(e,t){t==null&&(t=zt(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function uW(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function $be(e,t){return t||(t=zt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var tv=uW,wg=$be;function Do(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Rx(e,t){return(t||zt(8)).write_shift(8,e,"f")}function Vbe(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var d=bx[s];d&&(t.rgb=My(d));break;case 2:t.rgb=My([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function o2(e,t){if(t||(t=zt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function qbe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function zbe(e,t){t||(t=zt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function hW(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Hbe(e){return hW(e,1)}function Wbe(e){return hW(e,2)}var O4=2,ml=3,oN=11,P8=12,l2=19,lN=64,Gbe=65,Ybe=71,Kbe=4108,Xbe=4126,Ii=80,fW=81,Qbe=[Ii,fW],J5={1:{n:"CodePage",t:O4},2:{n:"Category",t:Ii},3:{n:"PresentationFormat",t:Ii},4:{n:"ByteCount",t:ml},5:{n:"LineCount",t:ml},6:{n:"ParagraphCount",t:ml},7:{n:"SlideCount",t:ml},8:{n:"NoteCount",t:ml},9:{n:"HiddenCount",t:ml},10:{n:"MultimediaClipCount",t:ml},11:{n:"ScaleCrop",t:oN},12:{n:"HeadingPairs",t:Kbe},13:{n:"TitlesOfParts",t:Xbe},14:{n:"Manager",t:Ii},15:{n:"Company",t:Ii},16:{n:"LinksUpToDate",t:oN},17:{n:"CharacterCount",t:ml},19:{n:"SharedDoc",t:oN},22:{n:"HyperlinksChanged",t:oN},23:{n:"AppVersion",t:ml,p:"version"},24:{n:"DigSig",t:Gbe},26:{n:"ContentType",t:Ii},27:{n:"ContentStatus",t:Ii},28:{n:"Language",t:Ii},29:{n:"Version",t:Ii},255:{},2147483648:{n:"Locale",t:l2},2147483651:{n:"Behavior",t:l2},1919054434:{}},Z5={1:{n:"CodePage",t:O4},2:{n:"Title",t:Ii},3:{n:"Subject",t:Ii},4:{n:"Author",t:Ii},5:{n:"Keywords",t:Ii},6:{n:"Comments",t:Ii},7:{n:"Template",t:Ii},8:{n:"LastAuthor",t:Ii},9:{n:"RevNumber",t:Ii},10:{n:"EditTime",t:lN},11:{n:"LastPrinted",t:lN},12:{n:"CreatedDate",t:lN},13:{n:"ModifiedDate",t:lN},14:{n:"PageCount",t:ml},15:{n:"WordCount",t:ml},16:{n:"CharCount",t:ml},17:{n:"Thumbnail",t:Ybe},18:{n:"Application",t:Ii},19:{n:"DocSecurity",t:ml},255:{},2147483648:{n:"Locale",t:l2},2147483651:{n:"Behavior",t:l2},1919054434:{}},O8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Jbe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Zbe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var eye=Zbe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),bx=Wn(eye),Nf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},mW={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},e3={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},cN={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function M4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function tye(e){var t=M4();if(!e||!e.match)return t;var r={};if((e.match(Lo)||[]).forEach(function(a){var s=la(a);switch(s[0].replace(ube,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[e3[s.ContentType]]!==void 0&&t[e3[s.ContentType]].push(s.PartName);break}}),t.xmlns!==xi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function pW(e,t){var r=tbe(e3),a=[],s;a[a.length]=Xs,a[a.length]=vr("Types",null,{xmlns:xi.CT,"xmlns:xsd":xi.xsd,"xmlns:xsi":xi.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return vr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=vr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:cN[c][t.bookType]||cN[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=vr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:cN[c][t.bookType]||cN[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=vr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Aa={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Oy(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ny(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Lo)||[]).forEach(function(s){var i=la(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Yb(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function g0(e){var t=[Xs,vr("Relationships",null,{xmlns:xi.RELS})];return Es(e["!id"]).forEach(function(r){t[t.length]=vr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function bn(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[Aa.HLINK,Aa.XPATH,Aa.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var rye="application/vnd.oasis.opendocument.spreadsheet";function aye(e,t){for(var r=C4(e),a,s;a=Py.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=la(a[0],!1),s.path=="/"&&s.type!==rye)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function nye(e){var t=[Xs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function M8(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function sye(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function iye(e){var t=[Xs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(M8(e[r][0],e[r][1])),t.push(sye("",e[r][0]));return t.push(M8("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function xW(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+e2.version+"</meta:generator></office:meta></office:document-meta>"}var Kc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],oye=function(){for(var e=new Array(Kc.length),t=0;t<Kc.length;++t){var r=Kc[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function vW(e){var t={};e=_n(e);for(var r=0;r<Kc.length;++r){var a=Kc[r],s=e.match(oye[r]);s!=null&&s.length>0&&(t[a[1]]=Ga(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Hn(t[a[1]]))}return t}function TE(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=jn(t),a[a.length]=r?vr(e,t,r):no(e,t))}function gW(e,t){var r=t||{},a=[Xs,vr("cp:coreProperties",null,{"xmlns:cp":xi.CORE_PROPS,"xmlns:dc":xi.dc,"xmlns:dcterms":xi.dcterms,"xmlns:dcmitype":xi.dcmitype,"xmlns:xsi":xi.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&TE("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:X5(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&TE("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:X5(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=Kc.length;++i){var o=Kc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&TE(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var yx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],bW=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function yW(e,t,r,a){var s=[];if(typeof e=="string")s=C8(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?C8(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function lye(e,t,r){var a={};return t||(t={}),e=_n(e),yx.forEach(function(s){var i=(e.match(Ty(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Ga(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&yW(a.HeadingPairs,a.TitlesOfParts,t,r),t}function jW(e){var t=[],r=vr;return e||(e={}),e.Application="SheetJS",t[t.length]=Xs,t[t.length]=vr("Properties",null,{xmlns:xi.EXT_PROPS,"xmlns:vt":xi.vt}),yx.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=jn(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+jn(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var cye=/<[^>]+>[^<]*/g;function dye(e,t){var r={},a="",s=e.match(cye);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=la(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Ga(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=Ga(u);break;case"bool":r[a]=Vn(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=Hn(u);break;case"cy":case"error":r[a]=Ga(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function NW(e){var t=[Xs,vr("Properties",null,{xmlns:xi.CUST_PROPS,"xmlns:vt":xi.vt})];if(!e)return t.join("");var r=1;return Es(e).forEach(function(s){++r,t[t.length]=vr("property",bbe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:jn(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var t3={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},IE;function uye(e,t,r){IE||(IE=YS(t3)),t=IE[t]||t,e[t]=r}function hye(e,t){var r=[];return Es(t3).map(function(a){for(var s=0;s<Kc.length;++s)if(Kc[s][1]==a)return Kc[s];for(s=0;s<yx.length;++s)if(yx[s][1]==a)return yx[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(no(t3[a[1]]||a[1],s))}}),vr("DocumentProperties",r.join(""),{xmlns:Xl.o})}function fye(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&Es(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<Kc.length;++o)if(i==Kc[o][1])return;for(o=0;o<yx.length;++o)if(i==yx[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(vr(j8(i),l,{"dt:dt":c}))}}),t&&Es(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(vr(j8(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Xl.o+'">'+s.join("")+"</"+a+">"}function R4(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function mye(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=zt(8);return o.write_shift(4,a),o.write_shift(4,s),o}function wW(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function SW(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function CW(e,t,r){return t===31?SW(e):wW(e,t,r)}function r3(e,t,r){return CW(e,t,r===!1?0:4)}function pye(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return CW(e,t,0)}function xye(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Qo,""),e.l-s&2&&(e.l+=2)}return r}function vye(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Qo,"");return r}function gye(e){var t=e.l,r=c2(e,fW);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=c2(e,ml);return[r,a]}function bye(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(gye(e));return r}function R8(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Qo,"").replace(Gb,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function kW(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function yye(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function c2(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==P8&&a!==t&&Qbe.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===P8?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return wW(e,a,4).replace(Qo,"");case 31:return SW(e);case 64:return R4(e);case 65:return kW(e);case 71:return yye(e);case 80:return r3(e,a,!i.raw).replace(Qo,"");case 81:return pye(e,a).replace(Qo,"");case 4108:return bye(e);case 4126:case 4127:return a==4127?xye(e):vye(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function F8(e,t){var r=zt(4),a=zt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=zt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=mye(t);break;case 31:case 80:for(a=zt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Oi([r,a])}function L8(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),h=e.read_shift(4);i[o]=[u,h+r]}i.sort(function(S,w){return S[1]-w[1]});var f={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var x=t[i[o][0]];if(f[x.n]=c2(e,x.t,{raw:!0}),x.p==="version"&&(f[x.n]=String(f[x.n]>>16)+"."+("0000"+String(f[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(f[x.n]){case 0:f[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Pd(l=f[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[x.n])}}else if(i[o][0]===1){if(l=f.CodePage=c2(e,O4),Pd(l),c!==-1){var g=e.l;e.l=i[c][1],d=R8(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=R8(e,l)}else{var b=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=kW(e);break;case 30:e.l+=4,y=r3(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=r3(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Bs(e,4);break;case 64:e.l+=4,y=Hn(R4(e));break;default:throw new Error("unparsed value: "+e[e.l])}f[b]=y}}return e.l=r+a,f}var _W=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jye(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function B8(e,t,r){var a=zt(8),s=[],i=[],o=8,l=0,c=zt(8),d=zt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=zt(8),d.write_shift(4,0),s.unshift(d);var u=[zt(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var h=e[l][0];for(c=zt(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Oi(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(_W.indexOf(e[l][0])>-1||bW.indexOf(e[l][0])>-1)&&e[l][1]!=null){var f=e[l][1],p=0;if(t){p=+t[e[l][0]];var x=r[p];if(x.p=="version"&&typeof f=="string"){var g=f.split(".");f=(+g[0]<<16)+(+g[1]||0)}c=F8(x.t,f)}else{var b=jye(f);b==-1&&(b=31,f=String(f)),c=F8(b,f)}i.push(c),d=zt(8),d.write_shift(4,t?p:2+l),s.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,y),y+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),Oi([a].concat(s).concat(i))}function U8(e,t,r){var a=e.content;if(!a)return{};to(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==Wr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var h=L8(a,t),f={SystemIdentifier:d};for(var p in h)f[p]=h[p];if(f.FMTID=i,s===1)return f;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var x;try{x=L8(a,null)}catch{}for(p in x)f[p]=x[p];return f.FMTID=[i,o],f}function $8(e,t,r,a,s,i){var o=zt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Wr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=B8(e,r,a);if(l.push(c),s){var d=B8(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return Oi(l)}function ym(e,t){return e.read_shift(t),null}function Nye(e,t){t||(t=zt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function wye(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function Bs(e,t){return e.read_shift(t)===1}function Wo(e,t){return t||(t=zt(2)),t.write_shift(2,+!!e),t}function ii(e){return e.read_shift(2,"u")}function Uc(e,t){return t||(t=zt(2)),t.write_shift(2,e),t}function EW(e,t){return wye(e,t,ii)}function Sye(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function DW(e,t,r){return r||(r=zt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function w1(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function Cye(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),a&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function kye(e){var t=e.t||"",r=zt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=zt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return Oi(s)}function Fx(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function S1(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Fx(e,a,r)}function rv(e,t,r){if(r.biff>5)return S1(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function AW(e,t,r){return r||(r=zt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function _ye(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Eye(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Qo,"");return a&&(e.l+=24),s}function Dye(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Qo,"");return r+o}function Aye(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Eye(e);case"0303000000000000c000000000000046":return Dye(e);default:throw new Error("Unsupported Moniker "+r)}}function dN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Qo,""):"";return r}function V8(e,t){t||(t=zt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Tye(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,h;s&16&&(i=dN(e,r-e.l)),s&128&&(o=dN(e,r-e.l)),(s&257)===257&&(l=dN(e,r-e.l)),(s&257)===1&&(c=Aye(e,r-e.l)),s&8&&(d=dN(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(h=R4(e)),e.l=r;var f=o||l||c||"";f&&d&&(f+="#"+d),f||(f="#"+d),s&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var p={Target:f};return u&&(p.guid=u),h&&(p.time=h),i&&(p.Tooltip=i),p}function Iye(e){var t=zt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),V8(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&V8(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function TW(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function IW(e,t){var r=TW(e);return r[3]=0,r}function nh(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Lx(e,t,r,a){return a||(a=zt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Pye(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Oye(e,t,r){return t===0?"":rv(e,t,r)}function Mye(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function PW(e){var t=e.read_shift(2),r=P4(e);return[t,r]}function Rye(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=w1(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function QS(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function OW(e,t){return t||(t=zt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function MW(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var Fye=MW;function RW(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function Lye(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Bye(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function mo(e){e.l+=2,e.l+=e.read_shift(2)}var Uye={0:mo,4:mo,5:mo,6:mo,7:Bye,8:mo,9:mo,10:mo,11:mo,12:mo,13:Lye,14:mo,15:mo,16:mo,17:mo,18:mo,19:mo,20:mo,21:RW};function $ye(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Uye[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function uN(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function F4(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=zt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Vye(e,t){return t===0||e.read_shift(2),1200}function qye(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=rv(e,0,r);return e.read_shift(t+a-e.l),s}function zye(e,t){var r=!t||t.biff==8,a=zt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Hye(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Wye(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=w1(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function Gye(e,t){var r=!t||t.biff>=8?2:1,a=zt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function Yye(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Cye(e));return i.Count=a,i.Unique=s,i}function Kye(e,t){var r=zt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=kye(e[s]);var i=Oi([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function Xye(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Qye(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Jye(e){var t=Pye(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Zye(e){return e.read_shift(2),e.read_shift(4)}function q8(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function e1e(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function t1e(){var e=zt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function r1e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function a1e(e){var t=zt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function n1e(){}function s1e(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=w1(e,0,r),a}function i1e(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=zt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function o1e(e){var t=nh(e);return t.isst=e.read_shift(4),t}function l1e(e,t,r,a){var s=zt(10);return Lx(e,t,a,s),s.write_shift(4,r),s}function c1e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=nh(e);r.biff==2&&e.l++;var i=S1(e,a-e.l,r);return s.val=i,s}function d1e(e,t,r,a,s){var i=!s||s.biff==8,o=zt(8+ +i+(1+i)*r.length);return Lx(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function u1e(e,t,r){var a=e.read_shift(2),s=rv(e,0,r);return[a,s]}function h1e(e,t,r,a){var s=r&&r.biff==5;a||(a=zt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var f1e=rv;function z8(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function m1e(e,t){var r=t.biff==8||!t.biff?4:2,a=zt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function p1e(e){var t=e.read_shift(2),r=e.read_shift(2),a=PW(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function x1e(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(PW(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function v1e(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function g1e(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=Jbe[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function b1e(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=g1e(e,t,a.fStyle,r),a}function H8(e,t,r,a){var s=r&&r.biff==5;a||(a=zt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function y1e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function j1e(e){var t=zt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function W8(e,t,r){var a=nh(e);(r.biff==2||t==9)&&++e.l;var s=Sye(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function N1e(e,t,r,a,s,i){var o=zt(8);return Lx(e,t,a,o),DW(r,i,o),o}function w1e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=nh(e),s=Do(e);return a.val=s,a}function S1e(e,t,r,a){var s=zt(14);return Lx(e,t,a,s),Rx(r,s),s}var G8=Oye;function C1e(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Fx(e,i),l=[];a>e.l;)l.push(S1(e));return[i,s,o,l]}function Y8(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Rye(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var k1e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function K8(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Fx(e,o,r);s&32&&(d=k1e[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var h=a==e.l||l===0||!(u>0)?[]:$2e(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:h}}function FW(e,t,r){if(r.biff<8)return _1e(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Mye(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function _1e(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=w1(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function E1e(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Fx(e,a,r),o=Fx(e,s,r);return[i,o]}function D1e(e,t,r){var a=MW(e);e.l++;var s=e.read_shift(1);return t-=8,[V2e(e,t,r),s,a]}function X8(e,t,r){var a=Fye(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,B2e(e,t,r)]}function A1e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function T1e(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=rv(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function I1e(e,t,r){return T1e(e,t,r)}function P1e(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(QS(e));return r}function O1e(e){var t=zt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)OW(e[r],t);return t}function M1e(e,t,r){if(r&&r.biff<8)return F1e(e,t,r);var a=RW(e),s=$ye(e,t-22,a[1]);return{cmo:a,ft:s}}var R1e={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function F1e(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((R1e[a]||Ro)(e,t,r)),{cmo:[s,a,i],ft:o}}function L1e(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=_ye(e,6,r);var l=e.read_shift(2);e.read_shift(2),ii(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],h=Fx(e,e.lens[d+1]-e.lens[d]-1);if(s+=h,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function B1e(e,t){var r=QS(e);e.l+=16;var a=Tye(e,t-24);return[r,a]}function U1e(e){var t=zt(24),r=fs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return Oi([t,Iye(e[1])])}function $1e(e,t){e.read_shift(2);var r=QS(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Qo,""),[r,a]}function V1e(e){var t=e[1].Tooltip,r=zt(10+2*(t.length+1));r.write_shift(2,2048);var a=fs(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function q1e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=O8[r]||r,r=e.read_shift(2),t[1]=O8[r]||r,t}function z1e(e){return e||(e=zt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function H1e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(IW(e));return r}function W1e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(IW(e));return r}function G1e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function LW(e,t,r){if(!r.cellStyles)return Ro(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Y1e(e,t){var r=zt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function K1e(e,t){var r={};return t<32||(e.l+=16,r.header=Do(e),r.footer=Do(e),e.l+=2),r}function X1e(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function Q1e(e){for(var t=zt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var J1e=nh,Z1e=EW,eje=S1;function tje(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function rje(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=nh(e);++e.l;var s=rv(e,t-7,r);return a.t="str",a.val=s,a}function aje(e){var t=nh(e);++e.l;var r=Do(e);return t.t="n",t.val=r,t}function nje(e,t,r){var a=zt(15);return E1(a,e,t),a.write_shift(8,r,"f"),a}function sje(e){var t=nh(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function ije(e,t,r){var a=zt(9);return E1(a,e,t),a.write_shift(2,r),a}function oje(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function lje(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function cje(e,t,r){var a=e.l+t,s=nh(e),i=e.read_shift(2),o=Fx(e,i,r);return e.l=a,s.t="str",s.val=o,s}var dje=[2,3,48,49,131,139,140,245],a3=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=YS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=Km(1);switch(c.type){case"base64":u=ec(hc(l));break;case"binary":u=ec(l);break;case"buffer":case"array":u=l;break}to(u,0);var h=u.read_shift(1),f=!!(h&136),p=!1,x=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,f=!0;break;case 49:p=!0,f=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,b=521;h==2&&(g=u.read_shift(2)),u.l+=3,h!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(b=u.read_shift(2));var y=u.read_shift(2),S=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(S=e[u[u.l]]),u.l+=1,u.l+=2),x&&(u.l+=36);for(var w=[],k={},C=Math.min(u.length,h==2?521:b-10-(p?264:0)),D=x?32:11;u.l<C&&u[u.l]!=13;)switch(k={},k.name=Ey.utils.decode(S,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!x&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&w.push(k),h!=2&&(u.l+=x?13:14),k.type){case"B":(!p||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var E=0,A=0;for(d[0]=[],A=0;A!=w.length;++A)d[0][A]=w[A].name;for(;g-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++E]=[],A=0,A=0;A!=w.length;++A){var I=u.slice(u.l,u.l+w[A].len);u.l+=w[A].len,to(I,0);var L=Ey.utils.decode(S,I);switch(w[A].type){case"C":L.trim().length&&(d[E][A]=L.replace(/\s+$/,""));break;case"D":L.length===8?d[E][A]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):d[E][A]=L;break;case"F":d[E][A]=parseFloat(L.trim());break;case"+":case"I":d[E][A]=x?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":d[E][A]=!0;break;case"N":case"F":d[E][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[E][A]="##MEMO##"+(x?parseInt(L.trim(),10):I.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(d[E][A]=+L||0);break;case"@":d[E][A]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":d[E][A]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":d[E][A]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][A]=-I.read_shift(-8,"f");break;case"B":if(p&&w[A].len==8){d[E][A]=I.read_shift(8,"f");break}case"G":case"P":I.l+=w[A].len;break;case"0":if(w[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[A].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=w,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Ng(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function s(l,c){try{return up(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Pd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=yl(),h=h2(l,{header:1,raw:!0,cellDates:!0}),f=h[0],p=h.slice(1),x=l["!cols"]||[],g=0,b=0,y=0,S=1;for(g=0;g<f.length;++g){if(((x[g]||{}).DBF||{}).name){f[g]=x[g].DBF.name,++y;continue}if(f[g]!=null){if(++y,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(b=0;b<1024;++b)if(f.indexOf(f[g]+"_"+b)==-1){f[g]+="_"+b;break}}}}var w=Ya(l["!ref"]),k=[],C=[],D=[];for(g=0;g<=w.e.c-w.s.c;++g){var E="",A="",I=0,L=[];for(b=0;b<p.length;++b)p[b][g]!=null&&L.push(p[b][g]);if(L.length==0||f[g]==null){k[g]="?";continue}for(b=0;b<L.length;++b){switch(typeof L[b]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=L[b]instanceof Date?"D":"C";break;default:A="C"}I=Math.max(I,String(L[b]).length),E=E&&E!=A?"C":A}I>250&&(I=250),A=((x[g]||{}).DBF||{}).type,A=="C"&&x[g].DBF.len>I&&(I=x[g].DBF.len),E=="B"&&A=="N"&&(E="N",D[g]=x[g].DBF.dec,I=x[g].DBF.len),C[g]=E=="C"||A=="N"?I:i[E]||0,S+=C[g],k[g]=E}var P=u.next(32);for(P.write_shift(4,318902576),P.write_shift(4,p.length),P.write_shift(2,296+32*y),P.write_shift(2,S),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[_H]||3)<<8),g=0,b=0;g<f.length;++g)if(f[g]!=null){var O=u.next(32),Y=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,Y,"sbcs"),O.write_shift(1,k[g]=="?"?"C":k[g],"sbcs"),O.write_shift(4,b),O.write_shift(1,C[g]||i[k[g]]||0),O.write_shift(1,D[g]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=C[g]||i[k[g]]||0}var q=u.next(264);for(q.write_shift(4,13),g=0;g<65;++g)q.write_shift(4,0);for(g=0;g<p.length;++g){var K=u.next(S);for(K.write_shift(1,0),b=0;b<f.length;++b)if(f[b]!=null)switch(k[b]){case"L":K.write_shift(1,p[g][b]==null?63:p[g][b]?84:70);break;case"B":K.write_shift(8,p[g][b]||0,"f");break;case"N":var U="0";for(typeof p[g][b]=="number"&&(U=p[g][b].toFixed(D[b]||0)),y=0;y<C[b]-U.length;++y)K.write_shift(1,32);K.write_shift(1,U,"sbcs");break;case"D":p[g][b]?(K.write_shift(4,("0000"+p[g][b].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(p[g][b].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+p[g][b].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var J=String(p[g][b]!=null?p[g][b]:"").slice(0,C[b]);for(K.write_shift(1,J,"sbcs"),y=0;y<C[b]-J.length;++y)K.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}}(),BW=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Es(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,p){var x=e[p];return typeof x=="number"?o8(x):x},a=function(f,p,x){var g=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return g==59?f:o8(g)};e["|"]=254;function s(f,p){switch(p.type){case"base64":return i(hc(f),p);case"binary":return i(f,p);case"buffer":return i(_a&&Buffer.isBuffer(f)?f.toString("binary"):dp(f),p);case"array":return i(Mx(f),p)}throw new Error("Unrecognized type "+p.type)}function i(f,p){var x=f.split(/[\n\r]+/),g=-1,b=-1,y=0,S=0,w=[],k=[],C=null,D={},E=[],A=[],I=[],L=0,P;for(+p.codepage>=0&&Pd(+p.codepage);y!==x.length;++y){L=0;var O=x[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),Y=O.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),q=Y[0],K;if(O.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Y[1].charAt(0)=="P"&&k.push(O.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,J=!1,F=!1,X=!1,Q=-1,ie=-1;for(S=1;S<Y.length;++S)switch(Y[S].charAt(0)){case"A":break;case"X":b=parseInt(Y[S].slice(1))-1,J=!0;break;case"Y":for(g=parseInt(Y[S].slice(1))-1,J||(b=0),P=w.length;P<=g;++P)w[P]=[];break;case"K":K=Y[S].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(Rd(K))?isNaN(z0(K).getDate())||(K=Hn(K)):(K=Rd(K),C!==null&&yg(C)&&(K=XS(K))),U=!0;break;case"E":X=!0;var M=b0(Y[S].slice(1),{r:g,c:b});w[g][b]=[w[g][b],M];break;case"S":F=!0,w[g][b]=[w[g][b],"S5S"];break;case"G":break;case"R":Q=parseInt(Y[S].slice(1))-1;break;case"C":ie=parseInt(Y[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(U&&(w[g][b]&&w[g][b].length==2?w[g][b][0]=K:w[g][b]=K,C=null),F){if(X)throw new Error("SYLK shared formula cannot have own formula");var V=Q>-1&&w[Q][ie];if(!V||!V[1])throw new Error("SYLK shared formula cannot find base");w[g][b][1]=aG(V[1],{r:g-Q,c:b-ie})}break;case"F":var W=0;for(S=1;S<Y.length;++S)switch(Y[S].charAt(0)){case"X":b=parseInt(Y[S].slice(1))-1,++W;break;case"Y":for(g=parseInt(Y[S].slice(1))-1,P=w.length;P<=g;++P)w[P]=[];break;case"M":L=parseInt(Y[S].slice(1))/20;break;case"F":break;case"G":break;case"P":C=k[parseInt(Y[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=Y[S].slice(1).split(" "),P=parseInt(I[0],10);P<=parseInt(I[1],10);++P)L=parseInt(I[2],10),A[P-1]=L===0?{hidden:!0}:{wch:L},Xm(A[P-1]);break;case"C":b=parseInt(Y[S].slice(1))-1,A[b]||(A[b]={});break;case"R":g=parseInt(Y[S].slice(1))-1,E[g]||(E[g]={}),L>0?(E[g].hpt=L,E[g].hpx=W0(L)):L===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}W<1&&(C=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(D["!rows"]=E),A.length>0&&(D["!cols"]=A),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,D]}function o(f,p){var x=s(f,p),g=x[0],b=x[1],y=Ng(g,p);return Es(b).forEach(function(S){y[S]=b[S]}),y}function l(f,p){return up(o(f,p),p)}function c(f,p,x,g){var b="C;Y"+(x+1)+";X"+(g+1)+";K";switch(f.t){case"n":b+=f.v||0,f.f&&!f.F&&(b+=";E"+q4(f.f,{r:x,c:g}));break;case"b":b+=f.v?"TRUE":"FALSE";break;case"e":b+=f.w||f.v;break;case"d":b+='"'+(f.w||f.v)+'"';break;case"s":b+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(f,p){p.forEach(function(x,g){var b="F;W"+(g+1)+" "+(g+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Ry(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Fy(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&f.push(b)})}function u(f,p){p.forEach(function(x,g){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*Ly(x.hpx)+";"),b.length>2&&f.push(b+"R"+(g+1))})}function h(f,p){var x=["ID;PWXL;N;E"],g=[],b=Ya(f["!ref"]),y,S=Array.isArray(f),w=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),f["!cols"]&&d(x,f["!cols"]),f["!rows"]&&u(x,f["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var C=b.s.c;C<=b.e.c;++C){var D=sa({r:k,c:C});y=S?(f[k]||[])[C]:f[D],!(!y||y.v==null&&(!y.f||y.F))&&g.push(c(y,f,k,C))}return x.join(w)+w+g.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),UW=function(){function e(i,o){switch(o.type){case"base64":return t(hc(i),o);case"binary":return t(i,o);case"buffer":return t(_a&&Buffer.isBuffer(i)?i.toString("binary"):dp(i),o);case"array":return t(Mx(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var f=l[u].trim().split(","),p=f[0],x=f[1];++u;for(var g=l[u]||"";(g.match(/["]/g)||[]).length&1&&u<l.length-1;)g+=`
`+l[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){h[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][d]=!0:g==="FALSE"?h[c][d]=!1:isNaN(Rd(x))?isNaN(z0(x).getDate())?h[c][d]=x:h[c][d]=Hn(x):h[c][d]=Rd(x),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(i,o){return Ng(e(i,o),o)}function a(i,o){return up(r(i,o),o)}var s=function(){var i=function(c,d,u,h,f){c.push(d),c.push(u+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},o=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Ya(c["!ref"]),h,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var x=u.s.c;x<=u.e.c;++x){var g=sa({r:p,c:x});if(h=f?(c[p]||[])[x]:c[g],!h){o(d,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(d,1,0,"="+h.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Jc(h.z||ra[14],bi(Hn(h.v)))),o(d,0,h.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,S=d.join(y);return S}}();return{to_workbook:a,to_sheet:r,from_sheet:s}}(),$W=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var p=h.split(`
`),x=-1,g=-1,b=0,y=[];b!==p.length;++b){var S=p[b].trim().split(":");if(S[0]==="cell"){var w=fs(S[1]);if(y.length<=w.r)for(x=y.length;x<=w.r;++x)y[x]||(y[x]=[]);switch(x=w.r,g=w.c,S[2]){case"t":y[x][g]=e(S[3]);break;case"v":y[x][g]=+S[3];break;case"vtf":var k=S[S.length-1];case"vtc":switch(S[3]){case"nl":y[x][g]=!!+S[4];break;default:y[x][g]=+S[4];break}S[2]=="vtf"&&(y[x][g]=[y[x][g],k])}}}return f&&f.sheetRows&&(y=y.slice(0,f.sheetRows)),y}function a(h,f){return Ng(r(h,f),f)}function s(h,f){return up(a(h,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var f=[],p=[],x,g="",b=wl(h["!ref"]),y=Array.isArray(h),S=b.s.r;S<=b.e.r;++S)for(var w=b.s.c;w<=b.e.c;++w)if(g=sa({r:S,c:w}),x=y?(h[S]||[])[w]:h[g],!(!x||x.v==null||x.t==="z")){switch(p=["cell",g,"t"],x.t){case"s":case"str":p.push(t(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=t(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var k=bi(Hn(x.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=x.w||Jc(x.z||ra[14],k);break;case"e":continue}f.push(p.join(":"))}return f.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[i,o,l,o,d(h),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:u}}(),H0=function(){function e(u,h,f,p,x){x.raw?h[f][p]=u:u===""||(u==="TRUE"?h[f][p]=!0:u==="FALSE"?h[f][p]=!1:isNaN(Rd(u))?isNaN(z0(u).getDate())?h[f][p]=u:h[f][p]=Hn(u):h[f][p]=Rd(u))}function t(u,h){var f=h||{},p=[];if(!u||u.length===0)return p;for(var x=u.split(/[\r\n]/),g=x.length-1;g>=0&&x[g].length===0;)--g;for(var b=10,y=0,S=0;S<=g;++S)y=x[S].indexOf(" "),y==-1?y=x[S].length:y++,b=Math.max(b,y);for(S=0;S<=g;++S){p[S]=[];var w=0;for(e(x[S].slice(0,b).trim(),p,S,w,f),w=1;w<=(x[S].length-b)/10+1;++w)e(x[S].slice(b+(w-1)*10,b+w*10).trim(),p,S,w,f)}return f.sheetRows&&(p=p.slice(0,f.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(u){for(var h={},f=!1,p=0,x=0;p<u.length;++p)(x=u.charCodeAt(p))==34?f=!f:!f&&x in r&&(h[x]=(h[x]||0)+1);x=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&x.push([h[p],p]);if(!x.length){h=a;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&x.push([h[p],p])}return x.sort(function(g,b){return g[0]-b[0]||a[g[1]]-a[b[1]]}),r[x.pop()[1]]||44}function i(u,h){var f=h||{},p="",x=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):f&&f.FS?p=f.FS:p=s(u.slice(0,1024));var b=0,y=0,S=0,w=0,k=0,C=p.charCodeAt(0),D=!1,E=0,A=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var I=f.dateNF!=null?Xge(f.dateNF):null;function L(){var P=u.slice(w,k),O={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)O.t="z";else if(f.raw)O.t="s",O.v=P;else if(P.trim().length===0)O.t="s",O.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(O.t="s",O.v=P.slice(2,-1).replace(/""/g,'"')):Cwe(P)?(O.t="n",O.f=P.slice(1)):(O.t="s",O.v=P);else if(P=="TRUE")O.t="b",O.v=!0;else if(P=="FALSE")O.t="b",O.v=!1;else if(!isNaN(S=Rd(P)))O.t="n",f.cellText!==!1&&(O.w=P),O.v=S;else if(!isNaN(z0(P).getDate())||I&&P.match(I)){O.z=f.dateNF||ra[14];var Y=0;I&&P.match(I)&&(P=Qge(P,f.dateNF,P.match(I)||[]),Y=1),f.cellDates?(O.t="d",O.v=Hn(P,Y)):(O.t="n",O.v=bi(Hn(P,Y))),f.cellText!==!1&&(O.w=Jc(O.z,O.v instanceof Date?bi(O.v):O.v)),f.cellNF||delete O.z}else O.t="s",O.v=P;if(O.t=="z"||(f.dense?(x[b]||(x[b]=[]),x[b][y]=O):x[sa({c:y,r:b})]=O),w=k+1,A=u.charCodeAt(w),g.e.c<y&&(g.e.c=y),g.e.r<b&&(g.e.r=b),E==C)++y;else if(y=0,++b,f.sheetRows&&f.sheetRows<=b)return!0}e:for(;k<u.length;++k)switch(E=u.charCodeAt(k)){case 34:A===34&&(D=!D);break;case C:case 10:case 13:if(!D&&L())break e;break}return k-w>0&&L(),x["!ref"]=ba(g),x}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):Ng(t(u,h),h)}function l(u,h){var f="",p=h.type=="string"?[0,0,0,0]:Q4(u,h);switch(h.type){case"base64":f=hc(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof Ey<"u"||(f=_a&&Buffer.isBuffer(u)?u.toString("binary"):dp(u));break;case"array":f=Mx(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?f=_n(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=_n(f):h.type=="binary"&&typeof Ey<"u",f.slice(0,19)=="socialcalc:version:"?$W.to_sheet(h.type=="string"?f:_n(f),h):o(f,h)}function c(u,h){return up(l(u,h),h)}function d(u){for(var h=[],f=Ya(u["!ref"]),p,x=Array.isArray(u),g=f.s.r;g<=f.e.r;++g){for(var b=[],y=f.s.c;y<=f.e.c;++y){var S=sa({r:g,c:y});if(p=x?(u[g]||[])[y]:u[S],!p||p.v==null){b.push("          ");continue}for(var w=(p.w||(hf(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";b.push(w+(y===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function uje(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=BW.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return H0.to_workbook(e,t)}}var jx=function(){function e(M,V,W){if(M){to(M,M.l||0);for(var ee=W.Enum||Q;M.l<M.length;){var re=M.read_shift(2),ne=ee[re]||ee[65535],ce=M.read_shift(2),ae=M.l+ce,Z=ne.f&&ne.f(M,ce,W);if(M.l=ae,V(Z,ne,re))return}}}function t(M,V){switch(V.type){case"base64":return r(ec(hc(M)),V);case"binary":return r(ec(M),V);case"buffer":case"array":return r(M,V)}throw"Unsupported type "+V.type}function r(M,V){if(!M)return M;var W=V||{},ee=W.dense?[]:{},re="Sheet1",ne="",ce=0,ae={},Z=[],de=[],z={s:{r:0,c:0},e:{r:0,c:0}},se=W.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)W.Enum=Q,e(M,function(ye,je,Me){switch(Me){case 0:W.vers=ye,ye>=4096&&(W.qpro=!0);break;case 6:z=ye;break;case 204:ye&&(ne=ye);break;case 222:ne=ye;break;case 15:case 51:W.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:Me==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=W.dateNF||ra[14],W.cellDates&&(ye[1].t="d",ye[1].v=XS(ye[1].v))),W.qpro&&ye[3]>ce&&(ee["!ref"]=ba(z),ae[re]=ee,Z.push(re),ee=W.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},ce=ye[3],re=ne||"Sheet"+(ce+1),ne="");var He=W.dense?(ee[ye[0].r]||[])[ye[0].c]:ee[sa(ye[0])];if(He){He.t=ye[1].t,He.v=ye[1].v,ye[1].z!=null&&(He.z=ye[1].z),ye[1].f!=null&&(He.f=ye[1].f);break}W.dense?(ee[ye[0].r]||(ee[ye[0].r]=[]),ee[ye[0].r][ye[0].c]=ye[1]):ee[sa(ye[0])]=ye[1];break}},W);else if(M[2]==26||M[2]==14)W.Enum=ie,M[2]==14&&(W.qpro=!0,M.l=0),e(M,function(ye,je,Me){switch(Me){case 204:re=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>ce&&(ee["!ref"]=ba(z),ae[re]=ee,Z.push(re),ee=W.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},ce=ye[3],re="Sheet"+(ce+1)),se>0&&ye[0].r>=se)break;W.dense?(ee[ye[0].r]||(ee[ye[0].r]=[]),ee[ye[0].r][ye[0].c]=ye[1]):ee[sa(ye[0])]=ye[1],z.e.c<ye[0].c&&(z.e.c=ye[0].c),z.e.r<ye[0].r&&(z.e.r=ye[0].r);break;case 27:ye[14e3]&&(de[ye[14e3][0]]=ye[14e3][1]);break;case 1537:de[ye[0]]=ye[1],ye[0]==ce&&(re=ye[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(ee["!ref"]=ba(z),ae[ne||re]=ee,Z.push(ne||re),!de.length)return{SheetNames:Z,Sheets:ae};for(var Ne={},ue=[],oe=0;oe<de.length;++oe)ae[Z[oe]]?(ue.push(de[oe]||Z[oe]),Ne[de[oe]]=ae[de[oe]]||ae[Z[oe]]):(ue.push(de[oe]),Ne[de[oe]]={"!ref":"A1"});return{SheetNames:ue,Sheets:Ne}}function a(M,V){var W=V||{};if(+W.codepage>=0&&Pd(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=yl(),re=Ya(M["!ref"]),ne=Array.isArray(M),ce=[];gr(ee,0,i(1030)),gr(ee,6,c(re));for(var ae=Math.min(re.e.r,8191),Z=re.s.r;Z<=ae;++Z)for(var de=Hs(Z),z=re.s.c;z<=re.e.c;++z){Z===re.s.r&&(ce[z]=hs(z));var se=ce[z]+de,Ne=ne?(M[Z]||[])[z]:M[se];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")(Ne.v|0)==Ne.v&&Ne.v>=-32768&&Ne.v<=32767?gr(ee,13,p(Z,z,Ne.v)):gr(ee,14,g(Z,z,Ne.v));else{var ue=hf(Ne);gr(ee,15,h(Z,z,ue.slice(0,239)))}}return gr(ee,1),ee.end()}function s(M,V){var W=V||{};if(+W.codepage>=0&&Pd(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=yl();gr(ee,0,o(M));for(var re=0,ne=0;re<M.SheetNames.length;++re)(M.Sheets[M.SheetNames[re]]||{})["!ref"]&&gr(ee,27,X(M.SheetNames[re],ne++));var ce=0;for(re=0;re<M.SheetNames.length;++re){var ae=M.Sheets[M.SheetNames[re]];if(!(!ae||!ae["!ref"])){for(var Z=Ya(ae["!ref"]),de=Array.isArray(ae),z=[],se=Math.min(Z.e.r,8191),Ne=Z.s.r;Ne<=se;++Ne)for(var ue=Hs(Ne),oe=Z.s.c;oe<=Z.e.c;++oe){Ne===Z.s.r&&(z[oe]=hs(oe));var ye=z[oe]+ue,je=de?(ae[Ne]||[])[oe]:ae[ye];if(!(!je||je.t=="z"))if(je.t=="n")gr(ee,23,L(Ne,oe,ce,je.v));else{var Me=hf(je);gr(ee,22,E(Ne,oe,ce,Me.slice(0,239)))}}++ce}}return gr(ee,1),ee.end()}function i(M){var V=zt(2);return V.write_shift(2,M),V}function o(M){var V=zt(26);V.write_shift(2,4096),V.write_shift(2,4),V.write_shift(4,0);for(var W=0,ee=0,re=0,ne=0;ne<M.SheetNames.length;++ne){var ce=M.SheetNames[ne],ae=M.Sheets[ce];if(!(!ae||!ae["!ref"])){++re;var Z=wl(ae["!ref"]);W<Z.e.r&&(W=Z.e.r),ee<Z.e.c&&(ee=Z.e.c)}}return W>8191&&(W=8191),V.write_shift(2,W),V.write_shift(1,re),V.write_shift(1,ee),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(1,1),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(4,0),V}function l(M,V,W){var ee={s:{c:0,r:0},e:{c:0,r:0}};return V==8&&W.qpro?(ee.s.c=M.read_shift(1),M.l++,ee.s.r=M.read_shift(2),ee.e.c=M.read_shift(1),M.l++,ee.e.r=M.read_shift(2),ee):(ee.s.c=M.read_shift(2),ee.s.r=M.read_shift(2),V==12&&W.qpro&&(M.l+=2),ee.e.c=M.read_shift(2),ee.e.r=M.read_shift(2),V==12&&W.qpro&&(M.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function c(M){var V=zt(8);return V.write_shift(2,M.s.c),V.write_shift(2,M.s.r),V.write_shift(2,M.e.c),V.write_shift(2,M.e.r),V}function d(M,V,W){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(ee[0].c=M.read_shift(1),ee[3]=M.read_shift(1),ee[0].r=M.read_shift(2),M.l+=2):(ee[2]=M.read_shift(1),ee[0].c=M.read_shift(2),ee[0].r=M.read_shift(2)),ee}function u(M,V,W){var ee=M.l+V,re=d(M,V,W);if(re[1].t="s",W.vers==20768){M.l++;var ne=M.read_shift(1);return re[1].v=M.read_shift(ne,"utf8"),re}return W.qpro&&M.l++,re[1].v=M.read_shift(ee-M.l,"cstr"),re}function h(M,V,W){var ee=zt(7+W.length);ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(1,39);for(var re=0;re<ee.length;++re){var ne=W.charCodeAt(re);ee.write_shift(1,ne>=128?95:ne)}return ee.write_shift(1,0),ee}function f(M,V,W){var ee=d(M,V,W);return ee[1].v=M.read_shift(2,"i"),ee}function p(M,V,W){var ee=zt(7);return ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(2,W,"i"),ee}function x(M,V,W){var ee=d(M,V,W);return ee[1].v=M.read_shift(8,"f"),ee}function g(M,V,W){var ee=zt(13);return ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(8,W,"f"),ee}function b(M,V,W){var ee=M.l+V,re=d(M,V,W);if(re[1].v=M.read_shift(8,"f"),W.qpro)M.l=ee;else{var ne=M.read_shift(2);k(M.slice(M.l,M.l+ne),re),M.l+=ne}return re}function y(M,V,W){var ee=V&32768;return V&=-32769,V=(ee?M:0)+(V>=8192?V-16384:V),(ee?"":"$")+(W?hs(V):Hs(V))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,V){to(M,0);for(var W=[],ee=0,re="",ne="",ce="",ae="";M.l<M.length;){var Z=M[M.l++];switch(Z){case 0:W.push(M.read_shift(8,"f"));break;case 1:ne=y(V[0].c,M.read_shift(2),!0),re=y(V[0].r,M.read_shift(2),!1),W.push(ne+re);break;case 2:{var de=y(V[0].c,M.read_shift(2),!0),z=y(V[0].r,M.read_shift(2),!1);ne=y(V[0].c,M.read_shift(2),!0),re=y(V[0].r,M.read_shift(2),!1),W.push(de+z+":"+ne+re)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(M.read_shift(2));break;case 6:{for(var se="";Z=M[M.l++];)se+=String.fromCharCode(Z);W.push('"'+se.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:ae=W.pop(),ce=W.pop(),W.push(["AND","OR"][Z-20]+"("+ce+","+ae+")");break;default:if(Z<32&&w[Z])ae=W.pop(),ce=W.pop(),W.push(ce+w[Z]+ae);else if(S[Z]){if(ee=S[Z][1],ee==69&&(ee=M[M.l++]),ee>W.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+W.join("|")+"|");return}var Ne=W.slice(-ee);W.length-=ee,W.push(S[Z][0]+"("+Ne.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}W.length==1?V[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function C(M){var V=[{c:0,r:0},{t:"n",v:0},0];return V[0].r=M.read_shift(2),V[3]=M[M.l++],V[0].c=M[M.l++],V}function D(M,V){var W=C(M);return W[1].t="s",W[1].v=M.read_shift(V-4,"cstr"),W}function E(M,V,W,ee){var re=zt(6+ee.length);re.write_shift(2,M),re.write_shift(1,W),re.write_shift(1,V),re.write_shift(1,39);for(var ne=0;ne<ee.length;++ne){var ce=ee.charCodeAt(ne);re.write_shift(1,ce>=128?95:ce)}return re.write_shift(1,0),re}function A(M,V){var W=C(M);W[1].v=M.read_shift(2);var ee=W[1].v>>1;if(W[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return W[1].v=ee,W}function I(M,V){var W=C(M),ee=M.read_shift(4),re=M.read_shift(4),ne=M.read_shift(2);if(ne==65535)return ee===0&&re===3221225472?(W[1].t="e",W[1].v=15):ee===0&&re===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var ce=ne&32768;return ne=(ne&32767)-16446,W[1].v=(1-ce*2)*(re*Math.pow(2,ne+32)+ee*Math.pow(2,ne)),W}function L(M,V,W,ee){var re=zt(14);if(re.write_shift(2,M),re.write_shift(1,W),re.write_shift(1,V),ee==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var ne=0,ce=0,ae=0,Z=0;return ee<0&&(ne=1,ee=-ee),ce=Math.log2(ee)|0,ee/=Math.pow(2,ce-31),Z=ee>>>0,(Z&2147483648)==0&&(ee/=2,++ce,Z=ee>>>0),ee-=Z,Z|=2147483648,Z>>>=0,ee*=Math.pow(2,32),ae=ee>>>0,re.write_shift(4,ae),re.write_shift(4,Z),ce+=16383+(ne?32768:0),re.write_shift(2,ce),re}function P(M,V){var W=I(M);return M.l+=V-14,W}function O(M,V){var W=C(M),ee=M.read_shift(4);return W[1].v=ee>>6,W}function Y(M,V){var W=C(M),ee=M.read_shift(8,"f");return W[1].v=ee,W}function q(M,V){var W=Y(M);return M.l+=V-10,W}function K(M,V){return M[M.l+V-1]==0?M.read_shift(V,"cstr"):""}function U(M,V){var W=M[M.l++];W>V-1&&(W=V-1);for(var ee="";ee.length<W;)ee+=String.fromCharCode(M[M.l++]);return ee}function J(M,V,W){if(!(!W.qpro||V<21)){var ee=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var re=M.read_shift(V-21,"cstr");return[ee,re]}}function F(M,V){for(var W={},ee=M.l+V;M.l<ee;){var re=M.read_shift(2);if(re==14e3){for(W[re]=[0,""],W[re][0]=M.read_shift(2);M[M.l];)W[re][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return W}function X(M,V){var W=zt(5+M.length);W.write_shift(2,14e3),W.write_shift(2,V);for(var ee=0;ee<M.length;++ee){var re=M.charCodeAt(ee);W[W.l++]=re>127?95:re}return W[W.l++]=0,W}var Q={0:{n:"BOF",f:ii},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:F},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:Y},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}}();function hje(e){var t={},r=e.match(Lo),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=la(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=m4[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var fje=function(){var e=Ty("t"),t=Ty("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Ga(o[1])},c=i.match(t);return c&&(l.s=hje(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}}(),mje=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),pje=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xje=/<(?:\w+:)?r>/,vje=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function L4(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Ga(_n(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=_n(e),r&&(a.h=S4(a.t))):e.match(xje)&&(a.r=_n(e),a.t=Ga(_n((e.replace(vje,"").match(pje)||[]).join("").replace(Lo,""))),r&&(a.h=mje(fje(a.r)))),a):{t:""}}var gje=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,bje=/<(?:\w+:)?(?:si|sstItem)>/g,yje=/<\/(?:\w+:)?(?:si|sstItem)>/;function jje(e,t){var r=[],a="";if(!e)return r;var s=e.match(gje);if(s){a=s[2].replace(bje,"").split(yje);for(var i=0;i!=a.length;++i){var o=L4(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=la(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Nje=/^\s|\s$|[\t\n\r]/;function VW(e,t){if(!t.bookSST)return"";var r=[Xs];r[r.length]=vr("sst",null,{xmlns:Qx[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Nje)&&(i+=' xml:space="preserve"'),i+=">"+jn(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function wje(e){return[e.read_shift(4),e.read_shift(4)]}function Sje(e,t){var r=[],a=!1;return jf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Cje(e,t){return t||(t=zt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var kje=Rbe;function _je(e){var t=yl();sr(t,159,Cje(e));for(var r=0;r<e.length;++r)sr(t,19,kje(e[r]));return sr(t,160),t.end()}function qW(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Zh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Eje(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Zh(e,4),t.U=Zh(e,4),t.W=Zh(e,4),t}function Dje(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function Aje(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Dje(e));return t}function Tje(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Ije(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Zh(e,4),t.U=Zh(e,4),t.W=Zh(e,4),t}function Pje(e){var t=Ije(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function zW(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function HW(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function Oje(e){var t=Zh(e);switch(t.Minor){case 2:return[t.Minor,Mje(e)];case 3:return[t.Minor,Rje()];case 4:return[t.Minor,Fje(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Mje(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=zW(e,r),s=HW(e,e.length-e.l);return{t:"Std",h:a,v:s}}function Rje(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Fje(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(Lo,function(i){var o=la(i);switch(ah(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function Lje(e,t){var r={},a=r.EncryptionVersionInfo=Zh(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=zW(e,s),t-=s,r.EncryptionVerifier=HW(e,t),r}function Bje(e){var t={},r=t.EncryptionVersionInfo=Zh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function B4(e){var t=0,r,a=qW(e),s=a.length+1,i,o,l,c,d;for(r=Km(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var WW=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],h=0;h!=7;++h)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=qW(o),c=i(l),d=l.length,u=Km(16),h=0;h!=16;++h)u[h]=0;var f,p,x;for((d&1)===1&&(f=c>>8,u[d]=s(e[0],f),--d,f=c&255,p=l[l.length-1],u[d]=s(p,f));d>0;)--d,f=c>>8,u[d]=s(l[d],f),--d,f=c&255,u[d]=s(l[d],f);for(d=15,x=15-l.length;x>0;)f=c>>8,u[d]=s(e[x],f),--d,--x,f=c&255,u[d]=s(l[d],f),--d,--x;return u}}(),Uje=function(e,t,r,a,s){s||(s=t),a||(a=WW(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},$je=function(e){var t=0,r=WW(e);return function(a){var s=Uje("",a,t,r);return t=s[1],s[0]}};function Vje(e,t,r,a){var s={key:ii(e),verificationBytes:ii(e)};return r.password&&(s.verifier=B4(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=$je(r.password)),s}function qje(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=Bje(e):a.Data=Lje(e,t),a}function zje(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?qje(e,t-2,a):Vje(e,r.biff>=8?t:t-2,r,a),a}var GW=function(){function e(s,i){switch(i.type){case"base64":return t(hc(s),i);case"binary":return t(s,i);case"buffer":return t(_a&&Buffer.isBuffer(s)?s.toString("binary"):dp(s),i);case"array":return t(Mx(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var f=/\\\w+\b/g,p=0,x,g=-1;x=f.exec(u);){switch(x[0]){case"\\cell":var b=u.slice(p,f.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++g,b.length){var y={v:b,t:"s"};Array.isArray(l)?l[h][g]=y:l[sa({r:h,c:g})]=y}break}p=f.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=ba(d),l}function r(s,i){return up(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=Ya(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=sa({r:d,c:u});l=c?(s[d]||[])[u]:s[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(hf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function Hje(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function My(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Wje(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function Gje(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function d2(e,t){if(t===0)return e;var r=Wje(Hje(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),My(Gje(r))}var YW=6,Yje=15,Kje=1,ko=YW;function Ry(e){return Math.floor((e+Math.round(128/ko)/256)*ko)}function Fy(e){return Math.floor((e-5)/ko*100+.5)/100}function u2(e){return Math.round((e*ko+5)/ko*256)/256}function PE(e){return u2(Fy(Ry(e)))}function U4(e){var t=Math.abs(e-PE(e)),r=ko;if(t>.005)for(ko=Kje;ko<Yje;++ko)Math.abs(e-PE(e))<=t&&(t=Math.abs(e-PE(e)),r=ko);ko=r}function Xm(e){e.width?(e.wpx=Ry(e.width),e.wch=Fy(e.wpx),e.MDW=ko):e.wpx?(e.wch=Fy(e.wpx),e.width=u2(e.wch),e.MDW=ko):typeof e.wch=="number"&&(e.width=u2(e.wch),e.wpx=Ry(e.width),e.MDW=ko),e.customWidth&&delete e.customWidth}var Xje=96,KW=Xje;function Ly(e){return e*96/KW}function W0(e){return e*KW/96}var Qje={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Jje(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(Lo)||[]).forEach(function(o){var l=la(o);switch(ah(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Vn(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Vn(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Zje(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(Lo)||[]).forEach(function(o){var l=la(o);switch(ah(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function eNe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(Lo)||[]).forEach(function(o){var l=la(o);switch(ah(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=_n(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Vn(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Vn(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Vn(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Vn(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Vn(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Vn(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Vn(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=m4[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Vn(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=bx[s.color.index];s.color.index==81&&(c=bx[1]),c||(c=bx[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=d2(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function tNe(e,t,r){t.NumberFmt=[];for(var a=Es(ra),s=0;s<a.length;++s)t.NumberFmt[a[s]]=ra[a[s]];var i=e[0].match(Lo);if(i)for(s=0;s<i.length;++s){var o=la(i[s]);switch(ah(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Ga(_n(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Jh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function rNe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=vr("numFmt",null,{numFmtId:a,formatCode:jn(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=vr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var hN=["numFmtId","fillId","fontId","borderId","xfId"],fN=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function aNe(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(Lo)||[]).forEach(function(i){var o=la(i),l=0;switch(ah(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<hN.length;++l)a[hN[l]]&&(a[hN[l]]=parseInt(a[hN[l]],10));for(l=0;l<fN.length;++l)a[fN[l]]&&(a[fN[l]]=Vn(a[fN[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Vn(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function nNe(e){var t=[];return t[t.length]=vr("cellXfs",null),e.forEach(function(r){t[t.length]=vr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=vr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var sNe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(t))&&tNe(h,u,d),(h=l.match(s))&&eNe(h,u,c,d),(h=l.match(a))&&Zje(h,u,c,d),(h=l.match(i))&&Jje(h,u,c,d),(h=l.match(r))&&aNe(h,u,d),u}}();function XW(e,t){var r=[Xs,vr("styleSheet",null,{xmlns:Qx[0],"xmlns:vt":xi.vt})],a;return e.SSF&&(a=rNe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=nNe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function iNe(e,t){var r=e.read_shift(2),a=Mo(e);return[r,a]}function oNe(e,t,r){r||(r=zt(6+4*t.length)),r.write_shift(2,e),Ri(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function lNe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=qbe(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=Vbe(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Mo(e),a}function cNe(e,t){t||(t=zt(25+4*32)),t.write_shift(2,e.sz*20),zbe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),o2(e.color,t);var a=0;return a=2,t.write_shift(1,a),Ri(e.name,t),t.length>t.l?t.slice(0,t.l):t}var dNe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],OE,uNe=Ro;function Q8(e,t){t||(t=zt(4*3+8*7+16*1)),OE||(OE=YS(dNe));var r=OE[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(o2({auto:1},t),o2({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function hNe(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function QW(e,t,r){r||(r=zt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Db(e,t){return t||(t=zt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var fNe=Ro;function mNe(e,t){return t||(t=zt(51)),t.write_shift(1,0),Db(null,t),Db(null,t),Db(null,t),Db(null,t),Db(null,t),t.length>t.l?t.slice(0,t.l):t}function pNe(e,t){return t||(t=zt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),i2(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function xNe(e,t,r){var a=zt(2052);return a.write_shift(4,e),i2(t,a),i2(r,a),a.length>a.l?a.slice(0,a.l):a}function vNe(e,t,r){var a={};a.NumberFmt=[];for(var s in ra)a.NumberFmt[s]=ra[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return jf(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Jh(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=d2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function gNe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(sr(e,615,Fd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&sr(e,44,oNe(s,t[s]))}),sr(e,616))}}function bNe(e){var t=1;sr(e,611,Fd(t)),sr(e,43,cNe({sz:12,color:{theme:1},name:"Calibri",family:2})),sr(e,612)}function yNe(e){var t=2;sr(e,603,Fd(t)),sr(e,45,Q8({patternType:"none"})),sr(e,45,Q8({patternType:"gray125"})),sr(e,604)}function jNe(e){var t=1;sr(e,613,Fd(t)),sr(e,46,mNe()),sr(e,614)}function NNe(e){var t=1;sr(e,626,Fd(t)),sr(e,47,QW({numFmtId:0},65535)),sr(e,627)}function wNe(e,t){sr(e,617,Fd(t.length)),t.forEach(function(r){sr(e,47,QW(r,0))}),sr(e,618)}function SNe(e){var t=1;sr(e,619,Fd(t)),sr(e,48,pNe({xfId:0,name:"Normal"})),sr(e,620)}function CNe(e){var t=0;sr(e,505,Fd(t)),sr(e,506)}function kNe(e){var t=0;sr(e,508,xNe(t,"TableStyleMedium9","PivotStyleMedium4")),sr(e,509)}function _Ne(e,t){var r=yl();return sr(r,278),gNe(r,e.SSF),bNe(r),yNe(r),jNe(r),NNe(r),wNe(r,t.cellXfs),SNe(r),CNe(r),kNe(r),sr(r,279),r.end()}var ENe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function DNe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(Lo)||[]).forEach(function(s){var i=la(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[ENe.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function ANe(){}function TNe(){}var INe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,PNe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,ONe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function MNe(e,t,r){t.themeElements={};var a;[["clrScheme",INe,DNe],["fontScheme",PNe,ANe],["fmtScheme",ONe,TNe]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var RNe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function JW(e,t){(!e||e.length===0)&&(e=$4());var r,a={};if(!(r=e.match(RNe)))throw new Error("themeElements not found in theme");return MNe(r[0],a,t),a.raw=e,a}function $4(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Xs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function FNe(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=zH(i,{type:"array"})}catch{return}var l=tc(o,"theme/theme/theme1.xml",!0);if(l)return JW(l,r)}}function LNe(e){return e.read_shift(4)}function BNe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=UNe(e,4);break;case 2:t.xclrValue=TW(e);break;case 3:t.xclrValue=LNe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function UNe(e,t){return Ro(e,t)}function $Ne(e,t){return Ro(e,t)}function VNe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=BNe(e);break;case 6:a[1]=$Ne(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function qNe(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(VNe(e,r-e.l));return{ixfe:a,ext:i}}function zNe(e,t){t.forEach(function(r){r[0]})}function HNe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Mo(e)}}function WNe(e){var t=zt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ri(e.name,t),t.slice(0,t.l)}function GNe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function YNe(e){var t=zt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function KNe(e,t){var r=zt(8+2*t.length);return r.write_shift(4,e),Ri(t,r),r.slice(0,r.l)}function XNe(e){return e.l+=4,e.read_shift(4)!=0}function QNe(e,t){var r=zt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function JNe(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return jf(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?a.Cell.push({type:a.Types[h[0]-1].name,index:h[1]}):l==0&&a.Value.push({type:a.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function ZNe(){var e=yl();return sr(e,332),sr(e,334,Fd(1)),sr(e,335,WNe({name:"XLDAPR",version:12e4,flags:3496657072})),sr(e,336),sr(e,339,KNe(1,"XLDAPR")),sr(e,52),sr(e,35,Fd(514)),sr(e,4096,Fd(0)),sr(e,4097,Uc(1)),sr(e,36),sr(e,53),sr(e,340),sr(e,337,QNe(1)),sr(e,51,YNe([[1,0]])),sr(e,338),sr(e,333),e.end()}function ewe(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(Lo,function(l){var c=la(l);switch(ah(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function ZW(){var e=[Xs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function twe(e){var t=[];if(!e)return t;var r=1;return(e.match(Lo)||[]).forEach(function(a){var s=la(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function rwe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=sa(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function awe(e,t,r){var a=[];return jf(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function nwe(e,t,r,a){if(!e)return e;var s=a||{},i=!1;jf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function swe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var h0=1024;function eG(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[vr("xml",null,{"xmlns:v":Xl.v,"xmlns:o":Xl.o,"xmlns:x":Xl.x,"xmlns:mv":Xl.mv}).replace(/\/>/,">"),vr("o:shapelayout",vr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),vr("v:shapetype",[vr("v:stroke",null,{joinstyle:"miter"}),vr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];h0<e*1e3;)h0+=1e3;return t.forEach(function(i){var o=fs(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?vr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=vr("v:fill",c,l),u={on:"t",obscured:"t"};++h0,s=s.concat(["<v:shape"+Iy({id:"_x0000_s"+h0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,vr("v:shadow",null,u),vr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",no("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),no("x:AutoFill","False"),no("x:Row",String(o.r)),no("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function J8(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=fs(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Ya(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=ba(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&a){for(h=0;h<a.length;++h)if(u.a==a[h].id){u.a=a[h].name||u.a;break}}i.c.push(u)})}function iwe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=la(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=fs(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var h=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!h&&!!h[1]&&L4(h[1])||{r:"",t:"",h:""};d.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),d.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=f.h),a.push(d)}}}}),a}function tG(e){var t=[Xs,vr("comments",null,{xmlns:Qx[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=jn(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(jn(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(no("t",jn(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(no("t",jn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function owe(e,t){var r=[],a=!1,s={},i=0;return e.replace(Lo,function(l,c){var d=la(l);switch(ah(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function lwe(e,t,r){var a=[Xs,vr("ThreadedComments",null,{xmlns:xi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(vr("threadedComment",no("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function cwe(e,t){var r=[],a=!1;return e.replace(Lo,function(i){var o=la(i);switch(ah(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function dwe(e){var t=[Xs,vr("personList",null,{xmlns:xi.TCMNT,"xmlns:x":Qx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(vr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function uwe(e){var t={};t.iauthor=e.read_shift(4);var r=tv(e);return t.rfx=r.s,t.ref=sa(r.s),e.l+=16,t}function hwe(e,t){return t==null&&(t=zt(36)),t.write_shift(4,e[1].iauthor),wg(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var fwe=Mo;function mwe(e){return Ri(e.slice(0,54))}function pwe(e,t){var r=[],a=[],s={},i=!1;return jf(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function xwe(e){var t=yl(),r=[];return sr(t,628),sr(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),sr(t,632,mwe(s.a)))})}),sr(t,631),sr(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:fs(a[0]),e:fs(a[0])};sr(t,635,hwe([i,s])),s.t&&s.t.length>0&&sr(t,637,Lbe(s)),sr(t,636),delete s.iauthor})}),sr(t,634),sr(t,629),t.end()}var vwe="application/vnd.ms-office.vbaProject";function gwe(e){var t=Wr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Wr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Wr.write(t)}function bwe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Wr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var rG=["xlsb","xlsm","xlam","biff8","xla"];function ywe(){return{"!type":"dialog"}}function jwe(){return{"!type":"dialog"}}function Nwe(){return{"!type":"macro"}}function wwe(){return{"!type":"macro"}}var b0=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+hs(u)+(c?"":"$")+Hs(d)}return function(s,i){return t=i,s.replace(e,r)}}(),V4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,q4=function(){return function(t,r){return t.replace(V4,function(a,s,i,o,l,c){var d=D4(o)-(i?0:r.c),u=E4(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return s+"R"+h+"C"+f})}}();function aG(e,t){return e.replace(V4,function(r,a,s,i,o,l){return a+(s=="$"?s+i:hs(D4(i)+t.c))+(o=="$"?o+l:Hs(E4(l)+t.r))})}function Swe(e,t,r){var a=wl(t),s=a.s,i=fs(r),o={r:i.r-s.r,c:i.c-s.c};return aG(e,o)}function Cwe(e){return e.length!=1}function Z8(e){return e.replace(/_xlfn\./g,"")}function ai(e){e.l+=1}function Qm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function nG(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return sG(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=Qm(e),l=Qm(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function sG(e){var t=Qm(e),r=Qm(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function kwe(e,t,r){if(r.biff<8)return sG(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Qm(e),o=Qm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function iG(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return _we(e);var a=e.read_shift(r&&r.biff==12?4:2),s=Qm(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function _we(e){var t=Qm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Ewe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Dwe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return Awe(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Awe(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function Twe(e,t,r){var a=(e[e.l++]&96)>>5,s=nG(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function Iwe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=nG(e,i,r);return[a,s,o]}function Pwe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Owe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function Mwe(e,t,r){var a=(e[e.l++]&96)>>5,s=kwe(e,t-1,r);return[a,s]}function Rwe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function eB(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Fwe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Lwe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Bwe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Uwe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function $we(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function oG(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Vwe(e){return e.read_shift(2),oG(e)}function qwe(e){return e.read_shift(2),oG(e)}function zwe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=iG(e,0,r);return[a,s]}function Hwe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=Dwe(e,0,r);return[a,s]}function Wwe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=iG(e,0,r);return[a,s,i]}function Gwe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[X2e[s],dG[s],a]}function Ywe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Kwe(e);return[s,(i[0]===0?dG:K2e)[i[1]]]}function Kwe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Xwe(e,t,r){e.l+=r&&r.biff==2?3:4}function Qwe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Jwe(e){return e.l++,Nf[e.read_shift(1)]}function Zwe(e){return e.l++,e.read_shift(2)}function e2e(e){return e.l++,e.read_shift(1)!==0}function t2e(e){return e.l++,Do(e)}function r2e(e,t,r){return e.l++,w1(e,t-1,r)}function a2e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Bs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Nf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Do(e);break;case 2:r[1]=rv(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function n2e(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?tv:QS)(e));return s}function s2e(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=a2e(e,r.biff);return o}function i2e(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function o2e(e,t,r){if(r.biff==5)return l2e(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function l2e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function c2e(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function d2e(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function u2e(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function h2e(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var f2e=Ro,m2e=Ro,p2e=Ro;function C1(e,t,r){return e.l+=2,[Ewe(e)]}function z4(e){return e.l+=6,[]}var x2e=C1,v2e=z4,g2e=z4,b2e=C1;function lG(e){return e.l+=2,[ii(e),e.read_shift(2)&1]}var y2e=C1,j2e=lG,N2e=z4,w2e=C1,S2e=C1,C2e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function k2e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=C2e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function _2e(e){return e.l+=2,[e.read_shift(4)]}function E2e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function D2e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function A2e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function T2e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function I2e(e){return e.l+=4,[0,0]}var tB={1:{n:"PtgExp",f:Qwe},2:{n:"PtgTbl",f:p2e},3:{n:"PtgAdd",f:ai},4:{n:"PtgSub",f:ai},5:{n:"PtgMul",f:ai},6:{n:"PtgDiv",f:ai},7:{n:"PtgPower",f:ai},8:{n:"PtgConcat",f:ai},9:{n:"PtgLt",f:ai},10:{n:"PtgLe",f:ai},11:{n:"PtgEq",f:ai},12:{n:"PtgGe",f:ai},13:{n:"PtgGt",f:ai},14:{n:"PtgNe",f:ai},15:{n:"PtgIsect",f:ai},16:{n:"PtgUnion",f:ai},17:{n:"PtgRange",f:ai},18:{n:"PtgUplus",f:ai},19:{n:"PtgUminus",f:ai},20:{n:"PtgPercent",f:ai},21:{n:"PtgParen",f:ai},22:{n:"PtgMissArg",f:ai},23:{n:"PtgStr",f:r2e},26:{n:"PtgSheet",f:E2e},27:{n:"PtgEndSheet",f:D2e},28:{n:"PtgErr",f:Jwe},29:{n:"PtgBool",f:e2e},30:{n:"PtgInt",f:Zwe},31:{n:"PtgNum",f:t2e},32:{n:"PtgArray",f:Rwe},33:{n:"PtgFunc",f:Gwe},34:{n:"PtgFuncVar",f:Ywe},35:{n:"PtgName",f:i2e},36:{n:"PtgRef",f:zwe},37:{n:"PtgArea",f:Twe},38:{n:"PtgMemArea",f:c2e},39:{n:"PtgMemErr",f:f2e},40:{n:"PtgMemNoMem",f:m2e},41:{n:"PtgMemFunc",f:d2e},42:{n:"PtgRefErr",f:u2e},43:{n:"PtgAreaErr",f:Pwe},44:{n:"PtgRefN",f:Hwe},45:{n:"PtgAreaN",f:Mwe},46:{n:"PtgMemAreaN",f:A2e},47:{n:"PtgMemNoMemN",f:T2e},57:{n:"PtgNameX",f:o2e},58:{n:"PtgRef3d",f:Wwe},59:{n:"PtgArea3d",f:Iwe},60:{n:"PtgRefErr3d",f:h2e},61:{n:"PtgAreaErr3d",f:Owe},255:{}},P2e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},O2e={1:{n:"PtgElfLel",f:lG},2:{n:"PtgElfRw",f:w2e},3:{n:"PtgElfCol",f:x2e},6:{n:"PtgElfRwV",f:S2e},7:{n:"PtgElfColV",f:b2e},10:{n:"PtgElfRadical",f:y2e},11:{n:"PtgElfRadicalS",f:N2e},13:{n:"PtgElfColS",f:v2e},15:{n:"PtgElfColSV",f:g2e},16:{n:"PtgElfRadicalLel",f:j2e},25:{n:"PtgList",f:k2e},29:{n:"PtgSxName",f:_2e},255:{}},M2e={0:{n:"PtgAttrNoop",f:I2e},1:{n:"PtgAttrSemi",f:$we},2:{n:"PtgAttrIf",f:Bwe},4:{n:"PtgAttrChoose",f:Fwe},8:{n:"PtgAttrGoto",f:Lwe},16:{n:"PtgAttrSum",f:Xwe},32:{n:"PtgAttrBaxcel",f:eB},33:{n:"PtgAttrBaxcel",f:eB},64:{n:"PtgAttrSpace",f:Vwe},65:{n:"PtgAttrSpaceSemi",f:qwe},128:{n:"PtgAttrIfError",f:Uwe},255:{}};function k1(e,t,r,a){if(a.biff<8)return Ro(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=s2e(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=n2e(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Ro(e,t)),i}function _1(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=tB[i]||tB[P2e[i]],(i===24||i===25)&&(s=(i===24?O2e:M2e)[e[e.l+1]]),!s||!s.f?Ro(e,t):o.push([s.n,s.f(e,t,r)]);return o}function R2e(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var F2e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function L2e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function cG(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function rB(e,t,r){var a=cG(e,t,r);return a=="#REF"?a:L2e(a,r)}function wo(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,h=0,f=0,p,x="";if(!e[0]||!e[0][0])return"";for(var g=-1,b="",y=0,S=e[0].length;y<S;++y){var w=e[0][y];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:b=Cs(" ",e[0][g][1][1]);break;case 1:b=Cs("\r",e[0][g][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}d=d+b,g=-1}l.push(d+F2e[w[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=ry(w[1][1],o,s),l.push(ay(u,i));break;case"PtgRefN":u=r?ry(w[1][1],r,s):w[1][1],l.push(ay(u,i));break;case"PtgRef3d":h=w[1][1],u=ry(w[1][2],o,s),x=rB(a,h,s),l.push(x+"!"+ay(u,i));break;case"PtgFunc":case"PtgFuncVar":var k=w[1][0],C=w[1][1];k||(k=0),k&=127;var D=k==0?[]:l.slice(-k);l.length-=k,C==="User"&&(C=D.shift()),l.push(C+"("+D.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":p=T8(w[1][1],r?{s:r}:o,s),l.push(AE(p,s));break;case"PtgArea":p=T8(w[1][1],o,s),l.push(AE(p,s));break;case"PtgArea3d":h=w[1][1],p=w[1][2],x=rB(a,h,s),l.push(x+"!"+AE(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=w[1][2];var E=(a.names||[])[f-1]||(a[0]||[])[f],A=E?E.Name:"SH33TJSNAME"+String(f);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),l.push(A);break;case"PtgNameX":var I=w[1][1];f=w[1][2];var L;if(s.biff<=5)I<0&&(I=-I),a[I]&&(L=a[I][f]);else{var P="";if(((a[I]||[])[0]||[])[0]==14849||(((a[I]||[])[0]||[])[0]==1025?a[I][f]&&a[I][f].itab>0&&(P=a.SheetNames[a[I][f].itab-1]+"!"):P=a.SheetNames[f-1]+"!"),a[I]&&a[I][f])P+=a[I][f].Name;else if(a[0]&&a[0][f])P+=a[0][f].Name;else{var O=(cG(a,I,s)||"").split(";;");O[f-1]?P=O[f-1]:P+="SH33TJSERRX"}l.push(P);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var Y="(",q=")";if(g>=0){switch(b="",e[0][g][1][0]){case 2:Y=Cs(" ",e[0][g][1][1])+Y;break;case 3:Y=Cs("\r",e[0][g][1][1])+Y;break;case 4:q=Cs(" ",e[0][g][1][1])+q;break;case 5:q=Cs("\r",e[0][g][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(Y+l.pop()+q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:w[1][1],r:w[1][0]};var K={c:r.c,r:r.r};if(a.sharedf[sa(u)]){var U=a.sharedf[sa(u)];l.push(wo(U,o,K,a,s))}else{var J=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(wo(d[1],o,K,a,s)),J=!0;break}J||l.push(w[1])}break;case"PtgArray":l.push("{"+R2e(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var F=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&F.indexOf(e[0][y][0])==-1){w=e[0][g];var X=!0;switch(w[1][0]){case 4:X=!1;case 0:b=Cs(" ",w[1][1]);break;case 5:X=!1;case 1:b=Cs("\r",w[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((X?b:"")+l.pop()+(X?"":b)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function B2e(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ro(e,t-2)];var l=_1(e,o,r);return t!==o+s&&(i=k1(e,t-o-s,l,r)),e.l=a,[l,i]}function U2e(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ro(e,t-2)];var l=_1(e,o,r);return t!==o+s&&(i=k1(e,t-o-s,l,r)),e.l=a,[l,i]}function $2e(e,t,r,a){var s=e.l+t,i=_1(e,a,r),o;return s!==e.l&&(o=k1(e,s-e.l,i,r)),[i,o]}function V2e(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=_1(e,i,r);return i==65535?[[],Ro(e,t-2)]:(t!==i+2&&(s=k1(e,a-i-2,o,r)),[o,s])}function q2e(e){var t;if(Gh(e,e.l+6)!==65535)return[Do(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function z2e(e){if(e==null){var t=zt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Rx(e);return Rx(0)}function ME(e,t,r){var a=e.l+t,s=nh(e);r.biff==2&&++e.l;var i=q2e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=U2e(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function H2e(e,t,r,a,s){var i=Lx(t,r,s),o=z2e(e.v),l=zt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=zt(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var h=Oi([i,o,l,d]);return h}function JS(e,t,r){var a=e.read_shift(4),s=_1(e,a,r),i=e.read_shift(4),o=i>0?k1(e,i,s,r):null;return[s,o]}var W2e=JS,ZS=JS,G2e=JS,Y2e=JS,K2e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dG={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},X2e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function aB(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Q2e(e){var t="of:="+e.replace(V4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function RE(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function J2e(e){return e.replace(/\./,"!")}var sy={},y0={},iy=typeof Map<"u";function H4(e,t,r){var a=0,s=e.length;if(r){if(iy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=iy?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(iy?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function eC(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(ko=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=Fy(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=u2(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Nx(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function hp(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Jh(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function uG(e,t,r,a,s,i){try{a.cellNF&&(e.z=ra[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Hn(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(ra[t]==null&&Jh(Kge[t]||"General",t),e.t==="e")e.w=e.w||Nf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ay(e.v);else if(e.t==="d"){var o=bi(e.v);(o|0)===o?e.w=o.toString(10):e.w=Ay(o)}else{if(e.v===void 0)return"";e.w=Ox(e.v,y0)}else e.t==="d"?e.w=Jc(t,bi(e.v),y0):e.w=Jc(t,e.v,y0)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=d2(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=d2(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function Z2e(e,t,r){if(e&&e["!ref"]){var a=Ya(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function eSe(e,t){var r=Ya(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ba(r))}var tSe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,rSe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,aSe=/<(?:\w:)?hyperlink [^>]*>/mg,nSe=/"(\w*:\w*)"/,sSe=/<(?:\w:)?col\b[^>]*[\/]?>/g,iSe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,oSe=/<(?:\w:)?pageMargins[^>]*\/>/g,hG=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,lSe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,cSe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function dSe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=e.match(rSe);h?(d=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):d=u=e;var f=d.match(hG);f?W4(f[0],l,s,r):(f=d.match(lSe))&&hSe(f[0],f[1]||"",l,s,r);var p=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var x=d.slice(p,p+50).match(nSe);x&&eSe(l,x[1])}var g=d.match(cSe);g&&g[1]&&CSe(g[1],s);var b=[];if(t.cellStyles){var y=d.match(sSe);y&&ySe(b,y)}h&&ESe(h[1],l,t,c,i,o);var S=u.match(iSe);S&&(l["!autofilter"]=NSe(S[0]));var w=[],k=u.match(tSe);if(k)for(p=0;p!=k.length;++p)w[p]=Ya(k[p].slice(k[p].indexOf('"')+1));var C=u.match(aSe);C&&vSe(l,C,a);var D=u.match(oSe);if(D&&(l["!margins"]=gSe(la(D[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=ba(c)),t.sheetRows>0&&l["!ref"]){var E=Ya(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=ba(E))}return b.length>0&&(l["!cols"]=b),w.length>0&&(l["!merges"]=w),l}function uSe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ba(e[r])+'"/>';return t+"</mergeCells>"}function W4(e,t,r,a){var s=la(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=Ga(_n(s.codeName)))}function hSe(e,t,r,a,s){W4(e.slice(0,e.indexOf(">")),r,a,s)}function fSe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Bu(jn(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+vr("outlinePr",null,d)}!i&&!l||(s[s.length]=vr("sheetPr",l,o))}var mSe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],pSe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xSe(e){var t={sheet:1};return mSe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),pSe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=B4(e.password).toString(16).toUpperCase()),vr("sheetProtection",null,t)}function vSe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=la(_n(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Ga(i.location))):(i.Target="#"+Ga(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Ya(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=sa({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function gSe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function bSe(e){return Nx(e),vr("pageMargins",null,e)}function ySe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=la(t[a],!0);s.hidden&&(s.hidden=Vn(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,U4(s.width)),Xm(s);i<=o;)e[i++]=Wn(s)}}function jSe(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=vr("col",null,eC(s,a)));return r[r.length]="</cols>",r.join("")}function NSe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function wSe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:ba(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=wl(s);o.s.r==o.e.r&&(o.e.r=wl(t["!ref"]).e.r,s=ba(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),vr("autoFilter",null,{ref:s})}var SSe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function CSe(e,t){t.Views||(t.Views=[{}]),(e.match(SSe)||[]).forEach(function(r,a){var s=la(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),Vn(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function kSe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),vr("sheetViews",vr("sheetView",null,s),{})}function _Se(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Nf[e.v];break;case"d":a&&a.cellDates?s=Hn(e.v,-1).toISOString():(e=Wn(e),e.t="n",s=""+(e.v=bi(Hn(e.v)))),typeof e.z>"u"&&(e.z=ra[14]);break;default:s=e.v;break}var l=no("v",jn(s)),c={r:t},d=hp(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=no("v",""+H4(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=vr("f",jn(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),vr("c",l,c)}var ESe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Ty("v"),o=Ty("f");return function(c,d,u,h,f,p){for(var x=0,g="",b=[],y=[],S=0,w=0,k=0,C="",D,E,A=0,I=0,L,P,O=0,Y=0,q=Array.isArray(p.CellXf),K,U=[],J=[],F=Array.isArray(d),X=[],Q={},ie=!1,M=!!u.sheetStubs,V=c.split(t),W=0,ee=V.length;W!=ee;++W){g=V[W].trim();var re=g.length;if(re!==0){var ne=0;e:for(x=0;x<re;++x)switch(g[x]){case">":if(g[x-1]!="/"){++x;break e}if(u&&u.cellStyles){if(E=la(g.slice(ne,x),!0),A=E.r!=null?parseInt(E.r,10):A+1,I=-1,u.sheetRows&&u.sheetRows<A)continue;Q={},ie=!1,E.ht&&(ie=!0,Q.hpt=parseFloat(E.ht),Q.hpx=W0(Q.hpt)),E.hidden=="1"&&(ie=!0,Q.hidden=!0),E.outlineLevel!=null&&(ie=!0,Q.level=+E.outlineLevel),ie&&(X[A-1]=Q)}break;case"<":ne=x;break}if(ne>=x)break;if(E=la(g.slice(ne,x),!0),A=E.r!=null?parseInt(E.r,10):A+1,I=-1,!(u.sheetRows&&u.sheetRows<A)){h.s.r>A-1&&(h.s.r=A-1),h.e.r<A-1&&(h.e.r=A-1),u&&u.cellStyles&&(Q={},ie=!1,E.ht&&(ie=!0,Q.hpt=parseFloat(E.ht),Q.hpx=W0(Q.hpt)),E.hidden=="1"&&(ie=!0,Q.hidden=!0),E.outlineLevel!=null&&(ie=!0,Q.level=+E.outlineLevel),ie&&(X[A-1]=Q)),b=g.slice(x).split(e);for(var ce=0;ce!=b.length&&b[ce].trim().charAt(0)=="<";++ce);for(b=b.slice(ce),x=0;x!=b.length;++x)if(g=b[x].trim(),g.length!==0){if(y=g.match(r),S=x,w=0,k=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(S=0,C=y[1],w=0;w!=C.length&&!((k=C.charCodeAt(w)-64)<1||k>26);++w)S=26*S+k;--S,I=S}else++I;for(w=0;w!=g.length&&g.charCodeAt(w)!==62;++w);if(++w,E=la(g.slice(0,w),!0),E.r||(E.r=sa({r:A-1,c:I})),C=g.slice(w),D={t:""},(y=C.match(i))!=null&&y[1]!==""&&(D.v=Ga(y[1])),u.cellFormula){if((y=C.match(o))!=null&&y[1]!==""){if(D.f=Ga(_n(y[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=Z8(D.f)),y[0].indexOf('t="array"')>-1)D.F=(C.match(s)||[])[1],D.F.indexOf(":")>-1&&U.push([Ya(D.F),D.F]);else if(y[0].indexOf('t="shared"')>-1){P=la(y[0]);var ae=Ga(_n(y[1]));u.xlfn||(ae=Z8(ae)),J[parseInt(P.si,10)]=[P,ae,E.r]}}else(y=C.match(/<f[^>]*\/>/))&&(P=la(y[0]),J[P.si]&&(D.f=Swe(J[P.si][1],J[P.si][2],E.r)));var Z=fs(E.r);for(w=0;w<U.length;++w)Z.r>=U[w][0].s.r&&Z.r<=U[w][0].e.r&&Z.c>=U[w][0].s.c&&Z.c<=U[w][0].e.c&&(D.F=U[w][1])}if(E.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(M)D.t="z";else continue;else D.t=E.t||"n";switch(h.s.c>I&&(h.s.c=I),h.e.c<I&&(h.e.c=I),D.t){case"n":if(D.v==""||D.v==null){if(!M)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!M)continue;D.t="z"}else L=sy[parseInt(D.v,10)],D.v=L.t,D.r=L.r,u.cellHTML&&(D.h=L.h);break;case"str":D.t="s",D.v=D.v!=null?_n(D.v):"",u.cellHTML&&(D.h=S4(D.v));break;case"inlineStr":y=C.match(a),D.t="s",y!=null&&(L=L4(y[1]))?(D.v=L.t,u.cellHTML&&(D.h=L.h)):D.v="";break;case"b":D.v=Vn(D.v);break;case"d":u.cellDates?D.v=Hn(D.v,1):(D.v=bi(Hn(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=mW[D.v];break}if(O=Y=0,K=null,q&&E.s!==void 0&&(K=p.CellXf[E.s],K!=null&&(K.numFmtId!=null&&(O=K.numFmtId),u.cellStyles&&K.fillId!=null&&(Y=K.fillId))),uG(D,O,Y,u,f,p),u.cellDates&&q&&D.t=="n"&&yg(ra[O])&&(D.t="d",D.v=XS(D.v)),E.cm&&u.xlmeta){var de=(u.xlmeta.Cell||[])[+E.cm-1];de&&de.type=="XLDAPR"&&(D.D=!0)}if(F){var z=fs(E.r);d[z.r]||(d[z.r]=[]),d[z.r][z.c]=D}else d[E.r]=D}}}}X.length>0&&(d["!rows"]=X)}}();function DSe(e,t,r,a){var s=[],i=[],o=Ya(e["!ref"]),l="",c,d="",u=[],h=0,f=0,p=e["!rows"],x=Array.isArray(e),g={r:d},b,y=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=hs(f);for(h=o.s.r;h<=o.e.r;++h){for(i=[],d=Hs(h),f=o.s.c;f<=o.e.c;++f){c=u[f]+d;var S=x?(e[h]||[])[f]:e[c];S!==void 0&&(l=_Se(S,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[h])&&(g={r:d},p&&p[h]&&(b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=Ly(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level)),s[s.length]=vr("row",i.join(""),g))}if(p)for(;h<p.length;++h)p&&p[h]&&(g={r:h+1},b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=Ly(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level),s[s.length]=vr("row","",g));return s.join("")}function fG(e,t,r,a){var s=[Xs,vr("worksheet",null,{xmlns:Qx[0],"xmlns:r":xi.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=Ya(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=ba(u)}a||(a={}),c["!comments"]=[];var h=[];fSe(c,r,e,t,s),s[s.length]=vr("dimension",null,{ref:d}),s[s.length]=kSe(c,t,e,r),t.sheetFormat&&(s[s.length]=vr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=jSe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=DSe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=xSe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=wSe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=uSe(c["!merges"]));var f=-1,p,x=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(x=bn(a,-1,jn(g[1].Target).replace(/#.*$/,""),Aa.HLINK),p["r:id"]="rId"+x),(f=g[1].Target.indexOf("#"))>-1&&(p.location=jn(g[1].Target.slice(f+1))),g[1].Tooltip&&(p.tooltip=jn(g[1].Tooltip)),s[s.length]=vr("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=bSe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=no("ignoredErrors",vr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),h.length>0&&(x=bn(a,-1,"../drawings/drawing"+(e+1)+".xml",Aa.DRAW),s[s.length]=vr("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=h),c["!comments"].length>0&&(x=bn(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Aa.VML),s[s.length]=vr("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function ASe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function TSe(e,t,r){var a=zt(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=Ly(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,f=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var x=Array.isArray(r)?(r[d.r]||[])[d.c]:r[sa(d)];x&&(h<0&&(h=p),f=p)}h<0||(++l,a.write_shift(4,h),a.write_shift(4,f))}var g=a.l;return a.l=c,a.write_shift(4,l),a.l=g,a.length>a.l?a.slice(0,a.l):a}function ISe(e,t,r,a){var s=TSe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&sr(e,0,s)}var PSe=tv,OSe=wg;function MSe(){}function RSe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Bbe(e),r}function FSe(e,t,r){r==null&&(r=zt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return o2({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),cW(e,r),r.slice(0,r.l)}function LSe(e){var t=ad(e);return[t]}function BSe(e,t,r){return r==null&&(r=zt(8)),Jx(t,r)}function USe(e){var t=Zx(e);return[t]}function $Se(e,t,r){return r==null&&(r=zt(4)),ev(t,r)}function VSe(e){var t=ad(e),r=e.read_shift(1);return[t,r,"b"]}function qSe(e,t,r){return r==null&&(r=zt(9)),Jx(t,r),r.write_shift(1,e.v?1:0),r}function zSe(e){var t=Zx(e),r=e.read_shift(1);return[t,r,"b"]}function HSe(e,t,r){return r==null&&(r=zt(5)),ev(t,r),r.write_shift(1,e.v?1:0),r}function WSe(e){var t=ad(e),r=e.read_shift(1);return[t,r,"e"]}function GSe(e,t,r){return r==null&&(r=zt(9)),Jx(t,r),r.write_shift(1,e.v),r}function YSe(e){var t=Zx(e),r=e.read_shift(1);return[t,r,"e"]}function KSe(e,t,r){return r==null&&(r=zt(8)),ev(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function XSe(e){var t=ad(e),r=e.read_shift(4);return[t,r,"s"]}function QSe(e,t,r){return r==null&&(r=zt(12)),Jx(t,r),r.write_shift(4,t.v),r}function JSe(e){var t=Zx(e),r=e.read_shift(4);return[t,r,"s"]}function ZSe(e,t,r){return r==null&&(r=zt(8)),ev(t,r),r.write_shift(4,t.v),r}function eCe(e){var t=ad(e),r=Do(e);return[t,r,"n"]}function tCe(e,t,r){return r==null&&(r=zt(16)),Jx(t,r),Rx(e.v,r),r}function mG(e){var t=Zx(e),r=Do(e);return[t,r,"n"]}function rCe(e,t,r){return r==null&&(r=zt(12)),ev(t,r),Rx(e.v,r),r}function aCe(e){var t=ad(e),r=P4(e);return[t,r,"n"]}function nCe(e,t,r){return r==null&&(r=zt(12)),Jx(t,r),dW(e.v,r),r}function sCe(e){var t=Zx(e),r=P4(e);return[t,r,"n"]}function iCe(e,t,r){return r==null&&(r=zt(8)),ev(t,r),dW(e.v,r),r}function oCe(e){var t=ad(e),r=A4(e);return[t,r,"is"]}function lCe(e){var t=ad(e),r=Mo(e);return[t,r,"str"]}function cCe(e,t,r){return r==null&&(r=zt(12+4*e.v.length)),Jx(t,r),Ri(e.v,r),r.length>r.l?r.slice(0,r.l):r}function dCe(e){var t=Zx(e),r=Mo(e);return[t,r,"str"]}function uCe(e,t,r){return r==null&&(r=zt(8+4*e.v.length)),ev(t,r),Ri(e.v,r),r.length>r.l?r.slice(0,r.l):r}function hCe(e,t,r){var a=e.l+t,s=ad(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=ZS(e,a-e.l,r);o[3]=wo(l,null,s,r.supbooks,r)}else e.l=a;return o}function fCe(e,t,r){var a=e.l+t,s=ad(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=ZS(e,a-e.l,r);o[3]=wo(l,null,s,r.supbooks,r)}else e.l=a;return o}function mCe(e,t,r){var a=e.l+t,s=ad(e);s.r=r["!row"];var i=Do(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=ZS(e,a-e.l,r);o[3]=wo(l,null,s,r.supbooks,r)}else e.l=a;return o}function pCe(e,t,r){var a=e.l+t,s=ad(e);s.r=r["!row"];var i=Mo(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=ZS(e,a-e.l,r);o[3]=wo(l,null,s,r.supbooks,r)}else e.l=a;return o}var xCe=tv,vCe=wg;function gCe(e,t){return t==null&&(t=zt(4)),t.write_shift(4,e),t}function bCe(e,t){var r=e.l+t,a=tv(e),s=T4(e),i=Mo(e),o=Mo(e),l=Mo(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function yCe(e,t){var r=zt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));wg({s:fs(e[0]),e:fs(e[0])},r),I4("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Ri(s||"",r),Ri(e[1].Tooltip||"",r),Ri("",r),r.slice(0,r.l)}function jCe(){}function NCe(e,t,r){var a=e.l+t,s=uW(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=W2e(e,a-e.l,r);o[1]=l}else e.l=a;return o}function wCe(e,t,r){var a=e.l+t,s=tv(e),i=[s];if(r.cellFormula){var o=Y2e(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function SCe(e,t,r){r==null&&(r=zt(18));var a=eC(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var pG=["left","right","top","bottom","header","footer"];function CCe(e){var t={};return pG.forEach(function(r){t[r]=Do(e)}),t}function kCe(e,t){return t==null&&(t=zt(6*8)),Nx(e),pG.forEach(function(r){Rx(e[r],t)}),t}function _Ce(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ECe(e,t,r){r==null&&(r=zt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function DCe(e){var t=zt(24);return t.write_shift(4,4),t.write_shift(4,1),wg(e,t),t}function ACe(e,t){return t==null&&(t=zt(16*4+2)),t.write_shift(2,e.password?B4(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function TCe(){}function ICe(){}function PCe(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,f=!1,p,x,g,b,y,S,w,k,C,D=[];l.biff=12,l["!row"]=0;var E=0,A=!1,I=[],L={},P=l.supbooks||s.supbooks||[[]];if(P.sharedf=L,P.arrayf=I,P.SheetNames=s.SheetNames||s.Sheets.map(function(F){return F.name}),!l.supbooks&&(l.supbooks=P,s.Names))for(var O=0;O<s.Names.length;++O)P[0][O+1]=s.Names[O];var Y=[],q=[],K=!1;By[16]={n:"BrtShortReal",f:mG};var U;if(jf(e,function(X,Q,ie){if(!f)switch(ie){case 148:d=X;break;case 0:p=X,l.sheetRows&&l.sheetRows<=p.r&&(f=!0),k=Hs(b=p.r),l["!row"]=p.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=W0(X.hpt)),q[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:X[2]},X[2]){case"n":x.v=X[1];break;case"s":w=sy[X[1]],x.v=w.t,x.r=w.r;break;case"b":x.v=!!X[1];break;case"e":x.v=X[1],l.cellText!==!1&&(x.w=Nf[x.v]);break;case"str":x.t="s",x.v=X[1];break;case"is":x.t="s",x.v=X[1].t;break}if((g=o.CellXf[X[0].iStyleRef])&&uG(x,g.numFmtId,null,l,i,o),y=X[0].c==-1?y+1:X[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=x):c[hs(y)+k]=x,l.cellFormula){for(A=!1,E=0;E<I.length;++E){var M=I[E];p.r>=M[0].s.r&&p.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(x.F=ba(M[0]),A=!0)}!A&&X.length>3&&(x.f=X[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),l.cellDates&&g&&x.t=="n"&&yg(ra[g.numFmtId])){var V=cx(x.v);V&&(x.t="d",x.v=new Date(V.y,V.m-1,V.d,V.H,V.M,V.S,V.u))}U&&(U.type=="XLDAPR"&&(x.D=!0),U=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;x={t:"z",v:void 0},y=X[0].c==-1?y+1:X[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=x):c[hs(y)+k]=x,u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),U&&(U.type=="XLDAPR"&&(x.D=!0),U=void 0);break;case 176:D.push(X);break;case 49:U=((l.xlmeta||{}).Cell||[])[X-1];break;case 494:var W=a["!id"][X.relId];for(W?(X.Target=W.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=W):X.relId==""&&(X.Target="#"+X.loc),b=X.rfx.s.r;b<=X.rfx.e.r;++b)for(y=X.rfx.s.c;y<=X.rfx.e.c;++y)l.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=X):(S=sa({c:y,r:b}),c[S]||(c[S]={t:"z",v:void 0}),c[S].l=X);break;case 426:if(!l.cellFormula)break;I.push(X),C=l.dense?c[b][y]:c[hs(y)+k],C.f=wo(X[1],u,{r:p.r,c:y},P,l),C.F=ba(X[0]);break;case 427:if(!l.cellFormula)break;L[sa(X[0].s)]=X[1],C=l.dense?c[b][y]:c[hs(y)+k],C.f=wo(X[1],u,{r:p.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;X.e>=X.s;)Y[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},K||(K=!0,U4(X.w/256)),Xm(Y[X.e+1]);break;case 161:c["!autofilter"]={ref:ba(X)};break;case 476:c["!margins"]=X;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),X.name&&(s.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),X.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!Q.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+ie.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=ba(d||u)),l.sheetRows&&c["!ref"]){var J=Ya(c["!ref"]);l.sheetRows<=+J.e.r&&(J.e.r=l.sheetRows-1,J.e.r>u.e.r&&(J.e.r=u.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>u.e.c&&(J.e.c=u.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ba(J))}return D.length>0&&(c["!merges"]=D),Y.length>0&&(c["!cols"]=Y),q.length>0&&(c["!rows"]=q),c}function OCe(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Wn(t),t.z=t.z||ra[14],t.v=bi(Hn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=hp(s.cellXfs,t,s),t.l&&i["!links"].push([sa(c),t.l]),t.c&&i["!comments"].push([sa(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=H4(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?sr(e,18,ZSe(t,c)):sr(e,7,QSe(t,c))):(c.t="str",o?sr(e,17,uCe(t,c)):sr(e,6,cCe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?sr(e,13,iCe(t,c)):sr(e,2,nCe(t,c)):o?sr(e,16,rCe(t,c)):sr(e,5,tCe(t,c)),!0;case"b":return c.t="b",o?sr(e,15,HSe(t,c)):sr(e,4,qSe(t,c)),!0;case"e":return c.t="e",o?sr(e,14,KSe(t,c)):sr(e,3,GSe(t,c)),!0}return o?sr(e,12,$Se(t,c)):sr(e,1,BSe(t,c)),!0}function MCe(e,t,r,a){var s=Ya(t["!ref"]||"A1"),i,o="",l=[];sr(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=Hs(u),ISe(e,t,s,u);var h=!1;if(u<=s.e.r)for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=hs(f)),i=l[f]+o;var p=c?(t[u]||[])[f]:t[i];if(!p){h=!1;continue}h=OCe(e,p,u,f,a,t,h)}}sr(e,146)}function RCe(e,t){!t||!t["!merges"]||(sr(e,177,gCe(t["!merges"].length)),t["!merges"].forEach(function(r){sr(e,176,vCe(r))}),sr(e,178))}function FCe(e,t){!t||!t["!cols"]||(sr(e,390),t["!cols"].forEach(function(r,a){r&&sr(e,60,SCe(a,r))}),sr(e,391))}function LCe(e,t){!t||!t["!ref"]||(sr(e,648),sr(e,649,DCe(Ya(t["!ref"]))),sr(e,650))}function BCe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=bn(r,-1,a[1].Target.replace(/#.*$/,""),Aa.HLINK);sr(e,494,yCe(a,s))}}),delete t["!links"]}function UCe(e,t,r,a){if(t["!comments"].length>0){var s=bn(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Aa.VML);sr(e,551,I4("rId"+s)),t["!legacy"]=s}}function $Ce(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:ba(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=wl(i);l.s.r==l.e.r&&(l.e.r=wl(t["!ref"]).e.r,i=ba(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),sr(e,161,wg(Ya(i))),sr(e,162)}}function VCe(e,t,r){sr(e,133),sr(e,137,ECe(t,r)),sr(e,138),sr(e,134)}function qCe(e,t){t["!protect"]&&sr(e,535,ACe(t["!protect"]))}function zCe(e,t,r,a){var s=yl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Ya(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],sr(s,129),(r.vbaraw||o["!outline"])&&sr(s,147,FSe(l,o["!outline"])),sr(s,148,OSe(c)),VCe(s,o,r.Workbook),FCe(s,o),MCe(s,o,e,t),qCe(s,o),$Ce(s,o,r,e),RCe(s,o),BCe(s,o,a),o["!margins"]&&sr(s,476,kCe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&LCe(s,o),UCe(s,o,e,a),sr(s,130),s.end()}function HCe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Ga((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function WCe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var f=HCe(h);u.s.r=u.s.c=0,u.e.c=l,d=hs(l),f[0].forEach(function(p,x){o[d+Hs(x)]={t:"n",v:p,z:f[1]},c=x}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=ba(u)),o}function GCe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(hG);return l&&W4(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function YCe(e,t){e.l+=10;var r=Mo(e);return{name:r}}function KCe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return jf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var G4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],XCe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],QCe=[],JCe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function nB(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Vn(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function sB(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Vn(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function xG(e){sB(e.WBProps,G4),sB(e.CalcPr,JCe),nB(e.WBView,XCe),nB(e.Sheets,QCe),y0.date1904=Vn(e.WBProps.date1904)}function ZCe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Vn(e.Workbook.WBProps.date1904)?"true":"false"}var eke="][*?/\\".split("");function vG(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return eke.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function tke(e,t,r){e.forEach(function(a,s){vG(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function rke(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];tke(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Z2e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var ake=/<\w+:workbook/;function nke(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(Lo,function(c,d){var u=la(c);switch(ah(u[0])){case"<?xml":break;case"<workbook":c.match(ake)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":G4.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=Vn(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=_n(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Ga(_n(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=_n(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Vn(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Ga(_n(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Qx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return xG(r),r}function gG(e){var t=[Xs];t[t.length]=vr("workbook",null,{xmlns:Qx[0],"xmlns:r":xi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(G4.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=vr("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:jn(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=vr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=vr("definedName",jn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function ske(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Q5(e),r.name=Mo(e),r}function ike(e,t){return t||(t=zt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),I4(e.strRelID,t),Ri(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function oke(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Mo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function lke(e,t){t||(t=zt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),cW(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function cke(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function dke(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Ube(e),o=G2e(e,0,r),l=T4(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function uke(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],By[16]={n:"BrtFRTArchID$",f:cke},jf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=wo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),xG(r),r.Names=i,r.supbooks=o,r}function hke(e,t){sr(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};sr(e,156,ike(s))}sr(e,144)}function fke(e,t){t||(t=zt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ri("SheetJS",t),Ri(e2.version,t),Ri(e2.version,t),Ri("7262",t),t.length>t.l?t.slice(0,t.l):t}function mke(e,t){t||(t=zt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function pke(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(sr(e,135),sr(e,158,mke(s)),sr(e,136))}}function xke(e,t){var r=yl();return sr(r,131),sr(r,128,fke()),sr(r,153,lke(e.Workbook&&e.Workbook.WBProps||null)),pke(r,e),hke(r,e),sr(r,132),r.end()}function vke(e,t,r){return t.slice(-4)===".bin"?uke(e,r):nke(e,r)}function gke(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?PCe(e,a,r,s,i,o,l):dSe(e,a,r,s,i,o,l)}function bke(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?KCe(e,a,r,s,i):GCe(e,a,r,s,i)}function yke(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Nwe():wwe()}function jke(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?ywe():jwe()}function Nke(e,t,r,a){return t.slice(-4)===".bin"?vNe(e,r,a):sNe(e,r,a)}function wke(e,t,r){return JW(e,r)}function Ske(e,t,r){return t.slice(-4)===".bin"?Sje(e,r):jje(e,r)}function Cke(e,t,r){return t.slice(-4)===".bin"?pwe(e,r):iwe(e,r)}function kke(e,t,r){return t.slice(-4)===".bin"?awe(e):twe(e)}function _ke(e,t,r,a){return r.slice(-4)===".bin"?nwe(e,t,r,a):void 0}function Eke(e,t,r){return t.slice(-4)===".bin"?JNe(e,t,r):ewe(e,t,r)}function Dke(e,t,r){return(t.slice(-4)===".bin"?xke:gG)(e)}function Ake(e,t,r,a,s){return(t.slice(-4)===".bin"?zCe:fG)(e,r,a,s)}function Tke(e,t,r){return(t.slice(-4)===".bin"?_Ne:XW)(e,r)}function Ike(e,t,r){return(t.slice(-4)===".bin"?_je:VW)(e,r)}function Pke(e,t,r){return(t.slice(-4)===".bin"?xwe:tG)(e)}function Oke(e){return(e.slice(-4)===".bin"?ZNe:ZW)()}var bG=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,yG=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function kd(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(bG),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(yG),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Mke(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(bG),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(yG),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var oy;function Rke(e,t){var r=oy[e]||Ga(e);return r==="General"?Ox(t):Jc(r,t)}function Fke(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Vn(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=Hn(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Ga(t)]=s}function Lke(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Nf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ay(e.v):e.w=Ox(e.v):e.w=Rke(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=oy[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&yg(a)){var s=cx(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Bke(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=Qje[a.Pattern]||a.Pattern)}e[t.ID]=t}function Uke(e,t,r,a,s,i,o,l,c,d){var u="General",h=a.StyleID,f={};d=d||{};var p=[],x=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&o&&(h=o.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&p.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Vn(e);break;case"String":a.t="s",a.r=N8(Ga(e)),a.v=e.indexOf("<")>-1?Ga(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Hn(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=Ga(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=mW[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=N8(t||e));break}if(Lke(a,u,d),d.cellFormula!==!1)if(a.Formula){var g=Ga(a.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),a.f=b0(g,s),delete a.Formula,a.ArrayRange=="RC"?a.F=b0("RC:RC",s):a.ArrayRange&&(a.F=b0(a.ArrayRange,s),c.push([Ya(a.F),a.F]))}else for(x=0;x<c.length;++x)s.r>=c[x][0].s.r&&s.r<=c[x][0].e.r&&s.c>=c[x][0].s.c&&s.c<=c[x][0].e.c&&(a.F=c[x][1]);d.cellStyles&&(p.forEach(function(b){!f.patternType&&b.patternType&&(f.patternType=b.patternType)}),a.s=f),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function $ke(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function FE(e,t){var r=t||{};jg();var a=Wb(C4(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=_n(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Wn(r);return o.type="string",H0.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(je){s.indexOf("<"+je)>=0&&(i=!0)}),i)return k_e(a,r);oy={"General Number":"General","General Date":ra[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ra[15],"Short Date":ra[14],"Long Time":ra[19],"Medium Time":ra[18],"Short Time":ra[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ra[2],Standard:ra[4],Percent:ra[10],Scientific:ra[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},h=[],f=r.dense?[]:{},p="",x={},g={},b=kd('<Data ss:Type="String">'),y=0,S=0,w=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},C={},D={},E="",A=0,I=[],L={},P={},O=0,Y=[],q=[],K={},U=[],J,F=!1,X=[],Q=[],ie={},M=0,V=0,W={Sheets:[],WBProps:{date1904:!1}},ee={};Py.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var re="";l=Py.exec(a);)switch(l[3]=(re=l[3]).toLowerCase()){case"data":if(re=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Uke(a.slice(y,l.index),E,b,c[c.length-1][0]=="comment"?K:x,{c:S,r:w},C,U[S],g,X,r):(E="",b=kd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(q.length>0&&(x.c=q),(!r.sheetRows||r.sheetRows>w)&&x.v!==void 0&&(r.dense?(f[w]||(f[w]=[]),f[w][S]=x):f[hs(S)+Hs(w)]=x),x.HRef&&(x.l={Target:Ga(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(M=S+(parseInt(x.MergeAcross,10)|0),V=w+(parseInt(x.MergeDown,10)|0),I.push({s:{c:S,r:w},e:{c:M,r:V}})),!r.sheetStubs)x.MergeAcross?S=M+1:++S;else if(x.MergeAcross||x.MergeDown){for(var ne=S;ne<=M;++ne)for(var ce=w;ce<=V;++ce)(ne>S||ce>w)&&(r.dense?(f[ce]||(f[ce]=[]),f[ce][ne]={t:"z"}):f[hs(ne)+Hs(ce)]={t:"z"});S=M+1}else++S;else x=Mke(l[0]),x.Index&&(S=+x.Index-1),S<k.s.c&&(k.s.c=S),S>k.e.c&&(k.e.c=S),l[0].slice(-2)==="/>"&&++S,q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<k.s.r&&(k.s.r=w),w>k.e.r&&(k.e.r=w),l[0].slice(-2)==="/>"&&(g=kd(l[0]),g.Index&&(w=+g.Index-1)),S=0,++w):(g=kd(l[0]),g.Index&&(w=+g.Index-1),ie={},(g.AutoFitHeight=="0"||g.Height)&&(ie.hpx=parseInt(g.Height,10),ie.hpt=Ly(ie.hpx),Q[w]=ie),g.Hidden=="1"&&(ie.hidden=!0,Q[w]=ie));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));h.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(f["!ref"]=ba(k),r.sheetRows&&r.sheetRows<=k.e.r&&(f["!fullref"]=f["!ref"],k.e.r=r.sheetRows-1,f["!ref"]=ba(k))),I.length&&(f["!merges"]=I),U.length>0&&(f["!cols"]=U),Q.length>0&&(f["!rows"]=Q),u[p]=f}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=S=0,c.push([l[3],!1]),d=kd(l[0]),p=Ga(d.Name),f=r.dense?[]:{},I=[],X=[],Q=[],ee={name:p,Hidden:0},W.Sheets.push(ee);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),U=[],F=!1}break;case"style":l[1]==="/"?Bke(C,D,r):D=kd(l[0]);break;case"numberformat":D.nf=Ga(kd(l[0]).Format||"General"),oy[D.nf]&&(D.nf=oy[D.nf]);for(var ae=0;ae!=392&&ra[ae]!=D.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(ra[ae]==null){Jh(D.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(J=kd(l[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!F&&J.wpx>10){F=!0,ko=YW;for(var Z=0;Z<U.length;++Z)U[Z]&&Xm(U[Z])}F&&Xm(J),U[J.Index-1||U.length]=J;for(var de=0;de<+J.Span;++de)U[U.length]=Wn(J);break;case"namedrange":if(l[1]==="/")break;W.Names||(W.Names=[]);var z=la(l[0]),se={Name:z.Name,Ref:b0(z.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(se.Sheet=W.Sheets.length-1),W.Names.push(se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=a.slice(A,l.index):A=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=kd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?uye(L,re,a.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));$ke(K),q.push(K)}else c.push([l[3],!1]),d=kd(l[0]),K={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Ne=kd(l[0]);f["!autofilter"]={ref:b0(Ne.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return dB(a,r);var ue=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ue=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ue=!1}break;case"excelworkbook":switch(l[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ue=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ue=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(O,l.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else O=l.index+l[0].length;break;case"header":f["!margins"]||Nx(f["!margins"]={},"xlml"),isNaN(+la(l[0]).Margin)||(f["!margins"].header=+la(l[0]).Margin);break;case"footer":f["!margins"]||Nx(f["!margins"]={},"xlml"),isNaN(+la(l[0]).Margin)||(f["!margins"].footer=+la(l[0]).Margin);break;case"pagemargins":var oe=la(l[0]);f["!margins"]||Nx(f["!margins"]={},"xlml"),isNaN(+oe.Top)||(f["!margins"].top=+oe.Top),isNaN(+oe.Left)||(f["!margins"].left=+oe.Left),isNaN(+oe.Right)||(f["!margins"].right=+oe.Right),isNaN(+oe.Bottom)||(f["!margins"].bottom=+oe.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ue=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ue=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ue=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ue=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ue=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ue=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ue=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ue=!1}break;case"smarttags":break;default:ue=!1;break}if(ue||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Fke(P,re,Y,a.slice(O,l.index)):(Y=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=u),ye.SheetNames=h,ye.Workbook=W,ye.SSF=Wn(ra),ye.Props=L,ye.Custprops=P,ye}function n3(e,t){switch(K4(t=t||{}),t.type||"base64"){case"base64":return FE(hc(e),t);case"binary":case"buffer":case"file":return FE(e,t);case"array":return FE(dp(e),t)}}function Vke(e,t){var r=[];return e.Props&&r.push(hye(e.Props,t)),e.Custprops&&r.push(fye(e.Props,e.Custprops)),r.join("")}function qke(){return""}function zke(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(vr("NumberFormat",null,{"ss:Format":jn(ra[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(vr("Style",i.join(""),o))}),vr("Styles",r.join(""))}function jG(e){return vr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+q4(e.Ref,{r:0,c:0})})}function Hke(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(jG(s)))}return vr("Names",r.join(""))}function Wke(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(jG(l)))}return i.join("")}function Gke(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(vr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(vr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(vr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(vr("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(no("ProtectContents","True")),e["!protect"].objects&&s.push(no("ProtectObjects","True")),e["!protect"].scenarios&&s.push(no("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(no("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(no("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":vr("WorksheetOptions",s.join(""),{xmlns:Xl.x})}function Yke(e){return e.map(function(t){var r=pbe(t.t||""),a=vr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return vr("Comment",a,{"ss:Author":t.a})}).join("")}function Kke(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+jn(q4(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=fs(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=jn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=jn(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var h="",f="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":h="Number",f=String(e.v);break;case"b":h="Boolean",f=e.v?"1":"0";break;case"e":h="Error",f=Nf[e.v];break;case"d":h="DateTime",f=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||ra[14]);break;case"s":h="String",f=mbe(e.v||"");break}var p=hp(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var x=e.v!=null?f:"",g=e.t=="z"?"":'<Data ss:Type="'+h+'">'+x+"</Data>";return(e.c||[]).length>0&&(g+=Yke(e.c)),vr("Cell",g,l)}function Xke(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=W0(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Qke(e,t,r,a){if(!e["!ref"])return"";var s=Ya(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(b,y){Xm(b);var S=!!b.width,w=eC(y,b),k={"ss:Index":y+1};S&&(k["ss:Width"]=Ry(w.width)),b.hidden&&(k["ss:Hidden"]="1"),l.push(vr("Column",null,k))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[Xke(d,(e["!rows"]||[])[d])],h=s.s.c;h<=s.e.c;++h){var f=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>h)&&!(i[o].s.r>d)&&!(i[o].e.c<h)&&!(i[o].e.r<d)){(i[o].s.c!=h||i[o].s.r!=d)&&(f=!0);break}if(!f){var p={r:d,c:h},x=sa(p),g=c?(e[d]||[])[h]:e[x];u.push(Kke(g,x,e,t,r,a,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function Jke(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?Wke(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?Qke(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(Gke(i,t,e,r)),a.join("")}function Zke(e,t){t||(t={}),e.SSF||(e.SSF=Wn(ra)),e.SSF&&(jg(),GS(e.SSF),t.revssf=KS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],hp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Vke(e,t)),r.push(qke()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(vr("Worksheet",Jke(a,t,e),{"ss:Name":jn(e.SheetNames[a])}));return r[2]=zke(e,t),r[3]=Hke(e),Xs+vr("Workbook",r.join(""),{xmlns:Xl.ss,"xmlns:o":Xl.o,"xmlns:x":Xl.x,"xmlns:ss":Xl.ss,"xmlns:dt":Xl.dt,"xmlns:html":Xl.html})}function e_e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Hbe(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=Wbe(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var t_e=[60,1084,2066,2165,2175];function r_e(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Gh(r,r.l),d=s3[c],u=0;d!=null&&t_e.indexOf(c)>-1;)i=Gh(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=s3[c=Gh(r,r.l)];var h=Oi(o);to(h,0);var f=0;h.lens=[];for(var p=0;p<o.length;++p)h.lens.push(f),f+=o[p].length;if(h.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+a;return t.f(h,h.length,s)}function wu(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ra[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Nf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ay(e.v):e.w=Ox(e.v):e.w=Jc(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&yg(ra[a]||String(a))){var s=cx(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function mN(e,t,r){return{v:e,ixfe:t,t:r}}function a_e(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},h,f="",p,x,g,b,y={},S=[],w,k,C=[],D=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},I=function(ve){return ve<8?bx[ve]:ve<64&&D[ve-8]||bx[ve]},L=function(ve,pe,De){var Ke=pe.XF.data;if(!(!Ke||!Ke.patternType||!De||!De.cellStyles)){pe.s={},pe.s.patternType=Ke.patternType;var Nt;(Nt=My(I(Ke.icvFore)))&&(pe.s.fgColor={rgb:Nt}),(Nt=My(I(Ke.icvBack)))&&(pe.s.bgColor={rgb:Nt})}},P=function(ve,pe,De){if(!(ie>1)&&!(De.sheetRows&&ve.r>=De.sheetRows)){if(De.cellStyles&&pe.XF&&pe.XF.data&&L(ve,pe,De),delete pe.ixfe,delete pe.XF,h=ve,f=sa(ve),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ve.r<o.s.r&&(o.s.r=ve.r),ve.c<o.s.c&&(o.s.c=ve.c),ve.r+1>o.e.r&&(o.e.r=ve.r+1),ve.c+1>o.e.c&&(o.e.c=ve.c+1),De.cellFormula&&pe.f){for(var Ke=0;Ke<S.length;++Ke)if(!(S[Ke][0].s.c>ve.c||S[Ke][0].s.r>ve.r)&&!(S[Ke][0].e.c<ve.c||S[Ke][0].e.r<ve.r)){pe.F=ba(S[Ke][0]),(S[Ke][0].s.c!=ve.c||S[Ke][0].s.r!=ve.r)&&delete pe.f,pe.f&&(pe.f=""+wo(S[Ke][1],o,ve,X,O));break}}De.dense?(s[ve.r]||(s[ve.r]=[]),s[ve.r][ve.c]=pe):s[f]=pe}},O={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var Y,q=[],K=[],U=[],J=[],F=!1,X=[];X.SheetNames=O.snames,X.sharedf=O.sharedf,X.arrayf=O.arrayf,X.names=[],X.XTI=[];var Q=0,ie=0,M=0,V=[],W=[],ee;O.codepage=1200,Pd(1200);for(var re=!1;e.l<e.length-1;){var ne=e.l,ce=e.read_shift(2);if(ce===0&&Q===10)break;var ae=e.l===e.length?0:e.read_shift(2),Z=s3[ce];if(Z&&Z.f){if(t.bookSheets&&Q===133&&ce!==133)break;if(Q=ce,Z.r===2||Z.r==12){var de=e.read_shift(2);if(ae-=2,!O.enc&&de!==ce&&((de&255)<<8|de>>8)!==ce)throw new Error("rt mismatch: "+de+"!="+ce);Z.r==12&&(e.l+=10,ae-=10)}var z={};if(ce===10?z=Z.f(e,ae,O):z=r_e(ce,Z,e,ae,O),ie==0&&[9,521,1033,2057].indexOf(Q)===-1)continue;switch(ce){case 34:r.opts.Date1904=E.WBProps.date1904=z;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=z,!t.password)throw new Error("File is password-protected");if(z.valid==null)throw new Error("Encryption scheme unsupported");if(!z.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=z;break;case 66:var se=Number(z);switch(se){case 21010:se=1200;break;case 32768:se=1e4;break;case 32769:se=1252;break}Pd(O.codepage=se),re=!0;break;case 317:O.rrtabid=z;break;case 25:O.winlocked=z;break;case 439:r.opts.RefreshAll=z;break;case 12:r.opts.CalcCount=z;break;case 16:r.opts.CalcDelta=z;break;case 17:r.opts.CalcIter=z;break;case 13:r.opts.CalcMode=z;break;case 14:r.opts.CalcPrecision=z;break;case 95:r.opts.CalcSaveRecalc=z;break;case 15:O.CalcRefMode=z;break;case 2211:r.opts.FullCalc=z;break;case 129:z.fDialog&&(s["!type"]="dialog"),z.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),z.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:C.push(z);break;case 430:X.push([z]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(z);break;case 24:case 536:ee={Name:z.Name,Ref:wo(z.rgce,o,null,X,O)},z.itab>0&&(ee.Sheet=z.itab-1),X.names.push(ee),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(z),z.Name=="_xlnm._FilterDatabase"&&z.itab>0&&z.rgce&&z.rgce[0]&&z.rgce[0][0]&&z.rgce[0][0][0]=="PtgArea3d"&&(W[z.itab-1]={ref:ba(z.rgce[0][0][1][2])});break;case 22:O.ExternCount=z;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(z),X.XTI=X.XTI.concat(z);break;case 2196:if(O.biff<8)break;ee!=null&&(ee.Comment=z[1]);break;case 18:s["!protect"]=z;break;case 19:z!==0&&O.WTF&&console.error("Password verifier: "+z);break;case 133:i[z.pos]=z,O.snames.push(z.name);break;case 10:{if(--ie)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=ba(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ne=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=ba(o),o.e.r=Ne}o.e.r++,o.e.c++}q.length>0&&(s["!merges"]=q),K.length>0&&(s["!objects"]=K),U.length>0&&(s["!cols"]=U),J.length>0&&(s["!rows"]=J),E.Sheets.push(A)}d===""?u=s:a[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[z.BIFFVer]||8),O.biffguess=z.BIFFVer==0,z.BIFFVer==0&&z.dt==4096&&(O.biff=5,re=!0,Pd(O.codepage=28591)),O.biff==8&&z.BIFFVer==0&&z.dt==16&&(O.biff=2),ie++)break;if(s=t.dense?[]:{},O.biff<8&&!re&&(re=!0,Pd(O.codepage=t.codepage||1252)),O.biff<5||z.BIFFVer==0&&z.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ue={pos:e.l-ae,name:d};i[ue.pos]=ue,O.snames.push(d)}else d=(i[ne]||{name:""}).name;z.dt==32&&(s["!type"]="chart"),z.dt==64&&(s["!type"]="macro"),q=[],K=[],O.arrayf=S=[],U=[],J=[],F=!1,A={Hidden:(i[ne]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[z.r]||[])[z.c]:s[sa({c:z.c,r:z.r})])&&++z.c,w={ixfe:z.ixfe,XF:C[z.ixfe]||{},v:z.val,t:"n"},M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:z.c,r:z.r},w,t);break;case 5:case 517:w={ixfe:z.ixfe,XF:C[z.ixfe],v:z.val,t:z.t},M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:z.c,r:z.r},w,t);break;case 638:w={ixfe:z.ixfe,XF:C[z.ixfe],v:z.rknum,t:"n"},M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:z.c,r:z.r},w,t);break;case 189:for(var oe=z.c;oe<=z.C;++oe){var ye=z.rkrec[oe-z.c][0];w={ixfe:ye,XF:C[ye],v:z.rkrec[oe-z.c][1],t:"n"},M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:oe,r:z.r},w,t)}break;case 6:case 518:case 1030:{if(z.val=="String"){l=z;break}if(w=mN(z.val,z.cell.ixfe,z.tt),w.XF=C[w.ixfe],t.cellFormula){var je=z.formula;if(je&&je[0]&&je[0][0]&&je[0][0][0]=="PtgExp"){var Me=je[0][0][1][0],He=je[0][0][1][1],et=sa({r:Me,c:He});y[et]?w.f=""+wo(z.formula,o,z.cell,X,O):w.F=((t.dense?(s[Me]||[])[He]:s[et])||{}).F}else w.f=""+wo(z.formula,o,z.cell,X,O)}M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P(z.cell,w,t),l=z}break;case 7:case 519:if(l)l.val=z,w=mN(z,l.cell.ixfe,"s"),w.XF=C[w.ixfe],t.cellFormula&&(w.f=""+wo(l.formula,o,l.cell,X,O)),M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(z);var ft=sa(z[0].s);if(p=t.dense?(s[z[0].s.r]||[])[z[0].s.c]:s[ft],t.cellFormula&&p){if(!l||!ft||!p)break;p.f=""+wo(z[1],o,z[0],X,O),p.F=ba(z[0])}}break;case 1212:{if(!t.cellFormula)break;if(f){if(!l)break;y[sa(l.cell)]=z[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[sa(l.cell)],(p||{}).f=""+wo(z[0],o,h,X,O)}}break;case 253:w=mN(c[z.isst].t,z.ixfe,"s"),c[z.isst].h&&(w.h=c[z.isst].h),w.XF=C[w.ixfe],M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:z.c,r:z.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:z.ixfe,XF:C[z.ixfe],t:"z"},M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:z.c,r:z.r},w,t));break;case 190:if(t.sheetStubs)for(var Be=z.c;Be<=z.C;++Be){var dt=z.ixfe[Be-z.c];w={ixfe:dt,XF:C[dt],t:"z"},M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:Be,r:z.r},w,t)}break;case 214:case 516:case 4:w=mN(z.val,z.ixfe,"s"),w.XF=C[w.ixfe],M>0&&(w.z=V[w.ixfe>>8&63]),wu(w,t,r.opts.Date1904),P({c:z.c,r:z.r},w,t);break;case 0:case 512:ie===1&&(o=z);break;case 252:c=z;break;case 1054:if(O.biff==4){V[M++]=z[1];for(var Tt=0;Tt<M+163&&ra[Tt]!=z[1];++Tt);Tt>=163&&Jh(z[1],M+163)}else Jh(z[1],z[0]);break;case 30:{V[M++]=z;for(var At=0;At<M+163&&ra[At]!=z;++At);At>=163&&Jh(z,M+163)}break;case 229:q=q.concat(z);break;case 93:K[z.cmo[0]]=O.lastobj=z;break;case 438:O.lastobj.TxO=z;break;case 127:O.lastobj.ImData=z;break;case 440:for(b=z[0].s.r;b<=z[0].e.r;++b)for(g=z[0].s.c;g<=z[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[sa({c:g,r:b})],p&&(p.l=z[1]);break;case 2048:for(b=z[0].s.r;b<=z[0].e.r;++b)for(g=z[0].s.c;g<=z[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[sa({c:g,r:b})],p&&p.l&&(p.l.Tooltip=z[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(s[z[0].r]||[])[z[0].c]:s[sa(z[0])];var qt=K[z[2]];p||(t.dense?(s[z[0].r]||(s[z[0].r]=[]),p=s[z[0].r][z[0].c]={t:"z"}):p=s[sa(z[0])]={t:"z"},o.e.r=Math.max(o.e.r,z[0].r),o.s.r=Math.min(o.s.r,z[0].r),o.e.c=Math.max(o.e.c,z[0].c),o.s.c=Math.min(o.s.c,z[0].c)),p.c||(p.c=[]),x={a:z[1],t:qt.TxO.t},p.c.push(x)}break;case 2173:zNe(C[z.ixfe],z.ext);break;case 125:{if(!O.cellStyles)break;for(;z.e>=z.s;)U[z.e--]={width:z.w/256,level:z.level||0,hidden:!!(z.flags&1)},F||(F=!0,U4(z.w/256)),Xm(U[z.e+1])}break;case 520:{var xe={};z.level!=null&&(J[z.r]=xe,xe.level=z.level),z.hidden&&(J[z.r]=xe,xe.hidden=!0),z.hpt&&(J[z.r]=xe,xe.hpt=z.hpt,xe.hpx=W0(z.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Nx(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ce]]=z;break;case 161:s["!margins"]||Nx(s["!margins"]={}),s["!margins"].header=z.header,s["!margins"].footer=z.footer;break;case 574:z.RTL&&(E.Views[0].RTL=!0);break;case 146:D=z;break;case 2198:Y=z;break;case 140:k=z;break;case 442:d?A.CodeName=z||A.name:E.WBProps.CodeName=z||"ThisWorkbook";break}}else Z||console.error("Missing Info for XLS Record 0x"+ce.toString(16)),e.l+=ae}return r.SheetNames=Es(i).sort(function(he,ve){return Number(he)-Number(ve)}).map(function(he){return i[he].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&W.forEach(function(he,ve){r.Sheets[r.SheetNames[ve]]["!autofilter"]=he}),r.Strings=c,r.SSF=Wn(ra),O.enc&&(r.Encryption=O.enc),Y&&(r.Themes=Y),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),X.names.length>0&&(E.Names=X.names),r.Workbook=E,r}var ly={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function n_e(e,t,r){var a=Wr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=U8(a,J5,ly.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Wr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=U8(o,Z5,ly.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(yW(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function s_e(e,t){var r=[],a=[],s=[],i=0,o,l=x8(J5,"n"),c=x8(Z5,"n");if(e.Props)for(o=Es(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Es(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)_W.indexOf(s[i][0])>-1||bW.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);a.length&&Wr.utils.cfb_add(t,"/SummaryInformation",$8(a,ly.SI,c,Z5)),(r.length||d.length)&&Wr.utils.cfb_add(t,"/DocumentSummaryInformation",$8(r,ly.DSI,l,J5,d.length?d:null,ly.UDI))}function NG(e,t){t||(t={}),K4(t),x4(),t.codepage&&p4(t.codepage);var r,a;if(e.FullPaths){if(Wr.find(e,"/encryption"))throw new Error("File is password-protected");r=Wr.find(e,"!CompObj"),a=Wr.find(e,"/Workbook")||Wr.find(e,"/Book")}else{switch(t.type){case"base64":e=ec(hc(e));break;case"binary":e=ec(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}to(e,0),a={content:e}}var s,i;if(r&&e_e(r),t.bookProps&&!t.bookSheets)s={};else{var o=_a?"buffer":"array";if(a&&a.content)s=a_e(a.content,t);else if((i=Wr.find(e,"PerfectOffice_MAIN"))&&i.content)s=jx.to_workbook(i.content,(t.type=o,t));else if((i=Wr.find(e,"NativeContent_MAIN"))&&i.content)s=jx.to_workbook(i.content,(t.type=o,t));else throw(i=Wr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Wr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=gwe(e))}var l={};return e.FullPaths&&n_e(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function i_e(e,t){var r=t||{},a=Wr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Wr.utils.cfb_add(a,s,wG(e,r)),r.biff==8&&(e.Props||e.Custprops)&&s_e(e,a),r.biff==8&&e.vbaraw&&bwe(a,Wr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var By={0:{f:ASe},1:{f:LSe},2:{f:aCe},3:{f:WSe},4:{f:VSe},5:{f:eCe},6:{f:lCe},7:{f:XSe},8:{f:pCe},9:{f:mCe},10:{f:hCe},11:{f:fCe},12:{f:USe},13:{f:sCe},14:{f:YSe},15:{f:zSe},16:{f:mG},17:{f:dCe},18:{f:JSe},19:{f:A4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:dke},40:{},42:{},43:{f:lNe},44:{f:iNe},45:{f:uNe},46:{f:fNe},47:{f:hNe},48:{},49:{f:Pbe},50:{},51:{f:GNe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:LW},62:{f:oCe},63:{f:rwe},64:{f:TCe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ro,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_Ce},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:RSe},148:{f:PSe,p:16},151:{f:jCe},152:{},153:{f:oke},154:{},155:{},156:{f:ske},157:{},158:{},159:{T:1,f:wje},160:{T:-1},161:{T:1,f:tv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xCe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:HNe},336:{T:-1},337:{f:XNe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Q5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:FW},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:NCe},427:{f:wCe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:CCe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:MSe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:bCe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Q5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:fwe},633:{T:1},634:{T:-1},635:{T:1,f:uwe},636:{T:-1},637:{f:Fbe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YCe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:ICe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},s3={6:{f:ME},10:{f:ym},12:{f:ii},13:{f:ii},14:{f:Bs},15:{f:Bs},16:{f:Do},17:{f:Bs},18:{f:Bs},19:{f:ii},20:{f:G8},21:{f:G8},23:{f:FW},24:{f:K8},25:{f:Bs},26:{},27:{},28:{f:I1e},29:{},34:{f:Bs},35:{f:Y8},38:{f:Do},39:{f:Do},40:{f:Do},41:{f:Do},42:{f:Bs},43:{f:Bs},47:{f:zje},49:{f:s1e},51:{f:ii},60:{},61:{f:e1e},64:{f:Bs},65:{f:n1e},66:{f:ii},77:{},80:{},81:{},82:{},85:{f:ii},89:{},90:{},91:{},92:{f:qye},93:{f:M1e},94:{},95:{f:Bs},96:{},97:{},99:{f:Bs},125:{f:LW},128:{f:y1e},129:{f:Hye},130:{f:ii},131:{f:Bs},132:{f:Bs},133:{f:Wye},134:{},140:{f:q1e},141:{f:ii},144:{},146:{f:W1e},151:{},152:{},153:{},154:{},155:{},156:{f:ii},157:{},158:{},160:{f:Z1e},161:{f:K1e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:x1e},190:{f:v1e},193:{f:ym},197:{},198:{},199:{},200:{},201:{},202:{f:Bs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ii},220:{},221:{f:Bs},222:{},224:{f:b1e},225:{f:Vye},226:{f:ym},227:{},229:{f:P1e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Yye},253:{f:o1e},255:{f:Xye},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:EW},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Bs},353:{f:ym},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:C1e},431:{f:Bs},432:{},433:{},434:{},437:{},438:{f:L1e},439:{f:Bs},440:{f:B1e},441:{},442:{f:S1},443:{},444:{f:ii},445:{},446:{},448:{f:ym},449:{f:Zye,r:2},450:{f:ym},512:{f:z8},513:{f:J1e},515:{f:w1e},516:{f:c1e},517:{f:W8},519:{f:eje},520:{f:Qye},523:{},545:{f:X8},549:{f:q8},566:{},574:{f:r1e},638:{f:p1e},659:{},1048:{},1054:{f:u1e},1084:{},1212:{f:D1e},2048:{f:$1e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:uN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ym},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:G1e,r:12},2173:{f:qNe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Bs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:E1e,r:12},2197:{},2198:{f:FNe,r:12},2199:{},2200:{},2201:{},2202:{f:A1e,r:12},2203:{f:ym},2204:{},2205:{},2206:{},2207:{},2211:{f:Jye},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ii},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:X1e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:H1e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:z8},1:{},2:{f:sje},3:{f:aje},4:{f:rje},5:{f:W8},7:{f:oje},8:{},9:{f:uN},11:{},22:{f:ii},30:{f:f1e},31:{},32:{},33:{f:X8},36:{},37:{f:q8},50:{f:lje},62:{},52:{},67:{},68:{f:ii},69:{},86:{},126:{},127:{f:tje},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:cje},223:{},234:{},354:{},421:{},518:{f:ME},521:{f:uN},536:{f:K8},547:{f:Y8},561:{},579:{},1030:{f:ME},1033:{f:uN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function gr(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&_4(r)&&e.push(r)}}function o_e(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return gr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function E1(e,t,r){return e||(e=zt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function l_e(e,t,r,a){var s=zt(9);return E1(s,e,t),DW(r,a||"b",s),s}function c_e(e,t,r){var a=zt(8+2*r.length);return E1(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function d_e(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?bi(Hn(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?gr(e,2,ije(r,a,s)):gr(e,3,nje(r,a,s));return;case"b":case"e":gr(e,5,l_e(r,a,t.v,t.t));return;case"s":case"str":gr(e,4,c_e(r,a,(t.v||"").slice(0,255)));return}gr(e,1,E1(null,r,a))}function u_e(e,t,r,a){var s=Array.isArray(t),i=Ya(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=ba(i)}for(var d=i.s.r;d<=i.e.r;++d){l=Hs(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=hs(u)),o=c[u]+l;var h=s?(t[d]||[])[u]:t[o];h&&d_e(e,h,d,u)}}}function h_e(e,t){for(var r=t||{},a=yl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return gr(a,r.biff==4?1033:r.biff==3?521:9,F4(e,16,r)),u_e(a,e.Sheets[e.SheetNames[s]],s,r),gr(a,10),a.end()}function f_e(e,t,r){gr(e,49,i1e({sz:12,name:"Arial"},r))}function m_e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&gr(e,1054,h1e(s,t[s],r))})}function p_e(e,t){var r=zt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),gr(e,2151,r),r=zt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),OW(Ya(t["!ref"]||"A1"),r),r.write_shift(4,4),gr(e,2152,r)}function x_e(e,t){for(var r=0;r<16;++r)gr(e,224,H8({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){gr(e,224,H8(a,0,t))})}function v_e(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];gr(e,440,U1e(a)),a[1].Tooltip&&gr(e,2048,V1e(a))}delete t["!links"]}function g_e(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&gr(e,125,Y1e(eC(s,a),s))})}}function b_e(e,t,r,a,s){var i=16+hp(s.cellXfs,t,s);if(t.v==null&&!t.bf){gr(e,513,Lx(r,a,i));return}if(t.bf)gr(e,6,H2e(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?bi(Hn(t.v)):t.v;gr(e,515,S1e(r,a,o,i));break;case"b":case"e":gr(e,517,N1e(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=H4(s.Strings,t.v,s.revStrings);gr(e,253,l1e(r,a,l,i))}else gr(e,516,d1e(r,a,(t.v||"").slice(0,255),i,s));break;default:gr(e,513,Lx(r,a,i))}}function y_e(e,t,r){var a=yl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,h="",f=[],p=Ya(i["!ref"]||"A1"),x=d?65536:16384;if(p.e.c>255||p.e.r>=x){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}gr(a,2057,F4(r,16,t)),gr(a,13,Uc(1)),gr(a,12,Uc(100)),gr(a,15,Wo(!0)),gr(a,17,Wo(!1)),gr(a,16,Rx(.001)),gr(a,95,Wo(!0)),gr(a,42,Wo(!1)),gr(a,43,Wo(!1)),gr(a,130,Uc(1)),gr(a,128,j1e()),gr(a,131,Wo(!1)),gr(a,132,Wo(!1)),d&&g_e(a,i["!cols"]),gr(a,512,m1e(p,t)),d&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){h=Hs(g);for(var b=p.s.c;b<=p.e.c;++b){g===p.s.r&&(f[b]=hs(b)),u=f[b]+h;var y=c?(i[g]||[])[b]:i[u];y&&(b_e(a,y,g,b,t),d&&y.l&&i["!links"].push([u,y.l]))}}var S=l.CodeName||l.name||s;return d&&gr(a,574,a1e((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&gr(a,229,O1e(i["!merges"])),d&&v_e(a,i),gr(a,442,AW(S)),d&&p_e(a,i),gr(a,10),a.end()}function j_e(e,t,r){var a=yl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(gr(a,2057,F4(e,5,r)),r.bookType=="xla"&&gr(a,135),gr(a,225,l?Uc(1200):null),gr(a,193,Nye(2)),c&&gr(a,191),c&&gr(a,192),gr(a,226),gr(a,92,zye("SheetJS",r)),gr(a,66,Uc(l?1200:1252)),l&&gr(a,353,Uc(0)),l&&gr(a,448),gr(a,317,Q1e(e.SheetNames.length)),l&&e.vbaraw&&gr(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";gr(a,442,AW(d))}gr(a,156,Uc(17)),gr(a,25,Wo(!1)),gr(a,18,Wo(!1)),gr(a,19,Uc(0)),l&&gr(a,431,Wo(!1)),l&&gr(a,444,Uc(0)),gr(a,61,t1e()),gr(a,64,Wo(!1)),gr(a,141,Uc(0)),gr(a,34,Wo(ZCe(e)=="true")),gr(a,14,Wo(!0)),l&&gr(a,439,Wo(!1)),gr(a,218,Uc(0)),f_e(a,e,r),m_e(a,e.SSF,r),x_e(a,r),l&&gr(a,352,Wo(!1));var u=a.end(),h=yl();l&&gr(h,140,z1e()),l&&r.Strings&&o_e(h,252,Kye(r.Strings)),gr(h,10);var f=h.end(),p=yl(),x=0,g=0;for(g=0;g<e.SheetNames.length;++g)x+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var b=u.length+x+f.length;for(g=0;g<e.SheetNames.length;++g){var y=i[g]||{};gr(p,133,Gye({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[g]},r)),b+=t[g].length}var S=p.end();if(x!=S.length)throw new Error("BS8 "+x+" != "+S.length);var w=[];return u.length&&w.push(u),S.length&&w.push(S),f.length&&w.push(f),Oi(w)}function N_e(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Wn(ra)),e&&e.SSF&&(jg(),GS(e.SSF),r.revssf=KS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,X4(r),r.cellXfs=[],hp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=y_e(s,r,e);return a.unshift(j_e(e,a,r)),Oi(a)}function wG(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=wl(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return N_e(e,t);case 4:case 3:case 2:return h_e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function iB(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=ibe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,f=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(o=0;o<c.length;++o){var g=c[o].trim(),b=g.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(b!="<td"&&b!="<th")){var y=g.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var S=y[l].trim();if(S.match(/<t[dh]/i)){for(var w=S,k=0;w.charAt(0)=="<"&&(k=w.indexOf(">"))>-1;)w=w.slice(k+1);for(var C=0;C<x.length;++C){var D=x[C];D.s.c==u&&D.s.r<d&&d<=D.e.r&&(u=D.e.c+1,C=-1)}var E=la(S.slice(0,S.indexOf(">")));f=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||f>1)&&x.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+f-1}});var A=E.t||E["data-t"]||"";if(!w.length){u+=f;continue}if(w=GH(w),p.s.r>d&&(p.s.r=d),p.e.r<d&&(p.e.r=d),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!w.length){u+=f;continue}var I={t:"s",v:w};r.raw||!w.trim().length||A=="s"||(w==="TRUE"?I={t:"b",v:!0}:w==="FALSE"?I={t:"b",v:!1}:isNaN(Rd(w))?isNaN(z0(w).getDate())||(I={t:"d",v:Hn(w)},r.cellDates||(I={t:"n",v:bi(I.v)}),I.z=r.dateNF||ra[14]):I={t:"n",v:Rd(w)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=I):a[sa({r:d,c:u})]=I,u+=f}}}}return a["!ref"]=ba(p),x.length&&(a["!merges"]=x),a}function w_e(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=sa({r,c:o}),h=a.dense?(e[r]||[])[o]:e[u],f=h&&h.v!=null&&(h.h||S4(h.w||(hf(h),h.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),a.editable?f='<span contenteditable="true">'+f+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),p.id=(a.id||"sjs")+"-"+u,i.push(vr("td",f,p))}}var x="<tr>";return x+i.join("")+"</tr>"}var S_e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',C_e="</body></html>";function k_e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return up(iB(r[0],t),t);var a=Z4();return r.forEach(function(s,i){eI(a,iB(s,t),"Sheet"+(i+1))}),a}function __e(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function SG(e,t){var r=t||{},a=r.header!=null?r.header:S_e,s=r.footer!=null?r.footer:C_e,i=[a],o=wl(e["!ref"]);r.dense=Array.isArray(e),i.push(__e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(w_e(e,o,l,r));return i.push("</table>"+s),i.join("")}function CG(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?fs(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=wl(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var h=[],f=0,p=e["!rows"]||(e["!rows"]=[]),x=0,g=0,b=0,y=0,S=0,w=0;for(e["!cols"]||(e["!cols"]=[]);x<l.length&&g<c;++x){var k=l[x];if(oB(k)){if(a.display)continue;p[g]={hidden:!0}}var C=k.children;for(b=y=0;b<C.length;++b){var D=C[b];if(!(a.display&&oB(D))){var E=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):GH(D.innerHTML),A=D.getAttribute("data-z")||D.getAttribute("z");for(f=0;f<h.length;++f){var I=h[f];I.s.c==y+i&&I.s.r<g+s&&g+s<=I.e.r&&(y=I.e.c+1-i,f=-1)}w=+D.getAttribute("colspan")||1,((S=+D.getAttribute("rowspan")||1)>1||w>1)&&h.push({s:{r:g+s,c:y+i},e:{r:g+s+(S||1)-1,c:y+i+(w||1)-1}});var L={t:"s",v:E},P=D.getAttribute("data-t")||D.getAttribute("t")||"";E!=null&&(E.length==0?L.t=P||"z":a.raw||E.trim().length==0||P=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(Rd(E))?isNaN(z0(E).getDate())||(L={t:"d",v:Hn(E)},a.cellDates||(L={t:"n",v:bi(L.v)}),L.z=a.dateNF||ra[14]):L={t:"n",v:Rd(E)})),L.z===void 0&&A!=null&&(L.z=A);var O="",Y=D.getElementsByTagName("A");if(Y&&Y.length)for(var q=0;q<Y.length&&!(Y[q].hasAttribute("href")&&(O=Y[q].getAttribute("href"),O.charAt(0)!="#"));++q);O&&O.charAt(0)!="#"&&(L.l={Target:O}),a.dense?(e[g+s]||(e[g+s]=[]),e[g+s][y+i]=L):e[sa({c:y+i,r:g+s})]=L,d.e.c<y+i&&(d.e.c=y+i),y+=w}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,g-1+s),e["!ref"]=ba(d),g>=c&&(e["!fullref"]=ba((d.e.r=l.length-x+g-1+s,d))),e}function kG(e,t){var r=t||{},a=r.dense?[]:{};return CG(a,e,t)}function E_e(e,t){return up(kG(e,t),t)}function oB(e){var t="",r=D_e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function D_e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function A_e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Ga(t.replace(/<[^>]*>/g,""));return[r]}var lB={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function _G(e,t){var r=t||{},a=C4(e),s=[],i,o,l={name:""},c="",d=0,u,h,f={},p=[],x=r.dense?[]:{},g,b,y={value:""},S="",w=0,k=[],C=-1,D=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,I={},L=[],P={},O=0,Y=0,q=[],K=1,U=1,J=[],F={Names:[]},X={},Q=["",""],ie=[],M={},V="",W=0,ee=!1,re=!1,ne=0;for(Py.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=Py.exec(a);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?x["!ref"]=ba(E):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(x["!fullref"]=x["!ref"],E.e.r=r.sheetRows-1,x["!ref"]=ba(E)),L.length&&(x["!merges"]=L),q.length&&(x["!rows"]=q),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),f[u.name]=x,re=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=la(g[0],!1),C=D=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,x=r.dense?[]:{},L=[],q=[],re=!0);break;case"table-row-group":g[1]==="/"?--A:++A;break;case"table-row":case"":if(g[1]==="/"){C+=K,K=1;break}if(h=la(g[0],!1),h.?C=h.-1:C==-1&&(C=0),K=+h["number-rows-repeated"]||1,K<10)for(ne=0;ne<K;++ne)A>0&&(q[C+ne]={level:A});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(x[C]||(x[C]=[]),x[C][D]={t:"z"}):x[sa({r:C,c:D})]={t:"z"}),S="",k=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++D,y=la(g[0],!1),U=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=aB(Ga(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=Ga(y["string-value"]||""),r.dense?(x[C]||(x[C]=[]),x[C][D]=b):x[sa({r:C,c:D})]=b),D+=U-1;else if(g[1]!=="/"){++D,S="",w=0,k=[],U=1;var ce=K?C+K-1:C;if(D>E.e.c&&(E.e.c=D),D<E.s.c&&(E.s.c=D),C<E.s.r&&(E.s.r=C),ce>E.e.r&&(E.e.r=ce),y=la(g[0],!1),ie=[],M={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Ga(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(O=parseInt(y["number-matrix-rows-spanned"],10)||0,Y=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:C,c:D},e:{r:C+O-1,c:D+Y-1}},b.F=ba(P),J.push([P,b.F])),y.formula)b.f=aB(y.formula);else for(ne=0;ne<J.length;++ne)C>=J[ne][0].s.r&&C<=J[ne][0].e.r&&D>=J[ne][0].s.c&&D<=J[ne][0].e.c&&(b.F=J[ne][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(O=parseInt(y["number-rows-spanned"],10)||0,Y=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:C,c:D},e:{r:C+O-1,c:D+Y-1}},L.push(P)),y["number-columns-repeated"]&&(U=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Vn(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Hn(y["date-value"]),r.cellDates||(b.t="n",b.v=bi(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=abe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=XS(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(S=Ga(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(ee=!1,b.t==="s"&&(b.v=S||"",k.length&&(b.R=k),ee=w==0),X.Target&&(b.l=X),ie.length>0&&(b.c=ie,ie=[]),S&&r.cellText!==!1&&(b.w=S),ee&&(b.t="z",delete b.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=C))for(var ae=0;ae<K;++ae){if(U=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(x[C+ae]||(x[C+ae]=[]),x[C+ae][D]=ae==0?b:Wn(b);--U>0;)x[C+ae][D+U]=Wn(b);else for(x[sa({r:C+ae,c:D})]=b;--U>0;)x[sa({r:C+ae,c:D+U})]=Wn(b);E.e.c<=D&&(E.e.c=D)}U=parseInt(y["number-columns-repeated"]||"1",10),D+=U-1,U=0,b={},S="",k=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;M.t=S,k.length&&(M.R=k),M.a=V,ie.push(M)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);V="",W=0,S="",w=0,k=[];break;case"creator":g[1]==="/"?V=a.slice(W,g.index):W=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);S="",w=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=la(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=la(g[0],!1),c+=lB[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=la(g[0],!1),c+=lB[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,g.index);break}else d=g.index+g[0].length;break;case"named-range":o=la(g[0],!1),Q=RE(o["cell-range-address"]);var Z={Name:o.name,Ref:Q[0]+"!"+Q[1]};re&&(Z.Sheet=p.length),F.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var de=A_e(a.slice(w,g.index));S=(S.length>0?S+`
`:"")+de[0]}else la(g[0],!1),w=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{Q=RE(la(g[0])["target-range-address"]),f[Q[0]]["!autofilter"]={ref:Q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(X=la(g[0],!1),!X.href)break;X.Target=Ga(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(Q=RE(X.Target.slice(1)),X.Target="#"+Q[0]+"!"+Q[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var z={Sheets:f,SheetNames:p,Workbook:F};return r.bookSheets&&delete z.Sheets,z}function cB(e,t){t=t||{},Bc(e,"META-INF/manifest.xml")&&aye(si(e,"META-INF/manifest.xml"),t);var r=tc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=_G(_n(r),t);return Bc(e,"meta.xml")&&(a.Props=vW(si(e,"meta.xml"))),a}function dB(e,t){return _G(e,t)}var T_e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Iy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Xs+t}}(),uB=function(){var e=function(i){return jn(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+jn(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,h=wl(i["!ref"]||"A1"),f=i["!merges"]||[],p=0,x=Array.isArray(i);if(i["!cols"])for(u=0;u<=h.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",b=i["!rows"]||[];for(d=0;d<h.s.r;++d)g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=h.e.r;++d){for(g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),u=0;u<h.s.c;++u)c.push(t);for(;u<=h.e.c;++u){var y=!1,S={},w="";for(p=0;p!=f.length;++p)if(!(f[p].s.c>u)&&!(f[p].s.r>d)&&!(f[p].e.c<u)&&!(f[p].e.r<d)){(f[p].s.c!=u||f[p].s.r!=d)&&(y=!0),S["table:number-columns-spanned"]=f[p].e.c-f[p].s.c+1,S["table:number-rows-spanned"]=f[p].e.r-f[p].s.r+1;break}if(y){c.push(r);continue}var k=sa({r:d,c:u}),C=x?(i[d]||[])[u]:i[k];if(C&&C.f&&(S["table:formula"]=jn(Q2e(C.f)),C.F&&C.F.slice(0,k.length)==k)){var D=wl(C.F);S["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,S["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!C){c.push(t);continue}switch(C.t){case"b":w=C.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=C.v?"true":"false";break;case"n":w=C.w||String(C.v||0),S["office:value-type"]="float",S["office:value"]=C.v||0;break;case"s":case"str":w=C.v==null?"":C.v,S["office:value-type"]="string";break;case"d":w=C.w||Hn(C.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=Hn(C.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(w);if(C.l&&C.l.Target){var A=C.l.Target;A=A.charAt(0)=="#"?"#"+J2e(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),E=vr("text:a",E,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+vr("table:table-cell",vr("text:p",E,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var h=d["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Xm(h),h.ods=l;var f=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var h=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Xs],d=Iy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Iy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(xW().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(a(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function EG(e,t){if(t.bookType=="fods")return uB(e,t);var r=j4(),a="",s=[],i=[];return a="mimetype",wa(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",wa(r,a,uB(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",wa(r,a,T_e(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",wa(r,a,Xs+xW()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",wa(r,a,iye(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",wa(r,a,nye(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function i3(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):_n(dp(e))}function I_e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):ec(Bu(e))}function P_e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Jm(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function hB(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function O_e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function M_e(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function Uy(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function vn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ks(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Za(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=Uy(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Uy(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Xi(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(vn(a*8+s.type)),s.type==2&&t.push(vn(s.data.length)),t.push(s.data))})}),Jm(t)}function Y4(e,t){return e?.map(function(r){return t(r.data)})||[]}function Fc(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=Uy(e,a),i=Za(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:ks(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Za(l.data),d=ks(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=ks(i[3][0].data)>>>0>0),r.push(o)}return r}function zv(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:vn(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:vn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:vn(o.data.length)}],a[2].push({data:Xi(o.meta),type:2})});var i=Xi(a);t.push(vn(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),Jm(t)}function R_e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Uy(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Jm(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=Jm(s);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function Lc(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(R_e(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Jm(t)}function Hv(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=vn(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return Jm(t)}function F_e(e,t,r,a){var s=Bx(e),i=s.getUint32(4,!0),o=(a>1?12:8)+hB(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=hB(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function L_e(e,t,r){var a=Bx(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=O_e(e,i),i+=16),s&2&&(d=a.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return h}function LE(e,t){var r=new Uint8Array(32),a=Bx(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,M_e(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function BE(e,t){var r=new Uint8Array(32),a=Bx(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function B_e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return F_e(e,t,r,e[0]);case 5:return L_e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function jo(e){var t=Za(e);return Uy(t[1][0].data)}function fB(e,t){var r=Za(t.data),a=ks(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Za(o.data),c=ks(l[1][0].data)>>>0;switch(a){case 1:i[c]=i3(l[3][0].data);break;case 8:{var d=e[jo(l[9][0].data)][0],u=Za(d.data),h=e[jo(u[1][0].data)][0],f=ks(h.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var p=Za(h.data);i[c]=p[3].map(function(x){return i3(x.data)}).join("")}break}}),i}function U_e(e,t){var r,a,s,i,o,l,c,d,u,h,f,p,x,g,b=Za(e),y=ks(b[1][0].data)>>>0,S=ks(b[2][0].data)>>>0,w=((a=(r=b[8])==null?void 0:r[0])==null?void 0:a.data)&&ks(b[8][0].data)>0||!1,k,C;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)k=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,C=(d=(c=b[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=b[4])==null?void 0:u[0])!=null&&h.data&&t!=1)k=(p=(f=b[4])==null?void 0:f[0])==null?void 0:p.data,C=(g=(x=b[3])==null?void 0:x[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=w?4:1,E=Bx(k),A=[],I=0;I<k.length/2;++I){var L=E.getUint16(I*2,!0);L<65535&&A.push([I,L])}if(A.length!=S)throw"Expected ".concat(S," cells, found ").concat(A.length);var P=[];for(I=0;I<A.length-1;++I)P[A[I][0]]=C.subarray(A[I][1]*D,A[I+1][1]*D);return A.length>=1&&(P[A[A.length-1][0]]=C.subarray(A[A.length-1][1]*D)),{R:y,cells:P}}function $_e(e,t){var r,a=Za(t.data),s=(r=a?.[7])!=null&&r[0]?ks(a[7][0].data)>>>0>0?1:0:-1,i=Y4(a[5],function(o){return U_e(o,s)});return{nrows:ks(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function V_e(e,t,r){var a,s=Za(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(ks(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(ks(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=ba(i);var o=Za(s[4][0].data),l=fB(e,e[jo(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?fB(e,e[jo(o[17][0].data)][0]):[],d=Za(o[3][0].data),u=0;d[1].forEach(function(h){var f=Za(h.data),p=e[jo(f[2][0].data)][0],x=ks(p.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var g=$_e(e,p);g.data.forEach(function(b,y){b.forEach(function(S,w){var k=sa({r:u+y,c:w}),C=B_e(S,l,c);C&&(r[k]=C)})}),u+=g.nrows})}function q_e(e,t){var r=Za(t.data),a={"!ref":"A1"},s=e[jo(r[2][0].data)],i=ks(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return V_e(e,s[0],a),a}function z_e(e,t){var r,a=Za(t.data),s={name:(r=a[1])!=null&&r[0]?i3(a[1][0].data):"",sheets:[]},i=Y4(a[2],jo);return i.forEach(function(o){e[o].forEach(function(l){var c=ks(l.meta[1][0].data);c==6e3&&s.sheets.push(q_e(e,l))})}),s}function H_e(e,t){var r=Z4(),a=Za(t.data),s=Y4(a[1],jo);if(s.forEach(function(i){e[i].forEach(function(o){var l=ks(o.meta[1][0].data);if(l==2){var c=z_e(e,o);c.sheets.forEach(function(d,u){eI(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function UE(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Lc(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=Fc(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,o.push(h.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&ks(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=ks(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return H_e(i,l)}function W_e(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&ks(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Bx(e[7][0].data),u=0,h=[],f=Bx(e[4][0].data),p=0,x=[],g=0;g<t.length;++g){if(t[g]==null){d.setUint16(g*2,65535,!0),f.setUint16(g*2,65535);continue}d.setUint16(g*2,u,!0),f.setUint16(g*2,p,!0);var b,y;switch(typeof t[g]){case"string":b=LE({t:"s",v:t[g]},r),y=BE({t:"s",v:t[g]},r);break;case"number":b=LE({t:"n",v:t[g]},r),y=BE({t:"n",v:t[g]},r);break;case"boolean":b=LE({t:"b",v:t[g]},r),y=BE({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}h.push(b),u+=b.length,x.push(y),p+=y.length,++c}for(e[2][0].data=vn(c);g<e[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),f.setUint16(g*2,65535,!0);return e[6][0].data=Jm(h),e[3][0].data=Jm(x),c}function G_e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=wl(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(ba(a)));var i=h2(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(V){return V.forEach(function(W){typeof W=="string"&&o.push(W)})});var l={},c=[],d=Wr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(V,W){return[V,d.FullPaths[W]]}).forEach(function(V){var W=V[0],ee=V[1];if(W.type==2&&W.name.match(/\.iwa/)){var re=W.content,ne=Lc(re),ce=Fc(ne);ce.forEach(function(ae){c.push(ae.id),l[ae.id]={deps:[],location:ee,type:ks(ae.messages[0].meta[1][0].data)}})}}),c.sort(function(V,W){return V-W});var u=c.filter(function(V){return V>1}).map(function(V){return[V,vn(V)]});d.FileIndex.map(function(V,W){return[V,d.FullPaths[W]]}).forEach(function(V){var W=V[0];if(V[1],!!W.name.match(/\.iwa/)){var ee=Fc(Lc(W.content));ee.forEach(function(re){re.messages.forEach(function(ne){u.forEach(function(ce){re.messages.some(function(ae){return ks(ae.meta[1][0].data)!=11006&&P_e(ae.data,ce[1])})&&l[ce[0]].deps.push(re.id)})})})}});for(var h=Wr.find(d,l[1].location),f=Fc(Lc(h.content)),p,x=0;x<f.length;++x){var g=f[x];g.id==1&&(p=g)}var b=jo(Za(p.messages[0].data)[1][0].data);for(h=Wr.find(d,l[b].location),f=Fc(Lc(h.content)),x=0;x<f.length;++x)g=f[x],g.id==b&&(p=g);for(b=jo(Za(p.messages[0].data)[2][0].data),h=Wr.find(d,l[b].location),f=Fc(Lc(h.content)),x=0;x<f.length;++x)g=f[x],g.id==b&&(p=g);for(b=jo(Za(p.messages[0].data)[2][0].data),h=Wr.find(d,l[b].location),f=Fc(Lc(h.content)),x=0;x<f.length;++x)g=f[x],g.id==b&&(p=g);var y=Za(p.messages[0].data);{y[6][0].data=vn(a.e.r+1),y[7][0].data=vn(a.e.c+1);var S=jo(y[46][0].data),w=Wr.find(d,l[S].location),k=Fc(Lc(w.content));{for(var C=0;C<k.length&&k[C].id!=S;++C);if(k[C].id!=S)throw"Bad ColumnRowUIDMapArchive";var D=Za(k[C].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var E=0;E<=a.e.c;++E){var A=[];A[1]=A[2]=[{type:0,data:vn(E+420690)}],D[1].push({type:2,data:Xi(A)}),D[2].push({type:0,data:vn(E)}),D[3].push({type:0,data:vn(E)})}D[4]=[],D[5]=[],D[6]=[];for(var I=0;I<=a.e.r;++I)A=[],A[1]=A[2]=[{type:0,data:vn(I+726270)}],D[4].push({type:2,data:Xi(A)}),D[5].push({type:0,data:vn(I)}),D[6].push({type:0,data:vn(I)});k[C].messages[0].data=Xi(D)}w.content=Hv(zv(k)),w.size=w.content.length,delete y[46];var L=Za(y[4][0].data);{L[7][0].data=vn(a.e.r+1);var P=Za(L[1][0].data),O=jo(P[2][0].data);w=Wr.find(d,l[O].location),k=Fc(Lc(w.content));{if(k[0].id!=O)throw"Bad HeaderStorageBucket";var Y=Za(k[0].messages[0].data);for(I=0;I<i.length;++I){var q=Za(Y[2][0].data);q[1][0].data=vn(I),q[4][0].data=vn(i[I].length),Y[2][I]={type:Y[2][0].type,data:Xi(q)}}k[0].messages[0].data=Xi(Y)}w.content=Hv(zv(k)),w.size=w.content.length;var K=jo(L[2][0].data);w=Wr.find(d,l[K].location),k=Fc(Lc(w.content));{if(k[0].id!=K)throw"Bad HeaderStorageBucket";for(Y=Za(k[0].messages[0].data),E=0;E<=a.e.c;++E)q=Za(Y[2][0].data),q[1][0].data=vn(E),q[4][0].data=vn(a.e.r+1),Y[2][E]={type:Y[2][0].type,data:Xi(q)};k[0].messages[0].data=Xi(Y)}w.content=Hv(zv(k)),w.size=w.content.length;var U=jo(L[4][0].data);(function(){for(var V=Wr.find(d,l[U].location),W=Fc(Lc(V.content)),ee,re=0;re<W.length;++re){var ne=W[re];ne.id==U&&(ee=ne)}var ce=Za(ee.messages[0].data);{ce[3]=[];var ae=[];o.forEach(function(z,se){ae[1]=[{type:0,data:vn(se)}],ae[2]=[{type:0,data:vn(1)}],ae[3]=[{type:2,data:I_e(z)}],ce[3].push({type:2,data:Xi(ae)})})}ee.messages[0].data=Xi(ce);var Z=zv(W),de=Hv(Z);V.content=de,V.size=V.content.length})();var J=Za(L[3][0].data);{var F=J[1][0];delete J[2];var X=Za(F.data);{var Q=jo(X[2][0].data);(function(){for(var V=Wr.find(d,l[Q].location),W=Fc(Lc(V.content)),ee,re=0;re<W.length;++re){var ne=W[re];ne.id==Q&&(ee=ne)}var ce=Za(ee.messages[0].data);{delete ce[6],delete J[7];var ae=new Uint8Array(ce[5][0].data);ce[5]=[];for(var Z=0,de=0;de<=a.e.r;++de){var z=Za(ae);Z+=W_e(z,i[de],o),z[1][0].data=vn(de),ce[5].push({data:Xi(z),type:2})}ce[1]=[{type:0,data:vn(a.e.c+1)}],ce[2]=[{type:0,data:vn(a.e.r+1)}],ce[3]=[{type:0,data:vn(Z)}],ce[4]=[{type:0,data:vn(a.e.r+1)}]}ee.messages[0].data=Xi(ce);var se=zv(W),Ne=Hv(se);V.content=Ne,V.size=V.content.length})()}F.data=Xi(X)}L[3][0].data=Xi(J)}y[4][0].data=Xi(L)}p.messages[0].data=Xi(y);var ie=zv(f),M=Hv(ie);return h.content=M,h.size=h.content.length,d}function DG(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function K4(e){DG([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function X4(e){DG([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Y_e(e){return Aa.WS.indexOf(e)>-1?"sheet":e==Aa.CS?"chart":e==Aa.DS?"dialog":e==Aa.MS?"macro":e&&e.length?e:"sheet"}function K_e(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Y_e(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function X_e(e,t,r,a,s,i,o,l,c,d,u,h){try{i[a]=ny(tc(e,r,!0),t);var f=si(e,t),p;switch(l){case"sheet":p=gke(f,t,s,c,i[a],d,u,h);break;case"chart":if(p=bke(f,t,s,c,i[a],d,u,h),!p||!p["!drawel"])break;var x=Yb(p["!drawel"].Target,t),g=Oy(x),b=swe(tc(e,x,!0),ny(tc(e,g,!0),x)),y=Yb(b,x),S=Oy(y);p=WCe(tc(e,y,!0),y,c,ny(tc(e,S,!0),y),d,p);break;case"macro":p=yke(f,t,s,c,i[a],d,u,h);break;case"dialog":p=jke(f,t,s,c,i[a],d,u,h);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=p;var w=[];i&&i[a]&&Es(i[a]).forEach(function(k){var C="";if(i[a][k].Type==Aa.CMNT){C=Yb(i[a][k].Target,t);var D=Cke(si(e,C,!0),C,c);if(!D||!D.length)return;J8(p,D,!1)}i[a][k].Type==Aa.TCMNT&&(C=Yb(i[a][k].Target,t),w=w.concat(owe(si(e,C,!0),c)))}),w&&w.length&&J8(p,w,!0,c.people||[])}catch(k){if(c.WTF)throw k}}function Oc(e){return e.charAt(0)=="/"?e.slice(1):e}function Q_e(e,t){if(jg(),t=t||{},K4(t),Bc(e,"META-INF/manifest.xml")||Bc(e,"objectdata.xml"))return cB(e,t);if(Bc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof UE<"u"){if(e.FileIndex)return UE(e);var r=Wr.utils.cfb_new();return b8(e).forEach(function(q){wa(r,q,lbe(e,q))}),UE(r)}throw new Error("Unsupported NUMBERS file")}if(!Bc(e,"[Content_Types].xml"))throw Bc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Bc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=b8(e),s=tye(tc(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",si(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!si(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(sy=[],s.sst)try{sy=Ske(si(e,Oc(s.sst)),s.sst,t)}catch(q){if(t.WTF)throw q}t.cellStyles&&s.themes.length&&(c=wke(tc(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=Nke(si(e,Oc(s.style)),s.style,c,t))}s.links.map(function(q){try{var K=ny(tc(e,Oy(Oc(q))),q);return _ke(si(e,Oc(q)),K,q,t)}catch{}});var u=vke(si(e,Oc(s.workbooks[0])),s.workbooks[0],t),h={},f="";s.coreprops.length&&(f=si(e,Oc(s.coreprops[0]),!0),f&&(h=vW(f)),s.extprops.length!==0&&(f=si(e,Oc(s.extprops[0]),!0),f&&lye(f,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(f=tc(e,Oc(s.custprops[0]),!0),f&&(p=dye(f,t)));var x={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(K){return K.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(x.Props=h,x.Custprops=p),t.bookSheets&&typeof o<"u"&&(x.SheetNames=o),t.bookSheets?x.SheetNames:t.bookProps))return x;o={};var g={};t.bookDeps&&s.calcchain&&(g=kke(si(e,Oc(s.calcchain)),s.calcchain));var b=0,y={},S,w;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var C=0;C!=k.length;++C)h.SheetNames[C]=k[C].name}var D=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),A=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Bc(e,A)||(A="xl/_rels/workbook."+D+".rels");var I=ny(tc(e,A,!0),A.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Eke(si(e,Oc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=cwe(si(e,Oc(s.people[0])),t)),I&&(I=K_e(I,u.Sheets));var L=si(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=h.Worksheets;++b){var P="sheet";if(I&&I[b]?(S="xl/"+I[b][1].replace(/[\/]?xl\//,""),Bc(e,S)||(S=I[b][1]),Bc(e,S)||(S=A.replace(/_rels\/.*$/,"")+I[b][1]),P=I[b][2]):(S="xl/worksheets/sheet"+(b+1-L)+"."+D,S=S.replace(/sheet0\./,"sheet.")),w=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(h.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,Y=0;Y!=t.sheets.length;++Y)typeof t.sheets[Y]=="number"&&t.sheets[Y]==b&&(O=1),typeof t.sheets[Y]=="string"&&t.sheets[Y].toLowerCase()==h.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}X_e(e,S,w,h.SheetNames[b],b,y,o,P,t,u,c,d)}return x={Directory:s,Workbook:u,Props:h,Custprops:p,Deps:g,Sheets:o,SheetNames:h.SheetNames,Strings:sy,Styles:d,Themes:c,SSF:Wn(ra)},t&&t.bookFiles&&(e.files?(x.keys=a,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(q,K){q=q.replace(/^Root Entry[\/]/,""),x.keys.push(q),x.files[q]=e.FileIndex[K]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=si(e,Oc(s.vba[0]),!0):s.defaults&&s.defaults.bin===vwe&&(x.vbaraw=si(e,"xl/vbaProject.bin",!0))),x}function J_e(e,t){var r=t||{},a="Workbook",s=Wr.find(e,a);try{if(a="/!DataSpaces/Version",s=Wr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(Eje(s.content),a="/!DataSpaces/DataSpaceMap",s=Wr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=Aje(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Wr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=Tje(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Wr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);Pje(s.content)}catch{}if(a="/EncryptionInfo",s=Wr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=Oje(s.content);if(a="/EncryptedPackage",s=Wr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Z_e(e,t){return t.bookType=="ods"?EG(e,t):t.bookType=="numbers"?G_e(e,t):t.bookType=="xlsb"?eEe(e,t):tEe(e,t)}function eEe(e,t){h0=1024,e&&!e.SSF&&(e.SSF=Wn(ra)),e&&e.SSF&&(jg(),GS(e.SSF),t.revssf=KS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,iy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=rG.indexOf(t.bookType)>-1,s=M4();X4(t=t||{});var i=j4(),o="",l=0;if(t.cellXfs=[],hp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",wa(i,o,gW(e.Props,t)),s.coreprops.push(o),bn(t.rels,2,o,Aa.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,wa(i,o,jW(e.Props)),s.extprops.push(o),bn(t.rels,3,o,Aa.EXT_PROPS),e.Custprops!==e.Props&&Es(e.Custprops||{}).length>0&&(o="docProps/custom.xml",wa(i,o,NW(e.Custprops)),s.custprops.push(o),bn(t.rels,4,o,Aa.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,wa(i,o,Ake(l-1,o,t,e,u)),s.sheets.push(o),bn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Aa.WS[0])}if(h){var p=h["!comments"],x=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,wa(i,g,Pke(p,g)),s.comments.push(g),bn(u,-1,"../comments"+l+"."+r,Aa.CMNT),x=!0),h["!legacy"]&&x&&wa(i,"xl/drawings/vmlDrawing"+l+".vml",eG(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&wa(i,Oy(o),g0(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,wa(i,o,Ike(t.Strings,o,t)),s.strs.push(o),bn(t.wbrels,-1,"sharedStrings."+r,Aa.SST)),o="xl/workbook."+r,wa(i,o,Dke(e,o)),s.workbooks.push(o),bn(t.rels,1,o,Aa.WB),o="xl/theme/theme1.xml",wa(i,o,$4(e.Themes,t)),s.themes.push(o),bn(t.wbrels,-1,"theme/theme1.xml",Aa.THEME),o="xl/styles."+r,wa(i,o,Tke(e,o,t)),s.styles.push(o),bn(t.wbrels,-1,"styles."+r,Aa.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",wa(i,o,e.vbaraw),s.vba.push(o),bn(t.wbrels,-1,"vbaProject.bin",Aa.VBA)),o="xl/metadata."+r,wa(i,o,Oke(o)),s.metadata.push(o),bn(t.wbrels,-1,"metadata."+r,Aa.XLMETA),wa(i,"[Content_Types].xml",pW(s,t)),wa(i,"_rels/.rels",g0(t.rels)),wa(i,"xl/_rels/workbook."+r+".rels",g0(t.wbrels)),delete t.revssf,delete t.ssf,i}function tEe(e,t){h0=1024,e&&!e.SSF&&(e.SSF=Wn(ra)),e&&e.SSF&&(jg(),GS(e.SSF),t.revssf=KS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,iy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=rG.indexOf(t.bookType)>-1,s=M4();X4(t=t||{});var i=j4(),o="",l=0;if(t.cellXfs=[],hp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",wa(i,o,gW(e.Props,t)),s.coreprops.push(o),bn(t.rels,2,o,Aa.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,wa(i,o,jW(e.Props)),s.extprops.push(o),bn(t.rels,3,o,Aa.EXT_PROPS),e.Custprops!==e.Props&&Es(e.Custprops||{}).length>0&&(o="docProps/custom.xml",wa(i,o,NW(e.Custprops)),s.custprops.push(o),bn(t.rels,4,o,Aa.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var h={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,wa(i,o,fG(l-1,t,e,h)),s.sheets.push(o),bn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Aa.WS[0])}if(f){var x=f["!comments"],g=!1,b="";if(x&&x.length>0){var y=!1;x.forEach(function(S){S[1].forEach(function(w){w.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+l+"."+r,wa(i,b,lwe(x,u,t)),s.threadedcomments.push(b),bn(h,-1,"../threadedComments/threadedComment"+l+"."+r,Aa.TCMNT)),b="xl/comments"+l+"."+r,wa(i,b,tG(x)),s.comments.push(b),bn(h,-1,"../comments"+l+"."+r,Aa.CMNT),g=!0}f["!legacy"]&&g&&wa(i,"xl/drawings/vmlDrawing"+l+".vml",eG(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&wa(i,Oy(o),g0(h))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,wa(i,o,VW(t.Strings,t)),s.strs.push(o),bn(t.wbrels,-1,"sharedStrings."+r,Aa.SST)),o="xl/workbook."+r,wa(i,o,gG(e)),s.workbooks.push(o),bn(t.rels,1,o,Aa.WB),o="xl/theme/theme1.xml",wa(i,o,$4(e.Themes,t)),s.themes.push(o),bn(t.wbrels,-1,"theme/theme1.xml",Aa.THEME),o="xl/styles."+r,wa(i,o,XW(e,t)),s.styles.push(o),bn(t.wbrels,-1,"styles."+r,Aa.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",wa(i,o,e.vbaraw),s.vba.push(o),bn(t.wbrels,-1,"vbaProject.bin",Aa.VBA)),o="xl/metadata."+r,wa(i,o,ZW()),s.metadata.push(o),bn(t.wbrels,-1,"metadata."+r,Aa.XLMETA),u.length>1&&(o="xl/persons/person.xml",wa(i,o,dwe(u)),s.people.push(o),bn(t.wbrels,-1,"persons/person.xml",Aa.PEOPLE)),wa(i,"[Content_Types].xml",pW(s,t)),wa(i,"_rels/.rels",g0(t.rels)),wa(i,"xl/_rels/workbook."+r+".rels",g0(t.wbrels)),delete t.revssf,delete t.ssf,i}function Q4(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=hc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function rEe(e,t){return Wr.find(e,"EncryptedPackage")?J_e(e,t):NG(e,t)}function aEe(e,t){var r,a=e,s=t||{};return s.type||(s.type=_a&&Buffer.isBuffer(e)?"buffer":"base64"),r=zH(a,s),Q_e(r,s)}function AG(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return n3(e.slice(r),t);default:break e}return H0.to_workbook(e,t)}function nEe(e,t){var r="",a=Q4(e,t);switch(t.type){case"base64":r=hc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Mx(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=_n(r)),t.type="binary",AG(r,t)}function sEe(e,t){var r=e;return t.type=="base64"&&(r=hc(r)),r=Ey.utils.decode(1200,r.slice(2),"str"),t.type="binary",AG(r,t)}function iEe(e){return e.match(/[^\x00-\x7F]/)?Bu(e):e}function $E(e,t,r,a){return a?(r.type="string",H0.to_workbook(e,r)):H0.to_workbook(t,r)}function o3(e,t){x4();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return o3(new Uint8Array(e),(r=Wn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),y0={},r.dateNF&&(y0.dateNF=r.dateNF),r.type||(r.type=_a&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=_a?"buffer":"binary",a=ebe(e),typeof Uint8Array<"u"&&!_a&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=iEe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Wn(r),r.type="array",o3(v4(a),r)}switch((s=Q4(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return rEe(Wr.read(a,r),r);break;case 9:if(s[1]<=8)return NG(a,r);break;case 60:return n3(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return uje(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return UW.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?aEe(a,r):$E(e,a,r,i);case 239:return s[3]===60?n3(a,r):$E(e,a,r,i);case 255:if(s[1]===254)return sEe(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return jx.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return jx.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return a3.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return GW.to_workbook(a,r);break;case 10:case 13:case 32:return nEe(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return dje.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?a3.to_workbook(a,r):$E(e,a,r,i)}function TG(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return j1(t.file,Wr.write(e,{type:_a?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Wr.write(e,t)}function oEe(e,t){var r=Wn(t||{}),a=Z_e(e,r);return lEe(a,r)}function lEe(e,t){var r={},a=_a?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Wr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(WS(s))}return t.password&&typeof encrypt_agile<"u"?TG(encrypt_agile(s,t.password),t):t.type==="file"?j1(t.file,s):t.type=="string"?_n(s):s}function cEe(e,t){var r=t||{},a=i_e(e,r);return TG(a,r)}function ku(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return Dy(Bu(a));case"binary":return Bu(a);case"string":return e;case"file":return j1(t.file,a,"utf8");case"buffer":return _a?yf(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ku(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function dEe(e,t){switch(t.type){case"base64":return Dy(e);case"binary":return e;case"string":return e;case"file":return j1(t.file,e,"binary");case"buffer":return _a?yf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function pN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?Dy(r):t.type=="string"?_n(r):r;case"file":return j1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function IG(e,t){x4(),rke(e);var r=Wn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=IG(e,r);return r.type="array",WS(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ku(Zke(e,r),r);case"slk":case"sylk":return ku(BW.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ku(SG(e.Sheets[e.SheetNames[s]],r),r);case"txt":return dEe(PG(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ku(J4(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ku(UW.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return pN(a3.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ku(H0.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ku(GW.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ku($W.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ku(EG(e,r),r);case"wk1":return pN(jx.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return pN(jx.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),pN(wG(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),cEe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return oEe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function uEe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function sh(e,t,r){var a={};return a.type="file",a.file=t,uEe(a),IG(e,a)}function hEe(e,t,r,a,s,i,o,l){var c=Hs(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var x=o?e[r][p]:e[a[p]+c];if(x===void 0||x.t===void 0){if(d===void 0)continue;i[p]!=null&&(f[i[p]]=d);continue}var g=x.v;switch(x.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[p]!=null){if(g==null)if(x.t=="e"&&g===null)f[i[p]]=null;else if(d!==void 0)f[i[p]]=d;else if(u&&g===null)f[i[p]]=null;else continue;else f[i[p]]=u&&(x.t!=="n"||x.t==="n"&&l.rawNumbers!==!1)?g:hf(x,g,l);g!=null&&(h=!1)}}return{row:f,isempty:h}}function h2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=Ya(u);break;case"number":c=Ya(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(s=0);var h=Hs(c.s.r),f=[],p=[],x=0,g=0,b=Array.isArray(e),y=c.s.r,S=0,w={};b&&!e[y]&&(e[y]=[]);var k=d.skipHidden&&e["!cols"]||[],C=d.skipHidden&&e["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(k[S]||{}).hidden)switch(f[S]=hs(S),r=b?e[y][S]:e[f[S]+h],a){case 1:i[S]=S-c.s.c;break;case 2:i[S]=f[S];break;case 3:i[S]=d.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=hf(r,null,d),g=w[o]||0,!g)w[o]=1;else{do l=o+"_"+g++;while(w[l]);w[o]=g,w[l]=1}i[S]=l}for(y=c.s.r+s;y<=c.e.r;++y)if(!(C[y]||{}).hidden){var D=hEe(e,c,y,f,a,i,b,d);(D.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(p[x++]=D.row)}return p.length=x,p}var mB=/"/g;function fEe(e,t,r,a,s,i,o,l){for(var c=!0,d=[],u="",h=Hs(r),f=t.s.c;f<=t.e.c;++f)if(a[f]){var p=l.dense?(e[r]||[])[f]:e[a[f]+h];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:hf(p,null,l));for(var x=0,g=0;x!==u.length;++x)if((g=u.charCodeAt(x))===s||g===i||g===34||l.forceQuotes){u='"'+u.replace(mB,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(mB,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function J4(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=Ya(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];a.dense=Array.isArray(e);for(var f=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(f[x]||{}).hidden||(h[x]=hs(x));for(var g=0,b=s.s.r;b<=s.e.r;++b)(p[b]||{}).hidden||(u=fEe(e,s,b,h,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((g++?l:"")+u)));return delete a.dense,r.join("")}function PG(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=J4(e,t);return r}function mEe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=Ya(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=hs(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=Hs(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function OG(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?fs(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var h=Ya(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var f=a.header||[],p=0;t.forEach(function(g,b){Es(g).forEach(function(y){(p=f.indexOf(y))==-1&&(f[p=f.length]=y);var S=g[y],w="z",k="",C=sa({c:l+p,r:o+b+s});d=$y(i,C),S&&typeof S=="object"&&!(S instanceof Date)?i[C]=S:(typeof S=="number"?w="n":typeof S=="boolean"?w="b":typeof S=="string"?w="s":S instanceof Date?(w="d",a.cellDates||(w="n",S=bi(S)),k=a.dateNF||ra[14]):S===null&&a.nullError&&(w="e",S=0),d?(d.t=w,d.v=S,delete d.w,delete d.R,k&&(d.z=k)):i[C]=d={t:w,v:S},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+f.length-1);var x=Hs(o);if(s)for(p=0;p<f.length;++p)i[hs(p+l)+x]={t:"s",v:f[p]};return i["!ref"]=ba(u),i}function pEe(e,t){return OG(null,e,t)}function $y(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=fs(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?$y(e,sa(t)):$y(e,sa({r:t,c:r||0}))}function xEe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Z4(){return{SheetNames:[],Sheets:{}}}function eI(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(vG(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function vEe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=xEe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function gEe(e,t){return e.z=t,e}function MG(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function bEe(e,t,r){return MG(e,"#"+t,r)}function yEe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function jEe(e,t,r,a){for(var s=typeof t!="string"?t:Ya(t),i=typeof t=="string"?t:ba(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=$y(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var on={encode_col:hs,encode_row:Hs,encode_cell:sa,encode_range:ba,decode_col:D4,decode_row:E4,split_cell:Ibe,decode_cell:fs,decode_range:wl,format_cell:hf,sheet_add_aoa:lW,sheet_add_json:OG,sheet_add_dom:CG,aoa_to_sheet:Ng,json_to_sheet:pEe,table_to_sheet:kG,table_to_book:E_e,sheet_to_csv:J4,sheet_to_txt:PG,sheet_to_json:h2,sheet_to_html:SG,sheet_to_formulae:mEe,sheet_to_row_object_array:h2,sheet_get_cell:$y,book_new:Z4,book_append_sheet:eI,book_set_sheet_visibility:vEe,cell_set_number_format:gEe,cell_set_hyperlink:MG,cell_set_internal_link:bEe,cell_add_comment:yEe,sheet_set_array_formula:jEe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const wf=({show:e,onClose:t,onImport:r,masterDataType:a,templateFields:s=[],apiEndpoint:i})=>{const[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState(!1),[f,p]=j.useState(0),[x,g]=j.useState([]),[b,y]=j.useState([]),[S,w]=j.useState(!1),[k,C]=j.useState(null),D=j.useRef(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("selectedFinancialYear");const E={material:{name:"Material Master",fields:["materialId","categoryName","description","baseUnit","orderUnit","conversionValue","dimension","hsn","mpn","minstock","safetyStock","maxstock","pdt","materialgroup","location"],sampleData:{materialId:"MAT001",categoryName:"Raw Materials",description:"Sample Raw Material Description",baseUnit:"KG",orderUnit:"KG",conversionValue:1,dimension:"10x10x10",hsn:"1234567890",mpn:"MPN001",minstock:10,safetyStock:5,maxstock:100,pdt:7,materialgroup:"RAW_MATERIAL",location:"WH01"}},customer:{name:"Customer Master",fields:["cnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","name","email","isDeleted","isBlocked"],sampleData:{cnNo:"CUST000001",categoryName:"Retail Customers",name1:"Sample Customer Pvt Ltd",name2:"Sample Customer",search:"SAMPLE_CUSTOMER",address1:"123, Business Street",address2:"Near Business Park",extraAddresses:"Alternative Address 1, Alternative Address 2",city:"Mumbai",pincode:"400001",region:"Maharashtra",country:"India",contactNo:"9876543210",name:"Contact Person Name",email:"customer@example.com",isDeleted:!1,isBlocked:!1}},vendor:{name:"Vendor Master",fields:["vnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","contactname","email","isDeleted","isBlocked"],sampleData:{vnNo:"VEND000001",categoryName:"Raw Material Suppliers",name1:"Sample Vendor Pvt Ltd",name2:"Sample Vendor",search:"SAMPLE_VENDOR",address1:"456, Supplier Avenue",address2:"Industrial Area",extraAddresses:"Warehouse Address 1, Backup Address 2",city:"Delhi",pincode:"110001",region:"Delhi",country:"India",contactNo:"9876543210",contactname:"Vendor Contact Person",email:"vendor@example.com",isDeleted:!1,isBlocked:!1}},customerPriceList:{name:"Customer Price List",fields:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup","taxCode","tandc"],sampleData:{categoryName:"Retail Customers",customerCode:"CUST000001",materialCode:"MAT001",unit:"KG",bum:250.75,orderUnit:"BOX",salesGroup:"RETAIL",taxCode:"GST1",tandc:"Payment terms: 30 days net. Delivery: FOB warehouse."}},vendorPriceList:{name:"Vendor Price List",fields:["categoryName","vendorCode","materialCode","unit","bum","orderUnit","buyer","taxCode"],sampleData:{categoryName:"Raw Material Suppliers",vendorCode:"VEND000001",materialCode:"MAT001",unit:"KG",bum:150.5,orderUnit:100,buyer:"John Doe",taxCode:"GST1"}},tax:{name:"Tax Master",fields:["taxCode","taxName","cgst","sgst","igst"],sampleData:{taxCode:"GST1",taxName:"GST Standard Rate 18%",cgst:"9",sgst:"9",igst:"18"}},location:{name:"Location Master",fields:["name","address","city","state","country","postalCode","contactPerson","contactNumber"],sampleData:{name:"Main Warehouse",address:"123, Industrial Area, Sector 5",city:"Bangalore",state:"Karnataka",country:"India",postalCode:"560001",contactPerson:"Warehouse Manager",contactNumber:"+91-9876543210"}},generalCondition:{name:"General Condition Master",fields:["name","description","isDeleted","isBlocked"],sampleData:{name:"Standard Terms and Conditions",description:"Default terms and conditions applicable to all transactions. Payment due within 30 days. Quality complaints must be reported within 48 hours.",isDeleted:!1,isBlocked:!1}},process:{name:"Process Master",fields:["processId","processDescription","isDeleted","isBlocked"],sampleData:{processId:"PROC001",processDescription:"Standard manufacturing process for raw material conversion. Includes quality checks at each stage.",isDeleted:!1,isBlocked:!1}}},A=()=>E[a]||E.material,I=J=>{const F=J.target.files[0];if(!F)return;if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/json"].includes(F.type)){alert("Please select a valid file format (CSV, Excel, or JSON)");return}l(F),g([]),C(null),L(F)},L=async J=>{h(!0),p(10);try{if(J.type==="application/json"){const F=await J.text(),X=JSON.parse(F);d(Array.isArray(X)?X:[X])}else if(J.type==="text/csv"){const X=(await J.text()).split(`
`),Q=X[0].split(",").map(M=>M.trim().replace(/"/g,"")),ie=X.slice(1).filter(M=>M.trim()).map(M=>{const V=[];let W="",ee=!1;for(let ne=0;ne<M.length;ne++){const ce=M[ne];ce==='"'&&(ne===0||M[ne-1]===",")?ee=!0:ce==='"'&&ee&&(ne===M.length-1||M[ne+1]===",")?ee=!1:ce===","&&!ee?(V.push(W.trim()),W=""):W+=ce}V.push(W.trim());const re={};return Q.forEach((ne,ce)=>{re[ne]=V[ce]||""}),re});d(ie)}else{const F=await J.arrayBuffer(),X=o3(F,{type:"buffer"}),Q=X.SheetNames[0],ie=X.Sheets[Q],M=on.sheet_to_json(ie);d(M)}p(50),P()}catch(F){console.error("Error parsing file:",F),g([{row:0,error:"Failed to parse file: "+F.message}])}finally{h(!1),p(100)}},P=()=>{const J=[],F=c.slice(0,5);c.forEach((X,Q)=>{({material:["materialId","categoryName","description","baseUnit","orderUnit"],customer:["cnNo","categoryName","name1","search","address1","contactNo","region","country"],vendor:["vnNo","categoryName","name1","search","address1","contactNo","region","country"],vendorPriceList:["categoryName","vendorCode","materialCode","unit","bum","orderUnit"],customerPriceList:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup"],tax:["taxCode","taxName","cgst","sgst","igst"],location:["name"],generalCondition:[],process:[]}[a]||[]).forEach(V=>{(!X[V]||X[V].toString().trim()==="")&&J.push({row:Q+1,field:V,error:`${V} is required`})}),a==="tax"&&(X.taxCode&&X.taxCode.length>4&&J.push({row:Q+1,field:"taxCode",error:"taxCode must be 4 characters or less"}),X.taxName&&X.taxName.length>25&&J.push({row:Q+1,field:"taxName",error:"taxName must be 25 characters or less"}),X.cgst&&X.cgst.length>2&&J.push({row:Q+1,field:"cgst",error:"cgst must be 2 characters or less"}),X.sgst&&X.sgst.length>2&&J.push({row:Q+1,field:"sgst",error:"sgst must be 2 characters or less"}),X.igst&&X.igst.length>2&&J.push({row:Q+1,field:"igst",error:"igst must be 2 characters or less"}))}),g(J),y(F)},O=J=>{const F=A(),X=[F.sampleData];if(J==="csv"){const Q=[F.fields.join(","),F.fields.map(W=>{const ee=F.sampleData[W]||"";return typeof ee=="string"&&ee.includes(",")?`"${ee}"`:ee}).join(",")].join(`
`),ie=new Blob([Q],{type:"text/csv"}),M=window.URL.createObjectURL(ie),V=document.createElement("a");V.href=M,V.download=`${F.name.replace(/\s+/g,"_")}_Template.csv`,V.click(),window.URL.revokeObjectURL(M)}else if(J==="excel"){const Q=on.json_to_sheet(X),ie=on.book_new();on.book_append_sheet(ie,Q,"Template"),sh(ie,`${F.name.replace(/\s+/g,"_")}_Template.xlsx`)}else if(J==="json"){const Q=JSON.stringify(X,null,2),ie=new Blob([Q],{type:"application/json"}),M=window.URL.createObjectURL(ie),V=document.createElement("a");V.href=M,V.download=`${F.name.replace(/\s+/g,"_")}_Template.json`,V.click(),window.URL.revokeObjectURL(M)}},Y=async()=>{if(x.length>0){alert("Please fix validation errors before importing");return}h(!0);try{const J=localStorage.getItem("selectedCompanyId"),F=localStorage.getItem("financialYear"),X=await fetch(`/api/master-data/${a}/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:c,companyId:J,financialYear:F})}),Q=await X.json();X.ok?(C(Q),r&&r(Q)):alert("Import failed: "+Q.message)}catch(J){console.error("Import error:",J),alert("Import failed: "+J.message)}finally{h(!1)}},q=()=>{l(null),d([]),g([]),y([]),w(!1),C(null),p(0),D.current&&(D.current.value="")},K=()=>{q(),t()};if(!e)return null;const U=A();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-upload me-2"}),"Import ",U.name]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:K})]}),n.jsx("div",{className:"modal-body",children:k?n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-success text-white",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-check-circle me-2"}),"Import Complete"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-success",children:k.results?.imported||0}),n.jsx("p",{className:"text-muted",children:"Records Imported"})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-warning",children:k.results?.updated||0}),n.jsx("p",{className:"text-muted",children:"Records Updated"})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-danger",children:k.results?.failed||0}),n.jsx("p",{className:"text-muted",children:"Records Failed"})]})})]}),k.results?.errors&&k.results.errors.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{children:"Error Details:"}),n.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:k.results.errors.map((J,F)=>n.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:n.jsx("small",{children:J})},F))})]}),n.jsx("div",{className:"mt-3 d-flex justify-content-end",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:K,children:"Close"})})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-download me-2"}),"Download Template"]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("p",{className:"text-muted",children:"Download the template in your preferred format and fill in your data:"}),n.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:()=>O("csv"),children:[n.jsx("i",{className:"fas fa-file-csv me-1"}),"CSV Template"]}),n.jsxs("button",{className:"btn btn-outline-info btn-sm",onClick:()=>O("excel"),children:[n.jsx("i",{className:"fas fa-file-excel me-1"}),"Excel Template"]}),n.jsxs("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>O("json"),children:[n.jsx("i",{className:"fas fa-file-code me-1"}),"JSON Template"]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("small",{className:"text-muted",children:[n.jsx("strong",{children:"Template Fields:"})," ",U.fields.join(", ")]})})]})]}),n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-upload me-2"}),"Upload File"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"mb-3 col-xl-6",children:[n.jsx("input",{ref:D,type:"file",className:"form-control form-control-sm",accept:".csv,.xlsx,.xls,.json",onChange:I}),n.jsx("div",{className:"form-text",children:"Supported formats: CSV, Excel (.xlsx, .xls), JSON"})]}),f>0&&f<100&&n.jsx("div",{className:"progress mb-3",children:n.jsxs("div",{className:"progress-bar",style:{width:`${f}%`},children:[f,"%"]})})]})]}),x.length>0&&n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header bg-danger text-white",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"Validation Errors (",x.length,")"]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:x.map((J,F)=>n.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:n.jsxs("small",{children:["Row ",J.row,": ",J.field&&`${J.field} - `,J.error]})},F))})})]}),b.length>0&&n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"fas fa-eye me-2"}),"Preview (First 5 records)"]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsx("tr",{children:U.fields.map(J=>n.jsx("th",{style:{minWidth:"120px"},children:J},J))})}),n.jsx("tbody",{children:b.map((J,F)=>n.jsx("tr",{children:U.fields.map(X=>n.jsx("td",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:J[X]!==void 0&&J[X]!==null?J[X].toString():"-"},X))},F))})]})})})]}),!k&&c.length>0&&n.jsx("div",{className:"d-flex justify-content-end",children:n.jsx("button",{type:"button",className:"btn btn-primary",onClick:Y,disabled:u||x.length>0,children:u?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fas fa-spinner fa-spin me-1"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fas fa-upload me-1"}),"Import Data (",c.length," records)"]})})})]})})]})})})]})},pB=["Piece","Box","Kg","Ltr"],NEe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",minstock:"",safetyStock:"",maxstock:"",pdt:"",mpn:"",location:"",materialgroup:"",hsn:""}),[f,p]=j.useState(""),[x,g]=j.useState(1),[b]=j.useState(10),[y,S]=j.useState(!1),[w,k]=j.useState(!1),[C,D]=j.useState(""),[E,A]=j.useState(""),[I,L]=j.useState(null);j.useEffect(()=>{P(),q()},[]),j.useEffect(()=>{if(!f)l(r);else{const je=r.filter(Me=>{const He=f.toLowerCase();return(Me.materialId||"").toLowerCase().includes(He)||(Me.description||"").toLowerCase().includes(He)||(Me.baseUnit||"").toLowerCase().includes(He)||(Me.orderUnit||"").toLowerCase().includes(He)||(Me.conversionValue||"").toString().toLowerCase().includes(He)||(Me.dimension||"").toLowerCase().includes(He)||(Me.mpn||"").toLowerCase().includes(He)||(Me.hsn||"").toLowerCase().includes(He)||(Me.location||"").toLowerCase().includes(He)||(Me.materialgroup||"").toLowerCase().includes(He)});l(je)}g(1)},[f,r]);const P=async()=>{const je=await Oe.get("/api/category",{params:{companyId:O,financialYear:Y}});t(je.data)},O=localStorage.getItem("selectedCompanyId"),Y=localStorage.getItem("financialYear"),q=async()=>{const je=await Oe.get("/api/material",{params:{companyId:O,financialYear:Y}});console.log(je);const Me=je.data.sort((He,et)=>new Date(et.createdAt)-new Date(He.createdAt));a(Me)},K=je=>{const{name:Me,value:He}=je.target;h(et=>({...et,[Me]:He}))},U=je=>{p(je.target.value)},J=je=>{d(je),h({categoryId:je.categoryId?._id||je.categoryId,description:je.description,baseUnit:je.baseUnit,orderUnit:je.orderUnit,conversionValue:je.conversionValue||"",dimension:je.dimension||"",mpn:je.mpn||"",location:je.location||"",materialgroup:je.materialgroup||"",hsn:je.hsn||"",minstock:je.minstock||"",safetyStock:je.safetyStock||"",maxstock:je.maxstock||"",pdt:je.pdt||""})},F=()=>{d(null),h({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",hsn:"",mpn:"",location:"",materialgroup:"",minstock:"",safetyStock:"",maxstock:"",pdt:""}),D(""),A(""),L(null)},X=async je=>{je.preventDefault();try{c?(await Oe.put(`/api/material/${c._id}`,u),alert("Material updated!"),q(),F(),W()):(L(u),S(!1),k(!0))}catch(Me){console.error(Me),alert("Operation failed!")}},Q=async()=>{try{let je;const Me=localStorage.getItem("selectedCompanyId"),He=localStorage.getItem("financialYear");C==="external"?je=E:je=(await Oe.post("/api/material/generate-id",{categoryId:I.categoryId})).data.materialId,await Oe.post("/api/material",{...I,materialId:je,materialIdType:C,companyId:Me,financialYear:He}),alert("Material added!"),q(),F(),W()}catch(je){console.error(je),alert("Operation failed!")}},ie=async(je,Me,He)=>{try{const et={[Me]:He};await Oe.put(`/api/material/status/${je}`,et),a(r.map(ft=>ft._id===je?{...ft,[Me]:He}:ft)),alert("Status updated successfully!")}catch(et){console.error("Error updating status:",et),alert("Failed to update status!")}},M=()=>{const je=o.map(At=>({"Material ID":At.materialId||"",Description:At.description||"","Base Unit":At.baseUnit||"","Order Unit":At.orderUnit||"","Conversion Value":At.conversionValue||"",Dimension:At.dimension||"",MPN:At.mpn||"",HSN:At.hsn||"","Min Stock":At.minstock||"","Safety Stock":At.safetyStock||"","Max Stock":At.maxstock||"",PDT:At.pdt||"",Location:At.location||"","Material Group":At.materialgroup||"","Is Deleted":At.isDeleted?"Yes":"No","Is Blocked":At.isBlocked?"Yes":"No","Created Date":At.createdAt?new Date(At.createdAt).toLocaleDateString():"","Updated Date":At.updatedAt?new Date(At.updatedAt).toLocaleDateString():""})),Me=on.book_new(),He=on.json_to_sheet(je),et=[{wch:15},{wch:30},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:15},{wch:12},{wch:15},{wch:12},{wch:10},{wch:20},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];He["!cols"]=et,on.book_append_sheet(Me,He,"Materials");const ft=new Date,Be=ft.toLocaleDateString("en-GB").replace(/\//g,"-"),dt=ft.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Tt=`Material-Master-${Be}-${dt}.xlsx`;sh(Me,Tt),ae()},V=()=>S(!0),W=()=>{S(!1),k(!1),L(null)},ee=()=>{k(!1),D(""),A(""),L(null),S(!0)},re=je=>{D(je),je==="internal"&&Q()},[ne,ce]=j.useState(!1),ae=()=>ce(!1),[Z,de]=j.useState([]);j.useEffect(()=>{(async()=>{try{const Me=await Oe.get("/api/locations",{params:{companyId:O}});de(Me.data)}catch(Me){console.error("Error fetching locations:",Me)}})()},[]);const z=x*b,se=z-b,Ne=o.slice(se,z),ue=Math.ceil(o.length/b),oe=je=>{g(je)},ye=je=>{console.log("Import successful:",je),q()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:f,onChange:U})]})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-info btn-sm me-2",onClick:()=>i(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:M,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsxs("a",{onClick:()=>{V(),F()},className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"New Material"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base"}),n.jsx("th",{children:"Order"}),n.jsx("th",{children:"Conversion"}),n.jsx("th",{children:"Dimension"}),n.jsx("th",{children:"MPN"}),n.jsx("th",{children:"HSN"}),n.jsx("th",{children:"Min Stock"}),n.jsx("th",{children:"safety Stock"}),n.jsx("th",{children:"Max Stock"}),n.jsx("th",{children:"PDT"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Delete"}),n.jsx("th",{children:"Block"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ne.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"16",className:"text-center",children:f?"No materials found matching your search":"No materials found"})}):Ne.map(je=>n.jsxs("tr",{children:[n.jsx("td",{children:je.materialId}),n.jsx("td",{className:"text-wrap",children:je.description}),n.jsx("td",{children:je.baseUnit}),n.jsx("td",{children:je.orderUnit}),n.jsx("td",{children:je.conversionValue||"-"}),n.jsx("td",{className:"text-wrap",children:je.dimension||"-"}),n.jsx("td",{children:je.mpn||"_"}),n.jsx("td",{children:je.hsn||"_"}),n.jsx("td",{children:je.minstock||"_"}),n.jsx("td",{children:je.safetyStock||"_"}),n.jsx("td",{children:je.maxstock||"_"}),n.jsx("td",{children:je.pdt||"_"}),n.jsx("td",{className:"text-wrap",children:je.location||"_"}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:je.isDeleted||!1,onChange:Me=>ie(je._id,"isDeleted",Me.target.checked)})})}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:je.isBlocked||!1,onChange:Me=>ie(je._id,"isBlocked",Me.target.checked)})})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${!je.isDeleted&&!je.isBlocked?"bg-success":je.isDeleted&&je.isBlocked?"bg-dark":je.isDeleted?"bg-secondary":"bg-danger"}`,children:!je.isDeleted&&!je.isBlocked?"Active":je.isDeleted&&je.isBlocked?"Deleted & Blocked":je.isDeleted?"Deleted":"Blocked"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{J(je),V()},children:"Edit"})})]},je._id))})]})})})]}),ue>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${x===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>oe(x-1),disabled:x===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Me=[],He=[];Me.push(1);for(let Be=Math.max(2,x-2);Be<=Math.min(ue-1,x+2);Be++)Me.push(Be);ue>1&&Me.push(ue);const et=[...new Set(Me)].sort((Be,dt)=>Be-dt);let ft;for(let Be of et)ft&&(Be-ft===2?He.push(ft+1):Be-ft!==1&&He.push("...")),He.push(Be),ft=Be;return He.map((Be,dt)=>Be==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${dt}`):n.jsx("li",{className:`page-item ${x===Be?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>oe(Be),children:Be})},Be))})(),n.jsx("li",{className:`page-item ${x===ue?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>oe(x+1),disabled:x===ue,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})})}),w&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Material ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Material ID:"}),C==="external"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-3 ",children:[n.jsx("label",{className:"form-label",children:"External Material ID"}),n.jsx("input",{type:"text",className:"form-control form-control-sm",value:E,onChange:je=>A(je.target.value),maxLength:50,required:!0,placeholder:"Enter custom material ID (max 50 characters)"}),n.jsxs("small",{className:"form-text text-muted",children:[E.length,"/50 characters"]})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-primary",onClick:Q,disabled:!E.trim(),children:"Create Material"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>D(""),children:"Back"})]})]}):n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>re("internal"),children:[n.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>re("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Custom ID)"]})})]})]})]})})})]}),y&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:c?"Edit Material":"Add New Material"}),n.jsx("button",{type:"button",className:"btn-close",onClick:W,"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:X,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",value:u.categoryId,onChange:K,className:"form-select",placeholder:"Select Category",required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),e.map(je=>n.jsx("option",{value:je._id,children:je.categoryName},je._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Description"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"description",value:u.description,onChange:K,className:"form-control",placeholder:"Enter Description",maxLength:100,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"HSN"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"hsn",value:u.hsn,onChange:K,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Base Unit"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"baseUnit",value:u.baseUnit,onChange:K,className:"form-select",required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),pB.map(je=>n.jsx("option",{value:je,children:je},je))]})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Order Unit"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"orderUnit",value:u.orderUnit,onChange:K,className:"form-select",required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),pB.map(je=>n.jsx("option",{value:je,children:je},je))]})})]})}),u.baseUnit&&u.orderUnit&&u.baseUnit!==u.orderUnit&&n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label text-primary",children:"Unit Conversion"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{name:"conversionValue",value:u.conversionValue,onChange:K,className:"form-control",required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Min Stock"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"minstock",value:u.minstock,onChange:je=>{je.target.value=Math.max(0,je.target.value),K(je)},className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Safety Stock"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"safetyStock",value:u.safetyStock,onChange:je=>{je.target.value=Math.max(0,je.target.value),K(je)},className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Max Stock"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"maxstock",value:u.maxstock,onChange:je=>{je.target.value=Math.max(0,je.target.value),K(je)},className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Material Group"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"materialgroup",value:u.materialgroup,onChange:K,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"MPN"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"mpn",value:u.mpn,onChange:K,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Packing"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"dimension",value:u.dimension,onChange:K,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Shipping Note"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{name:"pdt",type:"text",value:u.pdt,onChange:K,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label text-primary",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"location",value:u.location,onChange:K,className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"Select Location"}),Z.map(je=>n.jsx("option",{value:je.name,children:je.name},je.name))]})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:F,children:"Clear"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update Material":"Save Material"})]})]})})]})})})]}),n.jsx(wf,{show:s,onClose:()=>i(!1),onImport:ye,masterDataType:"material",apiEndpoint:"materials"})]})};function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ea.apply(null,arguments)}function wEe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function l3(e,t){return l3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},l3(e,t)}function SEe(){const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=j.useState(!1),[u,h]=j.useState(1),[f,p]=j.useState(10),[x,g]=j.useState(""),[b,y]=j.useState({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),S=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),P()},w=e.filter(U=>{if(!x)return!0;const J=x.toLowerCase(),F=!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked";return U.processId?.toLowerCase().includes(J)||U.processDescription?.toLowerCase().includes(J)||F.toLowerCase().includes(J)||(U.isDeleted?"yes deleted":"no active").includes(J)||(U.isBlocked?"yes blocked":"no active").includes(J)}),k=Math.ceil(w.length/f),C=(u-1)*f,D=C+f,E=w.slice(C,D),A=U=>{g(U.target.value),h(1)},I=U=>{h(U)},L=()=>{const J=(x?w:e).map((ne,ce)=>({"S.No":ce+1,"Process ID":ne.processId||"","Process Description":ne.processDescription||"","Is Deleted":ne.isDeleted?"Yes":"No","Is Blocked":ne.isBlocked?"Yes":"No",Status:!ne.isDeleted&&!ne.isBlocked?"Active":ne.isDeleted&&ne.isBlocked?"Deleted & Blocked":ne.isDeleted?"Deleted":"Blocked","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),F=on.book_new(),X=on.json_to_sheet(J),Q=[{wch:8},{wch:15},{wch:40},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];X["!cols"]=Q,on.book_append_sheet(F,X,"Process List Master");const ie=new Date,M=ie.toLocaleDateString("en-GB").replace(/\//g,"-"),V=ie.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`Process-List-Master${x?`-Filtered-${x.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;sh(F,ee);const re=x?w.length:e.length;alert(`Excel file exported successfully: ${re} records exported as ${ee}`)},P=async()=>{try{const U=await Oe.get("/api/processes",{params:{companyId:o,financialYear:l}});t(U.data),h(1)}catch(U){console.error("Fetch failed:",U),alert("Error loading processes")}},O=(U=null)=>{U?(y({processId:U.processId||"",processDescription:U.processDescription||"",isDeleted:U.isDeleted||!1,isBlocked:U.isBlocked||!1}),i(U)):(y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1}),i(null)),a(!0)},Y=async()=>{try{if(!b.processId.trim()){alert("Process ID is required");return}if(!b.processDescription.trim()){alert("Process Description is required");return}const U={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/processes/${s._id}`,U),alert("Process updated successfully!")):(await Oe.post("/api/processes",U),alert("Process added successfully!")),P(),a(!1),i(null)}catch(U){console.error("Save failed:",U),alert("Error saving process. Please try again.")}},q=async(U,J,F)=>{try{const X={[J]:F,companyId:o,financialYear:l};await Oe.put(`/api/processes/${U}`,X),alert(`Process ${J==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(X){console.error("Status update failed:",X),alert("Error updating status")}},K=()=>{a(!1),i(null),y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1})};return j.useEffect(()=>{P()},[]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Process List Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Process List Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by ID, description, or status...",value:x,onChange:A})]})}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:x?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",x&&n.jsx("span",{className:"badge bg-primary ms-1",children:w.length})]}),n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Process"]})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Process ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Is Deleted"}),n.jsx("th",{children:"Is Blocked"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center",children:x?"No processes found matching your search criteria":"No processes found"})}):E.map((U,J)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+J+1}),n.jsx("td",{children:n.jsx("strong",{children:U.processId})}),n.jsx("td",{className:"text-wrap",children:U.processDescription}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isDeleted||!1,onChange:F=>q(U._id,"isDeleted",F.target.checked)})}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isBlocked||!1,onChange:F=>q(U._id,"isBlocked",F.target.checked)})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${!U.isDeleted&&!U.isBlocked?"bg-success":U.isDeleted&&U.isBlocked?"bg-danger":U.isDeleted?"bg-warning":"bg-secondary"}`,children:!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),k>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsx("div",{className:"text-muted"}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&I(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(U,J)=>n.jsx("li",{className:`page-item ${u===J+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:F=>{F.preventDefault(),I(J+1)},children:J+1})},J)),n.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<k&&I(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:s?"Edit Process":"Add New Process"}),n.jsx("button",{type:"button",className:"btn-close",onClick:K,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"d-flex  align-items-center",children:[n.jsxs("div",{className:" col-md-2 row me-4",children:[n.jsx("label",{className:"form-label col-xl-7",children:"Process_ID"}),n.jsx("input",{type:"text",className:" col-xl-5  form-control-sm",placeholder:"Enter Process ID",value:b.processId,onChange:U=>y({...b,processId:U.target.value}),required:!0})]}),n.jsxs("div",{className:"col-md-10 row",children:[n.jsx("label",{className:"form-label col-xl-2 mt-4",children:"Process Description"}),n.jsx("textarea",{type:"text",className:"form-control-sm col-xl-10",rows:"4",placeholder:"Enter Process Description",value:b.processDescription,onChange:U=>y({...b,processDescription:U.target.value}),required:!0})]})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check mb-2",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:U=>y({...b,isDeleted:U.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:U=>y({...b,isBlocked:U.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-secondary me-3",onClick:K,children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:Y,children:[s?"Update":"Save"," Process"]})]})]})})})]}),n.jsx(wf,{show:c,onClose:()=>d(!1),onImportSuccess:S,masterDataType:"process"})]})}function CEe(){const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=j.useState(!1),[u,h]=j.useState(1),[f,p]=j.useState(10),[x,g]=j.useState(""),[b,y]=j.useState({name:"",description:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),S=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),P()},w=e.filter(U=>{if(!x)return!0;const J=x.toLowerCase(),F=!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked";return U.name?.toLowerCase().includes(J)||U.description?.toLowerCase().includes(J)||F.toLowerCase().includes(J)||(U.isDeleted?"yes deleted":"no active").includes(J)||(U.isBlocked?"yes blocked":"no active").includes(J)}),k=Math.ceil(w.length/f),C=(u-1)*f,D=C+f,E=w.slice(C,D),A=U=>{g(U.target.value),h(1)},I=U=>{h(U)},L=()=>{const J=(x?w:e).map((ne,ce)=>({"S.No":ce+1,"Condition Name":ne.name||"",Description:ne.description||"","Is Deleted":ne.isDeleted?"Yes":"No","Is Blocked":ne.isBlocked?"Yes":"No",Status:!ne.isDeleted&&!ne.isBlocked?"Active":ne.isDeleted&&ne.isBlocked?"Deleted & Blocked":ne.isDeleted?"Deleted":"Blocked","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),F=on.book_new(),X=on.json_to_sheet(J),Q=[{wch:8},{wch:25},{wch:50},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];X["!cols"]=Q,on.book_append_sheet(F,X,"General Condition Master");const ie=new Date,M=ie.toLocaleDateString("en-GB").replace(/\//g,"-"),V=ie.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`General-Condition-Master${x?`-Filtered-${x.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;sh(F,ee);const re=x?w.length:e.length;alert(`Excel file exported successfully: ${re} records exported as ${ee}`)},P=async()=>{try{const U=await Oe.get("/api/general-conditions",{params:{companyId:o,financialYear:l}});t(U.data),h(1)}catch(U){console.error("Failed to fetch:",U),alert("Error loading general conditions")}},O=(U=null)=>{U?(y({name:U.name||"",description:U.description||"",isDeleted:U.isDeleted||!1,isBlocked:U.isBlocked||!1}),i(U)):(y({name:"",description:"",isDeleted:!1,isBlocked:!1}),i(null)),a(!0)},Y=async()=>{try{if(!b.name.trim()){alert("Condition name is required");return}if(!b.description.trim()){alert("Description is required");return}const U={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/general-conditions/${s._id}`,U),alert("General condition updated successfully!")):(await Oe.post("/api/general-conditions",U),alert("General condition added successfully!")),P(),a(!1),i(null)}catch(U){console.error("Save failed:",U),alert("Error saving general condition. Please try again.")}},q=async(U,J,F)=>{try{const X={[J]:F,companyId:o,financialYear:l};await Oe.put(`/api/general-conditions/${U}`,X),alert(`General condition ${J==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(X){console.error("Status update failed:",X),alert("Error updating status")}},K=()=>{a(!1),i(null),y({name:"",description:"",isDeleted:!1,isBlocked:!1})};return j.useEffect(()=>{P()},[]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"General Condition Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"General Condition Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, description, or status...",value:x,onChange:A})]})}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:x?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",x&&n.jsx("span",{className:"badge bg-primary ms-1",children:w.length})]}),n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add General Condition"]})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Condition Name"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Deleted"}),n.jsx("th",{children:"Blocked"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center",children:x?"No general conditions found matching your search criteria":"No general conditions found"})}):E.map((U,J)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+J+1}),n.jsx("td",{children:n.jsx("strong",{children:U.name})}),n.jsx("td",{className:"text-wrap",children:U.description}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isDeleted||!1,onChange:F=>q(U._id,"isDeleted",F.target.checked)})}),n.jsx("td",{className:"text-center",children:n.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isBlocked||!1,onChange:F=>q(U._id,"isBlocked",F.target.checked)})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${!U.isDeleted&&!U.isBlocked?"bg-success":U.isDeleted&&U.isBlocked?"bg-danger":U.isDeleted?"bg-warning":"bg-secondary"}`,children:!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),k>1&&n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&I(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(U,J)=>n.jsx("li",{className:`page-item ${u===J+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:F=>{F.preventDefault(),I(J+1)},children:J+1})},J)),n.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<k&&I(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," General Condition"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:K,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:" row input-group",children:[n.jsx("label",{className:" form-label col-xl-6",children:"Condition Name"}),n.jsx("input",{type:"text",className:"form-control col-xl-6",placeholder:"Enter General Condition Name",value:b.name,onChange:U=>y({...b,name:U.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-9",children:n.jsxs("div",{className:" row input-group",children:[n.jsx("label",{className:"form-label col-xl-2",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",placeholder:"Enter Description",value:b.description,onChange:U=>y({...b,description:U.target.value}),required:!0})]})})]}),n.jsxs("div",{className:"row ",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check mb-2",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:U=>y({...b,isDeleted:U.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:U=>y({...b,isBlocked:U.target.checked})}),n.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"me-3 btn btn-secondary",onClick:K,children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:Y,children:[s?"Update":"Save"," Condition"]})]})]})})})]}),n.jsx(wf,{show:c,onClose:()=>d(!1),onImportSuccess:S,masterDataType:"generalCondition"})]})}const xB=["Piece","Box","Kg","Ltr"],kEe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState(""),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState(new Date().toISOString().split("T")[0]),[S,w]=j.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}]),[k,C]=j.useState(!1),[D,E]=j.useState(""),[A,I]=j.useState([]),[L,P]=j.useState("materialId"),[O,Y]=j.useState(null),[q,K]=j.useState(!1),[U,J]=j.useState([]),[F,X]=j.useState(""),[Q,ie]=j.useState(""),[M,V]=j.useState(1),[W]=j.useState(5),[ee,re]=j.useState(1),[ne]=j.useState(3),ce="MMNR-",ae=localStorage.getItem("selectedCompanyId"),Z=localStorage.getItem("financialYear");j.useEffect(()=>{Oe.get("/api/material",{params:{companyId:ae}}).then(De=>{const Ke=De.data.filter(Nt=>!Nt.isDeleted&&!Nt.isBlocked);t(Ke),console.log("Fetched materials:",Ke)}).catch(De=>console.error(De)),Oe.get("/api/locations").then(De=>J(De.data))},[]),j.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:ae,financialYear:Z}}).then(De=>d(De.data)).catch(De=>console.error(De))},[]);const de=()=>{w(De=>[...De,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}])},z=De=>{w(Nt=>Nt.filter((Je,Qe)=>Qe!==De));const Ke=Math.ceil((S.length-1)/W);M>Ke&&Ke>0&&V(Ke)},se=async(De,Ke,Nt)=>{const Je=[...S];if(Je[De][Ke]=Nt,Ke==="materialId"&&Je[De].isManual)try{const Ue=(await Oe.get(`/api/material/byId/${Nt}`)).data;Ue&&(Je[De]={...Je[De],materialId:Ue.materialId,description:Ue.description,baseUnit:Ue.baseUnit,orderUnit:Ue.orderUnit,location:Ue.location,materialgroup:Ue.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",Nt)}w(Je)},Ne=()=>{if(!D.trim()){I([]);return}if(L==="materialId"){let De=D;/^\d+$/.test(D)&&(De=ce+D);const Ke=e.filter(Nt=>(Nt.materialId||"").toLowerCase().includes(De.toLowerCase()));I(Ke)}else{const De=e.filter(Ke=>(Ke.description||"").toLowerCase().includes(D.toLowerCase()));I(De)}};j.useEffect(()=>{const De=setTimeout(()=>{D.trim()?Ne():I([])},300);return()=>clearTimeout(De)},[D,L,e]);const ue=De=>{const Ke=De.target.value;E(Ke)},oe=()=>{I(e),E("")},ye=()=>{I([]),E("")},je=De=>{Y(De),C(!0),E(""),I([])},Me=()=>{C(!1),Y(null),E(""),I([])},He=De=>{if(O!==null){const Ke=[...S];Ke[O]={...Ke[O],materialId:De.materialId,description:De.description,baseUnit:De.baseUnit,orderUnit:De.orderUnit,location:De.location,materialgroup:De.materialgroup,isManual:!0},w(Ke)}Me()},[et,ft]=j.useState([]);j.useEffect(()=>{Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(De=>ft(De.data)).catch(De=>console.error("Failed to fetch saved indents",De))},[]);const Be=async()=>{if(!u){alert("Please select a purchase category");return}if(!f||!x){alert("Please fill in Location and Buyer Group");return}const De=S.filter(Qe=>Qe.materialId&&Qe.materialId.trim()!==""&&Qe.description&&Qe.description.trim()!==""&&Qe.qty&&Qe.qty>0);if(De.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const Ke=c.find(Qe=>Qe.name===u||Qe.categoryName===u||Qe._id===u),Nt=localStorage.getItem("selectedCompanyId"),Je=localStorage.getItem("financialYear");try{const Qe={indentIdType:F,externalIndentId:Q,categoryId:Ke._id,categoryName:Ke.name||Ke.categoryName,location:f,buyerGroup:x,documentDate:b,items:De,companyId:Nt,financialYear:Je};if(F==="")l(Qe),a(!1),K(!0);else{if(F==="internal"){const Ue=await Oe.post("/api/indent/create",Qe);alert(`Indent saved successfully with ID: ${Ue.data.indentId}`)}else if(F==="external"){if(!Q||Q.trim()===""){alert("Please enter an External Indent ID");return}Qe.indentId=Q;const Ue=await Oe.post("/api/indent/create",Qe);alert(`Indent saved successfully with External ID: ${Ue.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);K(!1),w([]),p(""),g(""),y(new Date().toISOString().split("T")[0]),V(1)}Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Ue=>ft(Ue.data)).catch(Ue=>console.error("Failed to fetch saved indents",Ue))}catch(Qe){console.error(Qe),alert("Failed to save indent")}},dt=M*W,Tt=dt-W,At=S.slice(Tt,dt),qt=Math.ceil(S.length/W),xe=De=>V(De),he=({currentPage:De,totalPages:Ke,onPageChange:Nt,size:Je="normal"})=>{if(Ke<=1)return null;const Qe=[],Ue=5;let qe=Math.max(1,De-Math.floor(Ue/2)),mt=Math.min(Ke,qe+Ue-1);mt-qe+1<Ue&&(qe=Math.max(1,mt-Ue+1));for(let Xe=qe;Xe<=mt;Xe++)Qe.push(Xe);const Ie=Je==="small"?"btn-sm":"";return n.jsx("nav",{"aria-label":"Page navigation mt-2",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${De===1?"disabled":""}`,children:n.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(De-1),disabled:De===1,children:"Previous"})}),qe>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(1),children:"1"})}),qe>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${Ie}`,children:"..."})})]}),Qe.map(Xe=>n.jsx("li",{className:`page-item ${De===Xe?"active":""}`,children:n.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(Xe),children:Xe})},Xe)),mt<Ke&&n.jsxs(n.Fragment,{children:[mt<Ke-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${Ie}`,children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(Ke),children:Ke})})]}),n.jsx("li",{className:`page-item ${De===Ke?"disabled":""}`,children:n.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(De+1),disabled:De===Ke,children:"Next"})})]})})},ve=()=>{K(!1),X(""),ie(""),l(null),a(!0)},pe=De=>{X(De),Be()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto mb-2",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Enquiry"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Enquiry"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-6",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Purchase Category",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-6",children:n.jsxs("select",{className:"form-select form-select-sm",value:u,onChange:De=>h(De.target.value),children:[n.jsx("option",{value:"",children:"-- Select Category --"}),c.map((De,Ke)=>n.jsx("option",{value:De.name||De.categoryName||De._id,children:De.name||De.categoryName||`Category ${Ke+1}`},Ke))]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Doc Date",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:De=>y(De.target.value)})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Location",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:De=>p(De.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),U.map((De,Ke)=>n.jsx("option",{value:De.name||De._id,children:De.name||De._id},Ke))]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsxs("label",{className:"form-label-sm mb-0",children:["Buyer Group",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:De=>g(De.target.value),placeholder:"Buyer Group"})})]})})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"}),n.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",S.length,")"]})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body ",children:[S.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:n.jsxs("table",{className:" table-bordered table-sm mb-0",children:[n.jsx("thead",{className:" sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.No"}),n.jsx("th",{children:"Material No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:At.map((De,Ke)=>{const Nt=Tt+Ke;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center fw-bold",children:Nt+1}),n.jsx("td",{children:De.isManual?n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm w-50",value:De.materialId,onChange:Je=>se(Nt,"materialId",Je.target.value),placeholder:"Material ID"}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>je(Nt),title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]}):n.jsx("span",{className:"badge ",children:De.materialId})}),n.jsx("td",{children:De.isManual?n.jsx("input",{className:"form-control form-control-sm",value:De.description,onChange:Je=>se(Nt,"description",Je.target.value),placeholder:"Description",readOnly:!!De.materialId}):n.jsx("span",{title:De.description,children:De.description})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:De.qty,onChange:Je=>se(Nt,"qty",Je.target.value),min:"1"})}),n.jsx("td",{children:n.jsxs("select",{value:De.baseUnit,onChange:Je=>se(Nt,"baseUnit",Je.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),xB.map(Je=>n.jsx("option",{value:Je,children:Je},Je))]})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:De.deliveryDate,onChange:Je=>se(Nt,"deliveryDate",Je.target.value)})}),n.jsx("td",{children:n.jsxs("select",{value:De.orderUnit,onChange:Je=>se(Nt,"orderUnit",Je.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),xB.map(Je=>n.jsx("option",{value:Je,children:Je},Je))]})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:De.materialgroup||"-"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>z(Nt),title:"Delete Item",children:n.jsx("i",{className:"fas fa-trash"})})})]},Nt)})})]})}),n.jsx(he,{currentPage:M,totalPages:qt,onPageChange:xe,size:"small"})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]}),"   ",n.jsx("div",{className:"col-xl-2",children:n.jsxs("button",{onClick:de,className:"btn btn-outline-primary btn-sm me-2 mt-2",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})})]})]}),n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-md-6 col-xl-2 col-sm-12",children:n.jsxs("button",{onClick:Be,className:"btn btn-success btn-sm",disabled:!u||S.length===0,children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]})})}),k&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Me})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select form-select-sm",value:L,onChange:De=>P(De.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:L==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:D,onChange:ue})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info btn-sm",onClick:oe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),A.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:ye,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:A.length>0?n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:A.map((De,Ke)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{children:De.materialId})}),n.jsx("td",{children:De.description}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:De.baseUnit})}),n.jsx("td",{children:De.location}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:De.materialgroup})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>He(De),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":D?`No materials found matching "${D}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Me,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),q&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ve,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>pe("internal"),children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>X("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),F==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"External Indent ID"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Indent ID (max 50 characters)",value:Q,onChange:De=>ie(De.target.value),onKeyPress:De=>{De.key==="Enter"&&Q.trim()&&Be()},maxLength:50}),n.jsxs("div",{className:"form-text",children:[Q.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"btn btn-primary",onClick:Be,disabled:!Q.trim(),children:"Create Indent"})})]})]})]})})})]})]})},_Ee=()=>{const[e,t]=j.useState(1),[r]=j.useState(10),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(""),[d,u]=j.useState("indentId"),[h,f]=j.useState(!1),[p,x]=j.useState(!1),[g,b]=j.useState([]),[y]=j.useState(10),[S,w]=j.useState(null),[k,C]=j.useState(null);j.useEffect(()=>{D()},[]),j.useEffect(()=>{const ne=a.find(ce=>ce._id===S);C(ne)},[S,a]);const D=()=>{f(!0);const ne=localStorage.getItem("selectedCompanyId"),ce=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:ne,financialYear:ce}}).then(ae=>{const Z=ae.data.sort((de,z)=>new Date(z.createdAt||z.documentDate)-new Date(de.createdAt||de.documentDate));s(Z),console.log("Fetched saved indents:",Z),o(Z)}).catch(ae=>console.error("Failed to fetch saved indents",ae)).finally(()=>f(!1))},E=async(ne,ce,ae)=>{try{const Z={[ce]:ae};await Oe.put(`/api/indent/status/${ne}`,Z);const de=z=>z.map(se=>se._id===ne?{...se,[ce]:ae}:se);s(de),o(z=>de(z)),alert("Status updated successfully!")}catch(Z){console.error("Error updating status:",Z),alert("Failed to update status!")}},A=()=>{x(!0),b(a)},I=()=>{x(!1),c(""),b([])},L=ne=>{const ce=ne.target.value;if(c(ce),ce.trim()===""){b(a);return}const ae=a.filter(Z=>{if(d==="indentId"){const de=ce.toLowerCase(),z=Z.indentId.toLowerCase();return z.includes(de)||z.replace(/[^0-9]/g,"").includes(de.replace(/[^0-9]/g,""))}else{if(d==="location")return Z.location.toLowerCase().includes(ce.toLowerCase());if(d==="buyerGroup")return Z.buyerGroup.toLowerCase().includes(ce.toLowerCase());if(d==="categoryName")return Z.categoryName.toLowerCase().includes(ce.toLowerCase())}return!1});b(ae)},P=()=>{b(a),c("")},O=()=>{b([]),c("")},Y=ne=>{o([ne]),t(1),I()},q=()=>{o(a),t(1)},K=ne=>{const ce=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${ne.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(ne.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${ne.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${ne.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${ne.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${ne.items.map((Z,de)=>`
                                <tr style="${de%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${de+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${Z.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${Z.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${Z.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${Z.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${Z.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${Z.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${Z.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ae=window.open("","","width=900,height=700");ae.document.write("<html><head><title>Indent Print - "+ne.indentId+"</title></head><body>"),ae.document.write(ce),ae.document.write("</body></html>"),ae.document.close(),ae.print()},U=e*r,J=U-r,F=i.slice(J,U),X=Math.ceil(i.length/r),Q=ne=>t(ne),ie=({currentPage:ne,totalPages:ce,onPageChange:ae})=>{if(ce<=1)return null;const Z=[],de=5;let z=Math.max(1,ne-Math.floor(de/2)),se=Math.min(ce,z+de-1);se-z+1<de&&(z=Math.max(1,se-de+1));for(let Ne=z;Ne<=se;Ne++)Z.push(Ne);return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(ne-1),disabled:ne===1,children:"Previous"})}),z>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ae(1),children:"1"})}),z>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})})]}),Z.map(Ne=>n.jsx("li",{className:`page-item ${ne===Ne?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(Ne),children:Ne})},Ne)),se<ce&&n.jsxs(n.Fragment,{children:[se<ce-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ae(ce),children:ce})})]}),n.jsx("li",{className:`page-item ${ne===ce?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(ne+1),disabled:ne===ce,children:"Next"})})]})})},M=e*y,V=M-y,W=g.slice(V,M);Math.ceil(g.length/y);const ee=ne=>t(ne),re=({currentPage:ne,totalPages:ce,onPageChange:ae})=>{if(ce<=1)return null;const Z=[],de=5;let z=Math.max(1,ne-Math.floor(de/2)),se=Math.min(ce,z+de-1);se-z+1<de&&(z=Math.max(1,se-de+1));for(let Ne=z;Ne<=se;Ne++)Z.push(Ne);return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(ne-1),disabled:ne===1,children:"Previous"})}),z>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ae(1),children:"1"})}),z>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})})]}),Z.map(Ne=>n.jsx("li",{className:`page-item ${ne===Ne?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(Ne),children:Ne})},Ne)),se<ce&&n.jsxs(n.Fragment,{children:[se<ce-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ae(ce),children:ce})})]}),n.jsx("li",{className:`page-item ${ne===ce?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(ne+1),disabled:ne===ce,children:"Next"})})]})})};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Indent List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Indent List"})]})})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-outline-dark btn-sm",onClick:A,children:[n.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:q,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:h?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):F.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover table-bordered table-sm align-middle",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"60px"},children:"S.No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{style:{width:"100px"},children:"Materials"}),n.jsx("th",{children:"Delete Status"}),n.jsx("th",{children:"Block Status"}),n.jsx("th",{style:{width:"100px"},children:"Action"})]})}),n.jsx("tbody",{children:F.map((ne,ce)=>{const ae=J+ce;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center",children:ae+1}),n.jsx("td",{children:ne.indentId}),n.jsx("td",{children:(()=>{const Z=new Date(ne.documentDate),de=String(Z.getDate()).padStart(2,"0"),z=String(Z.getMonth()+1).padStart(2,"0"),se=Z.getFullYear();return`${de}/${z}/${se}`})()}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ne.location]}),n.jsx("td",{children:ne.buyerGroup}),n.jsx("td",{children:ne.categoryName}),n.jsxs("td",{className:"text-center",children:[ne.items.length," items"]}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:ne.isDeleted||!1,onChange:Z=>E(ne._id,"isDeleted",Z.target.checked)}),n.jsx("label",{className:"form-check-label",children:ne.isDeleted?"Deleted":"Active"})]})}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:ne.isBlocked||!1,onChange:Z=>E(ne._id,"isBlocked",Z.target.checked)}),n.jsx("label",{className:"form-check-label",children:ne.isBlocked?"Blocked":"Active"})]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>K(ne),title:"Print Indent",children:n.jsx("i",{className:"fas fa-print"})}),n.jsx("button",{type:"button",onClick:()=>w(ne._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:n.jsx("i",{className:"ti ti-eye"})})]})]},ne._id)})})]})}),X>1&&n.jsx("div",{className:"d-flex justify-content-center mt-4",children:n.jsx(ie,{currentPage:e,totalPages:X,onPageChange:Q})})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("h5",{className:"text-muted",children:i.length!==a.length?"Filtered results":"No indents available"}),n.jsx("p",{className:"text-muted",children:i.length!==a.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:q,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:I})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:d,onChange:ne=>u(ne.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"location",children:"Location"}),n.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:L})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:P,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:O,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{children:W.length>0?n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Materials"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:W.map((ne,ce)=>n.jsxs("tr",{children:[n.jsx("td",{children:ce+1}),n.jsx("td",{children:ne.indentId}),n.jsx("td",{children:new Date(ne.documentDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ne.location]}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:ne.buyerGroup})}),n.jsx("td",{children:ne.categoryName}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-warning text-dark",children:[ne.items.length," items"]})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Y(ne),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ce))}),X>1&&n.jsx("tfoot",{children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:n.jsx("div",{className:"d-flex justify-content-center",children:n.jsx(re,{currentPage:e,totalPages:X,onPageChange:ee})})})})})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:a.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:I,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"table-responsive",children:k?.items?.length>0&&n.jsxs("table",{className:"table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Delivery Date"})]})}),n.jsx("tbody",{children:k?.items.map((ne,ce)=>n.jsxs("tr",{children:[n.jsx("td",{children:ce+1}),n.jsx("td",{children:ne.materialId}),n.jsx("td",{children:ne.description}),n.jsx("td",{children:ne.qty}),n.jsx("td",{children:ne.baseUnit}),n.jsx("td",{children:ne.orderUnit}),n.jsx("td",{children:k.location}),n.jsx("td",{children:k.buyerGroup}),n.jsx("td",{children:new Date(ne.deliveryDate).toLocaleDateString()})]},ne._id))})]})})})]})})})]})};function EEe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]);rh();const[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState(null),[x,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState([]),[A,I]=j.useState(""),[L,P]=j.useState(""),[O,Y]=j.useState(""),[q,K]=j.useState(!1),[U,J]=j.useState(null),[F,X]=j.useState(0),[Q,ie]=j.useState(!1),[M,V]=j.useState(!1),[W,ee]=j.useState(""),[re,ne]=j.useState(""),[ce,ae]=j.useState(""),[Z,de]=j.useState(""),[z,se]=j.useState(""),[Ne,ue]=j.useState(""),[oe,ye]=j.useState(null);console.log("cat",r),j.useEffect(()=>{if(z){const Qe=e.filter(Ue=>Ue.indentId.toLowerCase().includes(z.toLowerCase()));setFilteredIndents(Qe)}},[z]);const[je,Me]=j.useState([]);j.useEffect(()=>{const Qe=localStorage.getItem("selectedCompanyId"),Ue=localStorage.getItem("financialYear"),qe={params:{companyId:Qe,financialYear:Ue}};Oe.get("/api/indent/get",qe).then(mt=>{const Ie=mt.data.filter(Xe=>!Xe.isDeleted&&!Xe.isBlocked);t(Ie.map(Xe=>({label:`${Xe.indentId} (${Xe.categoryName})`,value:Xe}))),t(Ie.map(Xe=>({label:`${Xe.indentId} (${Xe.categoryName})`,value:Xe})))}),Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(mt=>{a(mt.data.map(Ie=>({label:`${Ie.categoryName}`,value:Ie._id})))}),Oe.get("/api/vendors",qe).then(mt=>{const Ie=mt.data.filter(Xe=>!Xe.isDeleted&&!Xe.isBlocked);i(Ie.map(Xe=>({label:`${Xe.name1} ${Xe.name2||""}`,value:Xe._id,vnNo:Xe.vnNo||""})))}),Oe.get("/api/locations",qe).then(mt=>{console.log("Locations API response:",mt.data),Array.isArray(mt.data)?Me(mt.data):mt.data&&Array.isArray(mt.data.locations)?Me(mt.data.locations):Me([])}).catch(mt=>{console.error("Failed to fetch locations:",mt),Me([])}),console.log("location",A),Oe.get("/api/material",qe).then(mt=>{console.log("Fetched materials:",mt.data);const Ie=mt.data.filter(Xe=>!Xe.isDeleted&&!Xe.isBlocked);l(Ie),console.log("Filtered materials:",Ie)}).catch(mt=>console.error("Failed to fetch materials:",mt))},[]);const He=Qe=>{h(Qe);const{buyerGroup:Ue,materialGroup:qe,deliveryDate:mt,location:Ie}=Qe.value;I(Ie||""),P(Ue||"");const Xe=Qe.value.items.map(Ye=>({...Ye,unit:Ye.unit||"",price:Ye.price||"",materialGroup:Ye.materialGroup||qe||"",deliveryDate:Ye.deliveryDate||mt||""}));E(Xe)},et=(Qe,Ue,qe)=>{const mt=[...D];mt[Qe][Ue]=qe,E(mt)},ft=Qe=>{console.log("Opening modal for item at index:",Qe),J(Qe),K(!0)},Be=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date().toISOString().slice(0,10),price:0}])},[dt,Tt]=j.useState(!1),[At,qt]=j.useState("internal"),[xe,he]=j.useState(""),ve=async Qe=>{Qe.preventDefault(),Tt(!0)};j.useEffect(()=>{const Qe=D.reduce((Ue,qe)=>{const mt=parseFloat(qe.price)||0,Ie=parseFloat(qe.qty)||0;return Ue+mt*Ie},0);X(Qe)},[D]);const pe=async()=>{const Qe=localStorage.getItem("selectedCompanyId"),Ue=localStorage.getItem("financialYear"),qe={indentId:u?.value?.indentId,categoryId:u?.value?.categoryId,rfqCategoryId:f?.value,vendor:x,vendorName:b,quotationReference:c,validityDate:O,vnNo:k,companyId:Qe,financialYear:Ue,note:S,buyerGroup:L,location:A,totalPrice:F,items:D,quotationGenType:At,externalQuotationNumber:At==="external"?xe:null};console.log("Payload for submission:",qe);try{const mt=await Oe.post("/api/quotations/create",qe);alert("Quotation Created Successfully"),console.log(mt.data),Tt(!1)}catch(mt){console.error(mt),alert("Failed to create quotation")}},De=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Quotation Number Generation"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>Tt(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{qt("internal"),pe()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>qt("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),At==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:xe,onChange:Qe=>{Qe.target.value.length<=50&&he(Qe.target.value)},onKeyPress:Qe=>{Qe.key==="Enter"&&xe.trim()&&pe()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[xe.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:pe,disabled:!xe.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Create Quotation"]})})]}),At==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"alert alert-info",role:"alert",children:"Quotation number will be auto-generated based on category and range count."})})]})]})})})]}),Ke=()=>{const[Qe,Ue]=j.useState([]),[qe,mt]=j.useState("materialId"),[Ie,Xe]=j.useState(""),Ye=ke=>{const ot=ke.target.value;Xe(ot);const bt=o.filter(Xt=>(qe==="materialId"?Xt.materialId:Xt.description)?.toLowerCase().includes(ot.toLowerCase()));Ue(bt)},lt=()=>{Ue(o),Xe("")},Mt=()=>{Ue([]),Xe("")},Ae=ke=>{if(console.log("selectedItemIndex when selecting:",U),U==null){console.error("No item selected for update");return}E(ot=>{console.log("Previous items:",ot);const bt=[...ot];return bt[U]={...bt[U],materialId:ke.materialId,description:ke.description,materialGroup:ke.materialgroup||"",baseUnit:ke.baseUnit,orderUnit:ke.orderUnit},console.log("Updated items:",bt),bt}),K(!1)};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>K(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:qe,onChange:ke=>mt(ke.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:qe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ie,onChange:Ye})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:lt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Qe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Qe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Qe.map((ke,ot)=>n.jsxs("tr",{children:[n.jsx("td",{children:ke.materialId}),n.jsx("td",{children:ke.description}),n.jsx("td",{children:ke.baseUnit}),n.jsx("td",{children:ke.orderUnit}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ae(ke),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ot))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ie?`No materials found matching "${Ie}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Nt=()=>{const[Qe,Ue]=j.useState("indentId"),[qe,mt]=j.useState([]),[Ie,Xe]=j.useState(""),Ye=Ae=>{const ke=Ae.target.value;Xe(ke);const ot=e.filter(bt=>(Qe==="indentId"?bt?.value?.indentId:bt?.value?.categoryName)?.toLowerCase().includes(ke.toLowerCase()));mt(ot)},lt=()=>{mt(e),Xe("")},Mt=()=>{mt([]),Xe("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ie(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Qe,onChange:Ae=>Ue(Ae.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ie,onChange:Ye})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:lt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),qe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:qe.map((Ae,ke)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ae.value.indentId})}),n.jsx("td",{children:Ae.value.categoryName}),n.jsx("td",{children:Ae.value.buyerGroup}),n.jsx("td",{children:Ae.value.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{He(Ae),ie(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>ie(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Je=()=>{const[Qe,Ue]=j.useState("name1"),[qe,mt]=j.useState([]),[Ie,Xe]=j.useState(""),Ye=Ae=>{const ke=Ae.target.value;Xe(ke);const ot=s.filter(bt=>(Qe==="vnNo"?bt.vnNo:bt.label)?.toLowerCase().includes(ke.toLowerCase()));mt(ot)},lt=()=>{mt(s),Xe("")},Mt=()=>{mt([]),Xe("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Qe,onChange:Ae=>Ue(Ae.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ie,onChange:Ye})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:lt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),qe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Vendor No"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:qe.map((Ae,ke)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ae.label}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ae.vnNo})}),n.jsx("td",{children:Ae.city||"-"}),n.jsx("td",{children:Ae.region||"-"}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(Ae.value),y(Ae.label),C(Ae.vnNo||""),V(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>V(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Quotation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Quotation"})]})})]})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Purchase Quotation Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select Indent"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:Qe=>{const Ue=Qe.target.value;de(Ue);const qe=e.find(mt=>mt.indentId.toLowerCase()===Ue.toLowerCase());h(qe||null)},readOnly:!0}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{se(Z),ie(!0)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("label",{className:"form-label",children:"Quotation Category"})}),n.jsx("div",{className:"col-xl-5",children:n.jsxs("select",{className:"form-select form-control-sm",value:f?.value||"",onChange:Qe=>p(r.find(Ue=>Ue.value===Qe.target.value)||null),children:[n.jsx("option",{value:"",children:"Select"}),r.map((Qe,Ue)=>n.jsx("option",{value:Qe.value,children:Qe.label},Ue))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:Qe=>{const Ue=Qe.target.value;y(Ue);const qe=s.find(mt=>mt.name.toLowerCase()===Ue.toLowerCase());ye(qe||null)}}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{V(!0),ue(b)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Reference"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Quotation Reference",value:c,onChange:Qe=>d(Qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-lg-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select form-select-sm ",value:A,onChange:Qe=>I(Qe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(je)&&je.map((Qe,Ue)=>n.jsx("option",{value:Qe.name||Qe._id||Qe,children:Qe.name||Qe.locationName||Qe},Ue))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"text",className:"form-control",value:L,onChange:Qe=>P(Qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:Qe=>Y(Qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Additional Notes"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:S,onChange:Qe=>w(Qe.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:ve,children:[n.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[n.jsx("h6",{className:"mb-3",children:"Items & Details"}),n.jsxs("div",{className:"table-responsive",children:[n.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:D.map((Qe,Ue)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ue+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:Qe.materialId}),n.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>ft(Ue),children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Qe.description,onChange:qe=>et(Ue,"description",qe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:Qe.qty,onChange:qe=>et(Ue,"qty",qe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Qe.baseUnit,onChange:qe=>et(Ue,"baseUnit",qe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Qe.orderUnit,onChange:qe=>et(Ue,"orderUnit",qe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:Qe.materialGroup,onChange:qe=>et(Ue,"materialGroup",qe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Qe.deliveryDate,onChange:qe=>et(Ue,"deliveryDate",qe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:Qe.price,onChange:qe=>{qe.target.value=qe.target.value.replace(/[^0-9.]/g,""),et(Ue,"price",qe.target.value)}})})]},Ue))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",onClick:Be,className:"btn btn-link",children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})}),n.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:n.jsxs("h6",{className:"mb-0",children:["Total Price: ",n.jsxs("span",{className:"text-primary",children:["",F.toFixed(2)]})]})})]})})})]})]}),q&&n.jsx(Ke,{}),Q&&n.jsx(Nt,{}),M&&n.jsx(Je,{}),dt&&n.jsx(De,{})]})]})})}function $a(e){"@babel/helpers - typeof";return $a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$a(e)}function DEe(e,t){if($a(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($a(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RG(e){var t=DEe(e,"string");return $a(t)=="symbol"?t:t+""}function Kb(e,t,r){return(t=RG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vB(Object(r),!0).forEach(function(a){Kb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vB(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AEe(e){if(Array.isArray(e))return e}function TEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function c3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function FG(e,t){if(e){if(typeof e=="string")return c3(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c3(e,t):void 0}}function IEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ef(e,t){return AEe(e)||TEe(e,t)||FG(e,t)||IEe()}function Sf(e,t){if(e==null)return{};var r,a,s=wEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var PEe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function OEe(e){var t=e.defaultInputValue,r=t===void 0?"":t,a=e.defaultMenuIsOpen,s=a===void 0?!1:a,i=e.defaultValue,o=i===void 0?null:i,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,h=e.onMenuClose,f=e.onMenuOpen,p=e.value,x=Sf(e,PEe),g=j.useState(l!==void 0?l:r),b=ef(g,2),y=b[0],S=b[1],w=j.useState(c!==void 0?c:s),k=ef(w,2),C=k[0],D=k[1],E=j.useState(p!==void 0?p:o),A=ef(E,2),I=A[0],L=A[1],P=j.useCallback(function(F,X){typeof d=="function"&&d(F,X),L(F)},[d]),O=j.useCallback(function(F,X){var Q;typeof u=="function"&&(Q=u(F,X)),S(Q!==void 0?Q:F)},[u]),Y=j.useCallback(function(){typeof f=="function"&&f(),D(!0)},[f]),q=j.useCallback(function(){typeof h=="function"&&h(),D(!1)},[h]),K=l!==void 0?l:y,U=c!==void 0?c:C,J=p!==void 0?p:I;return Xr(Xr({},x),{},{inputValue:K,menuIsOpen:U,onChange:P,onInputChange:O,onMenuClose:q,onMenuOpen:Y,value:J})}function MEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gB(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RG(a.key),a)}}function REe(e,t,r){return t&&gB(e.prototype,t),r&&gB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l3(e,t)}function f2(e){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f2(e)}function LG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LG=function(){return!!e})()}function LEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BEe(e,t){if(t&&($a(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LEe(e)}function UEe(e){var t=LG();return function(){var r,a=f2(e);if(t){var s=f2(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return BEe(this,r)}}function $Ee(e){if(Array.isArray(e))return c3(e)}function VEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tI(e){return $Ee(e)||VEe(e)||FG(e)||qEe()}function zEe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function HEe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var WEe=function(){function e(r){var a=this;this._insertTag=function(s){var i;a.tags.length===0?a.insertionPoint?i=a.insertionPoint.nextSibling:a.prepend?i=a.container.firstChild:i=a.before:i=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(s,i),a.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(HEe(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=zEe(s);try{i.insertRule(a,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var s;return(s=a.parentNode)==null?void 0:s.removeChild(a)}),this.tags=[],this.ctr=0},e}(),bo="-ms-",m2="-moz-",an="-webkit-",BG="comm",rI="rule",aI="decl",GEe="@import",UG="@keyframes",YEe="@layer",KEe=Math.abs,tC=String.fromCharCode,XEe=Object.assign;function QEe(e,t){return ro(e,0)^45?(((t<<2^ro(e,0))<<2^ro(e,1))<<2^ro(e,2))<<2^ro(e,3):0}function $G(e){return e.trim()}function JEe(e,t){return(e=t.exec(e))?e[0]:e}function nn(e,t,r){return e.replace(t,r)}function d3(e,t){return e.indexOf(t)}function ro(e,t){return e.charCodeAt(t)|0}function Vy(e,t,r){return e.slice(t,r)}function Au(e){return e.length}function nI(e){return e.length}function xN(e,t){return t.push(e),e}function ZEe(e,t){return e.map(t).join("")}var rC=1,G0=1,VG=0,Sl=0,oi=0,Sg="";function aC(e,t,r,a,s,i,o){return{value:e,root:t,parent:r,type:a,props:s,children:i,line:rC,column:G0,length:o,return:""}}function Ab(e,t){return XEe(aC("",null,null,"",null,null,0),e,{length:-e.length},t)}function eDe(){return oi}function tDe(){return oi=Sl>0?ro(Sg,--Sl):0,G0--,oi===10&&(G0=1,rC--),oi}function oc(){return oi=Sl<VG?ro(Sg,Sl++):0,G0++,oi===10&&(G0=1,rC++),oi}function zu(){return ro(Sg,Sl)}function XN(){return Sl}function D1(e,t){return Vy(Sg,e,t)}function qy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qG(e){return rC=G0=1,VG=Au(Sg=e),Sl=0,[]}function zG(e){return Sg="",e}function QN(e){return $G(D1(Sl-1,u3(e===91?e+2:e===40?e+1:e)))}function rDe(e){for(;(oi=zu())&&oi<33;)oc();return qy(e)>2||qy(oi)>3?"":" "}function aDe(e,t){for(;--t&&oc()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return D1(e,XN()+(t<6&&zu()==32&&oc()==32))}function u3(e){for(;oc();)switch(oi){case e:return Sl;case 34:case 39:e!==34&&e!==39&&u3(oi);break;case 40:e===41&&u3(e);break;case 92:oc();break}return Sl}function nDe(e,t){for(;oc()&&e+oi!==57;)if(e+oi===84&&zu()===47)break;return"/*"+D1(t,Sl-1)+"*"+tC(e===47?e:oc())}function sDe(e){for(;!qy(zu());)oc();return D1(e,Sl)}function iDe(e){return zG(JN("",null,null,null,[""],e=qG(e),0,[0],e))}function JN(e,t,r,a,s,i,o,l,c){for(var d=0,u=0,h=o,f=0,p=0,x=0,g=1,b=1,y=1,S=0,w="",k=s,C=i,D=a,E=w;b;)switch(x=S,S=oc()){case 40:if(x!=108&&ro(E,h-1)==58){d3(E+=nn(QN(S),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=QN(S);break;case 9:case 10:case 13:case 32:E+=rDe(x);break;case 92:E+=aDe(XN()-1,7);continue;case 47:switch(zu()){case 42:case 47:xN(oDe(nDe(oc(),XN()),t,r),c);break;default:E+="/"}break;case 123*g:l[d++]=Au(E)*y;case 125*g:case 59:case 0:switch(S){case 0:case 125:b=0;case 59+u:y==-1&&(E=nn(E,/\f/g,"")),p>0&&Au(E)-h&&xN(p>32?yB(E+";",a,r,h-1):yB(nn(E," ","")+";",a,r,h-2),c);break;case 59:E+=";";default:if(xN(D=bB(E,t,r,d,u,s,l,w,k=[],C=[],h),i),S===123)if(u===0)JN(E,t,D,D,k,i,h,l,C);else switch(f===99&&ro(E,3)===110?100:f){case 100:case 108:case 109:case 115:JN(e,D,D,a&&xN(bB(e,D,D,0,0,s,l,w,s,k=[],h),C),s,C,h,l,a?k:C);break;default:JN(E,D,D,D,[""],C,0,l,C)}}d=u=p=0,g=y=1,w=E="",h=o;break;case 58:h=1+Au(E),p=x;default:if(g<1){if(S==123)--g;else if(S==125&&g++==0&&tDe()==125)continue}switch(E+=tC(S),S*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(Au(E)-1)*y,y=1;break;case 64:zu()===45&&(E+=QN(oc())),f=zu(),u=h=Au(w=E+=sDe(XN())),S++;break;case 45:x===45&&Au(E)==2&&(g=0)}}return i}function bB(e,t,r,a,s,i,o,l,c,d,u){for(var h=s-1,f=s===0?i:[""],p=nI(f),x=0,g=0,b=0;x<a;++x)for(var y=0,S=Vy(e,h+1,h=KEe(g=o[x])),w=e;y<p;++y)(w=$G(g>0?f[y]+" "+S:nn(S,/&\f/g,f[y])))&&(c[b++]=w);return aC(e,t,r,s===0?rI:l,c,d,u)}function oDe(e,t,r){return aC(e,t,r,BG,tC(eDe()),Vy(e,2,-2),0)}function yB(e,t,r,a){return aC(e,t,r,aI,Vy(e,0,a),Vy(e,a+1,-1),a)}function j0(e,t){for(var r="",a=nI(e),s=0;s<a;s++)r+=t(e[s],s,e,t)||"";return r}function lDe(e,t,r,a){switch(e.type){case YEe:if(e.children.length)break;case GEe:case aI:return e.return=e.return||e.value;case BG:return"";case UG:return e.return=e.value+"{"+j0(e.children,a)+"}";case rI:e.value=e.props.join(",")}return Au(r=j0(e.children,a))?e.return=e.value+"{"+r+"}":""}function cDe(e){var t=nI(e);return function(r,a,s,i){for(var o="",l=0;l<t;l++)o+=e[l](r,a,s,i)||"";return o}}function dDe(e){return function(t){t.root||(t=t.return)&&e(t)}}function uDe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var hDe=function(t,r,a){for(var s=0,i=0;s=i,i=zu(),s===38&&i===12&&(r[a]=1),!qy(i);)oc();return D1(t,Sl)},fDe=function(t,r){var a=-1,s=44;do switch(qy(s)){case 0:s===38&&zu()===12&&(r[a]=1),t[a]+=hDe(Sl-1,r,a);break;case 2:t[a]+=QN(s);break;case 4:if(s===44){t[++a]=zu()===58?"&\f":"",r[a]=t[a].length;break}default:t[a]+=tC(s)}while(s=oc());return t},mDe=function(t,r){return zG(fDe(qG(t),r))},jB=new WeakMap,pDe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,a=t.parent,s=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!jB.get(a))&&!s){jB.set(t,!0);for(var i=[],o=mDe(r,i),l=a.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},xDe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function HG(e,t){switch(QEe(e,t)){case 5103:return an+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return an+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return an+e+m2+e+bo+e+e;case 6828:case 4268:return an+e+bo+e+e;case 6165:return an+e+bo+"flex-"+e+e;case 5187:return an+e+nn(e,/(\w+).+(:[^]+)/,an+"box-$1$2"+bo+"flex-$1$2")+e;case 5443:return an+e+bo+"flex-item-"+nn(e,/flex-|-self/,"")+e;case 4675:return an+e+bo+"flex-line-pack"+nn(e,/align-content|flex-|-self/,"")+e;case 5548:return an+e+bo+nn(e,"shrink","negative")+e;case 5292:return an+e+bo+nn(e,"basis","preferred-size")+e;case 6060:return an+"box-"+nn(e,"-grow","")+an+e+bo+nn(e,"grow","positive")+e;case 4554:return an+nn(e,/([^-])(transform)/g,"$1"+an+"$2")+e;case 6187:return nn(nn(nn(e,/(zoom-|grab)/,an+"$1"),/(image-set)/,an+"$1"),e,"")+e;case 5495:case 3959:return nn(e,/(image-set\([^]*)/,an+"$1$`$1");case 4968:return nn(nn(e,/(.+:)(flex-)?(.*)/,an+"box-pack:$3"+bo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+an+e+e;case 4095:case 3583:case 4068:case 2532:return nn(e,/(.+)-inline(.+)/,an+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Au(e)-1-t>6)switch(ro(e,t+1)){case 109:if(ro(e,t+4)!==45)break;case 102:return nn(e,/(.+:)(.+)-([^]+)/,"$1"+an+"$2-$3$1"+m2+(ro(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~d3(e,"stretch")?HG(nn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ro(e,t+1)!==115)break;case 6444:switch(ro(e,Au(e)-3-(~d3(e,"!important")&&10))){case 107:return nn(e,":",":"+an)+e;case 101:return nn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+an+(ro(e,14)===45?"inline-":"")+"box$3$1"+an+"$2$3$1"+bo+"$2box$3")+e}break;case 5936:switch(ro(e,t+11)){case 114:return an+e+bo+nn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return an+e+bo+nn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return an+e+bo+nn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return an+e+bo+e+e}return e}var vDe=function(t,r,a,s){if(t.length>-1&&!t.return)switch(t.type){case aI:t.return=HG(t.value,t.length);break;case UG:return j0([Ab(t,{value:nn(t.value,"@","@"+an)})],s);case rI:if(t.length)return ZEe(t.props,function(i){switch(JEe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return j0([Ab(t,{props:[nn(i,/:(read-\w+)/,":"+m2+"$1")]})],s);case"::placeholder":return j0([Ab(t,{props:[nn(i,/:(plac\w+)/,":"+an+"input-$1")]}),Ab(t,{props:[nn(i,/:(plac\w+)/,":"+m2+"$1")]}),Ab(t,{props:[nn(i,/:(plac\w+)/,bo+"input-$1")]})],s)}return""})}},gDe=[vDe],bDe=function(t){var r=t.key;if(r==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=t.stylisPlugins||gDe,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)i[b[y]]=!0;l.push(g)});var c,d=[pDe,xDe];{var u,h=[lDe,dDe(function(g){u.insert(g)})],f=cDe(d.concat(s,h)),p=function(b){return j0(iDe(b),f)};c=function(b,y,S,w){u=S,p(b?b+"{"+y.styles+"}":y.styles),w&&(x.inserted[y.name]=!0)}}var x={key:r,sheet:new WEe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return x.sheet.hydrate(l),x},VE={exports:{}},un={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NB;function yDe(){if(NB)return un;NB=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function w(C){if(typeof C=="object"&&C!==null){var D=C.$$typeof;switch(D){case t:switch(C=C.type,C){case c:case d:case a:case i:case s:case h:return C;default:switch(C=C&&C.$$typeof,C){case l:case u:case x:case p:case o:return C;default:return D}}case r:return D}}}function k(C){return w(C)===d}return un.AsyncMode=c,un.ConcurrentMode=d,un.ContextConsumer=l,un.ContextProvider=o,un.Element=t,un.ForwardRef=u,un.Fragment=a,un.Lazy=x,un.Memo=p,un.Portal=r,un.Profiler=i,un.StrictMode=s,un.Suspense=h,un.isAsyncMode=function(C){return k(C)||w(C)===c},un.isConcurrentMode=k,un.isContextConsumer=function(C){return w(C)===l},un.isContextProvider=function(C){return w(C)===o},un.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},un.isForwardRef=function(C){return w(C)===u},un.isFragment=function(C){return w(C)===a},un.isLazy=function(C){return w(C)===x},un.isMemo=function(C){return w(C)===p},un.isPortal=function(C){return w(C)===r},un.isProfiler=function(C){return w(C)===i},un.isStrictMode=function(C){return w(C)===s},un.isSuspense=function(C){return w(C)===h},un.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===a||C===d||C===i||C===s||C===h||C===f||typeof C=="object"&&C!==null&&(C.$$typeof===x||C.$$typeof===p||C.$$typeof===o||C.$$typeof===l||C.$$typeof===u||C.$$typeof===b||C.$$typeof===y||C.$$typeof===S||C.$$typeof===g)},un.typeOf=w,un}var wB;function jDe(){return wB||(wB=1,VE.exports=yDe()),VE.exports}var qE,SB;function NDe(){if(SB)return qE;SB=1;var e=jDe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=a,i[e.Memo]=s;function o(x){return e.isMemo(x)?s:i[x.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function p(x,g,b){if(typeof g!="string"){if(f){var y=h(g);y&&y!==f&&p(x,y,b)}var S=c(g);d&&(S=S.concat(d(g)));for(var w=o(x),k=o(g),C=0;C<S.length;++C){var D=S[C];if(!r[D]&&!(b&&b[D])&&!(k&&k[D])&&!(w&&w[D])){var E=u(g,D);try{l(x,D,E)}catch{}}}}return x}return qE=p,qE}NDe();var wDe=!0;function SDe(e,t,r){var a="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(a+=s+" ")}),a}var WG=function(t,r,a){var s=t.key+"-"+r.name;(a===!1||wDe===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},CDe=function(t,r,a){WG(t,r,a);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function kDe(e){for(var t=0,r,a=0,s=e.length;s>=4;++a,s-=4)r=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var _De={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},EDe=/[A-Z]|^ms/g,DDe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GG=function(t){return t.charCodeAt(1)===45},CB=function(t){return t!=null&&typeof t!="boolean"},zE=uDe(function(e){return GG(e)?e:e.replace(EDe,"-$&").toLowerCase()}),kB=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(DDe,function(a,s,i){return Tu={name:s,styles:i,next:Tu},s})}return _De[t]!==1&&!GG(t)&&typeof r=="number"&&r!==0?r+"px":r};function zy(e,t,r){if(r==null)return"";var a=r;if(a.__emotion_styles!==void 0)return a;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return Tu={name:s.name,styles:s.styles,next:Tu},s.name;var i=r;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Tu={name:o.name,styles:o.styles,next:Tu},o=o.next;var l=i.styles+";";return l}return ADe(e,t,r)}case"function":{if(e!==void 0){var c=Tu,d=r(e);return Tu=c,zy(e,t,d)}break}}var u=r;return u}function ADe(e,t,r){var a="";if(Array.isArray(r))for(var s=0;s<r.length;s++)a+=zy(e,t,r[s])+";";else for(var i in r){var o=r[i];if(typeof o!="object"){var l=o;CB(l)&&(a+=zE(i)+":"+kB(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)CB(o[c])&&(a+=zE(i)+":"+kB(i,o[c])+";");else{var d=zy(e,t,o);switch(i){case"animation":case"animationName":{a+=zE(i)+":"+d+";";break}default:a+=i+"{"+d+"}"}}}return a}var _B=/label:\s*([^\s;{]+)\s*(;|$)/g,Tu;function YG(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,s="";Tu=void 0;var i=e[0];if(i==null||i.raw===void 0)a=!1,s+=zy(r,t,i);else{var o=i;s+=o[0]}for(var l=1;l<e.length;l++)if(s+=zy(r,t,e[l]),a){var c=i;s+=c[l]}_B.lastIndex=0;for(var d="",u;(u=_B.exec(s))!==null;)d+="-"+u[1];var h=kDe(s)+d;return{name:h,styles:s,next:Tu}}var TDe=function(t){return t()},IDe=uw.useInsertionEffect?uw.useInsertionEffect:!1,PDe=IDe||TDe,KG=j.createContext(typeof HTMLElement<"u"?bDe({key:"css"}):null);KG.Provider;var ODe=function(t){return j.forwardRef(function(r,a){var s=j.useContext(KG);return t(r,s,a)})},MDe=j.createContext({}),sI={}.hasOwnProperty,h3="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",RDe=function(t,r){var a={};for(var s in r)sI.call(r,s)&&(a[s]=r[s]);return a[h3]=t,a},FDe=function(t){var r=t.cache,a=t.serialized,s=t.isStringTag;return WG(r,a,s),PDe(function(){return CDe(r,a,s)}),null},LDe=ODe(function(e,t,r){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var s=e[h3],i=[a],o="";typeof e.className=="string"?o=SDe(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=YG(i,void 0,j.useContext(MDe));o+=t.key+"-"+l.name;var c={};for(var d in e)sI.call(e,d)&&d!=="css"&&d!==h3&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),j.createElement(j.Fragment,null,j.createElement(FDe,{cache:t,serialized:l,isStringTag:typeof s=="string"}),j.createElement(s,c))}),BDe=LDe,Gr=function(t,r){var a=arguments;if(r==null||!sI.call(r,"css"))return j.createElement.apply(void 0,a);var s=a.length,i=new Array(s);i[0]=BDe,i[1]=RDe(t,r);for(var o=2;o<s;o++)i[o]=a[o];return j.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Gr||(Gr={}));function iI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YG(t)}function UDe(){var e=iI.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function $De(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Y0=Math.min,wx=Math.max,p2=Math.round,vN=Math.floor,Hu=e=>({x:e,y:e}),VDe={left:"right",right:"left",bottom:"top",top:"bottom"},qDe={start:"end",end:"start"};function zDe(e,t,r){return wx(e,Y0(t,r))}function nC(e,t){return typeof e=="function"?e(t):e}function K0(e){return e.split("-")[0]}function A1(e){return e.split("-")[1]}function HDe(e){return e==="x"?"y":"x"}function oI(e){return e==="y"?"height":"width"}const WDe=new Set(["top","bottom"]);function dx(e){return WDe.has(K0(e))?"y":"x"}function lI(e){return HDe(dx(e))}function GDe(e,t,r){r===void 0&&(r=!1);const a=A1(e),s=lI(e),i=oI(s);let o=s==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=x2(o)),[o,x2(o)]}function YDe(e){const t=x2(e);return[f3(e),t,f3(t)]}function f3(e){return e.replace(/start|end/g,t=>qDe[t])}const EB=["left","right"],DB=["right","left"],KDe=["top","bottom"],XDe=["bottom","top"];function QDe(e,t,r){switch(e){case"top":case"bottom":return r?t?DB:EB:t?EB:DB;case"left":case"right":return t?KDe:XDe;default:return[]}}function JDe(e,t,r,a){const s=A1(e);let i=QDe(K0(e),r==="start",a);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(f3)))),i}function x2(e){return e.replace(/left|right|bottom|top/g,t=>VDe[t])}function ZDe(e){return{top:0,right:0,bottom:0,left:0,...e}}function XG(e){return typeof e!="number"?ZDe(e):{top:e,right:e,bottom:e,left:e}}function v2(e){const{x:t,y:r,width:a,height:s}=e;return{width:a,height:s,top:r,left:t,right:t+a,bottom:r+s,x:t,y:r}}function AB(e,t,r){let{reference:a,floating:s}=e;const i=dx(t),o=lI(t),l=oI(o),c=K0(t),d=i==="y",u=a.x+a.width/2-s.width/2,h=a.y+a.height/2-s.height/2,f=a[l]/2-s[l]/2;let p;switch(c){case"top":p={x:u,y:a.y-s.height};break;case"bottom":p={x:u,y:a.y+a.height};break;case"right":p={x:a.x+a.width,y:h};break;case"left":p={x:a.x-s.width,y:h};break;default:p={x:a.x,y:a.y}}switch(A1(t)){case"start":p[o]-=f*(r&&d?-1:1);break;case"end":p[o]+=f*(r&&d?-1:1);break}return p}const e5e=async(e,t,r)=>{const{placement:a="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=AB(d,a,c),f=a,p={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:S,y:w,data:k,reset:C}=await y({x:u,y:h,initialPlacement:a,placement:f,strategy:s,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=S??u,h=w??h,p={...p,[b]:{...p[b],...k}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(d=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:u,y:h}=AB(d,f,c)),g=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function t5e(e,t){var r;t===void 0&&(t={});const{x:a,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=nC(t,e),x=XG(p),b=l[f?h==="floating"?"reference":"floating":h],y=v2(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),S=h==="floating"?{x:a,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},C=v2(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:w,strategy:c}):S);return{top:(y.top-C.top+x.top)/k.y,bottom:(C.bottom-y.bottom+x.bottom)/k.y,left:(y.left-C.left+x.left)/k.x,right:(C.right-y.right+x.right)/k.x}}const r5e=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=nC(e,t)||{};if(d==null)return{};const h=XG(u),f={x:r,y:a},p=lI(s),x=oI(p),g=await o.getDimensions(d),b=p==="y",y=b?"top":"left",S=b?"bottom":"right",w=b?"clientHeight":"clientWidth",k=i.reference[x]+i.reference[p]-f[p]-i.floating[x],C=f[p]-i.reference[p],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=D?D[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(D)))&&(E=l.floating[w]||i.floating[x]);const A=k/2-C/2,I=E/2-g[x]/2-1,L=Y0(h[y],I),P=Y0(h[S],I),O=L,Y=E-g[x]-P,q=E/2-g[x]/2+A,K=zDe(O,q,Y),U=!c.arrow&&A1(s)!=null&&q!==K&&i.reference[x]/2-(q<O?L:P)-g[x]/2<0,J=U?q<O?q-O:q-Y:0;return{[p]:f[p]+J,data:{[p]:K,centerOffset:q-K-J,...U&&{alignmentOffset:J}},reset:U}}}),a5e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...b}=nC(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=K0(s),S=dx(l),w=K0(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=f||(w||!g?[x2(l)]:YDe(l)),D=x!=="none";!f&&D&&C.push(...JDe(l,g,x,k));const E=[l,...C],A=await t5e(t,b),I=[];let L=((a=i.flip)==null?void 0:a.overflows)||[];if(u&&I.push(A[y]),h){const q=GDe(s,o,k);I.push(A[q[0]],A[q[1]])}if(L=[...L,{placement:s,overflows:I}],!I.every(q=>q<=0)){var P,O;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,K=E[q];if(K&&(!(h==="alignment"?S!==dx(K):!1)||L.every(F=>dx(F.placement)===S?F.overflows[0]>0:!0)))return{data:{index:q,overflows:L},reset:{placement:K}};let U=(O=L.filter(J=>J.overflows[0]<=0).sort((J,F)=>J.overflows[1]-F.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(p){case"bestFit":{var Y;const J=(Y=L.filter(F=>{if(D){const X=dx(F.placement);return X===S||X==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(X=>X>0).reduce((X,Q)=>X+Q,0)]).sort((F,X)=>F[1]-X[1])[0])==null?void 0:Y[0];J&&(U=J);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}},n5e=new Set(["left","top"]);async function s5e(e,t){const{placement:r,platform:a,elements:s}=e,i=await(a.isRTL==null?void 0:a.isRTL(s.floating)),o=K0(r),l=A1(r),c=dx(r)==="y",d=n5e.has(o)?-1:1,u=i&&c?-1:1,h=nC(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*u,y:f*d}:{x:f*d,y:p*u}}const i5e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await s5e(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(a=l.arrow)!=null&&a.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function sC(){return typeof window<"u"}function Cg(e){return QG(e)?(e.nodeName||"").toLowerCase():"#document"}function lc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ih(e){var t;return(t=(QG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function QG(e){return sC()?e instanceof Node||e instanceof lc(e).Node:!1}function Ko(e){return sC()?e instanceof Element||e instanceof lc(e).Element:!1}function Zu(e){return sC()?e instanceof HTMLElement||e instanceof lc(e).HTMLElement:!1}function TB(e){return!sC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof lc(e).ShadowRoot}const o5e=new Set(["inline","contents"]);function T1(e){const{overflow:t,overflowX:r,overflowY:a,display:s}=Zc(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!o5e.has(s)}const l5e=new Set(["table","td","th"]);function c5e(e){return l5e.has(Cg(e))}const d5e=[":popover-open",":modal"];function iC(e){return d5e.some(t=>{try{return e.matches(t)}catch{return!1}})}const u5e=["transform","translate","scale","rotate","perspective"],h5e=["transform","translate","scale","rotate","perspective","filter"],f5e=["paint","layout","strict","content"];function cI(e){const t=dI(),r=Ko(e)?Zc(e):e;return u5e.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||h5e.some(a=>(r.willChange||"").includes(a))||f5e.some(a=>(r.contain||"").includes(a))}function m5e(e){let t=Zm(e);for(;Zu(t)&&!X0(t);){if(cI(t))return t;if(iC(t))return null;t=Zm(t)}return null}function dI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const p5e=new Set(["html","body","#document"]);function X0(e){return p5e.has(Cg(e))}function Zc(e){return lc(e).getComputedStyle(e)}function oC(e){return Ko(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Zm(e){if(Cg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||TB(e)&&e.host||ih(e);return TB(t)?t.host:t}function JG(e){const t=Zm(e);return X0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zu(t)&&T1(t)?t:JG(t)}function Hy(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=JG(e),i=s===((a=e.ownerDocument)==null?void 0:a.body),o=lc(s);if(i){const l=m3(o);return t.concat(o,o.visualViewport||[],T1(s)?s:[],l&&r?Hy(l):[])}return t.concat(s,Hy(s,[],r))}function m3(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ZG(e){const t=Zc(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=Zu(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:a,l=p2(r)!==i||p2(a)!==o;return l&&(r=i,a=o),{width:r,height:a,$:l}}function uI(e){return Ko(e)?e:e.contextElement}function N0(e){const t=uI(e);if(!Zu(t))return Hu(1);const r=t.getBoundingClientRect(),{width:a,height:s,$:i}=ZG(t);let o=(i?p2(r.width):r.width)/a,l=(i?p2(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const x5e=Hu(0);function eY(e){const t=lc(e);return!dI()||!t.visualViewport?x5e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function v5e(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==lc(e)?!1:t}function Ux(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=uI(e);let o=Hu(1);t&&(a?Ko(a)&&(o=N0(a)):o=N0(e));const l=v5e(i,r,a)?eY(i):Hu(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=lc(i),p=a&&Ko(a)?lc(a):a;let x=f,g=m3(x);for(;g&&a&&p!==x;){const b=N0(g),y=g.getBoundingClientRect(),S=Zc(g),w=y.left+(g.clientLeft+parseFloat(S.paddingLeft))*b.x,k=y.top+(g.clientTop+parseFloat(S.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,h*=b.y,c+=w,d+=k,x=lc(g),g=m3(x)}}return v2({width:u,height:h,x:c,y:d})}function hI(e,t){const r=oC(e).scrollLeft;return t?t.left+r:Ux(ih(e)).left+r}function tY(e,t,r){r===void 0&&(r=!1);const a=e.getBoundingClientRect(),s=a.left+t.scrollLeft-(r?0:hI(e,a)),i=a.top+t.scrollTop;return{x:s,y:i}}function g5e(e){let{elements:t,rect:r,offsetParent:a,strategy:s}=e;const i=s==="fixed",o=ih(a),l=t?iC(t.floating):!1;if(a===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Hu(1);const u=Hu(0),h=Zu(a);if((h||!h&&!i)&&((Cg(a)!=="body"||T1(o))&&(c=oC(a)),Zu(a))){const p=Ux(a);d=N0(a),u.x=p.x+a.clientLeft,u.y=p.y+a.clientTop}const f=o&&!h&&!i?tY(o,c,!0):Hu(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:r.y*d.y-c.scrollTop*d.y+u.y+f.y}}function b5e(e){return Array.from(e.getClientRects())}function y5e(e){const t=ih(e),r=oC(e),a=e.ownerDocument.body,s=wx(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=wx(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-r.scrollLeft+hI(e);const l=-r.scrollTop;return Zc(a).direction==="rtl"&&(o+=wx(t.clientWidth,a.clientWidth)-s),{width:s,height:i,x:o,y:l}}function j5e(e,t){const r=lc(e),a=ih(e),s=r.visualViewport;let i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=dI();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const N5e=new Set(["absolute","fixed"]);function w5e(e,t){const r=Ux(e,!0,t==="fixed"),a=r.top+e.clientTop,s=r.left+e.clientLeft,i=Zu(e)?N0(e):Hu(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=a*i.y;return{width:o,height:l,x:c,y:d}}function IB(e,t,r){let a;if(t==="viewport")a=j5e(e,r);else if(t==="document")a=y5e(ih(e));else if(Ko(t))a=w5e(t,r);else{const s=eY(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return v2(a)}function rY(e,t){const r=Zm(e);return r===t||!Ko(r)||X0(r)?!1:Zc(r).position==="fixed"||rY(r,t)}function S5e(e,t){const r=t.get(e);if(r)return r;let a=Hy(e,[],!1).filter(l=>Ko(l)&&Cg(l)!=="body"),s=null;const i=Zc(e).position==="fixed";let o=i?Zm(e):e;for(;Ko(o)&&!X0(o);){const l=Zc(o),c=cI(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&N5e.has(s.position)||T1(o)&&!c&&rY(e,o))?a=a.filter(u=>u!==o):s=l,o=Zm(o)}return t.set(e,a),a}function C5e(e){let{element:t,boundary:r,rootBoundary:a,strategy:s}=e;const o=[...r==="clippingAncestors"?iC(t)?[]:S5e(t,this._c):[].concat(r),a],l=o[0],c=o.reduce((d,u)=>{const h=IB(t,u,s);return d.top=wx(h.top,d.top),d.right=Y0(h.right,d.right),d.bottom=Y0(h.bottom,d.bottom),d.left=wx(h.left,d.left),d},IB(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function k5e(e){const{width:t,height:r}=ZG(e);return{width:t,height:r}}function _5e(e,t,r){const a=Zu(t),s=ih(t),i=r==="fixed",o=Ux(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Hu(0);function d(){c.x=hI(s)}if(a||!a&&!i)if((Cg(t)!=="body"||T1(s))&&(l=oC(t)),a){const p=Ux(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&d();i&&!a&&s&&d();const u=s&&!a&&!i?tY(s,l):Hu(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function HE(e){return Zc(e).position==="static"}function PB(e,t){if(!Zu(e)||Zc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ih(e)===r&&(r=r.ownerDocument.body),r}function aY(e,t){const r=lc(e);if(iC(e))return r;if(!Zu(e)){let s=Zm(e);for(;s&&!X0(s);){if(Ko(s)&&!HE(s))return s;s=Zm(s)}return r}let a=PB(e,t);for(;a&&c5e(a)&&HE(a);)a=PB(a,t);return a&&X0(a)&&HE(a)&&!cI(a)?r:a||m5e(e)||r}const E5e=async function(e){const t=this.getOffsetParent||aY,r=this.getDimensions,a=await r(e.floating);return{reference:_5e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function D5e(e){return Zc(e).direction==="rtl"}const A5e={convertOffsetParentRelativeRectToViewportRelativeRect:g5e,getDocumentElement:ih,getClippingRect:C5e,getOffsetParent:aY,getElementRects:E5e,getClientRects:b5e,getDimensions:k5e,getScale:N0,isElement:Ko,isRTL:D5e};function nY(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function T5e(e,t){let r=null,a;const s=ih(e);function i(){var l;clearTimeout(a),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=d;if(l||t(),!f||!p)return;const x=vN(h),g=vN(s.clientWidth-(u+f)),b=vN(s.clientHeight-(h+p)),y=vN(u),w={rootMargin:-x+"px "+-g+"px "+-b+"px "+-y+"px",threshold:wx(0,Y0(1,c))||1};let k=!0;function C(D){const E=D[0].intersectionRatio;if(E!==c){if(!k)return o();E?o(!1,E):a=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!nY(d,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(C,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(C,w)}r.observe(e)}return o(!0),i}function sY(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=uI(e),u=s||i?[...d?Hy(d):[],...Hy(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const h=d&&l?T5e(d,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[S]=y;S&&S.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let x,g=c?Ux(e):null;c&&b();function b(){const y=Ux(e);g&&!nY(g,y)&&r(),g=y,x=requestAnimationFrame(b)}return r(),()=>{var y;u.forEach(S=>{s&&S.removeEventListener("scroll",r),i&&S.removeEventListener("resize",r)}),h?.(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const I5e=i5e,P5e=a5e,OB=r5e,O5e=(e,t,r)=>{const a=new Map,s={platform:A5e,...r},i={...s.platform,_c:a};return e5e(e,t,{...s,platform:i})};var p3=j.useLayoutEffect,M5e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],g2=function(){};function R5e(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function F5e(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];var i=[].concat(a);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(R5e(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var MB=function(t){return W5e(t)?t.filter(Boolean):$a(t)==="object"&&t!==null?[t]:[]},iY=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=Sf(t,M5e);return Xr({},r)},_s=function(t,r,a){var s=t.cx,i=t.getStyles,o=t.getClassNames,l=t.className;return{css:i(r,t),className:s(a??{},o(r,t),l)}};function lC(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function L5e(e){return lC(e)?window.innerHeight:e.clientHeight}function oY(e){return lC(e)?window.pageYOffset:e.scrollTop}function b2(e,t){if(lC(e)){window.scrollTo(0,t);return}e.scrollTop=t}function B5e(e){var t=getComputedStyle(e),r=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(r&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function U5e(e,t,r,a){return r*((e=e/a-1)*e*e+1)+t}function gN(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:g2,s=oY(e),i=t-s,o=10,l=0;function c(){l+=o;var d=U5e(l,s,i,r);b2(e,d),l<r?window.requestAnimationFrame(c):a(e)}c()}function RB(e,t){var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=t.offsetHeight/3;a.bottom+s>r.bottom?b2(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):a.top-s<r.top&&b2(e,Math.max(t.offsetTop-s,0))}function $5e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function FB(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function V5e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var lY=!1,q5e={get passive(){return lY=!0}},bN=typeof window<"u"?window:{};bN.addEventListener&&bN.removeEventListener&&(bN.addEventListener("p",g2,q5e),bN.removeEventListener("p",g2,!1));var z5e=lY;function H5e(e){return e!=null}function W5e(e){return Array.isArray(e)}function yN(e,t,r){return e?t:r}var G5e=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var i=Object.entries(t).filter(function(o){var l=ef(o,1),c=l[0];return!a.includes(c)});return i.reduce(function(o,l){var c=ef(l,2),d=c[0],u=c[1];return o[d]=u,o},{})},Y5e=["children","innerProps"],K5e=["children","innerProps"];function X5e(e){var t=e.maxHeight,r=e.menuEl,a=e.minHeight,s=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=B5e(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u=c.getBoundingClientRect(),h=u.height,f=r.getBoundingClientRect(),p=f.bottom,x=f.height,g=f.top,b=r.offsetParent.getBoundingClientRect(),y=b.top,S=o?window.innerHeight:L5e(c),w=oY(c),k=parseInt(getComputedStyle(r).marginBottom,10),C=parseInt(getComputedStyle(r).marginTop,10),D=y-C,E=S-g,A=D+w,I=h-w-g,L=p-S+w+k,P=w+g-C,O=160;switch(s){case"auto":case"bottom":if(E>=x)return{placement:"bottom",maxHeight:t};if(I>=x&&!o)return i&&gN(c,L,O),{placement:"bottom",maxHeight:t};if(!o&&I>=a||o&&E>=a){i&&gN(c,L,O);var Y=o?E-k:I-k;return{placement:"bottom",maxHeight:Y}}if(s==="auto"||o){var q=t,K=o?D:A;return K>=a&&(q=Math.min(K-k-l,t)),{placement:"top",maxHeight:q}}if(s==="bottom")return i&&b2(c,L),{placement:"bottom",maxHeight:t};break;case"top":if(D>=x)return{placement:"top",maxHeight:t};if(A>=x&&!o)return i&&gN(c,P,O),{placement:"top",maxHeight:t};if(!o&&A>=a||o&&D>=a){var U=t;return(!o&&A>=a||o&&D>=a)&&(U=o?D-C:A-C),i&&gN(c,P,O),{placement:"top",maxHeight:U}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return d}function Q5e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var cY=function(t){return t==="auto"?"bottom":t},J5e=function(t,r){var a,s=t.placement,i=t.theme,o=i.borderRadius,l=i.spacing,c=i.colors;return Xr((a={label:"menu"},Kb(a,Q5e(s),"100%"),Kb(a,"position","absolute"),Kb(a,"width","100%"),Kb(a,"zIndex",1),a),r?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},dY=j.createContext(null),Z5e=function(t){var r=t.children,a=t.minMenuHeight,s=t.maxMenuHeight,i=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=j.useContext(dY)||{},u=d.setPortalPlacement,h=j.useRef(null),f=j.useState(s),p=ef(f,2),x=p[0],g=p[1],b=j.useState(null),y=ef(b,2),S=y[0],w=y[1],k=c.spacing.controlHeight;return p3(function(){var C=h.current;if(C){var D=o==="fixed",E=l&&!D,A=X5e({maxHeight:s,menuEl:C,minHeight:a,placement:i,shouldScroll:E,isFixedPosition:D,controlHeight:k});g(A.maxHeight),w(A.placement),u?.(A.placement)}},[s,i,o,l,a,u,k]),r({ref:h,placerProps:Xr(Xr({},t),{},{placement:S||cY(i),maxHeight:x})})},e3e=function(t){var r=t.children,a=t.innerRef,s=t.innerProps;return Gr("div",ea({},_s(t,"menu",{menu:!0}),{ref:a},s),r)},t3e=e3e,r3e=function(t,r){var a=t.maxHeight,s=t.theme.spacing.baseUnit;return Xr({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},a3e=function(t){var r=t.children,a=t.innerProps,s=t.innerRef,i=t.isMulti;return Gr("div",ea({},_s(t,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:s},a),r)},uY=function(t,r){var a=t.theme,s=a.spacing.baseUnit,i=a.colors;return Xr({textAlign:"center"},r?{}:{color:i.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},n3e=uY,s3e=uY,i3e=function(t){var r=t.children,a=r===void 0?"No options":r,s=t.innerProps,i=Sf(t,Y5e);return Gr("div",ea({},_s(Xr(Xr({},i),{},{children:a,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),a)},o3e=function(t){var r=t.children,a=r===void 0?"Loading...":r,s=t.innerProps,i=Sf(t,K5e);return Gr("div",ea({},_s(Xr(Xr({},i),{},{children:a,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),a)},l3e=function(t){var r=t.rect,a=t.offset,s=t.position;return{left:r.left,position:s,top:a,width:r.width,zIndex:1}},c3e=function(t){var r=t.appendTo,a=t.children,s=t.controlElement,i=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=j.useRef(null),d=j.useRef(null),u=j.useState(cY(o)),h=ef(u,2),f=h[0],p=h[1],x=j.useMemo(function(){return{setPortalPlacement:p}},[]),g=j.useState(null),b=ef(g,2),y=b[0],S=b[1],w=j.useCallback(function(){if(s){var E=$5e(s),A=l==="fixed"?0:window.pageYOffset,I=E[f]+A;(I!==y?.offset||E.left!==y?.rect.left||E.width!==y?.rect.width)&&S({offset:I,rect:E})}},[s,l,f,y?.offset,y?.rect.left,y?.rect.width]);p3(function(){w()},[w]);var k=j.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),s&&c.current&&(d.current=sY(s,c.current,w,{elementResize:"ResizeObserver"in window}))},[s,w]);p3(function(){k()},[k]);var C=j.useCallback(function(E){c.current=E,k()},[k]);if(!r&&l!=="fixed"||!y)return null;var D=Gr("div",ea({ref:C},_s(Xr(Xr({},t),{},{offset:y.offset,position:l,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),a);return Gr(dY.Provider,{value:x},r?a1.createPortal(D,r):D)},d3e=function(t){var r=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},u3e=function(t){var r=t.children,a=t.innerProps,s=t.isDisabled,i=t.isRtl;return Gr("div",ea({},_s(t,"container",{"--is-disabled":s,"--is-rtl":i}),a),r)},h3e=function(t,r){var a=t.theme.spacing,s=t.isMulti,i=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Xr({alignItems:"center",display:s&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},f3e=function(t){var r=t.children,a=t.innerProps,s=t.isMulti,i=t.hasValue;return Gr("div",ea({},_s(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":i}),a),r)},m3e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},p3e=function(t){var r=t.children,a=t.innerProps;return Gr("div",ea({},_s(t,"indicatorsContainer",{indicators:!0}),a),r)},LB,x3e=["size"],v3e=["innerProps","isRtl","size"],g3e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},hY=function(t){var r=t.size,a=Sf(t,x3e);return Gr("svg",ea({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:g3e},a))},fI=function(t){return Gr(hY,ea({size:20},t),Gr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fY=function(t){return Gr(hY,ea({size:20},t),Gr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},mY=function(t,r){var a=t.isFocused,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Xr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:a?o.neutral60:o.neutral20,padding:i*2,":hover":{color:a?o.neutral80:o.neutral40}})},b3e=mY,y3e=function(t){var r=t.children,a=t.innerProps;return Gr("div",ea({},_s(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),r||Gr(fY,null))},j3e=mY,N3e=function(t){var r=t.children,a=t.innerProps;return Gr("div",ea({},_s(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),r||Gr(fI,null))},w3e=function(t,r){var a=t.isDisabled,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Xr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},S3e=function(t){var r=t.innerProps;return Gr("span",ea({},r,_s(t,"indicatorSeparator",{"indicator-separator":!0})))},C3e=UDe(LB||(LB=$De([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),k3e=function(t,r){var a=t.isFocused,s=t.size,i=t.theme,o=i.colors,l=i.spacing.baseUnit;return Xr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},WE=function(t){var r=t.delay,a=t.offset;return Gr("span",{css:iI({animation:"".concat(C3e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},_3e=function(t){var r=t.innerProps,a=t.isRtl,s=t.size,i=s===void 0?4:s,o=Sf(t,v3e);return Gr("div",ea({},_s(Xr(Xr({},o),{},{innerProps:r,isRtl:a,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),Gr(WE,{delay:0,offset:a}),Gr(WE,{delay:160,offset:!0}),Gr(WE,{delay:320,offset:!a}))},E3e=function(t,r){var a=t.isDisabled,s=t.isFocused,i=t.theme,o=i.colors,l=i.borderRadius,c=i.spacing;return Xr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:s?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},D3e=function(t){var r=t.children,a=t.isDisabled,s=t.isFocused,i=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return Gr("div",ea({ref:i},_s(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":s,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),r)},A3e=D3e,T3e=["data"],I3e=function(t,r){var a=t.theme.spacing;return r?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},P3e=function(t){var r=t.children,a=t.cx,s=t.getStyles,i=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,d=t.label,u=t.theme,h=t.selectProps;return Gr("div",ea({},_s(t,"group",{group:!0}),c),Gr(o,ea({},l,{selectProps:h,theme:u,getStyles:s,getClassNames:i,cx:a}),d),Gr("div",null,r))},O3e=function(t,r){var a=t.theme,s=a.colors,i=a.spacing;return Xr({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},M3e=function(t){var r=iY(t);r.data;var a=Sf(r,T3e);return Gr("div",ea({},_s(t,"groupHeading",{"group-heading":!0}),a))},R3e=P3e,F3e=["innerRef","isDisabled","isHidden","inputClassName"],L3e=function(t,r){var a=t.isDisabled,s=t.value,i=t.theme,o=i.spacing,l=i.colors;return Xr(Xr({visibility:a?"hidden":"visible",transform:s?"translateZ(0)":""},B3e),r?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},pY={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},B3e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},pY)},U3e=function(t){return Xr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},pY)},$3e=function(t){var r=t.cx,a=t.value,s=iY(t),i=s.innerRef,o=s.isDisabled,l=s.isHidden,c=s.inputClassName,d=Sf(s,F3e);return Gr("div",ea({},_s(t,"input",{"input-container":!0}),{"data-value":a||""}),Gr("input",ea({className:r({input:!0},c),ref:i,style:U3e(l),disabled:o},d)))},V3e=$3e,q3e=function(t,r){var a=t.theme,s=a.spacing,i=a.borderRadius,o=a.colors;return Xr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:s.baseUnit/2})},z3e=function(t,r){var a=t.theme,s=a.borderRadius,i=a.colors,o=t.cropWithEllipsis;return Xr({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},H3e=function(t,r){var a=t.theme,s=a.spacing,i=a.borderRadius,o=a.colors,l=t.isFocused;return Xr({alignItems:"center",display:"flex"},r?{}:{borderRadius:i/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},xY=function(t){var r=t.children,a=t.innerProps;return Gr("div",a,r)},W3e=xY,G3e=xY;function Y3e(e){var t=e.children,r=e.innerProps;return Gr("div",ea({role:"button"},r),t||Gr(fI,{size:14}))}var K3e=function(t){var r=t.children,a=t.components,s=t.data,i=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,d=a.Container,u=a.Label,h=a.Remove;return Gr(d,{data:s,innerProps:Xr(Xr({},_s(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:c},Gr(u,{data:s,innerProps:Xr({},_s(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},r),Gr(h,{data:s,innerProps:Xr(Xr({},_s(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},l),selectProps:c}))},X3e=K3e,Q3e=function(t,r){var a=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Xr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:i?c.primary:s?c.primary25:"transparent",color:a?c.neutral20:i?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:i?c.primary:c.primary50}})},J3e=function(t){var r=t.children,a=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.innerRef,l=t.innerProps;return Gr("div",ea({},_s(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":s,"option--is-selected":i}),{ref:o,"aria-disabled":a},l),r)},Z3e=J3e,eAe=function(t,r){var a=t.theme,s=a.spacing,i=a.colors;return Xr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:i.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},tAe=function(t){var r=t.children,a=t.innerProps;return Gr("div",ea({},_s(t,"placeholder",{placeholder:!0}),a),r)},rAe=tAe,aAe=function(t,r){var a=t.isDisabled,s=t.theme,i=s.spacing,o=s.colors;return Xr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:a?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},nAe=function(t){var r=t.children,a=t.isDisabled,s=t.innerProps;return Gr("div",ea({},_s(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),s),r)},sAe=nAe,iAe={ClearIndicator:N3e,Control:A3e,DropdownIndicator:y3e,DownChevron:fY,CrossIcon:fI,Group:R3e,GroupHeading:M3e,IndicatorsContainer:p3e,IndicatorSeparator:S3e,Input:V3e,LoadingIndicator:_3e,Menu:t3e,MenuList:a3e,MenuPortal:c3e,LoadingMessage:o3e,NoOptionsMessage:i3e,MultiValue:X3e,MultiValueContainer:W3e,MultiValueLabel:G3e,MultiValueRemove:Y3e,Option:Z3e,Placeholder:rAe,SelectContainer:u3e,SingleValue:sAe,ValueContainer:f3e},oAe=function(t){return Xr(Xr({},iAe),t.components)},BB=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function lAe(e,t){return!!(e===t||BB(e)&&BB(t))}function cAe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!lAe(e[r],t[r]))return!1;return!0}function dAe(e,t){t===void 0&&(t=cAe);var r=null;function a(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return a.clear=function(){r=null},a}var uAe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},hAe=function(t){return Gr("span",ea({css:uAe},t))},UB=hAe,fAe={guidance:function(t){var r=t.isSearchable,a=t.isMulti,s=t.tabSelectsValue,i=t.context,o=t.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,a=t.label,s=a===void 0?"":a,i=t.labels,o=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var r=t.context,a=t.focused,s=t.options,i=t.label,o=i===void 0?"":i,l=t.selectValue,c=t.isDisabled,d=t.isSelected,u=t.isAppleDevice,h=function(g,b){return g&&g.length?"".concat(g.indexOf(b)+1," of ").concat(g.length):""};if(r==="value"&&l)return"value ".concat(o," focused, ").concat(h(l,a),".");if(r==="menu"&&u){var f=c?" disabled":"",p="".concat(d?" selected":"").concat(f);return"".concat(o).concat(p,", ").concat(h(s,a),".")}return""},onFilter:function(t){var r=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(r?" for search term "+r:"",".")}},mAe=function(t){var r=t.ariaSelection,a=t.focusedOption,s=t.focusedValue,i=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,d=t.id,u=t.isAppleDevice,h=c.ariaLiveMessages,f=c.getOptionLabel,p=c.inputValue,x=c.isMulti,g=c.isOptionDisabled,b=c.isSearchable,y=c.menuIsOpen,S=c.options,w=c.screenReaderStatus,k=c.tabSelectsValue,C=c.isLoading,D=c["aria-label"],E=c["aria-live"],A=j.useMemo(function(){return Xr(Xr({},fAe),h||{})},[h]),I=j.useMemo(function(){var K="";if(r&&A.onChange){var U=r.option,J=r.options,F=r.removedValue,X=r.removedValues,Q=r.value,ie=function(ce){return Array.isArray(ce)?null:ce},M=F||U||ie(Q),V=M?f(M):"",W=J||X||void 0,ee=W?W.map(f):[],re=Xr({isDisabled:M&&g(M,l),label:V,labels:ee},r);K=A.onChange(re)}return K},[r,A,g,l,f]),L=j.useMemo(function(){var K="",U=a||s,J=!!(a&&l&&l.includes(a));if(U&&A.onFocus){var F={focused:U,label:f(U),isDisabled:g(U,l),isSelected:J,options:i,context:U===a?"menu":"value",selectValue:l,isAppleDevice:u};K=A.onFocus(F)}return K},[a,s,f,g,A,i,l,u]),P=j.useMemo(function(){var K="";if(y&&S.length&&!C&&A.onFilter){var U=w({count:i.length});K=A.onFilter({inputValue:p,resultsMessage:U})}return K},[i,p,y,A,S,w,C]),O=r?.action==="initial-input-focus",Y=j.useMemo(function(){var K="";if(A.guidance){var U=s?"value":y?"menu":"input";K=A.guidance({"aria-label":D,context:U,isDisabled:a&&g(a,l),isMulti:x,isSearchable:b,tabSelectsValue:k,isInitialFocus:O})}return K},[D,a,s,x,g,b,y,A,l,k,O]),q=Gr(j.Fragment,null,Gr("span",{id:"aria-selection"},I),Gr("span",{id:"aria-focused"},L),Gr("span",{id:"aria-results"},P),Gr("span",{id:"aria-guidance"},Y));return Gr(j.Fragment,null,Gr(UB,{id:d},O&&q),Gr(UB,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!O&&q))},pAe=mAe,x3=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],xAe=new RegExp("["+x3.map(function(e){return e.letters}).join("")+"]","g"),vY={};for(var GE=0;GE<x3.length;GE++)for(var YE=x3[GE],KE=0;KE<YE.letters.length;KE++)vY[YE.letters[KE]]=YE.base;var gY=function(t){return t.replace(xAe,function(r){return vY[r]})},vAe=dAe(gY),$B=function(t){return t.replace(/^\s+|\s+$/g,"")},gAe=function(t){return"".concat(t.label," ").concat(t.value)},bAe=function(t){return function(r,a){if(r.data.__isNew__)return!0;var s=Xr({ignoreCase:!0,ignoreAccents:!0,stringify:gAe,trim:!0,matchFrom:"any"},t),i=s.ignoreCase,o=s.ignoreAccents,l=s.stringify,c=s.trim,d=s.matchFrom,u=c?$B(a):a,h=c?$B(l(r)):l(r);return i&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=vAe(u),h=gY(h)),d==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},yAe=["innerRef"];function jAe(e){var t=e.innerRef,r=Sf(e,yAe),a=G5e(r,"onExited","in","enter","exit","appear");return Gr("input",ea({ref:t},a,{css:iI({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var NAe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function wAe(e){var t=e.isEnabled,r=e.onBottomArrive,a=e.onBottomLeave,s=e.onTopArrive,i=e.onTopLeave,o=j.useRef(!1),l=j.useRef(!1),c=j.useRef(0),d=j.useRef(null),u=j.useCallback(function(b,y){if(d.current!==null){var S=d.current,w=S.scrollTop,k=S.scrollHeight,C=S.clientHeight,D=d.current,E=y>0,A=k-C-w,I=!1;A>y&&o.current&&(a&&a(b),o.current=!1),E&&l.current&&(i&&i(b),l.current=!1),E&&y>A?(r&&!o.current&&r(b),D.scrollTop=k,I=!0,o.current=!0):!E&&-y>w&&(s&&!l.current&&s(b),D.scrollTop=0,I=!0,l.current=!0),I&&NAe(b)}},[r,a,s,i]),h=j.useCallback(function(b){u(b,b.deltaY)},[u]),f=j.useCallback(function(b){c.current=b.changedTouches[0].clientY},[]),p=j.useCallback(function(b){var y=c.current-b.changedTouches[0].clientY;u(b,y)},[u]),x=j.useCallback(function(b){if(b){var y=z5e?{passive:!1}:!1;b.addEventListener("wheel",h,y),b.addEventListener("touchstart",f,y),b.addEventListener("touchmove",p,y)}},[p,f,h]),g=j.useCallback(function(b){b&&(b.removeEventListener("wheel",h,!1),b.removeEventListener("touchstart",f,!1),b.removeEventListener("touchmove",p,!1))},[p,f,h]);return j.useEffect(function(){if(t){var b=d.current;return x(b),function(){g(b)}}},[t,x,g]),function(b){d.current=b}}var VB=["boxSizing","height","overflow","paddingRight","position"],qB={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function zB(e){e.cancelable&&e.preventDefault()}function HB(e){e.stopPropagation()}function WB(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function GB(){return"ontouchstart"in window||navigator.maxTouchPoints}var YB=!!(typeof window<"u"&&window.document&&window.document.createElement),Tb=0,Wv={capture:!1,passive:!1};function SAe(e){var t=e.isEnabled,r=e.accountForScrollbars,a=r===void 0?!0:r,s=j.useRef({}),i=j.useRef(null),o=j.useCallback(function(c){if(YB){var d=document.body,u=d&&d.style;if(a&&VB.forEach(function(x){var g=u&&u[x];s.current[x]=g}),a&&Tb<1){var h=parseInt(s.current.paddingRight,10)||0,f=document.body?document.body.clientWidth:0,p=window.innerWidth-f+h||0;Object.keys(qB).forEach(function(x){var g=qB[x];u&&(u[x]=g)}),u&&(u.paddingRight="".concat(p,"px"))}d&&GB()&&(d.addEventListener("touchmove",zB,Wv),c&&(c.addEventListener("touchstart",WB,Wv),c.addEventListener("touchmove",HB,Wv))),Tb+=1}},[a]),l=j.useCallback(function(c){if(YB){var d=document.body,u=d&&d.style;Tb=Math.max(Tb-1,0),a&&Tb<1&&VB.forEach(function(h){var f=s.current[h];u&&(u[h]=f)}),d&&GB()&&(d.removeEventListener("touchmove",zB,Wv),c&&(c.removeEventListener("touchstart",WB,Wv),c.removeEventListener("touchmove",HB,Wv)))}},[a]);return j.useEffect(function(){if(t){var c=i.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){i.current=c}}var CAe=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},kAe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function _Ae(e){var t=e.children,r=e.lockEnabled,a=e.captureEnabled,s=a===void 0?!0:a,i=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,d=wAe({isEnabled:s,onBottomArrive:i,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),u=SAe({isEnabled:r}),h=function(p){d(p),u(p)};return Gr(j.Fragment,null,r&&Gr("div",{onClick:CAe,css:kAe}),t(h))}var EAe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},DAe=function(t){var r=t.name,a=t.onFocus;return Gr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:EAe,value:"",onChange:function(){}})},AAe=DAe;function mI(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function TAe(){return mI(/^iPhone/i)}function bY(){return mI(/^Mac/i)}function IAe(){return mI(/^iPad/i)||bY()&&navigator.maxTouchPoints>1}function PAe(){return TAe()||IAe()}function OAe(){return bY()||PAe()}var MAe=function(t){return t.label},RAe=function(t){return t.label},FAe=function(t){return t.value},LAe=function(t){return!!t.isDisabled},BAe={clearIndicator:j3e,container:d3e,control:E3e,dropdownIndicator:b3e,group:I3e,groupHeading:O3e,indicatorsContainer:m3e,indicatorSeparator:w3e,input:L3e,loadingIndicator:k3e,loadingMessage:s3e,menu:J5e,menuList:r3e,menuPortal:l3e,multiValue:q3e,multiValueLabel:z3e,multiValueRemove:H3e,noOptionsMessage:n3e,option:Q3e,placeholder:eAe,singleValue:aAe,valueContainer:h3e},UAe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},$Ae=4,yY=4,VAe=38,qAe=yY*2,zAe={baseUnit:yY,controlHeight:VAe,menuGutter:qAe},XE={borderRadius:$Ae,colors:UAe,spacing:zAe},HAe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:FB(),captureMenuScroll:!FB(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:bAe(),formatGroupLabel:MAe,getOptionLabel:RAe,getOptionValue:FAe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:LAe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!V5e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function KB(e,t,r,a){var s=wY(e,t,r),i=SY(e,t,r),o=NY(e,t),l=y2(e,t);return{type:"option",data:t,isDisabled:s,isSelected:i,label:o,value:l,index:a}}function ZN(e,t){return e.options.map(function(r,a){if("options"in r){var s=r.options.map(function(o,l){return KB(e,o,t,l)}).filter(function(o){return QB(e,o)});return s.length>0?{type:"group",data:r,options:s,index:a}:void 0}var i=KB(e,r,t,a);return QB(e,i)?i:void 0}).filter(H5e)}function jY(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,tI(r.options.map(function(a){return a.data}))):t.push(r.data),t},[])}function XB(e,t){return e.reduce(function(r,a){return a.type==="group"?r.push.apply(r,tI(a.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(a.index,"-").concat(s.index)}}))):r.push({data:a.data,id:"".concat(t,"-").concat(a.index)}),r},[])}function WAe(e,t){return jY(ZN(e,t))}function QB(e,t){var r=e.inputValue,a=r===void 0?"":r,s=t.data,i=t.isSelected,o=t.label,l=t.value;return(!kY(e)||!i)&&CY(e,{label:o,value:l,data:s},a)}function GAe(e,t){var r=e.focusedValue,a=e.selectValue,s=a.indexOf(r);if(s>-1){var i=t.indexOf(r);if(i>-1)return r;if(s<t.length)return t[s]}return null}function YAe(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var QE=function(t,r){var a,s=(a=t.find(function(i){return i.data===r}))===null||a===void 0?void 0:a.id;return s||null},NY=function(t,r){return t.getOptionLabel(r)},y2=function(t,r){return t.getOptionValue(r)};function wY(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function SY(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var a=y2(e,t);return r.some(function(s){return y2(e,s)===a})}function CY(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var kY=function(t){var r=t.hideSelectedOptions,a=t.isMulti;return r===void 0?a:r},KAe=1,_Y=function(e){FEe(r,e);var t=UEe(r);function r(a){var s;if(MEe(this,r),s=t.call(this,a),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(c){s.controlRef=c},s.focusedOptionRef=null,s.getFocusedOptionRef=function(c){s.focusedOptionRef=c},s.menuListRef=null,s.getMenuListRef=function(c){s.menuListRef=c},s.inputRef=null,s.getInputRef=function(c){s.inputRef=c},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(c,d){var u=s.props,h=u.onChange,f=u.name;d.name=f,s.ariaOnChange(c,d),h(c,d)},s.setValue=function(c,d,u){var h=s.props,f=h.closeMenuOnSelect,p=h.isMulti,x=h.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:x}),f&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(c,{action:d,option:u})},s.selectOption=function(c){var d=s.props,u=d.blurInputOnSelect,h=d.isMulti,f=d.name,p=s.state.selectValue,x=h&&s.isOptionSelected(c,p),g=s.isOptionDisabled(c,p);if(x){var b=s.getOptionValue(c);s.setValue(p.filter(function(y){return s.getOptionValue(y)!==b}),"deselect-option",c)}else if(!g)h?s.setValue([].concat(tI(p),[c]),"select-option",c):s.setValue(c,"select-option");else{s.ariaOnChange(c,{action:"select-option",option:c,name:f});return}u&&s.blurInput()},s.removeValue=function(c){var d=s.props.isMulti,u=s.state.selectValue,h=s.getOptionValue(c),f=u.filter(function(x){return s.getOptionValue(x)!==h}),p=yN(d,f,f[0]||null);s.onChange(p,{action:"remove-value",removedValue:c}),s.focusInput()},s.clearValue=function(){var c=s.state.selectValue;s.onChange(yN(s.props.isMulti,[],null),{action:"clear",removedValues:c})},s.popValue=function(){var c=s.props.isMulti,d=s.state.selectValue,u=d[d.length-1],h=d.slice(0,d.length-1),f=yN(c,h,h[0]||null);u&&s.onChange(f,{action:"pop-value",removedValue:u})},s.getFocusedOptionId=function(c){return QE(s.state.focusableOptionsWithIds,c)},s.getFocusableOptionsWithIds=function(){return XB(ZN(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return F5e.apply(void 0,[s.props.classNamePrefix].concat(d))},s.getOptionLabel=function(c){return NY(s.props,c)},s.getOptionValue=function(c){return y2(s.props,c)},s.getStyles=function(c,d){var u=s.props.unstyled,h=BAe[c](d,u);h.boxSizing="border-box";var f=s.props.styles[c];return f?f(h,d):h},s.getClassNames=function(c,d){var u,h;return(u=(h=s.props.classNames)[c])===null||u===void 0?void 0:u.call(h,d)},s.getElementId=function(c){return"".concat(s.state.instancePrefix,"-").concat(c)},s.getComponents=function(){return oAe(s.props)},s.buildCategorizedOptions=function(){return ZN(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return jY(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(c,d){s.setState({ariaSelection:Xr({value:c},d)})},s.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(c){s.blockOptionHover=!1},s.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&s.onMenuClose():d&&s.openMenu("first"):(d&&(s.openAfterFocus=!0),s.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},s.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!s.props.isDisabled){var d=s.props,u=d.isMulti,h=d.menuIsOpen;s.focusInput(),h?(s.setState({inputIsHiddenAfterUpdate:!u}),s.onMenuClose()):s.openMenu("first"),c.preventDefault()}},s.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(s.clearValue(),c.preventDefault(),s.openAfterFocus=!1,c.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(c){typeof s.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&lC(c.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(c)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(s.initialTouchX=u.clientX,s.initialTouchY=u.clientY,s.userIsDragging=!1)},s.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var h=Math.abs(u.clientX-s.initialTouchX),f=Math.abs(u.clientY-s.initialTouchY),p=5;s.userIsDragging=h>p||f>p}},s.onTouchEnd=function(c){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(c.target)&&s.menuListRef&&!s.menuListRef.contains(c.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(c){s.userIsDragging||s.onControlMouseDown(c)},s.onClearIndicatorTouchEnd=function(c){s.userIsDragging||s.onClearIndicatorMouseDown(c)},s.onDropdownIndicatorTouchEnd=function(c){s.userIsDragging||s.onDropdownIndicatorMouseDown(c)},s.handleInputChange=function(c){var d=s.props.inputValue,u=c.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(u,{action:"input-change",prevInputValue:d}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(c){s.props.onFocus&&s.props.onFocus(c),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(c){var d=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(c),s.onInputChange("",{action:"input-blur",prevInputValue:d}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(c){if(!(s.blockOptionHover||s.state.focusedOption===c)){var d=s.getFocusableOptions(),u=d.indexOf(c);s.setState({focusedOption:c,focusedOptionId:u>-1?s.getFocusedOptionId(c):null})}},s.shouldHideSelectedOptions=function(){return kY(s.props)},s.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),s.focus()},s.onKeyDown=function(c){var d=s.props,u=d.isMulti,h=d.backspaceRemovesValue,f=d.escapeClearsValue,p=d.inputValue,x=d.isClearable,g=d.isDisabled,b=d.menuIsOpen,y=d.onKeyDown,S=d.tabSelectsValue,w=d.openMenuOnFocus,k=s.state,C=k.focusedOption,D=k.focusedValue,E=k.selectValue;if(!g&&!(typeof y=="function"&&(y(c),c.defaultPrevented))){switch(s.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||p)return;s.focusValue("previous");break;case"ArrowRight":if(!u||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(D)s.removeValue(D);else{if(!h)return;u?s.popValue():x&&s.clearValue()}break;case"Tab":if(s.isComposing||c.shiftKey||!b||!S||!C||w&&s.isOptionSelected(C,E))return;s.selectOption(C);break;case"Enter":if(c.keyCode===229)break;if(b){if(!C||s.isComposing)return;s.selectOption(C);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):x&&f&&s.clearValue();break;case" ":if(p)return;if(!b){s.openMenu("first");break}if(!C)return;s.selectOption(C);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}c.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++KAe),s.state.selectValue=MB(a.value),a.menuIsOpen&&s.state.selectValue.length){var i=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),l=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=i,s.state.focusedOption=o[l],s.state.focusedOptionId=QE(i,o[l])}return s}return REe(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&RB(this.menuListRef,this.focusedOptionRef),OAe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isDisabled,l=i.menuIsOpen,c=this.state.isFocused;(c&&!o&&s.isDisabled||c&&l&&!s.menuIsOpen)&&this.focusInput(),c&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(RB(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,i){this.props.onInputChange(s,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var i=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),u=s==="first"?0:d.length-1;if(!this.props.isMulti){var h=d.indexOf(l[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(s){var i=this.state,o=i.selectValue,l=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,u=-1;if(o.length){switch(s){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),s==="up"?c=d>0?d-1:l.length-1:s==="down"?c=(d+1)%l.length:s==="pageup"?(c=d-i,c<0&&(c=0)):s==="pagedown"?(c=d+i,c>l.length-1&&(c=l.length-1)):s==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(XE):Xr(Xr({},XE),this.props.theme):XE}},{key:"getCommonProps",value:function(){var s=this.clearValue,i=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,h=this.props,f=h.isMulti,p=h.isRtl,x=h.options,g=this.hasValue();return{clearValue:s,cx:i,getStyles:o,getClassNames:l,getValue:c,hasValue:g,isMulti:f,isRtl:p,options:x,selectOption:d,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,i=s.isClearable,o=s.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(s,i){return wY(this.props,s,i)}},{key:"isOptionSelected",value:function(s,i){return SY(this.props,s,i)}},{key:"filterOption",value:function(s,i){return CY(this.props,s,i)}},{key:"formatOptionLabel",value:function(s,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(s,{context:i,inputValue:o,selectValue:l})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,i=s.isDisabled,o=s.isSearchable,l=s.inputId,c=s.inputValue,d=s.tabIndex,u=s.form,h=s.menuIsOpen,f=s.required,p=this.getComponents(),x=p.Input,g=this.state,b=g.inputIsHidden,y=g.ariaSelection,S=this.commonProps,w=l||this.getElementId("input"),k=Xr(Xr(Xr({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":f,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?y?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?j.createElement(x,ea({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:i,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},k)):j.createElement(jAe,ea({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:g2,onFocus:this.onInputFocus,disabled:i,tabIndex:d,inputMode:"none",form:u,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,i=this.getComponents(),o=i.MultiValue,l=i.MultiValueContainer,c=i.MultiValueLabel,d=i.MultiValueRemove,u=i.SingleValue,h=i.Placeholder,f=this.commonProps,p=this.props,x=p.controlShouldRenderValue,g=p.isDisabled,b=p.isMulti,y=p.inputValue,S=p.placeholder,w=this.state,k=w.selectValue,C=w.focusedValue,D=w.isFocused;if(!this.hasValue()||!x)return y?null:j.createElement(h,ea({},f,{key:"placeholder",isDisabled:g,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),S);if(b)return k.map(function(A,I){var L=A===C,P="".concat(s.getOptionLabel(A),"-").concat(s.getOptionValue(A));return j.createElement(o,ea({},f,{components:{Container:l,Label:c,Remove:d},isFocused:L,isDisabled:g,key:P,index:I,removeProps:{onClick:function(){return s.removeValue(A)},onTouchEnd:function(){return s.removeValue(A)},onMouseDown:function(Y){Y.preventDefault()}},data:A}),s.formatOptionLabel(A,"value"))});if(y)return null;var E=k[0];return j.createElement(u,ea({},f,{data:E,isDisabled:g}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),i=s.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,ea({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),i=s.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!i||!d)return null;var h={"aria-hidden":"true"};return j.createElement(i,ea({},o,{innerProps:h,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator,o=s.IndicatorSeparator;if(!i||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return j.createElement(o,ea({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,ea({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,i=this.getComponents(),o=i.Group,l=i.GroupHeading,c=i.Menu,d=i.MenuList,u=i.MenuPortal,h=i.LoadingMessage,f=i.NoOptionsMessage,p=i.Option,x=this.commonProps,g=this.state.focusedOption,b=this.props,y=b.captureMenuScroll,S=b.inputValue,w=b.isLoading,k=b.loadingMessage,C=b.minMenuHeight,D=b.maxMenuHeight,E=b.menuIsOpen,A=b.menuPlacement,I=b.menuPosition,L=b.menuPortalTarget,P=b.menuShouldBlockScroll,O=b.menuShouldScrollIntoView,Y=b.noOptionsMessage,q=b.onMenuScrollToTop,K=b.onMenuScrollToBottom;if(!E)return null;var U=function(V,W){var ee=V.type,re=V.data,ne=V.isDisabled,ce=V.isSelected,ae=V.label,Z=V.value,de=g===re,z=ne?void 0:function(){return s.onOptionHover(re)},se=ne?void 0:function(){return s.selectOption(re)},Ne="".concat(s.getElementId("option"),"-").concat(W),ue={id:Ne,onClick:se,onMouseMove:z,onMouseOver:z,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:ce};return j.createElement(p,ea({},x,{innerProps:ue,data:re,isDisabled:ne,isSelected:ce,key:Ne,label:ae,type:ee,value:Z,isFocused:de,innerRef:de?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(V.data,"menu"))},J;if(this.hasOptions())J=this.getCategorizedOptions().map(function(M){if(M.type==="group"){var V=M.data,W=M.options,ee=M.index,re="".concat(s.getElementId("group"),"-").concat(ee),ne="".concat(re,"-heading");return j.createElement(o,ea({},x,{key:re,data:V,options:W,Heading:l,headingProps:{id:ne,data:M.data},label:s.formatGroupLabel(M.data)}),M.options.map(function(ce){return U(ce,"".concat(ee,"-").concat(ce.index))}))}else if(M.type==="option")return U(M,"".concat(M.index))});else if(w){var F=k({inputValue:S});if(F===null)return null;J=j.createElement(h,x,F)}else{var X=Y({inputValue:S});if(X===null)return null;J=j.createElement(f,x,X)}var Q={minMenuHeight:C,maxMenuHeight:D,menuPlacement:A,menuPosition:I,menuShouldScrollIntoView:O},ie=j.createElement(Z5e,ea({},x,Q),function(M){var V=M.ref,W=M.placerProps,ee=W.placement,re=W.maxHeight;return j.createElement(c,ea({},x,Q,{innerRef:V,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:w,placement:ee}),j.createElement(_Ae,{captureEnabled:y,onTopArrive:q,onBottomArrive:K,lockEnabled:P},function(ne){return j.createElement(d,ea({},x,{innerRef:function(ae){s.getMenuListRef(ae),ne(ae)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:s.getElementId("listbox")},isLoading:w,maxHeight:re,focusedOption:g}),J)}))});return L||I==="fixed"?j.createElement(u,ea({},x,{appendTo:L,controlElement:this.controlRef,menuPlacement:A,menuPosition:I}),ie):ie}},{key:"renderFormField",value:function(){var s=this,i=this.props,o=i.delimiter,l=i.isDisabled,c=i.isMulti,d=i.name,u=i.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!l)return j.createElement(AAe,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var f=h.map(function(g){return s.getOptionValue(g)}).join(o);return j.createElement("input",{name:d,type:"hidden",value:f})}else{var p=h.length>0?h.map(function(g,b){return j.createElement("input",{key:"i-".concat(b),name:d,type:"hidden",value:s.getOptionValue(g)})}):j.createElement("input",{name:d,type:"hidden",value:""});return j.createElement("div",null,p)}else{var x=h[0]?this.getOptionValue(h[0]):"";return j.createElement("input",{name:d,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,i=this.state,o=i.ariaSelection,l=i.focusedOption,c=i.focusedValue,d=i.isFocused,u=i.selectValue,h=this.getFocusableOptions();return j.createElement(pAe,ea({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),i=s.Control,o=s.IndicatorsContainer,l=s.SelectContainer,c=s.ValueContainer,d=this.props,u=d.className,h=d.id,f=d.isDisabled,p=d.menuIsOpen,x=this.state.isFocused,g=this.commonProps=this.getCommonProps();return j.createElement(l,ea({},g,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:f,isFocused:x}),this.renderLiveRegion(),j.createElement(i,ea({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:f,isFocused:x,menuIsOpen:p}),j.createElement(c,ea({},g,{isDisabled:f}),this.renderPlaceholderOrValue(),this.renderInput()),j.createElement(o,ea({},g,{isDisabled:f}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,i){var o=i.prevProps,l=i.clearFocusValueOnUpdate,c=i.inputIsHiddenAfterUpdate,d=i.ariaSelection,u=i.isFocused,h=i.prevWasFocused,f=i.instancePrefix,p=s.options,x=s.value,g=s.menuIsOpen,b=s.inputValue,y=s.isMulti,S=MB(x),w={};if(o&&(x!==o.value||p!==o.options||g!==o.menuIsOpen||b!==o.inputValue)){var k=g?WAe(s,S):[],C=g?XB(ZN(s,S),"".concat(f,"-option")):[],D=l?GAe(i,S):null,E=YAe(i,k),A=QE(C,E);w={selectValue:S,focusedOption:E,focusedOptionId:A,focusableOptionsWithIds:C,focusedValue:D,clearFocusValueOnUpdate:!1}}var I=c!=null&&s!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},L=d,P=u&&h;return u&&!P&&(L={value:yN(y,S,S[0]||null),options:S,action:"initial-input-focus"},P=!h),d?.action==="initial-input-focus"&&(L=null),Xr(Xr(Xr({},w),I),{},{prevProps:s,ariaSelection:L,prevWasFocused:P})}}]),r}(j.Component);_Y.defaultProps=HAe;var XAe=j.forwardRef(function(e,t){var r=OEe(e);return j.createElement(_Y,ea({ref:t},r))}),j2=XAe;const JE=10;function QAe(){const[e,t]=j.useState([]),[r,a]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState([]),[S,w]=j.useState([]),[k,C]=j.useState([]),D=async()=>{try{const de=(await Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(z=>({label:`${z.categoryName} (${z.prefix})`,value:z._id}));h(de),y(de)}catch(Z){console.error("Failed to fetch categories:",Z)}},E=async()=>{try{const Z=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),Ne=(await Oe.get("/api/vendors",{params:{companyId:Z,financialYear:de}})).data.filter(ue=>!ue.isDeleted&&!ue.isBlocked).map(ue=>({label:`${ue.name1} ${ue.name2||""}`,value:ue._id,vnNo:ue.vnNo||""}));d(Ne),w(Ne)}catch(Z){console.error("Failed to fetch vendors:",Z)}},A=async()=>{try{const Z=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),z=await Oe.get("/api/locations",{params:{companyId:Z,financialYear:de}});Array.isArray(z.data)?C(z.data):z.data&&Array.isArray(z.data.locations)?C(z.data.locations):C([])}catch(Z){console.error("Failed to fetch locations:",Z),C([])}};j.useEffect(()=>{P(),E(),D(),A()},[]);const I=async Z=>{try{const z=(await Oe.get(`/api/quotations/${Z}`)).data;l({...z,validityDate:z.validityDate?new Date(z.validityDate).toISOString().split("T")[0]:"",items:z.items.map(se=>({...se,deliveryDate:se.deliveryDate?new Date(se.deliveryDate).toISOString().split("T")[0]:""}))})}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},L=async()=>{try{const Z=o.items.reduce((z,se)=>z+(parseFloat(se.price)||0),0),de={...o,totalPrice:Z,items:o.items.map(z=>({...z,deliveryDate:z.deliveryDate||null}))};await Oe.put(`/api/quotations/${o._id}`,de),alert("Quotation updated successfully!"),l(null),P()}catch(Z){console.error("Failed to update quotation:",Z),alert("Failed to update quotation")}};j.useEffect(()=>{P(),E(),D()},[]);const P=async()=>{try{const Z=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear");a(!0);const se=(await Oe.get("/api/quotations/get",{params:{companyId:Z,financialYear:de}})).data.sort((Ne,ue)=>new Date(ue.createdAt)-new Date(Ne.createdAt));t(se),i(null)}catch(Z){console.error("Failed to fetch quotations:",Z),i("Failed to load quotations. Please try again.")}finally{a(!1)}},O=()=>{l(null)},Y=(Z,de)=>{l(z=>({...z,[Z]:de}))},q=(Z,de,z)=>{const se=[...o.items];se[Z][de]=z,l(Ne=>({...Ne,items:se}))},K=Z=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Quotation - ${Z._id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div className="header">
          <h1>QUOTATION</h1>
          <h3>Quotation ID: ${Z._id}</h3>
        </div>
        
        <div className="info-grid">
          <div>
            <div className="info-item"><strong>Indent ID:</strong> ${Z.indentId}</div>
            <div className="info-item"><strong>Category ID:</strong> ${Z.categoryId}</div>
            <div className="info-item"><strong>RFQ Category:</strong> ${Z.rfqCategoryId}</div>
          </div>
          <div>
            <div className="info-item"><strong>Vendor:</strong> ${Z.vendorName}</div>
            <div className="info-item"><strong>Date:</strong> ${new Date(Z.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${Z.note?`<div className="info-item"><strong>Note:</strong> ${Z.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${Z.items.map((se,Ne)=>`
              <tr>
                <td>${Ne+1}</td>
                <td>${se.materialId}</td>
                <td>${se.description}</td>
                <td>${se.qty}</td>
                <td>${se.unit||se.baseUnit}</td>
                <td>${se.price?parseFloat(se.price).toFixed(2):"0.00"}</td>
                <td>${se.price&&se.qty?(parseFloat(se.price)*parseFloat(se.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr className="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${Z.items.reduce((se,Ne)=>{const ue=Ne.price&&Ne.qty?parseFloat(Ne.price)*parseFloat(Ne.qty):0;return se+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div className="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,z=window.open("","_blank");z.document.write(de),z.document.close(),z.focus(),z.print()},[U,J]=j.useState(""),[F,X]=j.useState(1),[Q,ie]=j.useState(null),M=j.useMemo(()=>{let Z=e;return(f||x)&&(Z=Z.filter(de=>{const z=new Date(de.createdAt),se=f?new Date(f):null,Ne=x?new Date(x):null;return se&&Ne?z>=se&&z<=Ne:se?z>=se:Ne?z<=Ne:!0})),U&&(Z=Z.filter(de=>[de.quotationNumber,de.indentId,de.vendorName,de.vnNo,de.note,de.vendor,de.location,de.quotationReference].join(" ").toLowerCase().includes(U.toLowerCase())),Z=Z.sort((de,z)=>{const se=parseFloat(de.totalPrice)||0,Ne=parseFloat(z.totalPrice)||0;return se-Ne})),Z},[U,e,f,x]),V=()=>{J(""),p(""),g(""),X(1)},W=async Z=>{try{const de=await Oe.get(`/api/quotations/${Z}`);ie(de.data)}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},ee=(Z,de)=>{if(!de)return"transparent";switch(Z){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},re=Math.ceil(M.length/JE),ne=j.useMemo(()=>{const Z=(F-1)*JE;return M.slice(Z,Z+JE)},[M,F]),ce=Z=>{J(Z.target.value),X(1)},ae=Z=>{Z<1||Z>re||X(Z)};return r?n.jsx("div",{className:"d-flex justify-content-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):s?n.jsxs("div",{style:{padding:"20px",marginLeft:"300px"},children:[n.jsx("h2",{children:"Quotations"}),n.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),n.jsx("button",{onClick:P,style:{padding:"10px 20px"},children:"Retry"})]}):Q?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Quotation Preview - ",Q.quotationNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>ie(null)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Indent ID"}),n.jsx("div",{className:"fw-bold",children:Q.indentId})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Vendor"}),n.jsx("div",{className:"fw-bold",children:Q.vendorName})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Vendor No"}),n.jsx("div",{className:"fw-bold",children:Q.vnNo||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Quotation Reference"}),n.jsx("div",{className:"fw-bold",children:Q.quotationReference||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Validity Date"}),n.jsx("div",{className:"fw-bold",children:Q.validityDate?new Date(Q.validityDate).toLocaleDateString():"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Location"}),n.jsx("div",{className:"fw-bold",children:Q.location||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Buyer Group"}),n.jsx("div",{className:"fw-bold",children:Q.buyerGroup||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Created Date"}),n.jsx("div",{className:"fw-bold",children:new Date(Q.createdAt).toLocaleDateString()})]})})})]}),Q.note&&n.jsxs("div",{className:"alert alert-info mb-4",children:[n.jsx("strong",{children:"Note:"})," ",Q.note]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:Q.items.map((Z,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:Z.materialId}),n.jsx("td",{children:Z.description}),n.jsx("td",{children:Z.qty}),n.jsx("td",{children:Z.unit||Z.baseUnit}),n.jsxs("td",{children:["",Z.price?parseFloat(Z.price).toFixed(2):"0.00"]}),n.jsx("td",{children:Z.deliveryDate?new Date(Z.deliveryDate).toLocaleDateString():"-"}),n.jsxs("td",{children:["",Z.price&&Z.qty?(parseFloat(Z.price)*parseFloat(Z.qty)).toFixed(2):"0.00"]})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"7",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",Q.items.reduce((Z,de)=>{const z=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return Z+z},0).toFixed(2)]})]})})]})})]})]})})}):o?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Quotation - ",o.quotationNumber]}),n.jsxs("div",{children:[n.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:L,children:"Save Changes"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:O,children:"Cancel"})]})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Indent ID"}),n.jsx("input",{type:"text",className:"form-control",value:o.indentId||"",onChange:Z=>Y("indentId",Z.target.value),readOnly:!0})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"RFQ Category"}),n.jsx(j2,{options:b,value:b.find(Z=>Z.value===o.rfqCategoryId),onChange:Z=>Y("rfqCategoryId",Z?.value),placeholder:"Select Category"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Vendor"}),n.jsx(j2,{options:S,value:S.find(Z=>Z.value===o.vendor),onChange:Z=>{o.vendor||(Y("vendor",Z?.value),Y("vendorName",Z?.label),Y("vnNo",Z?.vnNo||""))},placeholder:"Select Vendor",isDisabled:!!o.vendor})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Quotation Reference"}),n.jsx("input",{type:"text",className:"form-control",value:o.quotationReference||"",onChange:Z=>Y("quotationReference",Z.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Validity Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.validityDate||"",onChange:Z=>Y("validityDate",Z.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsxs("select",{className:"form-select",value:o.location||"",onChange:Z=>Y("location",Z.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),k.map((Z,de)=>n.jsx("option",{value:Z.name||Z,children:Z.name||Z},de))]})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Buyer Group"}),n.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:Z=>Y("buyerGroup",Z.target.value)})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Note"}),n.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:Z=>Y("note",Z.target.value),placeholder:"Add any notes (optional)"})]})]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:o.items.map((Z,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.materialId||"",onChange:z=>q(de,"materialId",z.target.value),readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.description||"",onChange:z=>q(de,"description",z.target.value),readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Z.qty||"",onChange:z=>q(de,"qty",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.baseUnit||"",onChange:z=>q(de,"baseUnit",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.orderUnit||"",onChange:z=>q(de,"orderUnit",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.unit||"",onChange:z=>q(de,"unit",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.materialgroup||"",onChange:z=>q(de,"materialgroup",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Z.deliveryDate||"",onChange:z=>q(de,"deliveryDate",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Z.price||"",onChange:z=>q(de,"price",z.target.value),step:"0.01"})}),n.jsx("td",{children:n.jsxs("span",{className:"fw-bold text-success",children:["",Z.price&&Z.qty?(parseFloat(Z.price)*parseFloat(Z.qty)).toFixed(2):"0.00"]})})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"10",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((Z,de)=>{const z=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return Z+z},0).toFixed(2)]})]})})]})})]})})})]})})}):n.jsxs("div",{className:"content",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h6",{children:"All Quotations"}),n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Search by Quotation Reference etc.......",value:U,onChange:ce,className:"form-control",style:{width:250,marginTop:"22px"}}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),n.jsx("input",{type:"date",value:f,onChange:Z=>{p(Z.target.value),X(1)},className:"form-control",style:{width:150}})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),n.jsx("input",{type:"date",value:x,onChange:Z=>{g(Z.target.value),X(1)},className:"form-control",style:{width:150}})]}),n.jsx("button",{onClick:V,className:"btn btn-sm btn-soft-warning",children:"Reset"}),n.jsx("button",{onClick:P,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",id:"DataTables_Table_0","aria-describedby":"DataTables_Table_0_info",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Quotation ID"}),n.jsx("th",{children:"Quotation Reference"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),"              ",n.jsx("th",{children:"Validity Date"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"TotalPrice"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:ne.map((Z,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:Z.quotationNumber}),n.jsx("td",{children:Z.quotationReference}),n.jsx("td",{className:"text-wrap",children:Z.vendorName}),n.jsx("td",{className:"text-wrap",children:Z.location}),n.jsx("td",{children:new Date(Z.validityDate).toLocaleDateString()}),n.jsx("td",{children:new Date(Z.createdAt).toLocaleDateString()}),n.jsx("td",{style:{backgroundColor:ee(de,!!U)},children:Z.totalPrice}),n.jsx("td",{className:"text-wrap",children:Z.note||"-"}),n.jsxs("td",{children:[n.jsx("button",{onClick:()=>W(Z._id),className:"btn btn-sm ",title:"Preview",children:n.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),n.jsx("button",{onClick:()=>I(Z._id),className:"btn btn-sm ",title:"Edit",children:n.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),n.jsx("button",{onClick:()=>K(Z),className:"btn btn-sm ",title:"Print",children:n.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},Z._id||de))})]})})})}),n.jsx("div",{className:"d-flex justify-content-end mt-2",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[n.jsx("li",{className:`page-item${F===1?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(F-1),disabled:F===1,children:n.jsx("i",{className:"fas fa-angle-left"})})}),(()=>{const Z=[];let de=[1,2],z=[re-1,re].filter(ue=>ue>2),se=[];F<=4?(de=[1,2,3,4,5].filter(ue=>ue<=re),z=[re-1,re].filter(ue=>ue>5)):F>=re-3?(de=[1,2].filter(ue=>ue<re-4),z=[re-4,re-3,re-2,re-1,re].filter(ue=>ue>2&&ue<=re)):(de=[1,2],se=[F-1,F,F+1],z=[re-1,re]);const Ne=ue=>ue.map(oe=>n.jsx("li",{className:`page-item${F===oe?" active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(oe),children:oe})},oe));return Z.push(...Ne(de)),(se.length>0&&se[0]>de[de.length-1]+1||se.length===0&&z[0]>de[de.length-1]+1)&&Z.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),Z.push(...Ne(se)),z.length>0&&(se.length>0&&z[0]>se[se.length-1]+1||se.length===0&&z[0]>de[de.length-1]+1)&&Z.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),Z.push(...Ne(z)),Z})(),n.jsx("li",{className:`page-item${F===re?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(F+1),disabled:F===re,children:n.jsx("i",{className:"fas fa-angle-right"})})})]})})})]})}function JAe(){const[e,t]=j.useState("enquiry"),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[u,h]=j.useState(null),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState(new Date().toISOString().substring(0,10)),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState(""),[A,I]=j.useState([]),[L,P]=j.useState(0),[O,Y]=j.useState([]),[q,K]=j.useState([]),[U,J]=j.useState(!1),[F,X]=j.useState(""),[Q,ie]=j.useState([]),[M,V]=j.useState(""),[W,ee]=j.useState([]),[re,ne]=j.useState(""),[ce,ae]=j.useState([]);console.log("enquirySearchResults",Q);const[Z,de]=j.useState(!1),[z,se]=j.useState(""),[Ne,ue]=j.useState([]),[oe,ye]=j.useState(""),[je,Me]=j.useState(""),[He,et]=j.useState(""),[ft,Be]=j.useState(""),[dt,Tt]=j.useState(""),[At,qt]=j.useState(0),[xe,he]=j.useState(0),[ve,pe]=j.useState(0),[De,Ke]=j.useState(),[Nt,Je]=j.useState(),[Qe,Ue]=j.useState(),[qe,mt]=j.useState([]),[Ie,Xe]=j.useState(null),[Ye,lt]=j.useState(0),[Mt,Ae]=j.useState(0),[ke,ot]=j.useState(0),[bt,Xt]=j.useState(0),[Ft,rr]=j.useState(0),[pr,jr]=j.useState([]),[vt,Lt]=j.useState(!1),[fe,Re]=j.useState(""),[Te,_e]=j.useState(null),[Le,Ve]=j.useState([]),[pt,wt]=j.useState([]),[st,St]=j.useState([]),[Ct,Jt]=j.useState([]),[ir,xr]=j.useState([]);j.useEffect(()=>{const at=localStorage.getItem("selectedCompanyId"),fr=localStorage.getItem("financialYear"),ar={params:{companyId:at,financialYear:fr}};Oe.get("/api/po-categories",{params:{companyId:at,financialYear:fr}}).then(Dr=>a(Dr.data)),Oe.get("/api/indent/get",ar).then(Dr=>{l(Dr.data)}),Oe.get("/api/quotations/get",ar).then(Dr=>{i(Dr.data);const _r=[];Dr.data.forEach(En=>{En.items.forEach(rl=>{rl.buyerGroup&&!_r.includes(rl.buyerGroup)&&_r.push(rl.buyerGroup)})}),K(_r)}),Oe.get("/api/contracts/get",ar).then(Dr=>{d(Dr.data)}).catch(Dr=>{console.error("Error fetching contracts:",Dr),d([])}),Oe.get("/api/general-conditions",ar).then(Dr=>{const _r=Dr.data.filter(En=>!En.isDeleted).map(En=>({_id:En._id,name:En.name,description:En.description}));wt(_r)}),Oe.get("/api/processes",ar).then(Dr=>{const _r=Dr.data.filter(En=>!En.isDeleted).map(En=>({_id:En._id,processId:En.processId,processDescription:En.processDescription}));St(_r)}),Oe.get("/api/locations",ar).then(Dr=>Ve(Dr.data)),Oe.get("/api/tax",ar).then(Dr=>mt(Dr.data)),Oe.get("/api/material",ar).then(Dr=>jr(Dr.data)),Oe.get("/api/vendors",ar).then(Dr=>Y(Dr.data)),I([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]);const or=(at,fr,ar)=>{fr.includes(at)?ar(fr.filter(Dr=>Dr!==at)):ar([...fr,at])},ze=at=>{if(X(at),at.trim()){const fr=s.filter(ar=>ar.quotationNumber.toLowerCase().includes(at.toLowerCase()));ie(fr)}else ie([])},dr=()=>{ie(s)},ur=at=>{if(V(at),at.trim()){const fr=o.filter(ar=>ar.quotationNumber?.toLowerCase().includes(at.toLowerCase())||ar.indentId?.toLowerCase().includes(at.toLowerCase()));ee(fr)}else ee([])},qr=()=>{ee(o)},va=at=>{if(ne(at),at.trim()){const fr=c.filter(ar=>ar.contractNumber?.toLowerCase().includes(at.toLowerCase())||ar.contractId?.toLowerCase().includes(at.toLowerCase()));ae(fr)}else ae([])},rn=()=>{ae(c)},Qs=at=>{p(at.quotationNumber),ui(at.quotationNumber),J(!1),X(""),ie([])},Gn=at=>{p(at.indentId),el(at.indentId),J(!1),X(""),ie([])},xs=at=>{p(at.contractNumber||at.contractId),tl(at.contractNumber||at.contractId),J(!1),ne(""),ae([])},As=()=>{J(!1),X(""),ie([]),V(""),ee([]),ne(""),ae([])},yt=at=>{if(se(at),at.trim()){const fr=O.filter(ar=>ar.vendorName?.toLowerCase().includes(at.toLowerCase())||ar.vendorCode?.toLowerCase().includes(at.toLowerCase()));ue(fr)}else ue([])},mr=()=>{ue(O)},hr=at=>{w(at.name1||at.vendorName),de(!1),se(""),ue([])},Kr=()=>{de(!1),se(""),ue([])},Rr=(at,fr,ar,Dr,_r)=>{const En=at.reduce((Of,od)=>Of+(od.quantity||0)*(od.price||0),0);P(En.toFixed(2));const rl=fr!==void 0?fr:Ye,Pf=ar!==void 0?ar:Mt,vc=Dr!==void 0?Dr:ke,al=_r!==void 0?_r:bt,nl=En*(parseFloat(rl)||0)/100,Is=En*(parseFloat(Pf)||0)/100,Ci=En*(parseFloat(vc)||0)/100,gc=parseFloat(al)||0;qt(nl.toFixed(2)),he(Is.toFixed(2)),pe(Ci.toFixed(2));const sl=En+nl+Is+Ci-gc;rr(sl.toFixed(2))},cn=at=>{lt(at),Rr(A,at,Mt,ke,bt)},Zo=at=>{Ae(at),Rr(A,Ye,at,ke,bt)},as=at=>{ot(at),Rr(A,Ye,Mt,at,bt)},Bo=at=>{Xt(at),Rr(A,Ye,Mt,ke,at)},xa=(at,fr,ar)=>{const Dr=[...A];Dr[at][fr]=fr==="quantity"||fr==="price"?parseFloat(ar)||0:ar,I(Dr),Rr(Dr,Ye,Mt,ke,bt)},ui=at=>{p(at);const fr=s.find(ar=>ar.quotationNumber===at);if(fr){w(fr.name1||fr.vendorName),C(fr.items[0]?.location||"");const ar=fr.items.find(_r=>_r.buyerGroup);ar&&ye(ar.buyerGroup);const Dr=fr.items.map(_r=>({materialId:_r.materialId,description:_r.description,quantity:_r.qty,baseUnit:_r.baseUnit,unit:_r.unit,orderUnit:_r.orderUnit,price:_r.price,priceUnit:_r.priceUnit,materialgroup:_r.materialgroup,deliveryDate:_r.deliveryDate?String(_r.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));I(Dr),Rr(Dr)}},el=at=>{p(at);const fr=o.find(ar=>ar.indentId===at);if(fr){w(fr.name1||fr.vendorName),C(fr.items[0]?.location||"");const ar=fr.items.find(_r=>_r.buyerGroup);ar&&ye(ar.buyerGroup);const Dr=fr.items.map(_r=>({materialId:_r.materialId,description:_r.description,quantity:_r.qty,baseUnit:_r.baseUnit,unit:_r.unit,orderUnit:_r.orderUnit,price:_r.price,priceUnit:_r.priceUnit,materialgroup:_r.materialgroup,deliveryDate:_r.deliveryDate?String(_r.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));I(Dr),Rr(Dr)}},tl=at=>{p(at);const fr=c.find(ar=>ar.contractNumber===at||ar.contractId===at);if(fr){w(fr.vendorName||fr.name1),C(fr.items?.[0]?.location||"");const ar=fr.items?.find(_r=>_r.buyerGroup);ar&&ye(ar.buyerGroup);const Dr=fr.items?.map(_r=>({materialId:_r.materialId,description:_r.description,quantity:_r.qty||_r.quantity,baseUnit:_r.baseUnit,unit:_r.unit,orderUnit:_r.orderUnit,price:_r.price,priceUnit:_r.priceUnit,materialgroup:_r.materialgroup,deliveryDate:_r.deliveryDate?String(_r.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}))||[];I(Dr),Rr(Dr)}},Vi=()=>{I([...A,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10)}])},qa=at=>{const fr=[...A];fr.splice(at,1),I(fr),Rr(fr)},[qi,Ts]=j.useState(!1),[fc,sd]=j.useState(""),[El,id]=j.useState(""),[Dl,mc]=j.useState(null),Al=async at=>{if(at.preventDefault(),!u||!f)return alert("Please select both category and quotation");const ar={quotationId:s.find(Dr=>Dr.quotationNumber===f)?._id,quotationNumber:f,categoryId:u._id,category:u.categoryName,date:b,vendor:S,notes:ft,contactPerson:je,generalConditions:pt,processes:st,preparedby:Qe,approvedby:Nt,remarks:De,validityDate:dt,buyerGroup:oe,deliveryLocation:k,deliveryAddress:D,items:A,total:parseFloat(L)||0,taxName:Ie?.taxName||"",cgst:parseFloat(Ye)||0,sgst:parseFloat(Mt)||0,igst:parseFloat(ke)||0,taxDiscount:parseFloat(bt)||0,finalTotal:parseFloat(Ft)||0};mc(ar),Ts(!0)},pc=async()=>{try{const at=localStorage.getItem("selectedCompanyId"),fr=localStorage.getItem("financialYear");let ar={...Dl,companyId:at,financialYear:fr};if(fc==="internal")ar.poGenerationType="internal";else if(fc==="external"){if(!El.trim())return alert("Please enter external PO number");ar.poGenerationType="external",ar.poNumber=El.trim()}const Dr=await Oe.post("/api/purchase-orders",ar);console.log("Saved PO:",Dr.data),vs(),Ts(!1),sd(""),id(""),mc(null),alert("PO Created Successfully!")}catch(at){console.error("Error during PO creation:",at),alert("Failed to create PO")}},vs=()=>{h(null),p(""),y(new Date().toISOString().substring(0,10)),w(""),C(""),E(""),I([]),P(""),Xe(null),lt(""),Ae(""),ot(""),Xt(""),rr(""),et(""),Be(""),ye(""),Me(""),Tt("")},xc=()=>{Ts(!1),sd(""),id(""),mc(null)},Tl=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-cog me-2"}),"PO Number Generation"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:xc,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the PO Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{sd("internal"),pc()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>sd("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),fc==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Custom PO Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"External PO Number (max 50 characters)",value:El,onChange:at=>id(at.target.value),onKeyPress:at=>{at.key==="Enter"&&El.trim()&&pc()},maxLength:50,autoComplete:"off",spellCheck:"false",autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[El.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:pc,disabled:!El.trim(),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Create PO"]})})]}),fc==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"alert alert-info",role:"alert",children:[n.jsx("strong",{children:"System Generated Number"}),n.jsx("br",{}),"Format: ",u?.prefix,"-XXXXXX"]})})]})]})})})]}),Jr=()=>{const at=pr.filter(ar=>ar.materialId.toLowerCase().includes(fe.toLowerCase())||ar.description.toLowerCase().includes(fe.toLowerCase())),fr=ar=>{const Dr=[...A];Dr[Te]={...Dr[Te],materialId:ar.materialId,description:ar.description,baseUnit:ar.baseUnit,unit:ar.unit,price:ar.price,buyerGroup:ar.buyerGroup,materialgroup:ar.materialgroup},I(Dr),Rr(Dr),Lt(!1)};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:n.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[n.jsx("h3",{children:"Select Material"}),n.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:fe,onChange:ar=>Re(ar.target.value),style:{width:"100%",marginBottom:10}}),n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Price Unit"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Select"})]})}),n.jsx("tbody",{children:at.map((ar,Dr)=>n.jsxs("tr",{children:[n.jsx("td",{children:ar.materialId}),n.jsx("td",{children:ar.description}),n.jsx("td",{children:ar.baseUnit}),n.jsx("td",{children:ar.unit}),n.jsx("td",{children:ar.price}),n.jsx("td",{children:ar.priceUnit}),n.jsx("td",{children:ar.buyerGroup}),n.jsx("td",{children:ar.materialgroup}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>fr(ar),children:"Select"})})]},Dr))})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>Lt(!1),style:{marginTop:10},children:"Close"})]})})},hh=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header text-white",children:[n.jsxs("ul",{className:"nav nav-tabs nav-tabs-bottom",children:[n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${e==="enquiry"?"active":""}`,onClick:()=>t("enquiry"),href:"#",children:"Enquiry"})}),n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${e==="quotation"?"active":""}`,onClick:()=>t("quotation"),href:"#",children:"Quotation"})}),n.jsx("li",{className:"nav-item",children:n.jsx("a",{className:`nav-link ${e==="contract"?"active":""}`,onClick:()=>t("contract"),href:"#",children:"Contract"})})]}),n.jsx("button",{type:"button",className:"btn-close btn-close-black",onClick:As})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"tab-content",children:[e==="enquiry"&&n.jsxs("div",{className:`tab-pane ${e==="enquiry"?"show active":""}`,id:"bottom-tab1",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Enquiry Number"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Enquiry number...",value:M,onChange:at=>ur(at.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:qr,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:W.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Enquiry Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:W.map((at,fr)=>n.jsxs("tr",{children:[n.jsx("td",{children:at.indentId}),n.jsx("td",{children:new Date(at.documentDate).toLocaleDateString()}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Gn(at),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:M?`No enquiries found matching "${M}"`:'Enter search term or click "View All"'})]})})]}),e==="quotation"&&n.jsxs("div",{className:`tab-pane ${e==="quotation"?"show active":""}`,id:"bottom-tab2",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Quotation Number"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter quotation number...",value:F,onChange:at=>ze(at.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:dr,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Q.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Quotation Number"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Validity Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Q.map((at,fr)=>n.jsxs("tr",{children:[n.jsx("td",{children:at.quotationNumber}),n.jsx("td",{className:"text-flex",children:at.vendorName}),n.jsx("td",{children:new Date(at.validityDate).toLocaleDateString()}),n.jsxs("td",{children:["",at.totalPrice]}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Qs(at),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:F?`No quotations found matching "${F}"`:'Enter search term or click "View All"'})]})})]}),e==="contract"&&n.jsxs("div",{className:`tab-pane ${e==="contract"?"show active":""}`,id:"bottom-tab3",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Contract Number"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter contract number...",value:re,onChange:at=>va(at.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:rn,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ce.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Contract Number"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Start Date"}),n.jsx("th",{children:"End Date"}),n.jsx("th",{children:"Total Value"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ce.map((at,fr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-success",children:at.contractNumber||at.contractId})}),n.jsx("td",{children:at.vendorName||at.name1}),n.jsx("td",{children:new Date(at.validityFDate).toLocaleDateString()}),n.jsx("td",{children:new Date(at.validityTDate).toLocaleDateString()}),n.jsxs("td",{children:["",at.totalPrice]}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>xs(at),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:re?`No contracts found matching "${re}"`:'Enter search term or click "View All"'})]})})]})]})})})})]})})}),If=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Kr})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Vendor"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:z,onChange:at=>yt(at.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:mr,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ne.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Code"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ne.map((at,fr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:at.vnNo})}),n.jsx("td",{children:at.name1}),n.jsx("td",{children:at.email}),n.jsx("td",{children:at.phone}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>hr(at),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:z?`No vendors found matching "${z}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Kr,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Order"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Purchase Order Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Ref_Document:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference document number",value:f,onChange:at=>{p(at.target.value),at.target.value&&ui(at.target.value)},required:!0}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>J(!0),style:{border:"0px solid"},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"PO_Category:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",onChange:at=>{const fr=r.find(ar=>ar._id===at.target.value);h(fr)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),r.map(at=>n.jsx("option",{value:at._id,children:at.categoryName},at._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:S,onChange:at=>w(at.target.value),placeholder:"Enter vendor name"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>de(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"PO Number:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:x,readOnly:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"PO Creating date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:at=>y(at.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:k,onChange:at=>C(at.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),Le.map(at=>n.jsx("option",{value:at.name||at.locationName||at._id,children:at.name||at.locationName||at._id},at._id||at.id||at.name))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:oe,onChange:at=>ye(at.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:je,onChange:at=>Me(at.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:dt,onChange:at=>Tt(at.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select General Conditions"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:Ct.length===0?"Select...":`${Ct.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:pt.map(at=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Ct.includes(at._id),onChange:()=>or(at._id,Ct,Jt)}),n.jsx("label",{className:"form-check-label ms-1",children:at.name})]})},at._id))})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select Processes"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:ir.length===0?"Select...":`${ir.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:st.map(at=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:ir.includes(at._id),onChange:()=>or(at._id,ir,xr)}),n.jsx("label",{className:"form-check-label ms-1",children:at.processId})]})},at._id))})]})})]}),n.jsxs("div",{className:"col-lg-3  row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Header Note:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("textarea",{className:"form-control form-control-sm",value:He,onChange:at=>et(at.target.value),maxLength:"250"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Remarks:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{className:"form-control",value:De,onChange:at=>Ke(at.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Prepared By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:Qe,onChange:at=>Ue(at.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Approved By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:Nt,onChange:at=>Je(at.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"table-responsive rounded table-nowrap border-bottom-0 border mb-3",children:[n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"PriceUnit"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:A.map((at,fr)=>n.jsxs("tr",{children:[n.jsx("td",{children:fr+1}),n.jsx("td",{children:n.jsx("input",{value:at.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{_e(fr),Lt(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:at.description,onChange:ar=>xa(fr,"description",ar.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:at.quantity,onChange:ar=>xa(fr,"quantity",ar.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:at.baseUnit,onChange:ar=>xa(fr,"baseUnit",ar.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:at.orderUnit,onChange:ar=>xa(fr,"orderUnit",ar.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:at.materialgroup,onChange:ar=>xa(fr,"materialgroup",ar.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:at.price,onChange:ar=>xa(fr,"price",ar.target.value)})}),n.jsx("td",{children:n.jsxs("select",{value:at.priceUnit,onChange:ar=>xa(fr,"priceUnit",ar.target.value),required:!0,className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"INR",children:"INR"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),n.jsx("td",{children:(at.quantity*at.price).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:at.deliveryDate,onChange:ar=>xa(fr,"deliveryDate",ar.target.value)})}),n.jsx("td",{children:n.jsx("textarea",{className:"form-control form-control-sm",value:at.note,onChange:ar=>xa(fr,"note",ar.target.value),maxLength:"250",rows:"2"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning btn-sm",type:"button",onClick:()=>qa(fr),children:n.jsx("i",{className:"ti ti-trash"})})})]},fr))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",className:"btn btn-link",onClick:Vi,children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingFour",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),n.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:Al,children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Address:"}),n.jsx("textarea",{className:"form-control form-control-sm",value:D,onChange:at=>E(at.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{className:"",children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-xl-12  row",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{className:"form-label",children:"Tax:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select form-select-sm",onChange:at=>{const fr=qe.find(ar=>ar.taxName===at.target.value);if(Xe(fr),fr){const ar=fr.cgst||0,Dr=fr.sgst||0,_r=fr.igst||0;lt(ar),Ae(Dr),ot(_r),Rr(A,ar,Dr,_r,bt)}},children:[n.jsx("option",{value:"",children:"-- Select Tax Template --"}),qe.map(at=>n.jsx("option",{value:at.taxName,children:at.taxName},at._id))]})})]})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"CGST (%):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ye,onChange:at=>cn(at.target.value),step:"0.01"})})]}),n.jsxs("div",{className:"col-md-6 mb-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SGST (%):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Mt,onChange:at=>Zo(at.target.value),step:"0.01"})})]}),n.jsxs("div",{className:"col-md-6 mb-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"IGST (%):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:ke,onChange:at=>as(at.target.value),step:"0.01"})})]}),n.jsxs("div",{className:"col-md-6 mb-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Discount:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:bt,onChange:at=>Bo(at.target.value)})})]})]}),n.jsx("div",{className:"border-top ",children:n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-6",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("strong",{children:["",L]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"CGST:"}),n.jsxs("span",{children:["",At]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"SGST:"}),n.jsxs("span",{children:["",xe]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"IGST:"}),n.jsxs("span",{children:["",ve]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"Discount:"}),n.jsxs("span",{children:["- ",bt]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Final Total:"}),n.jsxs("strong",{className:"text-success",children:["",Ft]})]})]})})})]})]})})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit PO"})})]})})})})})]}),vt&&n.jsx(Jr,{}),U&&n.jsx(hh,{}),Z&&n.jsx(If,{}),qi&&n.jsx(Tl,{})]})})]})}function ZAe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),o=localStorage.getItem("activeRole"),[l,c]=j.useState(""),[d,u]=j.useState({fromDate:"",toDate:""}),[h,f]=j.useState(!1),[p,x]=j.useState("poNumber"),[g,b]=j.useState([]),[y,S]=j.useState(1),[w]=j.useState(10),[k,C]=j.useState(!1),[D,E]=j.useState(null),[A,I]=j.useState({approvedBy:"",approvalDate:"",approvalComments:""}),[L,P]=j.useState(!1),[O,Y]=j.useState({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0}),[q,K]=j.useState([]),[U,J]=j.useState([]);j.useEffect(()=>{Q(),F(),X()},[]);const F=async()=>{try{const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),ve=await Oe.get("/api/vendors",{params:{companyId:xe,financialYear:he}});K(ve.data)}catch(xe){console.error("Error fetching vendors:",xe)}},X=async()=>{try{const xe=localStorage.getItem("selectedCompanyId"),he=await Oe.get("/api/po-categories",{params:{companyId:xe}});J(he.data)}catch(xe){console.error("Error fetching categories:",xe)}},Q=()=>{i(!0);const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear");Oe.get("/api/purchase-orders",{params:{companyId:xe,financialYear:he}}).then(ve=>{const pe=ve.data.slice().sort((De,Ke)=>{const Nt=De.createdAt?new Date(De.createdAt):new Date(De.date||0),Je=Ke.createdAt?new Date(Ke.createdAt):new Date(Ke.date||0);return isNaN(Nt)&&isNaN(Je)?0:isNaN(Nt)?1:isNaN(Je)?-1:Je-Nt});t(pe),a(pe),i(!1)}).catch(ve=>{console.error("Error fetching POs:",ve),alert("Failed to fetch POs"),i(!1)})},ie=()=>{let xe=e;l.trim()&&(xe=xe.filter(he=>[he.poNumber,he.vendor,he.category,he.quotationNumber,he.deliveryLocation,he.deliveryAddress,he.date].some(pe=>pe&&pe.toString().toLowerCase().includes(l.toLowerCase())))),(d.fromDate||d.toDate)&&(xe=xe.filter(he=>{const ve=new Date(he.date),pe=d.fromDate?new Date(d.fromDate):null,De=d.toDate?new Date(d.toDate):null;De&&De.setHours(23,59,59,999);let Ke=!0;return pe&&ve<pe&&(Ke=!1),De&&ve>De&&(Ke=!1),Ke})),a(xe),S(1)},M=xe=>{c(xe.target.value)},V=(xe,he)=>{u(ve=>({...ve,[xe]:he}))},W=()=>{c(""),u({fromDate:"",toDate:""}),a(e),S(1)};j.useEffect(()=>{ie()},[l,d,e]);const ee=xe=>{const he=xe.target.value;if(c(he),he.trim()===""){b([]);return}const ve=e.filter(pe=>{switch(p){case"poNumber":return pe.poNumber?.toLowerCase().includes(he.toLowerCase());case"vendor":return pe.vendor?.toLowerCase().includes(he.toLowerCase());case"category":return pe.category?.toLowerCase().includes(he.toLowerCase());case"quotationNumber":return pe.quotationNumber?.toLowerCase().includes(he.toLowerCase());default:return pe.poNumber?.toLowerCase().includes(he.toLowerCase())}});b(ve)},re=()=>{b(e),c("")},ne=()=>{b([]),c("")},ce=xe=>{a([xe]),S(1),ae()},ae=()=>{f(!1),b([]),c("")},Z=xe=>{Y({_id:xe._id,poNumber:xe.poNumber||"",category:xe.category||"",date:xe.date||"",vendor:xe.vendor||"",deliveryLocation:xe.deliveryLocation||"",deliveryAddress:xe.deliveryAddress||"",quotationNumber:xe.quotationNumber||"",items:xe.items||[],remarks:xe.remarks||"",notes:xe.notes||"",preparedby:xe.preparedby||"",cgst:xe.cgst||0,sgst:xe.sgst||0,igst:xe.igst||0,taxDiscount:xe.taxDiscount||0,total:xe.total||0,finalTotal:xe.finalTotal||0}),P(!0)},de=()=>{P(!1),Y({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0})},z=(xe,he)=>{Y(ve=>({...ve,[xe]:he}))},se=(xe,he,ve)=>{const pe=[...O.items];if(pe[xe]={...pe[xe],[he]:ve},he==="price"||he==="quantity"){const De=he==="price"?parseFloat(ve)||0:parseFloat(pe[xe].price)||0,Ke=he==="quantity"?parseFloat(ve)||0:parseFloat(pe[xe].quantity)||0;pe[xe].total=De*Ke}Y(De=>({...De,items:pe})),oe(pe)},Ne=()=>{const xe={materialId:"",description:"",quantity:0,unit:"",price:0,deliveryDate:"",total:0};Y(he=>({...he,items:[...he.items,xe]}))},ue=xe=>{const he=O.items.filter((ve,pe)=>pe!==xe);Y(ve=>({...ve,items:he})),oe(he)},oe=(xe=O.items)=>{const he=xe.reduce((Je,Qe)=>Je+(parseFloat(Qe.price)||0)*(parseFloat(Qe.quantity)||0),0),ve=he*(parseFloat(O.cgst)||0)/100,pe=he*(parseFloat(O.sgst)||0)/100,De=he*(parseFloat(O.igst)||0)/100,Ke=parseFloat(O.taxDiscount)||0,Nt=he+ve+pe+De-Ke;Y(Je=>({...Je,total:he,finalTotal:Nt}))};j.useEffect(()=>{O.items.length>0&&oe()},[O.cgst,O.sgst,O.igst,O.taxDiscount]);const ye=async()=>{try{if(!O.poNumber||!O.vendor){alert("Please fill in all required fields (PO Number and Vendor)");return}const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),ve={...O,companyId:xe,financialYear:he,updatedAt:new Date().toISOString()},pe=await Oe.put(`/api/purchase-orders/${O._id}`,ve),De=e.map(Ke=>Ke._id===O._id?pe.data:Ke);t(De),a(De.filter(Ke=>r.some(Nt=>Nt._id===Ke._id))),de(),alert("Purchase Order updated successfully!")}catch(xe){console.error("Error updating PO:",xe),alert(`Failed to update Purchase Order: ${xe.response?.data?.error||xe.message}`)}},je=xe=>{E(xe),I({approvedBy:"",approvalDate:"",approvalComments:""}),C(!0)},Me=async()=>{try{if(!A.approvedBy||!A.approvalDate){alert("Please fill in all required approval fields");return}const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),ve={status:"approved",approvedBy:A.approvedBy,approvalDate:A.approvalDate,approvalComments:A.approvalComments,companyId:xe,financialYear:he},pe=await Oe.put(`/api/purchase-orders/${D._id}/approve`,ve),De=e.map(Ke=>Ke._id===D._id?pe.data.purchaseOrder||pe.data:Ke);t(De),a(De.filter(Ke=>r.some(Nt=>Nt._id===Ke._id))),C(!1),E(null),alert("Purchase Order approved successfully!")}catch(xe){console.error("Error approving PO:",xe),alert(`Failed to approve Purchase Order: ${xe.response?.data?.error||xe.message}`)}},He=()=>{C(!1),E(null),I({approvedBy:"",approvalDate:"2025-01-02",approvalComments:""})},et=y*w,ft=et-w,Be=r.slice(ft,et),dt=Math.ceil(r.length/w),Tt=xe=>S(xe),At=async xe=>{try{const he=localStorage.getItem("selectedCompanyId"),ve=localStorage.getItem("financialYear"),[pe,De]=await Promise.all([Oe.get(`/api/vendors/${xe.vendor}`,{params:{companyId:he,financialYear:ve}}),Oe.get(`/api/companies/${he}`)]),Ke=pe.data,Nt=De.data,Je=async lt=>{try{const Ae=`/api/image/${lt.includes("/")?lt.split("/").pop():lt}`,ke=await Oe.get(Ae,{responseType:"arraybuffer"});return`data:image/jpeg;base64,${btoa(new Uint8Array(ke.data).reduce((bt,Xt)=>bt+String.fromCharCode(Xt),""))}`}catch(Mt){return console.error("Error fetching image:",Mt),null}};let Qe=null;Nt.logo&&(Qe=await Je(Nt.logo));const Ue=xe.items.map((lt,Mt)=>`
     <tr>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${Mt+1}</td>
       <td style="border: 1px solid #000; padding: 4px;">${lt.materialId||""}</td>
       <td style="border: 1px solid #000; padding: 4px;">${lt.description||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${lt.deliveryDate||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${lt.quantity||""} ${lt.unit||""}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${lt.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${lt.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${((lt.price||0)*(lt.quantity||0)).toFixed(2)}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${((lt.price||0)*(lt.quantity||0)).toFixed(2)}</td>
     </tr>
   `).join(""),qe=(()=>{if(xe.notes){if(typeof xe.notes=="string"){const lt=xe.notes.split(`
`).filter(Mt=>Mt.trim()!=="");if(lt.length>0)return lt.map((Mt,Ae)=>`
           <tr>
             <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${Ae+1}.</td>
             <td style="border: 1px solid #000; padding: 4px;">${Mt.trim()}</td>
           </tr>
         `).join("")}else if(Array.isArray(xe.notes)&&xe.notes.length>0)return xe.notes.map((lt,Mt)=>`
         <tr>
           <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${Mt+1}.</td>
           <td style="border: 1px solid #000; padding: 4px;">${lt}</td>
         </tr>
       `).join("")}return`
     <tr>
       <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">-</td>
       <td style="border: 1px solid #000; padding: 4px; color: #666; font-style: italic;">No notes available</td>
     </tr>
   `})(),mt=xe.generalConditions&&xe.generalConditions.length>0?xe.generalConditions.map((lt,Mt)=>`
           <div style="margin-bottom: 8px;">
             <strong>${Mt+1}. ${lt.name}:</strong><br>
             ${lt.description}
           </div>
         `).join(""):"",Ie=lt=>{const Mt=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],Ae=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],ke=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];return lt===0?"Zero":lt<10?Mt[lt]:lt<20?Ae[lt-10]:lt<100?ke[Math.floor(lt/10)]+(lt%10?" "+Mt[lt%10]:""):lt<1e3?Mt[Math.floor(lt/100)]+" Hundred"+(lt%100?" "+Ie(lt%100):""):lt<1e5?Ie(Math.floor(lt/1e3))+" Thousand"+(lt%1e3?" "+Ie(lt%1e3):""):lt<1e7?Ie(Math.floor(lt/1e5))+" Lakh"+(lt%1e5?" "+Ie(lt%1e5):""):Ie(Math.floor(lt/1e7))+" Crore"+(lt%1e7?" "+Ie(lt%1e7):"")},Xe=`
     <!DOCTYPE html>
     <html>
     <head>
       <title>Purchase Order - ${xe.poNumber}</title>
       <style>
         @page {
           size: A4;
           margin: 0.5in;
         }
         body {
           font-family: Arial, sans-serif;
           font-size: 11px;
           line-height: 1.2;
           margin: 0;
           padding: 0;
           color: #000;
         }
         .header-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-bottom: 0;
         }
         .header-table td {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .main-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-top: 0;
         }
         .main-table td, .main-table th {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .center {
           text-align: center;
         }
         .bold {
           font-weight: bold;
         }
         .section-header {
           background-color: #f0f0f0;
           font-weight: bold;
           text-align: center;
           padding: 6px;
         }
         .amount-cell {
           text-align: right;
           padding-right: 8px;
         }
         .print-note {
           font-size: 10px;
           color: #666;
           text-align: center;
           margin-top: 10px;
         }
         .no-border {
           border: none !important;
         }
         .logo-img {
           max-width: 100px;
           max-height: 80px;
           object-fit: contain;
         }
         .general-conditions {
           padding: 8px;
           font-size: 10px;
           line-height: 1.3;
         }
       </style>
     </head>
     <body>
       <!-- Header Section -->
       <table class="header-table">
         <tr>
           <td colspan="6" class="section-header">PURCHASE ORDER</td>
         </tr>
         <tr>
           <td class="bold" style="width: 120px;">PO No.:</td>
           <td style="width: 150px;">${xe.poNumber}</td>
           <td rowspan="6" style="text-align: center; vertical-align: middle; width: 200px;">
           ${Qe?`<img src="${Qe}" alt="Company Logo" class="logo-img">`:'<div style="border: 1px dashed #ccc; padding: 20px; color: #999;">No Logo</div>'}
           </td>
         </tr>
         <tr>
           <td class="bold">PO Date:</td>
           <td>${xe.date}</td>
         </tr>
         <tr>
           <td class="bold">Rev. No.:</td>
           <td>${xe.revisionNumber||"1.0"}</td>
         </tr>
         <tr>
           <td class="bold">Rev. Date:</td>
           <td>${xe.revisionDate||xe.date}</td>
         </tr>
         <tr>
           <td class="bold">Ref No.:</td>
           <td>${xe.refNumber||""}</td>
         </tr>
         <tr>
           <td class="bold">Ref Date:</td>
           <td>${xe.refDate||xe.date}</td>
         </tr>
         <tr>
           <td class="bold">Supplier Details:</td>
           <td colspan="2">
             <strong>M/s. ${Ke.name1||Ke.name}</strong><br>
             ${Ke.address1||""}<br>
             ${Ke.address2||""}<br>
             ${Ke.city||""}, ${Ke.region||""}<br>
             ${Ke.country||""}<br>
             ${Ke.pincode||""}<br>
             Contact Details: ${Ke.contactNo||""}<br>
             ${Ke.email||""}
           </td>
         </tr>
         <tr>
           <td class="bold">GSTIN:</td>
           <td>${Nt.gstin||""}</td>
           <td></td>
         </tr>
       </table>
 
       <!-- Bill To and Ship To -->
       <table class="main-table">
         <tr>
           <td class="bold section-header">BILL TO:</td>
           <td class="bold section-header">SHIP TO:</td>
         </tr>
         <tr>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${Nt.name||""}</strong><br>
             ${Nt.address1||""}<br>
             ${Nt.address||""}<br>
             ${Nt.city||""} ${Nt.state||""}<br>
             <strong>Tel:</strong> ${Nt.phone||""}<br>
             <strong>Email:</strong> ${Nt.email||""}
           </td>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${Nt.name||""}</strong><br>
             ${Nt.address1||""}<br>
             ${Nt.address||""}<br>
             ${Nt.city||""} ${Nt.state||""}<br>
             <strong>Tel:</strong> ${Nt.phone||""}<br>
             <strong>Email:</strong> ${Nt.email||""}
           </td>
         </tr>
       </table>
 
       <!-- Items Section -->
       <table class="main-table">
         <tr>
           <td colspan="9" class="section-header">PLEASE SUPPLY THE FOLLOWING ITEMS AS PER THE DETAILS MENTIONED BELOW:</td>
         </tr>
         <tr class="bold" style="background-color: #f0f0f0;">
           <td class="center">SI No</td>
           <td class="center">Part No</td>
           <td class="center">Description</td>
           <td class="center">Schedule</td>
           <td class="center">Quantity & Unit</td>
           <td class="center">Unit Price</td>
           <td class="center">Unit Price ()</td>
           <td class="center">Int ()</td>
           <td class="center">Total</td>
         </tr>
         ${Ue}
         <tr>
           <td colspan="6" class="bold">Basic Total:</td>
           <td class="amount-cell bold">${xe.total||0}</td>
           <td colspan="2"></td>
         </tr>
       </table>
 
       <!-- Notes Section -->
       <table class="main-table">
         <tr>
           <td colspan="2" class="section-header">NOTES:</td>
         </tr>
         ${qe}
       </table>
 
       <!-- Tax Summary -->
       <table class="main-table">
         <tr>
           <td style="width: 60%;">
             <strong>Total Amount (In Words):</strong><br>
             Rupees ${Ie(Math.floor(xe.finalTotal||xe.total||0))} Only
           </td>
           <td style="width: 40%;">
             <table style="width: 100%; border-collapse: collapse;">
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>SGST(${xe.sgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">${(xe.total*(xe.sgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>CGST(${xe.cgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">${(xe.total*(xe.cgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr style="border-top: 1px solid #000;">
                 <td class="no-border" style="padding: 2px;"><strong>Net Total:</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;"><strong>${xe.finalTotal||xe.total||0}</strong></td>
               </tr>
             </table>
           </td>
         </tr>
       </table>
 
       <!-- Remarks -->
       <table class="main-table">
         <tr>
           <td class="bold" style="width: 100px;">REMARKS:</td>
           <td>${xe.remarks||""}</td>
         </tr>
       </table>
 
       <!-- Terms and Conditions -->
       <table class="main-table">
         <tr>
           <td style="width: 50%;">
             <strong>TERMS & CONDITIONS:</strong><br>
             <div class="general-conditions">
               ${mt||xe.termsAndConditions||""}
             </div>
           </td>
           <td style="width: 50%;">
             <strong>PREPARED BY:</strong> ${xe.preparedby||""}<br><br>
             <strong>APPROVED BY:</strong> ${xe.approvedBy||xe.approvedby||""}
           </td>
         </tr>
       </table>
 
       <div class="print-note">
         This is an electronically generated document and does not require signature.
       </div>
     </body>
     </html>
   `,Ye=window.open("","_blank","width=800,height=600");Ye.document.write(Xe),Ye.document.close(),Ye.focus(),Ye.onload=function(){Ye.print()}}catch(he){console.error("Error generating print:",he),alert("Error generating print. Please try again.")}},qt=xe=>{switch(xe){case"approved":return n.jsx("span",{className:"badge bg-success",children:"Approved"});case"rejected":return n.jsx("span",{className:"badge bg-danger",children:"Rejected"});case"pending":return n.jsx("span",{className:"badge bg-warning",children:"Pending"});default:return n.jsx("span",{className:"badge bg-secondary",children:"Draft"})}};return s?n.jsx("div",{className:"content",children:n.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading Purchase Orders..."})]})})}):n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Order Display"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order Display"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6"}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Search All Fields"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search across all fields...",value:l,onChange:M})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",value:d.fromDate,onChange:xe=>V("fromDate",xe.target.value)})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",value:d.toDate,onChange:xe=>V("toDate",xe.target.value)})]})]}),(l||d.fromDate||d.toDate)&&n.jsx("div",{className:"row mt-2",children:n.jsx("div",{className:"col-12",children:n.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:W,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear All Filters"]})})})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Quotation Number"}),n.jsx("th",{children:"Delivery Location"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Be.length>0?Be.map(xe=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),n.jsx("td",{children:xe.date}),n.jsx("td",{children:xe.vendor}),n.jsx("td",{children:xe.category}),n.jsx("td",{children:xe.quotationNumber}),n.jsx("td",{children:xe.deliveryLocation}),n.jsx("td",{children:qt(xe.status)}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>Z(xe),title:"Edit Purchase Order",disabled:xe.status==="approved",children:n.jsx("i",{className:"fas fa-edit"})}),xe.status!=="approved"&&o.toLowerCase()==="admin"&&n.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>je(xe),title:"Approve Purchase Order",children:n.jsx("i",{className:"fas fa-check"})}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>At(xe),title:"Print Purchase Order",children:n.jsx("i",{className:"fas fa-print"})})]})})]},xe._id)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted mb-0",children:"No purchase orders found"}),(l||d.fromDate||d.toDate)&&n.jsxs("button",{className:"btn btn-outline-primary btn-sm mt-2",onClick:W,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear Filters"]})]})})})]})})})]}),dt>1&&n.jsx("nav",{"aria-label":"Purchase Orders pagination",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${y===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Tt(y-1),disabled:y===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:dt},(xe,he)=>he+1).map(xe=>n.jsx("li",{className:`page-item ${y===xe?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Tt(xe),children:xe})},xe)),n.jsx("li",{className:`page-item ${y===dt?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>Tt(y+1),disabled:y===dt,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})}),L&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-edit me-2"}),"Edit Purchase Order - ",O.poNumber]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:de})]}),n.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[n.jsxs("div",{className:"row mb-4",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-info-circle me-2"}),"Basic Information"]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["PO Number ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",className:"form-control",value:O.poNumber,onChange:xe=>z("poNumber",xe.target.value),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Date ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"date",className:"form-control",value:O.date,onChange:xe=>z("date",xe.target.value),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:O.category,onChange:xe=>z("category",xe.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),U.map(xe=>n.jsx("option",{value:xe.name,children:xe.name},xe._id))]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-truck me-2"}),"Delivery Information"]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Vendor ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsxs("select",{className:"form-select",value:O.vendor,onChange:xe=>z("vendor",xe.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Vendor"}),q.map(xe=>n.jsx("option",{value:xe.name,children:xe.name},xe._id))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Location"}),n.jsx("input",{type:"text",className:"form-control",value:O.deliveryLocation,onChange:xe=>z("deliveryLocation",xe.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Delivery Address"}),n.jsx("textarea",{className:"form-control",rows:"2",value:O.deliveryAddress,onChange:xe=>z("deliveryAddress",xe.target.value)})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsxs("h6",{className:"text-primary mb-0",children:[n.jsx("i",{className:"fas fa-list me-2"}),"Items (",O.items.length,")"]}),n.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Ne,children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:O.items.map((xe,he)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.materialId||"",onChange:ve=>se(he,"materialId",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.description||"",onChange:ve=>se(he,"description",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe.quantity||"",onChange:ve=>se(he,"quantity",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.unit||"",onChange:ve=>se(he,"unit",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",step:"0.01",className:"form-control form-control-sm",value:xe.price||"",onChange:ve=>se(he,"price",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:xe.deliveryDate||"",onChange:ve=>se(he,"deliveryDate",ve.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:((parseFloat(xe.price)||0)*(parseFloat(xe.quantity)||0)).toFixed(2),readOnly:!0})}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>ue(he),disabled:O.items.length<=1,children:n.jsx("i",{className:"fas fa-trash"})})})]},he))})]})})]}),n.jsxs("div",{className:"row mb-4",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-percentage me-2"}),"Tax Information"]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"CGST (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.cgst,onChange:xe=>z("cgst",xe.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"SGST (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.sgst,onChange:xe=>z("sgst",xe.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"IGST (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.igst,onChange:xe=>z("igst",xe.target.value)})]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("h6",{className:"text-primary mb-3",children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Totals"]}),n.jsx("div",{className:"card bg-light",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Subtotal:"}),n.jsxs("span",{children:["",O.total.toFixed(2)]})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("span",{children:["CGST (",O.cgst,"%):"]}),n.jsxs("span",{children:["",(O.total*O.cgst/100).toFixed(2)]})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("span",{children:["SGST (",O.sgst,"%):"]}),n.jsxs("span",{children:["",(O.total*O.sgst/100).toFixed(2)]})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("span",{children:["IGST (",O.igst,"%):"]}),n.jsxs("span",{children:["",(O.total*O.igst/100).toFixed(2)]})]}),n.jsx("hr",{}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Final Total:"}),n.jsxs("strong",{children:["",O.finalTotal.toFixed(2)]})]})]})})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Quotation Number"}),n.jsx("input",{type:"text",className:"form-control",value:O.quotationNumber,onChange:xe=>z("quotationNumber",xe.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Prepared By"}),n.jsx("input",{type:"text",className:"form-control",value:O.preparedby,onChange:xe=>z("preparedby",xe.target.value)})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Remarks"}),n.jsx("textarea",{className:"form-control",rows:"2",value:O.remarks,onChange:xe=>z("remarks",xe.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Notes"}),n.jsx("textarea",{className:"form-control",rows:"2",value:O.notes,onChange:xe=>z("notes",xe.target.value)})]})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:de,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:ye,disabled:!O.poNumber||!O.vendor,children:[n.jsx("i",{className:"fas fa-save me-1"}),"Update Purchase Order"]})]})]})})}),k&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-success text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-check me-2"}),"Approve Purchase Order"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:He})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"PO Number:"})," ",D?.poNumber]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Vendor:"})," ",D?.vendor]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Total Amount:"})," ",(D?.finalTotal||D?.total||0).toLocaleString("en-IN")]}),n.jsx("hr",{}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Approved By ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",className:"form-control",value:A.approvedBy,onChange:xe=>I(he=>({...he,approvedBy:xe.target.value})),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"form-label",children:["Approval Date ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"date",className:"form-control",value:A.approvalDate,onChange:xe=>I(he=>({...he,approvalDate:xe.target.value})),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Comments (Optional)"}),n.jsx("textarea",{className:"form-control",rows:"3",value:A.approvalComments,onChange:xe=>I(he=>({...he,approvalComments:xe.target.value})),placeholder:"Enter approval comments..."})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:He,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),n.jsxs("button",{type:"button",className:"btn btn-success",onClick:Me,disabled:!A.approvedBy||!A.approvalDate,children:[n.jsx("i",{className:"fas fa-check me-1"}),"Approve Purchase Order"]})]})]})})}),h&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ae})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search By"}),n.jsxs("select",{className:"form-select",value:p,onChange:xe=>x(xe.target.value),children:[n.jsx("option",{value:"poNumber",children:"PO Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"category",children:"Category"}),n.jsx("option",{value:"quotationNumber",children:"Quotation Number"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${p==="poNumber"?"PO Number":p}...`,value:l,onChange:ee})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:re,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ne,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:g.map((xe,he)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),n.jsx("td",{children:xe.date}),n.jsx("td",{children:xe.vendor}),n.jsx("td",{children:xe.category}),n.jsx("td",{children:qt(xe.status)}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ce(xe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},he))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No purchase orders loaded from API":l?`No purchase orders found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ae,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const JB=["Piece","Box","Kg","Ltr"],eTe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(null),[s,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState(!1),[u,h]=j.useState(null),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState([]),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState(""),[A,I]=j.useState(new Date().toISOString().split("T")[0]),[L,P]=j.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}]),[O,Y]=j.useState(!1),[q,K]=j.useState(""),[U,J]=j.useState([]),[F,X]=j.useState("materialId"),[Q,ie]=j.useState(null),[M,V]=j.useState(1),[W]=j.useState(5),ee="MMNR-",re=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear"),ce=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Oe.get("/api/material",{params:{companyId:re,financialYear:ne}}).then(xe=>{const he=xe.data.filter(ve=>!ve.isDeleted&&!ve.isBlocked);console.log("Filtered materials:",he),t(he)}).catch(xe=>console.error(xe)),Oe.get("/api/locations",{params:{companyId:re,financialYear:ne}}).then(xe=>l(xe.data))},[]),j.useEffect(()=>{Oe.get("/api/salecategory",{params:{companyId:re,financialYear:ne}}).then(xe=>y(xe.data)).catch(xe=>console.error(xe))},[]);const ae=()=>{P(xe=>[...xe,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}])},Z=xe=>{P(ve=>ve.filter((pe,De)=>De!==xe));const he=Math.ceil((L.length-1)/W);M>he&&he>0&&V(he)},de=async(xe,he,ve)=>{const pe=[...L];if(pe[xe][he]=ve,he==="materialId"&&pe[xe].isManual)try{const Ke=(await Oe.get(`/api/material/byId/${ve}`)).data;Ke&&(pe[xe]={...pe[xe],materialId:Ke.materialId,description:Ke.description,baseUnit:Ke.baseUnit,orderUnit:Ke.orderUnit,location:Ke.location,materialgroup:Ke.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",ve)}P(pe)},z=()=>{if(!q.trim()){J([]);return}if(console.log("Searching with query:",q,"Type:",F),console.log("Available materials:",e),F==="materialId"){let xe=q;/^\d+$/.test(q)&&(xe=ee+q);const he=e.filter(ve=>(ve.materialId||"").toLowerCase().includes(xe.toLowerCase()));console.log("Filtered results for materialId:",he),J(he)}else{const xe=e.filter(he=>(he.description||"").toLowerCase().includes(q.toLowerCase()));console.log("Filtered results for description:",xe),J(xe)}};j.useEffect(()=>{const xe=setTimeout(()=>{q.trim()?z():J([])},300);return()=>clearTimeout(xe)},[q,F,e]);const se=xe=>{const he=xe.target.value;K(he)},Ne=()=>{J(e),K("")},ue=()=>{J([]),K("")},oe=xe=>{ie(xe),Y(!0),K(""),J([])},ye=()=>{Y(!1),ie(null),K(""),J([])},je=xe=>{if(Q!==null){const he=[...L];he[Q]={...he[Q],materialId:xe.materialId,description:xe.description,baseUnit:xe.baseUnit,orderUnit:xe.orderUnit,location:xe.location,materialgroup:xe.materialgroup,isManual:!0},P(he)}ye()},Me=async()=>{if(!S){alert("Please select a purchase category");return}if(!k||!D){alert("Please fill in Location and Buyer Group");return}const xe=L.filter(ve=>ve.materialId&&ve.materialId.trim()!==""&&ve.description&&ve.description.trim()!==""&&ve.qty&&ve.qty>0);if(xe.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const he=b.find(ve=>ve.name===S||ve.categoryName===S||ve._id===S);try{const ve={indentIdType:f,externalIndentId:x,categoryId:he._id,categoryName:he.name||he.categoryName,location:k,salesGroup:D,documentDate:A,items:xe,companyId:ce,financialYear:ne};if(f==="")h(ve),d(!1),i(!0);else{if(f==="internal"){const pe=await Oe.post("/api/salerequest/create",ve);alert(`Indent saved successfully with ID: ${pe.data.indentId}`)}else if(f==="external"){if(!x||x.trim()===""){alert("Please enter an External Indent ID");return}ve.indentId=x;const pe=await Oe.post("/api/indent/create",ve);alert(`Indent saved successfully with External ID: ${pe.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);i(!1),P([]),C(""),E(""),I(new Date().toISOString().split("T")[0]),V(1)}}catch(ve){console.error(ve),alert("Failed to save indent")}},He=M*W,et=He-W,ft=L.slice(et,He),Be=Math.ceil(L.length/W),dt=xe=>V(xe),Tt=({currentPage:xe,totalPages:he,onPageChange:ve,size:pe="normal"})=>{if(he<=1)return null;const De=[],Ke=5;let Nt=Math.max(1,xe-Math.floor(Ke/2)),Je=Math.min(he,Nt+Ke-1);Je-Nt+1<Ke&&(Nt=Math.max(1,Je-Ke+1));for(let Ue=Nt;Ue<=Je;Ue++)De.push(Ue);const Qe=pe==="small"?"btn-sm":"";return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${xe===1?"disabled":""}`,children:n.jsx("button",{className:`page-link ${Qe}`,onClick:()=>ve(xe-1),disabled:xe===1,children:"Previous"})}),Nt>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${Qe}`,onClick:()=>ve(1),children:"1"})}),Nt>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${Qe}`,children:"..."})})]}),De.map(Ue=>n.jsx("li",{className:`page-item ${xe===Ue?"active":""}`,children:n.jsx("button",{className:`page-link ${Qe}`,onClick:()=>ve(Ue),children:Ue})},Ue)),Je<he&&n.jsxs(n.Fragment,{children:[Je<he-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:`page-link ${Qe}`,children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:`page-link ${Qe}`,onClick:()=>ve(he),children:he})})]}),n.jsx("li",{className:`page-item ${xe===he?"disabled":""}`,children:n.jsx("button",{className:`page-link ${Qe}`,onClick:()=>ve(xe+1),disabled:xe===he,children:"Next"})})]})})},At=()=>{i(!1),p(""),g(""),h(null),d(!0)},qt=xe=>{p(xe),xe==="internal"&&Me()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto ",children:[n.jsx("h2",{className:"mb-1",children:"Sales Enquiry"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Sales Category ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select form-select-lg",value:S,onChange:xe=>w(xe.target.value),children:[n.jsx("option",{value:"",children:"-- Select Category --"}),b.map((xe,he)=>n.jsx("option",{value:xe.name||xe.categoryName||xe._id,children:xe.name||xe.categoryName||`Category ${he+1}`},he))]})})]}),n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Doc Date ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:A,onChange:xe=>I(xe.target.value)})})]}),n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Location ",n.jsx("span",{className:"text-danger",children:"*"})]})})," ",n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select form-control-sm",value:k,onChange:xe=>C(xe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),o.map((xe,he)=>n.jsx("option",{value:xe.name||xe._id,children:xe.name||xe._id},he))]})})]}),n.jsxs("div",{className:"col-md-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{className:"form-label fw-bold",children:["Sales Group ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:xe=>E(xe.target.value),placeholder:"Buyer Group"})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"}),n.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",L.length,")"]})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsx("div",{className:"card-body p-0",children:L.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:n.jsxs("table",{className:"table-sm table-bordered table-striped mb-0",children:[n.jsx("thead",{className:" sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.No"}),n.jsx("th",{children:"Material No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ft.map((xe,he)=>{const ve=et+he;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center fw-bold",children:ve+1}),n.jsx("td",{children:xe.isManual?n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm",value:xe.materialId,onChange:pe=>de(ve,"materialId",pe.target.value),placeholder:"Material ID"}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>oe(ve),title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]}):n.jsx("span",{className:"badge ",children:xe.materialId})}),n.jsx("td",{children:xe.isManual?n.jsx("input",{className:"form-control form-control-sm",value:xe.description,onChange:pe=>de(ve,"description",pe.target.value),placeholder:"Description",readOnly:!!xe.materialId}):n.jsx("span",{title:xe.description,children:xe.description})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe.qty,onChange:pe=>de(ve,"qty",pe.target.value),min:"1"})}),n.jsx("td",{children:n.jsxs("select",{value:xe.baseUnit,onChange:pe=>de(ve,"baseUnit",pe.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),JB.map(pe=>n.jsx("option",{value:pe,children:pe},pe))]})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:xe.deliveryDate,onChange:pe=>de(ve,"deliveryDate",pe.target.value)})}),n.jsx("td",{children:n.jsxs("select",{value:xe.orderUnit,onChange:pe=>de(ve,"orderUnit",pe.target.value),className:"form-select form-select-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),JB.map(pe=>n.jsx("option",{value:pe,children:pe},pe))]})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:xe.materialgroup||"-"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>Z(ve),title:"Delete Item",children:n.jsx("i",{className:"fas fa-trash"})})})]},ve)})})]})}),n.jsx("div",{className:"card-footer bg-light",children:n.jsx(Tt,{currentPage:M,totalPages:Be,onPageChange:dt,size:"small"})})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]})}),n.jsx("div",{className:"col-md-6 d-flex align-items-end",children:n.jsxs("button",{onClick:ae,className:"btn btn-outline-primary me-2 btn-sm",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})]})]}),n.jsxs("button",{onClick:Me,className:"btn btn-success btn-sm",disabled:!S||L.length===0,children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]}),O&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ye})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:F,onChange:xe=>X(xe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:F==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:q,onChange:se})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ne,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),U.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ue,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:U.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:U.map((xe,he)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge ",children:xe.materialId})}),n.jsx("td",{children:xe.description}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:xe.baseUnit})}),n.jsx("td",{children:xe.location}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:xe.materialgroup})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>je(xe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},he))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":q?`No materials found matching "${q}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ye,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:At,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),f==="external"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"External Indent ID"}),n.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:xe=>g(xe.target.value),maxLength:50,required:!0,placeholder:"Enter custom Indent ID (max 50 characters)"}),n.jsxs("small",{className:"form-text text-muted",children:[x.length,"/50 characters"]})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-primary",onClick:Me,disabled:!x.trim(),children:"Create Indent"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>p(""),children:"Back"})]})]}):n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>qt("internal"),children:[n.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]}),n.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>qt("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External(Custom ID)"]})]})})]})]})})})]})]})},tTe=()=>{const[e,t]=j.useState(1),[r]=j.useState(10),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(""),[d,u]=j.useState("indentId"),[h,f]=j.useState(!1),[p,x]=j.useState(!1),[g,b]=j.useState([]),[y,S]=j.useState(null),[w,k]=j.useState(null),C=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear");j.useEffect(()=>{E()},[]);const E=()=>{f(!0),Oe.get("/api/salerequest/get",{params:{companyId:C,financialYear:D}}).then(V=>{const W=V.data.sort((ee,re)=>new Date(re.createdAt||re.documentDate)-new Date(ee.createdAt||ee.documentDate));s(W),o(W)}).catch(V=>console.error("Failed to fetch saved indents",V)).finally(()=>f(!1))},A=async(V,W,ee)=>{try{const re={[W]:ee};await Oe.put(`/api/salerequest/status/${V}`,re);const ne=ce=>ce.map(ae=>ae._id===V?{...ae,[W]:ee}:ae);s(ne),o(ce=>ne(ce)),alert("Status updated successfully!")}catch(re){console.error("Error updating status:",re),alert("Failed to update status!")}},I=()=>{x(!0),b(a)},L=()=>{x(!1),c(""),b([])},P=V=>{const W=V.target.value;if(c(W),W.trim()===""){b(a);return}const ee=a.filter(re=>{if(d==="indentId"){const ne=W.toLowerCase(),ce=re.indentId.toLowerCase();return ce.includes(ne)||ce.replace(/[^0-9]/g,"").includes(ne.replace(/[^0-9]/g,""))}else{if(d==="location")return re.location.toLowerCase().includes(W.toLowerCase());if(d==="buyerGroup")return re.buyerGroup.toLowerCase().includes(W.toLowerCase());if(d==="categoryName")return re.categoryName.toLowerCase().includes(W.toLowerCase())}return!1});b(ee)};j.useEffect(()=>{const V=a.find(W=>W._id===y);k(V)},[y,a]);const O=()=>{b(a),c("")},Y=()=>{b([]),c("")},q=V=>{o([V]),t(1),L()},K=()=>{o(a),t(1)},U=V=>{const W=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${V.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(V.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${V.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${V.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${V.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${V.items.map((re,ne)=>`
                                <tr style="${ne%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${ne+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${re.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ee=window.open("","","width=900,height=700");ee.document.write("<html><head><title>Indent Print - "+V.indentId+"</title></head><body>"),ee.document.write(W),ee.document.write("</body></html>"),ee.document.close(),ee.print()},J=e*r,F=J-r,X=i.slice(F,J),Q=Math.ceil(i.length/r),ie=V=>t(V),M=({currentPage:V,totalPages:W,onPageChange:ee})=>{if(W<=1)return null;const re=[],ne=5;let ce=Math.max(1,V-Math.floor(ne/2)),ae=Math.min(W,ce+ne-1);ae-ce+1<ne&&(ce=Math.max(1,ae-ne+1));for(let Z=ce;Z<=ae;Z++)re.push(Z);return n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[n.jsx("li",{className:`page-item ${V===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ee(V-1),disabled:V===1,children:"Previous"})}),ce>1&&n.jsxs(n.Fragment,{children:[n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ee(1),children:"1"})}),ce>2&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})})]}),re.map(Z=>n.jsx("li",{className:`page-item ${V===Z?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ee(Z),children:Z})},Z)),ae<W&&n.jsxs(n.Fragment,{children:[ae<W-1&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),n.jsx("li",{className:"page-item",children:n.jsx("button",{className:"page-link",onClick:()=>ee(W),children:W})})]}),n.jsx("li",{className:`page-item ${V===W?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ee(V+1),disabled:V===W,children:"Next"})})]})})};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Enquiry List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry List"})]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("div",{}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-light btn-sm",onClick:I,children:[n.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:K,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),n.jsx("div",{className:"card-body",children:h?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):X.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table-sm table table-bordered align-middle",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Sales Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Materials"}),n.jsx("th",{children:"Delete Status"}),n.jsx("th",{children:"Block Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:X.map((V,W)=>{const ee=F+W;return n.jsxs("tr",{children:[n.jsx("td",{className:"text-center",children:ee+1}),n.jsx("td",{children:V.indentId}),n.jsx("td",{children:new Date(V.documentDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),V.location]}),n.jsx("td",{children:V.salesGroup}),n.jsx("td",{children:V.categoryName}),n.jsxs("td",{className:"text-center",children:[V.items.length," items"]}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:V.isDeleted||!1,onChange:re=>A(V._id,"isDeleted",re.target.checked)}),n.jsx("label",{className:"form-check-label",children:V.isDeleted?"Deleted":"Active"})]})}),n.jsx("td",{children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:V.isBlocked||!1,onChange:re=>A(V._id,"isBlocked",re.target.checked)}),n.jsx("label",{className:"form-check-label",children:V.isBlocked?"Blocked":"Active"})]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>U(V),title:"Print Indent",children:n.jsx("i",{className:"fas fa-print"})}),n.jsx("button",{type:"button",onClick:()=>S(V._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:n.jsx("i",{className:"ti ti-eye"})})]})]},V._id)})})]})}),Q>1&&n.jsx("div",{className:"d-flex justify-content-center mt-4",children:n.jsx(M,{currentPage:e,totalPages:Q,onPageChange:ie})})]}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("h5",{className:"text-muted",children:i.length!==a.length?"Filtered results":"No indents available"}),n.jsx("p",{className:"text-muted",children:i.length!==a.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==a.length&&n.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:K,children:[n.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})]})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:L})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:d,onChange:V=>u(V.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"location",children:"Location"}),n.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:P})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:O,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Y,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Materials"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:g.map((V,W)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:V.indentId})}),n.jsx("td",{children:new Date(V.documentDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:[n.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),V.location]}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:V.buyerGroup})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-success",children:V.categoryName})}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-warning text-dark",children:[V.items.length," items"]})}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>q(V),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},W))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:a.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:L,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"table-responsive",children:w?.items?.length>0&&n.jsxs("table",{className:"table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Delivery Date"})]})}),n.jsx("tbody",{children:w?.items.map((V,W)=>n.jsxs("tr",{children:[n.jsx("td",{children:W+1}),n.jsx("td",{children:V.materialId}),n.jsx("td",{children:V.description}),n.jsx("td",{children:V.qty}),n.jsx("td",{children:V.baseUnit}),n.jsx("td",{children:V.orderUnit}),n.jsx("td",{children:V.location}),n.jsx("td",{children:new Date(V.deliveryDate).toLocaleDateString()})]},V._id))})]})})})]})})})]})};function rTe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState([]),[f,p]=j.useState(null),[x,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState([]),[A,I]=j.useState(""),[L,P]=j.useState(""),[O,Y]=j.useState(""),[q,K]=j.useState(!1),[U,J]=j.useState(!1),[F,X]=j.useState(!1),[Q,ie]=j.useState(null),[M,V]=j.useState(""),[W,ee]=j.useState([]),re=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear"),ce=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:re,financialYear:ne}}).then(he=>{const ve=he.data.filter(pe=>!pe.isBlocked&&!pe.isDeleted);t(ve)}).catch(console.error),Oe.get("/api/sale-quotation-categories",{params:{companyId:re,financialYear:ne}}).then(he=>a(he.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:re,financialYear:ne}}).then(he=>{console.log("Locations API response:",he.data),Array.isArray(he.data)?ee(he.data):he.data&&Array.isArray(he.data.locations)?ee(he.data.locations):ee([])}).catch(he=>{console.error("Failed to fetch locations:",he),ee([])}),console.log("location",M),Oe.get("/api/customers",{params:{companyId:re,financialYear:ne}}).then(he=>{const ve=he.data.filter(pe=>!pe.isBlocked&&!pe.isDeleted);i(ve)}).catch(console.error),Oe.get("/api/material").then(he=>l(he.data)).catch(console.error),ae()},[]);const ae=()=>{Oe.get("/api/salesquotations").then(he=>h(he.data)).catch(console.error)},Z=he=>{p({label:he.indentId,value:he._id}),d(he.salesGroup||""),E(he.items.map(ve=>({...ve,customerName:b?.name1||"",price:"",unit:""}))),X(!1)},de=he=>{y({label:`${he.name1} ${he.name2}`,value:he._id}),E(ve=>ve.map(pe=>({...pe,customerName:he.name1}))),J(!1)},z=he=>{const ve=[...D];ve[Q]={...ve[Q],materialId:he.materialId,description:he.description,baseUnit:he.baseUnit,unit:he.unit,price:he.price},E(ve),K(!1)},se=(he,ve,pe)=>{const De=[...D];De[he][ve]=pe,E(De)},Ne=()=>{E(he=>[...he,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ue,oe]=j.useState(!1),[ye,je]=j.useState("internal"),[Me,He]=j.useState(""),et=he=>{he.preventDefault(),oe(!0)},ft=()=>{const he={indentId:f?.label,categoryId:x?.value,customerId:b?.value,note:S,companyId:ce,financialYear:ne,validityDate:k,salesGroup:c,location:M,items:D,quotationNumberType:ye,externalQuotationNumber:ye==="external"?Me:null};Oe.post("/api/salesquotations",he).then(()=>{alert("Quotation saved successfully!"),ae(),dt(),oe(!1),je("internal"),He("")}).catch(ve=>{console.error(ve),alert("Error saving quotation")})},Be=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-hashtag me-2"}),"Quotation Number Generation"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>oe(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{je("internal"),ft()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>je("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),ye==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:Me,onChange:he=>{he.target.value.length<=50&&He(he.target.value)},onKeyPress:he=>{he.key==="Enter"&&Me.trim()&&ft()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[Me.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:ft,disabled:!Me.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Quotation"]})})]})]})]})})})]}),dt=()=>{p(null),g(null),y(null),w(""),C(""),E([])},Tt=({children:he,onClose:ve})=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsx("h5",{className:"modal-title",children:"Select"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ve})]}),n.jsx("div",{className:"modal-body",children:he})]})})}),At=()=>{const[he,ve]=j.useState([]),[pe,De]=j.useState("materialId"),Ke=Qe=>{const Ue=Qe.target.value;I(Ue);const qe=o.filter(mt=>(pe==="materialId"?mt.materialId:mt.description)?.toLowerCase().includes(Ue.toLowerCase()));ve(qe)},Nt=()=>{ve(o),I("")},Je=()=>{ve([]),I("")};return n.jsxs(Tt,{onClose:()=>K(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:pe,onChange:Qe=>De(Qe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:pe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:A,onChange:Ke})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),he.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:he.map((Qe,Ue)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Qe.materialId})}),n.jsx("td",{children:Qe.description}),n.jsx("td",{children:Qe.baseUnit}),n.jsx("td",{children:Qe.unit}),n.jsx("td",{children:Qe.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>z(Qe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ue))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":A?`No materials found matching "${A}"`:'Enter search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},qt=()=>{const[he,ve]=j.useState("name1"),[pe,De]=j.useState([]),Ke=Qe=>{const Ue=Qe.target.value;P(Ue);const qe=s.filter(mt=>(he==="name1"?mt.name1:he==="city"?mt.city:he==="region"?mt.region:`${mt.name1} ${mt.name2}`)?.toLowerCase().includes(Ue.toLowerCase()));De(qe)},Nt=()=>{De(s),P("")},Je=()=>{De([]),P("")};return n.jsxs(Tt,{onClose:()=>J(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:he,onChange:Qe=>ve(Qe.target.value),children:[n.jsx("option",{value:"name1",children:"Name"}),n.jsx("option",{value:"city",children:"City"}),n.jsx("option",{value:"region",children:"Region"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:L,onChange:Ke})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:pe.map((Qe,Ue)=>n.jsxs("tr",{children:[n.jsxs("td",{children:[Qe.name1," ",Qe.name2]}),n.jsx("td",{children:Qe.city}),n.jsx("td",{children:Qe.region}),n.jsx("td",{children:Qe.contactNo}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(Qe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ue))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":L?`No match found for "${L}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>J(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},xe=()=>{const[he,ve]=j.useState([]),[pe,De]=j.useState("indentId"),[Ke,Nt]=j.useState(""),Je=qe=>{const mt=qe.target.value;Nt(mt);const Ie=e.filter(Xe=>(pe==="indentId"?Xe.indentId:pe==="categoryName"?Xe.categoryName:Xe.location)?.toLowerCase().includes(mt.toLowerCase()));ve(Ie)},Qe=()=>{ve(e),Nt("")},Ue=()=>{ve([]),Nt("")};return n.jsxs(Tt,{onClose:()=>X(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:pe,onChange:qe=>De(qe.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"}),n.jsx("option",{value:"location",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Ke,onChange:Je})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Qe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),he.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ue,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:he.map((qe,mt)=>n.jsxs("tr",{children:[n.jsx("td",{children:qe.indentId}),n.jsx("td",{children:qe.categoryName}),n.jsx("td",{children:qe.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Z(qe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},mt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Ke?`No match for "${Ke}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>X(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Quotation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Quotation Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Request:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:f?.label||"",onChange:he=>{const ve=he.target.value;p({label:ve,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>X(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row ",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})})," ",n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:he=>{const ve=he.target.value;y({label:ve,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>J(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select",value:M,onChange:he=>V(he.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(W)&&W.map((he,ve)=>n.jsx("option",{value:he.name||he._id||he,children:he.name||he.locationName||he},ve))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("label",{className:"form-label",children:"Quotation Category:"})}),"  ",n.jsx("div",{className:"col-xl-5",children:n.jsxs("select",{className:"form-select",value:x?.value||"",onChange:he=>{const ve=he.target.value,pe=r.find(De=>De._id===ve);g(pe?{label:pe.categoryName,value:pe._id}:null)},children:[n.jsx("option",{value:"",children:"Select"}),r.map(he=>n.jsxs("option",{value:he._id,children:[he.categoryName," (",he.prefix,")"]},he._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:he=>C(he.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:he=>d(he.target.value),placeholder:"Enter or edit Sales Group"})})]}),n.jsxs("div",{className:"col-xl-4 row",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{className:"form-label",children:"Notes"})})," ",n.jsx("div",{className:"col-xl-10",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:S,onChange:he=>w(he.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:et,children:[n.jsx("div",{className:"table-responsive mb-3",children:n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:D.map((he,ve)=>n.jsxs("tr",{children:[n.jsx("td",{children:ve+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:he.materialId,onChange:pe=>se(ve,"materialId",pe.target.value)}),n.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{ie(ve),K(!0)},children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:he.description,onChange:pe=>se(ve,"description",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:he.qty,onChange:pe=>se(ve,"qty",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:he.baseUnit,onChange:pe=>se(ve,"baseUnit",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:he.orderUnit,onChange:pe=>se(ve,"orderUnit",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:he.location,onChange:pe=>se(ve,"location",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:he.customerName,onChange:pe=>se(ve,"customerName",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:he.unit,onChange:pe=>se(ve,"unit",pe.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:he.price,onChange:pe=>se(ve,"price",pe.target.value)})})]},ve))})]})}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsx("button",{type:"button",className:"btn btn-link",onClick:Ne,children:"+ Add Quotation Item"})})}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})})})})})]}),q&&n.jsx(At,{}),U&&n.jsx(qt,{}),F&&n.jsx(xe,{}),ue&&n.jsx(Be,{})]})]})}function aTe(){const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(1),o=10,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");j.useEffect(()=>{Oe.get("/api/salesquotations",{params:{companyId:l,financialYear:c}}).then(k=>{const C=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(C)}).catch(k=>{console.error("Failed to fetch quotations",k),alert("Error loading quotations")})},[]);const d=k=>{const C=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Quotation</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Quotation: ${k.quotationNumber}</h2>
          <p><strong>Indent ID:</strong> ${k.indentId}</p>
          <p><strong>Customer Name:</strong> ${k.customerName}</p>
          <p><strong>Validity Date:</strong> ${k.validityDate}</p>
          <p><strong>Note:</strong> ${k.note}</p>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,A)=>{const I=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${A+1}</td>
                      <td>${E.materialId}</td>
                      <td>${E.description}</td>
                      <td>${E.qty}</td>
                      <td>${E.baseUnit}</td>
                      <td>${E.orderUnit}</td>
                      <td>${E.location}</td>
                      <td>${E.unit}</td>
                      <td>${E.price}</td>
                      <td>${I.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,A)=>E+A.qty*parseFloat(A.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;C.document.write(D),C.document.close(),C.print()},[u,h]=j.useState(""),[f,p]=j.useState(""),x=e.filter(k=>{const C=k.quotationNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,A=f?new Date(f):null,I=(!E||D>=E)&&(!A||D<=A);return C&&I}),g=s*o,b=g-o,y=x.slice(b,g),S=Math.ceil(x.length/o),w=k=>i(k);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Quotation List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item",children:"Sales Report"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6"}),n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Quotation No, Indent ID or Customer Name",value:r,onChange:k=>{a(k.target.value),i(1)}})]})}),n.jsxs("div",{className:" col-xl-3  d-flex gap-2",children:[n.jsx("label",{children:"From:"}),n.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}}),n.jsx("label",{children:"To:"}),n.jsx("input",{type:"date",className:"form-control",value:f,onChange:k=>{p(k.target.value),i(1)}})]})]})}),n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Quotation No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Validity Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:y.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-flex",children:k.quotationNumber}),n.jsx("td",{className:"text-flex",children:k.indentId}),n.jsx("td",{className:"text-flex",children:k.customerName}),n.jsx("td",{className:"text-flex",children:k.location}),n.jsx("td",{className:"text-flex",children:k.validityDate}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>d(k),children:[n.jsx("i",{className:"fas fa-print"})," Print"]})})]},C))})]})})]}),S>1&&n.jsx("nav",{className:"ms-auto",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{onClick:()=>w(s-1),className:"page-link",disabled:s===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const C=[],D=[];C.push(1);for(let I=Math.max(2,s-2);I<=Math.min(S-1,s+2);I++)C.push(I);S>1&&C.push(S);const E=[...new Set(C)].sort((I,L)=>I-L);let A;for(let I of E)A&&(I-A===2?D.push(A+1):I-A!==1&&D.push("...")),D.push(I),A=I;return D.map((I,L)=>I==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):n.jsx("li",{className:`page-item ${s===I?"active":""}`,children:n.jsx("button",{onClick:()=>w(I),className:"page-link",children:I})},I))})(),n.jsx("li",{className:`page-item ${s===S?"disabled":""}`,children:n.jsx("button",{onClick:()=>w(s+1),className:"page-link",disabled:s===S,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})}function nTe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(new Date().toISOString().substring(0,10)),[f,p]=j.useState([]),[x,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState([]),[D,E]=j.useState(0),[A,I]=j.useState([]),[L,P]=j.useState([]),[O,Y]=j.useState([]),[q,K]=j.useState(""),[U,J]=j.useState(!1),[F,X]=j.useState(""),[Q,ie]=j.useState([]),[M,V]=j.useState(!1),[W,ee]=j.useState(""),[re,ne]=j.useState([]),[ce,ae]=j.useState(""),[Z,de]=j.useState(""),[z,se]=j.useState(""),[Ne,ue]=j.useState(""),[oe,ye]=j.useState(0),[je,Me]=j.useState(0),[He,et]=j.useState(0),[ft,Be]=j.useState([]),[dt,Tt]=j.useState([]),[At,qt]=j.useState(null),[xe,he]=j.useState(0),[ve,pe]=j.useState(0),[De,Ke]=j.useState(0),[Nt,Je]=j.useState(0),[Qe,Ue]=j.useState(0),[qe,mt]=j.useState([]),[Ie,Xe]=j.useState([]),[Ye,lt]=j.useState(!1),[Mt,Ae]=j.useState(""),[ke,ot]=j.useState(null),bt=localStorage.getItem("selectedCompanyId"),Xt=localStorage.getItem("financialYear"),Ft=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Oe.get("/api/sales-order-categories",{params:{companyId:bt,financialYear:Xt}}).then(yt=>t(yt.data)),Oe.get("/api/salesquotations",{params:{companyId:bt,financialYear:Xt}}).then(yt=>{a(yt.data),Oe.get("/api/general-conditions",{params:{companyId:bt,financialYear:Xt}}).then(hr=>{const Kr=hr.data.filter(Rr=>!Rr.isDeleted).map(Rr=>({_id:Rr._id,name:Rr.name,description:Rr.description}));Be(Kr)});const mr=[];yt.data.forEach(hr=>{hr.items.forEach(Kr=>{Kr.salesGroup&&!mr.includes(Kr.salesGroup)&&mr.push(Kr.salesGroup)})}),Y(mr)}),Oe.get("/api/locations",{params:{companyId:bt,financialYear:Xt}}).then(yt=>p(yt.data)),Oe.get("/api/tax",{params:{companyId:bt,financialYear:Xt}}).then(yt=>Tt(yt.data)),Oe.get("/api/material",{params:{companyId:bt,financialYear:Xt}}).then(yt=>Xe(yt.data)),Oe.get("/api/customers",{params:{companyId:bt,financialYear:Xt}}).then(yt=>I(yt.data)),C([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]),console.log("customers",A);const rr=yt=>{console.log("Selected Quotation/Contract/Enquiry:",yt);const mr=hr=>hr?.map(Kr=>({...Kr,quantity:Kr.qty||Kr.quantity||0}))||[];yt.contractNumber?(l(yt.contractNumber),P(yt.customerName||""),y(yt.location||""),C(mr(yt.items)),ae(yt.salesGroup||"")):yt.quotationNumber?(l(yt.quotationNumber),P(yt.customerName||""),y(yt.location||""),C(mr(yt.items)),ae(yt.salesGroup||"")):yt.indentId&&(l(yt.indentId),y(yt.location||""),C(mr(yt.items)),ae(yt.salesGroup||"")),J(!1)},pr=()=>{J(!1),X(""),ie([])},jr=(yt,mr,hr)=>{mr.includes(yt)?hr(mr.filter(Kr=>Kr!==yt)):hr([...mr,yt])},vt=yt=>{if(ee(yt),yt.trim()){const mr=A.filter(hr=>hr.name1?.toLowerCase().includes(yt.toLowerCase())||hr.cnNo?.toLowerCase().includes(yt.toLowerCase()));ne(mr)}else ne([])},Lt=()=>{ne(A)},fe=yt=>{P(yt.name1||yt.customerName),V(!1),ee(""),ne([])},Re=yt=>{l(yt);const mr=r.find(hr=>hr.quotationNumber===yt);if(mr){P(mr.name1||mr.customerName),y(mr.items[0]?.location||"");const hr=mr.items.find(Rr=>Rr.salesGroup);hr&&setSalesGroup(hr.salesGroup);const Kr=mr.items.map(Rr=>({materialId:Rr.materialId,description:Rr.description,quantity:Rr.qty,baseUnit:Rr.baseUnit,unit:Rr.unit,orderUnit:Rr.orderUnit,price:Rr.price,priceUnit:Rr.priceUnit,materialgroup:Rr.materialgroup,deliveryDate:Rr.deliveryDate?String(Rr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:Rr.note||""}));C(Kr),_e(Kr)}},Te=()=>{V(!1),ee(""),ne([])},_e=(yt,mr,hr,Kr,Rr)=>{const cn=yt.reduce((qi,Ts)=>qi+(Ts.quantity||0)*(Ts.price||0),0);E(cn.toFixed(2));const Zo=mr!==void 0?mr:xe,as=hr!==void 0?hr:ve,Bo=Kr!==void 0?Kr:De,xa=Rr!==void 0?Rr:Nt,ui=cn*(parseFloat(Zo)||0)/100,el=cn*(parseFloat(as)||0)/100,tl=cn*(parseFloat(Bo)||0)/100,Vi=parseFloat(xa)||0;ye(ui.toFixed(2)),Me(el.toFixed(2)),et(tl.toFixed(2));const qa=cn+ui+el+tl-Vi;Ue(qa.toFixed(2))},Le=yt=>{he(yt),_e(k,yt,ve,De,Nt)},Ve=yt=>{pe(yt),_e(k,xe,yt,De,Nt)},pt=yt=>{Ke(yt),_e(k,xe,ve,yt,Nt)},wt=yt=>{Je(yt),_e(k,xe,ve,De,yt)},st=(yt,mr,hr)=>{const Kr=[...k];Kr[yt][mr]=mr==="quantity"||mr==="price"?parseFloat(hr)||0:hr,C(Kr),_e(Kr,xe,ve,De,Nt)},St=()=>{C([...k,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialGroup:"",note:"",deliveryDate:new Date().toISOString().slice(0,10)}])},Ct=yt=>{const mr=[...k];mr.splice(yt,1),C(mr),_e(mr)},[Jt,ir]=j.useState(!1),[xr,or]=j.useState("internal"),[ze,dr]=j.useState(""),[ur,qr]=j.useState(""),va=async yt=>{if(yt.preventDefault(),!s||!o)return alert("Please select both category and quotation");ir(!0)},rn=async(yt=null)=>{const mr=r.find(Kr=>Kr.quotationNumber===o),hr={soNumber:q,quotationId:mr?._id,quotationNumber:o,categoryId:s._id,category:s.categoryName,date:u,customerName:L,contactPerson:Z,salesGroup:ce,payTerms:z,validityDate:Ne,deliveryLocation:b,deliveryAddress:S,items:k,generalCondition:qe,companyId:Ft,financialYear:Xt,total:parseFloat(D)||0,taxName:At?.taxName||"",cgst:parseFloat(xe)||0,sgst:parseFloat(ve)||0,igst:parseFloat(De)||0,taxDiscount:parseFloat(Nt)||0,finalTotal:parseFloat(Qe)||0,soNumberType:yt?"external":"internal",customSONumber:yt};try{const Kr=await Oe.post("/api/sales-orders",hr);console.log("Saved SO:",Kr.data),i(null),l(""),h(new Date().toISOString().substring(0,10)),I(""),y(""),w(""),C([]),E(""),qt(null),he(""),pe(""),Ke(""),Je(""),Ue(""),se(""),ae(""),de(""),ir(!1),or("internal"),dr(""),qr(""),alert("Sales Order Created Successfully with SO Number: "+Kr.data.soNumber)}catch(Kr){console.error("Error during SO creation:",Kr),alert("Failed to create Sales Order")}},Qs=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Generate Sales Order Number"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{ir(!1),or("internal"),dr("")},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the SO Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{or("internal"),rn(null)},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>or("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),xr==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Custom SO Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number (max 50 characters)",value:ze,onChange:yt=>dr(yt.target.value),onKeyPress:yt=>{yt.key==="Enter"&&ze.trim()&&rn(ze)},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[ze.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>rn(ze),disabled:!ze.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save SO"]})})]}),xr==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"alert alert-info",role:"alert",children:[n.jsx("i",{className:"fas fa-info-circle me-2"}),"SO number will be auto-generated based on category: ",n.jsx("strong",{children:s?.categoryName}),n.jsx("br",{}),n.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]}),Gn=()=>{const yt=Ie.filter(hr=>hr.materialId.toLowerCase().includes(Mt.toLowerCase())||hr.description.toLowerCase().includes(Mt.toLowerCase())),mr=hr=>{const Kr=[...k];Kr[ke]={...Kr[ke],materialId:hr.materialId,description:hr.description,baseUnit:hr.baseUnit,unit:hr.unit,price:hr.price,salesGroup:hr.salesGroup,materialgroup:hr.materialgroup},C(Kr),_e(Kr),lt(!1)};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:n.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[n.jsx("h3",{children:"Select Material"}),n.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:Mt,onChange:hr=>Ae(hr.target.value),style:{width:"100%",marginBottom:10}}),n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Price Unit"}),n.jsx("th",{children:"Sales Group"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Select"})]})}),n.jsx("tbody",{children:yt.map((hr,Kr)=>n.jsxs("tr",{children:[n.jsx("td",{children:hr.materialId}),n.jsx("td",{children:hr.description}),n.jsx("td",{children:hr.baseUnit}),n.jsx("td",{children:hr.unit}),n.jsx("td",{children:hr.price}),n.jsx("td",{children:hr.priceUnit}),n.jsx("td",{children:hr.salesGroup}),n.jsx("td",{children:hr.materialgroup}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>mr(hr),children:"Select"})})]},Kr))})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>lt(!1),style:{marginTop:10},children:"Close"})]})})};function xs({show:yt,onClose:mr,onSelect:hr,selectedTab:Kr="enquiry"}){const[Rr,cn]=j.useState(Kr),[Zo,as]=j.useState(""),[Bo,xa]=j.useState([]);j.useEffect(()=>{as(""),xa([]),ui()},[Rr]);const ui=async()=>{let qa="";Rr==="enquiry"?qa="/api/salerequest/get":Rr==="quotation"?qa="/api/salesquotations":Rr==="contract"&&(qa="/api/salescontracts");const qi=await Oe.get(`${qa}`,{params:{companyId:bt,financialYear:Xt}});xa(qi.data)},el=async qa=>{if(as(qa),!qa){ui();return}xa(qi=>qi.filter(Ts=>(Ts.quotationNumber||Ts.enquiryNumber||Ts.contractNumber||"").toLowerCase().includes(qa.toLowerCase())))},tl=qa=>qa.quotationNumber||qa.indentId||qa.contractNumber||"",Vi=qa=>new Date(qa.date||qa.validityDate||qa.createdAt||"").toLocaleDateString();return yt?n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),Rr==="enquiry"?"Search Enquiries":Rr==="quotation"?"Search Quotations":"Search Contracts"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:mr})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("ul",{className:"nav nav-tabs mb-3",children:[n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${Rr==="enquiry"?"active":""}`,onClick:()=>cn("enquiry"),children:"Enquiry"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${Rr==="quotation"?"active":""}`,onClick:()=>cn("quotation"),children:"Quotation"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${Rr==="contract"?"active":""}`,onClick:()=>cn("contract"),children:"Contract"})})]}),n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Number"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Enter ${Rr} number...`,value:Zo,onChange:qa=>el(qa.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:ui,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Bo.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Bo.map((qa,qi)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:tl(qa)})}),n.jsx("td",{children:Vi(qa)}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{hr(qa),mr()},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},qi))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Zo?`No ${Rr}s found matching "${Zo}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:mr,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const As=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Te})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Custmore"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:W,onChange:yt=>vt(yt.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Lt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:re.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer Code"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"address1"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:re.map((yt,mr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:yt.cnNo})}),n.jsx("td",{children:yt.name1}),n.jsx("td",{children:yt.email}),n.jsx("td",{children:yt.address1}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>fe(yt),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},mr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:W?`No vendors found matching "${W}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Te,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Order"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Order"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Sales Order Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Reference No:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference number",value:o,onChange:yt=>{l(yt.target.value),yt.target.value&&Re(yt.target.value)},required:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>J(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SO Category:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",onChange:yt=>{const mr=e.find(hr=>hr._id===yt.target.value);i(mr)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),e.map(yt=>n.jsx("option",{value:yt._id,children:yt.categoryName},yt._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SO Number:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:q,readOnly:!0})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SO Creating date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:yt=>h(yt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:L,onChange:yt=>P(yt.target.value),placeholder:"Enter customer name"}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>V(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:b,onChange:yt=>y(yt.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),f.map(yt=>n.jsx("option",{value:yt.name||yt.locationName||yt._id,children:yt.name||yt.locationName||yt._id},yt._id||yt.id||yt.name))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:ce,onChange:yt=>ae(yt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:Z,onChange:yt=>de(yt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Payment Terms:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("textarea",{className:"form-control form-control-sm",value:z,onChange:yt=>se(yt.target.value),maxLength:"250"})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ne,onChange:yt=>ue(yt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select General Conditions"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:qe.length===0?"Select...":`${qe.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:ft.map(yt=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:qe.includes(yt._id),onChange:()=>jr(yt._id,qe,mt)}),n.jsx("label",{className:"form-check-label ms-1",children:yt.name})]})},yt._id))})]})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",style:{width:"100%",tableLayout:"fixed"},children:n.jsxs("table",{className:" table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"PriceUnit"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:k.map((yt,mr)=>n.jsxs("tr",{children:[n.jsx("td",{children:mr+1}),n.jsx("td",{children:n.jsx("input",{value:yt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{ot(mr),lt(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:yt.description,onChange:hr=>st(mr,"description",hr.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:yt.quantity,onChange:hr=>st(mr,"quantity",hr.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:yt.baseUnit,onChange:hr=>st(mr,"baseUnit",hr.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:yt.orderUnit,onChange:hr=>st(mr,"orderUnit",hr.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:yt.materialgroup,onChange:hr=>st(mr,"materialgroup",hr.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:yt.price,onChange:hr=>st(mr,"price",hr.target.value)})}),n.jsx("td",{children:n.jsxs("select",{value:yt.priceUnit,onChange:hr=>st(mr,"priceUnit",hr.target.value),required:!0,className:"form-select",children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"INR",children:"INR"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),n.jsx("td",{children:(yt.quantity*yt.price).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:yt.deliveryDate,onChange:hr=>st(mr,"deliveryDate",hr.target.value)})}),n.jsx("td",{children:n.jsx("textarea",{className:"form-control form-control-sm",value:yt.note,onChange:hr=>st(mr,"note",hr.target.value),maxLength:"250",rows:"2"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>Ct(mr),children:n.jsx("i",{className:"ti ti-trash"})})})]},mr))})]})}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:St,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingFour",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),n.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:va,children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("label",{className:"form-label",children:"Delivery Address:"}),n.jsx("textarea",{className:"form-control form-control-sm",value:S,onChange:yt=>w(yt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-xl-6 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Tax:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select",onChange:yt=>{const mr=dt.find(hr=>hr.taxName===yt.target.value);if(qt(mr),mr){const hr=mr.cgst||0,Kr=mr.sgst||0,Rr=mr.igst||0;he(hr),pe(Kr),Ke(Rr),_e(k,hr,Kr,Rr,Nt)}},children:[n.jsx("option",{value:"",children:"-- Select Tax Template --"}),dt.map(yt=>n.jsx("option",{value:yt.taxName,children:yt.taxName},yt._id))]})})]})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6 row ",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"CGST (%):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe,onChange:yt=>Le(yt.target.value),step:"0.01"})})]}),n.jsxs("div",{className:"col-md-6 row ",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SGST (%):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:ve,onChange:yt=>Ve(yt.target.value),step:"0.01"})})]}),n.jsxs("div",{className:"col-md-6 row ",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"IGST (%):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:De,onChange:yt=>pt(yt.target.value),step:"0.01"})})]}),n.jsxs("div",{className:"col-md-6 row ",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Tax Discount:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Nt,onChange:yt=>wt(yt.target.value),step:"0.01"})})]})]}),n.jsx("div",{className:"border-top pt-3 ",children:n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-6",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("strong",{children:["",D]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"CGST:"}),n.jsxs("span",{children:["",oe]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"SGST:"}),n.jsxs("span",{children:["",je]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"IGST:"}),n.jsxs("span",{children:["",He]})]}),n.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[n.jsx("span",{children:"Discount:"}),n.jsxs("span",{children:["- ",Nt]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("strong",{children:"Final Total:"}),n.jsxs("strong",{className:"text-success",children:["",Qe]})]})]})})})]})]})})]}),n.jsx("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:"Submit SO"})]})})})})})]}),Ye&&n.jsx(Gn,{}),U&&n.jsx(xs,{show:U,onClose:pr,onSelect:rr}),M&&n.jsx(As,{}),Jt&&n.jsx(Qs,{})]})})]})})}function sTe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState("");j.useEffect(()=>{const A=e.filter(I=>{const L=I.soNumber?.toLowerCase().includes(c.toLowerCase())||I.poNumber?.toLowerCase().includes(c.toLowerCase())||I.vendor?.toLowerCase().includes(c.toLowerCase())||I.customer?.toLowerCase().includes(c.toLowerCase())||I.category?.toLowerCase().includes(c.toLowerCase())||I.quotationNumber?.toLowerCase().includes(c.toLowerCase())||I.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||I.deliveryAddress?.toLowerCase().includes(c.toLowerCase()),P=new Date(I.createdAt),O=u?new Date(u):null,Y=f?new Date(f):null,q=(!O||P>=O)&&(!Y||P<=Y);return L&&q});a(A)},[c,u,f,e]);const[x,g]=j.useState(1),[b]=j.useState(10);j.useEffect(()=>{y()},[]);const y=()=>{i(!0),Oe.get("/api/sales-orders",{params:{companyId:o,financialYear:l}}).then(A=>{const I=A.data.sort((L,P)=>new Date(P.createdAt)-new Date(L.createdAt));t(I),a(I),i(!1)}).catch(A=>{console.error("Error fetching POs:",A),alert("Failed to fetch POs"),i(!1)})},S=x*b,w=S-b,k=r.slice(w,S),C=Math.ceil(r.length/b),D=A=>g(A),E=A=>{const I=A.items.map((O,Y)=>`
      <tr>
        <td>${Y+1}</td>
        <td>${O.materialId}</td>
        <td>${O.description}</td>
        <td>${O.quantity}</td>
        <td>${O.baseUnit}</td>
        <td>${O.unit}</td>
        <td>${O.orderUnit}</td>
        <td>${O.price}</td>
        <td>${O.salesGroup}</td>
        <td>${O.materialgroup}</td>
        <td>${O.deliveryDate}</td>
      </tr>
    `).join(""),L=`
      <html>
      <head>
        <title>Sales Order - ${A.soNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; }
          th { background-color: #f0f0f0; }
        </style>
      </head>
      <body>
        <h2>sales Order Details</h2>
        <p><strong>PO Number:</strong> ${A.poNumber}</p>
        <p><strong>Date:</strong> ${A.date}</p>
        <p><strong>Vendor:</strong> ${A.vendor}</p>
        <p><strong>Category:</strong> ${A.category}</p>
        <p><strong>Quotation Number:</strong> ${A.quotationNumber}</p>
        <p><strong>Delivery Location:</strong> ${A.deliveryLocation}</p>
        <p><strong>Delivery Address:</strong> ${A.deliveryAddress}</p>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Base Unit</th>
              <th>Unit</th>
              <th>Order Unit</th>
              <th>Price</th>
              <th>Buyer Group</th>
              <th>Material Group</th>
              <th>Delivery Date</th>
            </tr>
          </thead>
          <tbody>
            ${I}
          </tbody>
        </table>

        <h3>Tax Summary</h3>
        <p><strong>Total:</strong> ${A.total}</p>
        <p><strong>Tax Name:</strong> ${A.taxName}</p>
        <p><strong>CGST:</strong> ${A.cgst}%</p>
        <p><strong>SGST:</strong> ${A.sgst}%</p>
        <p><strong>IGST:</strong> ${A.igst}%</p>
        <p><strong>Tax Discount:</strong> ${A.taxDiscount}</p>
        <p><strong>Final Total:</strong> ${A.finalTotal}</p>
      </body>
      </html>
    `,P=window.open("","","width=800,height=600");P.document.write(L),P.document.close(),P.print()};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[n.jsx("h2",{children:"Sales Order Display"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Search PO Number, Vendor, Category, etc.",value:c,onChange:A=>{d(A.target.value),g(1)}})}),n.jsx("div",{className:"col-md-3",children:n.jsx("input",{type:"date",className:"form-control",value:u,onChange:A=>{h(A.target.value),g(1)}})}),n.jsx("div",{className:"col-md-3",children:n.jsx("input",{type:"date",className:"form-control",value:f,onChange:A=>{p(A.target.value),g(1)}})}),n.jsx("div",{className:"col-md-2 mb-1",children:n.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(1)},children:"Reset Filters"})})]})]}),s?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Quotation Number"}),n.jsx("th",{children:"Delivery Location"}),n.jsx("th",{children:"Delivery Address"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:k.length>0?k.map(A=>n.jsxs("tr",{children:[n.jsx("td",{children:A.soNumber}),n.jsx("td",{children:A.date}),n.jsx("td",{children:A.customerName}),n.jsx("td",{children:A.category}),n.jsx("td",{children:A.quotationNumber}),n.jsx("td",{children:A.deliveryLocation}),n.jsx("td",{children:A.deliveryAddress}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>E(A),children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})]},A._id)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted mb-0",children:"No sales orders found"})]})})})]})})})}),C>1&&n.jsx("nav",{"aria-label":"sales Orders pagination",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${x===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>D(x-1),disabled:x===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const I=[],L=[];I.push(1);for(let Y=Math.max(2,x-2);Y<=Math.min(C-1,x+2);Y++)I.push(Y);C>1&&I.push(C);const P=[...new Set(I)].sort((Y,q)=>Y-q);let O;for(let Y of P)O&&(Y-O===2?L.push(O+1):Y-O!==1&&L.push("...")),L.push(Y),O=Y;return L.map((Y,q)=>Y==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${q}`):n.jsx("li",{className:`page-item ${x===Y?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>D(Y),children:Y})},Y))})(),n.jsx("li",{className:`page-item ${x===C?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>D(x+1),disabled:x===C,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}function iTe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(new Date().toISOString().substring(0,10)),[u,h]=j.useState(new Date().toISOString().substring(0,10)),[f,p]=j.useState([]),[x,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(0),[D,E]=j.useState([]),[A,I]=j.useState(""),[L,P]=j.useState(""),[O,Y]=j.useState(!1),[q,K]=j.useState(""),[U,J]=j.useState([]),[F,X]=j.useState(!1),[Q,ie]=j.useState(""),[M,V]=j.useState([]),[W,ee]=j.useState(""),[re,ne]=j.useState(""),[ce,ae]=j.useState([]),[Z,de]=j.useState([]),[z,se]=j.useState(""),[Ne,ue]=j.useState(""),[oe,ye]=j.useState(""),[je,Me]=j.useState(""),[He,et]=j.useState("Full"),[ft,Be]=j.useState("Pending"),[dt,Tt]=j.useState(""),At=localStorage.getItem("selectedCompanyId"),qt=localStorage.getItem("financialYear"),xe=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Oe.get("/api/sales-order-categories",{params:{companyId:At,financialYear:qt}}).then(vt=>t(vt.data)),Oe.get("/api/sales-orders",{params:{companyId:At,financialYear:qt}}).then(vt=>{a(vt.data)}),Oe.get("/api/general-conditions",{params:{companyId:At,financialYear:qt}}).then(vt=>{const Lt=vt.data.filter(fe=>!fe.isDeleted).map(fe=>({_id:fe._id,name:fe.name,description:fe.description}));ae(Lt)}),Oe.get("/api/locations",{params:{companyId:At,financialYear:qt}}).then(vt=>p(vt.data)),Oe.get("/api/customers",{params:{companyId:At,financialYear:qt}}).then(vt=>E(vt.data)),w([...Array(4).fill(null).map(()=>({materialId:"",description:"",orderedQuantity:0,deliveredQuantity:0,pendingQuantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",deliveryDate:new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:"",isPartialDelivery:!1}))])},[]);const he=vt=>{console.log("Selected Sales Order:",vt),l(vt.soNumber),I(vt.customerName||""),g(vt.deliveryLocation||""),y(vt.deliveryAddress||""),ee(vt.salesGroup||""),ne(vt.contactPerson||""),de(vt.generalCondition||[]);const Lt=vt.items?.map(fe=>({materialId:fe.materialId||"",description:fe.description||"",orderedQuantity:fe.quantity||0,deliveredQuantity:0,pendingQuantity:fe.quantity||0,baseUnit:fe.baseUnit||"",unit:fe.unit||"",orderUnit:fe.orderUnit||"",price:fe.price||0,priceUnit:fe.priceUnit||"",deliveryDate:fe.deliveryDate||new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:fe.note||"",isPartialDelivery:!1}))||[];w(Lt),Ue(Lt),Y(!1)},ve=()=>{Y(!1),K(""),J([])},pe=(vt,Lt,fe)=>{Lt.includes(vt)?fe(Lt.filter(Re=>Re!==vt)):fe([...Lt,vt])},De=vt=>{if(ie(vt),vt.trim()){const Lt=D.filter(fe=>fe.name1?.toLowerCase().includes(vt.toLowerCase())||fe.cnNo?.toLowerCase().includes(vt.toLowerCase()));V(Lt)}else V([])},Ke=()=>{V(D)},Nt=vt=>{I(vt.name1||vt.customerName),X(!1),ie(""),V([])},Je=()=>{X(!1),ie(""),V([])},Qe=vt=>{l(vt);const Lt=r.find(fe=>fe.soNumber===vt);Lt&&he(Lt)},Ue=vt=>{const Lt=vt.reduce((fe,Re)=>fe+(Re.deliveredQuantity||0)*(Re.price||0),0);C(Lt.toFixed(2))},qe=(vt,Lt,fe)=>{const Re=[...S];if(Lt==="deliveredQuantity"){const Te=parseFloat(fe)||0,_e=Re[vt].orderedQuantity||0,Le=Math.max(0,_e-Te);Re[vt].deliveredQuantity=Te,Re[vt].pendingQuantity=Le,Re[vt].isPartialDelivery=Te<_e&&Te>0}else Re[vt][Lt]=Lt==="orderedQuantity"||Lt==="price"?parseFloat(fe)||0:fe;w(Re),Ue(Re)},mt=()=>{w([...S,{materialId:"",description:"",orderedQuantity:0,deliveredQuantity:0,pendingQuantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",deliveryDate:new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:"",isPartialDelivery:!1}])},Ie=vt=>{const Lt=[...S];Lt.splice(vt,1),w(Lt),Ue(Lt)},[Xe,Ye]=j.useState(!1),[lt,Mt]=j.useState("internal"),[Ae,ke]=j.useState(""),[ot,bt]=j.useState(""),Xt=async vt=>{if(vt.preventDefault(),!s||!o)return alert("Please select both category and sales order");Ye(!0)},Ft=async(vt=null)=>{const Lt=r.find(Re=>Re.soNumber===o),fe={deliveryNumber:L,salesOrderId:Lt?._id,soNumber:o,categoryId:s._id,category:s.categoryName,deliveryDate:c,actualDeliveryDate:u,customerName:A,contactPerson:re,salesGroup:W,deliveryLocation:x,deliveryAddress:b,transportDetails:z,vehicleNumber:Ne,driverName:oe,driverPhone:je,items:S,deliveryType:He,deliveryStatus:ft,generalCondition:Z,remarks:dt,companyId:xe,financialYear:qt,total:parseFloat(k)||0,deliveryNumberType:vt?"external":"internal",customDeliveryNumber:vt};try{console.log("data",fe);const Re=await Oe.post("/api/del/salesdeliveries",fe);console.log("Saved Delivery:",Re.data),i(null),l(""),d(new Date().toISOString().substring(0,10)),h(new Date().toISOString().substring(0,10)),I(""),g(""),y(""),w([]),C(""),ee(""),ne(""),se(""),ue(""),ye(""),Me(""),et("Full"),Be("Pending"),Tt(""),Ye(!1),Mt("internal"),ke(""),bt(""),alert("Sales Delivery Created Successfully with Delivery Number: "+Re.data.deliveryNumber)}catch(Re){console.error("Error during Delivery creation:",Re),alert("Failed to create Sales Delivery")}},rr=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Generate Sales Delivery Number"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{Ye(!1),Mt("internal"),ke("")},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Delivery Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Mt("internal"),Ft(null)},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Mt("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),lt==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Custom Delivery Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter delivery number (max 50 characters)",value:Ae,onChange:vt=>ke(vt.target.value),onKeyPress:vt=>{vt.key==="Enter"&&Ae.trim()&&Ft(Ae)},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[Ae.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>Ft(Ae),disabled:!Ae.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save Delivery"]})})]}),lt==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"alert alert-info",role:"alert",children:[n.jsx("i",{className:"fas fa-info-circle me-2"}),"Delivery number will be auto-generated based on category: ",n.jsx("strong",{children:s?.categoryName}),n.jsx("br",{}),n.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]});function pr({show:vt,onClose:Lt,onSelect:fe}){const[Re,Te]=j.useState(""),[_e,Le]=j.useState([]);j.useEffect(()=>{vt&&Le(r)},[vt]);const Ve=pt=>{if(Te(pt),!pt){Le(r);return}Le(r.filter(wt=>wt.soNumber?.toLowerCase().includes(pt.toLowerCase())||wt.customerName?.toLowerCase().includes(pt.toLowerCase())))};return vt?n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Lt})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search SO Number"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number or customer name...",value:Re,onChange:pt=>Ve(pt.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:()=>Le(r),children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:_e.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:_e.map((pt,wt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:pt.soNumber})}),n.jsx("td",{children:pt.customerName}),n.jsx("td",{children:new Date(pt.date).toLocaleDateString()}),n.jsxs("td",{children:["",pt.finalTotal||pt.total]}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{fe(pt),Lt()},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},wt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Re?`No sales orders found matching "${Re}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Lt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const jr=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Je})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Customer"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by customer name or code...",value:Q,onChange:vt=>De(vt.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Ke,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer Code"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:M.map((vt,Lt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:vt.cnNo})}),n.jsx("td",{children:vt.name1}),n.jsx("td",{children:vt.email}),n.jsx("td",{children:vt.address1}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Nt(vt),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Lt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Q?`No customers found matching "${Q}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Delivery"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Delivery"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-truck me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Sales Delivery Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"SO Reference:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter SO number",value:o,onChange:vt=>{l(vt.target.value),vt.target.value&&Qe(vt.target.value)},required:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Y(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",onChange:vt=>{const Lt=e.find(fe=>fe._id===vt.target.value);i(Lt)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),e.map(vt=>n.jsx("option",{value:vt._id,children:vt.categoryName},vt._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Number:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:L,readOnly:!0})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:c,onChange:vt=>d(vt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Actual Delivery Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:vt=>h(vt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:A,onChange:vt=>I(vt.target.value),placeholder:"Enter customer name"}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>X(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:x,onChange:vt=>g(vt.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),f.map(vt=>n.jsx("option",{value:vt.name||vt.locationName||vt._id,children:vt.name||vt.locationName||vt._id},vt._id||vt.id||vt.name))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:W,onChange:vt=>ee(vt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:re,onChange:vt=>ne(vt.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Type:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:He,onChange:vt=>et(vt.target.value),children:[n.jsx("option",{value:"Full",children:"Full Delivery"}),n.jsx("option",{value:"Partial",children:"Partial Delivery"})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Delivery Status:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:ft,onChange:vt=>Be(vt.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Delivered",children:"Delivered"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"General Conditions"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:Z.length===0?"Select...":`${Z.length} selected`}),n.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:ce.map(vt=>n.jsx("div",{className:"dropdown-item-text",children:n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Z.includes(vt._id),onChange:()=>pe(vt._id,Z,de)}),n.jsx("label",{className:"form-check-label ms-1",children:vt.name})]})},vt._id))})]})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTransport",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTransport","aria-controls":"collapseTransport","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-shipping-fast me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Transport Details"})]})]})})})})}),n.jsx("div",{id:"collapseTransport",className:"accordion-collapse collapse","aria-labelledby":"headingTransport","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Transport Details:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("textarea",{className:"form-control form-control-sm",value:z,onChange:vt=>se(vt.target.value),rows:"2",placeholder:"Enter transport company details..."})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Vehicle Number:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:vt=>ue(vt.target.value),placeholder:"Enter vehicle number"})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Driver Name:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:oe,onChange:vt=>ye(vt.target.value),placeholder:"Enter driver name"})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Driver Phone:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:je,onChange:vt=>Me(vt.target.value),placeholder:"Enter driver phone"})})]}),n.jsxs("div",{className:"col-xl-6 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Delivery Address:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{className:"form-control form-control-sm",value:b,onChange:vt=>y(vt.target.value),rows:"3",placeholder:"Enter complete delivery address..."})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Delivery Items"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Ordered Qty"}),n.jsx("th",{children:"Delivered Qty"}),n.jsx("th",{children:"Pending Qty"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Actual Delivery"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:S.map((vt,Lt)=>n.jsxs("tr",{className:vt.isPartialDelivery?"table-warning":"",children:[n.jsx("td",{children:Lt+1}),n.jsx("td",{children:vt.materialId}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:vt.description,onChange:fe=>qe(Lt,"description",fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.orderedQuantity,readOnly:!0,style:{backgroundColor:"#f8f9fa"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.deliveredQuantity,onChange:fe=>qe(Lt,"deliveredQuantity",fe.target.value),max:vt.orderedQuantity})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.pendingQuantity,readOnly:!0,style:{backgroundColor:"#f8f9fa"}})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:vt.baseUnit,onChange:fe=>qe(Lt,"baseUnit",fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.price,onChange:fe=>qe(Lt,"price",fe.target.value)})}),n.jsx("td",{children:(vt.deliveredQuantity*vt.price).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:vt.deliveryDate,onChange:fe=>qe(Lt,"deliveryDate",fe.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"date",value:vt.actualDeliveryDate,onChange:fe=>qe(Lt,"actualDeliveryDate",fe.target.value)})}),n.jsx("td",{children:n.jsx("textarea",{className:"form-control form-control-sm",value:vt.note,onChange:fe=>qe(Lt,"note",fe.target.value),maxLength:"250",rows:"2"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>Ie(Lt),children:n.jsx("i",{className:"ti ti-trash"})})})]},Lt))})]})}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:mt,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingFour",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-check me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Delivery Summary"})]})]})})})})}),n.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:Xt,children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-comment me-2"}),"Remarks"]})}),n.jsx("div",{className:"card-body",children:n.jsx("textarea",{className:"form-control form-control-sm",value:dt,onChange:vt=>Tt(vt.target.value),rows:"4",placeholder:"Enter delivery remarks..."})})]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsxs("h6",{children:[n.jsx("i",{className:"fas fa-calculator me-2"}),"Delivery Summary"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Total Delivered Amount:"}),n.jsxs("strong",{className:"text-success",children:["",k]})]}),n.jsx("hr",{}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("span",{children:"Delivery Type:"}),n.jsx("span",{className:`badge ${He==="Full"?"bg-success":"bg-warning"}`,children:He})]}),n.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[n.jsx("span",{children:"Status:"}),n.jsx("span",{className:`badge ${ft==="Delivered"?"bg-success":ft==="In Transit"?"bg-info":ft==="Cancelled"?"bg-danger":"bg-warning"}`,children:ft})]})]})]})})]}),n.jsxs("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:[n.jsx("i",{className:"fas fa-truck me-1"}),"Submit Delivery"]})]})})})})})]})]})}),O&&n.jsx(pr,{show:O,onClose:ve,onSelect:he}),F&&n.jsx(jr,{}),Xe&&n.jsx(rr,{})]})})}const oTe=()=>{const[e,t]=j.useState({name:"",address:"",pincode:"",country:"",phone:"",email:""}),r=l=>{t(c=>({...c,[l.target.name]:l.target.value}))},[a,s]=j.useState(null),i=l=>{s(l.target.files[0])},o=async l=>{l.preventDefault();const c=new FormData;Object.entries(e).forEach(([d,u])=>{c.append(d,u)}),a&&c.append("logo",a);try{await Oe.post("/api/companies/create",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Company added successfully!"),t({name:"",address:"",pincode:"",country:"",phone:"",email:""}),s(null),document.getElementById("logoInput").value=""}catch(d){alert("Error adding company. Please try again."),console.error("Error:",d)}};return n.jsx("div",{className:"content",children:n.jsx("div",{className:"row justify-content-center",children:n.jsx("div",{className:"col-md-8 col-lg-6",children:n.jsxs("div",{className:"card shadow",children:[n.jsx("div",{className:"card-header bg-primary text-white",children:n.jsxs("h3",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-building me-2"}),"Create Company"]})}),n.jsx("div",{className:"card-body",children:n.jsx("form",{onSubmit:o,children:n.jsxs("div",{className:"row",children:[[{label:"Company Name",name:"name",icon:"fas fa-building"},{label:"Address",name:"address",icon:"fas fa-map-marker-alt"},{label:"Pincode",name:"pincode",icon:"fas fa-map-pin"},{label:"Country",name:"country",icon:"fas fa-globe"},{label:"Phone",name:"phone",icon:"fas fa-phone"},{label:"Email",name:"email",type:"email",icon:"fas fa-envelope"}].map(({label:l,name:c,type:d="text",icon:u})=>n.jsxs("div",{className:"col-xl-4 mb-3",children:[n.jsxs("label",{htmlFor:c,className:"form-label",children:[n.jsx("i",{className:`${u} me-2`}),l,c==="name"&&n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:d,id:c,name:c,value:e[c],onChange:r,placeholder:`Enter ${l.toLowerCase()}`,className:"form-control",required:c==="name"})]},c)),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{htmlFor:"logoInput",className:"form-label",children:[n.jsx("i",{className:"fas fa-image me-2"}),"Company Logo"]}),n.jsx("input",{type:"file",id:"logoInput",accept:"image/*",onChange:i,className:"form-control form-control-sm"}),n.jsx("div",{className:"form-text",children:"Upload your company logo (PNG, JPG, or GIF format)"})]}),n.jsx("div",{className:"d-grid",children:n.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg",children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Company"]})})]})})})]})})})})};function lTe(){const[e,t]=j.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),r=localStorage.getItem("selectedCompanyId"),a=localStorage.getItem("financialYear"),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState({}),[x,g]=j.useState([]),[b,y]=j.useState(!1),[S,w]=j.useState(!1),[k,C]=j.useState(""),[D,E]=j.useState(""),[A,I]=j.useState(!1),L=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","West Bengal","Odisha","Bihar","Jharkhand","Madhya Pradesh","Chhattisgarh","Uttar Pradesh"],P=["India","USA","Germany","France","UK"];j.useEffect(()=>{O(),Y()},[]);const O=async()=>{try{const Be=await Oe.get("/api/customer-categories",{params:{companyId:r,financialYear:a}});i(Be.data)}catch(Be){console.error("Error fetching categories:",Be)}},Y=async()=>{try{const dt=(await Oe.get("/api/customers",{params:{companyId:r,financialYear:a}})).data.sort((Tt,At)=>new Date(At.createdAt)-new Date(Tt.createdAt));l(dt)}catch(Be){console.error("Error fetching customers:",Be)}},q=Be=>{const{name:dt,value:Tt}=Be.target;dt==="email"&&Tt&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(Tt)?Be.target.setCustomValidity(""):Be.target.setCustomValidity("Please enter a valid email address")),t(At=>({...At,[dt]:Tt})),f[dt]&&p(At=>({...At,[dt]:""}))},K=()=>{const Be={};return e.categoryId||(Be.categoryId="Category is required."),e.name1.trim()||(Be.name1="Name 1 is required."),e.search.trim()||(Be.search="Search term is required."),e.address1.trim()||(Be.address1="Address 1 is required."),e.region||(Be.region="Region is required."),e.country||(Be.country="Country is required."),e.contactNo.trim()?/^[0-9]{10}$/.test(e.contactNo.trim())||(Be.contactNo="Contact No must be exactly 10 digits."):Be.contactNo="Contact No is required.",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())&&(Be.email="Please enter a valid email address."),e.pincode.trim()&&!/^[0-9]{6}$/.test(e.pincode.trim())&&(Be.pincode="Pincode must be exactly 6 digits."),k==="external"&&!D.trim()&&(Be.externalCustomerId="External Customer ID is required."),k==="external"&&D.length>50&&(Be.externalCustomerId="External Customer ID cannot exceed 50 characters."),p(Be),Object.keys(Be).length===0},U=async Be=>{if(Be.preventDefault(),!K()){const dt=Object.values(f).filter(Tt=>Tt);alert(dt.join(`
`));return}w(!0),I(!1)},J=async(Be=k)=>{try{const dt={...e,customerType:Be,companyId:r,financialYear:a,externalCustomerId:Be==="external"?D:null};if(u)await Oe.put(`/api/customers/${u}`,dt),alert("Customer updated successfully!");else{const Tt=await Oe.post("/api/customers",dt);d(Tt.data.cnNo),alert(`Customer saved successfully! CNNo: ${Tt.data.cnNo}`)}Y(),F(),I(!1),w(!1)}catch(dt){console.error("Error saving customer:",dt),alert("Error saving customer. Please try again.")}},F=()=>{t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),h(null),p({}),d(""),C(""),E("")},X=Be=>{t({categoryId:Be.categoryId?._id||"",name1:Be.name1||"",name2:Be.name2||"",search:Be.search||"",address1:Be.address1||"",address2:Be.address2||"",city:Be.city||"",pincode:Be.pincode||"",region:Be.region||"",country:Be.country||"",contactNo:Be.contactNo||"",name:Be.name||"",email:Be.email||""}),h(Be._id),d(Be.cnNo),C(Be.customerType||"internal"),E(Be.externalCustomerId||""),p({}),I(!0)},Q=()=>{w(!1),C(""),E("")},ie=Be=>{C(Be),Be==="internal"&&J("internal")},M=()=>{if(!D.trim()){alert("Please enter External Customer ID");return}if(D.length>50){alert("External Customer ID cannot exceed 50 characters");return}J("external")},[V,W]=j.useState(""),[ee,re]=j.useState(1),ne=10,ce=o.filter(Be=>{const dt=V.toLowerCase();return Be.cnNo?.toLowerCase().includes(dt)||Be.name1?.toLowerCase().includes(dt)||Be.categoryId?.categoryName?.toLowerCase().includes(dt)||Be.search?.toLowerCase().includes(dt)||Be.address1?.toLowerCase().includes(dt)||Be.city?.toLowerCase().includes(dt)||Be.pincode?.toLowerCase().includes(dt)||Be.region?.toLowerCase().includes(dt)||Be.country?.toLowerCase().includes(dt)||Be.contactNo?.includes(dt)||Be.email?.toLowerCase().includes(dt)}).sort((Be,dt)=>new Date(dt.createdAt)-new Date(Be.createdAt)),ae=ee*ne,Z=ae-ne,de=ce.slice(Z,ae),z=Math.ceil(ce.length/ne),se=()=>{I(!1),F()},[Ne,ue]=j.useState(!1),oe=()=>ue(!1),ye=()=>{const Be=ce.map(pe=>({"Customer No":pe.cnNo||"","Name 1":pe.name1||"","Name 2":pe.name2||"",Category:pe.categoryId?.categoryName||"","Search Term":pe.search||"","Address 1":pe.address1||"","Address 2":pe.address2||"","Extra Addresses":pe.extraAddresses?pe.extraAddresses.join(", "):"",City:pe.city||"",Pincode:pe.pincode||"",Region:pe.region||"",Country:pe.country||"","Contact No":pe.contactNo||"",Email:pe.email||"","Contact Person":pe.name||"","Customer Type":pe.customerType||"internal","External Customer ID":pe.externalCustomerId||"","Is Deleted":pe.isDeleted?"Yes":"No","Is Blocked":pe.isBlocked?"Yes":"No","Created Date":pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"","Updated Date":pe.updatedAt?new Date(pe.updatedAt).toLocaleDateString():""})),dt=on.book_new(),Tt=on.json_to_sheet(Be),At=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];Tt["!cols"]=At,on.book_append_sheet(dt,Tt,"Customers");const qt=new Date,xe=qt.toLocaleDateString("en-GB").replace(/\//g,"-"),he=qt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ve=`Customer-Master-${xe}-${he}.xlsx`;sh(dt,ve),oe(),alert(`Excel file exported successfully as: ${ve}`)},je=()=>{t(Be=>({...Be,extraAddresses:[...Be.extraAddresses,""]}))},Me=(Be,dt)=>{const Tt=[...e.extraAddresses];Tt[Be]=dt,t(At=>({...At,extraAddresses:Tt}))},He=Be=>{const dt=[...e.extraAddresses];dt.splice(Be,1),t(Tt=>({...Tt,extraAddresses:dt}))},et=async(Be,dt,Tt)=>{try{const At={[dt]:Tt};await Oe.put(`/api/customers/status/${Be}`,At),l(o.map(qt=>qt._id===Be?{...qt,[dt]:Tt}:qt)),alert("Status updated successfully!")}catch(At){console.error("Error updating status:",At),alert("Failed to update status!")}},ft=Be=>{console.log("Import successful:",Be),Y()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search customers...",value:V,onChange:Be=>W(Be.target.value)})]})})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline-primary btn-sm",children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ye,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsx("a",{onClick:()=>I(!0),className:"btn btn-primary btn-sm",children:"New Customer"})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"CNNo"}),n.jsx("th",{children:"Name 1"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Search"}),n.jsx("th",{children:"Address 1"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Pincode"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Contact No"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Delete"}),n.jsx("th",{children:"Block"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:de.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"13",children:"No customers found"})}):de.map(Be=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Be.cnNo}),n.jsx("td",{className:"text-wrap",children:Be.name1}),n.jsx("td",{className:"text-wrap",children:Be.categoryId?.categoryName||"N/A"}),n.jsx("td",{className:"text-wrap",children:Be.search}),n.jsx("td",{className:"text-wrap",children:Be.address1}),n.jsx("td",{className:"text-wrap",children:Be.city}),n.jsx("td",{className:"text-wrap",children:Be.pincode}),n.jsx("td",{className:"text-wrap",children:Be.region}),n.jsx("td",{className:"text-wrap",children:Be.contactNo}),n.jsx("td",{className:"text-wrap",children:Be.email}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Be.isDeleted||!1,onChange:dt=>et(Be._id,"isDeleted",dt.target.checked)})})}),n.jsx("td",{children:n.jsx("div",{className:"form-check",children:n.jsx("input",{className:"form-check-input",type:"checkbox",checked:Be.isBlocked||!1,onChange:dt=>et(Be._id,"isBlocked",dt.target.checked)})})}),n.jsx("td",{children:n.jsx("button",{onClick:()=>X(Be),className:"btn btn-primary btn-sm",children:"Edit"})})]},Be._id))})]})})})]}),n.jsx("div",{className:"d-flex justify-content-end align-items-center mt-3",children:z>1&&n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[n.jsx("li",{className:`page-item ${ee===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>re(Be=>Math.max(Be-1,1)),disabled:ee===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const dt=[],Tt=[];dt.push(1);for(let xe=Math.max(2,ee-2);xe<=Math.min(z-1,ee+2);xe++)dt.push(xe);z>1&&dt.push(z);const At=[...new Set(dt)].sort((xe,he)=>xe-he);let qt;for(let xe of At)qt&&(xe-qt===2?Tt.push(qt+1):xe-qt!==1&&Tt.push("...")),Tt.push(xe),qt=xe;return Tt.map((xe,he)=>xe==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${he}`):n.jsx("li",{className:`page-item ${ee===xe?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>re(xe),children:xe})},xe))})(),n.jsx("li",{className:`page-item ${ee===z?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>re(Be=>Math.min(Be+1,z)),disabled:ee===z,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),S&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Customer Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:Q,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the ID:"}),k==="external"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"External Customer ID"}),n.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:Be=>E(Be.target.value),maxLength:50,required:!0,placeholder:"Enter External Customer ID (max 50 characters)"}),n.jsxs("small",{className:"form-text text-muted",children:[D.length,"/50 characters"]})]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-primary",onClick:M,disabled:!D.trim(),children:"Continue"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>C(""),children:"Back"})]})]}):n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>ie("internal"),children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ie("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]})]})]})})})]}),A&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[u?"Edit Customer":"Add New Customer",k&&n.jsx("span",{className:"badge bg-info ms-2",children:k==="internal"?"Internal":"External"})]}),n.jsx("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:U,children:[k==="external"&&n.jsxs("div",{className:"alert alert-info mb-3",children:[n.jsx("strong",{children:"External Customer ID:"})," ",D]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Category ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",value:e.categoryId,onChange:q,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Category"}),s.map(Be=>n.jsx("option",{value:Be._id,children:Be.categoryName},Be._id))]})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Name1 ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name1",placeholder:"Enter Name 1",value:e.name1,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Name2"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2 (Optional)",value:e.name2,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["SearchTerm ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",value:e.search,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Address1 ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Address2"})}),n.jsx("div",{className:"col-6",children:n.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:q,className:"form-control"})}),n.jsx("div",{className:"col-2",children:n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:je,children:"+"})})]}),e?.extraAddresses?.map((Be,dt)=>n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:`Address ${dt+3}`})}),n.jsx("div",{className:"col-6",children:n.jsx("input",{type:"text",placeholder:`Enter Address ${dt+3}`,value:Be,onChange:Tt=>Me(dt,Tt.target.value),className:"form-control"})}),n.jsx("div",{className:"col-2",children:n.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>He(dt),children:n.jsx("i",{className:"ti ti-x"})})})]},dt)),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"City"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"city",placeholder:"Enter City",value:e.city,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Pincode"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"pincode",placeholder:"Enter 6-digit Pincode",value:e.pincode,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Region ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"region",value:e.region,onChange:q,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Region"}),L.map(Be=>n.jsx("option",{value:Be,children:Be},Be))]})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Country ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"country",value:e.country,onChange:q,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Country"}),P.map(Be=>n.jsx("option",{value:Be,children:Be},Be))]})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:["Contact No ",n.jsx("span",{className:"text-danger",children:"*"})]})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter 10-digit Contact No",value:e.contactNo,onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Email"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"email",name:"email",placeholder:"Enter Email (Optional)",value:e.email,pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",onChange:q,className:"form-control"})})]}),n.jsxs("div",{className:"row col-md-4 mb-2",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Person"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name",placeholder:"Enter name (Optional)",value:e.name,onChange:q,className:"form-control"})})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("button",{type:"submit",className:"btn btn-success",children:u?"Update Customer":"Save Customer"}),u&&n.jsx("button",{type:"button",onClick:F,className:"btn btn-danger ms-2",children:"Cancel"})]})]})})]})})})]}),n.jsx(wf,{show:b,onClose:()=>y(!1),onImport:ft,masterDataType:"customer",apiEndpoint:"/api/customers/import"})]})}function cTe(){const e="MMNR-",[t,r]=j.useState([]),[a,s]=j.useState(!1),[i,o]=j.useState({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear"),[d,u]=j.useState(1),[h,f]=j.useState([]),[p,x]=j.useState([]),[g,b]=j.useState([]),[y,S]=j.useState([]),[w,k]=j.useState([]),[C,D]=j.useState(!1),[E,A]=j.useState([]),[I,L]=j.useState("materialId"),[P,O]=j.useState(null),[Y,q]=j.useState(!1),[K,U]=j.useState(1),J=10,[F,X]=j.useState(""),[Q,ie]=j.useState(!1),[M,V]=j.useState([]),[W,ee]=j.useState("customerId"),[re,ne]=j.useState(""),ce=Ue=>{s(!1),Ne()},ae=()=>{const Ue=je.map(Ae=>({"Customer Name":Ae.customerId?.name1||"","Customer ID":Ae.customerId?.cnNo||"",Category:Ae.categoryId?.categoryName||"","Material ID":Ae.materialId?.materialId||"","Material Description":Ae.materialId?.description||"",Unit:Ae.unit||"","BUM (Base Unit Measure)":Ae.bum||"","Order Unit":Ae.orderUnit||"",Price:Ae.price||"","Sales Group":Ae.salesGroup||"","Tax Name":Ae.taxId?.taxName||"","CGST %":Ae.taxId?.cgst||"","SGST %":Ae.taxId?.sgst||"","IGST %":Ae.taxId?.igst||"","Terms & Conditions":Ae.tandc||"","Company ID":Ae.companyId||"","Financial Year":Ae.financialYear||"","Created Date":Ae.createdAt?new Date(Ae.createdAt).toLocaleDateString():"","Updated Date":Ae.updatedAt?new Date(Ae.updatedAt).toLocaleDateString():""})),qe=on.book_new(),mt=on.json_to_sheet(Ue),Ie=[{wch:25},{wch:15},{wch:20},{wch:20},{wch:35},{wch:10},{wch:15},{wch:15},{wch:12},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];mt["!cols"]=Ie,on.book_append_sheet(qe,mt,"Customer Price List");const Xe=new Date,Ye=Xe.toLocaleDateString("en-GB").replace(/\//g,"-"),lt=Xe.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Mt=`Customer-Price-List-${Ye}-${lt}.xlsx`;sh(qe,Mt),alert(`Excel file exported successfully as: ${Mt}`)};j.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:l,financialYear:c}}).then(Ue=>r(Ue.data))},[]),j.useEffect(()=>{Z(),de(),z(),se(),Ne()},[]);const Z=async()=>{try{const Ue=await Oe.get("/api/customer-categories",{params:{companyId:l,financialYear:c}});f(Ue.data)}catch(Ue){console.error("Error fetching categories:",Ue),alert("Error loading categories")}},de=async()=>{try{const Ue=await Oe.get("/api/customers",{params:{companyId:l,financialYear:c}});x(Ue.data),console.log("customers",Ue.data)}catch(Ue){console.error("Error fetching customers:",Ue),alert("Error loading customers")}},z=async()=>{try{const Ue=await Oe.get("/api/material",{params:{companyId:l,financialYear:c}});b(Ue.data)}catch(Ue){console.error("Error fetching materials:",Ue),alert("Error loading materials")}},se=async()=>{try{const Ue=await Oe.get("/api/tax",{params:{companyId:l,financialYear:c}});S(Ue.data)}catch(Ue){console.error("Error fetching taxes:",Ue),alert("Error loading taxes")}},Ne=async()=>{try{const Ue=await Oe.get("/api/customer-price-lists",{params:{companyId:l,financialYear:c}});k(Ue.data)}catch(Ue){console.error("Error fetching price lists:",Ue),alert("Error loading price lists")}},ue=async Ue=>{const{name:qe,value:mt}=Ue.target;let Ie={...i,[qe]:mt};if(qe==="materialId")try{const Ye=(await Oe.get(`/api/material/${mt}`)).data.conversionValue||1;u(Ye)}catch(Xe){console.error("Error fetching material conversion:",Xe),u(1)}o(Ie)},oe=async Ue=>{Ue.preventDefault();const qe={...i,companyId:l,financialYear:c};try{i._id?(await Oe.put(`/api/customer-price-lists/${i._id}`,qe),alert("Updated successfully")):(await Oe.post("/api/customer-price-lists",qe),alert("Saved successfully")),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),u(1),Be(),Ne()}catch(mt){alert("Error saving data"),console.error("Submit error:",mt)}},ye=Ue=>{const qe=Ae=>Ae?typeof Ae=="object"&&Ae._id?Ae._id:typeof Ae=="string"?Ae:"":"",mt=qe(Ue.categoryId),Ie=qe(Ue.customerId),Xe=qe(Ue.materialId),Ye=qe(Ue.taxId),lt=qe(Ue.tandc),Mt={_id:Ue._id,categoryId:mt,customerId:Ie,materialId:Xe,unit:Ue.unit||"",bum:Ue.bum||"",orderUnit:Ue.orderUnit||"",salesGroup:Ue.salesGroup||"",taxId:Ye,tandc:lt,price:Ue.price||""};o(Mt),q(!0),Xe&&Oe.get(`/api/material/${Xe}`).then(Ae=>{const ke=Ae.data.conversionValue||1;u(ke),console.log("Conversion value set to:",ke)}).catch(Ae=>{console.error("Error fetching material conversion:",Ae),u(1)})},je=w.filter(Ue=>{const qe=Ue.customerId?.name1?.toLowerCase()||"",mt=Ue.categoryId?.categoryName?.toLowerCase()||"",Ie=Ue.materialId?.description?.toLowerCase()||"";return qe.includes(F.toLowerCase())||mt.includes(F.toLowerCase())||Ie.includes(F.toLowerCase())}),Me=je.slice((K-1)*J,K*J),He=Math.ceil(je.length/J),et=Ue=>{Ue>=1&&Ue<=He&&U(Ue)},ft=()=>q(!0),Be=()=>{q(!1),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",orderUnit:"",price:"",salesGroup:"",taxId:"",tandc:""})},dt=()=>{O(null),D(!0),A([])},Tt=()=>{D(!1),O(null),A([])},At=Ue=>{console.log("Selected material:",Ue),ue({target:{name:"materialId",value:Ue._id}}),Tt()},qt=()=>{const Ue=F.trim();if(!Ue){A([]);return}if(console.log("Searching with query:",Ue,"Type:",I),console.log("Available materials:",g),I==="materialId"){let qe=Ue;/^\d+$/.test(Ue)&&(qe=e+Ue);const mt=g.filter(Ie=>(Ie.materialId||"").toLowerCase().includes(qe.toLowerCase()));console.log("Filtered results for materialId:",mt),A(mt)}else{const qe=g.filter(mt=>(mt.description||"").toLowerCase().includes(Ue.toLowerCase()));console.log("Filtered results for description:",qe),A(qe)}};j.useEffect(()=>{const Ue=setTimeout(()=>{F.trim()?qt():A([])},300);return()=>clearTimeout(Ue)},[F,I]);const xe=()=>{A(g),X("")},he=()=>{A([]),X("")},ve=()=>{ie(!0),ne(""),V([])},pe=()=>{ie(!1),ne(""),V([])},De=Ue=>{const qe=Ue.target.value;ne(qe)},Ke=()=>{if(!re.trim()){V([]);return}if(W==="customerId"){const Ue=p.filter(qe=>(qe.customerId||"").toLowerCase().includes(re.toLowerCase()));V(Ue)}else{const Ue=p.filter(qe=>(qe.name1||"").toLowerCase().includes(re.toLowerCase()));V(Ue)}},Nt=()=>{V(p),ne("")},Je=()=>{V([]),ne("")},Qe=Ue=>{ue({target:{name:"customerId",value:Ue._id}}),pe()};return j.useEffect(()=>{const Ue=setTimeout(()=>{re.trim()?Ke():V([])},300);return()=>clearTimeout(Ue)},[re,W]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Price List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Price List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:F,onChange:Ue=>X(Ue.target.value)})]})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsx("div",{children:n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>s(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]})}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ae,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsx("div",{children:n.jsxs("a",{onClick:ft,className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Customer Price List"]})})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Material"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"BUM"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Sales Group"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Me.map(Ue=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("div",{className:"d-flex align-items-center",children:n.jsx("div",{children:n.jsx("h6",{className:"fs-14 fw-medium mb-0",children:n.jsx("a",{href:"#",children:Ue.customerId?.name1})})})})}),n.jsx("td",{children:Ue.categoryId?.categoryName}),n.jsx("td",{children:Ue.materialId?.description}),n.jsx("td",{className:"text-dark",children:Ue.unit}),n.jsx("td",{className:"text-dark",children:Ue.bum}),n.jsx("td",{className:"text-dark",children:Ue.orderUnit}),n.jsxs("td",{className:"text-dark",children:["Rs",Ue.price]})," ",n.jsx("td",{className:"text-dark",children:Ue.salesGroup}),n.jsx("td",{className:"text-dark",children:Ue.taxId?.taxName}),n.jsx("td",{style:{cursor:"pointer"},children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{ye(Ue)},children:"Edit"})})]},Ue._id))})]})})]}),He>1&&n.jsx("nav",{"aria-label":"Page navigation",className:"",children:n.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[n.jsx("li",{className:`page-item ${K===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ue=>{Ue.preventDefault(),K>1&&et(K-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Ue=[];if(He<=5)for(let mt=1;mt<=He;mt++)Ue.push(n.jsx("li",{className:`page-item ${K===mt?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ie=>{Ie.preventDefault(),et(mt)},children:mt})},mt));else{Ue.push(n.jsx("li",{className:`page-item ${K===1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Xe=>{Xe.preventDefault(),et(1)},children:"1"})},1)),K>3&&Ue.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"ellipsis1"));const mt=Math.max(2,K-1),Ie=Math.min(He-1,K+1);for(let Xe=mt;Xe<=Ie;Xe++)Xe!==1&&Xe!==He&&Ue.push(n.jsx("li",{className:`page-item ${K===Xe?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ye=>{Ye.preventDefault(),et(Xe)},children:Xe})},Xe));K<He-2&&Ue.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"ellipsis2")),He>1&&Ue.push(n.jsx("li",{className:`page-item ${K===He?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Xe=>{Xe.preventDefault(),et(He)},children:He})},He))}return Ue})(),n.jsx("li",{className:`page-item ${K===He?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ue=>{Ue.preventDefault(),K<He&&et(K+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})}),Y&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:"Customer Price"}),n.jsx("button",{type:"button",className:"btn-close",onClick:Be,"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:oe,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",className:"form-select",value:i.categoryId,onChange:ue,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),h.map(Ue=>n.jsx("option",{value:Ue._id,children:Ue.categoryName},Ue._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsxs("select",{name:"customerId",className:"form-select me-2",value:i.customerId,onChange:ue,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),p.map(Ue=>n.jsx("option",{value:Ue._id,children:Ue.name1},Ue._id))]}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Customer",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Material:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsxs("select",{name:"materialId",className:"form-select me-2",value:i.materialId,onChange:ue,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),g.map(Ue=>n.jsx("option",{value:Ue._id,children:Ue.description},Ue._id))]}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:dt,title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:i.unit,onChange:ue,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),t.map(Ue=>n.jsx("option",{value:Ue.name,children:Ue.name},Ue.name))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label",children:"BUM (Base Unit):"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter BUM",value:i.bum,onChange:Ue=>{Ue.target.value=Ue.target.value.replace(/[^0-9.]/g,""),ue(Ue)},required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Order Unit:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Enter Order Unit",value:i.orderUnit,onChange:Ue=>{Ue.target.value=Ue.target.value.replace(/[^0-9.]/g,""),ue(Ue)},required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Price:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter price",value:i.price,onChange:ue,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"salesGroup",className:"form-control",placeholder:"Enter Sales Group",value:i.salesGroup,onChange:ue,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"T&C:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"tandc",className:"form-control",placeholder:"Enter T&C",value:i.tandc,onChange:ue,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Tax:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"taxId",className:"form-select",value:i.taxId,onChange:ue,children:[n.jsx("option",{value:"",children:"Select"}),y.map(Ue=>n.jsxs("option",{value:Ue._id,children:[Ue.taxName," (CGST: ",Ue.cgst,"%, SGST: ",Ue.sgst,"%, IGST: ",Ue.igst,"%)"]},Ue._id))]})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Be,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:i._id?"Update":"Save"})]})]})})]})})})]}),C&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Tt})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:Ue=>L(Ue.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:I==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:F,onChange:Ue=>X(Ue.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:xe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),E.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:he,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:E.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:E.map((Ue,qe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Ue.materialId}),n.jsx("td",{className:"text-wrap",children:Ue.description}),n.jsx("td",{className:"text-wrap",children:Ue.baseUnit}),n.jsx("td",{className:"text-wrap",children:Ue.location}),n.jsx("td",{className:"text-wrap",children:Ue.materialgroup}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>At(Ue),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},qe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:g.length===0?"No materials loaded from API":F?`No materials found matching "${F}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Tt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),Q&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Customers"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pe})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:W,onChange:Ue=>ee(Ue.target.value),children:[n.jsx("option",{value:"customerId",children:"Customer ID"}),n.jsx("option",{value:"name",children:"Customer Name"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:W==="customerId"?"Enter Customer ID...":"Search by Customer Name...",value:re,onChange:De})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),M.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:M.map((Ue,qe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Ue.cnNo}),n.jsx("td",{className:"text-wrap",children:Ue.name1}),n.jsx("td",{className:"text-wrap",children:Ue.city}),n.jsx("td",{className:"text-wrap",children:Ue.email}),n.jsx("td",{className:"text-wrap",children:Ue.contactNo}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Qe(Ue),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},qe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:p.length===0?"No customers loaded from API":re?`No customers found matching "${re}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx(wf,{show:a,onClose:()=>s(!1),onImportSuccess:ce,masterDataType:"customerPriceList"})]})}const Ib={code:"",name:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactNumber:""},dTe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(Ib),[s,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(1),[f,p]=j.useState(10),[x,g]=j.useState(""),b=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),I()},y=e.filter(U=>{if(!x)return!0;const J=x.toLowerCase();return U.code?.toLowerCase().includes(J)||U.name?.toLowerCase().includes(J)||U.address?.toLowerCase().includes(J)||U.city?.toLowerCase().includes(J)||U.state?.toLowerCase().includes(J)||U.country?.toLowerCase().includes(J)||U.postalCode?.toLowerCase().includes(J)||U.contactPerson?.toLowerCase().includes(J)||U.contactNumber?.toLowerCase().includes(J)}),S=Math.ceil(y.length/f),w=(u-1)*f,k=w+f,C=y.slice(w,k),D=U=>{g(U.target.value),h(1)},E=U=>{h(U)},A=()=>{const J=(x?y:e).map((ne,ce)=>({"S.No":ce+1,"Location Name":ne.name||"",Address:ne.address||"",City:ne.city||"",State:ne.state||"",Country:ne.country||"","Postal Code":ne.postalCode||"","Contact Person":ne.contactPerson||"","Contact Number":ne.contactNumber||"","Company ID":ne.companyId||"","Financial Year":ne.financialYear||"","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),F=on.book_new(),X=on.json_to_sheet(J),Q=[{wch:8},{wch:25},{wch:40},{wch:20},{wch:20},{wch:15},{wch:12},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];X["!cols"]=Q,on.book_append_sheet(F,X,"Location Master");const ie=new Date,M=ie.toLocaleDateString("en-GB").replace(/\//g,"-"),V=ie.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`Location-Master${x?`-Filtered-${x.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;sh(F,ee);const re=x?y.length:e.length;alert(`Excel file exported successfully: ${re} records exported as ${ee}`)},I=async()=>{try{const U=localStorage.getItem("selectedCompanyId"),J=localStorage.getItem("financialYear"),F=await Oe.get("/api/locations",{params:{companyId:U,financialYear:J}});t(F.data),h(1)}catch(U){console.error("Error fetching locations:",U),alert("Error loading locations")}};j.useEffect(()=>{I()},[]);const L=U=>{a({...r,[U.target.name]:U.target.value})},P=async U=>{U.preventDefault();try{const J=localStorage.getItem("selectedCompanyId"),F=localStorage.getItem("financialYear"),X={...r,companyId:J,financialYear:F};o?(await Oe.put(`/api/locations/${o}`,X),alert("Location updated successfully!")):(await Oe.post("/api/locations",X),alert("Location created successfully!")),a(Ib),l(null),i(!1),I()}catch(J){console.error("Error saving location:",J),alert("Error saving location. Please try again.")}},O=U=>{a({name:U.name||"",address:U.address||"",city:U.city||"",state:U.state||"",country:U.country||"",postalCode:U.postalCode||"",contactPerson:U.contactPerson||"",contactNumber:U.contactNumber||""}),l(U._id),i(!0)},Y=()=>{a(Ib),l(null),i(!0)},q=()=>{i(!1),a(Ib),l(null)},K=U=>({code:"Location Code",name:"Location Name",address:"Address",city:"City",state:"State",country:"Country",postalCode:"Postal Code",contactPerson:"Contact Person",contactNumber:"Contact Number"})[U]||U.charAt(0).toUpperCase()+U.slice(1);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Location Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Location Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search locations...",value:x,onChange:D})]})}),n.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>d(!0),className:"btn btn-outline-primary btn-sm",children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:A,title:x?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",x&&n.jsx("span",{className:"badge bg-primary ms-1",children:y.length})]}),n.jsx("div",{children:n.jsxs("button",{onClick:Y,className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Location"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Location Name"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"State"}),n.jsx("th",{children:"Country"}),n.jsx("th",{children:"Postal Code"}),n.jsx("th",{children:"Contact Person"}),n.jsx("th",{children:"Contact Number"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:C.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"10",className:"text-center",children:x?"No locations found matching your search criteria":"No locations found"})}):C.map((U,J)=>n.jsxs("tr",{children:[n.jsx("td",{children:w+J+1}),n.jsx("td",{children:n.jsx("strong",{children:U.name})}),n.jsx("td",{children:U.address}),n.jsx("td",{children:U.city}),n.jsx("td",{children:U.state}),n.jsx("td",{children:U.country}),n.jsx("td",{children:U.postalCode}),n.jsx("td",{children:U.contactPerson}),n.jsx("td",{children:U.contactNumber}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),S>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsx("div",{className:"text-muted"}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&E(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:S},(U,J)=>n.jsx("li",{className:`page-item ${u===J+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:F=>{F.preventDefault(),E(J+1)},children:J+1})},J)),n.jsx("li",{className:`page-item ${u===S?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<S&&E(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),n.jsx(wf,{show:c,onClose:()=>d(!1),onImportSuccess:b,masterDataType:"location"}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:o?"Edit Location":"Add New Location"}),n.jsx("button",{type:"button",className:"btn-close",onClick:q})]}),n.jsxs("form",{onSubmit:P,children:[n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"row",children:Object.keys(Ib).map(U=>n.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-md-3":"col-md-4"} mb-3`,children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-5":"col-4"}`,children:n.jsx("label",{className:"form-label",children:K(U)})}),n.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-7":"col-8"} `,children:n.jsx("input",{type:U==="contactNumber"?"tel":"text",name:U,className:"form-control",placeholder:`Enter ${K(U)}`,value:r[U],onChange:L,required:U==="name"})})]})},U))})}),n.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Location":"Create Location"})]})]})]})})})]})]})},uTe=()=>{const[e,t]=j.useState({}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=j.useState(1),[f,p]=j.useState(10),[x,g]=j.useState("");j.useEffect(()=>{w()},[]);const[b,y]=j.useState({taxCode:"",taxName:"",cgst:"",sgst:"",igst:"",companyId:c,financialYear:d}),S=ie=>{alert(`Import completed: ${ie.results.imported} records imported`),l(!1),w()},w=async()=>{const ie=await Oe.get("/api/tax",{params:{companyId:c,financialYear:d}});a(ie.data),h(1)},k=r.filter(ie=>{if(!x)return!0;const M=x.toLowerCase();return ie.taxCode?.toLowerCase().includes(M)||ie.taxName?.toLowerCase().includes(M)||ie.cgst?.toString().includes(M)||ie.sgst?.toString().includes(M)||ie.igst?.toString().includes(M)||((parseFloat(ie.cgst)||0)+(parseFloat(ie.sgst)||0)+(parseFloat(ie.igst)||0)).toString().includes(M)}),C=Math.ceil(k.length/f),D=(u-1)*f,E=D+f,A=k.slice(D,E),I=ie=>{g(ie.target.value),h(1)},L=ie=>{h(ie)},P=()=>{const M=(x?k:r).map(z=>({"Tax Code":z.taxCode||"","Tax Name":z.taxName||"","CGST %":z.cgst||"","SGST %":z.sgst||"","IGST %":z.igst||"","Total Tax %":(parseFloat(z.cgst)||0)+(parseFloat(z.sgst)||0)+(parseFloat(z.igst)||0),"Tax Type":parseFloat(z.igst)>0?"IGST":"CGST + SGST","Created Date":z.createdAt?new Date(z.createdAt).toLocaleDateString():"","Updated Date":z.updatedAt?new Date(z.updatedAt).toLocaleDateString():""})),V=on.book_new(),W=on.json_to_sheet(M),ee=[{wch:12},{wch:25},{wch:10},{wch:10},{wch:10},{wch:12},{wch:15},{wch:15},{wch:15}];W["!cols"]=ee,on.book_append_sheet(V,W,"Tax Master");const re=new Date,ne=re.toLocaleDateString("en-GB").replace(/\//g,"-"),ce=re.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Z=`Tax-Master${x?`-Filtered-${x.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${ne}-${ce}.xlsx`;sh(V,Z);const de=x?k.length:r.length;alert(`Excel file exported successfully: ${de} records exported as ${Z}`)},O=(ie,M)=>{switch(ie){case"taxCode":if(!M)return"Required";if(M.length>4)return"Max 4 characters";break;case"taxName":if(!M)return"Required";if(M.length>25)return"Max 25 characters";break;case"cgst":case"sgst":if(!M)return"Required";if(M.length>2)return"Max 2 digits";break;default:return""}return""},Y=ie=>{const{name:M,value:V}=ie.target;let W=V;switch(M){case"taxCode":W=V.replace(/[^A-Za-z0-9 ]/g,"").slice(0,4);break;case"taxName":W=V.slice(0,25);break;case"cgst":case"sgst":case"igst":W=V.replace(/[^0-9]/g,"").slice(0,2);break}const ee=O(M,W);y({...b,[M]:W}),t({...e,[M]:ee})},q=()=>{y({taxCode:"",taxName:"",cgst:"",sgst:"",igst:""}),t({}),i(null)},K=async ie=>{ie.preventDefault();const M={};if(Object.entries(b).forEach(([W,ee])=>{const re=O(W,ee);re&&(M[W]=re)}),Object.keys(M).length>0){t(M);return}const V={...b,companyId:c,financialYear:d};try{s?(await Oe.put(`/api/tax/${s}`,V),alert("Tax updated!")):(await Oe.post("/api/tax",V),alert("Tax added!")),q(),w(),Q()}catch(W){console.error(W),alert("Failed to save")}},U=ie=>{y({taxCode:ie.taxCode,taxName:ie.taxName,cgst:ie.cgst,sgst:ie.sgst,igst:ie.igst}),i(ie._id)},[J,F]=j.useState(!1),X=()=>F(!0),Q=()=>{F(!1),s||q()};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Taxes Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Taxes Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code, name, or percentage...",value:x,onChange:I})]})}),n.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>l(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:P,title:x?"Export filtered results to Excel":"Export all data to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export",x&&n.jsx("span",{className:"badge bg-primary ms-1",children:k.length})]}),n.jsx("div",{children:n.jsxs("a",{onClick:()=>{q(),X()},className:"btn btn-primary btn-sm",children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Tax"]})})]})]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"CGST %"}),n.jsx("th",{children:"SGST %"}),n.jsx("th",{children:"IGST %"}),n.jsx("th",{children:"Total %"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:A.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center",children:x?"No taxes found matching your search criteria":"No taxes found"})}):A.map(ie=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:ie.taxCode})}),n.jsx("td",{children:ie.taxName}),n.jsxs("td",{className:"text-center",children:[ie.cgst,"%"]}),n.jsxs("td",{className:"text-center",children:[ie.sgst,"%"]}),n.jsxs("td",{className:"text-center",children:[ie.igst,"%"]}),n.jsx("td",{className:"text-center",children:n.jsxs("strong",{children:[(parseFloat(ie.cgst)||0)+(parseFloat(ie.sgst)||0)+(parseFloat(ie.igst)||0),"%"]})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{U(ie),X()},children:"Edit"})})]},ie._id))})]})}),C>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsxs("div",{className:"text-muted",children:["Page ",u," of ",C]}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ie=>{ie.preventDefault(),u>1&&L(u-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:C},(ie,M)=>n.jsx("li",{className:`page-item ${u===M+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:V=>{V.preventDefault(),L(M+1)},children:M+1})},M)),n.jsx("li",{className:`page-item ${u===C?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ie=>{ie.preventDefault(),u<C&&L(u+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})]})]}),J&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," Tax Code"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:Q,"aria-label":"Close"})]}),n.jsxs("form",{onSubmit:K,children:[n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"row",children:["taxCode","taxName","cgst","sgst","igst"].map(ie=>n.jsx("div",{className:` ${ie==="taxName"?"col-md-4":"col-md-2"} mb-3`,children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:`${ie==="taxName"?"col-3":"col-6"}`,children:n.jsx("label",{className:"form-label ",children:ie==="taxCode"?"Tax Code":ie==="taxName"?"Tax Name":ie==="sgst"?"SGST/UGST%":`${ie.toUpperCase()}%`})}),n.jsxs("div",{className:`${ie==="taxName"?"col-9":"col-6"}`,children:[n.jsx("input",{type:"text",name:ie,value:b[ie],onChange:Y,className:`form-control ${e[ie]?"is-invalid":""}`,placeholder:ie==="taxCode"?"Enter tax code (max 4 chars)":ie==="taxName"?"Enter tax name (max 25 chars)":"Enter percentage (max 2 digits)"}),e[ie]&&n.jsx("div",{className:"invalid-feedback",children:e[ie]})]})]})},ie))})}),n.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Q,children:"Cancel"}),n.jsx("button",{className:"btn btn-primary",type:"submit",children:s?"Update Tax":"Save Tax"})]})]})]})})})]}),n.jsx(wf,{show:o,onClose:()=>l(!1),onImportSuccess:S,masterDataType:"tax"})]})};function hTe(){const[e,t]=j.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),r=localStorage.getItem("selectedCompanyId"),a=localStorage.getItem("financialYear"),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState([]),[x,g]=j.useState(!1),[b,y]=j.useState(!1),[S,w]=j.useState("internal"),[k,C]=j.useState(""),[D,E]=j.useState(""),A=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","Maharashtra","Gujarat","Rajasthan","Punjab","Haryana"],I=["India","USA","Germany","France","UK"],[L,P]=j.useState(!1),[O,Y]=j.useState(1),[q,K]=j.useState(""),U=10;j.useEffect(()=>{J(),F()},[]),j.useEffect(()=>{Y(1)},[q]);const J=async()=>{const ue=await Oe.get("/api/vendor-categories",{params:{companyId:r,financialYear:a}});i(ue.data)},F=async()=>{const oe=(await Oe.get("/api/vendors",{params:{companyId:r,financialYear:a}})).data.sort((ye,je)=>new Date(je.createdAt)-new Date(ye.createdAt));l(oe)},X=o.filter(ue=>{const oe=ue.vnNo?.toLowerCase()||"",ye=ue.name1?.toLowerCase()||"",je=ue.categoryId?.categoryName?.toLowerCase()||"",Me=q.toLowerCase();return oe.includes(Me)||ye.includes(Me)||je.includes(Me)}),Q=Math.ceil(X.length/U),ie=O*U,M=ie-U,V=X.slice(M,ie),W=ue=>{ue>=1&&ue<=Q&&Y(ue)},ee=ue=>{const{name:oe,value:ye}=ue.target;oe==="email"&&ye&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(ye)?ue.target.setCustomValidity(""):ue.target.setCustomValidity("Please enter a valid email address")),t(je=>({...je,[oe]:ye}))},re=()=>{const ue=X.map(Be=>({"Vendor No":Be.vnNo||"","Name 1":Be.name1||"","Name 2":Be.name2||"",Category:Be.categoryId?.categoryName||"","Search Term":Be.search||"","Address 1":Be.address1||"","Address 2":Be.address2||"","Extra Addresses":Be.extraAddresses?Be.extraAddresses.join(", "):"",City:Be.city||"",Pincode:Be.pincode||"",Region:Be.region||"",Country:Be.country||"","Contact No":Be.contactNo||"","Contact Person":Be.contactname||"",Email:Be.email||"","Vendor Type":Be.vendorIdType||"internal","External Vendor ID":Be.externalVendorId||"","Is Deleted":Be.isDeleted?"Yes":"No","Is Blocked":Be.isBlocked?"Yes":"No","Created Date":Be.createdAt?new Date(Be.createdAt).toLocaleDateString():"","Updated Date":Be.updatedAt?new Date(Be.updatedAt).toLocaleDateString():""})),oe=on.book_new(),ye=on.json_to_sheet(ue),je=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:20},{wch:25},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];ye["!cols"]=je,on.book_append_sheet(oe,ye,"Vendors");const Me=new Date,He=Me.toLocaleDateString("en-GB").replace(/\//g,"-"),et=Me.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ft=`Vendor-Master-${He}-${et}.xlsx`;sh(oe,ft),alert(`Excel file exported successfully as: ${ft}`)},ne=async()=>{try{const ue={...e,companyId:r,financialYear:a,vendorIdType:S,externalVendorId:S==="external"?k:null};if(u)await Oe.put(`/api/vendors/${u}`,ue),alert("Vendor updated!");else{const oe=await Oe.post("/api/vendors",ue);d(oe.data.vnNo),alert(`Vendor saved! VNNo: ${oe.data.vnNo}`)}F(),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null),y(!1),P(!1),C(""),w("internal")}catch(ue){console.error(ue),alert("Error saving vendor")}},ce=async ue=>{if(ue.preventDefault(),!e.categoryId||!e.name1){alert("Please fill in required fields");return}y(!0)},ae=ue=>{t({categoryId:ue.categoryId?._id,name1:ue.name1,name2:ue.name2,search:ue.search,address1:ue.address1,address2:ue.address2,city:ue.city,pincode:ue.pincode,region:ue.region,country:ue.country,contactNo:ue.contactNo,contactname:ue.contactname,email:ue.email}),h(ue._id),d(ue.vnNo),P(!0)},Z=()=>{t(ue=>({...ue,extraAddresses:[...ue.extraAddresses,""]}))},de=(ue,oe)=>{const ye=[...e.extraAddresses];ye[ue]=oe,t(je=>({...je,extraAddresses:ye}))},z=ue=>{const oe=[...e.extraAddresses];oe.splice(ue,1),t(ye=>({...ye,extraAddresses:oe}))},se=async(ue,oe,ye)=>{try{const je=await Oe.put(`/api/vendors/status/${ue}`,{[oe]:ye});l(Me=>Me.map(He=>He._id===ue?{...He,[oe]:ye}:He)),alert(`${oe} updated successfully!`)}catch(je){console.error(je),alert("Failed to update vendor status")}},Ne=ue=>{alert(`Import completed: ${ue.results.imported} records imported`),g(!1)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb ",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Master"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Master"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search Vendors...",value:q,onChange:ue=>K(ue.target.value)})]})})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>g(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:re,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsxs("a",{href:"#",className:"btn btn-primary btn-sm",onClick:()=>{P(!0),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null)},children:[n.jsx("i",{className:"ti ti-add-circle5 me-1"}),"New Vendor"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"VNNo"}),n.jsx("th",{children:"Name1"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Search"}),n.jsx("th",{children:"Address"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Delete"}),n.jsx("th",{children:"Block"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:V.length>0?V.map(ue=>n.jsxs("tr",{children:[n.jsx("td",{children:ue.vnNo}),n.jsx("td",{className:"text-wrap",children:ue.name1}),n.jsx("td",{children:ue.categoryId?.categoryName}),n.jsx("td",{className:"text-wrap",children:ue.contactNo}),n.jsx("td",{className:"text-wrap",children:ue.email}),n.jsx("td",{className:"text-wrap",children:ue.search}),n.jsx("td",{className:"text-wrap",children:ue.address1}),n.jsx("td",{className:"text-wrap",children:ue.city}),n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:ue.isDeleted||!1,onChange:oe=>se(ue._id,"isDeleted",oe.target.checked)})}),n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:ue.isBlocked||!1,onChange:oe=>se(ue._id,"isBlocked",oe.target.checked)})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>ae(ue),children:"Edit"})})]},ue._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"11",className:"text-center text-muted py-4",children:q?"No vendors found matching your search criteria":"No vendors available"})})})]})})})]}),X.length>0&&Q>1&&n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${O===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ue=>{ue.preventDefault(),W(O-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const oe=[],ye=[];oe.push(1);for(let He=Math.max(2,O-2);He<=Math.min(Q-1,O+2);He++)oe.push(He);Q>1&&oe.push(Q);const je=[...new Set(oe)].sort((He,et)=>He-et);let Me;for(let He of je)Me&&(He-Me===2?ye.push(Me+1):He-Me!==1&&ye.push("...")),ye.push(He),Me=He;return ye.map((He,et)=>He==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${et}`):n.jsx("li",{className:`page-item ${O===He?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:ft=>{ft.preventDefault(),W(He)},children:He})},He))})(),n.jsx("li",{className:`page-item ${O===Q?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ue=>{ue.preventDefault(),W(O+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})}),L&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:u?"Edit Vendor":"Add New Vendor"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal",onClick:()=>P(!1),children:n.jsx("i",{className:"fa-solid fa-x"})})]}),n.jsxs("form",{onSubmit:ce,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:ee,required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),s.map(ue=>n.jsx("option",{value:ue._id,children:ue.categoryName},ue._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Name1:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name1",className:"form-control",placeholder:"Enter Name 1",value:e.name1,onChange:ee,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Name2:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2",className:"form-control",value:e.name2,onChange:ee})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Search Term:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",className:"form-control",value:e.search,onChange:ee})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Address1:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:ee,className:"form-control"})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Address2:"})}),n.jsx("div",{className:"col-6",children:n.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:ee,className:"form-control"})}),n.jsx("div",{className:"col-2",children:n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Z,children:"+"})})]})}),e.extraAddresses?.map((ue,oe)=>n.jsx("div",{className:"col-md-4 mb-2 position-relative",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsxs("label",{className:"form-label",children:[`Address${oe+3}`,":"]})}),n.jsxs("div",{className:"col-8 d-flex align-items-center",children:[n.jsx("input",{type:"text",placeholder:`Enter Address ${oe+3}`,value:ue,onChange:ye=>de(oe,ye.target.value),className:"form-control me-2"}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>z(oe),children:n.jsx("i",{className:"ti ti-x"})})]})]})},oe)),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"City:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"city",placeholder:"Enter City",className:"form-control",value:e.city,onChange:ee})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Pincode:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"pincode",placeholder:"Enter Pincode",className:"form-control",value:e.pincode,onChange:ee})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Region:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"region",className:"form-select",placeholder:"Select Region",value:e.region,onChange:ee,children:[n.jsx("option",{value:"",children:"Select Region"}),A.map(ue=>n.jsx("option",{value:ue,children:ue},ue))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Country:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"country",className:"form-select",value:e.country,onChange:ee,children:[n.jsx("option",{value:"",children:"Select Country"}),I.map(ue=>n.jsx("option",{value:ue,children:ue},ue))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"ContactNo:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter Contact No",className:"form-control",value:e.contactNo,onChange:ee})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"contactname",placeholder:"Enter Contact Person Name",className:"form-control",value:e.contactname,onChange:ee})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Email:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"email",name:"email",placeholder:"Enter Email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",className:"form-control",value:e.email,onChange:ee})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>P(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Save"})]})]})]})})})]}),b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Select Vendor ID Type"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(!1),E(""),C(""),w("internal")},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Vendor ID:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-outline-primary btn-md",onClick:()=>{w("internal"),ne()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-outline-secondary btn-md",onClick:()=>w("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),S==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"External Vendor ID"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Vendor ID (max 50 characters)",value:k,onChange:ue=>{ue.target.value.length<=50&&(C(ue.target.value),E(""))},onKeyPress:ue=>{ue.key==="Enter"&&k&&ne()},maxLength:50}),n.jsxs("div",{className:"form-text",children:[k.length,"/50 characters"]}),D&&n.jsx("div",{className:"alert alert-danger mt-2",role:"alert",children:D}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"btn btn-primary",onClick:ne,disabled:!k,children:"Confirm & Save Vendor"})})]})]})]})})})]}),n.jsx(wf,{show:x,onClose:()=>g(!1),onSuccess:Ne,masterDataType:"vendor"})]})}function fTe(){const[e,t]=j.useState({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState("vendorId"),[x,g]=j.useState("materialId"),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState([]),[D,E]=j.useState([]),[A,I]=j.useState([]),[L,P]=j.useState([]),[O,Y]=j.useState([]),[q,K]=j.useState(1),[U,J]=j.useState(null),[F,X]=j.useState(!1),Q=localStorage.getItem("selectedCompanyId"),ie=localStorage.getItem("financialYear"),[M,V]=j.useState(!1);j.useEffect(()=>{ee(),re(),ne(),ce(),ae(),Oe.get("/api/locations",{params:{companyId:Q,financialYear:ie}}).then(Ae=>a(Ae.data))},[]);const W=()=>{const Ae=O.map(jr=>({Category:ue(jr.categoryId),"Vendor Name":oe(jr.vendorId),"Vendor ID":ye(jr.vendorId),"Material ID":Me(jr.materialId),"Material Description":je(jr.materialId),"Unit (Location)":jr.unit||"","BUM (Base Unit Measure)":jr.bum||"","Order Unit":jr.orderUnit||"",Price:jr.price||"",Buyer:jr.buyer||"","Tax Name":He(jr.taxId),"Tax Details":et(jr.taxId),"Company ID":jr.companyId||"","Financial Year":jr.financialYear||"","Created Date":jr.createdAt?new Date(jr.createdAt).toLocaleDateString():"","Updated Date":jr.updatedAt?new Date(jr.updatedAt).toLocaleDateString():""})),ke=on.book_new(),ot=on.json_to_sheet(Ae),bt=[{wch:20},{wch:25},{wch:15},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:12},{wch:20},{wch:15},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];ot["!cols"]=bt,on.book_append_sheet(ke,ot,"Vendor Price List");const Xt=new Date,Ft=Xt.toLocaleDateString("en-GB").replace(/\//g,"-"),rr=Xt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),pr=`Vendor-Price-List-${Ft}-${rr}.xlsx`;sh(ke,pr)},ee=async()=>{try{const Ae=await Oe.get("/api/vendor-categories",{params:{companyId:Q,financialYear:ie}});C(Ae.data)}catch(Ae){console.error("Error fetching categories:",Ae)}},re=async()=>{try{const Ae=await Oe.get("/api/vendors",{params:{companyId:Q,financialYear:ie}});E(Ae.data)}catch(Ae){console.error("Error fetching vendors:",Ae)}},ne=async()=>{try{const Ae=await Oe.get("/api/material",{params:{companyId:Q,financialYear:ie}});I(Ae.data)}catch(Ae){console.error("Error fetching materials:",Ae)}},ce=async()=>{try{const ke=await(await fetch("/api/tax",{params:{companyId:Q,financialYear:ie}})).json();P(ke)}catch(Ae){console.error("Error fetching taxes:",Ae)}},ae=async()=>{try{const Ae=localStorage.getItem("selectedCompanyId"),ke=localStorage.getItem("financialYear");console.log("comanyvendorpl",Ae,ke);const ot=new URLSearchParams({companyId:Ae,financialYear:ke}).toString(),Xt=await(await fetch(`/api/vendor-price-lists?${ot}`)).json();Y(Xt)}catch(Ae){console.error("Error fetching price list:",Ae)}},Z=async Ae=>{const{name:ke,value:ot}=Ae.target;let bt={...e,[ke]:ot};if(ke==="materialId")try{const rr=(await(await fetch(`/api/material/${ot}`)).json()).conversionValue||1;K(rr)}catch(Xt){console.error("Error fetching material:",Xt),K(1)}t(bt)},de=async Ae=>{Ae.preventDefault();const ke=[];e.unit.trim()||ke.push("Unit (Location) is required."),e.categoryId||ke.push("Category is required."),e.vendorId||ke.push("Vendor is required."),e.materialId||ke.push("Material is required."),e.bum||ke.push("BUM (Base Unit Multiplier) is required."),e.buyer.trim()||ke.push("Buyer is required.");const ot={...e,companyId:Q,financialYear:ie};if(ke.length>0){alert(ke.join(`
`));return}try{if(U){console.log("Updating with ID:",U),console.log("Form data:",e);const bt=await fetch(`/api/vendor-price-lists/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});if(console.log("Update response status:",bt.status),bt.ok)alert("Vendor Price List Updated Successfully!"),J(null);else{const Xt=await bt.text();throw console.error("Update failed:",Xt),new Error(`Update failed: ${bt.status} - ${Xt}`)}}else{const bt=await fetch("/api/vendor-price-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});if(bt.ok)alert("Vendor Price List Saved Successfully!");else{const Xt=await bt.text();throw console.error("Save failed:",Xt),new Error(`Save failed: ${bt.status} - ${Xt}`)}}z(),X(!1),Be(!1),ae()}catch(bt){console.error("Error saving data:",bt),alert("Failed to save Vendor Price List: "+bt.message)}},z=()=>{t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),K(1),J(null)},se=async Ae=>{try{console.log("Editing ID:",Ae);const ke=await fetch(`/api/vendor-price-lists/${Ae}`);if(!ke.ok)throw new Error(`Failed to fetch: ${ke.status} - ${ke.statusText}`);const ot=await ke.json(),bt=Xt=>Xt?typeof Xt=="string"?Xt:typeof Xt=="object"&&(Xt.$oid||Xt._id)||Xt.toString():"";t({categoryId:bt(ot.categoryId),vendorId:bt(ot.vendorId),materialId:bt(ot.materialId),unit:ot.unit,bum:ot.bum,orderUnit:ot.orderUnit,price:ot.price,buyer:ot.buyer,taxId:bt(ot.taxId)}),J(Ae),X(!0),Be(!0)}catch(ke){console.error("Error fetching record for edit:",ke),alert("Failed to load record for editing: "+ke.message)}},Ne=Ae=>Ae?typeof Ae=="string"?Ae:typeof Ae=="object"&&(Ae.$oid||Ae._id)||Ae.toString():null,ue=Ae=>{const ke=Ne(Ae),ot=k.find(bt=>bt._id===ke);return ot?ot.categoryName:"Unknown"},oe=Ae=>{const ke=Ne(Ae),ot=D.find(bt=>bt._id===ke);return ot?ot.name1:"Unknown"},ye=Ae=>{const ke=Ne(Ae),ot=D.find(bt=>bt._id===ke);return ot?ot.vnNo||ot.vendorId:"Unknown"},je=Ae=>{const ke=Ne(Ae),ot=A.find(bt=>bt._id===ke);return ot?ot.description:"Unknown"},Me=Ae=>{const ke=Ne(Ae),ot=A.find(bt=>bt._id===ke);return ot?ot.materialId:"Unknown"},He=Ae=>{if(!Ae)return"No Tax";const ke=Ne(Ae),ot=L.find(bt=>bt._id===ke);return ot?ot.taxName:"Unknown"},et=Ae=>{if(!Ae)return"No Tax";const ke=Ne(Ae),ot=L.find(bt=>bt._id===ke);return ot?`CGST: ${ot.cgst}%, SGST: ${ot.sgst}%, IGST: ${ot.igst}%`:"Unknown"},[ft,Be]=j.useState(!1),[dt,Tt]=j.useState(1),At=10,qt=O.slice((dt-1)*At,dt*At),xe=Math.ceil(O.length/At),he=Ae=>{Ae>=1&&Ae<=xe&&Tt(Ae)},ve=()=>{i(!0),y(""),d([])},pe=()=>{i(!1),y(""),d([])},De=Ae=>{y(Ae.target.value)},Ke=()=>{if(!b.trim()){d([]);return}if(f==="vendorId"){const Ae=D.filter(ke=>(ke.vendorId||"").toLowerCase().includes(b.toLowerCase()));d(Ae)}else{const Ae=D.filter(ke=>(ke.name1||"").toLowerCase().includes(b.toLowerCase()));d(Ae)}},Nt=()=>{d(D),y("")},Je=()=>{d([]),y("")},Qe=Ae=>{Z({target:{name:"vendorId",value:Ae._id}}),pe()},Ue=()=>{l(!0),w(""),h([])},qe=()=>{l(!1),w(""),h([])},mt=Ae=>{w(Ae.target.value)},Ie=()=>{if(!S.trim()){h([]);return}if(x==="materialId"){const Ae=A.filter(ke=>(ke.materialId||"").toLowerCase().includes(S.toLowerCase()));h(Ae)}else{const Ae=A.filter(ke=>(ke.description||"").toLowerCase().includes(S.toLowerCase()));h(Ae)}},Xe=()=>{h(A),w("")},Ye=()=>{h([]),w("")},lt=Ae=>{Z({target:{name:"materialId",value:Ae._id}}),qe()};j.useEffect(()=>{const Ae=setTimeout(()=>{b.trim()?Ke():d([])},300);return()=>clearTimeout(Ae)},[b,f,D]),j.useEffect(()=>{const Ae=setTimeout(()=>{S.trim()?Ie():h([])},300);return()=>clearTimeout(Ae)},[S,x,A]);const Mt=Ae=>{V(!1),ae()};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Price List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Price List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search"})]})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>V(!0),children:[n.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),n.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:W,title:"Export to Excel",children:[n.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),n.jsx("div",{children:n.jsxs("a",{href:"javascript:void(0);",className:"btn btn-primary btn-sm",onClick:()=>{Be(!0),t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),J(null)},children:[n.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Vendor Price List"]})})]})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered datatable",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Material"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"BUM"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Buyer"}),n.jsx("th",{children:"Tax"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:qt.map(Ae=>n.jsxs("tr",{children:[n.jsx("td",{children:oe(Ae.vendorId)}),n.jsx("td",{children:ue(Ae.categoryId)}),n.jsx("td",{children:je(Ae.materialId)}),n.jsx("td",{className:"text-wrap",children:Ae.unit}),n.jsx("td",{className:"text-wrap",children:Ae.bum}),n.jsx("td",{className:"text-wrap",children:Ae.orderUnit}),n.jsxs("td",{className:"text-wrap",children:["Rs",Ae.price||0]}),n.jsx("td",{className:"text-wrap",children:Ae.buyer}),n.jsx("td",{className:"text-wrap",children:He(Ae.taxId)}),n.jsx("td",{style:{cursor:"pointer"},children:n.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>se(Ne(Ae._id)),children:"Edit"})})]},Ne(Ae._id)))})]})})})]}),xe>1&&n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[n.jsx("li",{className:`page-item ${dt===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ae=>{Ae.preventDefault(),he(dt-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:xe},(Ae,ke)=>n.jsx("li",{className:`page-item ${dt===ke+1?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:ot=>{ot.preventDefault(),he(ke+1)},children:ke+1})},ke)),n.jsx("li",{className:`page-item ${dt===xe?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ae=>{Ae.preventDefault(),he(dt+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})}),ft&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:U?"Edit Entry":"Add New Entry"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>Be(!1),children:n.jsx("i",{className:"fa-solid fa-x"})})]}),n.jsxs("form",{onSubmit:de,children:[n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Unit (Location):"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:e.unit,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"Select"}),r.map(Ae=>n.jsx("option",{value:Ae.name,children:Ae.name},Ae.name))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),k.map(Ae=>n.jsx("option",{value:Ae._id,children:Ae.categoryName},Ae._id))]})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Vendor:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsxs("select",{name:"vendorId",className:"form-select me-2",value:e.vendorId,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"Select Vendor"}),D.map(Ae=>n.jsx("option",{value:Ae._id,children:Ae.name1},Ae._id))]}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Vendor",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Material:"})}),n.jsxs("div",{className:"col-8 d-flex",children:[n.jsxs("select",{name:"materialId",className:"form-select me-2",value:e.materialId,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"Select Material"}),A.map(Ae=>n.jsx("option",{value:Ae._id,children:Ae.description},Ae._id))]}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Ue,title:"Search Material",children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label",children:"Base Unit (BUM):"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter Base Unit (BUM)",value:e.bum,onChange:Ae=>{Ae.target.value=Math.max(0,Ae.target.value),Z(Ae)},required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Price:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter Price",value:e.price,onChange:Z})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Buyer:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"buyer",className:"form-control",placeholder:"Enter Buyer",value:e.buyer,onChange:Z,required:!0})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Order Unit:"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Auto-calculated",value:e.orderUnit,onChange:Ae=>{Ae.target.value=Math.max(0,Ae.target.value),Z(Ae)}})})]})}),n.jsx("div",{className:"col-md-4 mb-2",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label",children:"Tax:"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"taxId",className:"form-select",value:e.taxId,onChange:Z,children:[n.jsx("option",{value:"",children:"Select Tax"}),L.map(Ae=>n.jsx("option",{value:Ae._id,children:Ae.taxName},Ae._id))]})})]})})]})}),n.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>Be(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:U?"Update":"Save"})]})]})]})})})]}),s&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pe})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:f,onChange:Ae=>p(Ae.target.value),children:[n.jsx("option",{value:"vendorId",children:"Vendor ID"}),n.jsx("option",{value:"name",children:"Vendor Name"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:f==="vendorId"?"Enter Vendor ID...":"Search by Vendor Name...",value:b,onChange:De})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),c.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:c.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:c.map((Ae,ke)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Ae.vnNo}),n.jsx("td",{className:"text-wrap",children:Ae.name1}),n.jsx("td",{className:"text-wrap",children:Ae.contactNo}),n.jsx("td",{className:"text-wrap",children:Ae.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Qe(Ae),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:D.length===0?"No vendors loaded from API":b?`No vendors found matching "${b}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:qe})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:x,onChange:Ae=>g(Ae.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:x==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:S,onChange:mt})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),u.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ye,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:u.length>0?n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:u.map((Ae,ke)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-wrap",children:Ae.materialId}),n.jsx("td",{className:"text-wrap",children:Ae.description}),n.jsx("td",{className:"text-wrap",children:Ae.baseUnit}),n.jsx("td",{className:"text-wrap",children:Ae.location}),n.jsx("td",{className:"text-wrap",children:Ae.materialgroup}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>lt(Ae),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:A.length===0?"No materials loaded from API":S?`No materials found matching "${S}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:qe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),n.jsx(wf,{show:M,onClose:()=>V(!1),onImportSuccess:Mt,masterDataType:"vendorPriceList"})]})})}function ZB(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[h,f]=j.useState(!1),[p,x]=j.useState([]),[g,b]=j.useState(null),[y,S]=j.useState([]),[w,k]=j.useState(!1),[C,D]=j.useState("materialId"),[E,A]=j.useState(""),[I,L]=j.useState(!1),P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear");j.useEffect(()=>{Oe.get("/api/material",{params:{companyId:P,financialYear:O}}).then(Ye=>{x(Ye.data),console.log("Materials loaded:",Ye.data)}).catch(Ye=>console.error("Error fetching materials:",Ye))},[]),j.useEffect(()=>{if(!I&&!E){S([]);return}const Ye=p.filter(lt=>{if(I&&!E)return!0;const Mt=E.toLowerCase();return(lt[C]?.toString().toLowerCase()||"").includes(Mt)});S(Ye)},[p,E,C,I]);const Y=Ye=>{if(q!==null&&i?.items){const lt=[...i.items];lt[q]&&(lt[q]={...lt[q],materialId:Ye.materialId,description:Ye.description,baseUnit:Ye.baseUnit,price:Ye.price},o({...i,items:lt}))}k(!1),K(null)},[q,K]=j.useState(null),[U,J]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0,isdelete:!1}),[F,X]=j.useState(""),[Q,ie]=j.useState("soNumber"),[M,V]=j.useState(!1),[W,ee]=j.useState([]),[re,ne]=j.useState(null),[ce,ae]=j.useState("name1"),[Z,de]=j.useState(""),[z,se]=j.useState(!1),[Ne,ue]=j.useState([]),[oe,ye]=j.useState(""),[je,Me]=j.useState(!1),[He,et]=j.useState(!1);j.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:P,financialYear:O}}).then(Ye=>r(Ye.data)).catch(Ye=>console.error("Error fetching sales orders",Ye)),Oe.get("/api/goodsissuecategory",{params:{companyId:P,financialYear:O}}).then(Ye=>s(Ye.data)).catch(Ye=>console.error("Error fetching categories",Ye)),Oe.get("/api/customers",{params:{companyId:P,financialYear:O}}).then(Ye=>ee(Ye.data)).catch(Ye=>console.error("Error fetching customers",Ye))},[]);const ft=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsissue",{params:{companyId:P,financialYear:O}}).then(Ye=>{console.log("Documents fetched:",Ye.data),ue(Ye.data)}).catch(Ye=>{console.error("Error fetching documents",Ye)})};j.useEffect(()=>{console.log("Categories loaded:",a),a.forEach(Ye=>{console.log(`Category: "${Ye.categoryName}" (length: ${Ye.categoryName.length})`)})},[a]);const Be=Ye=>{o(Ye),J(lt=>({...lt,customer:Ye.sales||Ye.customer||Ye.customerName,location:Ye.deliveryLocation||""})),c(!1)},dt=Ye=>{J(lt=>({...lt,customer:Ye.name1})),u(!1)},Tt=Ye=>{if(J(lt=>({...lt,docnumber:Ye.docnumber,documentDate:Ye.documentDate||Ye.issueDate||e,postingDate:Ye.postingDate||e,reference:Ye.reference||"",customer:Ye.customer||"",location:Ye.location||""})),ne(Ye),Ye.salesOrderId){const lt=t.find(Mt=>Mt._id===Ye.salesOrderId);lt&&o(lt)}else Ye.items&&o({soNumber:Ye.docnumber,items:Ye.items,sales:Ye.customer,deliveryLocation:Ye.location});f(!1)},[At,qt]=j.useState(!1),xe=Ye=>{const lt=Ye.target.value;console.log(`Selected category: "${lt}" (length: ${lt.length})`);let Mt="",Ae=!1;const ke=lt.trim().toLowerCase();ke==="cancel"?(Ae=!0,qt(!0),console.log("Cancel category selected - enabling document search"),ft()):ke==="demo"?Mt=`DMP-${Date.now()}`:ke==="display"&&(Ae=!0,console.log("Display category selected - enabling document search"),ft());const ot=a.find(bt=>bt.categoryName.trim().toLowerCase()===ke);console.log("Selected category object:",ot),console.log("Document number enabled:",Ae),J(bt=>({...bt,category:lt,catdesc:ot?.description||"",docnumber:Ae?"":Mt})),et(Ae)},he=Ye=>{const lt=Ye.target.value;if(J(Mt=>({...Mt,docnumber:lt})),lt.length>2){const Mt=Ne.find(Ae=>Ae.docnumber&&Ae.docnumber.toLowerCase().includes(lt.toLowerCase()));Mt&&Tt(Mt)}},ve=(Ye,lt,Mt)=>{const Ae=[...i.items];Ae[Ye][lt]=Mt,o({...i,items:Ae})},pe=async Ye=>{if(Ye.preventDefault(),!i)return alert("Please select a Sales Order.");const lt={...U,salesOrderId:i._id,items:i.items,issueDate:e};try{if(At){await Oe.patch(`/api/goodsissue/${re._id}`,{isdelete:!0}),alert("Goods Issue cancelled successfully!");return}else await Oe.post("/api/goodsissue",lt),alert("Goods Issue saved successfully!"),J({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0}),o(null),et(!1)}catch(Mt){console.error("Error saving goods issue",Mt),alert("Failed to save goods issue")}},De=t.filter(Ye=>!M&&!F?!1:(Ye[Q]?.toLowerCase()||"").includes(F.toLowerCase())),Ke=W.filter(Ye=>!z&&!Z?!1:(Ye[ce]?.toLowerCase()||"").includes(Z.toLowerCase())),Nt=Ne.filter(Ye=>!je&&!oe?!1:(Ye.docnumber?.toLowerCase()||"").includes(oe.toLowerCase())),Je=()=>{X(""),V(!0)},Qe=()=>{X(""),V(!1)},Ue=()=>{de(""),se(!0)},qe=()=>{de(""),se(!1)},mt=()=>{ye(""),Me(!0),ft()},Ie=()=>{ye(""),Me(!1)},Xe=U.category.trim().toLowerCase()==="display";return n.jsxs("div",{className:"content p-3",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Issue"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Issue"})]})})]})}),n.jsxs("form",{onSubmit:pe,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header p-2",children:[n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{name:"category",className:"form-select form-select-sm",value:U.category,onChange:xe,children:[n.jsx("option",{value:"",children:"Select"}),a.map(Ye=>n.jsx("option",{value:Ye.categoryName,children:Ye.categoryName},Ye._id))]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Description"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",name:"catdesc",className:"form-control form-control-sm",value:U.catdesc,readOnly:!0})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Sales Order"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",name:"so",value:i?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>c(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",name:"docnumber",className:"form-control form-control-sm",value:U.docnumber,onChange:he,readOnly:!He,placeholder:He?"Enter document number...":""}),He&&n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>f(!0),children:"Search"})]})})]})})]}),n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:U.documentDate,onChange:Ye=>J(lt=>({...lt,documentDate:Ye.target.value}))})})]})}),n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Post Date"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:U.postingDate,onChange:Ye=>J(lt=>({...lt,postingDate:Ye.target.value}))})})]})}),n.jsx("div",{className:"col-xl-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"DC/LLR/REF"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.reference,onChange:Ye=>J(lt=>({...lt,reference:Ye.target.value}))})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Customer"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.customer,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.location,readOnly:!0})})]})})]})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"S. No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Mat Desc"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Value"}),n.jsx("th",{children:"Available Qty"}),At&&n.jsx("th",{children:"Cancel"})]})}),n.jsx("tbody",{children:i?.items?.map((Ye,lt)=>n.jsxs("tr",{children:[n.jsx("td",{children:lt+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control",value:Ye.materialId||"",readOnly:!0}),!Xe&&n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{K(lt),k(!0)},children:""})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ye.description,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:`form-control ${Xe?"bg-light":""}`,value:Ye.quantity,onChange:Xe?void 0:Mt=>ve(lt,"quantity",Mt.target.value),readOnly:Xe,disabled:Xe})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ye.baseUnit,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:`form-control ${Xe?"bg-light":""}`,value:Ye.deliveryDate,onChange:Xe?void 0:Mt=>ve(lt,"deliveryDate",Mt.target.value),readOnly:Xe,disabled:Xe})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:`form-control ${Xe?"bg-light":""}`,value:Ye.lotNo||"",onChange:Xe?void 0:Mt=>ve(lt,"lotNo",Mt.target.value),readOnly:Xe,disabled:Xe})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ye.price,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:`form-control ${Xe?"bg-light":""}`,value:Ye.availableQty||"",onChange:Xe?void 0:Mt=>ve(lt,"availableQty",Mt.target.value),readOnly:Xe,disabled:Xe})}),At&&n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:Ye.isCancelled,onChange:Mt=>ve(lt,"isCancelled",Mt.target.checked)})})]},lt))})]})})})]}),!Xe&&n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),w&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>k(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:C,onChange:Ye=>D(Ye.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${C}`,value:E,onChange:Ye=>A(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>L(!0),children:"View All"}),(E||I)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{A(""),L(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:y.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:y.map((Ye,lt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ye.materialId})}),n.jsx("td",{children:Ye.description}),n.jsx("td",{children:Ye.baseUnit}),n.jsx("td",{children:Ye.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Y(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:E?`No materials found for "${E}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),l&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>c(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Q,onChange:Ye=>ie(Ye.target.value),children:[n.jsx("option",{value:"soNumber",children:"SO Number"}),n.jsx("option",{value:"sales",children:"Customer"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${Q}`,value:F,onChange:Ye=>X(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Je,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(F||M)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:De.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Sales"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:De.map((Ye,lt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Ye.soNumber})}),n.jsx("td",{children:Ye.sales||Ye.customer||Ye.customerName}),n.jsx("td",{children:Ye.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Be(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:F?`No sales orders found for "${F}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),d&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>u(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ce,onChange:Ye=>ae(Ye.target.value),children:[n.jsx("option",{value:"name1",children:"Customer Name"}),n.jsx("option",{value:"customerId",children:"Customer ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ce}`,value:Z,onChange:Ye=>de(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ue,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(Z||z)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:qe,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ke.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ke.map((Ye,lt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ye.customerId})}),n.jsx("td",{children:Ye.name1}),n.jsx("td",{children:Ye.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>dt(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Z?`No customers found for "${Z}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),h&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>f(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:n.jsx("option",{value:"docnumber",children:"Document Number"})})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:oe,onChange:Ye=>ye(Ye.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:mt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(oe||je)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ie,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Nt.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Document Number"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Nt.map((Ye,lt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Ye.docnumber})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:Ye.category})}),n.jsx("td",{children:Ye.customer}),n.jsx("td",{children:Ye.documentDate||Ye.issueDate}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Tt(Ye),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:oe?`No documents found for "${oe}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const mTe=({show:e,onClose:t,issue:r})=>r?n.jsx("div",{className:`modal fade${e?" show d-block":""}`,tabIndex:"-1",style:e?{background:"rgba(0,0,0,0.5)"}:{display:"none"},children:n.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Preview: Goods Issue - ",r.docnumber]}),n.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:t})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Category:"})," ",r.category,n.jsx("br",{}),n.jsx("strong",{children:"Category Desc:"})," ",r.catdesc,n.jsx("br",{}),n.jsx("strong",{children:"Document Date:"})," ",r.documentDate,n.jsx("br",{}),n.jsx("strong",{children:"Posting Date:"})," ",r.postingDate,n.jsx("br",{}),n.jsx("strong",{children:"Reference:"})," ",r.reference,n.jsx("br",{}),n.jsx("strong",{children:"Customer:"})," ",r.customer,n.jsx("br",{})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Location:"})," ",r.location,n.jsx("br",{}),n.jsx("strong",{children:"Issue Date:"})," ",r.issueDate,n.jsx("br",{}),n.jsx("strong",{children:"Sales Order ID:"})," ",r.salesOrderId,n.jsx("br",{}),n.jsx("strong",{children:"Company ID:"})," ",r.companyId,n.jsx("br",{}),n.jsx("strong",{children:"Financial Year:"})," ",r.financialYear,n.jsx("br",{}),n.jsx("strong",{children:"Deleted:"})," ",r.isdelete?"Yes":"No",n.jsx("br",{})]})]}),n.jsx("h6",{className:"mt-3",children:"Items"}),n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Available Qty"}),n.jsx("th",{children:"Total (Qty  Price)"})]})}),n.jsx("tbody",{children:r.items.map((a,s)=>{const i=a.quantity*a.price;return n.jsxs("tr",{children:[n.jsx("td",{children:s+1}),n.jsx("td",{children:a.materialId}),n.jsx("td",{children:a.description}),n.jsx("td",{children:a.quantity}),n.jsx("td",{children:a.baseUnit}),n.jsx("td",{children:a.deliveryDate}),n.jsx("td",{children:a.lotNo}),n.jsx("td",{children:a.price}),n.jsx("td",{children:a.availableQty}),n.jsx("td",{children:i})]},s)})})]})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})})}):null,Gv=10,e7=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(null),[s,i]=j.useState(0),[o,l]=j.useState(1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=j.useState(!1);j.useEffect(()=>{f()},[o]);const f=async()=>{h(!0);try{const C=await Oe.get("/api/goodsissue",{params:{companyId:c,financialYear:d,skip:(o-1)*Gv,limit:Gv}});t(C.data.items||C.data),i(C.data.totalCount||C.data.total||C.data.length||0)}catch(C){console.error("Error fetching Goods Issues:",C)}h(!1)},p=C=>{const D=window.open("","","height=700,width=1000");D.document.write("<html><head><title>Print Goods Issue</title>"),D.document.write(`<style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; }
        body { font-family: sans-serif; }
        h5, h6 { margin-top: 10px; }
      </style>`),D.document.write("</head><body>"),D.document.write(`<h5>Preview: Goods Issue - ${C.docnumber}</h5>
      <div>
        <div style="display:flex;gap:40px;margin-bottom:16px;">
          <div>
            <strong>Category:</strong> ${C.category||""}<br/>
            <strong>Category Desc:</strong> ${C.catdesc||""}<br/>
            <strong>Document Date:</strong> ${C.documentDate||""}<br/>
            <strong>Posting Date:</strong> ${C.postingDate||""}<br/>
            <strong>Reference:</strong> ${C.reference||""}<br/>
            <strong>Customer:</strong> ${C.customer||""}<br/>
          </div>
          <div>
            <strong>Location:</strong> ${C.location||""}<br/>
            <strong>Issue Date:</strong> ${C.issueDate||""}<br/>
            <strong>Sales Order ID:</strong> ${C.salesOrderId||""}<br/>
            <strong>Company ID:</strong> ${C.companyId||""}<br/>
            <strong>Financial Year:</strong> ${C.financialYear||""}<br/>
            <strong>Deleted:</strong> ${C.isdelete?"Yes":"No"}<br/>
          </div>
        </div>
        <h6>Items</h6>
        <table style="width:100%;border:1px solid black;">
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Base Unit</th>
              <th>Delivery Date</th>
              <th>Lot No</th>
              <th>Price</th>
              <th>Available Qty</th>
              <th>Total (Qty  Price)</th>
            </tr>
          </thead>
          <tbody>
            ${C.items&&C.items.length>0?C.items.map((E,A)=>{const I=E.quantity*E.price;return`
                      <tr>
                        <td>${A+1}</td>
                        <td>${E.materialId||""}</td>
                        <td>${E.description||""}</td>
                        <td>${E.quantity}</td>
                        <td>${E.baseUnit||""}</td>
                        <td>${E.deliveryDate||""}</td>
                        <td>${E.lotNo||""}</td>
                        <td>${E.price}</td>
                        <td>${E.availableQty}</td>
                        <td>${I}</td>
                      </tr>
                    `}).join(""):'<tr><td colSpan="10">No items</td></tr>'}
          </tbody>
        </table>
      </div>`),D.document.write("</body></html>"),D.document.close(),D.focus(),D.print(),D.close()},[x,g]=j.useState(1),b=x*Gv,y=b-Gv,S=e.slice(y,b),w=Math.ceil(e.length/Gv),k=C=>{C<1||C>w||g(C)};return n.jsxs("div",{className:"container mt-4",children:[n.jsx("h2",{className:"mb-3",children:"Goods Issue Records"}),u?n.jsx("p",{children:"Loading..."}):e.length===0?n.jsx("p",{children:"No records found."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Document No"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Posting Date"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Issue Date"}),n.jsx("th",{children:"Preview Items"}),n.jsx("th",{children:"Print"})]})}),n.jsx("tbody",{children:S.map((C,D)=>{const E=C._id?.$oid||C._id||D;return n.jsxs("tr",{children:[n.jsx("td",{children:(x-1)*Gv+D+1}),n.jsx("td",{children:C.docnumber}),n.jsx("td",{children:C.category}),n.jsx("td",{children:C.documentDate}),n.jsx("td",{children:C.postingDate}),n.jsx("td",{children:C.reference}),n.jsx("td",{children:C.customer}),n.jsx("td",{children:C.location}),n.jsx("td",{children:C.issueDate}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>a(C),children:"Preview"})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>p(C),children:"Print"})})]},E)})})]})})})}),w>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${x===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>k(x-1),disabled:x===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const D=[],E=[];D.push(1);for(let L=Math.max(2,x-2);L<=Math.min(w-1,x+2);L++)D.push(L);w>1&&D.push(w);const A=[...new Set(D)].sort((L,P)=>L-P);let I;for(let L of A)I&&(L-I===2?E.push(I+1):L-I!==1&&E.push("...")),E.push(L),I=L;return E.map((L,P)=>L==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${P}`):n.jsx("li",{className:`page-item ${x===L?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>k(L),children:L})},L))})(),n.jsx("li",{className:`page-item ${x===w?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>k(x+1),disabled:x===w,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]}),n.jsx(mTe,{show:!!r,onClose:()=>a(null),issue:r})]})};function t7(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),d=localStorage.getItem("selectedCompanyId"),u=localStorage.getItem("financialYear"),[h,f]=j.useState(null),[p,x]=j.useState(!1),[g,b]=j.useState(!1),[y,S]=j.useState(!1),[w,k]=j.useState(null),[C,D]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),[E,A]=j.useState(""),[I,L]=j.useState("poNumber"),[P,O]=j.useState(!1),[Y,q]=j.useState(""),[K,U]=j.useState("name1"),[J,F]=j.useState(!1),[X,Q]=j.useState(!1),[ie,M]=j.useState("materialId"),[V,W]=j.useState(""),[ee,re]=j.useState(!1);j.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:d,financialYear:u}}).then(ve=>r(ve.data)).catch(ve=>console.error("Error fetching POs:",ve)),Oe.get("/api/vendors",{params:{companyId:d}}).then(ve=>s(ve.data)).catch(ve=>console.error("Error fetching vendors:",ve)),Oe.get("/api/material",{params:{companyId:d}}).then(ve=>o(ve.data)).catch(ve=>console.error("Error fetching materials:",ve)),Oe.get("/api/goodsreceiptcategory",{params:{companyId:d}}).then(ve=>c(ve.data)).catch(ve=>console.error("Error fetching categories:",ve))},[]);const ne=ve=>{f(ve),D(pe=>({...pe,vendor:ve.vendor||"",location:ve.deliveryLocation||""})),x(!1)},ce=ve=>{D(pe=>({...pe,vendor:ve.name1})),S(!1)},ae=ve=>{if(w!==null&&h?.items){const pe=[...h.items];pe[w]&&(pe[w]={...pe[w],materialId:ve.materialId,description:ve.description,baseUnit:ve.baseUnit,price:ve.price},f(De=>({...De,items:pe})))}Q(!1)},[Z,de]=j.useState(!1),[z,se]=j.useState(!1),Ne=ve=>{const pe=ve.target.value,De=l.find(Nt=>Nt.categoryName===pe);D(Nt=>({...Nt,category:pe,catdesc:De?.categoryName||""}));const Ke=De?.categoryName?.toLowerCase();se(Ke==="cancel"),de(Ke==="display")},ue=(ve,pe,De)=>{const Ke=[...h.items];Ke[ve][pe]=De,f({...h,items:Ke})},oe=async ve=>{if(ve.preventDefault(),!h)return alert("Please select a Purchase Order.");const pe={...C,purchaseOrderId:h._id,items:h.items,receiptDate:e,companyId:d,financialYear:u};try{l.find(De=>De.categoryName===C.category)?.categoryName.toLowerCase()==="cancel"?await Oe.patch(`/api/goodsreceipt/${h._id}`,{isdelete:!0}):await Oe.post("/api/goodsreceipt",pe),alert("Goods Receipt saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),f(null)}catch(De){console.error("Error saving goods receipt",De),alert("Failed to save goods receipt")}},ye=t.filter(ve=>!P&&!E?!1:(ve[I]?.toLowerCase()||"").includes(E.toLowerCase())),je=a.filter(ve=>!J&&!Y?!1:(ve[K]?.toLowerCase()||"").includes(Y.toLowerCase())),Me=i.filter(ve=>!ee&&!V?!1:(ve[ie]?.toLowerCase()||"").includes(V.toLowerCase())),[He,et]=j.useState([]),[ft,Be]=j.useState("grNumber"),[dt,Tt]=j.useState(""),[At,qt]=j.useState(!1);j.useEffect(()=>{Oe.get("/api/goodsreceipt",{params:{companyId:d,financialYear:u}}).then(ve=>et(ve.data)).catch(ve=>console.error("Error fetching goods receipts:",ve))},[]);const xe=He.filter(ve=>!At&&!dt?!1:(ve[ft]?.toLowerCase()||"").includes(dt.toLowerCase())),he=ve=>{const De=ve.category?.toLowerCase()==="cancel";D(Qe=>({...Qe,docnumber:ve.docnumber,vendor:ve.vendor,location:ve.location,reference:ve.reference,documentDate:ve.documentDate,postingDate:ve.postingDate}));const{category:Ke,catdesc:Nt,...Je}=ve;f(Je),console.log("select ",ve.items),se(!De),b(!1)};return console.log("selectedPO",h),console.log("isReadOnlyMode",z),n.jsxs("div",{className:"content p-3",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Receipt"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Receipt"})]})})]})}),n.jsxs("form",{onSubmit:oe,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:C.category,onChange:Ne,children:[n.jsx("option",{value:"",children:"Select"}),l.map(ve=>n.jsx("option",{value:ve.categoryName,children:ve.categoryName},ve._id))]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Description"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.catdesc,readOnly:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"PO Number"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:h?.poNumber||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:z||Z,onClick:()=>x(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.docnumber,onChange:ve=>D(pe=>({...pe,docnumber:ve.target.value})),readOnly:!z}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:"Search"})]})})]})})]}),n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-7",children:n.jsx("label",{className:"form-label mb-0",children:"Document_Date"})}),n.jsx("div",{className:"col-12 col-lg-5",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:C.documentDate,readOnly:z,onChange:ve=>D(pe=>({...pe,documentDate:ve.target.value}))})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-6",children:n.jsx("label",{className:"form-label mb-0",children:"Posting_Date"})}),n.jsx("div",{className:"col-12 col-lg-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:C.postingDate,readOnly:z,onChange:ve=>D(pe=>({...pe,postingDate:ve.target.value}))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-4",children:n.jsx("label",{className:"form-label mb-0",children:"Reference"})}),n.jsx("div",{className:"col-12 col-lg-8",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.reference,onChange:ve=>D(pe=>({...pe,reference:ve.target.value})),readOnly:Z})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-3",children:n.jsx("label",{className:"form-label mb-0",children:"Vendor"})}),n.jsx("div",{className:"col-12 col-lg-9",children:n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.vendor,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",disabled:z||Z,onClick:()=>S(!0),children:"Search"})]})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-12 col-lg-5",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-12 col-lg-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:C.location,readOnly:!0})})]})})]})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"S. No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Price"}),z&&!Z&&n.jsx("th",{children:"Cancel"})]})}),n.jsx("tbody",{children:(h?.items?.length?h.items:[{}]).map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:pe+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:ve.materialId||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{k(pe),Q(!0)},disabled:z||Z,children:""})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:ve.description||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:ve.quantity||"",onChange:De=>ue(pe,"quantity",De.target.value),readOnly:z||Z})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:ve.baseUnit||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control",value:ve.deliveryDate||e,onChange:De=>ue(pe,"deliveryDate",De.target.value),readOnly:z||Z})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:ve.lotNo||"",onChange:De=>ue(pe,"lotNo",De.target.value),readOnly:z||Z})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:ve.price||"",readOnly:!0})}),z&&!Z&&n.jsx("td",{children:n.jsx("input",{type:"checkbox",onChange:De=>ue(pe,"cancel",De.target.checked)})})]},pe))})]})})})]}),n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),y&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:K,onChange:ve=>U(ve.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vendorId",children:"Vendor ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${K}`,value:Y,onChange:ve=>q(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>F(!0),children:"View All"}),(Y||J)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{q(""),F(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:je.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:je.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ve.vendorId})}),n.jsx("td",{children:ve.name1}),n.jsx("td",{children:ve.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ce(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:Y?`No vendors found for "${Y}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>x(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:ve=>L(ve.target.value),children:[n.jsx("option",{value:"poNumber",children:"PO Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${I}`,value:E,onChange:ve=>A(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>O(!0),children:"View All"}),(E||P)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{A(""),O(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ye.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ye.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:ve.poNumber})}),n.jsx("td",{children:ve.vendor}),n.jsx("td",{children:ve.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ne(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:E?`No purchase orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>x(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),X&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Q(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ie,onChange:ve=>M(ve.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ie}`,value:V,onChange:ve=>W(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>re(!0),children:"View All"}),(V||ee)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{W(""),re(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Me.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Me.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ve.materialId})}),n.jsx("td",{children:ve.description}),n.jsx("td",{children:ve.baseUnit}),n.jsx("td",{children:ve.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ae(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:V?`No materials found for "${V}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),g&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Select Goods Receipt"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ft,onChange:ve=>Be(ve.target.value),children:[n.jsx("option",{value:"docnumber",children:"GR Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"location",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ft}`,value:dt,onChange:ve=>Tt(ve.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>qt(!0),children:"View All"}),(dt||At)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{Tt(""),qt(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"GR Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:xe.map((ve,pe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ve.docnumber})}),n.jsx("td",{children:ve.vendor}),n.jsx("td",{children:ve.location}),n.jsx("td",{children:ve.reference}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>he(ve),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:dt?`No receipts found for "${dt}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const Pb=10,r7=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(null),[s,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(1),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");j.useEffect(()=>{x()},[]);const x=async()=>{try{const A=await Oe.get("/api/goodsreceipt",{params:{companyId:f,financialYear:p}});t(A.data)}catch(A){console.error("Error fetching Goods Receipts:",A)}},g=A=>{const I=window.open("","","height=600,width=900");I.document.write("<html><head><title>Print Goods Receipt</title>"),I.document.write("<style>table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; } h4 { margin-bottom: 10px; }</style>"),I.document.write("</head><body>"),I.document.write("<h4>Goods Receipt</h4>"),I.document.write('<table style="margin-bottom:10px;">'),I.document.write("<tbody>"),I.document.write(`<tr><td><strong>Document No:</strong></td><td>${A.docnumber}</td></tr>`),I.document.write(`<tr><td><strong>Document Date:</strong></td><td>${A.documentDate}</td></tr>`),I.document.write(`<tr><td><strong>Posting Date:</strong></td><td>${A.postingDate}</td></tr>`),I.document.write(`<tr><td><strong>Reference:</strong></td><td>${A.reference}</td></tr>`),I.document.write(`<tr><td><strong>Vendor:</strong></td><td>${A.vendor}</td></tr>`),I.document.write(`<tr><td><strong>Location:</strong></td><td>${A.location}</td></tr>`),I.document.write(`<tr><td><strong>Receipt Date:</strong></td><td>${A.receiptDate}</td></tr>`),I.document.write("</tbody></table>"),I.document.write("<h5>Items</h5>"),I.document.write('<table style="width:100%;">'),I.document.write("<thead><tr>"),I.document.write("<th>#</th>"),I.document.write("<th>Material ID</th>"),I.document.write("<th>Description</th>"),I.document.write("<th>Quantity</th>"),I.document.write("<th>Base Unit</th>"),I.document.write("<th>Delivery Date</th>"),I.document.write("<th>Lot No</th>"),I.document.write("<th>Price</th>"),I.document.write("<th>Total</th>"),I.document.write("</tr></thead><tbody>"),A.items&&A.items.length>0?A.items.forEach((L,P)=>{I.document.write("<tr>"),I.document.write(`<td>${P+1}</td>`),I.document.write(`<td>${L.materialId}</td>`),I.document.write(`<td>${L.description}</td>`),I.document.write(`<td>${L.quantity}</td>`),I.document.write(`<td>${L.baseUnit}</td>`),I.document.write(`<td>${L.deliveryDate}</td>`),I.document.write(`<td>${L.lotNo}</td>`),I.document.write(`<td>${L.price}</td>`),I.document.write(`<td>${(L.quantity*L.price).toFixed(2)}</td>`),I.document.write("</tr>")}):I.document.write('<tr><td colspan="9" style="text-align:center;">No items found</td></tr>'),I.document.write("</tbody></table>"),I.document.write("</body></html>"),I.document.close(),I.focus(),I.print(),I.close()},b=A=>{a(A)},y=()=>{a(null)},w=e.filter(A=>{if(o&&(A.postingDate?A.postingDate.slice(0,10):"")<o||c&&(A.postingDate?A.postingDate.slice(0,10):"")>c)return!1;if(s.trim()!==""){const I=s.trim().toLowerCase();if(![A.docnumber,A.reference,A.vendor,A.location].some(O=>O&&O.toLowerCase().includes(I)))return!1}return!0}),k=Math.ceil(w.length/Pb)||1,C=A=>{A<1||A>k||h(A)},D=()=>{i(""),l(""),d(""),h(1)},E=w.slice((u-1)*Pb,u*Pb);return j.useEffect(()=>{u>k&&h(k)},[w,k]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Goods Receipt List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory Report"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Goods Receipt List"})]})})]})}),n.jsx("div",{className:"row",children:n.jsxs("div",{className:"col-sm-12",children:[n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row ",children:[n.jsxs("div",{className:"col-md-3 mb-2",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search (Doc No, Reference, Vendor, Location)...",value:s,onChange:A=>i(A.target.value)})]}),n.jsxs("div",{className:"col-md-3 mb-2",children:[n.jsx("label",{className:"form-label",children:"Posting Date From"}),n.jsx("input",{type:"date",className:"form-control",value:o,onChange:A=>l(A.target.value)})]}),n.jsxs("div",{className:"col-md-3 mb-2",children:[n.jsx("label",{className:"form-label",children:"Posting Date To"}),n.jsx("input",{type:"date",className:"form-control",value:c,onChange:A=>d(A.target.value)})]}),n.jsx("div",{className:"col-md-3 mb-2 d-flex align-items-end",children:n.jsx("button",{className:"btn btn-outline-secondary w-100",onClick:D,children:"Reset"})})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive table-nowrap",children:n.jsxs("table",{className:"table table-sm mb-0 border",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Document No"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Posting Date"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Receipt Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center",children:"No goods receipt records found."})}):E.map((A,I)=>n.jsxs("tr",{children:[n.jsx("td",{children:(u-1)*Pb+I+1}),n.jsx("td",{children:A.docnumber}),n.jsx("td",{children:A.documentDate}),n.jsx("td",{children:A.postingDate}),n.jsx("td",{children:A.reference}),n.jsx("td",{children:A.vendor}),n.jsx("td",{children:A.location}),n.jsx("td",{children:A.receiptDate}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>g(A),children:"Print"}),n.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>b(A),children:"Preview"})]})]},A._id?.$oid||(u-1)*Pb+I))})]})})})]}),k>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>C(u-1),disabled:u===1,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const I=[],L=[];I.push(1);for(let Y=Math.max(2,u-2);Y<=Math.min(k-1,u+2);Y++)I.push(Y);k>1&&I.push(k);const P=[...new Set(I)].sort((Y,q)=>Y-q);let O;for(let Y of P)O&&(Y-O===2?L.push(O+1):Y-O!==1&&L.push("...")),L.push(Y),O=Y;return L.map((Y,q)=>Y==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${q}`):n.jsx("li",{className:`page-item ${u===Y?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>C(Y),children:Y})},Y))})(),n.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>C(u+1),disabled:u===k,children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]})})]}),r&&n.jsx("div",{className:"modal show",tabIndex:"-1",style:{display:"block",background:"rgba(0,0,0,0.3)",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},onClick:y,children:n.jsx("div",{className:"modal-dialog modal-xl",style:{pointerEvents:"auto",marginTop:"5vh"},onClick:A=>A.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Preview - Document No: ",r.docnumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:y})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("table",{className:"table table-borderless mb-3",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Document Date:"})}),n.jsx("td",{children:r.documentDate}),n.jsx("td",{children:n.jsx("strong",{children:"Posting Date:"})}),n.jsx("td",{children:r.postingDate})]}),n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Reference:"})}),n.jsx("td",{children:r.reference}),n.jsx("td",{children:n.jsx("strong",{children:"Vendor:"})}),n.jsx("td",{children:r.vendor})]}),n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Location:"})}),n.jsx("td",{children:r.location}),n.jsx("td",{children:n.jsx("strong",{children:"Receipt Date:"})}),n.jsx("td",{children:r.receiptDate})]})]})}),n.jsx("h6",{children:"Items"}),n.jsxs("table",{className:"table border",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:r.items&&r.items.length>0?r.items.map((A,I)=>n.jsxs("tr",{children:[n.jsx("td",{children:I+1}),n.jsx("td",{children:A.materialId}),n.jsx("td",{children:A.description}),n.jsx("td",{children:A.quantity}),n.jsx("td",{children:A.baseUnit}),n.jsx("td",{children:A.deliveryDate}),n.jsx("td",{children:A.lotNo}),n.jsx("td",{children:A.price}),n.jsx("td",{children:(A.quantity*A.price).toFixed(2)})]},A._id?.$oid||I)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center",children:"No items found"})})})]})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-secondary",onClick:y,children:"Close"})})]})})})]})};function a7(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),[h,f]=j.useState([]),[p,x]=j.useState(!1),[g,b]=j.useState(""),[y,S]=j.useState(!1),[w,k]=j.useState(!1),[C,D]=j.useState(null),[E,A]=j.useState(!1),[I,L]=j.useState("materialId"),[P,O]=j.useState(""),[Y,q]=j.useState([]),K=t.category.trim().toLowerCase()==="display",U=localStorage.getItem("selectedCompanyId"),J=localStorage.getItem("financialYear");j.useEffect(()=>{Oe.get("/api/material",{params:{companyId:U,financialYear:J}}).then(oe=>c(oe.data)).catch(oe=>console.error("Error fetching materials:",oe)),Oe.get("/api/locations",{params:{companyId:U,financialYear:J}}).then(oe=>s(oe.data)),Oe.get("/api/goodsTransferCategory",{params:{companyId:U,financialYear:J}}).then(oe=>o(oe.data)).catch(oe=>console.error("Error fetching categories:",oe))},[]),j.useEffect(()=>{console.log("Categories loaded:",i),i.forEach(oe=>{console.log(`Category: "${oe.categoryName}" (length: ${oe.categoryName.length})`)})},[i]);const F=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsTransfer",{params:{companyId:U,financialYear:J}}).then(oe=>{console.log("Documents fetched:",oe.data),f(oe.data)}).catch(oe=>{console.error("Error fetching documents",oe)})},X=oe=>{const ye=oe.target.value;console.log(`Selected category: "${ye}" (length: ${ye.length})`);let je="",Me=!1;const He=ye.trim().toLowerCase();He==="cancel"?je=`CNL-${Date.now()}`:He==="demo"?je=`DMP-${Date.now()}`:He==="display"&&(Me=!0,console.log("Display category selected - enabling document search"),F());const et=i.find(ft=>ft.categoryName.trim().toLowerCase()===He);console.log("Selected category object:",et),console.log("Document number enabled:",Me),r(ft=>({...ft,category:ye,party:"",docnumber:Me?"":je})),k(Me)},Q=(oe,ye)=>{r(je=>({...je,[oe]:ye}))},ie=oe=>{const ye=oe.target.value;if(r(je=>({...je,docnumber:ye})),ye.length>=2){const je=h.find(Me=>Me.docnumber&&Me.docnumber.toLowerCase().includes(ye.toLowerCase()));je&&V(je)}},M=()=>{w&&h.length===0&&(console.log("Input field clicked - fetching documents"),F())},V=oe=>{console.log("Selected document:",oe),r(ye=>({...ye,docnumber:oe.docnumber||"",docDate:oe.docDate||e,postDate:oe.postDate||e,reference:oe.reference||"",location:oe.location||""})),oe.items&&oe.items.length>0&&u(oe.items),x(!1)},W=(oe,ye,je)=>{const Me=[...d];Me[oe][ye]=je,u(Me)},ee=()=>{u([...d,{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}])},re=async oe=>{oe.preventDefault();const ye={...t,companyId:U,financialYear:J,items:d,date:e};try{await Oe.post("/api/goodsTransfer",ye),alert("Goods Transfer Saved Successfully!"),r({category:"",party:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),u([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),k(!1),f([])}catch(je){alert("Failed to save. See console for error."),console.error(je)}},ne=oe=>{O(oe.target.value);const ye=l.filter(je=>je[I]?.toLowerCase().includes(oe.target.value.toLowerCase()));q(ye)},ce=()=>{q(l)},ae=()=>{O(""),q([])},Z=()=>{A(!1),O(""),q([])},de=oe=>{const ye=[...d];ye[C]={...ye[C],materialId:oe.materialId,description:oe.description,baseUnit:oe.baseUnit,price:oe.price},u(ye),Z()},z=h.filter(oe=>!y&&!g?!1:(oe.docnumber?.toLowerCase()||"").includes(g.toLowerCase())),se=()=>{b(""),S(!0),h.length===0&&F()},Ne=()=>{b(""),S(!1)},ue=oe=>{b(oe.target.value),S(!1)};return n.jsxs("div",{className:"container p-3",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Delivery Challan"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Delivery Challan"})]})})]})}),n.jsxs("form",{onSubmit:re,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:t.category,onChange:X,children:[n.jsx("option",{value:"",children:"Select"}),i.map((oe,ye)=>n.jsx("option",{value:oe.categoryName,children:oe.categoryName},ye))]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Cust/Vendor"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{className:"form-control form-control-sm",value:t.party,onChange:oe=>Q("party",oe.target.value)})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Document No"})}),n.jsx("div",{className:"col-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:t.docnumber,onChange:ie,onClick:M,readOnly:!w,placeholder:w?"Enter document number...":""}),w&&n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{h.length===0&&F(),x(!0)},children:"Search"})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.docDate,onChange:oe=>Q("docDate",oe.target.value)})})]})})]}),n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Posting Date"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.postDate,onChange:oe=>Q("postDate",oe.target.value)})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"REF"})}),n.jsx("div",{className:"col-8",children:n.jsx("input",{className:"form-control form-control-sm",value:t.reference,onChange:oe=>Q("reference",oe.target.value)})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-4",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-8",children:n.jsxs("select",{className:"form-select form-select-sm",value:t.location,onChange:oe=>Q("location",oe.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),a.map(oe=>n.jsx("option",{value:oe.name||oe.locationName||oe._id,children:oe.name||oe.locationName||oe._id},oe._id||oe.id||oe.name))]})})]})})]})]}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Text"})]})}),n.jsx("tbody",{children:d.map((oe,ye)=>n.jsxs("tr",{children:[n.jsx("td",{children:ye+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:oe.materialId,readOnly:!0}),!K&&n.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{D(ye),A(!0)},children:""})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control",value:oe.description,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:oe.quantity,onChange:K?void 0:je=>W(ye,"quantity",je.target.value),readOnly:K,disabled:K})}),n.jsx("td",{children:n.jsx("input",{className:"form-control",value:oe.baseUnit,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${K?"bg-light":""}`,type:"date",value:oe.deliveryDate,onChange:K?void 0:je=>W(ye,"deliveryDate",je.target.value),readOnly:K,disabled:K})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:oe.lotNo,onChange:K?void 0:je=>W(ye,"lotNo",je.target.value),readOnly:K,disabled:K})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:oe.price,onChange:K?void 0:je=>W(ye,"price",je.target.value),readOnly:K,disabled:K})}),n.jsx("td",{children:n.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:oe.text,onChange:K?void 0:je=>W(ye,"text",je.target.value),readOnly:K,disabled:K})})]},ye))})]})}),!K&&n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary mb-2 mt-2",onClick:ee,children:"+ Add Row"})]})]}),!K&&n.jsx("div",{className:"text-end",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),E&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Z})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:oe=>L(oe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${I}`,value:P,onChange:ne})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:ce,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Y.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ae,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Y.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Y.map((oe,ye)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:oe.materialId})}),n.jsx("td",{children:oe.description}),n.jsx("td",{children:oe.baseUnit}),n.jsx("td",{children:oe.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(oe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ye))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:P?`No materials found for "${P}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:Z,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>x(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:n.jsx("option",{value:"docnumber",children:"Document Number"})})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:g,onChange:ue})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:se,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(g||y)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ne,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:z.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Document Number"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:z.map((oe,ye)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:oe.docnumber})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:oe.category})}),n.jsx("td",{children:oe.location}),n.jsx("td",{children:oe.docDate}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>V(oe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ye))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:g?`No documents found for "${g}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>x(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function n7(){const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(""),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=j.useState([]),u=e.filter(h=>{const f=h.description.toLowerCase().includes(r.toLowerCase())||h.materialId.toLowerCase().includes(r.toLowerCase());console.log("matchesSearch",s);const p=s?h.categoryId?._id===s:!0;return f&&p});return j.useEffect(()=>{(async()=>{try{const p=await Oe.get("/api/category",{params:{companyId:o}});d(p.data),console.log("Categories fetched:",p.data)}catch(p){console.error("Failed to fetch categories:",p)}})(),(async()=>{try{console.log("Fetching stock for companyId:",o,"and financialYear:",l);const p=await Oe.get("/api/stock/data",{params:{companyId:o,financialYear:l}});console.log("Stock data fetched:",p.data),t(p.data),console.log("Stock data fetched:",p.data)}catch(p){console.error("Failed to fetch stock:",p)}})()},[]),n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Stock Inventory"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Stock Inventory"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",className:"form-control",placeholder:" Search by Description or Material No",value:r,onChange:h=>a(h.target.value)})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{className:"form-select",value:s,onChange:h=>i(h.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),c.map(h=>n.jsx("option",{value:h._id,children:h.categoryName},h._id))]})})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-hover table-sm align-middle",children:[n.jsx("thead",{className:"table-primary text-center",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Lot Number"}),n.jsx("th",{children:"Updated At"})]})}),n.jsx("tbody",{children:u.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"10",className:"text-center",children:"No stock found."})}):u.map((h,f)=>n.jsxs("tr",{children:[n.jsx("td",{className:"text-center",children:f+1}),n.jsx("td",{children:h.materialId||h.matno}),n.jsx("td",{children:h.description||h.matdesc}),n.jsx("td",{children:h.categoryId?.categoryName}),n.jsx("td",{className:"text-center",children:h.baseUnit||h.uom}),n.jsx("td",{className:"text-end",children:h.quantityAvailable??h.quantity}),n.jsx("td",{className:"text-center",children:n.jsx("span",{className:`badge ${(h.status||(h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="In Stock"?"bg-success":(h.status||(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="Low Stock"?"bg-warning text-dark":"bg-danger"}`,children:h.status||((h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")})}),n.jsx("td",{children:h.location||"-"}),n.jsx("td",{children:h.lotNumber||"-"}),n.jsx("td",{children:h.updatedAt?new Date(h.updatedAt).toLocaleString():"-"})]},f))})]})})})]})]})}const ZE=10,pTe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(1),[o,l]=j.useState(!0),[c,d]=j.useState(null),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),j.useEffect(()=>{f()},[]);const f=async()=>{try{const k=(await Oe.get("/api/invoiceform",{params:{companyId:u,financialYear:h}})).data.sort((C,D)=>new Date(D.createdAt)-new Date(C.createdAt));t(k),d(null)}catch(w){d("Failed to fetch invoices"),console.error(w)}finally{l(!1)}},p=w=>{a(w.target.value),i(1)},x=j.useMemo(()=>r?e.filter(w=>[w.docnumber,w.vendor,w.location,w.invoiceRef,w.reference].join(" ").toLowerCase().includes(r.toLowerCase())):e,[r,e]),g=Math.ceil(x.length/ZE),b=j.useMemo(()=>{const w=(s-1)*ZE;return x.slice(w,w+ZE)},[x,s]),y=w=>{w<1||w>g||i(w)},S=w=>{const k=`
    <html>
      <head>
        <title>Invoice - ${w.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Invoice Document</h2>
        <p><strong>Document No:</strong> ${w.docnumber}</p>
        <p><strong>Vendor:</strong> ${w.vendor}</p>
        <p><strong>Location:</strong> ${w.location}</p>
        <p><strong>Reference:</strong> ${w.reference||"-"}</p>
        <p><strong>Invoice Ref:</strong> ${w.invoiceRef||"-"}</p>
        <p><strong>Date:</strong> ${new Date(w.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId||"DEMO"}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>${parseFloat(D.price).toFixed(2)}</td>
                <td>${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${w.totalAmount?.toFixed(2)||"-"}</p>
          <p>Discount: ${w.discount?.toFixed(2)||"0.00"}</p>
          <p>Net Amount: ${w.netAmount?.toFixed(2)||"-"}</p>
          <p>CGST: ${w.cgst}</p>
          <p>SGST: ${w.sgst}</p>
          <p>IGST: ${w.igst}</p>
          <p><strong>Final Total: ${w.finalTotal?.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,C=window.open("","_blank");C.document.write(k),C.document.close(),C.focus(),C.print()};return o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):c?n.jsx("div",{className:"alert alert-danger",children:c}):n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Invoice List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex justify-content-between ",children:[n.jsx("h5",{}),n.jsx("input",{type:"text",value:r,onChange:p,placeholder:"Search invoices...",className:"form-control w-25"})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Doc No"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Invoice Ref"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Final Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:b.map((w,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:k+1}),n.jsx("td",{children:w.docnumber}),n.jsx("td",{children:w.vendor}),n.jsx("td",{children:w.location}),n.jsx("td",{children:w.reference||"-"}),n.jsx("td",{children:w.invoiceRef||"-"}),n.jsx("td",{children:new Date(w.postingDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:["",w.finalTotal]}),n.jsx("td",{children:n.jsx("button",{onClick:()=>S(w),className:"btn btn-sm btn-primary",children:"Print"})})]},w._id))})]})})})]}),n.jsx("nav",{className:"d-flex justify-content-end",children:n.jsxs("ul",{className:"pagination pagination-sm",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(s-1),children:""})}),Array.from({length:g},(w,k)=>n.jsx("li",{className:`page-item ${s===k+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),n.jsx("li",{className:`page-item ${s===g?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(s+1),children:""})})]})})]})};function xTe(){const e=new Date().toISOString().split("T")[0],[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([]),[h,f]=j.useState({}),[p,x]=j.useState(0),g=rh(),[b,y]=j.useState(null),[S,w]=j.useState(!1),[k,C]=j.useState(!1),[D,E]=j.useState(null),[A,I]=j.useState("po"),[L,P]=j.useState([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),O=localStorage.getItem("selectedCompanyId"),Y=localStorage.getItem("financialYear"),q=localStorage.getItem("selectedCompanyId"),[K,U]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:new Date(e).toISOString().split("T")[0],postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[J,F]=j.useState(""),[X,Q]=j.useState("poNumber"),[ie,M]=j.useState(!1),[V,W]=j.useState(""),[ee,re]=j.useState("name1"),[ne,ce]=j.useState(!1),[ae,Z]=j.useState(!1),[de,z]=j.useState("materialId"),[se,Ne]=j.useState(""),[ue,oe]=j.useState(!1);j.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:O,financialYear:Y}}).then(Ie=>r(Ie.data)).catch(Ie=>console.error("Error fetching POs:",Ie)),Oe.get("/api/vendors",{params:{companyId:O,financialYear:Y}}).then(Ie=>s(Ie.data)).catch(Ie=>console.error("Error fetching vendors:",Ie)),Oe.get("/api/material",{params:{companyId:O,financialYear:Y}}).then(Ie=>o(Ie.data)).catch(Ie=>console.error("Error fetching materials:",Ie)),Oe.get("/api/invoicecategory",{params:{companyId:O}}).then(Ie=>c(Ie.data)).catch(Ie=>console.error("Error fetching categories:",Ie)),Oe.get("/api/tax",{params:{companyId:O,financialYear:Y}}).then(Ie=>u(Ie.data)).catch(Ie=>console.error("Error fetching tax:",Ie))},[]);const ye=Ie=>{console.log("Selected PO:",Ie),y(Ie),U(Xe=>({...Xe,vendor:Ie.vendor||"",location:Ie.deliveryLocation||"",priceUnit:Ie.priceUnit||""})),w(!1)},je=Ie=>{U(Xe=>({...Xe,vendor:Ie.name1})),C(!1)},Me=Ie=>{if(D!==null&&b?.items){const Xe=[...b.items];Xe[D]&&(Xe[D]={...Xe[D],materialId:Ie.materialId,description:Ie.description,baseUnit:Ie.baseUnit,price:Ie.price,priceUnit:Ie.priceUnit||K.priceUnit},y(Ye=>({...Ye,items:Xe})))}Z(!1)},He=Ie=>{const Xe=Ie.target.value,Ye=l.find(lt=>lt.categoryName===Xe);U(lt=>({...lt,category:Xe,catdesc:Ye?.description||""}))},et=(Ie,Xe,Ye)=>{const lt=[...b.items];lt[Ie][Xe]=Ye,y({...b,items:lt})},ft=(Ie,Xe,Ye)=>{const lt=[...L];if(lt[Ie][Xe]=Ye,Xe==="quantity"||Xe==="price"){const Mt=parseFloat(lt[Ie].quantity||0),Ae=parseFloat(lt[Ie].price||0);lt[Ie].amount=Mt*Ae}P(lt)},Be=()=>{P([...L,{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}])},dt=Ie=>{if(L.length>1){const Xe=L.filter((Ye,lt)=>lt!==Ie);P(Xe)}},Tt=Ie=>{I(Ie),Ie==="misc"&&(y(null),U(Xe=>({...Xe,vendor:"",location:""})))},At=async Ie=>{if(Ie.preventDefault(),A==="po"&&!b)return alert("Please select a Purchase Order.");if(A==="misc"&&!K.vendor)return alert("Please select a vendor for miscellaneous invoice.");const Xe={...K,invoiceType:A,purchaseOrderId:A==="po"?b._id:null,items:A==="po"?b.items:L,receiptDate:e,taxCode:h.taxCode,taxName:h.taxName,cgst:Qe,sgst:Ue,igst:qe,companyId:q,financialYear:Y,totalAmount:ve,discount:p,netAmount:De,finalTotal:mt,balance:mt};try{await Oe.post("/api/invoiceform",Xe),alert("Invoice saved successfully!"),g("/InvoiceList"),U({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",priceUnit:"",balance:""}),y(null),f({}),x(0),P([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),I("po")}catch(Ye){console.error("Error saving invoice:",Ye),alert("Failed to save invoice")}},qt=t.filter(Ie=>!ie&&!J?!1:(Ie[X]?.toLowerCase()||"").includes(J.toLowerCase())),xe=a.filter(Ie=>!ne&&!V?!1:(Ie[ee]?.toLowerCase()||"").includes(V.toLowerCase())),he=i.filter(Ie=>!ue&&!se?!1:(Ie[de]?.toLowerCase()||"").includes(se.toLowerCase())),ve=A==="po"?b?.items?.reduce((Ie,Xe)=>Ie+parseFloat(Xe.quantity||0)*parseFloat(Xe.price||0),0)||0:L.reduce((Ie,Xe)=>Ie+parseFloat(Xe.amount||0),0)||0,pe=parseFloat(p||0),De=ve-pe,Ke=parseFloat(h.cgst||0),Nt=parseFloat(h.sgst||0),Je=parseFloat(h.igst||0),Qe=parseFloat((Ke/100*De).toFixed(2)),Ue=parseFloat((Nt/100*De).toFixed(2)),qe=parseFloat((Je/100*De).toFixed(2)),mt=parseFloat((De+Qe+Ue+qe).toFixed(2));return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Vendor Invoice Creation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice Creation"})]})})]})}),n.jsxs("form",{onSubmit:At,children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("div",{className:"row mb-3",children:n.jsxs("div",{className:"col-md-12",children:[n.jsx("label",{className:"form-label",children:"Invoice Type:"}),n.jsxs("div",{className:"d-flex gap-3",children:[n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"poInvoice",value:"po",checked:A==="po",onChange:Ie=>Tt(Ie.target.value)}),n.jsx("label",{className:"form-check-label",htmlFor:"poInvoice",children:"Purchase Order Invoice"})]}),n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"miscInvoice",value:"misc",checked:A==="misc",onChange:Ie=>Tt(Ie.target.value)}),n.jsx("label",{className:"form-check-label",htmlFor:"miscInvoice",children:"Miscellaneous Invoice"})]})]})]})}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row mb-2",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Category:"})}),n.jsx("div",{className:"col-md-8",children:n.jsxs("select",{className:"form-select",value:K.category,onChange:He,children:[n.jsx("option",{value:"",children:"Select"}),l.map(Ie=>n.jsx("option",{value:Ie.categoryName,children:Ie.categoryName},Ie._id))]})})]})}),A==="po"&&n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"PO Number:"})}),n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",placeholder:"Enter PO Number",className:"form-control form-control-sm",value:b?.poNumber||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>w(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("label",{className:"form-label",children:"Vendor :"})}),n.jsx("div",{className:"col-md-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Vendor Name",value:K.vendor,readOnly:A==="po"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>C(!0),children:n.jsx("i",{className:"fas fa-search"})})]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Tax Code :"})}),n.jsx("div",{className:"col-md-8",children:n.jsxs("select",{className:"form-select",value:h.taxCode||"",onChange:Ie=>{const Xe=d.find(Ye=>Ye.taxCode===Ie.target.value);f(Xe||{})},children:[n.jsx("option",{value:"",children:"Select"}),d.map(Ie=>n.jsxs("option",{value:Ie.taxCode,children:[Ie.taxCode," - ",Ie.taxName]},Ie._id))]})})]})})," ",n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Tax Name :"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Tax Name",value:h.taxName||"",onChange:Ie=>f(Xe=>({...Xe,taxName:Ie.target.value}))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-5",children:n.jsx("label",{className:"form-label",children:"Document Date :"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"date",className:"form-control",value:K.documentDate,onChange:Ie=>U(Xe=>({...Xe,documentDate:Ie.target.value}))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Posting_Date:"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"date",className:"form-control",value:K.postingDate,required:!0,onChange:Ie=>U(Xe=>({...Xe,postingDate:Ie.target.value}))})})]})}),n.jsxs("div",{className:"col-md-3",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("label",{className:"form-label",children:"Reference:"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Reference",value:K.reference,onChange:Ie=>U(Xe=>({...Xe,reference:Ie.target.value}))})})]}),"       "]}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",placeholder:"Enter Location",className:"form-control",value:K.location,onChange:Ie=>U(Xe=>({...Xe,location:Ie.target.value})),readOnly:A==="po"})})]})})," ",n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("label",{className:"form-label",children:"Invoice Ref :"})}),n.jsx("div",{className:"col-md-7",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Invoice Reference",value:K.invoiceRef,onChange:Ie=>U(Xe=>({...Xe,invoiceRef:Ie.target.value}))})})]})})]})]}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:A==="po"?n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"HSN NO"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"PriceUnit"})]})}),n.jsx("tbody",{children:(b?.items?.length?b.items:[{}]).map((Ie,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:Xe+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:Ie.materialId||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{E(Xe),Z(!0)},children:n.jsx("i",{className:"ti ti-search"})})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.description||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.hsnNo||"",onChange:Ye=>et(Xe,"hsnNo",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ie.quantity||"",onChange:Ye=>et(Xe,"quantity",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.baseUnit||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control",value:Ie.deliveryDate,onChange:Ye=>et(Xe,"deliveryDate",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.lotNo||"",onChange:Ye=>et(Xe,"lotNo",Ye.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ie.price||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.priceUnit||"",readOnly:!0})})]},Xe))})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsx("h6",{children:"Miscellaneous Items"}),n.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Be,children:[n.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"HSN NO"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:L.map((Ie,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:Xe+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.description,onChange:Ye=>ft(Xe,"description",Ye.target.value),placeholder:"Enter description"})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.hsnNo,onChange:Ye=>ft(Xe,"hsnNo",Ye.target.value),placeholder:"HSN Code"})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ie.quantity,onChange:Ye=>ft(Xe,"quantity",Ye.target.value),min:"0",step:"0.01"})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Ie.baseUnit,onChange:Ye=>ft(Xe,"baseUnit",Ye.target.value),placeholder:"Unit"})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ie.price,onChange:Ye=>ft(Xe,"price",Ye.target.value),min:"0",step:"0.01"})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Ie.amount.toFixed(2),readOnly:!0})}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>dt(Xe),disabled:L.length===1,children:n.jsx("i",{className:"fas fa-trash"})})})]},Xe))})]})]})}),n.jsx("div",{className:"row justify-content-end mt-3",children:n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"card  p-3",children:[n.jsx("h6",{className:"mb-3",children:"Billing Summary"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-6 mb-2",children:[n.jsx("label",{className:"form-label",children:"Total Amount"}),n.jsx("input",{type:"number",className:"form-control",value:ve.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:"col-6 mb-2",children:[n.jsx("label",{className:"form-label",children:"Discount"}),n.jsx("input",{type:"number",className:"form-control",value:p,onChange:Ie=>x(parseFloat(Ie.target.value)||0)})]}),n.jsxs("div",{className:"col-6 mb-2",children:[n.jsx("label",{className:"form-label",children:"Net Amount"}),n.jsx("input",{type:"number",className:"form-control",value:De.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:"col-6 mb-2",children:[n.jsx("label",{className:"form-label",children:"CGST (%)"}),n.jsx("input",{type:"number",className:"form-control",value:h.cgst||"",onChange:Ie=>f(Xe=>({...Xe,cgst:Ie.target.value}))})]}),n.jsxs("div",{className:"col-6 mb-2",children:[n.jsx("label",{className:"form-label",children:"SGST (%)"}),n.jsx("input",{type:"number",className:"form-control",value:h.sgst||"",onChange:Ie=>f(Xe=>({...Xe,sgst:Ie.target.value}))})]}),n.jsxs("div",{className:"col-6 mb-2",children:[n.jsx("label",{className:"form-label",children:"IGST (%)"}),n.jsx("input",{type:"number",className:"form-control",value:h.igst||"",onChange:Ie=>f(Xe=>({...Xe,igst:Ie.target.value}))})]})]}),n.jsxs("div",{className:"mb-0 fw-bold",children:[n.jsx("label",{className:"form-label",children:"Final Total"}),n.jsx("input",{type:"number",className:"form-control",value:mt.toFixed(2),readOnly:!0})]})]})})})]})]}),n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save Invoice"})})]}),k&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:ee,onChange:Ie=>re(Ie.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vendorId",children:"Vendor ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ee}`,value:V,onChange:Ie=>W(Ie.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>ce(!0),children:"View All"}),(V||ne)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{W(""),ce(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:xe.map((Ie,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ie.vendorId})}),n.jsx("td",{children:Ie.name1}),n.jsx("td",{children:Ie.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>je(Ie),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:V?`No vendors found for "${V}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),A==="po"&&S&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>w(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:X,onChange:Ie=>Q(Ie.target.value),children:[n.jsx("option",{value:"poNumber",children:"PO Number"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${X}`,value:J,onChange:Ie=>F(Ie.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>M(!0),children:"View All"}),(J||ie)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{F(""),M(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qt.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:qt.map((Ie,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Ie.poNumber})}),n.jsx("td",{children:Ie.vendor}),n.jsx("td",{children:Ie.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ye(Ie),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:J?`No purchase orders found for "${J}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>w(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),A==="po"&&ae&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Z(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:de,onChange:Ie=>z(Ie.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${de}`,value:se,onChange:Ie=>Ne(Ie.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>oe(!0),children:"View All"}),(se||ue)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{Ne(""),oe(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:he.map((Ie,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Ie.materialId})}),n.jsx("td",{children:Ie.description}),n.jsx("td",{children:Ie.baseUnit}),n.jsx("td",{children:Ie.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Me(Ie),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:se?`No materials found for "${se}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Z(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function vTe(){const e=new Date().toISOString().split("T")[0];rh();const[t,r]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState({}),[d,u]=j.useState(0),[h,f]=j.useState([]),[p,x]=j.useState(null),[g,b]=j.useState(!1),[y,S]=j.useState(!1),[w,k]=j.useState(null),[C,D]=j.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[E,A]=j.useState(""),[I,L]=j.useState("soNumber"),[P,O]=j.useState(!1),[Y,q]=j.useState([]),[K,U]=j.useState("name1"),[J,F]=j.useState(""),[X,Q]=j.useState(!1),[ie,M]=j.useState(!1),[V,W]=j.useState("materialId"),[ee,re]=j.useState(""),[ne,ce]=j.useState(!1),ae=localStorage.getItem("selectedCompanyId"),Z=localStorage.getItem("financialYear"),de=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:ae,financialYear:Z}}).then(Je=>f(Je.data)).catch(Je=>console.error("Error fetching sales orders",Je)),Oe.get("/api/customers",{params:{companyId:ae,financialYear:Z}}).then(Je=>q(Je.data)).catch(Je=>console.error("Error fetching customers",Je)),Oe.get("/api/material",{params:{companyId:ae,financialYear:Z}}).then(Je=>r(Je.data)).catch(Je=>console.error("Error fetching materials:",Je)),Oe.get("/api/billingcategory",{params:{companyId:ae}}).then(Je=>s(Je.data)).catch(Je=>console.error("Error fetching categories:",Je)),Oe.get("/api/tax",{params:{companyId:ae,financialYear:Z}}).then(Je=>o(Je.data)).catch(Je=>console.error("Error fetching tax:",Je))},[]);const z=Je=>{x(Je),D(Qe=>({...Qe,customer:Je.sales||Je.customer||Je.customerName,location:Je.deliveryLocation||""})),b(!1)},se=Je=>{D(Qe=>({...Qe,customer:Je.name1})),S(!1)},Ne=Je=>{if(w!==null&&p?.items){const Qe=[...p.items];Qe[w]&&(Qe[w]={...Qe[w],materialId:Je.materialId,description:Je.description,baseUnit:Je.baseUnit,price:Je.price,priceUnit:Je.priceUnit||C.priceUnit},x(Ue=>({...Ue,items:Qe})))}M(!1)},ue=Je=>{const Qe=Je.target.value,Ue=a.find(qe=>qe.categoryName===Qe);D(qe=>({...qe,category:Qe,catdesc:Ue?.description||""}))},oe=(Je,Qe,Ue)=>{const qe=[...p.items];qe[Je][Qe]=Ue,x({...p,items:qe})},ye=p?.items?.reduce((Je,Qe)=>Je+parseFloat(Qe.quantity||0)*parseFloat(Qe.price||0),0)||0,je=parseFloat(d||0),Me=ye-je,He=parseFloat(l.cgst||0),et=parseFloat(l.sgst||0),ft=parseFloat(l.igst||0),Be=He/100*Me,dt=et/100*Me,Tt=ft/100*Me,At=parseFloat((Me+Be+dt+Tt).toFixed(2)),qt=async Je=>{if(Je.preventDefault(),!p)return alert("Please select a Purchase Order.");const Qe={...C,salesOrderId:p._id,items:p.items,receiptDate:e,taxCode:l.taxCode,taxName:l.taxName,companyId:de,financialYear:Z,cgst:Be,sgst:dt,igst:Tt,totalAmount:ye,discount:d,netAmount:Me,finalTotal:At,balance:At};console.log(Qe.finalTotal);try{await Oe.post("/api/billingform",Qe),alert("billing saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",priceUnit:"",balance:""}),x(null),c({}),u(0)}catch(Ue){console.error("Error saving biiling:",Ue),alert("Failed to save billing")}},xe=h.filter(Je=>!P&&!E?!1:(Je[I]?.toLowerCase()||"").includes(E.toLowerCase())),he=Y.filter(Je=>!X&&!J?!1:(Je[K]?.toLowerCase()||"").includes(J.toLowerCase())),ve=t.filter(Je=>!ne&&!ee?!1:(Je[V]?.toLowerCase()||"").includes(ee.toLowerCase())),pe=()=>{A(""),O(!0)},De=()=>{A(""),O(!1)},Ke=()=>{F(""),Q(!0)},Nt=()=>{F(""),Q(!1)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Invoice Creation"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice Creation"})]})})]})}),n.jsxs("form",{onSubmit:qt,children:[n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("div",{className:"row ",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Category :"}),n.jsxs("select",{className:"form-select",value:C.category,onChange:ue,children:[n.jsx("option",{value:"",children:"Select"}),a.map(Je=>n.jsx("option",{value:Je.categoryName,children:Je.categoryName},Je._id))]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Sales Order :"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",name:"so",placeholder:"Search Sales Order",value:p?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Customer :"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search Customer",value:C.customer,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>S(!0),children:n.jsx("i",{className:"fas fa-search"})})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Tax Code :"}),n.jsxs("select",{className:"form-select",value:l.taxCode||"",onChange:Je=>{const Qe=i.find(Ue=>Ue.taxCode===Je.target.value);c(Qe||{})},children:[n.jsx("option",{value:"",children:"Select"}),i.map(Je=>n.jsxs("option",{value:Je.taxCode,children:[Je.taxCode," - ",Je.taxName]},Je._id))]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"180px"},children:"Document Date :"}),n.jsx("input",{type:"date",className:"form-control",value:C.documentDate,onChange:Je=>D(Qe=>({...Qe,documentDate:Je.target.value}))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"180px"},children:"Posting Date:"}),n.jsx("input",{type:"date",className:"form-control",value:C.postingDate,onChange:Je=>D(Qe=>({...Qe,postingDate:Je.target.value}))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Reference :"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Reference",value:C.reference,onChange:Je=>D(Qe=>({...Qe,reference:Je.target.value}))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Location :"}),n.jsx("input",{type:"text",placeholder:"Location",className:"form-control",value:C.location,readOnly:!0})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label",style:{width:"120px"},children:"Billing Ref :"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Billing Reference",value:C.BillingRef,onChange:Je=>D(Qe=>({...Qe,BillingRef:Je.target.value}))})]})})]})})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"HSN NO"}),n.jsx("th",{children:"QTY"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Del Date"}),n.jsx("th",{children:"LOT No"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"PriceUnit"})]})}),n.jsx("tbody",{children:(p?.items?.length?p.items:[{}]).map((Je,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{children:Qe+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:Je.materialId||"",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{k(Qe),M(!0)},children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.description||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.hsnNo||"",onChange:Ue=>oe(Qe,"hsnNo",Ue.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Je.quantity||"",onChange:Ue=>oe(Qe,"quantity",Ue.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.baseUnit||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control",value:Je.deliveryDate,onChange:Ue=>oe(Qe,"deliveryDate",Ue.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.lotNo||"",onChange:Ue=>oe(Qe,"lotNo",Ue.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control",value:Je.price||"",readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:Je.priceUnit||"",readOnly:!0})})]},Qe))})]})}),n.jsx("div",{className:"row justify-content-end mt-3",children:n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"card p-3",children:[n.jsx("h6",{className:"mb-3",children:"Billing Summary"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6 mb-2",children:[n.jsx("label",{children:"Total Amount"}),n.jsx("input",{type:"number",className:"form-control",value:ye.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:" col-xl-6 mb-2",children:[n.jsx("label",{children:"Discount"}),n.jsx("input",{type:"number",className:"form-control",value:d,onChange:Je=>u(parseFloat(Je.target.value)||0)})]}),n.jsxs("div",{className:" col-xl-6 mb-2",children:[n.jsx("label",{children:"Net Amount"}),n.jsx("input",{type:"number",className:"form-control",value:Me.toFixed(2),readOnly:!0})]}),n.jsxs("div",{className:" col-xl-6 mb-2",children:[n.jsx("label",{children:"CGST (%)"}),n.jsx("input",{type:"number",className:"form-control",value:l.cgst||"",onChange:Je=>c(Qe=>({...Qe,cgst:Je.target.value}))})]}),n.jsxs("div",{className:"col-xl-6 mb-2",children:[n.jsx("label",{children:"SGST (%)"}),n.jsx("input",{type:"number",className:"form-control",value:l.sgst||"",onChange:Je=>c(Qe=>({...Qe,sgst:Je.target.value}))})]}),n.jsxs("div",{className:"col-xl-6 mb-2",children:[n.jsx("label",{children:"IGST (%)"}),n.jsx("input",{type:"number",className:"form-control",value:l.igst||"",onChange:Je=>c(Qe=>({...Qe,igst:Je.target.value}))})]})]}),n.jsxs("div",{className:"mb-0 fw-bold",children:[n.jsx("label",{children:"Final Total"}),n.jsx("input",{type:"number",className:"form-control",value:At,readOnly:!0})]})]})})})]})]}),n.jsx("div",{className:"text-end mt-3",children:n.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),g&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:I,onChange:Je=>L(Je.target.value),children:[n.jsx("option",{value:"soNumber",children:"SO Number"}),n.jsx("option",{value:"sales",children:"Customer"}),n.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${I}`,value:E,onChange:Je=>A(Je.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:pe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(E||P)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:De,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"SO Number"}),n.jsx("th",{children:"Sales"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:xe.map((Je,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:Je.soNumber})}),n.jsx("td",{children:Je.sales||Je.customer||Je.customerName}),n.jsx("td",{children:Je.deliveryLocation}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>z(Je),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Qe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:E?`No sales orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),y&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:K,onChange:Je=>U(Je.target.value),children:[n.jsx("option",{value:"name1",children:"Customer Name"}),n.jsx("option",{value:"customerId",children:"Customer ID"}),n.jsx("option",{value:"city",children:"City"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${K}`,value:J,onChange:Je=>F(Je.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ke,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(J||X)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Nt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:he.map((Je,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Je.customerId})}),n.jsx("td",{children:Je.name1}),n.jsx("td",{children:Je.city}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>se(Je),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Qe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:J?`No customers found for "${J}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),ie&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>M(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:V,onChange:Je=>W(Je.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"}),n.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${V}`,value:ee,onChange:Je=>re(Je.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("button",{className:"btn btn-info",onClick:()=>ce(!0),children:"View All"}),(ee||ne)&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{re(""),ce(!1)},children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ve.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:ve.map((Je,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:Je.materialId})}),n.jsx("td",{children:Je.description}),n.jsx("td",{children:Je.baseUnit}),n.jsx("td",{children:Je.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(Je),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Qe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:ee?`No materials found for "${ee}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const eD=10,gTe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(1),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),j.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await Oe.get("/api/billingform",{params:{companyId:u,financialYear:h}});t(w.data),i(null)}catch(w){i("Failed to fetch billing data"),console.error(w)}finally{a(!1)}},p=w=>{l(w.target.value),d(1)},x=j.useMemo(()=>o?e.filter(w=>[w.docnumber,w.customer,w.reference,w.BillingRef,w.location].join(" ").toLowerCase().includes(o.toLowerCase())):e,[o,e]),g=Math.ceil(x.length/eD),b=j.useMemo(()=>{const w=(c-1)*eD;return x.slice(w,w+eD)},[x,c]),y=w=>{w<1||w>g||d(w)},S=w=>{const k=`
    <html>
      <head>
        <title>Billing - ${w.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Billing Document</h2>
        <p><strong>Document No:</strong> ${w.docnumber}</p>
        <p><strong>Customer:</strong> ${w.customer}</p>
        <p><strong>Location:</strong> ${w.location}</p>
        <p><strong>Reference:</strong> ${w.reference}</p>
        <p><strong>Invoice Ref:</strong> ${w.BillingRef}</p>
        <p><strong>Date:</strong> ${new Date(w.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>${parseFloat(D.price).toFixed(2)}</td>
                <td>${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${w.totalAmount.toFixed(2)}</p>
          <p>Discount: ${w.discount.toFixed(2)}</p>
          <p>Net Amount: ${w.netAmount.toFixed(2)}</p>
          <p>CGST: ${w.cgst}</p>
          <p>SGST: ${w.sgst}</p>
          <p>IGST: ${w.igst}</p>
          <p><strong>Final Total: ${w.finalTotal.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,C=window.open("","_blank");C.document.write(k),C.document.close(),C.focus(),C.print()};return r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):s?n.jsx("div",{className:"alert alert-danger",children:s}):n.jsxs("div",{className:"content mt-4",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Customer Invoice List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),n.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("h5",{}),n.jsx("input",{type:"text",value:o,onChange:p,placeholder:"Search billing...",className:"form-control w-25"})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item No"}),n.jsx("th",{children:"Doc No"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Ref"}),n.jsx("th",{children:"BillingRef"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Final Total"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:b.map((w,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:k+1}),n.jsx("td",{children:w.docnumber}),n.jsx("td",{children:w.customer}),n.jsx("td",{children:w.location}),n.jsx("td",{children:w.reference}),n.jsx("td",{children:w.BillingRef}),n.jsx("td",{children:new Date(w.postingDate).toLocaleDateString("en-IN")}),n.jsxs("td",{children:["",w.finalTotal]}),n.jsx("td",{children:n.jsx("button",{onClick:()=>S(w),className:"btn btn-sm btn-primary",children:"Print"})})]},w._id))})]})})})]}),n.jsx("nav",{className:"d-flex justify-content-end",children:n.jsxs("ul",{className:"pagination pagination-sm",children:[n.jsx("li",{className:`page-item ${c===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(c-1),children:""})}),Array.from({length:g},(w,k)=>n.jsx("li",{className:`page-item ${c===k+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),n.jsx("li",{className:`page-item ${c===g?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>y(c+1),children:""})})]})})]})},s7={productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",taxRate:""};function bTe(){const[e,t]=j.useState("Outward"),[r,a]=j.useState({type:"",number:"",date:""}),[s,i]=j.useState({name:"",gstin:"",address:"",state:""}),[o,l]=j.useState({name:"",gstin:"",address:"",state:""}),[c,d]=j.useState([{...s7}]),[u,h]=j.useState({mode:"",transporterId:"",vehicleNo:"",distance:""}),[f,p]=j.useState(!1),[x,g]=j.useState([]);j.useEffect(()=>{const C=JSON.parse(localStorage.getItem("invoices"))||[];g(C)},[]);const b=(C,D,E)=>{const A=[...c];A[C][D]=E,d(A)},y=()=>d([...c,{...s7}]),S=C=>d(c.filter((D,E)=>E!==C)),w=C=>{C.preventDefault(),console.log("e-Way Bill Data:",{transactionType:e,document:r,consignor:s,consignee:o,items:c,transport:u}),alert("e-Way Bill data logged to console.")},k=C=>{a({type:C.category,number:C.docnumber,date:C.docdate}),i({name:"Your Company",gstin:"",address:"",state:""}),l({name:C.customer,gstin:"",address:C.location,state:""});const D=C.items.map(E=>({productName:E.matdesc,hsnCode:"",quantity:E.matqty,unit:E.unit,taxableValue:E.price*E.matqty,taxRate:18}));d(D),p(!1)};return n.jsxs("div",{className:"content",children:[n.jsx("h3",{className:"mb-4",children:"e-Way Bill Entry"}),n.jsx("button",{className:"btn btn-outline-primary mb-3",onClick:()=>p(!0),children:"Search Billing"}),n.jsxs("form",{onSubmit:w,children:[n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{className:"col-sm-3 col-form-label",children:"Transaction Type"}),n.jsxs("div",{className:"col-sm-9 d-flex align-items-center",children:[n.jsxs("div",{className:"form-check me-3",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"outward",checked:e==="Outward",onChange:()=>t("Outward")}),n.jsx("label",{className:"form-check-label",htmlFor:"outward",children:"Outward"})]}),n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"inward",checked:e==="Inward",onChange:()=>t("Inward")}),n.jsx("label",{className:"form-check-label",htmlFor:"inward",children:"Inward"})]})]})]}),n.jsx("h5",{children:"Document Details"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsx("label",{htmlFor:"documentType",className:"col-sm-3 col-form-label",children:"Document Type"}),n.jsx("input",{type:"text",className:"form-control",id:"documentType",placeholder:"Invoice, Bill of Supply, etc.",value:r.type,onChange:C=>a({...r,type:C.target.value}),required:!0})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsx("label",{htmlFor:"documentNumber",className:"col-sm-3 col-form-label",children:"Document Number"}),n.jsx("input",{type:"text",className:"form-control",id:"documentNumber",value:r.number,onChange:C=>a({...r,number:C.target.value}),required:!0})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsx("label",{htmlFor:"documentDate",className:"col-sm-3 col-form-label",children:"Document Date"}),n.jsx("input",{type:"date",className:"form-control",id:"documentDate",value:r.date,onChange:C=>a({...r,date:C.target.value}),required:!0})]})]}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-5",children:[n.jsx("h5",{children:"Consignor (From)"}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consignorName",className:"col-sm-3 col-form-label",children:"Name"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorName",value:s.name,onChange:C=>i({...s,name:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consignorGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:s.gstin,onChange:C=>i({...s,gstin:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consignorAddress",className:"col-sm-3 col-form-label",children:"Address"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorAddress",value:s.address,onChange:C=>i({...s,address:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-4 row",children:[n.jsx("label",{htmlFor:"consignorState",className:"col-sm-3 col-form-label",children:"State"}),n.jsx("input",{type:"text",className:"form-control",id:"consignorState",placeholder:"State name or code",value:s.state,onChange:C=>i({...s,state:C.target.value}),required:!0})]})]}),n.jsxs("div",{className:"col-xl-5",children:[n.jsx("h5",{children:"Consignee (To)"}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consigneeName",className:"col-sm-3 col-form-label",children:"Name"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeName",value:o.name,onChange:C=>l({...o,name:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consigneeGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:o.gstin,onChange:C=>l({...o,gstin:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"consigneeAddress",className:"col-sm-3 col-form-label",children:"Address"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeAddress",value:o.address,onChange:C=>l({...o,address:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-4 row",children:[n.jsx("label",{htmlFor:"consigneeState",className:"col-sm-3 col-form-label",children:"State"}),n.jsx("input",{type:"text",className:"form-control",id:"consigneeState",placeholder:"State name or code",value:o.state,onChange:C=>l({...o,state:C.target.value}),required:!0})]})]})]}),n.jsx("h5",{children:"Item Details"}),n.jsxs("table",{className:"table table-bordered table-hover table-sm mb-3",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Product Name"}),n.jsx("th",{children:"HSN Code"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Taxable Value"}),n.jsx("th",{children:"Tax Rate (%)"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:c.map((C,D)=>n.jsxs("tr",{children:[n.jsx("td",{children:D+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:C.productName,onChange:E=>b(D,"productName",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:C.hsnCode,onChange:E=>b(D,"hsnCode",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",className:"form-control",value:C.quantity,onChange:E=>b(D,"quantity",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control",value:C.unit,onChange:E=>b(D,"unit",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",className:"form-control",value:C.taxableValue,onChange:E=>b(D,"taxableValue",E.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",max:"100",className:"form-control",value:C.taxRate,onChange:E=>b(D,"taxRate",E.target.value),required:!0})}),n.jsx("td",{children:c.length>1&&n.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>S(D),children:"Remove"})})]},D))})]}),n.jsx("button",{type:"button",className:"btn btn-secondary mb-4",onClick:y,children:"Add Item"}),n.jsx("h5",{children:"Transport Details"}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"transportMode",className:"col-sm-3 col-form-label",children:"Mode of Transport"}),n.jsx("div",{className:"col-sm-9",children:n.jsxs("select",{id:"transportMode",className:"form-select",value:u.mode,onChange:C=>h({...u,mode:C.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select mode"}),n.jsx("option",{value:"Road",children:"Road"}),n.jsx("option",{value:"Rail",children:"Rail"}),n.jsx("option",{value:"Air",children:"Air"}),n.jsx("option",{value:"Ship",children:"Ship"})]})})]}),n.jsxs("div",{className:"mb-3 row",children:[n.jsx("label",{htmlFor:"transporterId",className:"col-sm-3 col-form-label",children:"Transporter ID / Vehicle No."}),n.jsx("div",{className:"col-sm-9",children:n.jsx("input",{type:"text",id:"transporterId",className:"form-control",placeholder:"Transporter ID or Vehicle Number",value:u.transporterId,onChange:C=>h({...u,transporterId:C.target.value}),required:!0})})]}),n.jsxs("div",{className:"mb-4 row",children:[n.jsx("label",{htmlFor:"distance",className:"col-sm-3 col-form-label",children:"Distance (km)"}),n.jsx("div",{className:"col-sm-9",children:n.jsx("input",{type:"number",min:"0",id:"distance",className:"form-control",value:u.distance,onChange:C=>h({...u,distance:C.target.value}),required:!0})})]}),n.jsx("button",{type:"submit",className:"btn btn-primary mt-4",children:"Generate e-Way Bill"})]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Select Billing Entry"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Doc No"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:x.map((C,D)=>n.jsxs("tr",{children:[n.jsx("td",{children:C.docnumber}),n.jsx("td",{children:C.customer}),n.jsx("td",{children:C.location}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>k(C),children:"Select"})})]},D))})]})})]})})})]})]})}const yTe=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState(!1),[f,p]=j.useState(""),[x,g]=j.useState({}),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(1),[D]=j.useState(5),[E,A]=j.useState(!1),[I,L]=j.useState(!1);j.useEffect(()=>{if(e.length>0){const ye=e.filter(je=>je.roleId.toLowerCase().includes(b.toLowerCase())||je.roleName.toLowerCase().includes(b.toLowerCase()));w(ye),C(1)}},[b,e]);const P={Dashboard:["Dashboard"],"Master Data":["Material Master","Customer Master","Vendor Master","Customer Price List","Vendor Price List","Tax List","Location Master","Process List Master","General Condition Master"],MRP:["MRP"],Category:["Material Category","Customer Category","Vendor Category","Purchase Indent Category","Sales Indent Category","PO Category","Sales RFQ Category","Sales Order Category","Goods Receipt Category","Goods Issue Category","Purchase Contract Category","Billing Category","Invoice Category","Purchase Quotation Category","Sale Contract Category","Transfer Category"],Purchase:["Purchase Indent","Purchase Quotation","Purchase Contract","Purchase Order","Purchase Indent List","Purchase Quotations List","Purchase Contract List","Purchase Order List"],Sales:["Sales Indent","Sales Quotation Form","Sales Contract","Sales Order","Sales Delivery","Sales Indent List","Sales Quotations List","Sales Contract List","Sales Order List","Sales Delivery List"],Inventory:["Material Receipt","Material Receipt List","Material Issue","Material Transfer","Material Issue List","Stock List"],Invoice:["Invoice Form","Invoice List"],Billing:["Billing Form","Billing List"],Accounts:["GST","Ledger","Payments"],CRM:["Contacts List","Leads","Proposals","Sources","Lost Reason","Contact Stage","Industry","Calls"],"Project Management":["Projects","Tasks","Milestones","Time Entries"],Campaigns:["Campaigns","Analytics"],HRMS:["Designation","Department","Employee","LeaveRequests","LeaveRequestManagement","Payroll","AttendanceRegister","AttendanceReports","AttendanceTaking"]},O=Object.keys(P);j.useEffect(()=>{Y(),q()},[]);const Y=async()=>{try{const ye=await Oe.get("/api/roles");t(ye.data)}catch(ye){console.error("Error fetching roles:",ye)}},q=async()=>{try{const ye=await Oe.get("/api/roles/next-id");p(ye.data.nextId),c||a(ye.data.nextId)}catch(ye){console.error("Error fetching next role ID:",ye),p("R-XX")}},K=()=>{const ye={};return/^[A-Za-z\s]+$/.test(s)||(ye.roleName="Role name should contain only alphabets and spaces"),o.length===0&&(ye.permissions="At least one permission is required"),g(ye),Object.keys(ye).length===0},U=async ye=>{if(ye.preventDefault(),!K())return;if(E){g({...x,roleName:"Role name already exists"}),alert("Role name already exists so choose another name");return}const je={roleId:r,roleName:s,permissions:o};try{c?(await Oe.put(`/api/roles/${c}`,je),alert("Role updated successfully!")):(await Oe.post("/api/roles",je),alert("Role created successfully!")),Y(),re(),ce()}catch(Me){console.error("Error saving role:",Me)}},J=ye=>{d(ye._id),a(ye.roleId),i(ye.roleName),l(ye.permissions||[]),ne()},F=ye=>["SuperAdmin","Telecaller","Faculty","Student"].includes(ye),X=async(ye,je)=>{if(F(je)){alert(`The role "${je}" is a system role and cannot be deleted.`);return}if(window.confirm(`Are you sure you want to delete the role "${je}"?`))try{await Oe.delete(`/api/roles/${ye}`),Y()}catch(Me){console.error("Error deleting role:",Me)}},Q=k*D,ie=Q-D,M=S.slice(ie,Q),V=Math.ceil(S.length/D),W=ye=>C(ye),ee=ye=>{y(ye.target.value)},re=()=>{g({}),c?a(""):q(),i(""),l([]),d(null),A(!1)},ne=()=>{c||q(),L(!0)},ce=()=>{h(!1),L(!1),re()},ae=ye=>{const je=[...o],Me=P[ye]||[];if(je.includes(ye)){const He=je.filter(et=>et!==ye&&!Me.includes(et));l(He)}else je.includes(ye)||je.push(ye),Me.forEach(He=>{je.includes(He)||je.push(He)}),l(je);je.length>0&&x.permissions&&g({...x,permissions:null})},Z=(ye,je)=>{const Me=[...o];if(Me.includes(je)){const He=Me.indexOf(je);if(He>-1&&Me.splice(He,1),!(P[ye]||[]).some(Be=>Me.includes(Be))&&Me.includes(ye)){const Be=Me.indexOf(ye);Be>-1&&Me.splice(Be,1)}}else Me.includes(ye)||Me.push(ye),Me.push(je);l(Me),Me.length>0&&x.permissions&&g({...x,permissions:null})},de=ye=>{if(P[ye]){const je=P[ye]||[],Me=o.filter(He=>He!==ye&&!je.includes(He));l(Me)}else{const je=o.filter(Me=>Me!==ye);for(const[Me,He]of Object.entries(P))if(He.includes(ye)){if(!He.some(ft=>ft!==ye&&je.includes(ft))&&je.includes(Me)){const ft=je.indexOf(Me);ft>-1&&je.splice(ft,1)}break}l(je)}o.length===0&&g({...x,permissions:"At least one permission is required"})},z=ye=>o.includes(ye),se=ye=>(P[ye]||[]).every(Me=>o.includes(Me)),Ne=ye=>{if(!ye||ye.length===0)return"None";const je={};return ye.forEach(Me=>{P[Me]&&(je[Me]||(je[Me]=[]))}),ye.forEach(Me=>{if(!P[Me]){for(const[He,et]of Object.entries(P))if(et.includes(Me)){je[He]||(je[He]=[]),je[He].push(Me);break}}}),Object.entries(je).map(([Me,He])=>n.jsxs("div",{className:"permission-group mb-1",children:[n.jsx("span",{className:"fw-bold",children:Me}),He.length>0&&n.jsx("div",{className:"sub-permissions ms-2 small",children:He.join(", ")})]},Me))},ue=async ye=>{if(!ye){A(!1);return}try{if(c){const Me=e.find(He=>He._id===c);if(Me&&Me.roleName===ye){A(!1);return}}const je=await Oe.get(`/api/roles/check-name?name=${encodeURIComponent(ye)}`);if(A(je.data.exists),je.data.exists)g({...x,roleName:"Role name already exists"});else{const Me={...x};Me.roleName==="Role name already exists"&&(delete Me.roleName,g(Me))}}catch(je){console.error("Error checking role name:",je)}},oe=ye=>{const je=ye.target.value;if(i(je),!/^[A-Za-z\s]*$/.test(je))g({...x,roleName:"Role name should contain only alphabets and spaces"});else{const Me={...x};delete Me.roleName,g(Me),je.trim()&&ue(je)}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"",children:n.jsx("div",{className:"page-wrapper cardhead",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("h4",{children:"Access Control"})}),n.jsx("div",{className:"col-xl-5 float-end ms-auto",children:n.jsx("div",{className:"d-flex title-head",children:n.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:n.jsxs("div",{className:"head-icons",children:[n.jsx("a",{href:"/AccessControl","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Refresh",children:n.jsx("i",{className:"ti ti-refresh-dot"})}),n.jsx("a",{href:"javascript:void(0);","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Collapse",id:"collapse-header",children:n.jsx("i",{className:"ti ti-chevrons-up"})})]})})})})]})})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsx("div",{className:"input-group",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Role ID or Role Name",value:b,onChange:ee})})}),n.jsx("div",{className:"col-md-3"}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"d-flex title-head",children:n.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:n.jsx("div",{className:"head-icons",children:n.jsx("button",{className:"btn btn-primary mt-2",type:"button",onClick:()=>{re(),ne()},children:"Add Role"})})})})})]})}),n.jsx("div",{className:"table-responsive mt-3",children:n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"15%"},children:"Role ID"}),n.jsx("th",{style:{width:"15%"},children:"Role Name"}),n.jsx("th",{style:{width:"40%"},children:"Permissions"}),n.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),n.jsx("tbody",{children:M.length>0?M.map(ye=>n.jsxs("tr",{children:[n.jsx("td",{children:ye.roleId}),n.jsx("td",{children:ye.roleName}),n.jsx("td",{style:{width:"100%"},children:n.jsx("div",{style:{maxHeight:"100px",overflowY:"auto",fontSize:"0.85rem",textWrap:"wrap"},children:Ne(ye.permissions)})}),n.jsx("td",{children:n.jsxs("div",{className:"hstack gap-2 fs-15",children:[n.jsx("button",{onClick:()=>J(ye),className:"btn btn-icon btn-sm btn-soft-info rounded-pill",children:n.jsx("i",{className:"feather-edit"})}),n.jsx("button",{onClick:()=>X(ye._id,ye.roleName),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",disabled:F(ye.roleName),style:{opacity:F(ye.roleName)?"0.5":"1",cursor:F(ye.roleName)?"not-allowed":"pointer"},children:n.jsx("i",{className:"feather-trash"})})]})})]},ye._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",className:"text-center",children:"No roles found."})})})]})}),S.length>0&&n.jsx("div",{className:"d-flex justify-content-left mt-4",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination",style:{gap:"0px"},children:[n.jsx("li",{className:`page-item ${k===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>W(k-1),disabled:k===1,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})}),n.jsx("li",{className:`page-item ${k===V?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>W(k+1),disabled:k===V,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})})]})})})]})})})}),I&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:c?"Edit Role":"Add New Role"}),n.jsx("button",{type:"button",className:"btn-close",onClick:ce})]}),n.jsx("div",{className:"modal-body p-4",children:n.jsxs("form",{onSubmit:U,children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Role ID"}),n.jsx("input",{type:"text",className:"form-control",value:c?r:f,disabled:!0}),n.jsx("small",{className:"text-muted",children:"Role ID is automatically generated"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Role Name"}),n.jsx("input",{type:"text",className:`form-control ${x.roleName||E?"is-invalid":""}`,value:s,onChange:oe,disabled:!!c,placeholder:"Enter role name",required:!0}),x.roleName&&n.jsx("div",{className:"invalid-feedback",children:x.roleName}),!x.roleName&&E&&n.jsx("div",{className:"invalid-feedback",children:"Role name already exists"}),!x.roleName&&!E&&s.trim()&&n.jsx("div",{className:"text-success small mt-1",children:"Role name is available"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Permissions"}),n.jsx("div",{className:`permissions-container p-3 border rounded ${x.permissions?"border-danger":""}`,style:{maxHeight:"400px",overflowY:"auto"},children:O.map(ye=>n.jsxs("div",{className:"permission-item mb-3",children:[n.jsxs("div",{className:"form-check",children:[n.jsx("input",{type:"checkbox",className:"form-check-input",id:`perm-${ye}`,checked:o.includes(ye),onChange:()=>ae(ye)}),n.jsx("label",{className:"form-check-label fw-bold",htmlFor:`perm-${ye}`,children:ye}),o.includes(ye)&&n.jsx("span",{className:"ms-2 small",children:se(ye)?"(All selected)":"(Some selected)"})]}),P[ye]?.length>0&&n.jsx("div",{className:"sub-permissions ms-4 mt-2",children:P[ye].map(je=>n.jsxs("div",{className:"form-check",children:[n.jsx("input",{type:"checkbox",className:"form-check-input",id:`subperm-${je}`,checked:z(je),onChange:()=>Z(ye,je)}),n.jsx("label",{className:"form-check-label",htmlFor:`subperm-${je}`,children:je})]},je))})]},ye))}),x.permissions&&n.jsx("div",{className:"text-danger small mt-1",children:x.permissions}),n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{children:"Selected Permissions:"}),n.jsx("div",{className:"selected-permissions mt-2",children:o.length>0?o.map(ye=>n.jsxs("span",{className:"badge bg-soft-primary mb-1 m-1",children:[ye," ",n.jsx("button",{type:"button",className:"btn-close btn-close-primary rounded-pill",onClick:()=>de(ye)})]},ye)):n.jsx("span",{className:"text-muted",children:"No permissions selected"})})]})]}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Role"})]})})]})})})]})})})})};function jTe(){const[e,t]=j.useState(null),[r,a]=j.useState(0),[s,i]=j.useState(0),[o,l]=j.useState("input"),[c,d]=j.useState(0),[u,h]=j.useState(0),[f,p]=j.useState([]),[x,g]=j.useState([]),[b,y]=j.useState([]),[S,w]=j.useState(!0),[k,C]=j.useState([]),[D,E]=j.useState([]),[A,I]=j.useState(""),[L,P]=j.useState(null),[O,Y]=j.useState([]),[q,K]=j.useState([]),[U,J]=j.useState([]),F=localStorage.getItem("selectedCompanyId"),X=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId");const Q=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"];j.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:F,financialYear:X}}).then(W=>g(W.data)).catch(W=>console.error("Error fetching locations",W)),Oe.get("/api/billingform",{params:{companyId:F,financialYear:X}}).then(W=>E(W.data)).catch(W=>console.error("Error fetching customer invoices",W)),y(Q)},[]),j.useEffect(()=>{if(!X){J([]);return}const[W,ee]=X.split(" - ");if(!W||!ee){J(Q.map(ue=>({key:ue,label:ue})));return}const[re,ne,ce]=W.split("/"),[ae,Z,de]=ee.split("/"),z=Number(ce),se=Number(de);let Ne=[];for(let ue=0;ue<Q.length;ue++){let oe="";ue<9?oe=`${Q[ue]} ${z}`:oe=`${Q[ue]} ${se}`,Ne.push({key:`${Q[ue]}-${ue<9?z:se}`,month:Q[ue],year:ue<9?z:se,label:oe})}J(Ne)},[X]);const ie=W=>{if(!X)return!0;const[ee,re]=X.split(" - ");if(!ee||!re)return!0;const[ne,ce,ae]=ee.split("/"),[Z,de,z]=re.split("/"),se=new Date(`${ae}-${ce}-${ne}T00:00:00`),Ne=new Date(`${z}-${de}-${Z}T23:59:59`),ue=new Date(W);return ue>=se&&ue<=Ne};j.useEffect(()=>{const W=()=>{const ee={};U.forEach(ne=>{ee[ne.label]={month:ne.label,input:0,output:0,balance:0}}),k.forEach(ne=>{if(!ie(ne.createdAt))return;const ce=new Date(ne.createdAt),ae=ce.toLocaleString("en-US",{month:"short"}),Z=(ce.getMonth()<3,ce.getFullYear()),de=U.find(se=>se.month===ae&&se.year===Z)?.label,z=(ne.cgst||0)+(ne.sgst||0)+(ne.igst||0);de&&ee[de]&&(ee[de].input+=z)}),D.forEach(ne=>{if(!ie(ne.createdAt))return;const ce=new Date(ne.createdAt),ae=ce.toLocaleString("en-US",{month:"short"}),Z=(ce.getMonth()<3,ce.getFullYear()),de=U.find(se=>se.month===ae&&se.year===Z)?.label,z=(ne.cgst||0)+(ne.sgst||0)+(ne.igst||0);de&&ee[de]&&(ee[de].output+=z)});const re=Object.values(ee).map(ne=>({...ne,balance:ne.output-ne.input}));p(re)};(k.length||D.length)&&W()},[k,D,X,b,U]),j.useEffect(()=>{(async()=>{try{const ee=await Oe.get("/api/invoiceform",{params:{companyId:F,financialYear:X}}),re=ee.data.filter(ae=>{if(!ie(ae.createdAt))return!1;const Z=!L||ae.location===L,de=new Date(ae.createdAt),z=de.toLocaleString("en-US",{month:"short"}),se=(de.getMonth()<3,de.getFullYear()),Ne=!A||`${z} ${se}`===A;return Z&&Ne}),ne=re?.sort((ae,Z)=>new Date(Z.createdAt)-new Date(ae.createdAt)),ce=re.reduce((ae,Z)=>ae+(Z.cgst||0)+(Z.sgst||0)+(Z.igst||0),0);a(ce),d(ce),C(ee.data),Y(ne),t(null)}catch(ee){t("Failed to fetch invoices"),console.error(ee)}finally{w(!1)}})()},[A,L,X,U]),j.useEffect(()=>{(async()=>{try{const ee=await Oe.get("/api/billingform",{params:{companyId:F,financialYear:X}}),re=ee.data.filter(ae=>{if(!ie(ae.createdAt))return!1;const Z=!L||ae.location===L,de=new Date(ae.createdAt),z=de.toLocaleString("en-US",{month:"short"}),se=(de.getMonth()<3,de.getFullYear()),Ne=!A||`${z} ${se}`===A;return Z&&Ne}),ne=re.reduce((ae,Z)=>ae+(Z.cgst||0)+(Z.sgst||0)+(Z.igst||0),0);i(ne);const ce=re?.sort((ae,Z)=>new Date(Z.createdAt)-new Date(ae.createdAt));E(ee.data),K(ce),t(null)}catch(ee){t("Failed to fetch invoices"),console.error(ee)}finally{w(!1)}})()},[A,L,X,U]);const M=s-r,V=M>0?"You need to pay GST":M<0?"You will get a GST refund":"No GST to pay or refund";return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"GST List"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"GST List"})]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-xl-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:"Month"}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{name:"month",className:"form-select",id:"month-select",onChange:W=>I(W.target.value),children:[n.jsx("option",{value:"",children:"Select Month"}),U.map((W,ee)=>n.jsx("option",{value:W.label,children:W.label},ee))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-4",children:"Location"}),n.jsx("div",{className:"col-xl-8",children:n.jsxs("select",{name:"location",className:"form-select",id:"location-select",onChange:W=>P(W.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),x.map((W,ee)=>n.jsx("option",{value:W.name,children:W.name},ee))]})})]}),n.jsxs("div",{className:"col-xl-3 ms-auto ",children:[o==="input"&&n.jsxs("h5",{style:{color:"blue"},children:["Total Input GST: ",r.toFixed(2)]}),o==="output"&&n.jsxs("h5",{style:{color:"orange"},children:["Total Output GST: ",s.toFixed(2)]}),o==="gstr"&&n.jsxs("h5",{style:{color:M>0?"red":M<0?"green":"black"},children:[V,"  ",Math.abs(M).toFixed(2)]})]})]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("ul",{className:"nav nav-tabs tab-style-6",id:"myTab-3",role:"tablist",children:[n.jsx("li",{className:"nav-item",role:"presentation",children:n.jsxs("button",{className:`nav-link ${o==="input"?"active":""} btn-outline-primary`,id:"products-tab","data-bs-toggle":"tab","data-bs-target":"#products-tab-pane",type:"button",role:"tab","aria-controls":"products-tab-pane","aria-selected":o==="input",onClick:()=>l("input"),children:[n.jsx("i",{className:"feather-gift me-1 align-middle d-inline-block"}),"Input Tax"]})}),n.jsx("li",{className:"nav-item",role:"presentation",children:n.jsxs("button",{className:`nav-link ${o==="output"?"active":""} btn-outline-primary`,id:"sales-tab","data-bs-toggle":"tab","data-bs-target":"#sales-tab-pane",type:"button",role:"tab","aria-controls":"sales-tab-pane","aria-selected":o==="output",onClick:()=>l("output"),children:[n.jsx("i",{className:"feather-file me-1 align-middle d-inline-block"}),"Output Tax"]})}),n.jsx("li",{className:"nav-item",role:"presentation",children:n.jsxs("button",{className:`nav-link ${o==="gstr"?"active":""} btn-outline-primary`,id:"profit-tab","data-bs-toggle":"tab","data-bs-target":"#profit-tab-pane",type:"button",role:"tab","aria-controls":"profit-tab-pane","aria-selected":o==="gstr",onClick:()=>l("gstr"),children:[n.jsx("i",{className:"feather-file-text me-1 align-middle d-inline-block"}),"GSTR"]})})]}),n.jsxs("div",{className:"tab-content",id:"myTabContent2",children:[n.jsx("div",{className:`tab-pane fade ${o==="input"?"show active":""} p-0 border-bottom-0`,id:"products-tab-pane",role:"tabpanel","aria-labelledby":"products-tab",tabIndex:"0",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Invoice No"}),n.jsx("th",{scope:"col",children:"Date"}),n.jsx("th",{scope:"col",children:"Amount"}),n.jsx("th",{scope:"col",children:"CGST"}),n.jsx("th",{scope:"col",children:"SGST/UTGST"}),n.jsx("th",{scope:"col",children:"IGST"}),n.jsx("th",{scope:"col",children:"Total GST"})]})}),n.jsx("tbody",{children:O.map((W,ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:W.docnumber}),n.jsx("td",{children:new Date(W.createdAt).toLocaleDateString()}),n.jsx("td",{children:W.finalTotal}),n.jsx("td",{children:W.cgst}),n.jsx("td",{children:W.sgst}),n.jsx("td",{children:W.igst}),n.jsx("td",{children:(W.cgst||0)+(W.sgst||0)+(W.igst||0)})]},ee))})]})})}),n.jsx("div",{className:`tab-pane fade ${o==="output"?"show active":""}`,id:"sales-tab-pane",role:"tabpanel","aria-labelledby":"sales-tab",tabIndex:"0",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Invoice No"}),n.jsx("th",{scope:"col",children:"Date"}),n.jsx("th",{scope:"col",children:"Amount"}),n.jsx("th",{scope:"col",children:"CGST"}),n.jsx("th",{scope:"col",children:"SGST/UTGST"}),n.jsx("th",{scope:"col",children:"IGST"}),n.jsx("th",{scope:"col",children:"Total GST"})]})}),n.jsx("tbody",{children:q.map((W,ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:W.docnumber}),n.jsx("td",{children:new Date(W.createdAt).toLocaleDateString()}),n.jsx("td",{children:W.finalTotal}),n.jsx("td",{children:W.cgst}),n.jsx("td",{children:W.sgst}),n.jsx("td",{children:W.igst}),n.jsx("td",{children:((W.cgst||0)+(W.sgst||0)+(W.igst||0)).toFixed(2)})]},ee))})]})})}),n.jsx("div",{className:`tab-pane fade ${o==="gstr"?"show active":""}`,id:"profit-tab-pane",role:"tabpanel","aria-labelledby":"profit-tab",tabIndex:"0",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Month"}),n.jsx("th",{scope:"col",children:"Input"}),n.jsx("th",{scope:"col",children:"Output"}),n.jsx("th",{scope:"col",children:"Balance"})]})}),n.jsx("tbody",{children:f.map((W,ee)=>n.jsxs("tr",{children:[n.jsx("td",{children:W.month}),n.jsx("td",{children:W.input.toFixed(2)}),n.jsx("td",{children:W.output.toFixed(2)}),n.jsx("td",{children:W.balance.toFixed(2)})]},ee))})]})})})]})]})]})})})]})}const tD=10;function NTe(){const[e,t]=j.useState([]),[r,a]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState([]),[S,w]=j.useState([]),[k,C]=j.useState(""),[D,E]=j.useState(1),[A,I]=j.useState(null),L=async()=>{try{const de=(await Oe.get("/api/purchase-contract-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(z=>({label:`${z.categoryName} (${z.prefix})`,value:z._id}));h(de)}catch(Z){console.error("Failed to fetch categories:",Z)}},P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear"),Y=async()=>{try{const z=(await Oe.get("/api/vendors",{params:{companyId:P,financialYear:O}})).data.filter(se=>!se.isDeleted&&!se.isBlocked).map(se=>({label:`${se.name1} ${se.name2||""}`,value:se.vendorName,vnNo:se.vnNo||""}));d(z),y(z)}catch(Z){console.error("Failed to fetch vendors:",Z)}},q=async()=>{try{const Z=await Oe.get("/api/locations",{params:{companyId:P,financialYear:O}});Array.isArray(Z.data)?w(Z.data):Z.data&&Array.isArray(Z.data.locations)?w(Z.data.locations):w([])}catch(Z){console.error("Failed to fetch locations:",Z),w([])}},K=async()=>{try{a(!0);const Z=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),se=(await Oe.get("/api/contracts/get",{params:{companyId:Z,financialYear:de}})).data.sort((Ne,ue)=>new Date(ue.createdAt)-new Date(Ne.createdAt));t(se),i(null)}catch(Z){console.error("Failed to fetch contracts:",Z),i("Failed to load contracts. Please try again.")}finally{a(!1)}};j.useEffect(()=>{K(),Y(),L(),q()},[]);const U=async Z=>{try{const z=(await Oe.get(`/api/contracts/${Z}`)).data;l({...z,validityFDate:z.validityFDate?new Date(z.validityFDate).toISOString().split("T")[0]:"",validityTDate:z.validityTDate?new Date(z.validityTDate).toISOString().split("T")[0]:"",items:z.items.map(se=>({...se}))})}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},J=async()=>{try{const Z=o.items.reduce((z,se)=>z+(parseFloat(se.price)*parseFloat(se.qty)||0),0),de={...o,totalPrice:Z};await Oe.put(`/api/contracts/${o._id}`,de),alert("Contract updated successfully!"),l(null),K()}catch(Z){console.error("Failed to update contract:",Z),alert("Failed to update contract")}},F=()=>{l(null)},X=(Z,de)=>{l(z=>({...z,[Z]:de}))},Q=(Z,de,z)=>{const se=[...o.items];se[Z][de]=z,l(Ne=>({...Ne,items:se}))},ie=async Z=>{try{const de=await Oe.get(`/api/contracts/${Z}`);I(de.data)}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},M=Z=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Purchase Contract - ${Z.contractNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>PURCHASE CONTRACT</h1>
          <h3>Contract Number: ${Z.contractNumber}</h3>
        </div>
        
        <div class="info-grid">
          <div>
            <div class="info-item"><strong>Vendor:</strong> ${Z.vendorName}</div>
            <div class="info-item"><strong>Location:</strong> ${Z.location||"-"}</div>
            <div class="info-item"><strong>Purchase Group:</strong> ${Z.buyerGroup||"-"}</div>
          </div>
          <div>
            <div class="info-item"><strong>Valid From:</strong> ${Z.validityFDate?new Date(Z.validityFDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Valid To:</strong> ${Z.validityTDate?new Date(Z.validityTDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Created:</strong> ${new Date(Z.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${Z.note?`<div class="info-item"><strong>Note:</strong> ${Z.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${Z.items.map((se,Ne)=>`
              <tr>
                <td>${Ne+1}</td>
                <td>${se.materialId}</td>
                <td>${se.description}</td>
                <td>${se.qty}</td>
                <td>${se.unit||se.baseUnit}</td>
                <td>${se.price?parseFloat(se.price).toFixed(2):"0.00"}</td>
                <td>${se.price&&se.qty?(parseFloat(se.price)*parseFloat(se.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${Z.items.reduce((se,Ne)=>{const ue=Ne.price&&Ne.qty?parseFloat(Ne.price)*parseFloat(Ne.qty):0;return se+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div class="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,z=window.open("","_blank");z.document.write(de),z.document.close(),z.focus(),z.print()},V=j.useMemo(()=>{let Z=e;return(f||x)&&(Z=Z.filter(de=>{const z=new Date(de.createdAt),se=f?new Date(f):null,Ne=x?new Date(x):null;return se&&Ne?z>=se&&z<=Ne:se?z>=se:Ne?z<=Ne:!0})),k&&(Z=Z.filter(de=>[de.contractNumber,de.vendorName,de.note,de.location,de.buyerGroup].join(" ").toLowerCase().includes(k.toLowerCase())),Z=Z.sort((de,z)=>{const se=contract.items?.reduce((ue,oe)=>{const ye=oe.price&&oe.qty?parseFloat(oe.price)*parseFloat(oe.qty):0;return ue+ye},0)||0,Ne=contract.items?.reduce((ue,oe)=>{const ye=oe.price&&oe.qty?parseFloat(oe.price)*parseFloat(oe.qty):0;return ue+ye},0)||0;return se-Ne})),Z},[k,e,f,x]),W=()=>{C(""),p(""),g(""),E(1)},ee=(Z,de)=>{if(!de)return"transparent";switch(Z){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},re=Math.ceil(V.length/tD),ne=j.useMemo(()=>{const Z=(D-1)*tD;return V.slice(Z,Z+tD)},[V,D]),ce=Z=>{C(Z.target.value),E(1)},ae=Z=>{Z<1||Z>re||E(Z)};return r?n.jsx("div",{className:"d-flex justify-content-center",children:n.jsx("div",{className:"spinner-border",role:"status"})}):s?n.jsxs("div",{style:{padding:"20px"},children:[n.jsx("h2",{children:"Purchase Contracts"}),n.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),n.jsx("button",{onClick:K,style:{padding:"10px 20px"},children:"Retry"})]}):A?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Purchase Contract Preview - ",A.contractNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>I(null)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Contract Number"}),n.jsx("div",{className:"fw-bold",children:A.contractNumber})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Vendor"}),n.jsx("div",{className:"fw-bold",children:A.vendorName})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Location"}),n.jsx("div",{className:"fw-bold",children:A.location||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Purchase Group"}),n.jsx("div",{className:"fw-bold",children:A.buyerGroup||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Valid From"}),n.jsx("div",{className:"fw-bold",children:A.validityFDate?new Date(A.validityFDate).toLocaleDateString():"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Valid To"}),n.jsx("div",{className:"fw-bold",children:A.validityTDate?new Date(A.validityTDate).toLocaleDateString():"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Financial Year"}),n.jsx("div",{className:"fw-bold",children:A.financialYear||"-"})]})})}),n.jsx("div",{className:"col-md-3",children:n.jsx("div",{className:"card border-0 bg-light",children:n.jsxs("div",{className:"card-body p-3",children:[n.jsx("small",{className:"text-muted",children:"Created Date"}),n.jsx("div",{className:"fw-bold",children:new Date(A.createdAt).toLocaleDateString()})]})})})]}),A.note&&n.jsxs("div",{className:"alert alert-info mb-4",children:[n.jsx("strong",{children:"Note:"})," ",A.note]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:A.items.map((Z,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:Z.materialId}),n.jsx("td",{children:Z.description}),n.jsx("td",{children:Z.qty}),n.jsx("td",{children:Z.unit||Z.baseUnit}),n.jsxs("td",{children:["",Z.price?parseFloat(Z.price).toFixed(2):"0.00"]}),n.jsxs("td",{children:["",Z.price&&Z.qty?(parseFloat(Z.price)*parseFloat(Z.qty)).toFixed(2):"0.00"]})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"6",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",A.items.reduce((Z,de)=>{const z=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return Z+z},0).toFixed(2)]})]})})]})})]})]})})}):o?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Purchase Contract - ",o.contractNumber]}),n.jsxs("div",{children:[n.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:J,children:"Save Changes"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:F,children:"Cancel"})]})]}),n.jsx("div",{className:"modal-body",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row g-3 mb-4",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Contract Number"}),n.jsx("input",{type:"text",className:"form-control",value:o.contractNumber||"",onChange:Z=>X("contractNumber",Z.target.value),readOnly:!0})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsx(j2,{options:u,value:u.find(Z=>Z.value===o.categoryId),onChange:Z=>X("categoryId",Z?.value),placeholder:"Select Category"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Vendor"}),n.jsx(j2,{options:b,value:b.find(Z=>Z.value===o.vendorName),onChange:Z=>{X("vendorId",Z?.value),X("vendorName",Z?.label)},placeholder:"Select Vendor"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Valid From Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.validityFDate||"",onChange:Z=>X("validityFDate",Z.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Valid To Date"}),n.jsx("input",{type:"date",className:"form-control",value:o.validityTDate||"",onChange:Z=>X("validityTDate",Z.target.value)})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsxs("select",{className:"form-select",value:o.location||"",onChange:Z=>X("location",Z.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),S.map((Z,de)=>n.jsx("option",{value:Z.name||Z,children:Z.name||Z},de))]})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Purchase Group"}),n.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:Z=>X("buyerGroup",Z.target.value)})]}),n.jsxs("div",{className:"col-md-8",children:[n.jsx("label",{className:"form-label",children:"Note"}),n.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:Z=>X("note",Z.target.value),placeholder:"Add any notes (optional)"})]})]}),n.jsx("h6",{className:"mb-3",children:"Items"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:o.items.map((Z,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.materialId||"",onChange:z=>Q(de,"materialId",z.target.value),readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.description||"",onChange:z=>Q(de,"description",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Z.qty||"",onChange:z=>Q(de,"qty",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.baseUnit||"",onChange:z=>Q(de,"baseUnit",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.orderUnit||"",onChange:z=>Q(de,"orderUnit",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:Z.unit||"",onChange:z=>Q(de,"unit",z.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",className:"form-control form-control-sm",value:Z.price||"",onChange:z=>Q(de,"price",z.target.value),step:"0.01"})}),n.jsx("td",{children:n.jsxs("span",{className:"fw-bold text-success",children:["",Z.price&&Z.qty?(parseFloat(Z.price)*parseFloat(Z.qty)).toFixed(2):"0.00"]})})]},de))}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"table-success",children:[n.jsx("td",{colSpan:"8",className:"text-end fw-bold",children:"Grand Total:"}),n.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((Z,de)=>{const z=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return Z+z},0).toFixed(2)]})]})})]})})]})})})]})})}):n.jsxs("div",{className:"content",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h6",{children:"All Purchase Contracts"}),n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Search by Contract Number, Vendor, etc...",value:k,onChange:ce,className:"form-control",style:{width:300,marginTop:"22px"}}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),n.jsx("input",{type:"date",value:f,onChange:Z=>{p(Z.target.value),E(1)},className:"form-control",style:{width:150}})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),n.jsx("input",{type:"date",value:x,onChange:Z=>{g(Z.target.value),E(1)},className:"form-control",style:{width:150}})]}),n.jsx("button",{onClick:W,className:"btn btn-sm btn-soft-warning",children:"Reset"}),n.jsx("button",{onClick:K,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Contract Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Valid From"}),n.jsx("th",{children:"Valid To"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Total Price"}),n.jsx("th",{children:"Note"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:ne.map((Z,de)=>n.jsxs("tr",{children:[n.jsx("td",{children:de+1}),n.jsx("td",{className:"text-wrap",children:Z.contractNumber}),n.jsx("td",{className:"text-wrap",children:Z.vendorName}),n.jsx("td",{className:"text-wrap",children:Z.location||"-"}),n.jsx("td",{children:Z.validityFDate?new Date(Z.validityFDate).toLocaleDateString():"-"}),n.jsx("td",{children:Z.validityTDate?new Date(Z.validityTDate).toLocaleDateString():"-"}),n.jsx("td",{children:new Date(Z.createdAt).toLocaleDateString()}),n.jsxs("td",{style:{backgroundColor:ee(de,!!k)},children:["",Z.items?.reduce((z,se)=>{const Ne=se.price&&se.qty?parseFloat(se.price)*parseFloat(se.qty):0;return z+Ne},0).toFixed(2)||"0.00"]}),n.jsx("td",{children:Z.note||"-"}),n.jsxs("td",{children:[n.jsx("button",{onClick:()=>ie(Z._id),className:"btn btn-sm",title:"Preview",children:n.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),n.jsx("button",{onClick:()=>U(Z._id),className:"btn btn-sm",title:"Edit",children:n.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),n.jsx("button",{onClick:()=>M(Z),className:"btn btn-sm",title:"Print",children:n.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},Z._id||de))})]})})})}),n.jsx("div",{className:"d-flex justify-content-end ms-auto",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[n.jsx("li",{className:`page-item${D===1?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(D-1),disabled:D===1,children:n.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const Z=[];let de=[1,2],z=[re-1,re].filter(ue=>ue>2),se=[];D<=4?(de=[1,2,3,4,5].filter(ue=>ue<=re),z=[re-1,re].filter(ue=>ue>5)):D>=re-3?(de=[1,2].filter(ue=>ue<re-4),z=[re-4,re-3,re-2,re-1,re].filter(ue=>ue>2&&ue<=re)):(de=[1,2],se=[D-1,D,D+1],z=[re-1,re]);const Ne=ue=>ue.map(oe=>n.jsx("li",{className:`page-item${D===oe?" active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(oe),children:oe})},oe));return Z.push(...Ne(de)),(se.length>0&&se[0]>de[de.length-1]+1||se.length===0&&z[0]>de[de.length-1]+1)&&Z.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),Z.push(...Ne(se)),z.length>0&&(se.length>0&&z[0]>se[se.length-1]+1||se.length===0&&z[0]>de[de.length-1]+1)&&Z.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),Z.push(...Ne(z)),Z})(),n.jsx("li",{className:`page-item${D===re?" disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>ae(D+1),disabled:D===re,children:n.jsx("i",{className:"bi bi-chevron-double-right"})})})]})})})]})}function wTe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]);rh();const[c,d]=j.useState(""),[u,h]=j.useState(null),[f,p]=j.useState(null),[x,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState([]),[A,I]=j.useState(""),[L,P]=j.useState(""),[O,Y]=j.useState(""),[q,K]=j.useState(""),[U,J]=j.useState(!1),[F,X]=j.useState(null),[Q,ie]=j.useState(0),[M,V]=j.useState(!1),[W,ee]=j.useState(!1),[re,ne]=j.useState(""),[ce,ae]=j.useState(""),[Z,de]=j.useState(""),[z,se]=j.useState(""),[Ne,ue]=j.useState(""),[oe,ye]=j.useState(""),[je,Me]=j.useState(null);j.useEffect(()=>{if(Ne){const qe=e.filter(mt=>mt.indentId.toLowerCase().includes(Ne.toLowerCase()));setFilteredIndents(qe)}},[Ne]);const[He,et]=j.useState([]);j.useEffect(()=>{const qe=localStorage.getItem("selectedCompanyId"),mt=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:qe,financialYear:mt}}).then(Ie=>{const Xe=Ie.data.filter(Ye=>!Ye.isDeleted&&!Ye.isBlocked);t(Xe.map(Ye=>({label:`${Ye.indentId} (${Ye.categoryName})`,value:Ye})))}),Oe.get("/api/purchase-contract-categories",{params:{companyId:qe,financialYear:mt}}).then(Ie=>{a(Ie.data.map(Xe=>({label:`${Xe.categoryName}`,value:Xe._id})))}),Oe.get("/api/vendors",{params:{companyId:qe,financialYear:mt}}).then(Ie=>{const Xe=Ie.data.filter(Ye=>!Ye.isDeleted&&!Ye.isBlocked);i(Xe.map(Ye=>({label:`${Ye.name1} ${Ye.name2||""}`,value:Ye._id,vnNo:Ye.vnNo||""})))}),Oe.get("/api/locations",{params:{companyId:qe,financialYear:mt}}).then(Ie=>{console.log("Locations API response:",Ie.data),Array.isArray(Ie.data)?et(Ie.data):Ie.data&&Array.isArray(Ie.data.locations)?et(Ie.data.locations):et([])}).catch(Ie=>{console.error("Failed to fetch locations:",Ie),et([])}),console.log("location",A),Oe.get("/api/material",{params:{companyId:qe,financialYear:mt}}).then(Ie=>{console.log("Fetched materials:",Ie.data);const Xe=Ie.data.filter(Ye=>!Ye.isDeleted&&!Ye.isBlocked);l(Xe),console.log("Filtered materials:",Xe)}).catch(Ie=>console.error("Failed to fetch materials:",Ie))},[]);const ft=qe=>{h(qe);const{buyerGroup:mt,materialGroup:Ie,deliveryDate:Xe,location:Ye}=qe.value;I(Ye||""),P(mt||"");const lt=qe.value.items.map(Mt=>({...Mt,unit:Mt.unit||"",price:Mt.price||"",materialGroup:Mt.materialGroup||Ie||"",deliveryDate:Mt.deliveryDate||Xe||""}));E(lt)},Be=(qe,mt,Ie)=>{const Xe=[...D];Xe[qe][mt]=Ie,E(Xe)},dt=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date(new Date().setDate(new Date().getDate()+5)).toISOString().slice(0,10),price:0}])},[Tt,At]=j.useState(!1),[qt,xe]=j.useState("internal"),[he,ve]=j.useState(""),pe=async qe=>{qe.preventDefault(),At(!0)};j.useEffect(()=>{const qe=D.reduce((mt,Ie)=>{const Xe=parseFloat(Ie.price)||0,Ye=parseFloat(Ie.qty)||0;return mt+Xe*Ye},0);ie(qe)},[D]);const De=async()=>{const qe=localStorage.getItem("selectedCompanyId"),mt=localStorage.getItem("financialYear"),Ie={indentId:u?.value?.indentId,categoryId:f?.value,rfqCategoryId:f?.value,vendor:x,vendorName:b,contractReference:c,validityFDate:O,validityTDate:q,companyId:qe,financialYear:mt,vnNo:k,note:S,buyerGroup:L,location:A,totalPrice:Q,items:D,contractGenType:qt,externalContractNumber:qt==="external"?he:null};console.log("Payload for submission:",Ie);try{const Xe=await Oe.post("/api/contracts/create",Ie);alert("Contract Created Successfully"),console.log(Xe.data),At(!1)}catch(Xe){console.error(Xe),alert("Failed to create contract")}},Ke=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-hashtag me-2"}),"Contract Number Generation"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>At(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{xe("internal"),De()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>xe("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),qt==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Contract Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:he,onChange:qe=>{qe.target.value.length<=50&&ve(qe.target.value)},onKeyPress:qe=>{qe.key==="Enter"&&he.trim()&&De()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[he.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:De,disabled:!he.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Create Contract"]})})]}),qt==="internal"&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"alert alert-info",role:"alert",children:"Contract number will be auto-generated based on category and range count."})})]})]})})})]}),Nt=qe=>{console.log("Opening modal for item at index:",qe),X(qe),J(!0)},Je=()=>{const[qe,mt]=j.useState([]),[Ie,Xe]=j.useState("materialId"),[Ye,lt]=j.useState(""),Mt=bt=>{const Xt=bt.target.value;lt(Xt);const Ft=o.filter(rr=>(Ie==="materialId"?rr.materialId:rr.description)?.toLowerCase().includes(Xt.toLowerCase()));mt(Ft)},Ae=()=>{mt(o),lt("")},ke=()=>{mt([]),lt("")},ot=bt=>{if(console.log("selectedItemIndex when selecting:",F),F==null){console.error("No item selected for update");return}E(Xt=>{console.log("Previous items:",Xt);const Ft=[...Xt];return Ft[F]={...Ft[F],materialId:bt.materialId,description:bt.description,materialGroup:bt.materialgroup||"",baseUnit:bt.baseUnit,orderUnit:bt.orderUnit},console.log("Updated items:",Ft),Ft}),J(!1)};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>J(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Ie,onChange:bt=>Xe(bt.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:Ie==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ye,onChange:Mt})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ae,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),qe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:qe.map((bt,Xt)=>n.jsxs("tr",{children:[n.jsx("td",{children:bt.materialId}),n.jsx("td",{children:bt.description}),n.jsx("td",{children:bt.baseUnit}),n.jsx("td",{children:bt.orderUnit}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ot(bt),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ye?`No materials found matching "${Ye}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>J(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Qe=()=>{const[qe,mt]=j.useState("indentId"),[Ie,Xe]=j.useState([]),[Ye,lt]=j.useState(""),Mt=ot=>{const bt=ot.target.value;lt(bt);const Xt=e.filter(Ft=>(qe==="indentId"?Ft?.value?.indentId:Ft?.value?.categoryName)?.toLowerCase().includes(bt.toLowerCase()));Xe(Xt)},Ae=()=>{Xe(e),lt("")},ke=()=>{Xe([]),lt("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:qe,onChange:ot=>mt(ot.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ye,onChange:Mt})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ae,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ie.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ie.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Buyer Group"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ie.map((ot,bt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ot.value.indentId})}),n.jsx("td",{children:ot.value.categoryName}),n.jsx("td",{children:ot.value.buyerGroup}),n.jsx("td",{children:ot.value.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{ft(ot),V(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},bt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>V(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Ue=()=>{const[qe,mt]=j.useState("name1"),[Ie,Xe]=j.useState([]),[Ye,lt]=j.useState(""),Mt=ot=>{const bt=ot.target.value;lt(bt);const Xt=s.filter(Ft=>(qe==="vnNo"?Ft.vnNo:Ft.label)?.toLowerCase().includes(bt.toLowerCase()));Xe(Xt)},Ae=()=>{Xe(s),lt("")},ke=()=>{Xe([]),lt("")};return n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ee(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:qe,onChange:ot=>mt(ot.target.value),children:[n.jsx("option",{value:"name1",children:"Vendor Name"}),n.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ye,onChange:Mt})]}),n.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[n.jsxs("button",{className:"btn btn-info",onClick:Ae,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ie.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ie.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Vendor No"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ie.map((ot,bt)=>n.jsxs("tr",{children:[n.jsx("td",{children:ot.label}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:ot.vnNo})}),n.jsx("td",{children:ot.city||"-"}),n.jsx("td",{children:ot.region||"-"}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(ot.value),y(ot.label),C(ot.vnNo||""),ee(!1)},children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},bt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>ee(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto ",children:[n.jsx("h2",{className:"mb-1",children:"Purchase Contract"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Contract"})]})})]})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-clipboard-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Purchase Contract Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Select Indent"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:qe=>{const mt=qe.target.value;se(mt);const Ie=e.find(Xe=>Xe.indentId.toLowerCase()===mt.toLowerCase());h(Ie||null)},readOnly:!0}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ue(z),V(!0)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Category"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select form-control-sm",value:f?.value||"",onChange:qe=>p(r.find(mt=>mt.value===qe.target.value)||null),children:[n.jsx("option",{value:"",children:"Select"}),r.map((qe,mt)=>n.jsx("option",{value:qe.value,children:qe.label},mt))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:qe=>{const mt=qe.target.value;y(mt);const Ie=s.find(Xe=>Xe.name.toLowerCase()===mt.toLowerCase());Me(Ie||null)}}),n.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ee(!0),ye(b)},children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Reference"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Contract Reference",value:c,onChange:qe=>d(qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-lg-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select form-select-sm ",value:A,onChange:qe=>I(qe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(He)&&He.map((qe,mt)=>n.jsx("option",{value:qe.name||qe._id||qe,children:qe.name||qe.locationName||qe},mt))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"text",className:"form-control",value:L,onChange:qe=>P(qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity From"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:qe=>Y(qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Till"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:q,onChange:qe=>K(qe.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Additional Notes"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:S,onChange:qe=>w(qe.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-body",children:[n.jsxs("form",{onSubmit:pe,children:[n.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[n.jsx("h6",{className:"mb-3",children:"Items & Details"}),n.jsxs("div",{className:"table-responsive",children:[n.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Material Group"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:D.map((qe,mt)=>n.jsxs("tr",{children:[n.jsx("td",{children:mt+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:qe.materialId,readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>Nt(mt),children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:qe.description,onChange:Ie=>Be(mt,"description",Ie.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:qe.qty,onChange:Ie=>Be(mt,"qty",Ie.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:qe.baseUnit,onChange:Ie=>Be(mt,"baseUnit",Ie.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:qe.orderUnit,onChange:Ie=>Be(mt,"orderUnit",Ie.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:qe.materialGroup,onChange:Ie=>Be(mt,"materialGroup",Ie.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:qe.deliveryDate,onChange:Ie=>Be(mt,"deliveryDate",Ie.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:qe.price,onChange:Ie=>Be(mt,"price",Ie.target.value)})})]},mt))})]}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsxs("button",{type:"button",onClick:dt,className:"btn btn-link",children:[n.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]}),U&&n.jsx(Je,{})]}),n.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:n.jsxs("h6",{className:"mb-0",children:["Total Price: ",n.jsxs("span",{className:"text-primary",children:["",Q.toFixed(2)]})]})})]})})})]})]}),M&&n.jsx(Qe,{}),W&&n.jsx(Ue,{}),Tt&&n.jsx(Ke,{})]})]})})}function STe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState([]),[f,p]=j.useState(null),[x,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState(""),[A,I]=j.useState([]),[L,P]=j.useState(""),[O,Y]=j.useState(""),[q,K]=j.useState(""),[U,J]=j.useState(!1),[F,X]=j.useState(!1),[Q,ie]=j.useState(!1),[M,V]=j.useState(null),[W,ee]=j.useState(""),[re,ne]=j.useState([]),ce=localStorage.getItem("selectedCompanyId"),ae=localStorage.getItem("financialYear"),Z=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:ce,financialYear:ae}}).then(pe=>{const De=pe.data.filter(Ke=>!Ke.isBlocked&&!Ke.isDeleted);t(De)}).catch(console.error),Oe.get("/api/sale-contract-categories",{params:{companyId:ce,financialYear:ae}}).then(pe=>a(pe.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:ce,financialYear:ae}}).then(pe=>{console.log("Locations API response:",pe.data),Array.isArray(pe.data)?ne(pe.data):pe.data&&Array.isArray(pe.data.locations)?ne(pe.data.locations):ne([])}).catch(pe=>{console.error("Failed to fetch locations:",pe),ne([])}),Oe.get("/api/customers").then(pe=>{const De=pe.data.filter(Ke=>!Ke.isBlocked&&!Ke.isDeleted);i(De)}).catch(console.error),Oe.get("/api/material").then(pe=>l(pe.data)).catch(console.error),de()},[]);const de=()=>{Oe.get("/api/salescontracts",{params:{companyId:ce,financialYear:ae}}).then(pe=>h(pe.data)).catch(console.error)},z=pe=>{p({label:pe.indentId,value:pe._id}),d(pe.salesGroup||""),ee(pe.location),I(pe.items.map(De=>({...De,customerName:b?.name1||"",price:"",unit:""}))),ie(!1)},se=pe=>{y({label:`${pe.name1} ${pe.name2}`,value:pe._id}),I(De=>De.map(Ke=>({...Ke,customerName:pe.name1}))),X(!1)},Ne=pe=>{const De=[...A];De[M]={...De[M],materialId:pe.materialId,description:pe.description,baseUnit:pe.baseUnit,unit:pe.unit,price:pe.price},I(De),J(!1)},ue=(pe,De,Ke)=>{const Nt=[...A];Nt[pe][De]=Ke,I(Nt)},oe=()=>{I(pe=>[...pe,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ye,je]=j.useState(!1),[Me,He]=j.useState("internal"),[et,ft]=j.useState(""),Be=pe=>{if(pe.preventDefault(),k&&D&&k>D){alert("Validity From date cannot be later than Validity To date");return}je(!0)},dt=()=>{const pe={indentId:f?.label,categoryId:x?.value,customerId:b?.value,note:S,companyId:Z,financialYear:ae,validityFromDate:k,validityToDate:D,salesGroup:c,location:W,items:A,contractNumberType:Me,externalContractNumber:Me==="external"?et:null};Oe.post("/api/salescontracts",pe).then(()=>{alert("Contract saved successfully!"),de(),At(),je(!1),He("internal"),ft("")}).catch(De=>{console.error(De),alert("Error saving contract")})},Tt=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-md",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h4",{className:"modal-title",children:"Contract Number Generation"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>je(!1),"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{He("internal"),dt()},children:[n.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>He("external"),children:[n.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Me==="external"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"form-label",children:"Enter Contract Number"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:et,onChange:pe=>{pe.target.value.length<=50&&ft(pe.target.value)},onKeyPress:pe=>{pe.key==="Enter"&&et.trim()&&dt()},maxLength:50,autoFocus:!0}),n.jsxs("div",{className:"form-text",children:[et.length,"/50 characters"]}),n.jsx("div",{className:"mt-3",children:n.jsxs("button",{className:"btn btn-primary",onClick:dt,disabled:!et.trim(),children:[n.jsx("i",{className:"fas fa-save me-1"}),"Save Contract"]})})]})]})]})})})]}),At=()=>{p(null),g(null),y(null),w(""),C(""),E(""),I([])},qt=({children:pe,onClose:De})=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsx("h5",{className:"modal-title",children:"Select"}),n.jsx("button",{type:"button",className:"btn-close",onClick:De})]}),n.jsx("div",{className:"modal-body",children:pe})]})})}),xe=()=>{const[pe,De]=j.useState([]),[Ke,Nt]=j.useState("materialId"),Je=qe=>{const mt=qe.target.value;P(mt);const Ie=o.filter(Xe=>(Ke==="materialId"?Xe.materialId:Xe.description)?.toLowerCase().includes(mt.toLowerCase()));De(Ie)},Qe=()=>{De(o),P("")},Ue=()=>{De([]),P("")};return n.jsxs(qt,{onClose:()=>J(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Ke,onChange:qe=>Nt(qe.target.value),children:[n.jsx("option",{value:"materialId",children:"Material ID"}),n.jsx("option",{value:"description",children:"Description"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:Ke==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:L,onChange:Je})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Qe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ue,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:pe.map((qe,mt)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:qe.materialId})}),n.jsx("td",{children:qe.description}),n.jsx("td",{children:qe.baseUnit}),n.jsx("td",{children:qe.unit}),n.jsx("td",{children:qe.price}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(qe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},mt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":L?`No materials found matching "${L}"`:'Enter search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>J(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},he=()=>{const[pe,De]=j.useState("name1"),[Ke,Nt]=j.useState([]),Je=qe=>{const mt=qe.target.value;Y(mt),Nt(filtered)},Qe=()=>{Nt(s),Y("")},Ue=()=>{Nt([]),Y("")};return n.jsxs(qt,{onClose:()=>X(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:pe,onChange:qe=>De(qe.target.value),children:[n.jsx("option",{value:"name1",children:"Name"}),n.jsx("option",{value:"city",children:"City"}),n.jsx("option",{value:"region",children:"Region"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:O,onChange:Je})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:Qe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ke.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ue,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ke.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Region"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:Ke.map((qe,mt)=>n.jsxs("tr",{children:[n.jsxs("td",{children:[qe.name1," ",qe.name2]}),n.jsx("td",{children:qe.city}),n.jsx("td",{children:qe.region}),n.jsx("td",{children:qe.contactNo}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>se(qe),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},mt))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":O?`No match found for "${O}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>X(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},ve=()=>{const[pe,De]=j.useState([]),[Ke,Nt]=j.useState("indentId"),[Je,Qe]=j.useState(""),Ue=Ie=>{const Xe=Ie.target.value;Qe(Xe);const Ye=e.filter(lt=>(Ke==="indentId"?lt.indentId:Ke==="categoryName"?lt.categoryName:lt.location)?.toLowerCase().includes(Xe.toLowerCase()));De(Ye)},qe=()=>{De(e),Qe("")},mt=()=>{De([]),Qe("")};return n.jsxs(qt,{onClose:()=>ie(!1),children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search Type"}),n.jsxs("select",{className:"form-select",value:Ke,onChange:Ie=>Nt(Ie.target.value),children:[n.jsx("option",{value:"indentId",children:"Indent ID"}),n.jsx("option",{value:"categoryName",children:"Category"}),n.jsx("option",{value:"location",children:"Location"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Query"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Je,onChange:Ue})]})]}),n.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[n.jsxs("button",{className:"btn btn-info",onClick:qe,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&n.jsxs("button",{className:"btn btn-outline-secondary",onClick:mt,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:pe.map((Ie,Xe)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ie.indentId}),n.jsx("td",{children:Ie.categoryName}),n.jsx("td",{children:Ie.location}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>z(Ie),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Je?`No match for "${Je}"`:'Enter a search term or click "View All"'})]})}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn btn-secondary",onClick:()=>ie(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Contract"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Contract"})]})})]})}),n.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingTwo",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-file-contract me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Contract Header"})]})]})})})})}),n.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Request:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:f?.label||"",onChange:pe=>{const De=pe.target.value;p({label:De,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>ie(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Customer:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:pe=>{const De=pe.target.value;y({label:De,value:null})}}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>X(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Location"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("select",{className:"form-select",value:W,onChange:pe=>ee(pe.target.value),children:[n.jsx("option",{value:"",children:"Select Location"}),Array.isArray(re)&&re.map((pe,De)=>n.jsx("option",{value:pe.name,children:pe.name},De))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-7",children:n.jsx("label",{className:"form-label",children:"Contract Category:"})}),n.jsx("div",{className:"col-xl-5",children:n.jsxs("select",{className:"form-select",value:x?.value||"",onChange:pe=>{const De=pe.target.value,Ke=r.find(Nt=>Nt._id===De);g(Ke?{label:Ke.categoryName,value:Ke._id}:null)},children:[n.jsx("option",{value:"",children:"Select"}),r.map(pe=>n.jsxs("option",{value:pe._id,children:[pe.categoryName," (",pe.prefix,")"]},pe._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity From Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:pe=>C(pe.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Validity To Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:pe=>E(pe.target.value),min:k})})]}),n.jsxs("div",{className:"col-xl-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Sales Group:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:pe=>d(pe.target.value),placeholder:"Enter or edit Sales Group"})})]}),n.jsxs("div",{className:"col-xl-4 row",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{className:"form-label",children:"Notes"})}),n.jsx("div",{className:"col-xl-10",children:n.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:S,onChange:pe=>w(pe.target.value)})})]})]})})})})})]}),n.jsxs("div",{className:"accordion-item mb-3",children:[n.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:n.jsx("div",{className:"col-lg-4 col-sm-6",children:n.jsx("div",{className:"accordion-header",id:"headingThree",children:n.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:n.jsxs("div",{className:"d-flex align-items-center w-100",children:[n.jsx("div",{className:"me-2",children:n.jsx("a",{href:"javascript:void(0);",children:n.jsx("span",{children:n.jsx("i",{className:"fas fa-chevron-down"})})})}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{children:n.jsx("i",{className:"fas fa-list me-2"})}),n.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),n.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:n.jsx("div",{className:"accordion-body",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("form",{onSubmit:Be,children:[n.jsx("div",{className:"table-responsive mb-3",children:n.jsxs("table",{className:"table-sm table-bordered mb-0",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Base Unit"}),n.jsx("th",{children:"Order Unit"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Price"})]})}),n.jsx("tbody",{children:A.map((pe,De)=>n.jsxs("tr",{children:[n.jsx("td",{children:De+1}),n.jsx("td",{children:n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:pe.materialId,onChange:Ke=>ue(De,"materialId",Ke.target.value)}),n.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{V(De),J(!0)},children:n.jsx("i",{className:"fas fa-search"})})]})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.description,onChange:Ke=>ue(De,"description",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",type:"number",value:pe.qty,onChange:Ke=>ue(De,"qty",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.baseUnit,onChange:Ke=>ue(De,"baseUnit",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.orderUnit,onChange:Ke=>ue(De,"orderUnit",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.location,onChange:Ke=>ue(De,"location",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.customerName,onChange:Ke=>ue(De,"customerName",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.unit,onChange:Ke=>ue(De,"unit",Ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{className:"form-control form-control-sm",value:pe.price,onChange:Ke=>{Ke.target.value=Ke.target.value.replace(/[^0-9.]/g,""),ue(De,"price",Ke.target.value)}})})]},De))})]})}),n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"mb-3",children:n.jsx("button",{type:"button",className:"btn btn-link",onClick:oe,children:"+ Add Contract Item"})})}),n.jsx("div",{className:"d-flex align-items-center justify-content-between",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Contract"})})]})})})})})]}),U&&n.jsx(xe,{}),F&&n.jsx(he,{}),Q&&n.jsx(ve,{}),ye&&n.jsx(Tt,{})]})]})})}function CTe(){const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(1),o=5,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");j.useEffect(()=>{Oe.get("/api/salescontracts",{params:{companyId:l,financialYear:c}}).then(k=>{const C=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(C)}).catch(k=>{console.error("Failed to fetch contracts",k),alert("Error loading contracts")})},[]);const d=k=>{const C=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Contract</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
            .contract-header { margin-bottom: 20px; }
            .validity-dates { display: flex; gap: 20px; margin: 10px 0; }
          </style>
        </head>
        <body>
          <div class="contract-header">
            <h2>Sales Contract: ${k.contractNumber}</h2>
            <p><strong>Indent ID:</strong> ${k.indentId}</p>
            <p><strong>Customer Name:</strong> ${k.customerName}</p>
            <div class="validity-dates">
              <p><strong>Validity From:</strong> ${k.validityFromDate||"N/A"}</p>
              <p><strong>Validity To:</strong> ${k.validityToDate||"N/A"}</p>
            </div>
            <p><strong>Location:</strong> ${k.location||"N/A"}</p>
            <p><strong>Sales Group:</strong> ${k.salesGroup||"N/A"}</p>
            <p><strong>Note:</strong> ${k.note||"N/A"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,A)=>{const I=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${A+1}</td>
                      <td>${E.materialId||"N/A"}</td>
                      <td>${E.description||"N/A"}</td>
                      <td>${E.qty||0}</td>
                      <td>${E.baseUnit||"N/A"}</td>
                      <td>${E.orderUnit||"N/A"}</td>
                      <td>${E.location||"N/A"}</td>
                      <td>${E.unit||"N/A"}</td>
                      <td>${E.price||0}</td>
                      <td>${I.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,A)=>E+A.qty*parseFloat(A.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;C.document.write(D),C.document.close(),C.print()},[u,h]=j.useState(""),[f,p]=j.useState(""),x=e.filter(k=>{const C=k.contractNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,A=f?new Date(f):null,I=(!E||D>=E)&&(!A||D<=A);return C&&I}),g=s*o,b=g-o,y=x.slice(b,g),S=Math.ceil(x.length/o),w=k=>i(k);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Contracts"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract List"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6"}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Contract No, Indent ID, Customer Name, or Location",value:r,onChange:k=>{a(k.target.value),i(1)}})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",value:f,min:u,onChange:k=>{p(k.target.value),i(1)}})]})]})}),n.jsx("div",{className:"card-body",children:y.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-file-contract fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:e.length===0?"No contracts found. Create your first contract!":"No contracts match your search criteria."})]}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Contract No"}),n.jsx("th",{children:"Indent ID"}),n.jsx("th",{children:"Customer Name"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Validity From"}),n.jsx("th",{children:"Validity To"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:y.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:k.contractNumber}),n.jsx("td",{children:k.indentId}),n.jsx("td",{children:k.customerName}),n.jsx("td",{children:k.location||"N/A"}),n.jsx("td",{children:k.validityFromDate?new Date(k.validityFromDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:k.validityToDate?new Date(k.validityToDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"N/A"}),n.jsx("td",{children:n.jsx("div",{className:"d-flex gap-1",children:n.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>d(k),title:"Print Contract",children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})})]},C))})]})})})})]}),S>=1&&n.jsx("nav",{className:"mt-1",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{onClick:()=>s>1&&w(s-1),className:"page-link",disabled:s===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const C=[],D=[];C.push(1);for(let I=Math.max(2,s-2);I<=Math.min(S-1,s+2);I++)C.push(I);S>1&&C.push(S);const E=[...new Set(C)].sort((I,L)=>I-L);let A;for(let I of E)A&&(I-A===2?D.push(A+1):I-A!==1&&D.push("...")),D.push(I),A=I;return D.map((I,L)=>I==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):n.jsx("li",{className:`page-item ${s===I?"active":""}`,children:n.jsx("button",{onClick:()=>w(I),className:"page-link",children:I})},I))})(),n.jsx("li",{className:`page-item ${s===S?"disabled":""}`,children:n.jsx("button",{onClick:()=>s<S&&w(s+1),className:"page-link",disabled:s===S,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})}function kTe(){const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10}),[o,l]=j.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[c,d]=j.useState({byType:[],byMethod:[]}),[u,h]=j.useState(null),[f,p]=j.useState(!1),[x,g]=j.useState(!1),[b,y]=j.useState(null),[S,w]=j.useState({type:"",text:""}),k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),D=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{E(),A()},[s.page]),j.useEffect(()=>{const M=setTimeout(()=>{i(V=>({...V,page:1})),E()},500);return()=>clearTimeout(M)},[s.recordType,s.status,s.paymentMethod,s.entityName,s.startDate,s.endDate,s.limit]);const E=async()=>{a(!0);try{const M=new URLSearchParams;Object.entries(s).forEach(([W,ee])=>{ee&&M.append(W,ee)}),console.log("Fetching payments with filters:",k,C);const V=await Oe.get(`/api/payment?${M}`,{params:{companyId:k,financialYear:C}});t(V.data.payments||[]),l(V.data.pagination||{})}catch(M){console.error("Error fetching payments:",M)}finally{a(!1)}},A=async()=>{try{console.log("Fetching summary for:",{companyId:k,financialYear:C});const M=await Oe.get("/api/payment-summary",{params:{companyId:k,financialYear:C}});console.log("Summary response:",M.data),d({byType:M.data.byType||[],byMethod:M.data.byMethod||[],today:M.data.today||{totalAmount:0,count:0}})}catch(M){console.error("Error fetching summary:",M),w({type:"error",text:"Failed to fetch payment summary."})}},I=M=>{const{name:V,value:W}=M.target;i(ee=>({...ee,[V]:W}))},L=()=>{i({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10})},P=M=>{i(V=>({...V,page:M}))},O=M=>{h(M),p(!0)},Y=M=>{y({...M,paymentDate:new Date(M.paymentDate).toISOString().split("T")[0]}),g(!0)},q=M=>{const{name:V,value:W}=M.target;y(ee=>({...ee,[V]:W}))},K=async M=>{M.preventDefault();try{const V={paymentAmount:parseFloat(b.paymentAmount),paymentMethod:b.paymentMethod,status:b.status,description:b.description,companyId:D,financialYear:C,paymentDate:b.paymentDate,paymentDetails:b.paymentDetails||{}};await Oe.put(`/api/payment/${b._id}`,V),w({type:"success",text:"Payment updated successfully!"}),g(!1),E(),setTimeout(()=>{w({type:"",text:""})},3e3)}catch(V){console.error("Error updating payment:",V),w({type:"error",text:"Failed to update payment. Please try again."})}},U=M=>{const V=window.open("","_blank"),W=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt - ${M.paymentDocNumber}</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          .company-name { 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 5px;
          }
          .receipt-title { 
            font-size: 18px; 
            color: #666;
          }
          .details { 
            margin: 20px 0; 
          }
          .detail-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
          }
          .detail-label { 
            font-weight: bold; 
            width: 40%;
          }
          .detail-value { 
            width: 60%;
            text-align: right;
          }
          .amount { 
            font-size: 20px; 
            font-weight: bold; 
            color: #28a745;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
          }
          .footer { 
            margin-top: 40px; 
            text-align: center; 
            font-size: 12px; 
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 20px;
          }
          .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
          }
          .status-cleared { background: #d4edda; color: #155724; }
          .status-pending { background: #fff3cd; color: #856404; }
          .status-bounced { background: #f8d7da; color: #721c24; }
          .status-cancelled { background: #e2e3e5; color: #383d41; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">Your Company Name</div>
          <div class="receipt-title">PAYMENT RECEIPT</div>
        </div>
        
        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Receipt Number:</span>
            <span class="detail-value">${M.paymentDocNumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date & Time:</span>
            <span class="detail-value">${J(M.paymentDate)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Type:</span>
            <span class="detail-value">${M.recordType.toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">${M.recordType==="vendor"?"Vendor":"Customer"} Name:</span>
            <span class="detail-value">${M.entityName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Original Document:</span>
            <span class="detail-value">${M.docnumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Method:</span>
            <span class="detail-value">${M.paymentMethod.replace("_"," ").toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">
              <span class="status-badge status-${M.status}">${M.status.toUpperCase()}</span>
            </span>
          </div>
        </div>

        <div class="amount">
          AMOUNT PAID: ${F(M.paymentAmount)}
        </div>

        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Previous Balance:</span>
            <span class="detail-value">${F(M.previousBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">New Balance:</span>
            <span class="detail-value">${F(M.newBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Balance Reduction:</span>
            <span class="detail-value">${F(M.previousBalance-M.newBalance)}</span>
          </div>
        </div>

        ${M.description?`
          <div class="details">
            <div class="detail-row">
              <span class="detail-label">Description:</span>
              <span class="detail-value">${M.description}</span>
            </div>
          </div>
        `:""}

        ${M.paymentDetails?`
          <div class="details">
            <h4>Payment Details:</h4>
            ${M.paymentMethod==="cheque"&&M.paymentDetails.chequeNumber?`
              <div class="detail-row">
                <span class="detail-label">Cheque Number:</span>
                <span class="detail-value">${M.paymentDetails.chequeNumber}</span>
              </div>
            `:""}
            ${M.paymentMethod==="bank_transfer"&&M.paymentDetails.transactionId?`
              <div class="detail-row">
                <span class="detail-label">Transaction ID:</span>
                <span class="detail-value">${M.paymentDetails.transactionId}</span>
              </div>
            `:""}
          </div>
        `:""}

        <div class="footer">
          <p>Thank you for your payment!</p>
          <p>This is a computer-generated receipt. No signature required.</p>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>

        <div class="no-print" style="text-align: center; margin-top: 30px;">
          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Receipt</button>
          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>
        </div>
      </body>
      </html>
    `;V.document.write(W),V.document.close(),V.focus()},J=M=>new Date(M).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),F=M=>`${parseFloat(M).toFixed(2)}`,X=M=>`badge bg-${{pending:"warning",cleared:"success",bounced:"danger",cancelled:"secondary"}[M]||"secondary"}`,Q=M=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[M]||"ti-payment",ie=()=>{if(e.length===0){alert("No data to export");return}const M=e.map(ne=>({"Payment Doc":ne.paymentDocNumber,Date:J(ne.paymentDate),Type:ne.recordType,Entity:ne.entityName,"Doc Number":ne.docnumber,Amount:ne.paymentAmount,Method:ne.paymentMethod,Status:ne.status,"Previous Balance":ne.previousBalance,"New Balance":ne.newBalance})),V=[Object.keys(M[0]).join(","),...M.map(ne=>Object.values(ne).join(","))].join(`
`),W=new Blob([V],{type:"text/csv"}),ee=window.URL.createObjectURL(W),re=document.createElement("a");re.href=ee,re.download=`payments_${new Date().toISOString().split("T")[0]}.csv`,re.click(),window.URL.revokeObjectURL(ee)};return console.log("Payment summary state:",c),n.jsxs("div",{className:"content",children:[S.text&&n.jsxs("div",{className:`alert alert-${S.type==="success"?"success":"danger"} alert-dismissible fade show`,children:[S.text,n.jsx("button",{type:"button",className:"btn-close",onClick:()=>w({type:"",text:""})})]}),n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Payment Records"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/ledger",children:"Ledger"})}),n.jsx("li",{className:"breadcrumb-item",children:"Payments"})]})})]}),n.jsxs("div",{className:"",children:[n.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[n.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),n.jsxs("button",{onClick:ie,className:"btn btn-outline-secondary",children:[n.jsx("i",{className:"ti ti-download"})," Export"]})]})]}),n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-primary-light rounded",children:n.jsx("i",{className:"ti ti-receipt text-primary"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Total Payments"}),n.jsx("h4",{className:"mb-0",children:o.totalCount})]})]})})})}),n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-success-light rounded",children:n.jsx("i",{className:"ti ti-building-store text-success"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Vendor Payments"}),n.jsx("h4",{className:"mb-0",children:F(c.byType.find(M=>M._id==="vendor")?.totalAmount||0)})]})]})})})}),n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-info-light rounded",children:n.jsx("i",{className:"ti ti-users text-info"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Customer Payments"}),n.jsx("h4",{className:"mb-0",children:F(c.byType.find(M=>M._id==="customer")?.totalAmount||0)})]})]})})})}),n.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:n.jsx("div",{className:"card border-0 shadow-sm",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"avatar avatar-md bg-warning-light rounded",children:n.jsx("i",{className:"ti ti-cash text-warning"})})}),n.jsxs("div",{className:"flex-grow-1 ms-3",children:[n.jsx("p",{className:"text-muted mb-1",children:"Today's Total"}),n.jsx("h4",{className:"mb-0",children:F(e.filter(M=>new Date(M.paymentDate).toDateString()===new Date().toDateString()).reduce((M,V)=>M+V.paymentAmount,0))})]})]})})})})]}),n.jsxs("div",{className:"card mb-4",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Filters"})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Type"}),n.jsxs("select",{className:"form-select",name:"recordType",value:s.recordType,onChange:I,children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"vendor",children:"Vendor"}),n.jsx("option",{value:"customer",children:"Customer"})]})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-select",name:"status",value:s.status,onChange:I,children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"cleared",children:"Cleared"}),n.jsx("option",{value:"bounced",children:"Bounced"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Method"}),n.jsxs("select",{className:"form-select",name:"paymentMethod",value:s.paymentMethod,onChange:I,children:[n.jsx("option",{value:"",children:"All Methods"}),n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"cheque",children:"Cheque"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"Entity Name"}),n.jsx("input",{type:"text",className:"form-control",name:"entityName",placeholder:"Search entity...",value:s.entityName,onChange:I})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",name:"startDate",value:s.startDate,onChange:I})]}),n.jsxs("div",{className:"col-md-2 mb-3",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",name:"endDate",value:s.endDate,onChange:I})]})]}),n.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[n.jsxs("button",{className:"btn btn-outline-secondary",onClick:L,children:[n.jsx("i",{className:"ti ti-refresh"})," Clear Filters"]}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("label",{className:"form-label me-2 mb-0",children:"Show:"}),n.jsxs("select",{className:"form-select",name:"limit",value:s.limit,onChange:I,style:{width:"auto"},children:[n.jsx("option",{value:"10",children:"10"}),n.jsx("option",{value:"25",children:"25"}),n.jsx("option",{value:"50",children:"50"}),n.jsx("option",{value:"100",children:"100"})]})]})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Payment Records"})}),n.jsx("div",{className:"card-body",children:r?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"ti ti-receipt-off text-muted",style:{fontSize:"3rem"}}),n.jsx("h5",{className:"text-muted mt-2",children:"No payments found"}),n.jsx("p",{className:"text-muted",children:"Try adjusting your filters or record a new payment."}),n.jsxs("a",{href:"/payments",className:"btn btn-primary",children:[n.jsx("i",{className:"ti ti-plus"})," Record Payment"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Payment Doc"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Entity"}),n.jsx("th",{children:"Original Doc"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Method"}),n.jsx("th",{children:"Balance Change"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map((M,V)=>n.jsxs("tr",{children:[n.jsx("td",{children:(o.currentPage-1)*s.limit+V+1}),n.jsx("td",{children:n.jsx("strong",{className:"text-primary",children:M.paymentDocNumber})}),n.jsx("td",{children:n.jsx("small",{children:J(M.paymentDate)})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${M.recordType==="vendor"?"success":"info"}`,children:M.recordType})}),n.jsx("td",{children:n.jsx("div",{children:n.jsx("strong",{children:M.entityName})})}),n.jsx("td",{children:n.jsx("span",{className:"text-muted",children:M.docnumber})}),n.jsx("td",{children:n.jsx("strong",{className:"text-success",children:F(M.paymentAmount)})}),n.jsx("td",{children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("i",{className:`${Q(M.paymentMethod)} me-2`}),n.jsx("span",{className:"text-capitalize",children:M.paymentMethod.replace("_"," ")})]})}),n.jsx("td",{children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted",children:"From:"})," ",F(M.previousBalance)]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted",children:"To:"})," ",F(M.newBalance)]})]})}),n.jsx("td",{children:n.jsx("span",{className:X(M.status),children:M.status})}),n.jsx("td",{children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Actions"}),n.jsxs("ul",{className:"dropdown-menu",children:[n.jsx("li",{children:n.jsxs("button",{className:"dropdown-item",onClick:()=>O(M),children:[n.jsx("i",{className:"ti ti-eye me-2"}),"View Details"]})}),n.jsx("li",{children:n.jsxs("button",{className:"dropdown-item",onClick:()=>U(M),children:[n.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})}),n.jsx("li",{children:n.jsx("hr",{className:"dropdown-divider"})}),n.jsx("li",{children:n.jsxs("button",{className:"dropdown-item text-primary",onClick:()=>Y(M),disabled:M.status==="cancelled",children:[n.jsx("i",{className:"ti ti-edit me-2"}),"Edit"]})})]})]})})]},M._id))})]})}),o.totalPages>1&&n.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[n.jsxs("div",{className:"text-muted",children:["Showing ",(o.currentPage-1)*s.limit+1," to"," ",Math.min(o.currentPage*s.limit,o.totalCount)," of"," ",o.totalCount," entries"]}),n.jsx("nav",{children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${o.hasPrev?"":"disabled"}`,children:n.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage-1),disabled:!o.hasPrev,children:n.jsx("i",{className:"ti ti-chevron-left"})})}),[...Array(Math.min(5,o.totalPages))].map((M,V)=>{const W=Math.max(1,o.currentPage-2)+V;return W<=o.totalPages?n.jsx("li",{className:`page-item ${W===o.currentPage?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>P(W),children:W})},W):null}),n.jsx("li",{className:`page-item ${o.hasNext?"":"disabled"}`,children:n.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage+1),disabled:!o.hasNext,children:n.jsx("i",{className:"ti ti-chevron-right"})})})]})})]})]})})]}),f&&u&&n.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Payment Details"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("h6",{className:"text-muted mb-3",children:"Payment Information"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Payment Document:"}),n.jsx("div",{children:u.paymentDocNumber})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Date & Time:"}),n.jsx("div",{children:J(u.paymentDate)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Amount:"}),n.jsx("div",{className:"text-success",children:F(u.paymentAmount)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Payment Method:"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("i",{className:`${Q(u.paymentMethod)} me-2`}),n.jsx("span",{className:"text-capitalize",children:u.paymentMethod.replace("_"," ")})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Status:"}),n.jsx("div",{children:n.jsx("span",{className:X(u.status),children:u.status})})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("h6",{className:"text-muted mb-3",children:"Entity & Transaction Details"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Entity Type:"}),n.jsx("div",{className:"text-capitalize",children:u.recordType})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Entity Name:"}),n.jsx("div",{children:u.entityName})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Original Document:"}),n.jsx("div",{children:u.docnumber})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("strong",{children:"Balance Changes:"}),n.jsxs("div",{children:[n.jsxs("div",{children:["Previous: ",F(u.previousBalance)]}),n.jsxs("div",{children:["New: ",F(u.newBalance)]}),n.jsxs("div",{className:"text-success",children:["Reduction: ",F(u.previousBalance-u.newBalance)]})]})]})]})]}),u.description&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{className:"text-muted",children:"Description"}),n.jsx("p",{className:"bg-light p-3 rounded",children:u.description})]}),u.paymentDetails&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h6",{className:"text-muted",children:"Payment Method Details"}),n.jsxs("div",{className:"bg-light p-3 rounded",children:[u.paymentMethod==="cheque"&&n.jsxs(n.Fragment,{children:[u.paymentDetails.chequeNumber&&n.jsxs("div",{children:[n.jsx("strong",{children:"Cheque Number:"})," ",u.paymentDetails.chequeNumber]}),u.paymentDetails.bankName&&n.jsxs("div",{children:[n.jsx("strong",{children:"Bank:"})," ",u.paymentDetails.bankName]})]}),u.paymentMethod==="bank_transfer"&&n.jsxs(n.Fragment,{children:[u.paymentDetails.accountNumber&&n.jsxs("div",{children:[n.jsx("strong",{children:"Account Number:"})," ",u.paymentDetails.accountNumber]}),u.paymentDetails.transactionId&&n.jsxs("div",{children:[n.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]}),u.paymentMethod==="upi"&&n.jsxs(n.Fragment,{children:[u.paymentDetails.upiId&&n.jsxs("div",{children:[n.jsx("strong",{children:"UPI ID:"})," ",u.paymentDetails.upiId]}),u.paymentDetails.transactionId&&n.jsxs("div",{children:[n.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Close"}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>U(u),children:[n.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})]})]})})}),x&&b&&n.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Edit Payment - ",b.paymentDocNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(!1)})]}),n.jsxs("form",{onSubmit:K,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Amount *"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:""}),n.jsx("input",{type:"number",className:"form-control",name:"paymentAmount",value:b.paymentAmount,onChange:q,min:"0",step:"0.01",required:!0})]})]}),n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Method *"}),n.jsxs("select",{className:"form-select",name:"paymentMethod",value:b.paymentMethod,onChange:q,required:!0,children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"cheque",children:"Cheque"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Date *"}),n.jsx("input",{type:"date",className:"form-control",name:"paymentDate",value:b.paymentDate,onChange:q,required:!0})]}),n.jsxs("div",{className:"col-md-6 mb-3",children:[n.jsx("label",{className:"form-label",children:"Status *"}),n.jsxs("select",{className:"form-select",name:"status",value:b.status,onChange:q,required:!0,children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"cleared",children:"Cleared"}),n.jsx("option",{value:"bounced",children:"Bounced"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"col-12 mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",name:"description",value:b.description||"",onChange:q,rows:"3",placeholder:"Payment description or notes..."})]})]}),n.jsxs("div",{className:"alert alert-warning",children:[n.jsx("i",{className:"ti ti-alert-triangle me-2"}),n.jsx("strong",{children:"Note:"})," Editing payment details will not automatically update the balance in the original invoice/billing record. You may need to manually adjust balances if necessary."]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),n.jsxs("button",{type:"submit",className:"btn btn-primary",children:[n.jsx("i",{className:"ti ti-check me-2"}),"Update Payment"]})]})]})]})})})]})}function _Te(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(1),[o,l]=j.useState(1),[c,d]=j.useState(!1),[u,h]=j.useState([]),[f,p]=j.useState(Date.now()),[x,g]=j.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[b,y]=j.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[S,w]=j.useState(""),[k,C]=j.useState(""),[D,E]=j.useState(""),[A,I]=j.useState(""),[L,P]=j.useState(""),[O,Y]=j.useState(""),[q,K]=j.useState(!1),[U,J]=j.useState(""),[F,X]=j.useState(""),[Q,ie]=j.useState(""),[M,V]=j.useState(""),[W,ee]=j.useState(!1),[re,ne]=j.useState(null),[ce,ae]=j.useState(null),[Z,de]=j.useState(null),[z,se]=j.useState(new Date),[Ne,ue]=j.useState({type:"",text:""}),oe=localStorage.getItem("selectedCompanyId"),ye=localStorage.getItem("financialYear"),je=10;j.useEffect(()=>{He();const ke=ot=>{ot.key==="paymentUpdated"&&(ue({type:"info",text:"Payment updated in another tab. Refreshing ledger..."}),He(),setTimeout(()=>ue({type:"",text:""}),3e3))};return window.addEventListener("storage",ke),()=>{window.removeEventListener("storage",ke),Z&&clearInterval(Z)}},[]);const Me=async()=>{try{return(await Oe.get("/api/payment",{params:{companyId:oe,financialYear:ye,limit:1e3}})).data.payments||[]}catch(ke){return console.error("Error fetching payments:",ke),[]}},He=async()=>{d(!0);try{const[ke,ot,bt]=await Promise.all([Oe.get("/api/invoiceform",{params:{companyId:oe,financialYear:ye}}),Oe.get("/api/billingform",{params:{companyId:oe,financialYear:ye}}),Me()]);t(ke.data||[]),a(ot.data||[]),h(bt||[]),p(Date.now()),et(ke.data||[],ot.data||[]),se(new Date)}catch(ke){console.error("Error fetching data",ke),ue({type:"error",text:"Failed to fetch data. Please refresh the page."})}finally{d(!1)}},et=(ke,ot)=>{const bt=ke.reduce((Ft,rr)=>{const pr=rr.category?.toLowerCase()==="debit"&&(rr.finalTotal||rr.netAmount)||0,jr=rr.category?.toLowerCase()==="credit"&&(rr.finalTotal||rr.netAmount)||0,vt=rr.balance||0;let Lt=pr,fe=jr;return pr>0&&jr===0?fe=-vt:jr>0&&pr===0&&(Lt=-vt),{totalDebit:Ft.totalDebit+Lt,totalCredit:Ft.totalCredit+fe,totalBalance:Ft.totalBalance+(fe-Lt),outstandingBalance:Ft.outstandingBalance+vt}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Xt=ot.reduce((Ft,rr)=>{const pr=rr.category?.toLowerCase()==="debit"&&rr.finalTotal||0,jr=rr.category?.toLowerCase()==="credit"&&rr.finalTotal||0,vt=rr.balance||0;let Lt=pr,fe=jr;return pr>0&&jr===0?fe=-vt:jr>0&&pr===0&&(Lt=-vt),{totalDebit:Ft.totalDebit+Lt,totalCredit:Ft.totalCredit+fe,totalBalance:Ft.totalBalance+(Lt-fe),outstandingBalance:Ft.outstandingBalance+vt}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0});g(bt),y(Xt)},ft=(ke,ot,bt)=>{let Xt=ke,Ft=ot;return ke>0&&ot===0?Ft=ke-bt:ot>0&&ke===0&&(Xt=ot-bt),{adjustedDebit:Xt,adjustedCredit:Ft}},Be=(ke,ot,bt)=>!u||u.length===0?[]:u.filter(Xt=>{const Ft=Xt.docnumber===ke||Xt.invoiceNumber===ke||Xt.originalDocNumber===ke;return Xt.recordType===bt&&Ft}),dt=(ke,ot)=>{ae(ke),ne(ot),ee(!0)},Tt=e.map((ke,ot)=>{const bt=ke.category?.toLowerCase()==="debit"&&(ke.finalTotal||ke.netAmount)||0,Xt=ke.category?.toLowerCase()==="credit"&&(ke.finalTotal||ke.netAmount)||0,Ft=ke?.vendor||"Unknown Vendor",rr=ke?.docnumber||"_",pr=Be(rr,Ft,"vendor"),jr=pr.filter(_e=>_e.status==="cleared"),vt=jr.reduce((_e,Le)=>_e+(Le.paymentAmount||0),0),Lt=jr.sort((_e,Le)=>new Date(Le.paymentDate)-new Date(_e.paymentDate))[0];let fe=ke.balance||0;fe<0&&(fe=0);const{adjustedDebit:Re,adjustedCredit:Te}=ft(bt,Xt,fe);return{id:ke._id||ot,name:Ft,docnumber:rr,debit:Re,credit:Te,balance:fe,originalAmount:ke.finalTotal||ke.netAmount||0,lastPaymentAmount:Lt?.paymentAmount||0,lastPaymentDate:Lt?.paymentDate||null,lastPaymentMethod:Lt?.paymentMethod||null,createdAt:ke.createdAt||new Date,category:ke.category||"debit",originalDebit:bt,originalCredit:Xt,totalPayments:vt,paymentCount:jr.length,pendingPayments:pr.filter(_e=>_e.status==="pending").length,specificInvoicePayments:pr,allPaymentStatuses:pr.map(_e=>_e.status),paymentMethods:[...new Set(pr.map(_e=>_e.paymentMethod))],firstPaymentDate:pr.length>0?pr.sort((_e,Le)=>new Date(_e.paymentDate)-new Date(Le.paymentDate))[0].paymentDate:null}}),At=r.map((ke,ot)=>{const bt=ke.category?.toLowerCase()==="debit"&&ke.finalTotal||0,Xt=ke.category?.toLowerCase()==="credit"&&ke.finalTotal||0,Ft=ke?.customer||"Unknown Customer",rr=ke.docnumber||"_",pr=Be(rr,Ft,"customer"),jr=pr.filter(_e=>_e.status==="cleared"),vt=jr.reduce((_e,Le)=>_e+(Le.paymentAmount||0),0),Lt=jr.sort((_e,Le)=>new Date(Le.paymentDate)-new Date(_e.paymentDate))[0];let fe=ke.balance||0;fe<0&&(fe=0);const{adjustedDebit:Re,adjustedCredit:Te}=ft(bt,Xt,fe);return{id:ke._id||ot,docnumber:rr,name:Ft,debit:Re,credit:Te,balance:fe,originalAmount:ke.finalTotal||0,lastPaymentAmount:Lt?.paymentAmount||0,lastPaymentDate:Lt?.paymentDate||null,lastPaymentMethod:Lt?.paymentMethod||null,createdAt:ke.createdAt||new Date,category:ke.category||"debit",originalDebit:bt,originalCredit:Xt,totalPayments:vt,paymentCount:jr.length,pendingPayments:pr.filter(_e=>_e.status==="pending").length,specificInvoicePayments:pr,allPaymentStatuses:pr.map(_e=>_e.status),paymentMethods:[...new Set(pr.map(_e=>_e.paymentMethod))],firstPaymentDate:pr.length>0?pr.sort((_e,Le)=>new Date(_e.paymentDate)-new Date(Le.paymentDate))[0].paymentDate:null}}),qt=[...new Set(Tt.map(ke=>ke.name))],xe=[...new Set(At.map(ke=>ke.name))],he=(ke,ot,bt)=>!ot&&!bt?ke:ke.filter(Xt=>{const Ft=new Date(Xt.createdAt),rr=ot?new Date(ot):null,pr=bt?new Date(bt):null;return!(rr&&Ft<rr||pr&&Ft>pr)});let ve=S?Tt.filter(ke=>ke.name===S):Tt;ve=he(ve,D,A);let pe=k?At.filter(ke=>ke.name===k):At;pe=he(pe,L,O),console.log("filteredCustomerData",pe);const De=ve.reduce((ke,ot)=>({totalDebit:ke.totalDebit+ot.debit,totalCredit:ke.totalCredit+ot.credit,totalBalance:ke.totalBalance+(ot.credit-ot.debit),outstandingBalance:ke.outstandingBalance+ot.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Ke=pe.reduce((ke,ot)=>({totalDebit:ke.totalDebit+ot.debit,totalCredit:ke.totalCredit+ot.credit,totalBalance:ke.totalBalance+(ot.debit-ot.credit),outstandingBalance:ke.outstandingBalance+ot.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Nt=(ke,ot="")=>{J(ke),X(ot),ie(""),V(""),K(!0)},Je=(ke,ot,bt)=>{const Xt=["S.No","Invoice/Doc Number",bt==="vendor"?"Vendor Name":"Customer Name","Invoice Original Amount","Current Debit","Current Credit","Outstanding Balance","Payment Status","Total Payments Made (This Invoice)","Payment Count (This Invoice)","Cleared Payments Count","Pending Payments Count","Payment Methods Used","First Payment Date","Last Payment Date","Last Payment Amount","Last Payment Method","Invoice Created Date","Detailed Payment History","Payment Status Breakdown","Balance Calculation Details"],Ft=[];Ft.push(Xt.join(",")),ke.forEach((Lt,fe)=>{const Re=Lt.specificInvoicePayments||[],Te=Re.map(wt=>{const st=Ye(wt.paymentDate),St=(wt.paymentAmount||0).toFixed(2),Ct=wt.paymentMethod||"N/A",Jt=wt.status||"N/A",ir=wt.paymentDocNumber||"N/A",xr=wt.description||"N/A";return`[${st}] Amount: ${St} | Method: ${Ct} | Status: ${Jt.toUpperCase()} | Reference: ${ir} | Description: ${xr} `}).join(` 
 `),_e=Lt.allPaymentStatuses.reduce((wt,st)=>(wt[st]=(wt[st]||0)+1,wt),{}),Le=Object.entries(_e).map(([wt,st])=>`${wt.toUpperCase()}: ${st}`).join(", "),Ve=`Original: ${Lt.originalAmount.toFixed(2)} | Total Paid: ${Lt.totalPayments.toFixed(2)} | Outstanding: ${Lt.balance.toFixed(2)} | Calculation: ${Lt.originalAmount.toFixed(2)} - ${Lt.totalPayments.toFixed(2)} = ${Lt.balance.toFixed(2)}`,pt=[fe+1,`"${Lt.docnumber}"`,`"${Lt.name}"`,Lt.originalAmount.toFixed(2),Lt.debit.toFixed(2),Lt.credit.toFixed(2),Lt.balance.toFixed(2),lt(Lt.balance,Lt.originalAmount).status,Lt.totalPayments.toFixed(2),Lt.paymentCount,Re.filter(wt=>wt.status==="cleared").length,Re.filter(wt=>wt.status==="pending").length,`"${Lt.paymentMethods.join(", ")||"No payments"}"`,Lt.firstPaymentDate?Xe(Lt.firstPaymentDate):"N/A",Lt.lastPaymentDate?Xe(Lt.lastPaymentDate):"N/A",Lt.lastPaymentAmount.toFixed(2),`"${Lt.lastPaymentMethod||"N/A"}"`,Xe(Lt.createdAt),`"${Te||"No payment history for this invoice"}"`,`"${Le||"No payment status available"}"`,`"${Ve}"`];Ft.push(pt.join(","))}),Ft.push(""),Ft.push("Invoice Number,Entity Name,Invoice Amount,Payments Received,Outstanding,Payment Efficiency %,First Payment,Last Payment,Payment Methods,Status"),ke.forEach(Lt=>{const fe=Lt.originalAmount>0?(Lt.totalPayments/Lt.originalAmount*100).toFixed(1):0;Ft.push([`"${Lt.docnumber}"`,`"${Lt.name}"`,Lt.originalAmount.toFixed(2),Lt.totalPayments.toFixed(2),Lt.balance.toFixed(2),`${fe}%`,Lt.firstPaymentDate?Xe(Lt.firstPaymentDate):"No payments",Lt.lastPaymentDate?Xe(Lt.lastPaymentDate):"No payments",`"${Lt.paymentMethods.join(", ")||"None"}"`,lt(Lt.balance,Lt.originalAmount).status].join(","))}),Ft.push(""),Ft.push(`"Financial Year","${ye}"`),Ft.push(`"Total Invoices","${ke.length}"`),Ft.push(`"Total Payment Records","${ke.reduce((Lt,fe)=>Lt+fe.paymentCount,0)}"`);const rr=Ft.join(`
`),pr=new Blob([rr],{type:"text/csv;charset=utf-8;"}),jr=document.createElement("a"),vt=URL.createObjectURL(pr);jr.setAttribute("href",vt),jr.setAttribute("download",ot),jr.style.visibility="hidden",document.body.appendChild(jr),jr.click(),document.body.removeChild(jr)},Qe=()=>{let ke=[],ot="";U==="vendor"?(ke=F?Tt.filter(Xt=>Xt.name===F):Tt,ot=F?`${F}_vendor_detailed_invoice_payments`:"all_vendor_detailed_invoice_payments"):(ke=F?At.filter(Xt=>Xt.name===F):At,ot=F?`${F}_customer_detailed_invoice_payments`:"all_customer_detailed_invoice_payments"),ke=he(ke,Q,M),(Q||M)&&(ot+=`_${Q||"start"}_to_${M||"end"}`);const bt=new Date().toISOString().slice(0,19).replace(/:/g,"-");ot+=`_${bt}.csv`,Je(ke,ot,U),K(!1)},Ue=(ke,ot)=>ke.slice((ot-1)*je,ot*je),qe=Math.ceil(ve.length/je)||1,mt=Math.ceil(pe.length/je)||1,Ie=ke=>{const ot=parseFloat(ke||0),Xt=`${Math.abs(ot).toFixed(2)}`;return ot<0?`(${Xt})`:Xt},Xe=ke=>ke?new Date(ke).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-",Ye=ke=>ke?new Date(ke).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",lt=(ke,ot)=>ke<=0?{status:"Paid",class:"success"}:ke===ot?{status:"Unpaid",class:"danger"}:{status:"Partial",class:"warning"},Mt=ke=>ke>0?"text-success":ke<0?"text-danger":"text-muted",Ae=ke=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[ke]||"ti ti-payment";return n.jsxs("div",{className:"content",children:[Ne.text&&n.jsxs("div",{className:`alert alert-${Ne.type==="success"?"success":Ne.type==="info"?"info":"danger"} alert-dismissible fade show`,children:[Ne.text,n.jsx("button",{type:"button",className:"btn-close",onClick:()=>ue({type:"",text:""})})]}),n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Ledger"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),n.jsx("li",{className:"breadcrumb-item active",children:"Ledger"})]})})]}),n.jsxs("div",{children:[n.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[n.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),n.jsxs("a",{href:"/paymentdisplay",className:"btn btn-outline-primary me-2",children:[n.jsx("i",{className:"ti ti-eye"})," View Payments"]}),n.jsxs("button",{onClick:He,className:"btn btn-outline-secondary",children:[n.jsx("i",{className:"ti ti-refresh"})," Refresh Now"]})]})]}),n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h6",{className:"mb-0",children:"Vendor Summary"}),n.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("vendor"),title:"Download Detailed Vendor Payment Data",children:n.jsx("i",{className:"ti ti-download"})})]}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-12 mb-2",children:[n.jsx("label",{children:"Select Vendor: "}),n.jsxs("select",{value:S,onChange:ke=>{w(ke.target.value),i(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[n.jsx("option",{value:"",children:"All Vendors"}),qt.map(ke=>n.jsx("option",{value:ke,children:ke},ke))]}),S&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>w(""),children:"Clear"}),n.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Nt("vendor",S),title:`Download detailed ${S} payment data`,children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"From Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:ke=>{E(ke.target.value),i(1)}})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"To Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:A,onChange:ke=>{I(ke.target.value),i(1)}})]})]}),n.jsxs("div",{className:"row text-center",children:[n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),n.jsx("h6",{className:"text-danger",children:Ie(De.totalDebit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),n.jsx("h6",{className:"text-success",children:Ie(De.totalCredit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),n.jsx("h6",{className:De.totalBalance>=0?"text-success":"text-danger",children:Ie(De.totalBalance)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),n.jsx("h6",{className:"text-warning",children:Ie(De.outstandingBalance)})]})]})]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card border-0 shadow-sm",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h6",{className:"mb-0",children:"Customer Summary"}),n.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("customer"),title:"Download Detailed Customer Payment Data",children:n.jsx("i",{className:"ti ti-download"})})]}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-12 mb-2",children:[n.jsx("label",{children:"Select Customer: "}),n.jsxs("select",{value:k,onChange:ke=>{C(ke.target.value),l(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[n.jsx("option",{value:"",children:"All Customers"}),xe.map(ke=>n.jsx("option",{value:ke,children:ke},ke))]}),k&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>C(""),children:"Clear"}),n.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Nt("customer",k),title:`Download detailed ${k} payment data`,children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"From Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:L,onChange:ke=>{P(ke.target.value),l(1)}})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"To Date:"}),n.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:ke=>{Y(ke.target.value),l(1)}})]})]}),n.jsxs("div",{className:"row text-center",children:[n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),n.jsx("h6",{className:"text-danger",children:Ie(Ke.totalDebit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),n.jsx("h6",{className:"text-success",children:Ie(Ke.totalCredit)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),n.jsx("h6",{className:Ke.totalBalance>=0?"text-success":"text-danger",children:Ie(Ke.totalBalance)})]}),n.jsxs("div",{className:"col-3",children:[n.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),n.jsx("h6",{className:"text-warning",children:Ie(Ke.outstandingBalance)})]})]})]})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-12 mb-4",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h5",{className:"mb-0",children:"Vendor Ledger"}),n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsxs("small",{className:"me-3",children:["Total Records: ",ve.length]}),n.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("vendor",S),children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),n.jsx("div",{className:"card-body",children:c?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"DocNumber"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Original Amount"}),n.jsx("th",{children:"Debit"}),n.jsx("th",{children:"Credit"}),n.jsx("th",{children:"Current Balance"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Payment Summary"}),n.jsx("th",{children:"Payment Timeline"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Ue(ve,s).map((ke,ot)=>{const bt=lt(Number(ke.balance),ke.originalAmount),Xt=ke.originalAmount>0?(ke.totalPayments/ke.originalAmount*100).toFixed(1):0;return n.jsxs("tr",{children:[n.jsx("td",{children:(s-1)*je+ot+1}),n.jsx("td",{children:n.jsx("strong",{className:"text-primary",children:ke.docnumber})}),n.jsx("td",{children:n.jsx("strong",{children:ke.name})}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{children:Ie(ke.originalAmount)})}),n.jsx("td",{className:`text-end fw-bold ${Mt(ke.debit)}`,children:Ie(ke.totalPayments)}),n.jsx("td",{className:`text-end fw-bold ${Mt(ke.credit)}`,children:Ie(ke.balance)}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{className:`${ke.balance>0?"text-danger":"text-success"}`,children:Ie(ke.balance)})}),n.jsxs("td",{children:[n.jsx("span",{className:`badge bg-${bt.class}`,children:bt.status}),n.jsx("div",{className:"mt-1",children:n.jsxs("small",{className:"text-muted",children:[Xt,"% paid"]})})]}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[ke.totalPayments>0?n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"badge bg-success mb-1",children:["",ke.totalPayments.toFixed(0)]}),n.jsxs("small",{className:"text-muted",children:[ke.paymentCount," payment(s)"]})]}):n.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),ke.pendingPayments>0&&n.jsxs("span",{className:"badge bg-warning mt-1",children:[ke.pendingPayments," Pending"]})]})}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[n.jsxs("small",{className:"text-muted",children:["Created: ",Xe(ke.createdAt)]}),ke.firstPaymentDate&&n.jsxs("small",{className:"text-success",children:["First Payment: ",Xe(ke.firstPaymentDate)]}),ke.lastPaymentDate&&n.jsxs("small",{className:"text-primary",children:["Last Payment: ",Xe(ke.lastPaymentDate)]})]})}),n.jsx("td",{className:"text-center",children:n.jsx("div",{className:"btn-group-vertical",role:"group",children:ke.specificInvoicePayments.length>0?n.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>dt(ke,ke.specificInvoicePayments),title:"View detailed payment history",children:[n.jsx("i",{className:"ti ti-eye"})," View Details"]}):n.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[n.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},ke.id)})})]})}),qe>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"d-flex justify-content-end align-items-end",children:n.jsx("nav",{"aria-label":"Vendor pagination",children:n.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>i(ke=>Math.max(ke-1,1)),disabled:s===1,title:"Previous page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const ot=[],bt=[];ot.push(1);for(let rr=Math.max(2,s-2);rr<=Math.min(qe-1,s+2);rr++)ot.push(rr);qe>1&&ot.push(qe);const Xt=[...new Set(ot)].sort((rr,pr)=>rr-pr);let Ft;for(let rr of Xt)Ft&&(rr-Ft===2?bt.push(Ft+1):rr-Ft!==1&&bt.push("...")),bt.push(rr),Ft=rr;return bt.map((rr,pr)=>rr==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`vendor-ellipsis-${pr}`):n.jsx("li",{className:`page-item ${s===rr?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>i(rr),title:`Go to page ${rr}`,children:rr})},`vendor-page-${rr}`))})(),n.jsx("li",{className:`page-item ${s===qe?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>i(ke=>Math.min(ke+1,qe)),disabled:s===qe,title:"Next page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})}),n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[n.jsx("h5",{className:"mb-0",children:"Customer Ledger"}),n.jsx("div",{className:"d-flex align-items-center",children:n.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("customer",k),children:[n.jsx("i",{className:"ti ti-download"})," Detailed Export"]})})]}),n.jsx("div",{className:"card-body",children:c?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"DocNumber"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Original Amount"}),n.jsx("th",{children:"Debit"}),n.jsx("th",{children:"Credit"}),n.jsx("th",{children:"Current Balance"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Payment Summary"}),n.jsx("th",{children:"Payment Timeline"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Ue(pe,o).map((ke,ot)=>{const bt=lt(ke.balance,ke.originalAmount),Xt=ke.originalAmount>0?(ke.totalPayments/ke.originalAmount*100).toFixed(1):0;return n.jsxs("tr",{children:[n.jsx("td",{children:(o-1)*je+ot+1}),n.jsx("td",{children:n.jsx("strong",{className:"text-primary",children:ke.docnumber})}),n.jsx("td",{children:n.jsx("strong",{children:ke.name})}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{children:Ie(ke.originalAmount)})}),n.jsx("td",{className:`text-end fw-bold ${Mt(ke.debit)}`,children:Ie(ke.balance)}),n.jsx("td",{className:`text-end fw-bold ${Mt(ke.credit)}`,children:Ie(ke.totalPayments.toFixed(0))}),n.jsx("td",{className:"text-end",children:n.jsx("strong",{className:`${ke.balance>0?"text-danger":"text-success"}`,children:Ie(ke.balance)})}),n.jsxs("td",{children:[n.jsx("span",{className:`badge bg-${bt.class}`,children:bt.status}),n.jsx("div",{className:"mt-1",children:n.jsxs("small",{className:"text-muted",children:[Xt,"% paid"]})})]}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[ke.totalPayments>0?n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"badge bg-success mb-1",children:["",ke.totalPayments.toFixed(0)]}),n.jsxs("small",{className:"text-muted",children:[ke.paymentCount," payment(s)"]})]}):n.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),ke.pendingPayments>0&&n.jsxs("span",{className:"badge bg-warning mt-1",children:[ke.pendingPayments," Pending"]})]})}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex flex-column",children:[n.jsxs("small",{className:"text-muted",children:["Created: ",Xe(ke.createdAt)]}),ke.firstPaymentDate&&n.jsxs("small",{className:"text-success",children:["First Payment: ",Xe(ke.firstPaymentDate)]}),ke.lastPaymentDate&&n.jsxs("small",{className:"text-primary",children:["Last Payment: ",Xe(ke.lastPaymentDate)]})]})}),n.jsx("td",{className:"text-center",children:n.jsx("div",{className:"btn-group-vertical",role:"group",children:ke.specificInvoicePayments.length>0?n.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>dt(ke,ke.specificInvoicePayments),title:"View detailed payment history",children:[n.jsx("i",{className:"ti ti-eye"})," View Details"]}):n.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[n.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},ke.id)})})]})}),mt>1&&n.jsx("div",{className:"row mb-3",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"d-flex justify-content-end align-items-end",children:n.jsx("nav",{"aria-label":"Customer pagination",children:n.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[n.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>l(ke=>Math.max(ke-1,1)),disabled:o===1,title:"Previous page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const ot=[],bt=[];ot.push(1);for(let rr=Math.max(2,o-2);rr<=Math.min(mt-1,o+2);rr++)ot.push(rr);mt>1&&ot.push(mt);const Xt=[...new Set(ot)].sort((rr,pr)=>rr-pr);let Ft;for(let rr of Xt)Ft&&(rr-Ft===2?bt.push(Ft+1):rr-Ft!==1&&bt.push("...")),bt.push(rr),Ft=rr;return bt.map((rr,pr)=>rr==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`customer-ellipsis-${pr}`):n.jsx("li",{className:`page-item ${o===rr?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>l(rr),title:`Go to page ${rr}`,children:rr})},`customer-page-${rr}`))})(),n.jsx("li",{className:`page-item ${o===mt?"disabled":""}`,children:n.jsx("button",{className:"page-link btn-sm",onClick:()=>l(ke=>Math.min(ke+1,mt)),disabled:o===mt,title:"Next page",children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})})]}),W&&re&&ce&&n.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header ",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"ti ti-file-invoice me-2"}),"Payment Analysis - Invoice ",ce.docnumber]}),n.jsx("button",{type:"button",className:"btn-close btn-close",onClick:()=>ee(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card ",children:[n.jsx("div",{className:"card-header ",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"ti ti-clipboard-data me-2"}),"Invoice Summary & Payment Overview"]})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:"text-primary",children:"Invoice Number"}),n.jsx("br",{}),n.jsx("span",{className:"h5 text-dark",children:ce.docnumber})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:"text-info",children:"Entity"}),n.jsx("br",{}),n.jsx("span",{className:"h6 text-dark",children:ce.name})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:"text-success",children:"Original Amount"}),n.jsx("br",{}),n.jsx("span",{className:"h5 text-success",children:Ie(ce.originalAmount)})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-3 border rounded",children:[n.jsx("strong",{className:ce.balance>0?"text-danger":"text-success",children:"Outstanding Balance"}),n.jsx("br",{}),n.jsx("span",{className:`h5 ${ce.balance>0?"text-danger":"text-success"}`,children:Ie(ce.balance)})]})})]}),n.jsxs("div",{className:"row mt-3",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-2 bg-info text-white rounded",children:[n.jsx("strong",{children:"Total Payments"}),n.jsx("br",{}),n.jsx("span",{className:"h6",children:Ie(ce.totalPayments)})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-2 bg-primary text-white rounded",children:[n.jsx("strong",{children:"Payment Count"}),n.jsx("br",{}),n.jsx("span",{className:"h6",children:ce.paymentCount})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:`text-center p-2 text-white rounded bg-${lt(ce.balance,ce.originalAmount).class}`,children:[n.jsx("strong",{children:"Status"}),n.jsx("br",{}),n.jsx("span",{className:"h6",children:lt(ce.balance,ce.originalAmount).status})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"text-center p-2 bg-secondary text-white rounded",children:[n.jsx("strong",{children:"Invoice Age"}),n.jsx("br",{}),n.jsxs("span",{className:"h6",children:[Math.floor((new Date-new Date(ce.createdAt))/(1e3*60*60*24))," days"]})]})})]})]})]})})}),re.length>0&&n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header text-dark",children:n.jsxs("h6",{className:"mb-0",children:[n.jsx("i",{className:"ti ti-chart-bar me-2"}),"Payment Analytics & Summary"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-4",children:[n.jsx("h6",{className:"text-primary",children:"Payment Status Breakdown:"}),n.jsx("ul",{className:"list-unstyled",children:Object.entries(re.reduce((ke,ot)=>(ke[ot.status]=(ke[ot.status]||0)+1,ke),{})).map(([ke,ot])=>n.jsxs("li",{className:"mb-1",children:[n.jsx("span",{className:`badge bg-${ke==="cleared"?"success":ke==="pending"?"warning":ke==="bounced"?"danger":"secondary"}`,children:ke.toUpperCase()}),n.jsxs("span",{className:"ms-2",children:[ot," transaction(s)"]})]},ke))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("h6",{className:"text-success",children:"Payment Method Summary:"}),n.jsx("ul",{className:"list-unstyled",children:Object.entries(re.reduce((ke,ot)=>{const bt=ot.paymentMethod||"Unknown";return ke[bt]=(ke[bt]||0)+(ot.paymentAmount||0),ke},{})).map(([ke,ot])=>n.jsxs("li",{className:"mb-1",children:[n.jsx("i",{className:`${Ae(ke)} me-2 text-primary`}),n.jsx("span",{className:"text-capitalize",children:ke.replace("_"," ")}),n.jsx("span",{className:"ms-2 text-success",children:Ie(ot)})]},ke))})]})]})})]})})})]}),n.jsxs("div",{className:"modal-footer gap-2",children:[n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>ee(!1),children:[n.jsx("i",{className:"ti ti-x me-1"})," Close"]}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{const ke=re.map((pr,jr)=>[jr+1,ce.docnumber,ce.name,Xe(pr.paymentDate),pr.paymentDocNumber||"N/A",pr.paymentAmount||0,pr.paymentMethod||"N/A",pr.status||"N/A",pr.previousBalance||0,pr.newBalance||0,pr.description||"N/A",Ye(pr.createdAt||pr.paymentDate)]),bt=[["S.No","Invoice Number","Entity Name","Payment Date","Payment Doc Number","Payment Amount","Payment Method","Status","Balance Before","Balance After","Description","Created At"].join(","),...ke.map(pr=>pr.map(jr=>`"${jr}"`).join(","))].join(`
`),Xt=new Blob([bt],{type:"text/csv;charset=utf-8;"}),Ft=document.createElement("a"),rr=URL.createObjectURL(Xt);Ft.setAttribute("href",rr),Ft.setAttribute("download",`invoice_${ce.docnumber}_payment_details_${new Date().toISOString().slice(0,10)}.csv`),Ft.style.visibility="hidden",document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft)},children:[n.jsx("i",{className:"ti ti-download me-1"})," Export to CSV"]})]})]})})}),q&&n.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Download ",U==="vendor"?"Vendor":"Customer"," Payment Details"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>K(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"mb-3",children:n.jsx("strong",{children:F?`${U==="vendor"?"Vendor":"Customer"}: ${F}`:`All ${U==="vendor"?"Vendors":"Customers"}`})}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"From Date (Optional):"}),n.jsx("input",{type:"date",className:"form-control",value:Q,onChange:ke=>ie(ke.target.value)})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"To Date (Optional):"}),n.jsx("input",{type:"date",className:"form-control",value:M,onChange:ke=>V(ke.target.value)})]})]})]}),n.jsxs("div",{className:"modal-footer gap-2",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:"Cancel"}),n.jsxs("button",{type:"button",className:"btn btn-primary",onClick:Qe,children:[n.jsx("i",{className:"ti ti-download"})," Download Report"]})]})]})})})]})}function ETe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState({}),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState(""),[f,p]=j.useState([]),[x,g]=j.useState([]),[b,y]=j.useState(""),[S,w]=j.useState(""),[k,C]=j.useState([]),[D,E]=j.useState([]),[A,I]=j.useState(!1),[L,P]=j.useState(""),[O,Y]=j.useState([]),[q,K]=j.useState(""),[U,J]=j.useState(""),[F,X]=j.useState("internal"),[Q,ie]=j.useState(""),[M,V]=j.useState(""),[W,ee]=j.useState(""),[re,ne]=j.useState(""),[ce,ae]=j.useState([]),[Z,de]=j.useState(null),[z,se]=j.useState(0),[Ne,ue]=j.useState(""),[oe,ye]=j.useState([]),[je,Me]=j.useState([]),[He,et]=j.useState(""),[ft,Be]=j.useState(""),[dt,Tt]=j.useState(""),[At,qt]=j.useState([]),[xe,he]=j.useState(1),[ve,pe]=j.useState(10),[De,Ke]=j.useState(0),[Nt,Je]=j.useState(""),[Qe,Ue]=j.useState([]),[qe,mt]=j.useState([]),[Ie,Xe]=j.useState(""),[Ye,lt]=j.useState(""),[Mt,Ae]=j.useState(""),[ke,ot]=j.useState(""),bt=localStorage.getItem("selectedCompanyId"),Xt=localStorage.getItem("financialYear"),Ft=async()=>{try{const dr=(await Oe.get("/api/material",{params:{companyId:bt,financialYear:Xt}})).data.sort((ur,qr)=>new Date(qr.createdAt)-new Date(ur.createdAt));t(dr),Ke(dr.length),he(1)}catch(ze){console.error("Failed to fetch materials:",ze)}},rr=async()=>{try{const ze=await Oe.get("/api/stock/data",{params:{companyId:bt,financialYear:Xt}});a(ze.data),console.log("Stock data fetched:",ze.data)}catch(ze){console.error("Failed to fetch stock:",ze)}},pr=(ze,dr,ur)=>{dr.includes(ze)?ur(dr.filter(qr=>qr!==ze)):ur([...dr,ze])},jr=ze=>{Je(ze.target.value),he(1)};j.useEffect(()=>{Ft(),rr(),Oe.get("/api/vendors",{params:{companyId:bt,financialYear:Xt}}).then(ze=>C(ze.data)),Oe.get("/api/tax",{params:{companyId:bt,financialYear:Xt}}).then(ze=>ae(ze.data)),Oe.get("/api/locations",{params:{companyId:bt,financialYear:Xt}}).then(ze=>qt(ze.data)),Oe.get("/api/general-conditions",{params:{companyId:bt,financialYear:Xt}}).then(ze=>{const dr=ze.data.filter(ur=>!ur.isDeleted).map(ur=>({_id:ur._id,name:ur.name,description:ur.description}));Ue(dr)}),Oe.get("/api/processes",{params:{companyId:bt,financialYear:Xt}}).then(ze=>{const dr=ze.data.filter(ur=>!ur.isDeleted).map(ur=>({_id:ur._id,processId:ur.processId,processDescription:ur.processDescription}));mt(dr)})},[]);const Lt=e.map(ze=>{const ur=r.find(Qs=>Qs.materialId===ze.materialId)?.quantityAvailable||0;ze.safetyStock;const qr=ze.maxstock||0,va=Math.abs(qr-ur),rn=Math.abs(qr-ur);return{...ze,inventoryStock:ur,reorderPoint:va,reorderQuantity:rn}}).filter(ze=>{if(!Nt)return!0;const dr=Nt.toLowerCase();return ze.materialId?.toLowerCase().includes(dr)||ze.description?.toLowerCase().includes(dr)||ze.minstock?.toString().includes(dr)||ze.maxstock?.toString().includes(dr)||ze.safetyStock?.toString().includes(dr)||ze.inventoryStock?.toString().includes(dr)||ze.reorderQuantity?.toString().includes(dr)}),fe=Math.ceil(Lt.length/ve),Re=(xe-1)*ve,Te=Re+ve,_e=Lt.slice(Re,Te),Le=ze=>{ze>=1&&ze<=fe&&he(ze)},Ve=()=>{const ze=[];if(fe<=5)for(let ur=1;ur<=fe;ur++)ze.push(ur);else if(xe<=3)for(let ur=1;ur<=5;ur++)ze.push(ur);else if(xe>=fe-2)for(let ur=fe-5+1;ur<=fe;ur++)ze.push(ur);else for(let ur=xe-2;ur<=xe+2;ur++)ze.push(ur);return ze},pt=async()=>{if(u==="PO"){if(!D){alert("Please select a vendor for Purchase Order");return}if(!Z){alert("Please select tax for Purchase Order");return}}console.log("modalMaterial",c);const ze=parseFloat(c.unitPrice)||0,dr=parseFloat(c.reorderQuantity)||0;if(u==="PE"){const ur=f.find(rn=>rn._id===M),qr={materialId:c.materialId,description:c.description,qty:dr,baseUnit:c.baseUnit,orderUnit:c.orderUnit},va={indentIdType:F,categoryId:ur._id,categoryName:ur.name||ur.categoryName,location:W,buyerGroup:re,companyId:bt,financialYear:Xt,deliveryDate:b,documentDate:new Date().toISOString().split("T")[0],items:[qr]};if(F==="external"){if(!Q.trim()){alert("Please enter External Indent ID");return}va.indentId=Q.trim()}try{const rn=await Oe.post("/api/indent/create",va);alert(`Indent created with ID: ${rn.data.indentId}`),wt()}catch(rn){console.error("Indent creation failed",rn),alert("Failed to create indent")}}else if(u==="PO"){const ur=x.find(cn=>cn._id===M._id),qr=dr*ze;if(isNaN(qr)){alert("Please enter valid quantity and unit price");return}const va=parseFloat(Z?.cgst)||0,rn=parseFloat(Z?.sgst)||0,Qs=parseFloat(Z?.igst)||0,Gn=qr*va/100,xs=qr*rn/100,As=qr*Qs/100,yt=Gn+xs+As,mr=parseFloat(z)||0,hr=qr+yt-mr,Kr={materialId:c.materialId,description:c.description,quantity:dr,price:ze,baseUnit:c.baseUnit,orderUnit:c.orderUnit},Rr={companyId:bt,financialYear:Xt,categoryId:ur._id,category:ur.name||ur.categoryName,date:new Date().toISOString().split("T")[0],vendor:D,deliveryLocation:q||"",deliveryAddress:U||"",items:[Kr],notes:S||"",remarks:He||"",preparedby:dt||"",approvedby:ft||"",taxName:Z?.taxName||"",cgst:Gn,sgst:xs,igst:As,taxDiscount:mr,finalTotal:hr,processes:je||[],generalConditions:oe||[],poGenerationType:F};if(F==="external"){if(!Q.trim()){alert("Please enter External PO ID");return}Rr.poNumber=Q.trim()}console.log("PO Payload:",Rr);try{const cn=await Oe.post("/api/purchase-orders",Rr);alert(`Purchase Order created with ID: ${cn.data.poNumber}`),wt()}catch(cn){console.error("Purchase Order creation failed",cn),alert(`Failed to create Purchase Order: ${cn.response?.data?.error||cn.message}`)}}},wt=()=>{l(!1),d(null),V(""),ee(""),ne(""),y(""),ie(""),E(""),de(null),w(""),ue(""),et(""),Tt(""),Be(""),K(""),J(""),se(0)},st=(ze,dr)=>{i(ur=>{const qr={...ur};return qr[`${ze}_PE`]=!1,qr[`${ze}_PO`]=!1,qr[`${ze}_${dr}`]=!0,qr})};j.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:bt,financialYear:Xt}}).then(ze=>p(ze.data)),Oe.get("/api/po-categories",{params:{companyId:bt,financialYear:Xt}}).then(ze=>g(ze.data))},[]);const St=()=>n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:xr})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Search Vendor"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:L,onChange:ze=>Ct(ze.target.value)})]})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("div",{className:"d-flex gap-2",children:n.jsxs("button",{className:"btn btn-info",onClick:Jt,children:[n.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:O.length>0?n.jsxs("table",{className:"table table-hover",children:[n.jsx("thead",{className:"table-light sticky-top",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendor Code"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:O.map((ze,dr)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:ze.vnNo})}),n.jsx("td",{children:ze.name1}),n.jsx("td",{children:ze.email}),n.jsx("td",{children:ze.phone}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ir(ze),children:[n.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:L?`No vendors found matching "${L}"`:'Enter search term or click "View All"'})]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:xr,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),Ct=ze=>{if(P(ze),ze.trim()){const dr=k.filter(ur=>ur.vendorName.toLowerCase().includes(ze.toLowerCase())||ur.vendorCode.toLowerCase().includes(ze.toLowerCase()));Y(dr)}else Y([])},Jt=()=>{Y(k)},ir=ze=>{E(ze.name1||ze.vendorName),I(!1),P(""),Y([])},xr=()=>{I(!1),P(""),Y([])};return n.jsxs("div",{className:"content",children:[n.jsx("style",{children:`
.checkbox-radio {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid #ccc;
    border-radius: 3px;
    background-color: white;
    cursor: pointer;
    position: relative;
    vertical-align: middle;
}

.checkbox-radio:checked {
    background-color: #007bff;
    border-color: #007bff;
}

.checkbox-radio:checked::after {
    content: '';
    position: absolute;
    top: -2px;
    left: 2px;
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.checkbox-radio:hover {
    border-color: #007bff;
}

.checkbox-radio:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.pagination-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
    flex-wrap: wrap;
    gap: 10px;
}

.pagination-info {
    color: #6c757d;
    font-size: 14px;
}

.pagination-controls .form-select {
    width: auto;
    min-width: 80px;
}

.page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

.page-link {
    color: #007bff;
    border: 1px solid #dee2e6;
    padding: 0.375rem 0.75rem;
}

.page-link:hover {
    color: #0056b3;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

.page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}
`}),n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Material Requirements Planning"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Master"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Requirements Planning"})]})})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[n.jsx("div",{className:"d-flex align-items-center gap-2",children:n.jsxs("div",{className:"input-group",style:{width:"300px"},children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:Nt,onChange:jr})]})}),n.jsx("div",{})]})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered text-wrap",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Mat No"}),n.jsx("th",{children:"Mat Desc"}),n.jsx("th",{children:"Min Stock"}),n.jsx("th",{children:"Max Stock"}),n.jsx("th",{children:"Safety Stock"}),n.jsx("th",{children:"INV Stock"}),n.jsx("th",{children:"ROP"}),n.jsx("th",{className:"wrap-header",children:"PE"}),n.jsx("th",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:"PO"}),n.jsx("th",{children:"Action"})]})}),n.jsxs("tbody",{children:[_e.map((ze,dr)=>n.jsxs("tr",{children:[n.jsx("td",{children:Re+dr+1}),n.jsx("td",{children:ze.materialId||"-"}),n.jsx("td",{children:ze.description||"-"}),n.jsx("td",{children:ze.minstock||0}),n.jsx("td",{children:ze.maxstock||0}),n.jsx("td",{children:ze.safetyStock||0}),n.jsx("td",{children:ze.inventoryStock}),n.jsx("td",{style:{backgroundColor:ze.inventoryStock<ze.safetyStock?ze.inventoryStock<ze.minstock?"red":"orange":"green",fontWeight:"bold",color:"white"},children:ze.reorderQuantity}),n.jsx("td",{children:n.jsx("input",{type:"radio",name:`action_${ze.materialId}`,value:"PE",className:"checkbox-radio",checked:!!s[`${ze.materialId}_PE`],onChange:()=>st(ze.materialId,"PE")})}),n.jsx("td",{children:n.jsx("input",{type:"radio",name:`action_${ze.materialId}`,value:"PO",className:"checkbox-radio",checked:!!s[`${ze.materialId}_PO`],onChange:()=>st(ze.materialId,"PO")})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{const ur=s[`${ze.materialId}_PE`],qr=s[`${ze.materialId}_PO`];if(!ur&&!qr){alert("Please select PE or PO before creating.");return}h(ur?"PE":"PO"),d(ze),l(!0)},children:"Create"})})]},ze._id||dr)),_e.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"11",style:{textAlign:"center"},children:Nt?"No materials found matching your search criteria":"No materials found."})})]})]})})})]}),fe>1&&n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[n.jsx("div",{className:"text-muted"}),n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination mb-0",children:[n.jsx("li",{className:`page-item ${xe===1?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ze=>{ze.preventDefault(),xe>1&&Le(xe-1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-left"})})})}),Ve().map(ze=>n.jsx("li",{className:`page-item ${xe===ze?"active":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:dr=>{dr.preventDefault(),Le(ze)},children:ze})},ze)),n.jsx("li",{className:`page-item ${xe===fe?"disabled":""}`,children:n.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ze=>{ze.preventDefault(),xe<fe&&Le(xe+1)},children:n.jsx("span",{"aria-hidden":"true",children:n.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),o&&c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"," for ",c.description]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h6",{className:"text-primary mb-3",children:"Basic Information"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{children:"ID Type"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:F,onChange:ze=>X(ze.target.value),children:[n.jsx("option",{value:"internal",children:"Internal"}),n.jsx("option",{value:"external",children:"External"})]})})]}),F==="external"&&n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsxs("label",{children:["External ",u," ID"]})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",className:"form-control",value:Q,onChange:ze=>ie(ze.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{children:"Buyer Group *"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"text",className:"form-control",value:re,onChange:ze=>ne(ze.target.value),placeholder:"Enter buyer group",required:!0})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{children:"Delivery Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control",value:b,onChange:ze=>y(ze.target.value)})})]})]})]}),u==="PE"&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"mb-4",children:[n.jsx("h6",{className:"text-success mb-3",children:"Purchase Enquiry Details"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{children:"PE Category"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:M,onChange:ze=>V(ze.target.value),children:[n.jsx("option",{value:"",children:"Select"}),f.map(ze=>n.jsx("option",{value:ze._id,children:ze.name||ze.categoryName},ze._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:W,onChange:ze=>ee(ze.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),At.map(ze=>n.jsx("option",{value:ze.name||ze.locationName||ze._id,children:ze.name||ze.locationName||ze._id},ze._id||ze.id||ze.name))]})})]})]})]})}),u==="PO"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h6",{className:"text-info mb-3",children:"Purchase Order Details"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"PO Category:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:M?._id||"",onChange:ze=>{const dr=x.find(ur=>ur._id===ze.target.value);V(dr)},required:!0,children:[n.jsx("option",{value:"",children:"-- Select Category --"}),x.map(ze=>n.jsx("option",{value:ze._id,children:ze.categoryName||ze.name},ze._id))]})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"PO Number:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:Mt,readOnly:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"PO Creating Date:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:ke,onChange:ze=>ot(ze.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{children:"Unit Price *"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:c?.unitPrice||0,onChange:ze=>{const dr=parseFloat(ze.target.value)||0;d(ur=>({...ur,unitPrice:dr}))},placeholder:"Enter unit price",required:!0})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Vendor *"})}),n.jsx("div",{className:"col-xl-9",children:n.jsxs("div",{className:"input-group",children:[n.jsx("input",{className:"form-control form-control-sm",value:D,onChange:ze=>E(ze.target.value),placeholder:"Enter vendor name"}),n.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>I(!0),children:n.jsx("i",{className:"ti ti-search"})})]})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{children:"Tax *"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{className:"form-select",value:Z?._id||"",onChange:ze=>{const dr=ce.find(ur=>ur._id===ze.target.value);de(dr)},children:[n.jsx("option",{value:"",children:"Select Tax"}),ce.map(ze=>n.jsx("option",{value:ze._id,children:ze.taxName},ze._id))]})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{children:"Discount"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{type:"number",className:"form-control",value:z,onChange:ze=>se(parseFloat(ze.target.value)||0),placeholder:"Enter discount amount"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Validity Date:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ie,onChange:ze=>Xe(ze.target.value)})})]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Conditions & Processes"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3",children:[n.jsx("label",{className:"form-label",children:"Select General Conditions"}),Qe.map(ze=>n.jsxs("div",{className:"d-flex align-items-center mb-1",children:[n.jsx("input",{type:"checkbox",className:"me-2",checked:oe.includes(ze._id),onChange:()=>pr(ze._id,oe,ye)}),n.jsx("label",{children:ze.name})]},ze._id))]}),n.jsxs("div",{className:"col-lg-3",children:[n.jsx("label",{className:"form-label",children:"Select Processes"}),qe.map(ze=>n.jsxs("div",{className:"d-flex align-items-center mb-1",children:[n.jsx("input",{type:"checkbox",className:"me-2",checked:je.includes(ze._id),onChange:()=>pr(ze._id,je,Me)}),n.jsx("label",{children:ze.processDescription})]},ze._id))]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Delivery Information"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Location:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsxs("select",{className:"form-select",value:q,onChange:ze=>K(ze.target.value),children:[n.jsx("option",{value:"",children:"-- Select Location --"}),At.map(ze=>n.jsx("option",{value:ze.name||ze.locationName||ze._id,children:ze.name||ze.locationName||ze._id},ze._id||ze.id||ze.name))]})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{children:"Delivery Address"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{className:"form-control",rows:"2",value:U,onChange:ze=>J(ze.target.value),placeholder:"Enter delivery address"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:ze=>ue(ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Buyer Group:"})}),n.jsx("div",{className:"col-xl-7",children:n.jsx("input",{className:"form-control form-control-sm",value:re,onChange:ze=>ne(ze.target.value)})})]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Authorization"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Prepared By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:dt,onChange:ze=>Tt(ze.target.value)})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Approved By:"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{className:"form-control",value:ft,onChange:ze=>Be(ze.target.value)})})]})]}),n.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Additional Information"}),n.jsxs("div",{className:"row gap-2",children:[n.jsxs("div",{className:"col-lg-4 row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Payment:"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{className:"form-control form-control-sm",value:Ye,onChange:ze=>lt(ze.target.value),maxLength:"250"})})]}),n.jsxs("div",{className:"col-lg-3 row",children:[n.jsx("div",{className:"col-xl-4",children:n.jsx("label",{className:"form-label",children:"Remarks:"})}),n.jsx("div",{className:"col-xl-8",children:n.jsx("input",{className:"form-control",value:He,onChange:ze=>et(ze.target.value)})})]}),n.jsxs("div",{className:"col-xl-3 row form-group",children:[n.jsx("div",{className:"col-xl-2",children:n.jsx("label",{children:"Notes"})}),n.jsx("div",{className:"col-xl-10",children:n.jsx("textarea",{className:"form-control",rows:"2",value:S,onChange:ze=>w(ze.target.value),placeholder:"Enter notes"})})]})]})]})]}),n.jsxs("div",{className:"modal-footer gap-2",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:pt,children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"]})]})]})})})]}),A&&n.jsx(St,{})]})}function DTe(){const[e,t]=j.useState({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),r=localStorage.getItem("selectedCompanyId"),a=localStorage.getItem("financialYear"),s=localStorage.getItem("selectedCompanyId"),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState(!1),[h,f]=j.useState({type:"",text:""}),[p,x]=j.useState("");j.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/invoiceform",{params:{companyId:r,financialYear:a}}),A=await Oe.get("/api/billingform",{params:{companyId:r,financialYear:a}});o(E.data||[]),c(A.data||[])}catch(E){console.error("Error fetching invoices",E)}},b=()=>(e.type==="vendor"?i:l).filter(A=>{const I=e.type==="vendor"?A.vendor||"":A.salesOrderId?.customer||"",L=A.docnumber||"",P=I.toLowerCase().includes(p.toLowerCase())||L.toLowerCase().includes(p.toLowerCase()),O=(A.balance||0)>0;return P&&O}),y=E=>{t(A=>({...A,recordId:E._id||E.id,selectedRecord:E,docnumber:E.docnumber||""}))},S=E=>{const{name:A,value:I}=E.target;A==="type"?(t(L=>({...L,[A]:I,recordId:"",selectedRecord:null,docnumber:""})),x("")):t(L=>({...L,[A]:I}))},w=()=>{if(!e.selectedRecord||!e.paymentAmount)return null;const E=e.selectedRecord.balance||0,A=parseFloat(e.paymentAmount);return E.toFixed(2)-A.toFixed(2)},k=async E=>{E.preventDefault(),u(!0),f({type:"",text:""});try{if(!e.selectedRecord)throw new Error("Please select a record to update");const A=parseFloat(e.paymentAmount),I=e.selectedRecord.balance||0,L=I-A,P={balance:L,lastPaymentAmount:A,companyId:s,financialYear:a,lastPaymentDocNumber:e.docnumber||"",lastPaymentMethod:e.paymentMethod,paymentDescription:e.description||`Payment via ${e.paymentMethod}`},O=e.type==="vendor"?`/api/invoiceform/${e.recordId}`:`/api/billingform/${e.recordId}`;await Oe.put(O,P);const Y=e.type==="vendor"?e.selectedRecord.vendor||"Unknown Vendor":e.selectedRecord.salesOrderId?.customer||e.selectedRecord.customer||"Unknown Customer",q={recordType:e.type,recordId:e.recordId,docnumber:e.docnumber,entityName:Y,paymentAmount:A,companyId:s,financialYear:a,previousBalance:I,newBalance:L,paymentMethod:e.paymentMethod,description:e.description,paymentDate:new Date().toISOString()};console.log("Payment History Payload:",q);try{const K=await Oe.post("/api/payment",q);console.log("Payment history saved successfully:",K.data)}catch(K){console.error("Payment history save failed:",K),console.error("Error details:",K.response?.data),f({type:"warning",text:`Payment updated successfully, but payment history could not be saved. Error: ${K.response?.data?.message||K.message}`})}h.text||f({type:"success",text:`Payment of ${A} recorded successfully for ${Y}. New balance: ${L.toFixed(2)}`}),await g(),t({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),x("")}catch(A){console.error("Error recording payment",A),f({type:"error",text:A.response?.data?.message||A.message||"Failed to record payment. Please try again."})}finally{u(!1)}},C=b(),D=w();return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Record Payment"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/ledger",children:"Ledger"})}),n.jsx("li",{className:"breadcrumb-item",children:"Payment"})]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header text-white",children:n.jsx("h5",{className:"mb-0",children:"Update Balance with Payment"})}),n.jsxs("div",{className:"card-body",children:[h.text&&n.jsxs("div",{className:`alert alert-${h.type==="success"?"success":"danger"} alert-dismissible`,children:[h.text,n.jsx("button",{type:"button",className:"btn-close",onClick:()=>f({type:"",text:""})})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Type *"}),n.jsxs("select",{className:"form-select",name:"type",value:e.type,onChange:S,children:[n.jsx("option",{value:"vendor",children:"Vendor Payment"}),n.jsx("option",{value:"customer",children:"Customer Payment"})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Search Records"}),n.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${e.type} name or document number...`,value:p,onChange:E=>x(E.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Select Record to Update *"}),n.jsx("div",{className:"border rounded",style:{maxHeight:"300px",overflowY:"auto"},children:C.length===0?n.jsx("div",{className:"p-3 text-muted text-center",children:"No records found"}):C.map(E=>{const A=e.type==="vendor"?E.vendor:E?.customer,I=e.recordId===(E._id||E.id);return n.jsx("div",{className:`p-3 border-bottom cursor-pointer ${I?"bg-primary text-white":"bg-light"}`,onClick:()=>y(E),style:{cursor:"pointer"},children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("strong",{children:A||"Unknown"}),n.jsx("br",{}),n.jsxs("small",{children:["Doc: ",E.docnumber||"N/A"]})]}),n.jsxs("div",{className:"text-end",children:[n.jsxs("strong",{children:["",(E.balance||0).toFixed(2)]}),n.jsx("br",{}),n.jsx("small",{children:"Balance"})]})]})},E._id||E.id)})})]})]}),n.jsx("div",{className:"col-md-6",children:n.jsxs("form",{onSubmit:k,children:[e.selectedRecord&&n.jsxs("div",{className:"alert alert-info mb-3",children:[n.jsx("h6",{children:"Selected Record:"}),n.jsx("p",{className:"mb-1",children:n.jsxs("strong",{children:[e.type==="vendor"?e.selectedRecord.vendor:e.selectedRecord.customer,console.log(e.selectedRecord.customer)]})}),n.jsxs("p",{className:"mb-1",children:["Document: ",e.selectedRecord.docnumber]}),n.jsxs("p",{className:"mb-0",children:["Current Balance: ",n.jsxs("strong",{children:["",(e.selectedRecord.balance||0).toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"paymentAmount",className:"form-label",children:"Payment Amount *"}),n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"ti ti-currency-rupee"})}),n.jsx("input",{type:"number",id:"paymentAmount",className:`form-control ${parseFloat(e?.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)?"is-invalid":""}`,name:"paymentAmount",value:e.paymentAmount,onChange:S,placeholder:"0.00",min:"0",step:"0.01",required:!0,max:e?.selectedRecord?.balance,disabled:!e.selectedRecord}),parseFloat(e.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)&&n.jsxs("div",{className:"invalid-feedback",children:["Amount cannot exceed current balance of ",(e?.selectedRecord?.balance||0).toFixed(2)]})]}),D!==null&&n.jsxs("small",{className:"text-muted mt-1 d-block",children:["New balance will be: ",n.jsxs("strong",{children:["",D.toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Payment Method *"}),n.jsxs("select",{className:"form-select",name:"paymentMethod",value:e.paymentMethod,onChange:S,required:!0,children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"cheque",children:"Cheque"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"card",children:"Card"})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",name:"description",value:e.description,onChange:S,rows:"3",placeholder:"Payment description or notes..."})]}),n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||!e.selectedRecord||!e.paymentAmount,children:d?"Updating...":"Update Balance"})]})]})})]})]})]})})})]})}function ATe(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),u=()=>{let D={};const E=/^\d{6}$/;return D.categoryName=e.categoryName?"":"Required",D.rangeFrom=e.rangeFrom?E.test(e.rangeFrom)?"":"Must be 6 digits":"Required",D.rangeTo=e.rangeTo?E.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(D),Object.values(D).every(A=>A==="")},h=D=>{t({...e,[D.target.name]:D.target.value})},f=async D=>{if(D.preventDefault(),!!u())try{s?(await Oe.put(`/api/purchase-contract-categories/${s}`,e),alert("Purchase contract category updated successfully!")):(await Oe.post("/api/purchase-contract-categories",e),alert("Purchase contract category added successfully!")),p(),g()}catch(E){console.error("Error saving purchase contract category:",E),alert("Error saving purchase contract category. Please try again.")}},p=async()=>{try{const D=await Oe.get("/api/purchase-contract-categories",{params:{companyId:c,financialYear:d}});a(D.data)}catch(D){console.error("Error fetching purchase contract categories:",D)}},x=D=>{t(D),i(D._id),l({})},g=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{p()},[]);const[b,y]=j.useState(!1),S=()=>y(!0),w=()=>y(!1),[k,C]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-1",children:n.jsxs("div",{className:"my-auto ",children:[n.jsx("h2",{className:"",children:"Purchase Contract Categories"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract Categories"})]})})]})}),n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{S()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})})]}),b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header ",children:[n.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[s?"Edit":"Create"," Purchase Contract Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{w(),g()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:f,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Category Name ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:h,className:`form-control ${o.categoryName?"is-invalid":""}`,placeholder:"Enter category name (e.g., Procurement Contracts)"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range From ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},className:`form-control ${o.rangeFrom?"is-invalid":""}`,placeholder:"Enter start range (6 digits)",min:"100000",maxLength:6,max:"999999"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range To ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeTo",type:"text",className:`form-control ${o.rangeTo?"is-invalid":""}`,value:e.rangeTo,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),n.jsx("div",{className:"d-flex gap-2 justify-content-end",children:n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((D,E)=>n.jsxs("tr",{children:[n.jsx("td",{children:E+1}),n.jsx("td",{children:D.categoryName}),n.jsx("td",{children:D.rangeFrom?.toLocaleString()}),n.jsx("td",{children:D.rangeTo?.toLocaleString()}),n.jsx("td",{children:n.jsx("div",{className:"d-flex gap-1",children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{x(D),S()},title:"Edit Category",children:"Edit"})})})]},D._id))})]})})})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var EY=function(e,t){return(EY=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])})(e,t)};function Wd(e,t){function r(){this.constructor=e}EY(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Pr(e,t,r,a){return new(r||(r=Promise))(function(s,i){function o(d){try{c(a.next(d))}catch(u){i(u)}}function l(d){try{c(a.throw(d))}catch(u){i(u)}}function c(d){d.done?s(d.value):new r(function(u){u(d.value)}).then(o,l)}c((a=a.apply(e,[])).next())})}function Or(e,t){var r,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(s=2&u[0]?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,a=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(h){u=[6,h],a=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,d])}}}var TTe=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,r){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+r+"."),this.platformName=t,this.platform=r},e.prototype.registerFlag=function(t,r,a){if(this.flagRegistry[t]={evaluationFn:r,setHook:a},this.urlFlags[t]!=null){var s=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+s+"."),this.set(t,s)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,r){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=r,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(r)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var r,a,s=(r=this.global.location.search,a={},r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return ITe(a,o[0],o[1]),o.join("=")}),a);"tfjsflags"in s&&s.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),l=o[0],c=o[1];t.urlFlags[l]=function(d,u){if((u=u.toLowerCase())==="true"||u==="false")return u==="true";if(""+ +u===u)return+u;throw new Error("Could not parse value flag value "+u+" for flag "+d+".")}(l,c)})}},e}();function ITe(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function Ht(){return DY}var DY=null,N2=new Map,v3=new Map;function AY(e,t){var r=IY(e,t);return N2.get(r)}function PTe(e){return v3.get(e)}function i7(e){for(var t=N2.entries(),r=[];;){var a=t.next(),s=a.done,i=a.value;if(s)break;var o=i[0],l=i[1];o.split("_")[0]===e&&r.push(l)}return r}function TY(e){var t=e.kernelName,r=e.backendName,a=IY(t,r);if(N2.has(a))throw new Error("The kernel '"+t+"' for backend '"+r+"' is already registered");N2.set(a,e)}function OTe(e){var t=e.kernelName;v3.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),v3.set(t,e)}function IY(e,t){return t+"_"+e}function g3(e,t,r){return Math.max(e,Math.min(t,r))}function PY(e){return e%2==0?e:e+1}function MTe(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function We(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function fn(e,t,r){r===void 0&&(r=""),We(Fi(e,t),function(){return r+" Shapes "+e+" and "+t+" must match"})}function kg(e){We(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Q0(e,t,r){if(t===void 0&&(t=[]),r===void 0&&(r=!1),t==null&&(t=[]),Array.isArray(e)||Wu(e)&&!r)for(var a=0;a<e.length;++a)Q0(e[a],t,r);else t.push(e);return t}function Lr(e){if(e.length===0)return 1;for(var t=e[0],r=1;r<e.length;r++)t*=e[r];return t}function Fi(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ws(e){return e%1==0}function RTe(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function b3(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w0(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function o7(e,t,r){return t===void 0&&(t=function(a){return 0}),new Promise(function(a,s){var i=0,o=function(){if(e())a();else{i++;var l=t(i);r!=null&&i>=r?s():setTimeout(o,l)}};o()})}function FTe(e,t){for(var r=1,a=-1,s=0;s<e.length;++s)if(e[s]>=0)r*=e[s];else if(e[s]===-1){if(a!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+a+" and dim "+s);a=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found "+e[s]+" at dim "+s);if(a===-1){if(t>0&&t!==r)throw Error("Size("+t+") must match the product of shape "+e);return e}if(r===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%r!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+r);var i=e.slice();return i[a]=t/r,i}function Si(e,t){var r=t.length;return We((e=e==null?t.map(function(a,s){return s}):[].concat(e)).every(function(a){return a>=-r&&a<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but got axis "+e}),We(e.every(function(a){return Ws(a)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(a){return a<0?r+a:a})}function Jp(e,t){for(var r=[],a=[],s=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||s?null:Si(t,e).sort(),o=0,l=0;l<e.length;++l){if(i!=null){if(i[o]===l&&e[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+e[l]+"' is not 1");(i[o]==null||i[o]>l)&&e[l]===1&&(r.push(e[l]),a.push(l)),i[o]<=l&&o++}e[l]!==1&&(r.push(e[l]),a.push(l))}return{newShape:r,keptDims:a}}function Wy(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);r=new Uint8Array(t)}return r}function w2(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);r=new Array(t)}return r}function LTe(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type "+t+" being uploaded contains "+a+".")}}function BTe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function UTe(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Wu(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function OY(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function $Te(e){if(e==null)return 0;var t=0;return e.forEach(function(r){return t+=r.length}),t}function pI(e){return typeof e=="string"||e instanceof String}function VTe(e){return typeof e=="boolean"}function qTe(e){return typeof e=="number"}function I1(e){return Array.isArray(e)?I1(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":qTe(e)?"float32":pI(e)?"string":VTe(e)?"bool":"float32"}function y3(e){return!!(e&&e.constructor&&e.call&&e.apply)}function j3(e,t){for(var r=t;r<e;++r)if(e%r==0)return r;return e}function Gu(e){var t=e.length;if(t<2)return[];var r=new Array(t-1);r[t-2]=e[t-1];for(var a=t-3;a>=0;--a)r[a]=r[a+1]*e[a+1];return r}function MY(e,t,r){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Q0(e)),r&&LTe(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var a=new Uint8Array(e.length),s=0;s<a.length;++s)Math.round(e[s])!==0&&(a[s]=1);return a}throw new Error("Unknown data type "+t)}function l7(e,t){if(e.length===0)return t[0];var r=e.reduce(function(a,s){return a*s});if(r===0)return[];if(r!==t.length)throw new Error("["+e+"] does not match the input size.");return function a(s,i,o){var l=new Array;if(i.length===1)for(var c=i[0],d=0;d<c;d++)l[d]=o[s+d];else{c=i[0];var u=i.slice(1),h=u.reduce(function(f,p){return f*p});for(d=0;d<c;d++)l[d]=a(s+d*h,u,o)}return l}(0,e,t)}function RY(e,t){for(var r=P1(e,t),a=0;a<r.length;a++)r[a]=1;return r}function P1(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Iu(){return Ht().platform.now()}function FY(e){e.forEach(function(t){We(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function zTe(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ht().platform.encode(e,t)}function S2(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ht().platform.decode(e,t)}function c7(e,t,r){if(t===0)return 0;if(t===1)return e[0];for(var a=e[e.length-1],s=0;s<e.length-1;++s)a+=r[s]*e[s];return a}function HTe(e,t,r){if(t===0)return[];if(t===1)return[e];for(var a=new Array(t),s=0;s<a.length-1;++s)a[s]=Math.floor(e/r[s]),e-=a[s]*r[s];return a[a.length-1]=e,a}var WTe=function(){function e(t,r){this.backendTimer=t,this.logger=r,r==null&&(this.logger=new GTe)}return e.prototype.profileKernel=function(t,r,a){var s,i=this,o=this.backendTimer.time(function(){s=a()});return s.forEach(function(l){l.data().then(function(c){(function(d,u,h){if(u!=="float32")return!1;for(var f=0;f<d.length;f++){var p=d[f];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+h+"'"),!0}})(c,l.dtype,t),o.then(function(d){var u="";d.getExtraProfileInfo!=null&&(u=d.getExtraProfileInfo()),i.logger.logKernelProfile(t,l,c,d.kernelMs,r,u)})})}),s},e}(),GTe=function(){function e(){}return e.prototype.logKernelProfile=function(t,r,a,s,i,o){var l=typeof s=="number"?w0(s+"ms",9):s.error,c=w0(t,25),d=r.rank,u=r.size,h=w0(r.shape.toString(),14),f="";for(var p in i){var x=i[p].shape||r.shape,g=x.length;f+=p+": "+g+"D "+(g>0?x:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+d+"D "+h+"	%c"+u+"	%c"+f+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),d7=20,Ob=3,rD=7;function YTe(e,t,r,a){var s=Gu(t),i=function(d,u,h,f){var p=Lr(u),x=f[f.length-1],g=new Array(x).fill(0),b=u.length,y=h==="complex64"?Rb(d):d;if(b>1)for(var S=0;S<p/x;S++)for(var w=S*x,k=0;k<x;k++)g[k]=Math.max(g[k],Mb(y[w+k],0,h).length);return g}(e,t,r,s),o=t.length,l=function d(u,h,f,p,x,g){g===void 0&&(g=!0);var b=f==="complex64"?2:1,y=h[0],S=h.length;if(S===0)return f==="complex64"?[Mb(Rb(u)[0],0,f)]:f==="bool"?[LY(u[0])]:[u[0].toString()];if(S===1){if(y>d7){var w=Ob*b,k=Array.from(u.slice(0,w)),C=Array.from(u.slice((y-Ob)*b,y*b));return f==="complex64"&&(k=Rb(k),C=Rb(C)),["["+k.map(function(K,U){return Mb(K,x[U],f)}).join(", ")+", ..., "+C.map(function(K,U){return Mb(K,x[y-Ob+U],f)}).join(", ")+"]"]}return["["+(f==="complex64"?Rb(u):Array.from(u)).map(function(K,U){return Mb(K,x[U],f)}).join(", ")+"]"]}var D=h.slice(1),E=p.slice(1),A=p[0]*b,I=[];if(y>d7){for(var L=0;L<Ob;L++){var P=(O=L*A)+A;I.push.apply(I,d(u.slice(O,P),D,f,E,x,!1))}for(I.push("..."),L=y-Ob;L<y;L++)P=(O=L*A)+A,I.push.apply(I,d(u.slice(O,P),D,f,E,x,L===y-1))}else for(L=0;L<y;L++){var O;P=(O=L*A)+A,I.push.apply(I,d(u.slice(O,P),D,f,E,x,L===y-1))}var Y=S===2?",":"";for(I[0]="["+I[0]+Y,L=1;L<I.length-1;L++)I[L]=" "+I[L]+Y;var q=`,
`;for(L=2;L<S;L++)q+=`
`;return I[I.length-1]=" "+I[I.length-1]+"]"+(g?"":q),I}(e,t,r,s,i),c=["Tensor"];return a&&(c.push("  dtype: "+r),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(l.map(function(d){return"    "+d}).join(`
`)),c.join(`
`)}function Mb(e,t,r){return w0(Array.isArray(e)?parseFloat(e[0].toFixed(rD))+" + "+parseFloat(e[1].toFixed(rD))+"j":pI(e)?"'"+e+"'":r==="bool"?LY(e):parseFloat(e.toFixed(rD)).toString(),t)}function LY(e){return e===0?"false":"true"}function Rb(e){for(var t=[],r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}var Gy=function(){function e(t,r,a){var s=this;if(this.dtype=r,this.shape=t.slice(),this.size=Lr(t),a!=null){var i=a.length;We(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+s.size+"'."})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=a||w2(r,this.size),this.strides=Gu(t)}return e.prototype.set=function(t){for(var r=this,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];a.length===0&&(a=[0]),We(a.length===this.rank,function(){return"The number of provided coordinates ("+a.length+") must match the rank ("+r.rank+")"});var i=this.locToIndex(a);this.values[i]=t},e.prototype.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.length===0&&(t=[0]);for(var a=0,s=0,i=t;s<i.length;s++){var o=i[s];if(o<0||o>=this.shape[a]){var l="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(l)}a++}for(var c=t[t.length-1],d=0;d<t.length-1;++d)c+=this.strides[d]*t[d];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=this.strides[a]*t[a];return r},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var r=new Array(this.shape.length),a=0;a<r.length-1;++a)r[a]=Math.floor(t/this.strides[a]),t-=r[a]*this.strides[a];return r[r.length-1]=t,r},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Ou().makeTensor(this.values,this.shape,this.dtype)},e}(),Ou=null,Ut=null,BY=null,ds=function(){function e(t,r,a,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=r||"float32",this.size=Lr(t),this.strides=Gu(t),this.dataId=a,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),We(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,r){return this.throwIfDisposed(),this.reshape([t,r])},e.prototype.as3D=function(t,r,a){return this.throwIfDisposed(),this.reshape([t,r,a])},e.prototype.as4D=function(t,r,a,s){return this.throwIfDisposed(),this.reshape([t,r,a,s])},e.prototype.as5D=function(t,r,a,s,i){return this.throwIfDisposed(),this.reshape([t,r,a,s,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),Ut.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,Ut.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return Ut.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,l7(this.shape,t)]}})})},e.prototype.arraySync=function(){return l7(this.shape,this.dataSync())},e.prototype.data=function(){return Pr(this,void 0,void 0,function(){var t,r;return Or(this,function(a){switch(a.label){case 0:return this.throwIfDisposed(),t=Ou().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:r=a.sent();try{return[2,r.map(function(s){return S2(s)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}a.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Ou().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(r){return S2(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Ou().read(this.dataId)];case 1:return t=r.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Ou().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),Ut.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),Ut.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),Ut.expandDims(this,t)},e.prototype.cumsum=function(t,r,a){return t===void 0&&(t=0),r===void 0&&(r=!1),a===void 0&&(a=!1),Ut.cumsum(this,t,r,a)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),Ut.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),Ut.clone(this)},e.prototype.oneHot=function(t,r,a){return this.throwIfDisposed(),Ut.oneHot(this,t,r,a)},e.prototype.toString=function(t){return t===void 0&&(t=!1),YTe(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),Ut.tile(this,t)},e.prototype.gather=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Ut.gather(this,t,r)},e.prototype.matMul=function(t,r,a){return r===void 0&&(r=!1),a===void 0&&(a=!1),this.throwIfDisposed(),Ut.matMul(this,t,r,a)},e.prototype.dot=function(t){return this.throwIfDisposed(),Ut.dot(this,t)},e.prototype.norm=function(t,r,a){return t===void 0&&(t="euclidean"),r===void 0&&(r=null),a===void 0&&(a=!1),this.throwIfDisposed(),Ut.norm(this,t,r,a)},e.prototype.slice=function(t,r){return this.throwIfDisposed(),Ut.slice(this,t,r)},e.prototype.reverse=function(t){return this.throwIfDisposed(),Ut.reverse(this,t)},e.prototype.concat=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Ut.concat([this].concat(t),r)},e.prototype.split=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Ut.split(this,t,r)},e.prototype.stack=function(t,r){return r===void 0&&(r=0),Ut.stack([this,t],r)},e.prototype.unstack=function(t){return t===void 0&&(t=0),Ut.unstack(this,t)},e.prototype.pad=function(t,r){return r===void 0&&(r=0),Ut.pad(this,t,r)},e.prototype.batchNormalization=function(t,r,a,s,i){return a===void 0&&(a=.001),BY("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,r,i,s,a)},e.prototype.batchNorm=function(t,r,a,s,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Ut.batchNorm(this,t,r,a,s,i)},e.prototype.all=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.all(this,t,r)},e.prototype.any=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.any(this,t,r)},e.prototype.logSumExp=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.logSumExp(this,t,r)},e.prototype.sum=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.sum(this,t,r)},e.prototype.prod=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.prod(this,t,r)},e.prototype.mean=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.mean(this,t,r)},e.prototype.min=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.min(this,t,r)},e.prototype.max=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ut.max(this,t,r)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Ut.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Ut.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),Ut.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),Ut.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),Ut.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),Ut.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),Ut.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),Ut.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),Ut.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),Ut.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),Ut.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),Ut.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),Ut.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),Ut.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),Ut.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),Ut.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),Ut.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Ut.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),Ut.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Ut.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),Ut.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),Ut.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Ut.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),Ut.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),Ut.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Ut.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),Ut.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),Ut.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),Ut.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),Ut.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),Ut.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Ut.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),Ut.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Ut.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ut.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Ut.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ut.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),Ut.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Ut.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),Ut.logicalXor(this,t)},e.prototype.where=function(t,r){return this.throwIfDisposed(),Ut.where(t,this,r)},e.prototype.neg=function(){return this.throwIfDisposed(),Ut.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Ut.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Ut.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Ut.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Ut.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Ut.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Ut.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Ut.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Ut.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Ut.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Ut.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Ut.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Ut.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Ut.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Ut.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Ut.abs(this)},e.prototype.clipByValue=function(t,r){return this.throwIfDisposed(),Ut.clipByValue(this,t,r)},e.prototype.relu=function(){return this.throwIfDisposed(),Ut.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Ut.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Ut.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Ut.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),Ut.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),Ut.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Ut.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ut.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Ut.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Ut.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Ut.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Ut.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Ut.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Ut.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Ut.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Ut.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Ut.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Ut.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Ut.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Ut.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Ut.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Ut.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Ut.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Ut.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Ut.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),Ut.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Ut.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Ut.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Ut.image.resizeBilinear(this,t,r)},e.prototype.resizeNearestNeighbor=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Ut.image.resizeNearestNeighbor(this,t,r)},e.prototype.conv1d=function(t,r,a,s,i,o){return s===void 0&&(s="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Ut.conv1d(this,t,r,a,s,i,o)},e.prototype.conv2d=function(t,r,a,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Ut.conv2d(this,t,r,a,s,i,o)},e.prototype.conv2dTranspose=function(t,r,a,s,i){return this.throwIfDisposed(),Ut.conv2dTranspose(this,t,r,a,s,i)},e.prototype.depthwiseConv2D=function(t,r,a,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Ut.depthwiseConv2d(this,t,r,a,s,i,o)},e.prototype.separableConv2d=function(t,r,a,s,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),Ut.separableConv2d(this,t,r,a,s,i,o)},e.prototype.avgPool=function(t,r,a,s){return this.throwIfDisposed(),Ut.avgPool(this,t,r,a,s)},e.prototype.maxPool=function(t,r,a,s){return this.throwIfDisposed(),Ut.maxPool(this,t,r,a,s)},e.prototype.localResponseNormalization=function(t,r,a,s){return t===void 0&&(t=5),r===void 0&&(r=1),a===void 0&&(a=1),s===void 0&&(s=.5),Ut.localResponseNormalization(this,t,r,a,s)},e.prototype.pool=function(t,r,a,s,i){return this.throwIfDisposed(),Ut.pool(this,t,r,a,s,i)},e.prototype.variable=function(t,r,a){return t===void 0&&(t=!0),this.throwIfDisposed(),Ou().makeVariable(this,t,r,a)},e.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),Ut.unsortedSegmentSum(this,t,r)},e.prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),Ut.batchToSpaceND(this,t,r)},e.prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),Ut.spaceToBatchND(this,t,r)},e.prototype.topk=function(t,r){return t===void 0&&(t=1),r===void 0&&(r=!0),this.throwIfDisposed(),Ut.topk(this,t,r)},e.prototype.stridedSlice=function(t,r,a,s,i,o,l,c){return s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),Ut.stridedSlice(this,t,r,a,s,i,o,l,c)},e.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),Ut.depthToSpace(this,t,r)},e.prototype.fft=function(){return this.throwIfDisposed(),Ut.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Ut.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Ut.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Ut.spectral.irfft(this)},e}();Object.defineProperty(ds,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var u7,N3,w3,S3,C3,J0=function(e){function t(r,a,s,i){var o=e.call(this,r.shape,r.dtype,r.dataId,i)||this;return o.trainable=a,o.name=s,o}return Wd(t,e),t.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and previous value ("+this.dtype+") must match");if(!Fi(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and previous value ("+this.shape+") must match");Ou().disposeTensor(this),this.dataId=r.dataId,Ou().incRef(this,null)},t.prototype.dispose=function(){Ou().disposeVariable(this),this.isDisposedInternal=!0},t}(ds);Object.defineProperty(J0,Symbol.hasInstance,{value:function(e){return e instanceof ds&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(u7||(u7={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(N3||(N3={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(w3||(w3={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(S3||(S3={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(C3||(C3={}));var KTe={float32:S3,int32:N3,bool:w3,complex64:C3};function eo(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return KTe[e][t]}function aD(e){return eo(e,"int32")}function ps(e,t){if(e.dtype===t.dtype)return[e,t];var r=eo(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function XTe(e,t){We(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function UY(e){var t=[];return function r(a,s,i){if(a!=null){if(a instanceof ds)return void s.push(a);if(o=a,!(!Array.isArray(o)&&typeof o!="object")){var o,l=a;for(var c in l){var d=l[c];i.has(d)||(i.add(d),r(d,s,i))}}}}(e,t,new Set),t}var nD,h7=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),QTe=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new h7}return e.prototype.ready=function(){return Pr(this,void 0,void 0,function(){var t,r,a;return Or(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),r=0,s.label=1;case 1:return r<t.length?(a=t[r],[4,this.initializeBackend(a).success]):[3,5];case 2:return s.sent()?[4,this.setBackend(a)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),r=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,r,a){return a===void 0&&(a=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:r,priority:a},!0)},e.prototype.setBackend=function(t){return Pr(this,void 0,void 0,function(){var r,a,s;return Or(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(t),a=r.success,r.asyncInit?[4,a]:[3,2]);case 1:return s=i.sent(),[3,3];case 2:s=a,i.label=3;case 3:if(!s)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new WTe(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;i7(this.backendName).forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var r=this;i7(t).forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(r.registry[t])})},e.prototype.initializeBackend=function(t){var r=this,a=this.registryFactory[t];if(a==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var s=a.factory();if(Promise.resolve(s)===s){var i=++this.pendingBackendInitId,o=s.then(function(l){return!(i<r.pendingBackendInitId)&&(r.registry[t]=l,r.pendingBackendInit=null,!0)}).catch(function(l){return!(i<r.pendingBackendInitId)&&(r.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,a){return t.registryFactory[a].priority-t.registryFactory[r].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),r=0;r<t.length;r++){var a=t[r],s=this.initializeBackend(a),i=s.success,o=s.asyncInit;if(o||i)return{name:a,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,r){var a=this.state.tensorInfo.get(r),s=a.backend,i=this.readSync(r);s.disposeData(r),a.backend=t,t.move(r,i,a.shape,a.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,r){var a,s=this,i=null;if(r==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");r=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return s.startScope(i)},function(){return s.endScope(a)},function(){return(a=r())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a})},e.prototype.scopedRun=function(t,r,a){t();try{var s=a();return r(),s}catch(i){throw r(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var r=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),a={x:t};return this.addTapeNode(this.state.activeScope.name,a,[r],function(s){return{x:function(){return s.toFloat()}}},[]),r},e.prototype.runKernel=function(t,r,a,s,i){return this.runKernelFunc(null,r,null,t,a,s,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,r,a){var s=this.backend.numDataIds(),i=0;a.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-r-i-o;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,r,a,s,i,o,l){var c,d=this;o===void 0&&(o=[]),l===void 0&&(l=[]);var u=[],h=this.isTapeOn();s==null&&(s=this.state.activeScope!=null?this.state.activeScope.name:"");var f,p=function(S){h&&(u=S.map(function(w){return d.keep(d.clone(w))}))},x=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var b,y=AY(s,this.backendName);return f=y!=null?function(){var S=d.backend.numDataIds();b=y.kernelFunc({inputs:r,attrs:i,backend:d.backend});var w=Array.isArray(b)?b:[b];d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,S,w);var k=w.map(function(D){var E=D.dataId,A=D.shape,I=D.dtype;return d.makeTensorFromDataId(E,A,I)}),C=k.filter(function(D,E){return l[E]});return p((o||[]).slice().concat(C)),k}:function(){var S=d.backend.numDataIds();b=d.tidy(function(){return t(d.backend,p)});var w=Array.isArray(b)?b:[b];return d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,S,w),w},this.scopedRun(function(){return d.state.kernelDepth++},function(){return d.state.kernelDepth--},function(){c=d.ENV.getBool("DEBUG")?d.profiler.profileKernel(s,r,function(){return f()}):f()}),h&&this.addTapeNode(s,r,c,a,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-x,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(function(S){return r[S].shape}),outputShapes:c.map(function(S){return S.shape})}),Array.isArray(b)?c:c[0]},e.prototype.makeTensor=function(t,r,a,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");a=a||"float32",s=s||this.backend;var i=t;a==="string"&&pI(t[0])&&(i=t.map(function(u){return zTe(u)}));var o=s.write(i,r,a),l=new ds(r,a,o,this.nextTensorId());if(this.incRef(l,s),a==="string"){var c=this.state.tensorInfo.get(o),d=$Te(i);this.state.numBytes+=d-c.bytes,c.bytes=d}return l},e.prototype.makeTensorFromDataId=function(t,r,a,s){var i=new ds(r,a=a||"float32",t,this.nextTensorId());return this.incRef(i,s),i},e.prototype.makeVariable=function(t,r,a,s){r===void 0&&(r=!0),a=a||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.asType(s));var i=new J0(t,r,a,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,r){var a=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,a===0){this.state.numDataBuffers++;var s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*OY(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:r||this.backend,dtype:t.dtype,shape:t.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof J0||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var r=this.state.tensorInfo.get(t.dataId);r.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=r.bytes),this.state.numDataBuffers--,r.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var r=this.state.registeredVariables[t];this.disposeVariable(r)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Pr(this,void 0,void 0,function(){var r,a;return Or(this,function(s){return this.state.profiling=!0,r=this.state.numBytes,a=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-a,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,r,a,s,i){var o=this,l={id:this.state.nextTapeNodeId++,kernelName:t,inputs:r,outputs:a,saved:i},c=PTe(t);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=function(d){return d=d.map(function(u,h){if(u==null){var f=a[h],p=P1(f.size,f.dtype);return o.makeTensor(p,f.shape,f.dtype)}return u}),s(d.length>1?d:d[0],i)}),this.state.activeTape.push(l)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(r.name=t),this.state.scopeStack.push(r),this.state.activeScope=r},e.prototype.endScope=function(t){for(var r=this,a=UY(t),s=new Set(a.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||s.has(o.id)||o.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],a.forEach(function(c){c.kept||c.scopeId!==l.id||r.track(c)})},e.prototype.gradients=function(t,r,a,s){var i=this;if(s===void 0&&(s=!1),We(r.length>0,function(){return"gradients() received an empty list of xs."}),a!=null&&a.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+a.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});We(o instanceof ds,function(){return"The result y returned by f() must be a tensor."});var l=function(c,d,u){for(var h={},f={},p=0;p<d.length;p++)h[d[p].id]=!0;for(p=0;p<c.length;p++){var x=(D=c[p]).inputs;for(var g in x){for(var b=x[g],y=!1,S=0;S<d.length;S++)if(h[b.id]){D.outputs.forEach(function(L){return h[L.id]=!0}),y=!0,f[D.id]=!0;break}if(y)break}}var w={};w[u.id]=!0;var k={};for(p=c.length-1;p>=0;p--)for(x=(D=c[p]).inputs,S=0;S<D.outputs.length;S++)if(w[D.outputs[S].id]){for(var g in x)w[x[g].id]=!0,k[D.id]=!0;break}var C=[];for(p=0;p<c.length;p++){var D;if(f[(D=c[p]).id]&&k[D.id]){var E={};for(var g in D.inputs){var A=D.inputs[g];h[A.id]&&(E[g]=A)}var I=Object.assign({},D);I.inputs=E,I.outputs=D.outputs,C.push(I)}}return C}(this.state.activeTape,r,o);if(!s&&l.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,d,u={};u[o.id]=a??(c=o.shape,d=RY(Lr(c),"float32"),ht.makeTensor(d,c,"float32")),function(f,p,x){for(var g=function(y){var S=p[y],w=[];if(S.outputs.forEach(function(E){var A=f[E.id];A!=null?w.push(A):w.push(null)}),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var k=S.gradient(w),C=function(E){if(!(E in k))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(k)+".");var A=x(function(){return k[E]()});if(A.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+A.dtype+"'");var I=S.inputs[E];if(!Fi(A.shape,I.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+E+"' has shape '"+A.shape+"', which does not match the shape of the input '"+I.shape+"'");if(f[I.id]==null)f[I.id]=A;else{var L=f[I.id];f[I.id]=L.add(A),L.dispose()}};for(var D in S.inputs)C(D)},b=p.length-1;b>=0;b--)g(b)}(u,l,function(f){return i.tidy(f)});var h=r.map(function(f){return u[f.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(f){for(var p=0,x=f.saved;p<x.length;p++)x[p].dispose()}),i.state.activeTape=null),{value:o,grads:h}})},e.prototype.customGrad=function(t){var r=this;return We(y3(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var a,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];We(s.every(function(l){return l instanceof ds}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return s.forEach(function(l,c){o[c]=l}),r.runKernelFunc(function(l,c){return We((a=t.apply(void 0,s.concat([c]))).value instanceof ds,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),We(y3(a.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),a.value},o,function(l,c){var d=a.gradFunc(l,c),u=Array.isArray(d)?d:[d];We(u.length===s.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),We(u.every(function(f){return f instanceof ds}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return u.forEach(function(f,p){h[p]=function(){return f}}),h})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Pr(this,void 0,void 0,function(){var r,a;return Or(this,function(s){switch(s.label){case 0:return r=Iu(),[4,this.backend.time(t)];case 1:return(a=s.sent()).wallMs=Iu()-r,[2,a]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new h7,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),ht=function(){var e=function(){if(nD==null){var r=void 0;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else{if(typeof self>"u")throw new Error("Could not find a global object");r=self}nD=r}return nD}();if(e._tfengine==null){var t=new TTe(e);e._tfengine=new QTe(t)}return function(r){DY=r}(e._tfengine.ENV),Ou=function(){return e._tfengine},e._tfengine}();function $Y(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Bh=Ht();Bh.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Bh.registerFlag("IS_BROWSER",function(){return $Y()}),Bh.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Bh.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Bh.registerFlag("PROD",function(){return!1}),Bh.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Bh.getBool("DEBUG")}),Bh.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Bh.registerFlag("IS_TEST",function(){return!1});var Yy,rc,Jl,Gp={},sD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function JTe(e,t){Gp[e]=t}function oh(e){e in Gp||(Gp[e]=function(r){if(r!==1&&r!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var a=function(s){if(typeof OffscreenCanvas<"u"&&s===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(r);return a.addEventListener("webglcontextlost",function(s){s.preventDefault(),delete Gp[r]},!1),r===1?a.getContext("webgl",sD)||a.getContext("experimental-webgl",sD):a.getContext("webgl2",sD)}(e));var t=Gp[e];return t.isContextLost()?(delete Gp[e],oh(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Gp[e])}function cC(e,t){return[t,e]}function cy(e){var t=Lr(e);return b3(Math.ceil(t/4))}function O1(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function xI(e,t){var r,a,s,i,o,l,c,d,u,h=e;return Ht().getNumber("WEBGL_VERSION")===2?(r=h.R32F,a=h.R16F,s=h.RGBA16F,i=h.RGBA32F,o=h.RED,l=4,c=1,d=h.HALF_FLOAT,u=h.FLOAT):(r=e.RGBA,a=e.RGBA,s=e.RGBA,i=h.RGBA,o=e.RGBA,l=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:u}}function Br(e,t,r){var a=r();return t&&function(s){var i=s.getError();if(i!==s.NO_ERROR)throw new Error("WebGL Error: "+r4e(s,i))}(e),a}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Yy||(Yy={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(rc||(rc={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Jl||(Jl={}));var ZTe=596e-10,e4e=65504;function t4e(e){return!!(Ht().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||ZTe<Math.abs(e)&&Math.abs(e)<e4e)}function r4e(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function jN(e,t,r){return Cf(e,t,function(){return e.getExtension(r)},'Extension "'+r+'" not supported on this browser.')}function a4e(e,t,r){var a=Cf(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Br(e,t,function(){return e.shaderSource(a,r)}),Br(e,t,function(){return e.compileShader(a)}),e.getShaderParameter(a,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(a)),new Error("Failed to compile vertex shader.");return a}function n4e(e,t,r){var a=Cf(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Br(e,t,function(){return e.shaderSource(a,r)}),Br(e,t,function(){return e.compileShader(a)}),e.getShaderParameter(a,e.COMPILE_STATUS)===!1)throw function(s,i){var o=s4e.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(s);for(var l=+o[1],c=s.split(`
`),d=c.length.toString().length+2,u=c.map(function(b,y){return w0((y+1).toString(),d)+b}),h=0,f=0;f<u.length;f++)h=Math.max(u[f].length,h);var p=u.slice(0,l-1),x=u.slice(l-1,l),g=u.slice(l);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+w0(x[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join(`
`))}(r,e.getShaderInfoLog(a)),new Error("Failed to compile fragment shader.");return a}var iD,oD,s4e=/ERROR: [0-9]+:([0-9]+):/g;function i4e(e,t){return Cf(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function o4e(e,t,r){if(Br(e,t,function(){return e.linkProgram(r)}),e.getProgramParameter(r,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function lD(e,t,r){if(Br(e,t,function(){return e.validateProgram(r)}),e.getProgramParameter(r,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function l4e(e,t,r){var a=Cf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Br(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),Br(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}),a}function c4e(e,t,r){var a=Cf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Br(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a)}),Br(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)}),a}function d4e(e,t){return Cf(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function u4e(e,t){var r=Ht().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var a="["+e+"x"+t+"]";throw new Error("Requested texture size "+a+" is invalid.")}if(e>r||t>r)throw a="["+e+"x"+t+"]",new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+("["+r+"x"+r+"]")+".")}function h4e(e,t){return Cf(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function f7(e,t,r,a,s,i,o,l){var c=e.getAttribLocation(r,a);return c!==-1&&(Br(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,s)}),Br(e,t,function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,l)}),Br(e,t,function(){return e.enableVertexAttribArray(c)}),!0)}function f4e(e,t,r,a){g4e(e,a),Br(e,t,function(){return e.activeTexture(e.TEXTURE0+a)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)})}function m4e(e,t,r,a){return Cf(e,t,function(){return e.getUniformLocation(r,a)},'uniform "'+a+'" not present in program.')}function p4e(e,t,r){return e.getUniformLocation(t,r)}function x4e(e,t,r,a,s,i){Br(e,t,function(){return f4e(e,t,a,i)}),Br(e,t,function(){return e.uniform1i(s,i)})}function cD(e,t,r,a){Br(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,a)}),Br(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)})}function m7(e,t,r){Br(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Br(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function NN(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+v4e(e,t))}function v4e(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Cf(e,t,r,a){var s=Br(e,t,function(){return r()});if(s==null)throw new Error(a);return s}function g4e(e,t){var r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>r)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+r+"]")+".")}function C2(e,t){return t===void 0&&(t=2),Lr(e.slice(0,e.length-t))}function k2(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function dD(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[C2(e)].concat(k2(e))),t}function b4e(e,t){var r;t===void 0&&(t=!1);var a=Ht().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(a*=2,(e=e.map(function(d,u){return u>=e.length-2?PY(e[u]):e[u]})).length===1&&(e=[2,e[0]])),e.length!==2){var s=Jp(e);e=s.newShape}var i=Lr(e);if(e.length<=1&&i<=a)return[1,i];if(e.length===2&&e[0]<=a&&e[1]<=a)return e;if(e.length===3&&e[0]*e[1]<=a&&e[2]<=a)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=a&&e[1]*e[2]<=a)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=a&&e[3]<=a)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=a&&e[1]*e[2]*e[3]<=a)return[e[0],e[1]*e[2]*e[3]];if(t){var o=C2(e),l=2,c=2;return e.length&&(l=(r=k2(e))[0],c=r[1]),b3(i=o*(l/2)*(c/2)).map(function(d){return 2*d})}return b3(i)}function wN(e){return e%2==0}function SN(e,t){if(Fi(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var r=e.slice(-1)[0],a=t.slice(-1)[0];if(r===a||wN(r)&&wN(a)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&wN(e[0])&&wN(t[0])}function y4e(e){if(iD==null){var t=oh(e);iD=t.getParameter(t.MAX_TEXTURE_SIZE)}return iD}function j4e(e){if(oD==null){var t=oh(e);oD=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,oD)}function N4e(e){if(e===0)return 0;var t=oh(e);return Yc(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Yc(t,"EXT_disjoint_timer_query")?1:0}function Yc(e,t){return e.getExtension(t)!=null}function p7(e){try{if(oh(e)!=null)return!0}catch{return!1}return!1}function w4e(e){if(e===0)return!1;var t=oh(e);if(e===1){if(!Yc(t,"OES_texture_float"))return!1}else if(!Yc(t,"EXT_color_buffer_float"))return!1;return k3(t)}function S4e(e){if(e===0)return!1;var t=oh(e);if(e!==1){if(Yc(t,"EXT_color_buffer_float"))return k3(t);if(Yc(t,"EXT_color_buffer_half_float")){var r=t.getExtension("EXT_color_buffer_half_float");return function(a,s){var i=xI(a,s),o=a.createTexture();a.bindTexture(a.TEXTURE_2D,o),a.texImage2D(a.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var l=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,l),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,o,0);var c=a.checkFramebufferStatus(a.FRAMEBUFFER)===a.FRAMEBUFFER_COMPLETE;return a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteTexture(o),a.deleteFramebuffer(l),c}(t,r)}return!1}return!!Yc(t,"OES_texture_float")&&!!Yc(t,"WEBGL_color_buffer_float")&&k3(t)}function k3(e){var t=xI(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}function C4e(e){return e===2&&oh(e).fenceSync!=null}var da=Ht();function VY(e){Ht().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Er(e,t){return ht.tidy(e,t)}function jl(e){UY(e).forEach(function(t){return t.dispose()})}function k4e(e){return ht.keep(e)}function _2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ht().getBool("IS_TEST")||console.warn.apply(console,e)}function fp(e,t){var r=e;if(Wu(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(r)||Wu(r)&&t!=="string";)a.push(r.length),r=r[0];return Array.isArray(e)&&Ht().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function s(i,o,l){if(l=l||[],!Array.isArray(i)&&!Wu(i))return void We(o.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});We(o.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),We(i.length===o[0],function(){return"Element arr["+l.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),d=0;d<i.length;++d)s(i[d],c,l.concat(d))}(e,a,[]),a}function x7(e,t,r,a){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+r+"' passed to '"+a+"' must be "+e+" tensor, but got "+t+" tensor")}function Fe(e,t,r,a){if(a===void 0&&(a="numeric"),e instanceof ds)return x7(a,e.dtype,t,r),e;var s=I1(e);if(s!=="string"&&["bool","int32","float32"].indexOf(a)>=0&&(s=a),x7(a,s,t,r),e==null||!Wu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+r+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=fp(e,s);Wu(e)||Array.isArray(e)||(e=[e]);var l=s!=="string"?MY(e,s,Ht().getBool("DEBUG")):Q0(e,[],!0);return ht.makeTensor(l,o,s)}function E2(e,t,r,a){if(a===void 0&&(a="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(s,i){return Fe(s,t+"["+i+"]",r)},a)}function qY(e,t){for(var r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function _4e(e,t,r){for(var a=e.length+t.length,s=[],i=0,o=0,l=0;l<a;l++)r.indexOf(l)===-1?s.push(e[i++]):s.push(t[o++]);return s}function No(e,t){for(var r=[],a=e.length,s=0;s<a;s++)t.indexOf(s)===-1&&r.push(e[s]);return[r,t.map(function(i){return e[i]})]}function Cl(e,t){return _4e(e,t.map(function(r){return 1}),t)}function Yl(e,t,r){We(qY(t,r),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+r+" input."})}function lh(e,t){if(qY(e,t))return null;for(var r=[],a=0;a<t;++a)e.indexOf(a)===-1&&r.push(a);return e.forEach(function(s){return r.push(s)}),r}function vI(e){return e.map(function(t,r){return[r,t]}).sort(function(t,r){return t[1]-r[1]}).map(function(t){return t[0]})}function ch(e,t){for(var r=[],a=t-e;a<t;++a)r.push(a);return r}function E4e(e,t){var r=e[0].length;e.forEach(function(s,i){We(s.length===r,function(){return"Error in concat"+r+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+r+")"})}),We(t>=0&&t<r,function(){return"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+"."});var a=e[0];e.forEach(function(s,i){for(var o=0;o<r;o++)We(o===t||s[o]===a[o],function(){return"Error in concat"+r+"D: Shape of tensors["+i+"] ("+s+") does not match the shape of the rest ("+a+") along the non-concatenated axis "+i+"."})})}function Z0(e,t){for(var r=e[0].slice(),a=1;a<e.length;a++)r[t]+=e[a][t];return r}function tt(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var r=t[0],a=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1));var s=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ht.startScope(r);try{var l=a.apply(void 0,i);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ht.endScope(l),l}catch(c){throw ht.endScope(null),c}};return Object.defineProperty(s,"name",{value:r,configurable:!0}),s}da.registerFlag("HAS_WEBGL",function(){return da.getNumber("WEBGL_VERSION")>0}),da.registerFlag("WEBGL_VERSION",function(){return p7(2)?2:p7(1)?1:0}),da.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return da.get("WEBGL_VERSION")===2}),da.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),da.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),da.registerFlag("WEBGL_PACK",function(){return da.getBool("HAS_WEBGL")}),da.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_PACK_CLIP",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),da.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_PACK_REDUCE",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_LAZILY_UNPACK",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_CONV_IM2COL",function(){return da.getBool("WEBGL_PACK")}),da.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return y4e(da.getNumber("WEBGL_VERSION"))}),da.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return j4e(da.getNumber("WEBGL_VERSION"))}),da.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=da.getNumber("WEBGL_VERSION");return e===0?0:N4e(e)}),da.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return da.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),da.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return w4e(da.getNumber("WEBGL_VERSION"))}),da.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!da.getBool("WEBGL_FORCE_F16_TEXTURES")&&da.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),da.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return S4e(da.getNumber("WEBGL_VERSION"))}),da.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return C4e(da.getNumber("WEBGL_VERSION"))}),da.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return da.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),BY=VY;var Ji=tt({complex_:function(e,t){var r=Fe(e,"real","complex"),a=Fe(t,"imag","complex");return fn(r.shape,a.shape,"real and imag shapes, "+r.shape+" and "+a.shape+", must match in call to tf.complex()."),ht.runKernelFunc(function(s){return s.complex(r,a)},{$real:r,$imag:a})}}),Wc=tt({real_:function(e){var t=Fe(e,"input","real");return ht.runKernelFunc(function(r){return r.real(t)},{$input:t})}}),Mu=tt({imag_:function(e){var t=Fe(e,"input","imag");return ht.runKernelFunc(function(r){return r.imag(t)},{$input:t})}});function ao(e,t,r){return mp(e,t,fp(e,r),r)}function mp(e,t,r,a){if(a==null&&(a=I1(e)),a==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Wu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){FY(t);var s=Lr(t),i=Lr(r);We(s===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+s+" values but has "+i});for(var o=0;o<r.length;++o){var l=r[o],c=o!==r.length-1||l!==Lr(t.slice(o));We(r[o]===t[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "})}}return Wu(e)||Array.isArray(e)||(e=[e]),t=t||r,e=a!=="string"?MY(e,a,Ht().getBool("DEBUG")):Q0(e,[],!0),ht.makeTensor(e,t,a)}function Nr(e,t){if((Wu(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Wu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return mp(e,[],[],t)}function li(e,t){kg(e);var r=fp(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return mp(e,null,r,t)}function Um(e,t,r){if(kg(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var a=fp(e,r);if(a.length!==2&&a.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return mp(e,t,a,r)}function gI(e,t,r){if(kg(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var a=fp(e,r);if(a.length!==3&&a.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return mp(e,t,a,r)}function pl(e,t,r){if(kg(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var a=fp(e,r);if(a.length!==4&&a.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return mp(e,t,a,r)}function D4e(e,t,r){if(kg(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var a=fp(e,r);if(a.length!==5&&a.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return mp(e,t,a,r)}function A4e(e,t,r){if(kg(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var a=fp(e,r);if(a.length!==6&&a.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return mp(e,t=t||a,a,r)}function T4e(e,t,r,a){return t===void 0&&(t=!0),ht.makeVariable(e,t,r,a)}function _g(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=_g(e,"float32"),a=Un(e,"float32");return Ji(r,a)}var s=RY(Lr(e),t);return ht.makeTensor(s,e,t)}function Un(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=Un(e,"float32"),a=Un(e,"float32");return Ji(r,a)}var s=P1(Lr(e),t);return ht.makeTensor(s,e,t)}function Yu(e,t,r){return ht.runKernelFunc(function(a){return a.fill(e,t,r)},{})}function I4e(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");return ht.runKernelFunc(function(a){return a.linspace(e,t,r)},{})}function D2(e,t,r,a){if(r===void 0&&(r=1),a===void 0&&(a="float32"),r===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&r<0||t<e&&r>1)return Un([0],a);var s=P1(Math.abs(Math.ceil((t-e)/r)),a);t<e&&r===1&&(r=-1),s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+r;return li(s,a)}var zY=tt({onesLike_:function(e){var t=Fe(e,"x","onesLike");if(t.dtype==="complex64"){var r=zY(Wc(t)),a=Va(Mu(t));return Ji(r,a)}return ht.runKernelFunc(function(s){return s.onesLike(t)},{$x:t},function(s,i){return{$x:function(){return Va(s)}}})}}),Va=tt({zerosLike_:function(e){var t=Fe(e,"x","zerosLike");return ht.runKernelFunc(function(r){return r.zerosLike(t)},{$x:t},function(r,a){return{$x:function(){return Va(r)}}})}}),vi=tt({concat_:function(e,t){t===void 0&&(t=0),We(e.length>=1,function(){return"Pass at least one tensor to concat"});var r=E2(e,"tensors","concat");r[0].dtype==="complex64"&&r.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),t=Si(t,r[0].shape)[0];var a=Z0(r.map(function(l){return l.shape}),t);if(Lr(a)===0)return ao([],a);if((r=r.filter(function(l){return l.size>0})).length===1)return r[0];var s=r.map(function(l){return l.shape});E4e(s,t);var i=r,o={axis:t};return ht.runKernelFunc(function(l){return l.concat(r,t)},i,function(l){var c=s.map(function(d){return d[t]});return bI(l,c,t).map(function(d){return function(){return d}})},"Concat",o)}}),P4e=tt({concat1d_:function(e){return vi(e,0)}}),O4e=tt({concat2d_:function(e,t){return vi(e,t)}}),M4e=tt({concat3d_:function(e,t){return vi(e,t)}}),R4e=tt({concat4d_:function(e,t){return vi(e,t)}}),bI=tt({split_:function(e,t,r){r===void 0&&(r=0);var a,s=Fe(e,"x","split");return r=Si(r,s.shape)[0],typeof t=="number"?(We(s.shape[r]%t==0,function(){return"Number of splits must evenly divide the axis."}),a=new Array(t).fill(s.shape[r]/t)):(We(s.shape[r]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),a=t),ht.runKernelFunc(function(i){return i.split(s,a,r)},{$x:s},function(i){return{$x:function(){return vi(i,r)}}})}});function av(e,t){return e(t={exports:{}},t.exports),t.exports}var F4e=av(function(e){(function(t,r,a){function s(l){var c,d=this,u=(c=4022871197,function(h){h=h.toString();for(var f=0;f<h.length;f++){var p=.02519603282416938*(c+=h.charCodeAt(f));p-=c=p>>>0,c=(p*=c)>>>0,c+=4294967296*(p-=c)}return 23283064365386963e-26*(c>>>0)});d.next=function(){var h=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=h-(d.c=0|h)},d.c=1,d.s0=u(" "),d.s1=u(" "),d.s2=u(" "),d.s0-=u(l),d.s0<0&&(d.s0+=1),d.s1-=u(l),d.s1<0&&(d.s1+=1),d.s2-=u(l),d.s2<0&&(d.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var d=new s(l),u=c&&c.state,h=d.next;return h.int32=function(){return 4294967296*d.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.alea=o})(0,e)}),L4e=av(function(e){(function(t,r,a){function s(l){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor128=o})(0,e)}),B4e=av(function(e){(function(t,r,a){function s(l){var c=this,d="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^h^h<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),u==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorwow=o})(0,e)}),U4e=av(function(e){(function(t,r,a){function s(l){var c=this;c.next=function(){var d,u,h=c.x,f=c.i;return d=h[f],u=(d^=d>>>7)^d<<24,u^=(d=h[f+1&7])^d>>>10,u^=(d=h[f+3&7])^d>>>3,u^=(d=h[f+4&7])^d<<7,d=h[f+7&7],u^=(d^=d<<13)^d<<9,h[f]=u,c.i=f+1&7,u},function(d,u){var h,f=[];if(u===(0|u))f[0]=u;else for(u=""+u,h=0;h<u.length;++h)f[7&h]=f[7&h]<<15^u.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],d.x=f,d.i=0,h=256;h>0;--h)d.next()}(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(u.x&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorshift7=o})(0,e)}),$4e=av(function(e){(function(t,r,a){function s(l){var c=this;c.next=function(){var d,u,h=c.w,f=c.X,p=c.i;return c.w=h=h+1640531527|0,u=f[p+34&127],d=f[p=p+1&127],u^=u<<13,d^=d<<17,u^=u>>>15,d^=d>>>12,u=f[p]=u^d,c.i=p,u+(h^h>>>16)|0},function(d,u){var h,f,p,x,g,b=[],y=128;for(u===(0|u)?(f=u,u=null):(u+="\0",f=0,y=Math.max(y,u.length)),p=0,x=-32;x<y;++x)u&&(f^=u.charCodeAt((x+32)%u.length)),x===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,x>=0&&(g=g+1640531527|0,p=(h=b[127&x]^=f+g)==0?p+1:0);for(p>=128&&(b[127&(u&&u.length||0)]=-1),p=127,x=512;x>0;--x)f=b[p+34&127],h=b[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,b[p]=f^h;d.w=g,d.X=b,d.i=p}(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(u.X&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor4096=o})(0,e)}),V4e=av(function(e){(function(t,r,a){function s(l){var c=this,d="";c.next=function(){var h=c.b,f=c.c,p=c.d,x=c.a;return h=h<<25^h>>>7^f,f=f-p|0,p=p<<24^p>>>8^x,x=x-h|0,c.b=h=h<<20^h>>>12^f,c.c=f=f-p|0,c.d=p<<16^f>>>16^x,c.a=x-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):d+=l;for(var u=0;u<d.length+20;u++)c.b^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var f=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(f===0);return f},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.tychei=o})(0,e)}),Yp=av(function(e){(function(t,r){var a,s=this,i=256,o=6,l="random",c=r.pow(i,o),d=r.pow(2,52),u=2*d,h=i-1;function f(y,S,w){var k=[],C=g(function A(I,L){var P,O=[],Y=typeof I;if(L&&Y=="object")for(P in I)try{O.push(A(I[P],L-1))}catch{}return O.length?O:Y=="string"?I:I+"\0"}((S=S==1?{entropy:!0}:S||{}).entropy?[y,b(t)]:y??function(){try{var A;return a&&(A=a.randomBytes)?A=A(i):(A=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(A)),b(A)}catch{var I=s.navigator,L=I&&I.plugins;return[+new Date,s,L,s.screen,b(t)]}}(),3),k),D=new p(k),E=function(){for(var A=D.g(o),I=c,L=0;A<d;)A=(A+L)*i,I*=i,L=D.g(1);for(;A>=u;)A/=2,I/=2,L>>>=1;return(A+L)/I};return E.int32=function(){return 0|D.g(4)},E.quick=function(){return D.g(4)/4294967296},E.double=E,g(b(D.S),t),(S.pass||w||function(A,I,L,P){return P&&(P.S&&x(P,D),A.state=function(){return x(D,{})}),L?(r[l]=A,I):A})(E,C,"global"in S?S.global:this==r,S.state)}function p(y){var S,w=y.length,k=this,C=0,D=k.i=k.j=0,E=k.S=[];for(w||(y=[w++]);C<i;)E[C]=C++;for(C=0;C<i;C++)E[C]=E[D=h&D+y[C%w]+(S=E[C])],E[D]=S;(k.g=function(A){for(var I,L=0,P=k.i,O=k.j,Y=k.S;A--;)I=Y[P=h&P+1],L=L*i+Y[h&(Y[P]=Y[O=h&O+I])+(Y[O]=I)];return k.i=P,k.j=O,L})(i)}function x(y,S){return S.i=y.i,S.j=y.j,S.S=y.S.slice(),S}function g(y,S){for(var w,k=y+"",C=0;C<k.length;)S[h&C]=h&(w^=19*S[h&C])+k.charCodeAt(C++);return b(S)}function b(y){return String.fromCharCode.apply(0,y)}if(r["seed"+l]=f,g(r.random(),t),e.exports){e.exports=f;try{a=require("crypto")}catch{}}})([],Math)});Yp.alea=F4e,Yp.xor128=L4e,Yp.xorwow=B4e,Yp.xorshift7=U4e,Yp.xor4096=$4e,Yp.tychei=V4e;var dC=Yp.alea,yI=function(){function e(t,r,a,s,i){this.mean=t,this.stdDev=r,this.dtype=a,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=dC(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var r,a,s=!1;!s;){var i=void 0,o=void 0,l=void 0;do l=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);r=this.mean+this.stdDev*i*c,a=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(r)||(s=!0)}return this.truncated&&!this.isValidTruncated(a)||(this.nextVal=this.convertValue(a)),this.convertValue(r)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),q4e=function(){function e(t,r,a,s){this.alpha=t,this.beta=1/r,this.dtype=a;var i=s||Math.random();this.randu=dC(i.toString()),this.randn=new yI(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,r,a,s,i,o;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,r=1-.331*(t=s*s)*t,a=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<r||Math.log(i)<a)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),z4e=function(){function e(t,r,a,s){var i=this;if(t===void 0&&(t=0),r===void 0&&(r=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=r-t,this.dtype=a,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+r+" <= 1 and dtype is not float");this.random=dC(s)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function ma(e,t,r){return t===void 0&&(t="float32"),t=t||"float32",FY(e),new Gy(e,t,r)}function H4e(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var HY=tt({batchToSpaceND_:function(e,t,r){var a=Fe(e,"x","batchToSpaceND"),s=t.reduce(function(i,o){return i*o});return We(a.rank>=1+t.length,function(){return"input rank is "+a.rank+" but should be > than blockShape.length "+t.length}),We(r.length===t.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+t.length}),We(a.shape[0]%s==0,function(){return"input tensor batch is "+a.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+s}),ht.runKernelFunc(function(i){return i.batchToSpaceND(a,t,r)},{$x:a},function(i){return{$x:function(){return i.spaceToBatchND(t,r)}}})}}),W4e=tt({broadcastTo_:function(e,t){var r=Fe(e,"broadcastTo","x"),a=r.shape;if(t.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<r.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+r.rank+".");if(t.length>r.rank){for(var s=r.shape.slice();s.length<t.length;)s.unshift(1);r=r.reshape(s)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(r.shape[o]===t[o])i[o]=1;else if(r.shape[o]!==1)throw new Error("broadcastTo(): ["+a+"] cannot be broadcast to ["+t+"].");var l=i.map(function(c,d){return c>1?d:-1}).filter(function(c){return c>=0});return l.length===0?r.clone():ht.runKernelFunc(function(c){return c.tile(r,i)},{input:r},function(c){return{input:function(){return c.sum(l,!0)}}})}}),G4e=tt({cast_:function(e,t){var r=Fe(e,"x","cast");if(!BTe(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var a={dtype:t};return ht.runKernelFunc(function(s){return s.cast(r,t)},{x:r},function(s){return{x:function(){return s.clone()}}},"Cast",a)}}),Y4e=tt({clone_:function(e){var t=Fe(e,"x","clone",null);return ht.runKernelFunc(function(){return ht.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(r){return{$x:function(){return r.toFloat()}}})}}),K4e=tt({cumsum_:function(e,t,r,a){t===void 0&&(t=0),r===void 0&&(r=!1),a===void 0&&(a=!1);var s=Fe(e,"x","cumsum"),i=lh([t|=0],s.rank),o=s;i!=null&&(o=s.transpose(i));var l=ch(1,s.rank)[0],c=ht.runKernelFunc(function(d){return d.cumsum(o,l,r,a)},{permutedX:o},function(d){return{permutedX:function(){return d.cumsum(t,r,!a)}}});return i!=null&&(c=c.transpose(i)),c}}),X4e=tt({depthToSpace_:function(e,t,r){r===void 0&&(r="NHWC");var a=Fe(e,"x","depthToSpace"),s=r==="NHWC"?a.shape[1]:a.shape[2],i=r==="NHWC"?a.shape[2]:a.shape[3],o=r==="NHWC"?a.shape[3]:a.shape[1];return We(s*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+s+" and "+t+`  for depthToSpace with input shape
      `+a.shape}),We(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+a.shape}),We(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+a.shape}),ht.runKernelFunc(function(l){return l.depthToSpace(a,t,r)},{$x:a})}}),zc=tt({expandDims_:function(e,t){t===void 0&&(t=0);var r=Fe(e,"x","expandDims",null);We(t<=r.rank,function(){return"Axis must be <= rank of the tensor"});var a=r.shape.slice();return t<0&&(We(-(r.rank+1)<=t,function(){return"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"}),t=r.rank+t+1),a.splice(t,0,1),Md(r,a)}}),WY=tt({eye_:function(e,t,r,a){a===void 0&&(a="float32"),t==null&&(t=e);for(var s=ma([e,t],a),i=e<=t?e:t,o=0;o<i;++o)s.set(1,o,o);var l=s.toTensor().as2D(e,t);if(r==null)return l;if(r.length===1)return S0(zc(l,0),[r[0],1,1]);if(r.length===2)return S0(zc(zc(l,0),0),[r[0],r[1],1,1]);if(r.length===3)return S0(zc(zc(zc(l,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")}}),Q4e=tt({multinomial_:function(e,t,r,a){a===void 0&&(a=!1);var s=Fe(e,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var l=o===1?s.as2D(1,-1):s,c=ht.runKernelFunc(function(d){return d.multinomial(l,a,t,r)},{logits2D:l});return o===1?c.as1D():c}}),_3=tt({oneHot_:function(e,t,r,a){if(r===void 0&&(r=1),a===void 0&&(a=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var s=Fe(e,"indices","oneHot","int32"),i=s.shape.concat([t]);return s=s.flatten(),ht.runKernelFunc(function(o){return o.oneHot(s,t,r,a)},{$indices:s},function(o){return{$indices:function(){return Un(s.shape,"float32")}}}).reshape(i)}}),nv=tt({pad_:function(e,t,r){r===void 0&&(r=0);var a=Fe(e,"x","pad");if(a.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:r};return ht.runKernelFunc(function(i){return i.pad(a,t,r)},{x:a},function(i){var o=t.map(function(l){return l[0]});return{x:function(){return i.slice(o,a.shape)}}},"PadV2",s)}}),J4e=tt({pad1d_:function(e,t,r){return r===void 0&&(r=0),We(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),nv(e,[t],r)}}),Z4e=tt({pad2d_:function(e,t,r){return r===void 0&&(r=0),We(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),nv(e,t,r)}}),eIe=tt({pad3d_:function(e,t,r){return r===void 0&&(r=0),We(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),nv(e,t,r)}}),tIe=tt({pad4d_:function(e,t,r){return r===void 0&&(r=0),We(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),nv(e,t,r)}}),rIe=tt({rand_:function(e,t,r){var a=Lr(e),s=null;if(r==null||r==="float32")s=new Float32Array(a);else if(r==="int32")s=new Int32Array(a);else{if(r!=="bool")throw new Error("Unknown data type "+r);s=new Uint8Array(a)}for(var i=0;i<a;i++)s[i]=t();return ht.makeTensor(s,e,r)}}),aIe=tt({randomNormal_:function(e,t,r,a,s){if(t===void 0&&(t=0),r===void 0&&(r=1),a!=null&&a==="bool")throw new Error("Unsupported data type "+a);for(var i=new yI(t,r,a,!1,s),o=ma(e,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),nIe=tt({randomGamma_:function(e,t,r,a,s){if(r===void 0&&(r=1),a===void 0&&(a="float32"),r==null&&(r=1),a==null&&(a="float32"),a!=="float32"&&a!=="int32")throw new Error("Unsupported data type "+a);for(var i=new q4e(t,r,a,s),o=ma(e,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),GY=tt({randomUniform_:function(e,t,r,a,s){t===void 0&&(t=0),r===void 0&&(r=1),a===void 0&&(a="float32");for(var i=ma(e,a),o=new z4e(t,r,null,s),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}}),Md=tt({reshape_:function(e,t){var r=Fe(e,"x","reshape",null);t=FTe(t,r.size),We(r.size===Lr(t),function(){return"new shape and old shape must have the same number of elements."});var a={shape:t};return ht.runKernelFunc(function(s){return s.reshape(r,t)},{x:r},function(s){return{x:function(){return s.reshape(r.shape)}}},"Reshape",a)}}),YY=tt({spaceToBatchND_:function(e,t,r){var a=Fe(e,"x","spaceToBatchND");return We(a.rank>=1+t.length,function(){return"input rank "+a.rank+" should be > than [blockShape] "+t.length}),We(r.length===t.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+t.length}),We(a.shape.reduce(function(s,i,o){return o>0&&o<=t.length?s&&(i+r[o-1][0]+r[o-1][1])%t[o-1]==0:s},!0),function(){return"input spatial dimensions "+a.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+t.toString()}),ht.runKernelFunc(function(s){return s.spaceToBatchND(a,t,r)},{$x:a},function(s){return{$x:function(){return s.batchToSpaceND(t,r)}}})}}),KY=tt({squeeze_:function(e,t){var r=Fe(e,"x","squeeze");return Md(r,Jp(r.shape,t).newShape)}}),cc=tt({stack_:function(e,t){t===void 0&&(t=0);var r=E2(e,"tensors","stack");if(We(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length===1)return r[0].expandDims(t);var a=r[0].rank,s=r[0].shape,i=r[0].dtype;We(t<=a,function(){return"Axis must be <= rank of the tensor"}),r.forEach(function(l){fn(s,l.shape,"All tensors passed to stack must have matching shapes")}),r.forEach(function(l){We(i===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=r.map(function(l){return l.expandDims(t)});return vi(o,t)}}),S0=tt({tile_:function(e,t){var r=Fe(e,"x","tile",null);We(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of reps "+t+"."});var a=[r],s={reps:t};return ht.runKernelFunc(function(i,o){var l=i.tile(r,t);return o([r]),l},{x:r},function(i,o){var l=o[0];return{x:function(){var c=Va(l);if(l.rank===1)for(var d=0;d<t[0];++d)c=c.add(i.slice([d*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(d=0;d<t[0];++d)for(var u=0;u<t[1];++u)c=c.add(i.slice([d*l.shape[0],u*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(var h=0;h<t[2];++h)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(h=0;h<t[2];++h)for(var f=0;f<t[3];++f)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2],f*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",s,a)}}),sIe=tt({truncatedNormal_:function(e,t,r,a,s){if(t===void 0&&(t=0),r===void 0&&(r=1),a!=null&&a==="bool")throw new Error("Unsupported data type "+a);for(var i=new yI(t,r,a,!0,s),o=ma(e,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),gi=tt({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var r=Fe(e,"x","unstack");We(t>=-r.shape.length&&t<r.shape.length,function(){return"Axis = "+t+" is not in [-"+r.shape.length+", "+r.shape.length+")"}),t<0&&(t+=r.shape.length);var a={axis:t};return ht.runKernelFunc(function(s){return s.unstack(r,t)},{x:r},function(s){return{x:function(){return cc(s,t)}}},"Unpack",a)}}),iIe=function(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h;return Or(this,function(f){switch(f.label){case 0:return r=Fe(e,"x","setdiff1d"),a=Fe(t,"y","setdiff1d"),We(r.dtype===a.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+a.dtype+")."}),We(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),We(a.rank===1,function(){return"y should be 1D tensor, but got y ("+a.shape+")."}),[4,r.data()];case 1:return s=f.sent(),[4,a.data()];case 2:for(i=f.sent(),o=new Set(i),l=0,u=0;u<s.length;u++)o.has(s[u])||l++;for(c=new Gy([l],r.dtype),d=new Gy([l],"int32"),u=0,h=0;u<s.length;u++)o.has(s[u])||(c.values[h]=s[u],d.values[h]=u,h++);return[2,[c.toTensor(),d.toTensor()]]}})})};function A2(e,t,r,a){a===void 0&&(a=!0);var s=[];if(a)(s=s.concat(t.slice(0))).push(e[0]/r),s=s.concat(e.slice(1));else{s=s.concat(e[0]);for(var i=t.length,o=0;o<i;++o)s=s.concat([e[o+1]/t[o],t[o]]);s=s.concat(e.slice(i+1))}return s}function T2(e,t,r){r===void 0&&(r=!0);var a=[];if(r){a.push(t);for(var s=t+1;s<e;++s)s<=2*t?(a.push(s),a.push(s-(t+1))):a.push(s)}else{var i=[],o=[];for(s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);a.push.apply(a,i),a.push(0),a.push.apply(a,o)}return a}function I2(e,t,r,a){a===void 0&&(a=!0);var s=[];a?s.push(e[0]/r):s.push(e[0]*r);for(var i=1;i<e.length;++i)i<=t.length?a?s.push(t[i-1]*e[i]):s.push(e[i]/t[i-1]):s.push(e[i]);return s}function XY(e,t){for(var r=[0],a=0;a<t;++a)r.push(e[a][0]);return r}function QY(e,t,r){for(var a=e.slice(0,1),s=0;s<r;++s)a.push(e[s+1]-t[s][0]-t[s][1]);return a}function JY(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var r=t.shape,a=r[r.length-1],s=1,i=0;i<r.length-1;++i)s*=r[i];var o=e.shape,l=r.slice();l.pop();var c=1;for(i=a;i<e.rank;++i)c*=o[i],l.push(o[i]);var d=Gu(e.shape).map(function(u){return u/c}).concat([1]).slice(0,a);return[l,s,c,d]}var ZY=30;function uD(e){return e<=ZY?e:j3(e,Math.floor(Math.sqrt(e)))}function oIe(e,t,r){var a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+r.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+a+", and batchDim: "+s+".";if(r.rank<s)throw new Error(i+" update.rank < "+s+". ");if(e.length<a+(r.rank-s))throw new Error(i+" Output shape length < "+(a+(r.rank-s)));if(r.rank!==s+e.length-a)throw new Error(i+" update.rank != "+(s+e.length-a));for(var o=0;o<s;++o)if(r.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<r.rank-s;++o)if(r.shape[o+s]!==e[o+a])throw new Error(i+" updates.shape["+(o+s)+"] ("+r.shape[o+s]+") != shape["+(o+s)+"] ("+e[o+s]+")")}function lIe(e,t,r){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}oIe(r,t,e)}function P2(e,t,r){for(var a=t.shape.length,s=a>1?t.shape[a-1]:1,i=r.length,o=1,l=s;l<i;++l)o*=r[l];var c=s<1?1:s;return{sliceRank:s,numUpdates:Lr(t.shape)/c,sliceSize:o,strides:Gu(r.slice(0,s)).concat([1]),outputSize:Lr(r)}}function cIe(e,t,r){We(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),We(e.rank===r.length,function(){return"Error in slice"+e.rank+"D: Length of size "+r+" must match the rank of the array ("+e.rank+")."});for(var a=function(i){We(t[i]+r[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+r[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},s=0;s<e.rank;++s)a(s)}function v7(e){for(var t=[],r=0;e>0;)1&e&&t.push(r),e/=2,r++;return t}function jI(e,t,r){for(var a=[],s=0;s<e.length;s++)a[s]=Math.ceil((t[s]-e[s])/r[s]);return a}function dIe(e,t,r,a,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=a[s];return i<0&&(i+=l),i=g3(0,i,l-1)}function uIe(e,t,r,a,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=a[s];return i<0&&(i+=l),i=o>0?g3(0,i,l):g3(-1,i,l-1)}function eK(e,t,r){for(var a=r.length,s=0;s<r.length;s++)if(r[s]>1){a=s;break}for(s=a+1;s<r.length;s++)if(t[s]>0||r[s]!==e[s])return!1;return!0}function tK(e,t){for(var r=e.length>0?e[e.length-1]:1,a=0;a<e.length-1;a++)r+=e[a]*t[a];return r}function hIe(e,t){We(y3(e),function(){return"The f passed in variableGrads(f) must be a function"}),We(t==null||Array.isArray(t)&&t.every(function(u){return u instanceof J0}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var r=t!=null;if(!r)for(var a in t=[],ht.registeredVariables)t.push(ht.registeredVariables[a]);var s=r?t.filter(function(u){return!u.trainable}):null,i=t.length;We((t=t.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=ht.gradients(e,t,null,!0),l=o.value,c=o.grads;We(c.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),We(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var d={};return t.forEach(function(u,h){c[h]!=null&&(d[u.name]=c[h])}),s?.forEach(function(u){return d[u.name]=null}),{value:l,grads:d}}function uC(e){return ht.customGrad(e)}var kf=tt({softmax_:function(e,t){t===void 0&&(t=-1);var r=Fe(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and dim was "+t);return ht.runKernelFunc(function(a,s){var i=a.softmax(r,t);return s([i]),i},{logits:r},function(a,s){var i=s[0],o=a.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),fIe=tt({logSoftmax_:function(e,t){t===void 0&&(t=-1);var r=Fe(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and axis was "+t);return uC(function(a,s){var i=a.max(t,!0),o=a.sub(i),l=o.toFloat().sub(o.exp().sum(t,!0).log());return s([l]),{value:l,gradFunc:function(c,d){var u=d[0].exp();return c.sub(c.sum(t,!0).mul(u))}}})(r)}}),rK=function(){function e(t,r){this.backend=t,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,r){this.dataIdsCount++,this.data.set(t,r)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),aK=function(){function e(){}return e.prototype.time=function(t){return Ot("time")},e.prototype.read=function(t){return Ot("read")},e.prototype.readSync=function(t){return Ot("readSync")},e.prototype.numDataIds=function(){return Ot("numDataIds")},e.prototype.disposeData=function(t){return Ot("disposeData")},e.prototype.write=function(t,r,a){return Ot("write")},e.prototype.move=function(t,r,a,s){return Ot("move")},e.prototype.memory=function(){return Ot("memory")},e.prototype.floatPrecision=function(){return Ot("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,r,a,s){return Ot("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Ot("fusedBatchMatMul")},e.prototype.slice=function(t,r,a){return Ot("slice")},e.prototype.stridedSlice=function(t,r,a,s){return Ot("stridedSlice")},e.prototype.unstack=function(t,r){return Ot("unstack")},e.prototype.reverse=function(t,r){return Ot("reverse")},e.prototype.concat=function(t,r){return Ot("concat")},e.prototype.neg=function(t){return Ot("neg")},e.prototype.add=function(t,r){return Ot("add")},e.prototype.addN=function(t){return Ot("addN")},e.prototype.subtract=function(t,r){return Ot("subtract")},e.prototype.multiply=function(t,r){return Ot("multiply")},e.prototype.realDivide=function(t,r){return Ot("realDivide")},e.prototype.floorDiv=function(t,r){return Ot("floorDiv")},e.prototype.sum=function(t,r){return Ot("sum")},e.prototype.prod=function(t,r){return Ot("prod")},e.prototype.unsortedSegmentSum=function(t,r,a){return Ot("unsortedSegmentSum")},e.prototype.argMin=function(t,r){return Ot("argMin")},e.prototype.argMax=function(t,r){return Ot("argMax")},e.prototype.equal=function(t,r){return Ot("equal")},e.prototype.notEqual=function(t,r){return Ot("notEqual")},e.prototype.less=function(t,r){return Ot("less")},e.prototype.lessEqual=function(t,r){return Ot("lessEqual")},e.prototype.greater=function(t,r){return Ot("greater")},e.prototype.greaterEqual=function(t,r){return Ot("greaterEqual")},e.prototype.logicalNot=function(t){return Ot("logicalNot")},e.prototype.logicalAnd=function(t,r){return Ot("logicalAnd")},e.prototype.logicalOr=function(t,r){return Ot("logicalOr")},e.prototype.where=function(t){return Ot("where")},e.prototype.select=function(t,r,a){return Ot("select")},e.prototype.topk=function(t,r,a){return Ot("topk")},e.prototype.min=function(t,r){return Ot("min")},e.prototype.minimum=function(t,r){return Ot("minimum")},e.prototype.mod=function(t,r){return Ot("mod")},e.prototype.max=function(t,r){return Ot("max")},e.prototype.maximum=function(t,r){return Ot("maximum")},e.prototype.all=function(t,r){return Ot("all")},e.prototype.any=function(t,r){return Ot("any")},e.prototype.squaredDifference=function(t,r){return Ot("squaredDifference")},e.prototype.ceil=function(t){return Ot("ceil")},e.prototype.floor=function(t){return Ot("floor")},e.prototype.round=function(t){return Ot("round")},e.prototype.sign=function(t){return Ot("sign")},e.prototype.isNaN=function(t){return Ot("isNaN")},e.prototype.isInf=function(t){return Ot("isInf")},e.prototype.isFinite=function(t){return Ot("isFinite")},e.prototype.pow=function(t,r){return Ot("pow")},e.prototype.exp=function(t){return Ot("exp")},e.prototype.expm1=function(t){return Ot("expm1")},e.prototype.softmax=function(t,r){return Ot("softmax")},e.prototype.log=function(t){return Ot("log")},e.prototype.log1p=function(t){return Ot("log1p")},e.prototype.sqrt=function(t){return Ot("sqrt")},e.prototype.rsqrt=function(t){return Ot("rsqrt")},e.prototype.square=function(t){return Ot("square")},e.prototype.reciprocal=function(t){return Ot("reciprocal")},e.prototype.relu=function(t){return Ot("relu")},e.prototype.relu6=function(t){return Ot("relu6")},e.prototype.prelu=function(t,r){return Ot("prelu")},e.prototype.elu=function(t){return Ot("elu")},e.prototype.eluDer=function(t,r){return Ot("eluDer")},e.prototype.selu=function(t){return Ot("selu")},e.prototype.int=function(t){return Ot("int")},e.prototype.clip=function(t,r,a){return Ot("clip")},e.prototype.abs=function(t){return Ot("abs")},e.prototype.complexAbs=function(t){return Ot("complexAbs")},e.prototype.sigmoid=function(t){return Ot("sigmoid")},e.prototype.softplus=function(t){return Ot("softplus")},e.prototype.sin=function(t){return Ot("sin")},e.prototype.cos=function(t){return Ot("cos")},e.prototype.tan=function(t){return Ot("tan")},e.prototype.asin=function(t){return Ot("asin")},e.prototype.acos=function(t){return Ot("acos")},e.prototype.atan=function(t){return Ot("atan")},e.prototype.atan2=function(t,r){return Ot("atan2")},e.prototype.sinh=function(t){return Ot("sinh")},e.prototype.cosh=function(t){return Ot("cosh")},e.prototype.tanh=function(t){return Ot("tanh")},e.prototype.asinh=function(t){return Ot("asinh")},e.prototype.acosh=function(t){return Ot("acosh")},e.prototype.atanh=function(t){return Ot("atanh")},e.prototype.erf=function(t){return Ot("erf")},e.prototype.step=function(t,r){return Ot("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ot("fusedConv2d")},e.prototype.conv2d=function(t,r,a){return Ot("conv2d")},e.prototype.conv2dDerInput=function(t,r,a){return Ot("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,r,a){return Ot("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ot("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,r,a){return Ot("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,r,a){return Ot("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){return Ot("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,r,a){return Ot("conv3d")},e.prototype.conv3dDerInput=function(t,r,a){return Ot("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,r,a){return Ot("conv3dDerFilter")},e.prototype.maxPool=function(t,r){return Ot("maxPool")},e.prototype.maxPoolBackprop=function(t,r,a,s){return Ot("maxPoolBackprop")},e.prototype.avgPool=function(t,r){return Ot("avgPool")},e.prototype.avgPoolBackprop=function(t,r,a){return Ot("avgPoolBackprop")},e.prototype.avgPool3d=function(t,r){return Ot("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,r,a){return Ot("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,r){return Ot("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,r,a,s){return Ot("maxPool3dBackprop")},e.prototype.reshape=function(t,r){return Ot("reshape")},e.prototype.cast=function(t,r){return Ot("cast")},e.prototype.tile=function(t,r){return Ot("tile")},e.prototype.pad=function(t,r,a){return Ot("pad")},e.prototype.transpose=function(t,r){return Ot("transpose")},e.prototype.gather=function(t,r,a){return Ot("gather")},e.prototype.gatherND=function(t,r){return Ot("gatherND")},e.prototype.scatterND=function(t,r,a){return Ot("scatterND")},e.prototype.batchToSpaceND=function(t,r,a){return Ot("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,r,a){return Ot("spaceToBatchND")},e.prototype.resizeBilinear=function(t,r,a,s){return Ot("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,r,a){return Ot("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,r,a,s){return Ot("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){return Ot("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,r,a,s,i,o){return Ot("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,r,a,s,i){return Ot("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,r,a,s,i,o,l){return Ot("LRNGrad")},e.prototype.multinomial=function(t,r,a,s){return Ot("multinomial")},e.prototype.oneHot=function(t,r,a,s){return Ot("oneHot")},e.prototype.cumsum=function(t,r,a,s){return Ot("cumsum")},e.prototype.nonMaxSuppression=function(t,r,a,s,i){return Ot("nonMaxSuppression")},e.prototype.fft=function(t){return Ot("fft")},e.prototype.ifft=function(t){return Ot("ifft")},e.prototype.complex=function(t,r){return Ot("complex")},e.prototype.real=function(t){return Ot("real")},e.prototype.imag=function(t){return Ot("imag")},e.prototype.cropAndResize=function(t,r,a,s,i,o){return Ot("cropAndResize")},e.prototype.depthToSpace=function(t,r,a){return Ot("depthToSpace")},e.prototype.split=function(t,r,a){return Ot("split")},e.prototype.sparseToDense=function(t,r,a,s){return Ot("sparseToDense")},e.prototype.diag=function(t){return Ot("diag")},e.prototype.fill=function(t,r,a){return Ot("fill")},e.prototype.onesLike=function(t){return Ot("onesLike")},e.prototype.zerosLike=function(t){return Ot("zerosLike")},e.prototype.linspace=function(t,r,a){return Ot("linspace")},e.prototype.dispose=function(){return Ot("dispose")},e}();function Ot(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Pm(e,t){for(var r=e.length,a=[],s=0;s<r;s++){var i=r-1-s,o=e[i]||1;(t[t.length-1-s]||1)>1&&o===1&&a.unshift(i)}return a}function yi(e,t){for(var r=[],a=0;a<t.length;a++){var s=e[e.length-a-1],i=t.length-a-1,o=t[i];(s==null||s===1&&o>1)&&r.unshift(i)}return r}function Ra(e,t){for(var r=[],a=Math.max(e.length,t.length),s=0;s<a;s++){var i=e[e.length-s-1];i==null&&(i=1);var o=t[t.length-s-1];if(o==null&&(o=1),i===1)r.unshift(o);else if(o===1)r.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");r.unshift(i)}}return r}function Ky(e,t,r,a,s,i,o){o===void 0&&(o="channelsLast");var l,c=R2(t),d=c[0],u=c[1];if(o==="channelsLast")l=[d,u,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=[d,u,e[1],e[1]]}return sv(e,l,r,a,s,i,!1,o)}function O2(e,t,r,a,s,i,o){o===void 0&&(o="NDHWC");var l,c,d=E3(t),u=d[0],h=d[1],f=d[2];if(o==="NDHWC")c="channelsLast",l=[u,h,f,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",l=[u,h,f,e[1],e[1]]}return M2(e,l,r,a,s,!1,c,i)}function sv(e,t,r,a,s,i,o,l){o===void 0&&(o=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],f=c[3];if(l==="channelsLast")d=e[0],u=e[1],h=e[2],f=e[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);d=e[0],f=e[1],u=e[2],h=e[3]}var p,x=t[0],g=t[1],b=t[3],y=R2(r),S=y[0],w=y[1],k=R2(a),C=k[0],D=k[1],E=C0(x,C),A=C0(g,D),I=function(q,K,U,J,F,X,Q,ie){var M,V,W;if(typeof q=="number"){M={top:q,bottom:q,left:q,right:q,type:q===0?"VALID":"NUMBER"};var ee=function(de,z,se,Ne,ue){Ne==null&&(Ne=nK(de,z,se));var oe=de[0],ye=de[1],je=dy((oe-z+2*Ne)/se+1,ue);We(Ws(je),function(){return"The output # of rows ("+je+") must be an integer. Change the stride and/or zero pad parameters"});var Me=dy((ye-z+2*Ne)/se+1,ue);return We(Ws(Me),function(){return"The output # of columns ("+Me+") must be an integer. Change the stride and/or zero pad parameters"}),[je,Me]}([K,U],X,J,q,ie);V=ee[0],W=ee[1]}else if(q==="same"){V=Math.ceil(K/J),W=Math.ceil(U/F);var re=Math.max(0,(V-1)*J+X-K),ne=Math.max(0,(W-1)*F+Q-U),ce=Math.floor(re/2),ae=re-ce,Z=Math.floor(ne/2);M={top:ce,bottom:ae,left:Z,right:ne-Z,type:"SAME"}}else{if(q!=="valid")throw Error("Unknown padding parameter: "+q);M={top:0,bottom:0,left:0,right:0,type:"VALID"},V=Math.ceil((K-X+1)/J),W=Math.ceil((U-Q+1)/F)}return{padInfo:M,outHeight:V,outWidth:W}}(s,u,h,S,w,E,A,i),L=I.padInfo,P=I.outHeight,O=I.outWidth,Y=o?b*f:b;return l==="channelsFirst"?p=[d,Y,P,O]:l==="channelsLast"&&(p=[d,P,O,Y]),{batchSize:d,dataFormat:l,inHeight:u,inWidth:h,inChannels:f,outHeight:P,outWidth:O,outChannels:Y,padInfo:L,strideHeight:S,strideWidth:w,filterHeight:x,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationHeight:C,dilationWidth:D,inShape:e,outShape:p,filterShape:t}}function M2(e,t,r,a,s,i,o,l){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],f=c[3],p=c[4];if(o==="channelsLast")d=e[0],u=e[1],h=e[2],f=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);d=e[0],p=e[1],u=e[2],h=e[3],f=e[4]}var x,g=t[0],b=t[1],y=t[2],S=t[4],w=E3(r),k=w[0],C=w[1],D=w[2],E=E3(a),A=E[0],I=E[1],L=E[2],P=C0(g,A),O=C0(b,I),Y=C0(y,L),q=function(Q,ie,M,V,W,ee,re,ne,ce,ae,Z){var de,z,se,Ne;if(typeof Q=="number"){de={top:Q,bottom:Q,left:Q,right:Q,front:Q,back:Q,type:Q===0?"VALID":"NUMBER"};var ue=function(dt,Tt,At,qt,xe,he){xe==null&&(xe=nK(dt,Tt,qt));var ve=dt[0],pe=dt[1],De=dt[2],Ke=dy((ve-Tt+2*xe)/qt+1,he);We(Ws(Ke),function(){return"The output # of depths ("+Ke+") must be an integer. Change the stride and/or zero pad parameters"});var Nt=dy((pe-Tt+2*xe)/qt+1,he);We(Ws(Nt),function(){return"The output # of rows ("+Nt+") must be an integer. Change the stride and/or zero pad parameters"});var Je=dy((De-Tt+2*xe)/qt+1,he);return We(Ws(Je),function(){return"The output # of columns ("+Je+") must be an integer. Change the stride and/or zero pad parameters"}),[Ke,Nt,Je,At]}([ie,M,V,1],ne,1,W,Q,Z);z=ue[0],se=ue[1],Ne=ue[2]}else if(Q==="same"){z=Math.ceil(ie/W),se=Math.ceil(M/ee),Ne=Math.ceil(V/re);var oe=(z-1)*W+ne-ie,ye=(se-1)*ee+ce-M,je=(Ne-1)*re+ae-V,Me=Math.floor(oe/2),He=oe-Me,et=Math.floor(ye/2),ft=ye-et,Be=Math.floor(je/2);de={top:et,bottom:ft,left:Be,right:je-Be,front:Me,back:He,type:"SAME"}}else{if(Q!=="valid")throw Error("Unknown padding parameter: "+Q);de={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},z=Math.ceil((ie-ne+1)/W),se=Math.ceil((M-ce+1)/ee),Ne=Math.ceil((V-ae+1)/re)}return{padInfo:de,outDepth:z,outHeight:se,outWidth:Ne}}(s,u,h,f,k,C,D,P,O,Y,l),K=q.padInfo,U=q.outDepth,J=q.outHeight,F=q.outWidth,X=i?S*p:S;return o==="channelsFirst"?x=[d,X,U,J,F]:o==="channelsLast"&&(x=[d,U,J,F,X]),{batchSize:d,dataFormat:o,inDepth:u,inHeight:h,inWidth:f,inChannels:p,outDepth:U,outHeight:J,outWidth:F,outChannels:X,padInfo:K,strideDepth:k,strideHeight:C,strideWidth:D,filterDepth:g,filterHeight:b,filterWidth:y,effectiveFilterDepth:P,effectiveFilterHeight:O,effectiveFilterWidth:Y,dilationDepth:A,dilationHeight:I,dilationWidth:L,inShape:e,outShape:x,filterShape:t}}function nK(e,t,r,a){a===void 0&&(a=1);var s=C0(t,a);return Math.floor((e[0]*(r-1)-r+s)/2)}function R2(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function E3(e){return typeof e=="number"?[e,e,e]:e}function C0(e,t){return t<=1?e:e+(e-1)*(t-1)}function dy(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function eg(e){var t=R2(e),r=t[0],a=t[1],s=t[2];return r===1&&a===1&&s===1}function kl(e,t){return eg(e)||eg(t)}function NI(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function sK(e,t,r){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var a=Un(e.shape),s=e.toFloat(),i=r.complex(s,a);return a.dispose(),s.dispose(),i}if(!UTe(e.dtype,t))return ht.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=r.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return r.int(e);if(t==="bool"){var l=Nr(0,e.dtype);return i=r.notEqual(e,l),l.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function D3(e,t){return ht.makeTensorFromDataId(e.dataId,t,e.dtype)}function iK(e,t,r){var a=(t-e)/(r-1),s=P1(r,"float32");s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+a;return li(s,"float32")}function A3(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var r=new Float32Array(2*e.length),a=0;a<r.length;a+=2)r[a]=e[a/2],r[a+1]=t[a/2];return r}function g7(e,t){return{real:e[2*t],imag:e[2*t+1]}}function mIe(e,t,r,a){e[2*a]=t,e[2*a+1]=r}function pIe(e,t,r){var a=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}function xIe(e,t,r){var a=function(i,o,l){return function(c,d,u){for(var h=0,f=c.length,p=0,x=!1;h<f;){var g=u(d,c[p=h+(f-h>>>1)]);g>0?h=p+1:(f=p,x=!g)}return x?h:-h-1}(i,o,l||vIe)}(e,t,r),s=a<0?-(a+1):a;e.splice(s,0,t)}function vIe(e,t){return e>t?1:e<t?-1:0}function wI(e,t,r,a,s){return oK(e,t,r,a,s,0).selectedIndices}function SI(e,t,r,a,s,i){var o=oK(e,t,r,a,s,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function oK(e,t,r,a,s,i,o,l){l===void 0&&(l=!1);for(var c=Array.from(t).map(function(k,C){return{score:k,boxIndex:C,suppressBeginIndex:0}}).filter(function(k){return k.score>s}).sort(b7),d=i>0?-.5/i:0,u=[],h=[];u.length<r&&c.length>0;){var f=c.pop(),p=f.score,x=f.boxIndex,g=f.suppressBeginIndex;if(p<s)break;for(var b=!1,y=u.length-1;y>=g;--y){var S=gIe(e,x,u[y]);if(S>=a){b=!0;break}if(f.score=f.score*bIe(a,d,S),f.score<=s)break}f.suppressBeginIndex=u.length,b||(f.score===p?(u.push(x),h.push(f.score)):f.score>s&&xIe(c,f,b7))}var w=u.length;return l&&(u.fill(0,w),h.fill(0,w)),{selectedIndices:li(u,"int32"),selectedScores:li(h,"float32"),numValidOutputs:Nr(w,"int32")}}function gIe(e,t,r){var a=e.subarray(4*t,4*t+4),s=e.subarray(4*r,4*r+4),i=Math.min(a[0],a[2]),o=Math.min(a[1],a[3]),l=Math.max(a[0],a[2]),c=Math.max(a[1],a[3]),d=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),p=(l-i)*(c-o),x=(h-d)*(f-u);if(p<=0||x<=0)return 0;var g=Math.max(i,d),b=Math.max(o,u),y=Math.min(l,h),S=Math.min(c,f),w=Math.max(y-g,0)*Math.max(S-b,0);return w/(p+x-w)}function bIe(e,t,r){var a=Math.exp(t*r*r);return r<=e?a:0}function b7(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function lK(e,t,r){var a=new Array(e.rank).fill(0),s=e.shape.slice();return t.map(function(i){s[r]=i;var o=e.slice(a,s);return a[r]+=i,o})}function cK(e,t){for(var r=new Array(e.rank),a=0;a<r.length;a++)r[a]=e.shape[a]*t[a];var s=ma(r,e.dtype);for(a=0;a<s.values.length;++a){for(var i=s.indexToLoc(a),o=new Array(e.rank),l=0;l<o.length;l++)o[l]=i[l]%e.shape[l];var c=e.locToIndex(o);s.values[a]=e.values[c]}return s.toTensor()}function dK(e,t,r,a,s){for(var i=t[t.length-1],o=[e.length/i,i],l=o[0],c=o[1],d=Wy(r,l*a),u=Wy("int32",l*a),h=0;h<l;h++){for(var f=h*c,p=e.subarray(f,f+c),x=[],g=0;g<p.length;g++)x.push({value:p[g],index:g});x.sort(function(k,C){return C.value-k.value});var b=h*a,y=d.subarray(b,b+a),S=u.subarray(b,b+a);for(g=0;g<a;g++)y[g]=x[g].value,S[g]=x[g].index}var w=t.slice();return w[w.length-1]=a,[ao(d,w,r),ao(u,w,"int32")]}function CI(e,t){for(var r=[],a=0;a<t.length;a++)t[a]&&r.push(a);var s=ma(e,"int32"),i=ma([r.length,e.length],"int32");for(a=0;a<r.length;a++){var o=s.indexToLoc(r[a]),l=a*e.length;i.values.set(o,l)}return i.toTensor()}var yIe=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("float v"+s+" = get"+s+"AtOutCoords();")});var a=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        float result = `+a+`;
        setOutput(result);
      }
    `},jIe=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("vec4 v"+s+" = get"+s+"AtOutCoords();")});var a=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        vec4 result = `+a+`;
        setOutput(result);
      }
    `},NIe=function(e,t,r){this.variableNames=["A"];var a=e.windowSize,s=e.batchSize,i=e.inSize,o=Math.ceil(i/a);r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];var l=t==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+a+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+a+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function uK(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(r){return e+"."+r})}function xl(e,t){return t===1?[e]:uK(e,t)}function Ao(){var e,t,r,a,s,i,o,l,c,d;return Ht().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",a="in",s="texture",i="outputColor",o="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",a="varying",s="texture2D",i="gl_FragColor",o="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:a,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:l,defineSpecialInf:c,defineRound:d}}function ux(e,t,r){r===void 0&&(r="index");var a=Gu(t);return a.map(function(s,i){return"int "+e[i]+" = "+r+" / "+s+"; "+(i===a.length-1?"int "+e[i+1]+" = "+r+" - "+e[i]+" * "+s:"index -= "+e[i]+" * "+s)+";"}).join("")}function kI(e){var t=Gu(e).map(function(r){return r.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var hK=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function wIe(e,t,r,a){var s=[];e.forEach(function(p){var x=Lr(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?s.push("uniform float "+p.name+(x>1?"["+x+"]":"")+";"):(s.push("uniform sampler2D "+p.name+";"),s.push("uniform int offset"+p.name+";"))});var i,o,l=s.join(`
`),c=e.map(function(p){return function(x,g,b){b===void 0&&(b=!1);var y="";y+=b?fK(x):r0(x);var S=x.shapeInfo.logicalShape,w=g.logicalShape;return S.length<=w.length&&(y+=b?function(k,C){var D,E=k.name,A=E.charAt(0).toUpperCase()+E.slice(1),I="get"+A+"AtOutCoords",L=k.shapeInfo.logicalShape.length,P=C.logicalShape.length,O=Pm(k.shapeInfo.logicalShape,C.logicalShape),Y=Fn(P),q=P-L,K=["x","y","z","w","u","v"];D=L===0?"":P<2&&O.length>=1?"coords = 0;":O.map(function(M){return"coords."+K[M+q]+" = 0;"}).join(`
`);var U="";U=P<2&&L>0?"coords":k.shapeInfo.logicalShape.map(function(M,V){return"coords."+K[V+q]}).join(", ");var J="return outputValue;",F=Lr(k.shapeInfo.logicalShape)===1,X=Lr(C.logicalShape)===1;if(L!==1||F||X){if(F&&!X)J=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(O.length){var Q=L-2,ie=L-1;O.indexOf(Q)>-1&&O.indexOf(ie)>-1?J="return vec4(outputValue.x);":O.indexOf(Q)>-1?J="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":O.indexOf(ie)>-1&&(J="return vec4(outputValue.xx, outputValue.zz);")}}else J=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+I+`() {
      `+Y+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+A+"("+U+`);
      `+J+`
    }
  `}(x,g):function(k,C){var D=k.name,E=D.charAt(0).toUpperCase()+D.slice(1),A="get"+E+"AtOutCoords",I=C.texShape,L=k.shapeInfo.texShape,P=k.shapeInfo.logicalShape.length,O=C.logicalShape.length;if(!k.shapeInfo.isUniform&&P===O&&k.shapeInfo.flatOffset==null&&Fi(L,I))return`
      float `+A+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var Y,q=Fn(O),K=Pm(k.shapeInfo.logicalShape,C.logicalShape),U=O-P,J=["x","y","z","w","u","v"];Y=P===0?"":O<2&&K.length>=1?"coords = 0;":K.map(function(X){return"coords."+J[X+U]+" = 0;"}).join(`
`);var F="";return F=O<2&&P>0?"coords":k.shapeInfo.logicalShape.map(function(X,Q){return"coords."+J[Q+U]}).join(", "),`
    float `+A+`() {
      `+q+` coords = getOutputCoords();
      `+Y+`
      return get`+E+"("+F+`);
    }
  `}(x,g)),y}(p,t,a)}).join(`
`),d=t.texShape,u=Ao(),h=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(u),f=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+SIe+`
    `+CIe+`
    `+kIe+`
  `}(u);return t.isPacked?(i=function(p,x){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(k,C){var D=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `}(0,x);case 2:return function(k,C){var D=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if(Fi(k,C))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var E=Math.ceil(k[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,x);case 3:return g=p,b=x,y=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],S=Math.ceil(g[2]/2),w=S*Math.ceil(g[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+w+`;
      index -= b * `+w+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(k,C){for(var D=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],E=Math.ceil(k[k.length-1]/2),A=E*Math.ceil(k[k.length-2]/2),I=A,L="",P="b, r, c",O=2;O<k.length-1;O++)I*=k[k.length-O-1],L=`
      int b`+O+" = index / "+I+`;
      index -= b`+O+" * "+I+`;
    `+L,P="b"+O+", "+P;return`
    ivec`+k.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+L+`

      int b = index / `+A+`;
      index -= b * `+A+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+k.length+"("+P+`);
    }
  `}(p,x)}var g,b,y,S,w}(t.logicalShape,d),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(u)):(i=function(p,x){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `}(0,x);case 2:return function(y,S){return Fi(y,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,x);case 3:return g=x,b=ux(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,S){var w=ux(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+w+`
      return ivec4(r, c, d, d2);
    }
  `}(p,x);case 5:return function(y,S){var w=ux(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+w+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,x);case 6:return function(y,S){var w=ux(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+w+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,x);default:throw new Error(p.length+"-D output sampling is not yet supported")}var g,b}(t.logicalShape,d),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(u)),a&&(f+=_Ie),[f,h,o,l,i,c,r].join(`
`)}function r0(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(r){var a=r.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1);if(r.shapeInfo.isUniform)return"float "+s+"() {return "+a+";}";var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(o===1&&l===1)return`
      float `+s+`() {
        return sampleTexture(`+a+`, halfCR);
      }
    `;var c=r.shapeInfo.texShape,d=c[0],u=c[1],h=qp(a);return`
    float `+s+`() {
      vec2 uv = uvFromFlat(`+d+", "+u+", "+h+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 1:return function(r){var a=r.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1);if(r.shapeInfo.isUniform)return`
      float `+s+`(int index) {
        `+Yv(r)+`
      }
    `;var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(l===1&&o===1)return`
      float `+s+`(int index) {
        return sampleTexture(`+a+`, halfCR);
      }
    `;var c=qp(a);return l===1?`
      float `+s+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `:o===1?`
      float `+s+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+a+`, uv);
      }
    `:`
    float `+s+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+l+", index + "+c+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 2:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=r.shapeInfo.texShape;if(o!=null&&Fi(a,o)){var l=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `}var d=Jp(a),u=d.newShape,h=d.keptDims,f=u;if(f.length<a.length){var p=a0(r,f);return`
      `+r0(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+n0(["row","col"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+a[1]+`, 1)));
        `+Yv(r)+`
      }
    `;var x=o[0],g=o[1],b=qp(s);return g===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+a[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+x+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `:x===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+a[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+g+`.0, 0.5);
      return sampleTexture(`+s+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+a[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+x+", "+g+`, index);
    return sampleTexture(`+s+`, uv);
  }
`}(e);case 3:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=a[1]*a[2],l=a[2],c=Jp(a),d=c.newShape,u=c.keptDims,h=d;if(h.length<a.length){var f=a0(r,h);return`
        `+r0(f)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+n0(["row","col","depth"],u)+`);
        }
      `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+l+`, 1)));
        `+Yv(r)+`
      }
    `;var p=r.shapeInfo.texShape,x=p[0],g=p[1],b=r.shapeInfo.flatOffset;if(g===o&&b==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+g+".0, "+x+`.0);
          return sampleTexture(`+s+`, uv);
        }
      `;if(g===l&&b==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+a[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+g+".0, "+x+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `;var y=qp(s);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+l+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+x+", "+g+`, index);
        return sampleTexture(`+s+`, uv);
      }
  `}(e);case 4:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=a[3],l=a[2]*o,c=a[1]*l,d=Jp(a),u=d.newShape,h=d.keptDims;if(u.length<a.length){var f=a0(r,u);return`
      `+r0(f)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+n0(["row","col","depth","depth2"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+o+`, 1)));
        `+Yv(r)+`
      }
    `;var p=r.shapeInfo.flatOffset,x=r.shapeInfo.texShape,g=x[0],b=x[1];if(b===c&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(b===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+a[1]*a[2]+", "+a[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var y=qp(s);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+g+", "+b+", index + "+y+`);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 5:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=a[4],l=a[3]*o,c=a[2]*l,d=a[1]*c,u=Jp(a),h=u.newShape,f=u.keptDims;if(h.length<a.length){var p=a0(r,h);return`
      `+r0(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+n0(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+l+", "+o+`)) +
          depth3;
        `+Yv(r)+`
      }
    `;var x=r.shapeInfo.flatOffset,g=r.shapeInfo.texShape,b=g[0],y=g[1];if(y===d&&x==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(y===o&&x==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+a[1]*a[2]*a[3]+`,
               `+a[2]*a[3]+", "+a[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var S=qp(s);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+l+` +
          depth2 * `+o+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+b+", "+y+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 6:return function(r){var a=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=Jp(a),l=o.newShape,c=o.keptDims;if(l.length<a.length){var d=a0(r,l);return`
      `+r0(d)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+n0(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var u=a[5],h=a[4]*u,f=a[3]*h,p=a[2]*f,x=a[1]*p;if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+x+", "+p+", "+f+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+u+`, 1)));
        `+Yv(r)+`
      }
    `;var g=r.shapeInfo.flatOffset,b=r.shapeInfo.texShape,y=b[0],S=b[1];if(S===x&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+f+", "+h+", "+u+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(S===u&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+a[1]*a[2]*a[3]*a[4]+`,
               `+a[2]*a[3]*a[4]+`,
               `+a[3]*a[4]+`,
               `+a[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var w=qp(s);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+x+" + col * "+p+" + depth * "+f+` +
          depth2 * `+h+" + depth3 * "+u+" + depth4 + "+w+`;
      vec2 uv = uvFromFlat(`+y+", "+S+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function fK(e){var t,r,a;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),a=Ao(),`
    vec4 `+r+`() {
      return `+a.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(s){var i=s.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),l=s.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=Ao();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+d.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=c[0],u=c[1],h=Ao();if(c!=null&&Fi(i,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+d+`.0);

        return `+h.texture2D+"("+o+`, uv);
      }
    `;var f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+f[0]+", "+f[1]+`, row, col);
      return `+h.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var u=i.slice(1),h=a0(s,u);return`
        `+fK(h)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+n0(["b","row","col"],[1,2])+`);
        }
      `}var f=d[0],p=d[1],x=Math.ceil(i[2]/2),g=x*Math.ceil(i[1]/2),b=Ao();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+p+", "+g+", "+x+`, b, row, col);
      return `+b.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(s){for(var i=s.shapeInfo.logicalShape,o=i.length,l=s.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),d=s.shapeInfo.texShape,u=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)],h=u[0],f=u[1],p=Math.ceil(i[o-1]/2),x=p*Math.ceil(i[o-2]/2),g="int b, int row, int col",b="b * "+x+" + (row / 2) * "+p+" + (col / 2)",y=2;y<o-1;y++)g="int b"+y+", "+g,x*=i[o-y-1],b="b"+y+" * "+x+" + "+b;var S=Ao();return`
    vec4 `+c+"("+g+`) {
      int index = `+b+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+h+`);
      return `+S.texture2D+"("+l+`, uv);
    }
  `}(e)}}var SIe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,CIe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kIe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_Ie=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function qp(e){return"offset"+e}function Yv(e){var t=e.name,r=Lr(e.shapeInfo.logicalShape);return r<2?"return "+t+";":`
    for (int i = 0; i < `+r+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Fn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function a0(e,t){var r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function n0(e,t){return t.map(function(r){return e[r]}).join(", ")}var EIe=function(e,t,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,We(e.length>2,function(){return"Packed arg"+(r.charAt(0).toUpperCase()+r.slice(1))+" supports only inputs with rank above 2."});var s=e[e.length-1],i=Math.ceil(s/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var o,l,c=this.outputShape,d=c.length,u=Fn(d),h=xl("coords",d);if(i===1){var f=Fn(l=d+1);o=`
        `+f+" sourceLocR = "+f+"("+h.join()+`, 0);
        ++`+h[d-1]+`;
        `+f+" sourceLocG = "+f+"("+h.join()+`, 0);
        ++`+h[d-2]+`;
        `+f+" sourceLocA = "+f+"("+h.join()+`, 0);
        --`+h[d-1]+`;
        `+f+" sourceLocB = "+f+"("+h.join()+`, 0);
        --`+h[d-2]+";"}else l=d,o=`
        `+u+` sourceLocR = coords;
        ++`+h[d-1]+`;
        `+u+` sourceLocG = coords;
        ++`+h[d-2]+`;
        `+u+` sourceLocA = coords;
        --`+h[d-1]+`;
        `+u+` sourceLocB = coords;
        --`+h[d-2]+";";var p=["x","y","z","w","u","v"].slice(0,l),x="."+p[l-1],g=p.map(function(A){return"int "+A}),b=xl("sourceLocR",l-1).concat("inIdx.r"),y=xl("sourceLocG",l-1).concat("inIdx.g"),S=xl("sourceLocB",l-1).concat("inIdx.b"),w=xl("sourceLocA",l-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+w.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+w.join()+") : 0.)",E=a?"":`
      float getBestIndicesAChannel(`+g.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+g.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+u+` coords = getOutputCoords();
        bool hasNextCol = `+h[d-1]+" < "+(c[d-1]-1)+`;
        bool hasNextRow = `+h[d-2]+" < "+(c[d-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+x+", sourceLocG"+x+`,
          sourceLocB`+x+", sourceLocA"+x+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+C+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+k+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},DIe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+a+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},AIe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=u-1-e.padInfo.front,x=h-1-e.padInfo.top,g=f-1-e.padInfo.left,b=1/(t*r*a);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+x+", "+g+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+s+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+d+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},TIe=function(e,t,r,a,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ra(e,t),Ra(e,r);var o="0.0";a!=null&&(Ra(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="1.0";s!=null&&(Ra(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},IIe=function(e,t,r,a,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ra(e,t),Ra(e,r);var o="vec4(0.0)";a!=null&&(Ra(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="vec4(1.0)";s!=null&&(Ra(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},PIe="return areal * breal - aimag * bimag;",OIe="return areal * bimag + aimag * breal;",y7=function(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ra(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},hD="return a + b;",fD="return a - b;",j7="return a * b;",mK="return (a < 0.) ? b * a : a;",Ns=function(e,t,r){this.variableNames=["A","B"],this.outputShape=Ra(t,r),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},pK=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,$h=function(e,t,r,a){a===void 0&&(a=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ra(t,r);var s=this.outputShape.length,i="";if(a)if(s===0||Lr(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Fn(s)+` coords = getOutputCoords();
        `,s===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=xl("coords",s);i+=`
            bool nextRowOutOfBounds =
              (`+o[s-2]+" + 1) >= "+this.outputShape[s-2]+`;
            bool nextColOutOfBounds =
              (`+o[s-1]+" + 1) >= "+this.outputShape[s-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},MIe=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var a=this;return function(s,i){a.minLoc==null&&(a.minLoc=s.getUniformLocationNoThrow(i,"minVal"),a.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(a.minLoc,t),s.gl.uniform1f(a.maxLoc,r)}},e}(),RIe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var a=this;return function(s,i){a.minLoc==null&&(a.minLoc=s.getUniformLocationNoThrow(i,"minVal"),a.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(a.minLoc,t),s.gl.uniform1f(a.maxLoc,r)}},e}(),FIe=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},LIe=function(e){this.outputShape=[],this.outputShape=Z0(e,1),this.variableNames=e.map(function(l,c){return"T"+c});var t=new Array(e.length-1);t[0]=e[0][1];for(var r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];var a=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(r=1;r<t.length;r++){var s=t[r-1];a.push("else if (yC < "+t[r]+") setOutput(getT"+r+"(yR, yC-"+s+"));")}var i=t.length,o=t[t.length-1];a.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+a.join(`
        `)+`
      }
    `},BIe=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Z0(e,t);var r=this.outputShape,a=r.length,s=Fn(a),i=xl("coords",a),o=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map(function(b,y){return"T"+y});var l=new Array(e.length-1);l[0]=e[0][t];for(var c=1;c<l.length;c++)l[c]=l[c-1]+e[c][t];var d=o[t],u=o.slice(-2),h=o.join(),f="if ("+d+" < "+l[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+u.join()+`));
        }`;for(c=1;c<l.length;c++){var p=l[c-1];f+=`
        if (`+d+" < "+l[c]+"  && "+d+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+CN(o,d,p)+`),
            vec2(`+CN(u,d,p)+`));
        }`}var x=l.length,g=l[l.length-1];f+=`
        return getChannel(
          getT`+x+"("+CN(o,d,g)+`),
          vec2(`+CN(u,d,g)+"));",this.userCode=`
      float getValue(`+o.map(function(b){return"int "+b})+`) {
        `+f+`
      }

      void main() {
        `+s+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[a-1]+" = "+i[a-1]+` + 1;
        if (`+i[a-1]+" < "+r[a-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[a-2]+" = "+i[a-2]+` + 1;
        if (`+i[a-2]+" < "+r[a-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[a-1]+" = "+i[a-1]+` - 1;
        if (`+i[a-2]+" < "+r[a-2]+` &&
            `+i[a-1]+" < "+r[a-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function CN(e,t,r){var a=e.indexOf(t);return e.map(function(s,i){return i===a?s+" - "+r:s}).join()}var UIe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+a+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},$Ie=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+u+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+d+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+a+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},VIe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,r=e.strideHeight,a=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+s+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+r+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+a+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},qIe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,d=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+s+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+r+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+r+` - 1 - wR;

            for (int wC = 0; wC < `+a+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+a+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},zIe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+a+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},HIe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+a+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},N7=function(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=null),a===void 0&&(a=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4,x=e.dataFormat==="channelsLast",g=x?1:2,b=x?2:3,y=x?3:1,S="",w="";r&&(S=a?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,w="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+o+", "+l+`);
      const ivec2 pads = ivec2(`+s+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+g+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+x+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+x+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+x+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+x+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+k+`
        `+w+`
        setOutput(result);
      }
    `},WIe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=4*Math.floor(e.inChannels/4),x=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+r+", "+a+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+u+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+d+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(x===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(x===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(x===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},w7=function(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=null),a===void 0&&(a=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,x=e.outChannels/e.inChannels,g="",b="";r&&(g=a?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,b="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+x+`;
        int q = d2 - d1 * `+x+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+s+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+b+`
        setOutput(result);
      }
    `},S7=function(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=null),a===void 0&&(a=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,x=p,g="int xR; int xC; int xCOffset;",b=0;b<f;b++)for(var y=0;y<p;y++)g+=`
          vec4 xTexelR`+b+"C"+2*y+` = vec4(0.);
          vec4 wR`+b+"C"+y+` = vec4(0.);
          vec4 xR`+b+"C"+y+" = vec4(0.);";for(b=0;b<f;b++)for(var S=0;S<x;S++){if(g+=`
          xR = xRCorner + `+b*u+`;
          xC = xCCorner + `+(y=2*S)*h+`;
        `,d===1){if(y<p&&(g+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+b+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+y+" = vec4(previous.zw, xTexelR"+b+"C"+y+`.xy);
                } else {
                  xR`+b+"C"+y+" = vec4(0, 0, xTexelR"+b+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+s+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xR`+b+"C"+y+" = xTexelR"+b+"C"+y+`;
              `,y+1<p)){var w=l%2==0?PY(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(g+=`
                  xCOffset = xC + `+l%2+" + "+w+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+s+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+y+` = vec4(0.);
                    }
                  `),g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.xy);
                `):g+=`
                  xCOffset = xC + `+w+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(y+1)+" = xTexelR"+b+"C"+(y+2)+`;
                `}}else y<p&&(g+=`
              if(xR >= 0 && xR < `+s+`) {
            `,l%2==1?(g+=`
                xCOffset = xC + 1 - `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
              `,y+1<p&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+d+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(y+1)+" = vec4(xTexelR"+b+"C"+(y+2)+`.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".xy, xTexelR"+b+"C"+(y+2)+`.xy);
              `,y+1<p&&(g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
                `)),g+="}");y<p&&(g+=`
            vec4 wTexelR`+b+"C"+y+" = getW("+b+", "+y+`, d1, q);
            wR`+b+"C"+y+" = vec4(wTexelR"+b+"C"+y+".xz, wTexelR"+b+"C"+y+`.xz);
          `,y+1<p&&(g+=`
              vec4 wTexelR`+b+"C"+(y+1)+" = getW("+b+", "+(y+1)+`, d1, q);
              wR`+b+"C"+(y+1)+` =
                vec4(wTexelR`+b+"C"+(y+1)+".xz, wTexelR"+b+"C"+(y+1)+".xz);"))}for(b=0;b<f;b++)for(y=0;y<p;y++)g+="dotProd += xR"+b+"C"+y+" * wR"+b+"C"+y+";";var k="",C="";r&&(k=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`vec4 activation(vec4 x) {
          `+r+`
        }`,C="result = activation(result);");var D=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+k+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+g+`

        vec4 result = dotProd;
        `+D+`
        `+C+`
        setOutput(result);
      }
    `},GIe=function(e,t,r,a,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],l=e[2],c=e[3],d=t[0],u=r[0],h=r[1];this.outputShape=[d,u,h,c];var f=a==="bilinear"?1:0,p=[o-1+".0",l-1+".0"],x=p[0],g=p[1],b=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+x+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+x],y=b[0],S=b[1],w=b[2],k=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],C=k[0],D=k[1],E=k[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+C+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+D+`;

        float in_y = `+w+`;
        if( in_y < 0.0 || in_y > `+x+` ) {
          setOutput(float(`+s+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+g+` ) {
          setOutput(float(`+s+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},YIe=function(e,t,r){this.variableNames=["x"],this.outputShape=e;var a=e.length,s=e[e.length-1],i=r?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(r?"return "+s+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Fn(a)+` coords = getOutputCoords();
        int end = `+C7(a,"coords")+`;
        float val = 0.0;
        for (int i = `+s+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+C7(a,"coords")+` = idx;
          val += getX(`+function(o,l){if(o===1)return""+l;if(o===2)return l+".x, "+l+".y";if(o===3)return l+".x, "+l+".y, "+l+".z";if(o===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(a,"coords")+`);
        }
        setOutput(val);
      }
    `};function C7(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var KIe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Yy.DENSE;var t=cy(e),r=Ao();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ux(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+r.output+` = result;
      }
    `},XIe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Yy.DENSE;var t=cy(e),r=Ao();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ux(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+r.output+` = result;
      }
    `},QIe=function(){function e(t,r,a){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=r,this.dataFormat=a,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+r+`;
      int offset_h = imod(h, `+r+`);
      int in_w = w / `+r+`;
      int offset_w = imod(w, `+r+`);
      int offset_d = (offset_h * `+r+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),JIe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},ZIe=function(e){this.variableNames=["A"],this.outTexUsage=rc.DOWNLOAD;var t=Ao();this.outputShape=e,this.userCode=`
      `+hK+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},ePe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=rc.DOWNLOAD;var t=Ao();this.outputShape=e,this.userCode=`
      `+hK+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},tPe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"];var a=Ao(),s=t[0],i=t[1];this.outputShape=e;var o="result";r&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+kI(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
        vec4 values = `+a.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+a.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},rPe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=Ao(),s=t[0],i=t[1];this.outputShape=e;var o="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var d=0;d<=1;d++){var u=2*c+d;o+=`
          localCoords = coords;
          if(localCoords[2] + `+d+" < "+e[2]+`) {
            localCoords[2] += `+d+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
              values = `+a.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+u+`] = values[0];
              } else if(offset == 1) {
                result[`+u+`] = values[1];
              } else if(offset == 2) {
                result[`+u+`] = values[2];
              } else {
                result[`+u+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+kI(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+a.output+" = "+l+`;
      }
    `},aPe="return real * expR - imag * expI;",nPe="return real * expI + imag * expR;",k7=function(e,t,r){this.variableNames=["real","imag"];var a=t[1];this.outputShape=t;var s=r?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=r?a+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+s+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+a+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+a+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},sPe=function(){function e(t,r){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(a,s){r.valueLoc==null&&(r.valueLoc=a.getUniformLocationNoThrow(s,"value")),a.gl.uniform1f(r.valueLoc,t)}},e}(),iPe=function(e,t,r){this.variableNames=["A","indices"];var a=e.slice();a[r]=t,this.outputShape=a,this.rank=a.length;var s=Fn(this.rank),i=function(o,l){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],h=0;h<o.length;h++)h===l?u.push("int(getIndices("+d[h]+"))"):u.push(""+d[h]);return u.join()}(e,r);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},oPe=function(e,t,r){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=r;var a=Fn(t.length),s=Fn(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+this.strides+`);
         void main() {
          `+s+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function lPe(e,t){var r=Ao();return a4e(e,t,r.version+`
    precision highp float;
    `+r.attribute+` vec3 clipSpacePos;
    `+r.attribute+` vec2 uv;
    `+r.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function cPe(e,t){return l4e(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function dPe(e,t){return c4e(e,t,new Uint16Array([0,1,2,2,1,3]))}function M1(e,t,r,a,s,i,o){u4e(r,a);var l=d4e(e,t),c=e.TEXTURE_2D;return Br(e,t,function(){return e.bindTexture(c,l)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Br(e,t,function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Br(e,t,function(){return e.texImage2D(c,0,s,r,a,0,i,o,null)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),l}function uPe(e,t,r,a,s){var i=cC(r,a);return M1(e,t,i[0],i[1],s.internalFormatFloat,s.textureFormatFloat,e.FLOAT)}function hPe(e,t,r,a,s){var i=cC(r,a);return M1(e,t,i[0],i[1],s.internalFormatHalfFloat,s.textureFormatFloat,s.textureTypeHalfFloat)}function fPe(e,t,r,a,s){var i=cC(r,a);return M1(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function mPe(e,t,r,a,s){var i=O1(r,a);return M1(e,t,i[0],i[1],s.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function pPe(e,t,r,a,s){var i=O1(r,a);return M1(e,t,i[0],i[1],s.internalFormatPackedHalfFloat,e.RGBA,s.textureTypeHalfFloat)}function xPe(e,t,r,a){return Br(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),f7(e,t,r,"clipSpacePos",a,3,20,0)&&f7(e,t,r,"uv",a,2,20,12)}function vPe(e,t,r,a,s,i,o){var l,c,d;Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),i instanceof Uint8Array?(l=new Uint8Array(a*s*4),c=e.UNSIGNED_BYTE,d=e.RGBA):(l=new Float32Array(a*s*4),c=e.FLOAT,d=o.internalFormatPackedFloat),l.set(i),Br(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,d,a,s,0,e.RGBA,c,l)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function gPe(e,t,r,a){Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),a.data instanceof Uint8Array?Br(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a.width,a.height,0,e.RGBA,e.UNSIGNED_BYTE,a.data)}):Br(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a)}),Br(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function bPe(e,t,r,a,s){var i=e.createBuffer();Br(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*r*a;return Br(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Br(e,t,function(){return e.readPixels(0,0,a,r,e.RGBA,e.FLOAT,0)}),Br(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function yPe(e,t,r){var a=e,s=new Float32Array(r);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,s),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),s}function jPe(e,t,r,a,s){var i=cC(r,a),o=i[0],l=i[1],c=new Uint8Array(r*a*4);return Br(e,t,function(){return e.readPixels(0,0,o,l,s.downloadTextureFormat,e.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function NPe(e,t,r,a,s,i,o,l){var c=e,d=new Float32Array(function(u,h){var f=O1(u,h);return f[0]*f[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function wPe(e,t,r,a){var s=new Float32Array(r*a*4);return Br(e,t,function(){return e.readPixels(0,0,a,r,e.RGBA,e.FLOAT,s)}),s}var SPe=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var r=Ht().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,JTe(r,t)):this.gl=oh(r);var a="WEBGL_color_buffer_float";if(Ht().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=jN(this.gl,this.debug,"OES_texture_float"),Yc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=jN(this.gl,this.debug,"OES_texture_half_float");else if(Ht().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(a),Yc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=jN(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ht().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(a="EXT_color_buffer_float",Yc(this.gl,a))this.colorBufferFloatExtension=this.gl.getExtension(a);else{if(!Yc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=cPe(this.gl,this.debug),this.indexBuffer=dPe(this.gl,this.debug),this.framebuffer=h4e(this.gl,this.debug),this.textureConfig=xI(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Ht().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var r=this.gl;Br(r,this.debug,function(){return r.finish()}),Br(r,this.debug,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),Br(r,this.debug,function(){return r.deleteFramebuffer(t.framebuffer)}),Br(r,this.debug,function(){return r.bindBuffer(r.ARRAY_BUFFER,null)}),Br(r,this.debug,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}),Br(r,this.debug,function(){return r.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,r){return this.throwIfDisposed(),uPe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,r){return this.throwIfDisposed(),hPe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,r){return this.throwIfDisposed(),fPe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,r){this.throwIfDisposed(),gPe(this.gl,this.debug,t,r)},e.prototype.uploadDenseMatrixToTexture=function(t,r,a,s){this.throwIfDisposed(),vPe(this.gl,this.debug,t,r,a,s,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,r){return this.throwIfDisposed(),pPe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,r){return this.throwIfDisposed(),mPe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var r=this;this.throwIfDisposed(),this.outputTexture===t&&(m7(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Br(this.gl,this.debug,function(){return r.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,r,a){var s=this;return this.downloadMatrixDriver(t,function(){return jPe(s.gl,s.debug,r,a,s.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,r,a,s,i,o){return NPe(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,r){return yPe(this.gl,t,r)},e.prototype.createBufferFromTexture=function(t,r,a){this.bindTextureToFrameBuffer(t);var s=bPe(this.gl,this.debug,r,a,this.textureConfig);return this.unbindTextureToFrameBuffer(),s},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var r,a,s=this;if(Ht().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),a=function(){var l=i.clientWaitSync(o,0,0);return l===i.ALREADY_SIGNALED||l===i.CONDITION_SATISFIED},r=o}else Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),a=function(){return s.isQueryAvailable(r,Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):a=function(){return!0};return{query:r,isFencePassed:a}},e.prototype.downloadMatrixFromPackedTexture=function(t,r,a){var s=this;return this.downloadMatrixDriver(t,function(){return wPe(s.gl,s.debug,r,a)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var r=this.gl,a=n4e(r,this.debug,t),s=lPe(r,this.debug),i=i4e(r,this.debug);return Br(r,this.debug,function(){return r.attachShader(i,s)}),Br(r,this.debug,function(){return r.attachShader(i,a)}),o4e(r,this.debug,i),this.debug&&lD(r,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=xPe(r,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var r=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Br(this.gl,this.debug,function(){return r.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var r=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&lD(this.gl,this.debug,this.program),Br(this.gl,this.debug,function(){return r.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,r,a){return a===void 0&&(a=!0),this.throwIfDisposed(),a?m4e(this.gl,this.debug,t,r):p4e(this.gl,t,r)},e.prototype.getAttributeLocation=function(t,r){var a=this;return this.throwIfDisposed(),Br(this.gl,this.debug,function(){return a.gl.getAttribLocation(t,r)})},e.prototype.getUniformLocationNoThrow=function(t,r){return this.throwIfDisposed(),this.gl.getUniformLocation(t,r)},e.prototype.setInputMatrixTexture=function(t,r,a){this.throwIfDisposed(),this.throwIfNoProgram(),x4e(this.gl,this.debug,this.program,t,r,a)},e.prototype.setOutputMatrixTexture=function(t,r,a){this.setOutputMatrixTextureDriver(t,a,r)},e.prototype.setOutputPackedMatrixTexture=function(t,r,a){this.throwIfDisposed();var s=O1(r,a),i=s[0],o=s[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,r,a,s){this.setOutputMatrixWriteRegionDriver(a,t,s,r)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,r,a,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&lD(this.gl,this.debug,this.program),NN(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Br(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Br(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=jN(this.gl,this.debug,Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=t.createQuery();return t.beginQuery(r.TIME_ELAPSED_EXT,a),a}var s=this.getQueryTimerExtensionWebGL1(),i=s.createQueryEXT();return s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var r=this.gl,a=this.getQueryTimerExtensionWebGL2();r.endQuery(a.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Pr(this,void 0,void 0,function(){var r=this;return Or(this,function(a){switch(a.label){case 0:return[4,o7(function(){return r.disposed||r.isQueryAvailable(t,Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return a.sent(),[2,this.getQueryTime(t,Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,r){if(r===0)return null;if(r===2){var a=this.gl;return a.getQueryParameter(t,a.QUERY_RESULT)/1e6}var s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,r){if(r===0)return!0;if(r===2){var a=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=a.getQueryParameter(t,a.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(s=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var r=this;return new Promise(function(a){r.addItemToPoll(function(){return t.isFencePassed()},function(){return a()})})},e.prototype.pollItems=function(){for(var t=function(a){for(var s=0;s<a.length&&a[s]();++s);return s-1}(this.itemsToPoll.map(function(a){return a.isDoneFn})),r=0;r<=t;++r)(0,this.itemsToPoll[r].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,r){var a=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||o7(function(){return a.pollItems(),a.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),cD(this.gl,this.debug,t,this.framebuffer),this.debug&&NN(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(cD(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&NN(this.gl)):m7(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,r){this.bindTextureToFrameBuffer(t);var a=r();return this.unbindTextureToFrameBuffer(),a},e.prototype.setOutputMatrixTextureDriver=function(t,r,a){this.throwIfDisposed();var s=this.gl;cD(s,this.debug,t,this.framebuffer),this.debug&&NN(s),this.outputTexture=t,Br(s,this.debug,function(){return s.viewport(0,0,r,a)}),Br(s,this.debug,function(){return s.scissor(0,0,r,a)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,r,a,s){var i=this;this.throwIfDisposed(),Br(this.gl,this.debug,function(){return i.gl.scissor(t,r,a,s)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function _7(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(r,a){var s=r.logicalShape,i=t[a],o=i.shape;if(!Fi(s,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+s+" and "+o+" must match");if(!r.isUniform||!i.isUniform){var l=r.texShape,c=i.isUniform?null:i.texData.texShape;if(!Fi(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var CPe=function(e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var a=r.filterWidth,s=r.inChannels,i=r.strideWidth,o=r.strideHeight,l=r.padInfo,c=r.outWidth,d=r.dilationWidth,u=r.dilationHeight,h=r.dataFormat,f=l.left,p=l.top,x=s*a,g=Ao(),b=h==="channelsLast",y=b?0:1,S=b?1:2,w="",k=0;k<=1;k++)for(var C=0;C<=1;C++)w+=`
          blockIndex = rc.y + `+C+`;
          pos = rc.x + `+k+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+p+`;
            d0 = offsetY + `+u+" * (pos / "+x+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+f+`.);
              d1 = offsetX + `+d+" * (int(mod(float(pos), "+x+".) / "+s+`.));

              if(d1 < `+t[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+s+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*k+C)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*k+C)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+w+`

        `+g.output+` = result;
      }
    `},kPe=function(e,t,r,a,s){this.variableNames=["x"],this.outputShape=[];var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+a+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},_Pe=function(e,t,r,a,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=a,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+a+") * norm + float("+r+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+a+`)
                * float(`+s+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+s+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},EPe=function(e,t,r,a,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+a+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},DPe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=i-1-e.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
          wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},APe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,r=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=d-1-e.padInfo.left,p=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+h+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+r+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+d+` +
                  wR * `+d+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},mD=function(e,t,r,a,s,i,o){r===void 0&&(r=!1),a===void 0&&(a=!1),s===void 0&&(s=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var l=r?e[1]:e[2],c=Math.ceil(l/2),d=r?"i * 2, rc.y":"rc.y, i * 2",u=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",x="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,x="result = activation(result);");var g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+d+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+f[0]+`);
          result += (`+h[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+x+`

        setOutput(result);
      }
    `},TPe=function(){function e(t,r,a){this.variableNames=["probs"],this.outputShape=[t,a],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(r-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(r-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(a,s){r.seedLoc==null&&(r.seedLoc=a.getUniformLocation(s,"seed")),a.gl.uniform1f(r.seedLoc,t)}},e}(),IPe=function(e,t,r,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+a+"), float("+r+`),
                      float(index == coords.y)));
      }
    `},PPe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var r=xl("rc",t),a=Fn(t),s=function(l,c,d){if(l===1)return"rc > "+c[0];for(var u="",h=l-2;h<l;h++)u+=d[h]+" >= "+c[h],h<l-1&&(u+="||");return u}(t,e,r),i=function(l,c,d,u){if(l===1)return"";var h=u.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+d+`;
  `}(t,e[e.length-1],e[e.length-2],r),o=function(l,c){var d=l.length,u=function(h,f){for(var p=[],x=0;x<=1;x++)for(var g=0;g<=1;g++){for(var b=(x===0?"r":"rp1")+", "+(g===0?"c":"cp1"),y=2;y<h;y++)b=f[f.length-1-y]+","+b;p.push(b)}return p}(d,c);return d===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+u[0]+`),
          cEdge ? 0. : getA(`+u[1]+`),
          rEdge ? 0. : getA(`+u[2]+`),
          rEdge || cEdge ? 0. : getA(`+u[3]+")"}(e,r);this.userCode=`
        void main() {
          `+a+` rc = getOutputCoords();

          if(`+s+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},OPe=function(e,t,r){this.variableNames=["x"],this.outputShape=t.map(function(c,d){return c[0]+e[d]+c[1]});var a=e.length,s=Fn(a),i=t.map(function(c){return c[0]}).join(","),o=t.map(function(c,d){return c[0]+e[d]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=a!==1?`
      `+s+" start = "+s+"("+i+`);
      `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+r+`));
        } else {
          `+s+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+r+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},MPe=function(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(b,y){return b[0]+e[y]+b[1]});for(var a=e.length,s=Fn(a),i=t.map(function(b){return b[0]}).join(","),o=t.map(function(b,y){return b[0]+e[y]}).join(","),l=xl("rc",a),c=xl("source",a),d=l[a-1]+" < "+this.outputShape[a-1],u=a===1?"source":"vec2("+c.slice(-2).join()+")",h=[s+" rc = outputLoc;",l[a-1]+` += 1;
       if(`+d+`) {
      `,a===1?"":`}
       rc = outputLoc;
       `+l[a-2]+` += 1;
       if(`+l[a-2]+" < "+this.outputShape[a-2]+") {",a===1?"":"  "+l[a-1]+` += 1;
         if(`+d+") {"],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",x=0,g=a===1?2:4;x<g;x++)p+=`
        `+h[x]+`
        if (`+f+`) {
          result[`+x+"] = float("+r+`);
        } else {
          `+s+` source = rc - start;
          result[`+x+"] = getChannel(getX("+c.join()+"), "+u+`);
        }
      `;p+=a===1?"} ":"}}",this.userCode=`
      const `+s+" start = "+s+"("+i+`);
      const `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},pD=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",p="0.0";if(f||(p="-1.0 / 1e-20"),r)this.userCode=`
        const ivec2 strides = ivec2(`+s+", "+i+`);
        const ivec2 pads = ivec2(`+u+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+d+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(x="avgValue / count");var g=4*Math.floor(a/4),b=a%4,y=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+s+", "+i+`);
      const ivec2 pads = ivec2(`+u+", "+h+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+g+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+x+`);
      }
    `}},xD=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.front,x=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var b=t==="avg",y="0.0";if(b||(y="-1.0 / 1e-20"),r)this.userCode=`
        const ivec3 strides =
            ivec3(`+s+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+x+", "+g+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+u+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(S="avgValue / count");var w=4*Math.floor(a/4),k=a%4,C=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+x+", "+g+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+w+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+C+`
            }

            int xC = xCCorner + `+w+`;
            if (`+(k===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(k===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(k===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+C+`
            }
          }
          setOutput(`+S+`);
        }
      }
    `}},RPe=function(e,t){this.variableNames=["x"];var r=e.windowSize,a=e.batchSize,s=e.inSize,i=Math.ceil(s/r);this.outputShape=[a,i];var o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");var d=4*Math.floor(r/4),u=r%4,h=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+d+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+d+`;
        if (`+(u===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+c+`);
      }
    `},FPe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r="",a=0;a<4;a++){var s="thisRC = rc;";a%2==1&&(s+="thisRC.z += 1;"),a>1&&(s+="thisRC.y += 1;"),r+=`
        `+s+`
        `+(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+a+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(a>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ux(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+kI(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+r+`

        setOutput(result);
      }
    `},LPe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var a=t.shape,s=a[1],i=a[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],f=d[1]/u[1],p=1/h,x=1/f,g=2*Math.ceil(p)+2,b=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(s-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},BPe=function(e,t,r,a){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[a&&t>1?i-1:i,a&&r>1?o-1:o],d=[a&&t>1?t-1:t,a&&r>1?r-1:r];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},UPe=function(e,t,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[a&&t>1?i-1:i,a&&r>1?o-1:o],d=[a&&t>1?t-1:t,a&&r>1?r-1:r];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`,
          `+c[1]/d[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(r-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},$Pe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var a=t.shape,s=a[1],i=a[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],f=d[1]/u[1],p=1/h,x=1/f,g=2*Math.ceil(p)+2,b=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+d[0]+`) *
                (float(dyR) / float(`+u[0]+`));

            float sourceFracCol =
                float(`+d[1]+`) *
                  (float(dyC) / float(`+u[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+s+`) - 1),
                `+r+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+r+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},VPe=function(e,t,r,a){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[a&&t>1?i-1:i,a&&r>1?o-1:o],d=[a&&t>1?t-1:t,a&&r>1?r-1:r],u=a?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+u+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},qPe=function(e,t){this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");if(this.outputShape=e,r!==1){var a=e.map(function(i,o){return function(l){return t.indexOf(l)!==-1&&e[l]!==1?e[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(o)}).join(","),s=Fn(r);this.userCode=`
      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},zPe=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");this.outputShape=e;var a=xl("rc",r),s=a[r-1]+" + 1 < "+this.outputShape[r-1],i=a[r-2]+" + 1 < "+this.outputShape[r-2],o=Fn(r);function l(c){var d=e.map(function(u,h){return function(f,p){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+p[f]+" - 1":""+p[f]}(h,c)});return"getChannel(getX("+d.join(",")+"), vec2("+d.slice(-2).join(",")+"))"}this.userCode=r===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+s+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(a.slice())+`;
          if(`+s+`){
            result.g = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",l(c)}(a.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[r-2]="("+c[r-2]+" + 1)",l(c)}(a.slice())+`;
            if(`+s+`) {
              result.a = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",c[r-2]="("+c[r-2]+" + 1)",l(c)}(a.slice())+`;
            }
          }
          setOutput(result);
        }
    `},E7=function(e,t,r,a,s,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=Fn(s.length),c=Fn(i.length),d="";r===1?d="i":r===2&&(d="i, j");var u="getIndices("+d+")",h="";a===1?h="i":a===2&&(h="i, coords[1]");var f="getUpdates("+h+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+s+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+u+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},HPe=function(e,t){this.variableNames=["x","segmentIds"];var r=e.windowSize,a=e.batchSize,s=e.inSize,i=e.numSegments,o=i*Math.ceil(s/r);this.outputShape=[a,o];var l=4*Math.floor(r/4),c=r%4,d=`
        sumValue += dot(values, segFilter);
    `,u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `);var h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+u+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+r+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+d+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+d+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+d+`
        }
        setOutput(sumValue);
      }
    `},WPe=function(e,t,r){var a,s;if(this.variableNames=["c","a","b"],this.outputShape=t,r>4)throw Error("Where for rank "+r+" is not yet supported");if(r===1)s="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[],c=0;c<t.length;c++)l.push(""+i[c]),c<e&&o.push(""+i[c]);a=o.join(),s=l.join()}var d=Fn(r);this.userCode=`
      void main() {
        `+d+` resRC = getOutputCoords();
        float cVal = getC(`+a+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+s+`));
        } else {
          setOutput(getB(`+s+`));
        }
      }
    `},GPe=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var r,a=Fn(this.rank),s="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return vD.slice(0,o).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);r=`
        `+a+` sourceLoc;
        `+a+` coords = getOutputCoords();
        `+t.map(function(o,l){return"sourceLoc."+vD[l]+" = start["+l+"] + coords."+vD[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+s+`
      void main() {
        `+r+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(a,s){r.startLoc==null&&(r.startLoc=a.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||a.gl.uniform1iv(r.startLoc,t)}},e}(),vD=["x","y","z","w","u","v"],YPe=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var r=Fn(this.rank),a=xl("coords",this.rank),s=xl("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+s.slice(-2).join()+")",o="getChannel(getSource("+s.join()+"), "+i+")",l=`
      result.x = `+o+`;
      if (++`+a[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+s[this.rank-1]+`;
        result.y = `+o+`;
        --`+s[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+a[this.rank-1]+`;
      if (++`+a[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+s[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+a[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+s[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            `+r+"("+t.map(function(u,h){return"start["+h+"]"}).join()+");":t.map(function(u,h){return s[h]+" = "+a[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+r+` coords = getOutputCoords();
        `+r+` sourceLoc;
        `+d+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(a,s){r.startLoc==null&&(r.startLoc=a.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||a.gl.uniform1iv(r.startLoc,t)}},e}(),KPe=function(e,t,r){this.variableNames=["x"],this.outputShape=r;var a=r.length,s=Fn(r.length),i=Fn(r.length),o="";if(a===1)o="coords * strides + begin";else{var l=0;o=r.map(function(c,d){return l++,r.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(l-1)+"] * strides["+d+"] + begin["+d+"]"}).join(",")}this.userCode=`
      `+s+" begin = "+s+"("+e+`);
      `+s+" strides = "+s+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},XPe=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,r,a){var s,i=D7(r,a),o=A7(t,i,a);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[o].shift();return this.usedTextures[o].push(l),l}return this.numUsedTextures++,this.log(),i===Jl.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Jl.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Jl.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Jl.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Jl.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(s),s},e.prototype.releaseTexture=function(t,r,a,s){if(this.freeTextures!=null){var i=A7(r,D7(a,s),s);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],l=o.indexOf(t);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(l,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var r in this.freeTextures)this.freeTextures[r].forEach(function(a){t.gpgpu.deleteMatrixTexture(a)});for(var r in this.usedTextures)this.usedTextures[r].forEach(function(s){t.gpgpu.deleteMatrixTexture(s)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function D7(e,t){if(e===rc.UPLOAD)return Jl.PACKED_2X2_FLOAT32;if(e===rc.RENDER||e==null)return function(r){return Ht().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?r?Jl.PACKED_2X2_FLOAT32:Jl.UNPACKED_FLOAT32:r?Jl.PACKED_2X2_FLOAT16:Jl.UNPACKED_FLOAT16}(t);if(e===rc.DOWNLOAD||e===rc.PIXELS)return Jl.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function A7(e,t,r){return e[0]+"_"+e[1]+"_"+t+"_"+r}var QPe=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[a]*t[a];this.outputShape=r,this.rank=r.length;var s=Fn(this.rank),i=function(o){var l=o.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],u=0;u<o.length;u++)d.push("imod("+c[u]+", "+o[u]+")");return d.join()}(e);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},JPe=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[t[a]];this.outputShape=r,this.rank=r.length;var s=Fn(this.rank),i=function(o){var l=o.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(l),u=0;u<o.length;u++)d[o[u]]=c[u];return d.join()}(t);this.userCode=`
    void main() {
      `+s+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},ZPe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[t[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var s=Fn(this.rank),i=uK("rc",this.rank),o=new Array(this.rank);for(a=0;a<t.length;a++)o[t[a]]=i[a];var l="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+r[this.rank-1],d="getChannel(getA("+o.join()+"), "+l+")";this.userCode=`
    void main() {
      `+s+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+d+`;
      if(`+c+`) {
        result[1] = `+d+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+r[this.rank-2]+`) {
        result[2] = `+d+`;
        if(`+c+`) {
          result[3] = `+d+`;
        }
      }
      setOutput(result);
    }
    `},_I=1.7580993408473768,EI=1.0507009873554805,Na=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Gd="if (isnan(x)) return x;",eOe="return x;",T7="return abs(x);",xK=Gd+`
  return (x < 0.0) ? 0.0 : x;
`,vK=Gd+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gK="return (x >= 0.0) ? x : (exp(x) - 1.0);",tOe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+_I+`;
  float scale = `+EI+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,I7="return -x;",P7="return ceil(x);",O7="return floor(x);",M7="return exp(x);",R7="return exp(x) - 1.0;",rOe=Gd+`
  return sin(x);
`,aOe=Gd+`
  return cos(x);
`,nOe=Gd+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,sOe=Gd+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,iOe=Gd+`
  return atan(x);
`,oOe=Gd+"return log(x + sqrt(x * x + 1.0));",lOe=Gd+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,cOe=Gd+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,kN="return x;",dOe="return x;",bK=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yK=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jK=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Fb=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},uOe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,r=xl("rc",t),a=Fn(t),s=function(l,c){if(l===1)return"rc";for(var d="",u=0;u<l;u++)d+=c[u],u<l-1&&(d+=",");return d}(t,r),i=r.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+a+` rc = getOutputCoords();
        vec4 packedInput = getA(`+s+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},_N={};function EN(e,t){if(t===void 0&&(t=!1),e==="linear")return t?dOe:eOe;if(e==="relu")return t?bK:xK;if(e==="elu")return t?jK:gK;if(e==="relu6")return t?yK:vK;if(e==="prelu")return t?pK:mK;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var hOe=600,fOe=function(e){function t(r){var a,s=e.call(this)||this;if(s.pendingRead=new WeakMap,s.pendingDisposal=new WeakSet,s.dataRefCount=new WeakMap,s.numBytesInGPU=0,s.uploadWaitMs=0,s.downloadWaitMs=0,s.warnedAboutMemory=!1,s.pendingDeletes=0,s.disposed=!1,!Ht().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(r==null){var i=oh(Ht().getNumber("WEBGL_VERSION"));s.binaryCache=((a=Ht().getNumber("WEBGL_VERSION"))in _N||(_N[a]={}),_N[a]),s.gpgpu=new SPe(i),s.canvas=i.canvas,s.gpgpuCreatedLocally=!0}else s.gpgpu=r,s.binaryCache={},s.gpgpuCreatedLocally=!1,s.canvas=r.gl.canvas;return s.textureManager=new XPe(s.gpgpu),s.numMBBeforeWarning=Ht().global.screen==null?1024:Ht().global.screen.height*Ht().global.screen.width*window.devicePixelRatio*hOe/1024/1024,s.texData=new rK(s,ht),s}return Wd(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(r,a,s){if(Ht().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64"&&r!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:a,dtype:s,values:r,usage:rc.UPLOAD}),i},t.prototype.move=function(r,a,s,i){if(Ht().getBool("DEBUG")&&this.checkNumericalProblems(a),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(r,{shape:s,dtype:i,values:a,usage:rc.UPLOAD})},t.prototype.readSync=function(r){var a=this.texData.get(r),s=a.values,i=a.dtype,o=a.complexTensors,l=a.slice,c=a.shape,d=a.isPacked;if(l!=null){var u=void 0;u=d?new Fb(c,kN):new Na(c,kN);var h=this.runWebGLProgram(u,[{dataId:r,shape:c,dtype:i}],i),f=this.readSync(h.dataId);return this.disposeData(h.dataId),f}if(s!=null)return this.convertAndCacheOnCPU(r);if(i==="string")return s;var p,x,g=this.activeTimers!=null;return g&&(p=Iu()),i==="complex64"?x=A3(o.real.dataSync(),o.imag.dataSync()):x=this.getValuesFromTexture(r),g&&(this.downloadWaitMs+=Iu()-p),this.convertAndCacheOnCPU(r,x)},t.prototype.read=function(r){return Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A;return Or(this,function(I){switch(I.label){case 0:if(this.pendingRead.has(r))return a=this.pendingRead.get(r),[2,new Promise(function(L){return a.push(L)})];if(s=this.texData.get(r),i=s.values,o=s.shape,l=s.slice,c=s.dtype,d=s.complexTensors,u=s.isPacked,l!=null)return h=void 0,h=u?new Fb(o,kN):new Na(o,kN),f=this.runWebGLProgram(h,[{dataId:r,shape:o,dtype:c}],c),p=this.read(f.dataId),this.disposeData(f.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(r)];if(!Ht().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ht().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return x=null,c!=="complex64"&&Ht().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(r),b=this.texData.get(g.dataId),x=(A=this.gpgpu).createBufferFromTexture.apply(A,[b.texture].concat(cy(o)))),this.pendingRead.set(r,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:I.sent(),I.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([d.real.data(),d.imag.data()])];case 3:return S=I.sent(),w=S[0],k=S[1],y=A3(w,k),[3,5];case 4:x==null?y=this.getValuesFromTexture(r):(C=Lr(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(x,C)),I.label=5;case 5:return g!=null&&this.disposeData(g.dataId),D=this.convertAndCacheOnCPU(r,y),E=this.pendingRead.get(r),this.pendingRead.delete(r),E.forEach(function(L){return L(D)}),this.pendingDisposal.has(r)&&(this.pendingDisposal.delete(r),this.disposeData(r),this.pendingDeletes--),[2,D]}})})},t.prototype.checkNumericalProblems=function(r){if(r!=null)for(var a=0;a<r.length;a++){var s=r[a];if(!t4e(s))throw Ht().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+s+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+s+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(r){var a,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.isPacked,c=Lr(i);if(Ht().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var d=this.decode(r),u=this.texData.get(d.dataId),h=(a=this.gpgpu).downloadMatrixFromPackedTexture.apply(a,[u.texture].concat(cy(i))).subarray(0,c);return this.disposeData(d.dataId),h}var f=Ht().getBool("WEBGL_PACK")&&l===!0,p=f?dD(i):i,x=f?new ePe(p):new ZIe(p),g=this.runWebGLProgram(x,[{shape:p,dtype:o,dataId:r}],"float32"),b=this.texData.get(g.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,c);return this.disposeData(g.dataId),y},t.prototype.time=function(r){return Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d;return Or(this,function(u){switch(u.label){case 0:return a=this.activeTimers,s=[],i=!1,this.programTimersStack==null?(this.programTimersStack=s,i=!0):this.activeTimers.push(s),this.activeTimers=s,r(),o=Q0(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),l=Q0(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=a,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return d=u.sent(),c.kernelMs=MTe(d),c.getExtraProfileInfo=function(){return d.map(function(h,f){return{name:l[f],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Iu(),endMs:null}},t.prototype.endTimer=function(r){return Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),r):(r.endMs=Iu(),r)},t.prototype.getQueryTime=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){return Ht().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(r)]:[2,(a=r).endMs-a.startMs]})})},t.prototype.disposeData=function(r){if(!this.pendingDisposal.has(r)){if(this.pendingRead.has(r))return this.pendingDisposal.add(r),void this.pendingDeletes++;if(this.texData.has(r)){this.releaseGPUData(r);var a=this.texData.get(r).complexTensors;a!=null&&(a.real.dispose(),a.imag.dispose()),this.texData.delete(r)}}},t.prototype.releaseGPUData=function(r){var a=this.texData.get(r),s=a.texture,i=a.dtype,o=a.texShape,l=a.usage,c=a.isPacked,d=a.slice,u=d&&d.origDataId||r,h=this.dataRefCount.get(u);h>1?this.dataRefCount.set(u,h-1):(this.dataRefCount.delete(u),s!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(s,o,l,c)));var f=this.texData.get(r);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(r){return this.uploadToGPU(r),this.texData.get(r).texture},t.prototype.getDataInfo=function(r){return this.texData.get(r)},t.prototype.getCPUBackend=function(){return Ht().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ht.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(r,a){var s=this;return a===void 0&&(a=128),this.getCPUBackend()!=null&&r.every(function(i){return s.texData.get(i.dataId).texture==null&&i.size<a})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(r,a){var s=this.makeOutput(r.shape,"complex64");return this.texData.get(s.dataId).complexTensors={real:ht.keep(r.clone()),imag:ht.keep(a.clone())},s},t.prototype.real=function(r){return this.texData.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.texData.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,a,s){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.slice(r,a,s);if(Lr(s)===0)return ao([],s,r.dtype);var i=this.texData.get(r.dataId).isPacked,o=eK(r.shape,a,s);if(i||!o){var l=Ht().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YPe(s):new GPe(s),c=l.getCustomSetupFunc(a);return this.compileAndRun(l,[r],null,c)}return this.uploadToGPU(r.dataId),this.shallowSlice(r,a,s)},t.prototype.shallowSlice=function(r,a,s){var i=this.texData.get(r.dataId),o=this.makeOutput(s,r.dtype),l=this.texData.get(o.dataId);Object.assign(l,i),l.shape=s,l.dtype=r.dtype;var c=tK(a,r.strides);i.slice&&(c+=i.slice.flatOffset),l.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||r.dataId};var d=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,d+1),o},t.prototype.stridedSlice=function(r,a,s,i){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.stridedSlice(r,a,s,i);var o=jI(a,s,i);if(o.some(function(c){return c===0}))return ao([],o);var l=new KPe(a,i,o);return this.compileAndRun(l,[r])},t.prototype.reverse=function(r,a){var s=Ht().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zPe(r.shape,a):new qPe(r.shape,a);return this.compileAndRun(s,[r])},t.prototype.concat=function(r,a){if(r[0].dtype==="complex64"){var s=r.map(function(p){return Wc(p)}),i=r.map(function(p){return Mu(p)});return Ji(this.concat(s,a),this.concat(i,a))}if(this.shouldExecuteOnCPU(r))return this.cpuBackend.concat(r,a);if(r.length===1)return r[0];if(r.length>Ht().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(r.length/2),l=this.concat(r.slice(0,o),a),c=this.concat(r.slice(o),a);return this.concat([l,c],a)}if(Ht().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].rank>1){var d=new BIe(r.map(function(p){return p.shape}),a);return this.compileAndRun(d,r)}var u=Z0(r.map(function(p){return p.shape}),a),h=r.map(function(p){return p.as2D(-1,Lr(p.shape.slice(a)))}),f=new LIe(h.map(function(p){return p.shape}));return this.compileAndRun(f,h).reshape(u)},t.prototype.neg=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.neg(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,I7,r.dtype);var a=new Na(r.shape,I7);return this.compileAndRun(a,[r])},t.prototype.batchMatMul=function(r,a,s,i){var o=s?r.shape[2]:r.shape[1],l=i?a.shape[1]:a.shape[2],c=s?r.shape[1]:r.shape[2],d=r.shape[0];if((o===1||l===1)&&c>1e3){s&&(r=r.transpose([0,2,1])),i&&(a=a.transpose([0,2,1]));var u=l===1?r:r.as3D(d,c,1),h=l===1?2:1,f=l===1?a.as3D(d,1,c):a;return this.multiply(u,f).sum(h,!0)}var p=eo(r.dtype,a.dtype),x=new mD(r.shape,[d,o,l],s,i);return this.compileAndRun(x,[r,a],p)},t.prototype.fusedBatchMatMul=function(r){var a=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=i?a.shape[2]:a.shape[1],h=o?s.shape[1]:s.shape[2],f=a.shape[0],p=eo(a.dtype,s.dtype),x=l!=null,g=d!=null,b=c?EN(c,!0):null,y=new mD(a.shape,[f,u,h],i,o,x,b,g),S=[a,s];return l&&S.push(l),d&&S.push(d),this.compileAndRun(y,S,p)},t.prototype.multiply=function(r,a){if(r.dtype==="complex64"){var s=this.texData.get(r.dataId),i=this.texData.get(a.dataId),o=new y7(PIe,r.shape,a.shape),l=new y7(OIe,r.shape,a.shape),c=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag),this.makeComplexComponentTensorInfo(a,i.complexTensors.real),this.makeComplexComponentTensorInfo(a,i.complexTensors.imag)],d=this.compileAndRun(o,c),u=this.compileAndRun(l,c),h=this.complex(d,u);return d.dispose(),u.dispose(),h}if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.multiply(r,a);if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,j7,r.dtype);var f=new Ns(j7,r.shape,a.shape);return this.compileAndRun(f,[r,a],r.dtype)},t.prototype.batchNormalization=function(r,a,s,i,o,l){var c=[r,a,s],d=null;l!=null&&(d=l.shape,c.push(l));var u=null;if(o!=null&&(u=o.shape,c.push(o)),Ht().getBool("WEBGL_PACK_NORMALIZATION")){var h=new IIe(r.shape,a.shape,s.shape,d,u,i);return this.compileAndRun(h,c)}var f=new TIe(r.shape,a.shape,s.shape,d,u,i);return this.compileAndRun(f,c)},t.prototype.localResponseNormalization4D=function(r,a,s,i,o){var l=Ht().getBool("WEBGL_PACK_NORMALIZATION")?new EPe(r.shape,a,s,i,o):new kPe(r.shape,a,s,i,o);return this.compileAndRun(l,[r])},t.prototype.LRNGrad=function(r,a,s,i,o,l,c){var d=new _Pe(a.shape,i,o,l,c);return this.compileAndRun(d,[a,s,r])},t.prototype.tile=function(r,a){if(r.dtype==="string"){var s=this.readSync(r.dataId).map(function(o){return S2(o)});return cK(ma(r.shape,r.dtype,s),a)}var i=new QPe(r.shape,a);return this.compileAndRun(i,[r])},t.prototype.pad=function(r,a,s){var i=Ht().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MPe(r.shape,a,s):new OPe(r.shape,a,s);return this.compileAndRun(i,[r])},t.prototype.transpose=function(r,a){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.transpose(r,a);var s=Ht().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZPe(r.shape,a):new JPe(r.shape,a);return this.compileAndRun(s,[r])},t.prototype.gather=function(r,a,s){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.gather(r,a,s);var i=new iPe(r.shape,a.size,s);return this.compileAndRun(i,[r,a])},t.prototype.batchToSpaceND=function(r,a,s){We(r.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=a.reduce(function(h,f){return h*f}),o=A2(r.shape,a,i),l=T2(o.length,a.length),c=I2(r.shape,a,i),d=XY(s,a.length),u=QY(c,s,a.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,a,s){We(r.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=a.reduce(function(f,p){return f*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+a.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=A2(c.shape,a,i,!1),u=T2(d.length,a.length,!1),h=I2(c.shape,a,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.reduce=function(r,a,s){var i=r.shape[0],o=r.shape[1],l=uD(o),c=new RPe({windowSize:l,inSize:o,batchSize:i},a),d=this.compileAndRun(c,[r],s);return d.shape[1]===1?d:this.reduce(d,a,s)},t.prototype.argReduce=function(r,a,s){s===void 0&&(s=null);var i=r.shape[0],o=r.shape[1];s!=null&&(i=s.shape[0],o=s.shape[1]);var l=uD(o),c=new NIe({windowSize:l,inSize:o,batchSize:i},a,s==null),d=[r];s!=null&&d.push(s);var u=this.compileAndRun(c,d,"int32");return u.shape[1]===1?u:this.argReduce(r,a,u)},t.prototype.argReducePacked=function(r,a,s){s===void 0&&(s=null);var i=s!=null?s.shape:r.shape,o=uD(i[i.length-1]),l=new EIe(i,o,a,s==null),c=s==null?[r]:[r,s],d=this.compileAndRun(l,c,"int32");return d.rank===r.rank?this.argReducePacked(r,a,d):d},t.prototype.sum=function(r,a){Yl("sum",a,r.rank);var s=No(r.shape,a),i=s[0],o=Lr(s[1]),l=r.as2D(-1,o),c=aD(r.dtype);return this.reduce(l,"sum",c).reshape(i)},t.prototype.prod=function(r,a){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.prod(r,a);var s=No(r.shape,a),i=s[0],o=Lr(s[1]),l=r.as2D(-1,o),c=aD(r.dtype);return this.reduce(l,"prod",c).reshape(i)},t.prototype.unsortedSegmentSum=function(r,a,s){var i=0,o=lh([i],r.rank),l=r;o!=null&&(l=r.transpose(o),i=ch(1,r.rank)[0]);var c=function(p,x,g){for(var b=[],y=p.length,S=0;S<y;S++)S!==x?b.push(p[S]):b.push(g);return b}(l.shape,i,s),d=Lr([l.shape[i]]),u=l.as2D(-1,d),h=aD(r.dtype),f=this.segOpCompute(u,"unsortedSegmentSum",a,h,s).reshape(c);return o!=null&&(f=f.transpose(vI(o))),f},t.prototype.segOpCompute=function(r,a,s,i,o){var l=r.shape[0],c=r.shape[1],d=function(f,p){var x,g=!1;for(f<=ZY?(x=f,g=!0):x=j3(f,Math.floor(Math.sqrt(f)));!g;)x>p||x===f?g=!0:x=j3(f,x+1);return x}(c,o),u=new HPe({windowSize:d,inSize:c,batchSize:l,numSegments:o}),h=this.compileAndRun(u,[r,s],i);return h.shape[1]===o?h:(s=D2(0,o).tile([c/d]),this.segOpCompute(h,a,s,i,o))},t.prototype.argMinMaxReduce=function(r,a,s){var i=[a];if(Yl("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,r.rank),!Ht().getBool("WEBGL_PACK_REDUCE")||r.rank<=2){var o=No(r.shape,i),l=o[0],c=Lr(o[1]),d=r.as2D(-1,c);return this.argReduce(d,s).reshape(l)}return this.argReducePacked(r,s)},t.prototype.argMin=function(r,a){return this.argMinMaxReduce(r,a,"min")},t.prototype.argMax=function(r,a){return this.argMinMaxReduce(r,a,"max")},t.prototype.cumsum=function(r,a,s,i){if(a!==r.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(r.rank-1)+" but got axis="+a);var o=new YIe(r.shape,s,i);return this.compileAndRun(o,[r])},t.prototype.equal=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(equal(a, b));
`,"bool");var s=new Ns("return float(a == b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.notEqual=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(notEqual(a, b));
`,"bool");var s=new Ns("return float(a != b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.less=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.less(r,a);if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(lessThan(a, b));
`,"bool");var s=new Ns("return float(a < b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.lessEqual=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(lessThanEqual(a, b));
`,"bool");var s=new Ns("return float(a <= b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.greater=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.greater(r,a);if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(greaterThan(a, b));
`,"bool");var s=new Ns("return float(a > b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.greaterEqual=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var s=new Ns("return float(a >= b);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.logicalNot=function(r){var a=new Na(r.shape,"return float(!(x >= 1.0));");return this.compileAndRun(a,[r])},t.prototype.logicalAnd=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var s=new Ns("return float(a >= 1.0 && b >= 1.0);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.logicalOr=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var s=new Ns("return float(a >= 1.0 || b >= 1.0);",r.shape,a.shape);return this.compileAndRun(s,[r,a],"bool")},t.prototype.select=function(r,a,s){var i=new WPe(r.rank,a.shape,a.rank);return this.compileAndRun(i,[r,a,s],eo(a.dtype,s.dtype))},t.prototype.where=function(r){_2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var a=r.dataSync();return CI(r.shape,a)},t.prototype.topk=function(r,a,s){return dK(r.dataSync(),r.shape,r.dtype,a)},t.prototype.min=function(r,a){Yl("min",a,r.rank);var s=No(r.shape,a),i=s[0],o=Lr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"min",l.dtype).reshape(i)},t.prototype.minimum=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.minimum(r,a);var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ns(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.mod=function(r,a){var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ns(`if (b == 0.0) return NAN;
  return mod(a, b);`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.max=function(r,a){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.max(r,a);Yl("max",a,r.rank);var s=No(r.shape,a),i=s[0],o=Lr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"max",l.dtype).reshape(i)},t.prototype.maximum=function(r,a){if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.maximum(r,a);var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ns(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.all=function(r,a){Yl("all",a,r.rank);var s=No(r.shape,a),i=s[0],o=Lr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"all",l.dtype).reshape(i)},t.prototype.any=function(r,a){Yl("any",a,r.rank);var s=No(r.shape,a),i=s[0],o=Lr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"any",l.dtype).reshape(i)},t.prototype.realDivide=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var s=new Ns(`
if (a == b) {
  return 1.0;
};
return a / b;`,r.shape,a.shape);return this.compileAndRun(s,[r,a],"float32")},t.prototype.floorDiv=function(r,a){if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var s=new Ns(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,r.shape,a.shape);return this.compileAndRun(s,[r,a],"int32")},t.prototype.add=function(r,a){if(r.dtype==="complex64"&&a.dtype==="complex64")return this.complexSeparableBinaryOp(r,a,hD);if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.add(r,a);var s=eo(r.dtype,a.dtype);if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,hD,s);var i=new Ns(hD,r.shape,a.shape);return this.compileAndRun(i,[r,a],s)},t.prototype.packedUnaryOp=function(r,a,s){var i=new Fb(r.shape,a);return this.compileAndRun(i,[r],s)},t.prototype.packedBinaryOp=function(r,a,s,i,o){o===void 0&&(o=!1);var l=new $h(s,r.shape,a.shape,o);return this.compileAndRun(l,[r,a],i)},t.prototype.complexSeparableBinaryOp=function(r,a,s){var i=this,o=this.texData.get(r.dataId),l=this.texData.get(a.dataId),c=[[o.complexTensors.real,l.complexTensors.real],[o.complexTensors.imag,l.complexTensors.imag]].map(function(f){var p=f[0],x=f[1],g=i.makeComplexComponentTensorInfo(r,p),b=i.makeComplexComponentTensorInfo(a,x),y=new Ns(s,r.shape,a.shape);return i.compileAndRun(y,[g,b],eo(p.dtype,x.dtype))}),d=c[0],u=c[1],h=this.complex(d,u);return d.dispose(),u.dispose(),h},t.prototype.makeComplexComponentTensorInfo=function(r,a){return{dataId:a.dataId,dtype:a.dtype,shape:r.shape}},t.prototype.addN=function(r){if(r.length===1)return r[0];if(r.length>Ht().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(r.length/2),s=this.addN(r.slice(0,a)),i=this.addN(r.slice(a));return this.addN([s,i])}var o=r.map(function(d){return d.dtype}).reduce(function(d,u){return eo(d,u)}),l=r.map(function(d){return d.shape}),c=Ht().getBool("WEBGL_PACK")?new jIe(r[0].shape,l):new yIe(r[0].shape,l);return this.compileAndRun(c,r,o)},t.prototype.subtract=function(r,a){if(r.dtype==="complex64"&&a.dtype==="complex64")return this.complexSeparableBinaryOp(r,a,fD);if(this.shouldExecuteOnCPU([r,a]))return this.cpuBackend.subtract(r,a);var s=eo(r.dtype,a.dtype);if(Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,a,fD,r.dtype);var i=new Ns(fD,r.shape,a.shape);return this.compileAndRun(i,[r,a],s)},t.prototype.pow=function(r,a){var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ns(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,r.shape,a.shape),i=eo(r.dtype,a.dtype);return this.compileAndRun(s,[r,a],i)},t.prototype.ceil=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.ceil(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,P7,r.dtype);var a=new Na(r.shape,P7);return this.compileAndRun(a,[r])},t.prototype.floor=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.floor(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,O7,r.dtype);var a=new Na(r.shape,O7);return this.compileAndRun(a,[r])},t.prototype.sign=function(r){var a=new Na(r.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(a,[r])},t.prototype.isNaN=function(r){var a=new Na(r.shape,"return float(isnan(x));");return this.compileAndRun(a,[r],"bool")},t.prototype.isInf=function(r){var a=new Na(r.shape,"return float(isinf(x));");return this.compileAndRun(a,[r],"bool")},t.prototype.isFinite=function(r){var a=new Na(r.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(a,[r],"bool")},t.prototype.round=function(r){var a=new Na(r.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(a,[r])},t.prototype.exp=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.exp(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,M7,r.dtype);var a=new Na(r.shape,M7);return this.compileAndRun(a,[r])},t.prototype.expm1=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.expm1(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,R7,r.dtype);var a=new Na(r.shape,R7);return this.compileAndRun(a,[r])},t.prototype.softmax=function(r,a){var s=Si([a],r.shape),i=this.max(r,s),o=Cl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.log=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.log(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,r.dtype);var a=new Na(r.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(a,[r])},t.prototype.log1p=function(r){var a=new Na(r.shape,"return log(1.0 + x);");return this.compileAndRun(a,[r])},t.prototype.sqrt=function(r){var a=new Na(r.shape,"return sqrt(x);");return this.compileAndRun(a,[r])},t.prototype.rsqrt=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.rsqrt(r);var a=new Na(r.shape,"return inversesqrt(x);");return this.compileAndRun(a,[r])},t.prototype.reciprocal=function(r){var a=new Na(r.shape,"return 1.0 / x;");return this.compileAndRun(a,[r])},t.prototype.relu=function(r){var a;return a=Ht().getBool("WEBGL_PACK")?new Fb(r.shape,bK):new Na(r.shape,xK),this.compileAndRun(a,[r])},t.prototype.relu6=function(r){var a;return a=Ht().getBool("WEBGL_PACK")?new Fb(r.shape,yK):new Na(r.shape,vK),this.compileAndRun(a,[r])},t.prototype.prelu=function(r,a){var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(pK,r.shape,a.shape):new Ns(mK,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.elu=function(r){if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,jK,r.dtype);var a=new Na(r.shape,gK);return this.compileAndRun(a,[r])},t.prototype.eluDer=function(r,a){var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,r.shape,a.shape):new Ns("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.selu=function(r){var a=new Na(r.shape,tOe);return this.compileAndRun(a,[r])},t.prototype.int=function(r){var a=new Na(r.shape,"return float(int(x));");return this.compileAndRun(a,[r],"int32")},t.prototype.clip=function(r,a,s){var i,o=(i=Ht().getBool("WEBGL_PACK_CLIP")?new RIe(r.shape):new MIe(r.shape)).getCustomSetupFunc(a,s);return this.compileAndRun(i,[r],null,o)},t.prototype.abs=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.abs(r);if(Ht().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,T7,r.dtype);var a=new Na(r.shape,T7);return this.compileAndRun(a,[r])},t.prototype.complexAbs=function(r){var a=this.texData.get(r.dataId),s=new FIe(r.shape),i=[this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)];return this.compileAndRun(s,i)},t.prototype.sigmoid=function(r){var a=new Na(r.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(a,[r])},t.prototype.softplus=function(r){var a=new Na(r.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(a,[r])},t.prototype.sin=function(r){var a=new Na(r.shape,rOe);return this.compileAndRun(a,[r])},t.prototype.cos=function(r){var a=new Na(r.shape,aOe);return this.compileAndRun(a,[r])},t.prototype.tan=function(r){var a=new Na(r.shape,"return tan(x);");return this.compileAndRun(a,[r])},t.prototype.asin=function(r){var a=new Na(r.shape,nOe);return this.compileAndRun(a,[r])},t.prototype.acos=function(r){var a=new Na(r.shape,sOe);return this.compileAndRun(a,[r])},t.prototype.atan=function(r){var a=new Na(r.shape,iOe);return this.compileAndRun(a,[r])},t.prototype.atan2=function(r,a){var s=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,a.shape):new Ns(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,r.shape,a.shape);return this.compileAndRun(s,[r,a])},t.prototype.sinh=function(r){var a=new Na(r.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(a,[r])},t.prototype.cosh=function(r){var a=new Na(r.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(a,[r])},t.prototype.tanh=function(r){var a=new Na(r.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(a,[r])},t.prototype.asinh=function(r){var a=new Na(r.shape,oOe);return this.compileAndRun(a,[r])},t.prototype.acosh=function(r){var a=new Na(r.shape,lOe);return this.compileAndRun(a,[r])},t.prototype.atanh=function(r){var a=new Na(r.shape,cOe);return this.compileAndRun(a,[r])},t.prototype.erf=function(r){var a=new Na(r.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(a,[r])},t.prototype.step=function(r,a){var s=new Na(r.shape,function(i){return i===void 0&&(i=0),Gd+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(a));return this.compileAndRun(s,[r])},t.prototype.conv2dByMatMul=function(r,a,s,i,o,l){var c=r.shape,d=this.texData.get(r.dataId),u=s.inChannels,h=c[0]*c[1]*c[2],f=s.outChannels,p=s.dataFormat==="channelsLast",x=(h===1||f===1)&&u>1e3,g=c[2]%2!=0&&!!d.isPacked;if(x||!Ht().getBool("WEBGL_LAZILY_UNPACK")||!Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){var b=p?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],y=this.reshape(r,[1,b,s.inChannels]),S=this.reshape(a,[1,s.inChannels,s.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:S,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),s.outShape)}var w=p?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),k={dataId:r.dataId,shape:[1,w,s.inChannels],dtype:r.dtype},C=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,We(SN(d.shape,k.shape),function(){return"packed reshape "+d.shape+" to "+k.shape+" isn't free"});var D=this.reshape(a,[1,s.inChannels,s.outChannels]),E=this.fusedBatchMatMul({a:k,b:D,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),A=this.texData.get(E.dataId);return We(A.isPacked,function(){return"batchMatMul result is expected to be packed"}),d.shape=C,A.shape=s.outShape,ht.makeTensorFromDataId(E.dataId,s.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(r,a,s,i,o,l){var c=s.filterWidth,d=s.filterHeight,u=s.inChannels,h=s.outWidth,f=s.outHeight,p=s.dataFormat==="channelsLast",x=c*d*u,g=f*h,b=[x,g],y=r.squeeze([0]),S=a.reshape([1,x,-1]),w=new CPe(b,y.shape,s),k=this.compileAndRun(w,[y]).reshape([1,b[0],b[1]]),C=i!=null,D=l!=null,E=o?EN(o,!0):null,A=new mD(k.shape,[1,g,s.outChannels],!0,!1,C,E,D),I=[k,S];i&&I.push(i),D&&I.push(l);var L=this.compileAndRun(A,I);return p?L.reshape([1,f,h,s.outChannels]):L.reshape([1,s.outChannels,f,h])},t.prototype.fusedConv2d=function(r){var a=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(a,s,i,o,l,c);if(Ht().getBool("WEBGL_CONV_IM2COL")&&a.shape[0]===1)return this.conv2dWithIm2Row(a,s,i,o,l,c);var d=o!=null,u=c!=null,h=l?EN(l,!1):null,f=new N7(i,d,h,u),p=[a,s];return o&&p.push(o),c&&p.push(c),this.compileAndRun(f,p)},t.prototype.conv2d=function(r,a,s){if(s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,s);if(Ht().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,s);var i=new N7(s);return this.compileAndRun(i,[r,a])},t.prototype.conv2dDerInput=function(r,a,s){var i=new $Ie(s);return this.compileAndRun(i,[r,a])},t.prototype.conv2dDerFilter=function(r,a,s){var i=new UIe(s);return this.compileAndRun(i,[r,a])},t.prototype.fusedDepthwiseConv2D=function(r){var a,s=r.input,i=r.filter,o=r.convInfo,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=Ht().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,h=c?EN(c,u):null,f=[s,i],p=l!=null,x=d!=null;return p&&f.push(l),x&&f.push(d),u?(a=new S7(o,p,h,x),this.compileAndRun(a,f)):(a=new w7(o,p,h,x),this.compileAndRun(a,f))},t.prototype.depthwiseConv2D=function(r,a,s){var i;return Ht().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1?(i=new S7(s),this.compileAndRun(i,[r,a])):(i=new w7(s),this.compileAndRun(i,[r,a]))},t.prototype.depthwiseConv2DDerInput=function(r,a,s){var i=new HIe(s);return this.compileAndRun(i,[r,a])},t.prototype.depthwiseConv2DDerFilter=function(r,a,s){var i=new zIe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv3d=function(r,a,s){var i=new WIe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv3dDerInput=function(r,a,s){var i=new qIe(s);return this.compileAndRun(i,[r,a])},t.prototype.conv3dDerFilter=function(r,a,s){var i=new VIe(s);return this.compileAndRun(i,[r,a])},t.prototype.maxPool=function(r,a){var s=new pD(a,"max",!1);return this.compileAndRun(s,[r])},t.prototype.avgPool=function(r,a){var s=new pD(a,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPoolBackprop=function(r,a,s,i){var o=new pD(i,"max",!0),l=this.compileAndRun(o,[a]),c=new DPe(i),d=this.compileAndRun(c,[r,l],a.dtype);return l.dispose(),d},t.prototype.avgPoolBackprop=function(r,a,s){var i=new DIe(s);return this.compileAndRun(i,[r],a.dtype)},t.prototype.cast=function(r,a){return sK(r,a,this)},t.prototype.unstack=function(r,a){for(var s=r.shape[a],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==a&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[a]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[a]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.avgPool3d=function(r,a){var s=new xD(a,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.avgPool3dBackprop=function(r,a,s){var i=new AIe(s);return this.compileAndRun(i,[r],a.dtype)},t.prototype.maxPool3d=function(r,a){var s=new xD(a,"max",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPool3dBackprop=function(r,a,s,i){var o=new xD(i,"max",!0),l=this.compileAndRun(o,[a]),c=new APe(i),d=this.compileAndRun(c,[r,l],a.dtype);return l.dispose(),d},t.prototype.reshape=function(r,a){var s=this.texData.get(r.dataId);if(s.isPacked&&!SN(r.shape,a)&&(s.texture===null||!SN(s.shape,a))){var i=this.packedReshape(r,a);return ht.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return D3(r,a)},t.prototype.resizeBilinear=function(r,a,s,i){var o=Ht().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UPe(r.shape,a,s,i):new BPe(r.shape,a,s,i);return this.compileAndRun(o,[r],"float32")},t.prototype.resizeBilinearBackprop=function(r,a,s){var i=new LPe(r,a,s);return this.compileAndRun(i,[r])},t.prototype.resizeNearestNeighbor=function(r,a,s,i){var o=new VPe(r.shape,a,s,i);return this.compileAndRun(o,[r])},t.prototype.resizeNearestNeighborBackprop=function(r,a,s){var i=new $Pe(r,a,s);return this.compileAndRun(i,[r])},t.prototype.multinomial=function(r,a,s,i){var o=a?r:kf(r),l=o.shape[0],c=o.shape[1],d=new TPe(l,c,s),u=d.getCustomSetupFunc(i);return this.compileAndRun(d,[o],"int32",u)},t.prototype.oneHot=function(r,a,s,i){var o=new IPe(r.size,a,s,i);return this.compileAndRun(o,[r])},t.prototype.diag=function(r){var a=new JIe(r.size);return this.compileAndRun(a,[r])},t.prototype.nonMaxSuppression=function(r,a,s,i,o){return _2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),wI(r.dataSync(),a.dataSync(),s,i,o)},t.prototype.cropAndResize=function(r,a,s,i,o,l){var c=new GIe(r.shape,a.shape,i,o,l);return this.compileAndRun(c,[r,a,s],"float32")},t.prototype.depthToSpace=function(r,a,s){We(a>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+a});var i=r.shape[0],o=s==="NHWC"?r.shape[1]:r.shape[2],l=s==="NHWC"?r.shape[2]:r.shape[3],c=s==="NHWC"?r.shape[3]:r.shape[1],d=o*a,u=l*a,h=c/(a*a),f=new QIe(s==="NHWC"?[i,d,u,h]:[i,h,d,u],a,s);return this.compileAndRun(f,[r])},t.prototype.split=function(r,a,s){return lK(r,a,s)},t.prototype.scatterND=function(r,a,s){var i=P2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=[u/c,c],f=r.reshape([l,o]),p=a.reshape([l,c]);if(u===0)return D3(ao([]),s);var x=Nr(0),g=new E7(l,o,f.rank,p.rank,d,h);return this.compileAndRun(g,[p,f,x]).reshape(s)},t.prototype.sparseToDense=function(r,a,s,i){var o=P2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.strides,u=o.outputSize,h=new E7(c,l,r.rank,a.rank,d,[u,1]);return this.compileAndRun(h,[a,r,i]).reshape(s)},t.prototype.fft=function(r){return this.fftImpl(r,!1)},t.prototype.ifft=function(r){return this.fftImpl(r,!0)},t.prototype.fftImpl=function(r,a){var s=this.texData.get(r.dataId),i=new k7(aPe,r.shape,a),o=new k7(nPe,r.shape,a),l=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag)],c=this.compileAndRun(i,l),d=this.compileAndRun(o,l),u=this.complex(c,d).as2D(r.shape[0],r.shape[1]);return c.dispose(),d.dispose(),u},t.prototype.gatherND=function(r,a){var s=a.shape,i=s[s.length-1],o=JY(r,a),l=o[0],c=o[1],d=o[2],u=o[3],h=a.reshape([c,i]),f=r.reshape([r.size/d,d]),p=new oPe(i,u,[c,d]);return this.compileAndRun(p,[f,h]).reshape(l)},t.prototype.fill=function(r,a,s){if((s=s||I1(a))==="string"){var i=w2(s,Lr(r));return i.fill(a),ht.makeTensor(i,r,s,this)}var o=new sPe(r,a),l=o.getCustomSetupFunc(a);return this.compileAndRun(o,[],s,l)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){return this.fill(r.shape,r.dtype==="string"?"":0,r.dtype)},t.prototype.linspace=function(r,a,s){return iK(r,a,s)},t.prototype.makeTensorInfo=function(r,a){var s=this.write(null,r,a);return this.texData.get(s).usage=null,{dataId:s,shape:r,dtype:a}},t.prototype.makeOutput=function(r,a){var s=this.makeTensorInfo(r,a).dataId;return ht.makeTensorFromDataId(s,r,a,this)},t.prototype.unpackTensor=function(r){var a=new uOe(r.shape);return this.runWebGLProgram(a,[r],r.dtype)},t.prototype.packTensor=function(r){var a=new PPe(r.shape);return this.runWebGLProgram(a,[r],r.dtype,null,!0)},t.prototype.packedReshape=function(r,a){var s=[C2(r.shape)].concat(k2(r.shape)),i={dtype:r.dtype,shape:s,dataId:r.dataId},o=[C2(a)].concat(k2(a)),l=new FPe(o,s),c=this.runWebGLProgram(l,[i],r.dtype,null,!0);return{dataId:c.dataId,shape:a,dtype:c.dtype}},t.prototype.decode=function(r){var a,s=this.texData.get(r),i=s.isPacked,o=s.shape,l=s.dtype,c=dD(o);return a=i?new XIe(c):new KIe(c),{dtype:l,shape:o,dataId:this.runWebGLProgram(a,[{shape:c,dtype:l,dataId:r}],l,null,!0).dataId}},t.prototype.runWebGLProgram=function(r,a,s,i,o){var l=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(r.outputShape,s),d=this.texData.get(c.dataId);if(r.packedOutput&&(d.isPacked=!0),r.outPackingScheme===Yy.DENSE){var u=cy(r.outputShape);d.texShape=u.map(function(w){return 2*w})}if(r.outTexUsage!=null&&(d.usage=r.outTexUsage),Lr(c.shape)===0)return d.values=Wy(c.dtype,0),c;var h=[],f=a.map(function(w){if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var k=l.texData.get(w.dataId);if(k.texture==null){if(!r.packedInputs&&Lr(w.shape)<=Ht().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:k.values};r.packedInputs&&(k.isPacked=!0,k.shape=w.shape)}else if(!!k.isPacked!=!!r.packedInputs)w=k.isPacked?l.unpackTensor(w):l.packTensor(w),h.push(w),k=l.texData.get(w.dataId);else if(k.isPacked&&!SN(k.shape,w.shape)){var C=w,D=w.shape;w.shape=k.shape,w=l.packedReshape(w,D),h.push(w),k=l.texData.get(w.dataId),C.shape=D}return l.uploadToGPU(w.dataId),{shape:w.shape,texData:k,isUniform:!1}});this.uploadToGPU(c.dataId);var p,x={shape:c.shape,texData:d,isUniform:!1},g=function(w,k,C){var D="";k.concat(C).forEach(function(I){var L=I.texData!=null&&I.texData.slice!=null&&I.texData.slice.flatOffset>0,P=I.isUniform?"uniform":I.texData.texShape;D+=I.shape+"_"+P+"_"+L});var E=w.userCode,A=w.constructor.name;return A+="_"+D+"_"+E}(r,f,x),b=this.getAndSaveBinary(g,function(){return function(w,k,C,D){var E=k.userCode,A=C.map(function(F,X){var Q={logicalShape:F.shape,texShape:F.isUniform?null:F.texData.texShape,isUniform:F.isUniform,isPacked:!F.isUniform&&F.texData.isPacked,flatOffset:null};return F.texData!=null&&F.texData.slice!=null&&F.texData.slice.flatOffset>0&&(Q.flatOffset=F.texData.slice.flatOffset),{name:k.variableNames[X],shapeInfo:Q}}),I=A.map(function(F){return F.shapeInfo}),L={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},P=wIe(A,L,E,k.packedInputs),O=w.createProgram(P),Y=null,q=w.getUniformLocation(O,"NAN",!1);Ht().getNumber("WEBGL_VERSION")===1&&(Y=w.getUniformLocation(O,"INFINITY",!1));for(var K={},U=0;U<k.variableNames.length;U++){var J=k.variableNames[U];K[J]=w.getUniformLocation(O,J,!1),K["offset"+J]=w.getUniformLocation(O,"offset"+J,!1)}return{program:k,source:P,webGLProgram:O,uniformLocations:K,inShapeInfos:I,outShapeInfo:L,infLoc:Y,nanLoc:q}}(l.gpgpu,r,f,x)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(w,k,C,D,E){_7(k.inShapeInfos,C),_7([k.outShapeInfo],[D]);var A=D.texData.texture,I=D.texData.texShape;D.texData.isPacked?w.setOutputPackedMatrixTexture(A,I[0],I[1]):w.setOutputMatrixTexture(A,I[0],I[1]),w.setProgram(k.webGLProgram),Ht().getNumber("WEBGL_VERSION")===1&&k.infLoc!==null&&w.gl.uniform1f(k.infLoc,1/0),k.nanLoc!==null&&w.gl.uniform1f(k.nanLoc,NaN),C.forEach(function(L,P){var O=k.program.variableNames[P],Y=k.uniformLocations[O],q=k.uniformLocations["offset"+O];if(Y!=null)if(L.isUniform)if(Lr(L.shape)<2)w.gl.uniform1f(Y,L.uniformValues[0]);else{var K=L.uniformValues;K instanceof Float32Array||(K=new Float32Array(K)),w.gl.uniform1fv(Y,K)}else L.texData.slice!=null&&q!=null&&w.gl.uniform1i(q,L.texData.slice.flatOffset),w.setInputMatrixTexture(L.texData.texture,Y,P)}),E?.(w,k.webGLProgram),w.executeProgram()}(this.gpgpu,b,f,x,i),h.forEach(function(w){return l.disposeData(w.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:r.constructor.name,query:this.getQueryTime(p)})),!Ht().getBool("WEBGL_LAZILY_UNPACK")&&d.isPacked&&o===!1){var S=this.unpackTensor(c);return this.disposeData(c.dataId),S}return c},t.prototype.compileAndRun=function(r,a,s,i,o){o===void 0&&(o=!1),s=s||a[0].dtype;var l=this.runWebGLProgram(r,a,s,i,o);return ht.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},t.prototype.getAndSaveBinary=function(r,a){return r in this.binaryCache||(this.binaryCache[r]=a()),this.binaryCache[r]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var r=this;this.disposed||(Ht().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(a){r.gpgpu.deleteProgram(r.binaryCache[a].webGLProgram),delete r.binaryCache[a]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var r=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Er(function(){if(!Ht().get("WEBGL_RENDER_FLOAT32_ENABLED")){var a=Ht().getBool("DEBUG");Ht().set("DEBUG",!1);var s=r.abs(Nr(1e-8)).dataSync()[0];if(Ht().set("DEBUG",a),s>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(r){var a,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.values,c=s.texture,d=s.usage,u=s.isPacked;if(c==null){var h,f=this.activeTimers!=null;f&&(h=Iu());var p=s.texShape;if(p==null&&(p=b4e(i,u),s.texShape=p),l!=null){var x=dD(i),g=void 0,b=p[1],y=p[0],S=l instanceof Uint8Array;u?(b=(a=O1(p[0],p[1]))[0],y=a[1],g=new rPe(x,[y,b],S)):g=new tPe(x,[y,b],S);var w=this.makeTensorInfo([y,b],o);this.texData.get(w.dataId).usage=S?rc.PIXELS:rc.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),b,y,l);var k=this.runWebGLProgram(g,[w],o,null,!0),C=this.texData.get(k.dataId);s.texture=C.texture,s.texShape=C.texShape,s.isPacked=C.isPacked,s.usage=C.usage,this.disposeData(w.dataId),this.texData.delete(k.dataId),s.values=null,f&&(this.uploadWaitMs+=Iu()-h)}else{var D=this.acquireTexture(p,d,o,u);s.texture=D}}},t.prototype.convertAndCacheOnCPU=function(r,a){var s=this.texData.get(r),i=s.dtype;return this.releaseGPUData(r),a!=null&&(s.values=function(o,l){if(l==="float32"||l==="complex64")return o;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(o.length):new Uint8Array(o.length),d=0;d<c.length;++d)c[d]=Math.round(o[d]);return c}throw new Error("Unknown dtype "+l)}(a,i)),s.values},t.prototype.acquireTexture=function(r,a,s,i){if(this.numBytesInGPU+=this.computeBytes(r,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(r,a,i)},t.prototype.computeBytes=function(r,a){return r[0]*r[1]*OY(a)},t}(aK);$Y()&&ht.registerBackend("webgl",function(){return new fOe},2);var mOe=tt({square_:function(e){var t=Fe(e,"x","square"),r=[t];return ht.runKernelFunc(function(a,s){return s([t]),a.square(t)},{x:t},null,"Square",{},r,[])}}),Xy="SquaredDifference",NK=tt({squaredDifference_:function(e,t){var r,a=Fe(e,"a","squaredDifference"),s=Fe(t,"b","squaredDifference");r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape);var i={a,b:s},o=[a,s];return ht.runKernelFunc(function(l,c){var d=l.squaredDifference(a,s);return c([a,s]),d},i,function(l,c){var d=c[0],u=c[1],h=Nr(2);return{a:function(){return l.mul(d.sub(u).mul(h))},b:function(){return l.mul(u.sub(d).mul(h))}}},Xy,{},o,[])}}),pOe=tt({abs_:function(e){var t=Fe(e,"x","abs");return t.dtype==="complex64"?ht.runKernelFunc(function(r){return r.complexAbs(t)},{$x:t}):ht.runKernelFunc(function(r,a){var s=r.abs(t);return a([t]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return r.mul(s.toFloat().step(-1))}}},"Abs")}}),xOe=tt({acos_:function(e){var t=Fe(e,"x","acos");return ht.runKernelFunc(function(r,a){var s=r.acos(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(Nr(1).sub(s.toFloat().square()).sqrt()).neg()}}})}}),vOe=tt({acosh_:function(e){var t=Fe(e,"x","acosh");return ht.runKernelFunc(function(r,a){var s=r.acosh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(s.toFloat().square().sub(1).sqrt())}}})}}),gOe=tt({asin_:function(e){var t=Fe(e,"x","asin");return ht.runKernelFunc(function(r,a){var s=r.asin(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(Nr(1).sub(s.toFloat().square()).sqrt())}}})}}),bOe=tt({asinh_:function(e){var t=Fe(e,"x","asinh");return ht.runKernelFunc(function(r,a){var s=r.asinh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.divStrict(Nr(1).add(s.toFloat().square()).sqrt())}}})}}),yOe=tt({atan_:function(e){var t=Fe(e,"x","atan");return ht.runKernelFunc(function(r,a){var s=r.atan(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.toFloat().square().add(1))}}})}}),jOe=tt({atanh_:function(e){var t=Fe(e,"x","atanh");return ht.runKernelFunc(function(r,a){var s=r.atanh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(Nr(1).sub(s.toFloat().square()))}}})}}),NOe=tt({ceil_:function(e){var t=Fe(e,"x","ceil");return ht.runKernelFunc(function(r){return r.ceil(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),DI=tt({clipByValue_:function(e,t,r){var a=Fe(e,"x","clipByValue");We(t<=r,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+r+")."});var s=[a],i={min:t,max:r};return ht.runKernelFunc(function(o,l){var c=o.clip(a,t,r);return l([a]),c},{x:a},function(o,l){var c=l[0];return{x:function(){return o.where(c.greaterEqual(t).logicalAnd(c.lessEqual(r)),Va(o))}}},"ClipByValue",i,s)}}),wOe=tt({cos_:function(e){var t=Fe(e,"x","cos"),r=[t];return ht.runKernelFunc(function(a,s){var i=a.cos(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return i.toFloat().sin().neg().mul(a)}}},"Cos",{},r)}}),SOe=tt({cosh_:function(e){var t=Fe(e,"x","cosh");return ht.runKernelFunc(function(r,a){var s=r.cosh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return s.toFloat().sinh().mulStrict(r)}}})}}),COe=tt({erf_:function(e){var t=Fe(e,"x","erf");return We(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),ht.runKernelFunc(function(r,a){var s=r.erf(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),T3=tt({exp_:function(e){var t=Fe(e,"x","exp");return ht.runKernelFunc(function(r,a){var s=r.exp(t);return a([s]),s},{x:t},function(r,a){return{x:function(){return r.mulStrict(a[0])}}},"Exp",{},[],[!0])}}),kOe=tt({expm1_:function(e){var t=Fe(e,"x","expm1");return ht.runKernelFunc(function(r,a){var s=r.expm1(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.exp())}}})}}),_Oe=tt({floor_:function(e){var t=Fe(e,"x","floor");return ht.runKernelFunc(function(r){return r.floor(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),EOe=tt({log_:function(e){var t=Fe(e,"x","log"),r=[t];return ht.runKernelFunc(function(a,s){var i=a.log(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return a.div(i.toFloat())}}},"Log",{},r)}}),DOe=tt({log1p_:function(e){var t=Fe(e,"x","log1p");return ht.runKernelFunc(function(r,a){var s=r.log1p(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.add(1))}}})}}),AOe=tt({logSigmoid_:function(e){var t=Fe(e,"x","logSigmoid");return ht.runKernelFunc(function(r,a){var s=r.softplus(t.neg()).neg();return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.neg().sigmoid())}}})}}),F2=tt({neg_:function(e){var t=Fe(e,"x","neg"),r=[t];return ht.runKernelFunc(function(a){return a.neg(t)},{x:t},function(a){return{x:function(){return a.neg()}}},"Neg",{},r)}}),TOe=tt({reciprocal_:function(e){var t=Fe(e,"x","reciprocal");return ht.runKernelFunc(function(r,a){var s=r.reciprocal(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.square().neg())}}})}}),IOe=tt({round_:function(e){var t=Fe(e,"x","round");return ht.runKernelFunc(function(r){return r.round(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),wK=tt({rsqrt_:function(e){var t=Fe(e,"x","rsqrt"),r=[t];return ht.runKernelFunc(function(a,s){var i=a.rsqrt(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return a.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},r)}}),SK=tt({sigmoid_:function(e){var t=Fe(e,"x","sigmoid");return ht.runKernelFunc(function(r,a){var s=r.sigmoid(t);return a([s]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return r.mul(s.mul(Nr(1).sub(s)))}}},"Sigmoid")}}),POe=tt({sign_:function(e){var t=Fe(e,"x","sign");return ht.runKernelFunc(function(r){return r.sign(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),OOe=tt({isNaN_:function(e){var t=Fe(e,"x","isNaN");return ht.runKernelFunc(function(r){return r.isNaN(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),MOe=tt({isInf_:function(e){var t=Fe(e,"x","isInf");return ht.runKernelFunc(function(r){return r.isInf(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),ROe=tt({isFinite_:function(e){var t=Fe(e,"x","isFinite");return ht.runKernelFunc(function(r){return r.isFinite(t)},{$x:t},function(r){return{$x:function(){return Va(r)}}})}}),FOe=tt({sin_:function(e){var t=Fe(e,"x","sin"),r=[t];return ht.runKernelFunc(function(a,s){var i=a.sin(t);return s([t]),i},{x:t},function(a,s){var i=s[0];return{x:function(){return i.toFloat().cos().mul(a)}}},"Sin",{},r)}}),LOe=tt({sinh_:function(e){var t=Fe(e,"x","sinh");return ht.runKernelFunc(function(r,a){var s=r.sinh(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return s.toFloat().cosh().mulStrict(r)}}})}}),BOe=tt({softplus_:function(e){var t=Fe(e,"x","softplus");return ht.runKernelFunc(function(r,a){var s=r.softplus(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.mul(s.sigmoid())}}})}}),UOe=tt({sqrt_:function(e){var t=Fe(e,"x","sqrt");return ht.runKernelFunc(function(r,a){var s=r.sqrt(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.toFloat().sqrt().mul(2))}}})}}),$Oe=tt({step_:function(e,t){t===void 0&&(t=0);var r=Fe(e,"x","step");return ht.runKernelFunc(function(a){return a.step(r,t)},{$x:r},function(a){return{$x:function(){return Va(a)}}})}}),VOe=tt({tan_:function(e){var t=Fe(e,"x","tan");return ht.runKernelFunc(function(r,a){var s=r.tan(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return r.div(s.cos().square())}}})}}),qOe=tt({tanh_:function(e){var t=Fe(e,"x","tanh");return ht.runKernelFunc(function(r,a){var s=r.tanh(t);return a([s]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return Nr(1).sub(s.square()).mulStrict(r)}}},"Tanh",{},null,[!0])}});function CK(e,t,r,a,s,i){var o,l,c=Fe(e,"x","batchNorm"),d=Fe(t,"mean","batchNorm"),u=Fe(r,"variance","batchNorm");return s!=null&&(o=Fe(s,"scale","batchNorm")),a!=null&&(l=Fe(a,"offset","batchNorm")),We(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),We(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+d.rank+"."}),We(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),o!=null&&We(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),l!=null&&We(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),R1(c,d,u,l,o,i)}function kK(e,t,r,a,s,i){var o,l,c=Fe(e,"x","batchNorm"),d=Fe(t,"mean","batchNorm"),u=Fe(r,"variance","batchNorm");return s!=null&&(o=Fe(s,"scale","batchNorm")),a!=null&&(l=Fe(a,"offset","batchNorm")),We(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),We(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+d.rank+"."}),We(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),o!=null&&We(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),l!=null&&We(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),R1(c,d,u,l,o,i)}function _K(e,t,r,a,s,i){var o,l,c=Fe(e,"x","batchNorm"),d=Fe(t,"mean","batchNorm"),u=Fe(r,"variance","batchNorm");return s!=null&&(o=Fe(s,"scale","batchNorm")),a!=null&&(l=Fe(a,"offset","batchNorm")),We(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),We(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+d.rank+"."}),We(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),o!=null&&We(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),l!=null&&We(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),R1(c,d,u,l,o,i)}function R1(e,t,r,a,s,i){i==null&&(i=.001);var o,l,c,d=Fe(e,"x","batchNorm"),u=Fe(t,"mean","batchNorm"),h=Fe(r,"variance","batchNorm");s!=null&&(o=Fe(s,"scale","batchNorm")),a!=null&&(l=Fe(a,"offset","batchNorm")),We(u.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),We(l==null||u.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),We(o==null||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=d.rank===0||d.rank===1?d.as4D(1,1,1,d.size):d.rank===2?d.as4D(1,1,d.shape[0],d.shape[1]):d.rank===3?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var f=[d,u,h,o];return ht.runKernelFunc(function(p,x){var g=p.batchNormalization(c,DN(u),DN(h),i,DN(o),DN(l));return x([d,u,h,o]),g},{x:d,mean:u,variance:h,scale:o,offset:l},function(p,x){var g=x,b=g[0],y=g[1],S=g[2],w=g[3],k=w??Nr(1),C=yi(y.shape,c.shape),D=[];if(y.rank===1){for(var E=0;E<c.shape.length-1;++E)D.push(c.shape[E]);D.push(1)}var A=b.sub(y),I=p.mul(k),L=wK(S.add(Nr(i))),P=L.mul(L).mul(L).mul(Nr(-.5));return{x:function(){return y.rank===1?p.mul(S0(L.as4D(1,1,1,y.shape[0]),D)).mul(k).reshape(b.shape):p.mul(L).mul(k).reshape(b.shape)},mean:function(){var O=L.mul(Nr(-1)).mul(I);return y.rank===1&&(O=O.sum(C)),O.reshape(y.shape)},variance:function(){var O=P.mul(A).mul(I);return y.rank===1&&(O=O.sum(C)),O.reshape(y.shape)},scale:function(){var O=A.mul(L),Y=p.mul(O);return y.rank===1&&(Y=Y.sum(C)),Y.reshape(y.shape)},offset:function(){var O=p;return y.rank===1&&(O=O.sum(C)),O.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},f).reshape(d.shape)}function DN(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function hC(){VY("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var zOe=tt({batchNormalization2d_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),hC(),CK(e,t,r,i,s,a)}}),HOe=tt({batchNormalization3d_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),hC(),kK(e,t,r,i,s,a)}}),WOe=tt({batchNormalization4d_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),hC(),_K(e,t,r,i,s,a)}}),GOe=tt({batchNormalization_:function(e,t,r,a,s,i){return a===void 0&&(a=.001),hC(),R1(e,t,r,i,s,a)}}),EK=tt({batchNorm_:R1}),YOe=tt({batchNorm2d_:CK}),KOe=tt({batchNorm3d_:kK}),XOe=tt({batchNorm4d_:_K}),fC=tt({logicalAnd_:function(e,t){var r=Fe(e,"a","logicalAnd","bool"),a=Fe(t,"b","logicalAnd","bool");return Ra(r.shape,a.shape),ht.runKernelFunc(function(s){return s.logicalAnd(r,a)},{a:r,b:a},null,"LogicalAnd")}}),QOe=tt({logicalNot_:function(e){var t=Fe(e,"x","logicalNot","bool");return ht.runKernelFunc(function(r){return r.logicalNot(t)},{$x:t})}}),DK=tt({logicalOr_:function(e,t){var r=Fe(e,"a","logicalOr","bool"),a=Fe(t,"b","logicalOr","bool");return Ra(r.shape,a.shape),ht.runKernelFunc(function(s){return s.logicalOr(r,a)},{$a:r,$b:a})}}),JOe=tt({logicalXor_:function(e,t){var r=Fe(e,"a","logicalXor","bool"),a=Fe(t,"b","logicalXor","bool");return Ra(r.shape,a.shape),DK(e,t).logicalAnd(fC(e,t).logicalNot())}}),$x=tt({where_:function(e,t,r){var a=Fe(t,"a","where"),s=Fe(r,"b","where"),i=Fe(e,"condition","where","bool");return fn(a.shape,s.shape,"Error in where: "),i.rank===1?We(i.shape[0]===a.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):fn(i.shape,s.shape,"Error in where: "),ht.runKernelFunc(function(o,l){var c=o.select(i,a,s);return l([i]),c},{$condition:i,$a:a,$b:s},function(o,l){var c=l[0];return{$condition:function(){return Va(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),AK=function(e){return Pr(this,void 0,void 0,function(){var t,r,a;return Or(this,function(s){switch(s.label){case 0:return[4,(t=Fe(e,"condition","whereAsync","bool")).data()];case 1:return r=s.sent(),a=CI(t.shape,r),e!==t&&t.dispose(),[2,a]}})})},Ta=tt({add_:function(e,t){var r,a=Fe(e,"a","add"),s=Fe(t,"b","add");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o){return o.add(a,s)},{a,b:s},function(o){return{a:function(){var l=o,c=yi(a.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)},b:function(){var l=o,c=yi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Add")}}),ZOe=tt({addN_:function(e){We(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),We(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(s,i){return Fe(s,"tensors"+i,"addN")}),r=t[0];t.forEach(function(s){if(s.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(s){if(!Fi(s.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var a=t;return ht.runKernelFunc(function(s){return s.addN(t)},a,function(s){var i={};return t.forEach(function(o,l){i[l]=function(){return s.clone()}}),i},"AddN")}}),eMe=tt({addStrict_:function(e,t){var r=Fe(e,"a","addStrict"),a=Fe(t,"b","addStrict");return fn(r.shape,a.shape,"Error in addStrict: "),r.add(a)}}),tMe=tt({atan2_:function(e,t){var r,a=Fe(e,"a","atan2"),s=Fe(t,"b","atan2");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.atan2(a,s);return l([a,s]),c},{$a:a,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=Ta(c.square(),d.square()),h=o.mul(d.div(u)),f=yi(c.shape,i);return f.length>0&&(h=h.sum(f)),h.reshape(c.shape)},$b:function(){var u=Ta(c.square(),d.square()),h=F2(o.mul(c.div(u))),f=yi(d.shape,i);return f.length>0&&(h=h.sum(f)),h.reshape(d.shape)}}})}}),Ad=tt({div_:function(e,t){var r,a=Fe(e,"a","div"),s=Fe(t,"b","div");if(r=ps(a,s),a=r[0],s=r[1],a.dtype==="int32"&&s.dtype==="int32")return TK(a,s);var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.realDivide(a,s);return l([a,s]),c},{a,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=yi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=yi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var f=d.square();return u.div(f.toFloat()).neg()}}},"Div")}}),rMe=tt({divNoNan_:function(e,t){var r,a=Fe(e,"a","div"),s=Fe(t,"b","div");a=(r=ps(a,s))[0],s=r[1];var i=Ad(a,s),o=Va(i),l=s.equal(o);return $x(l,o,i)}}),aMe=tt({divStrict_:function(e,t){var r=Fe(e,"a","div"),a=Fe(t,"b","div");return fn(r.shape,a.shape,"Error in divideStrict: "),r.div(a)}}),TK=tt({floorDiv_:function(e,t){var r,a=Fe(e,"a","floorDiv"),s=Fe(t,"b","floorDiv");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.floorDiv(a,s);return l([a,s]),c},{a,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=yi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=yi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var f=d.square();return u.div(f.toFloat()).neg()}}},"FloorDiv")}}),AI=tt({maximum_:function(e,t){var r,a=Fe(e,"a","maximum"),s=Fe(t,"b","maximum");return r=ps(a,s),a=r[0],s=r[1],a.dtype==="bool"&&(a=a.toInt(),s=s.toInt()),Ra(a.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.maximum(a,s);return o([a,s]),l},{a,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.greaterEqual(c).toFloat())},b:function(){return i.mul(l.less(c).toFloat())}}},"Maximum")}}),nMe=tt({maximumStrict_:function(e,t){var r=Fe(e,"a","maximumStrict"),a=Fe(t,"b","maximumStrict");return fn(r.shape,a.shape,"Error in maximumStrict: "),r.maximum(a)}}),IK=tt({minimum_:function(e,t){var r,a=Fe(e,"a","minimum"),s=Fe(t,"b","minimum");return r=ps(a,s),a=r[0],s=r[1],a.dtype==="bool"&&(a=a.toInt(),s=s.toInt()),Ra(a.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.minimum(a,s);return o([a,s]),l},{a,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.lessEqual(c).toFloat())},b:function(){return i.mul(l.greater(c).toFloat())}}},"Minimum")}}),sMe=tt({minimumStrict_:function(e,t){var r=Fe(e,"a","minimumStrict"),a=Fe(t,"b","minimumStrict");return fn(r.shape,a.shape,"Error in minimumStrict: "),r.minimum(a)}}),iMe=tt({mod_:function(e,t){var r,a=Fe(e,"a","mod"),s=Fe(t,"b","mod");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.mod(a,s);return l([a,s]),c},{$a:a,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=yi(c.shape,i);return u.length>0?o.sum(u).reshape(c.shape):o},$b:function(){var u=o.mul(c.div(d).floor().neg()),h=yi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}})}}),oMe=tt({modStrict_:function(e,t){var r=Fe(e,"a","modStrict"),a=Fe(t,"b","modStrict");return fn(r.shape,a.shape,"Error in modStrict: "),r.mod(a)}}),Oo=tt({mul_:function(e,t){var r,a=Fe(e,"a","mul"),s=Fe(t,"b","mul");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.multiply(a,s);return l([a,s]),c},{a,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.mul(d.toFloat()),h=yi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=yi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}},"Mul")}}),lMe=tt({mulStrict_:function(e,t){var r=Fe(e,"a","mul"),a=Fe(t,"b","mul");return fn(r.shape,a.shape,"Error in multiplyStrict: "),r.mul(a)}}),L2=tt({pow_:function(e,t){var r,a=Fe(e,"base","pow"),s=Fe(t,"exp","pow");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape),o=[a,s];return ht.runKernelFunc(function(l,c){var d=l.pow(a,s);return c([a,s,d]),d},{a,b:s},function(l,c){var d=c[0],u=c[1],h=c[2];return{a:function(){var f=u.toFloat(),p=l.mul(f.mul(d.pow(f.sub(Nr(1))))),x=yi(d.shape,i);return x.length>0&&(p=p.sum(x)),p.reshape(d.shape)},b:function(){var f=d.greater(0),p=d.log().where(f,Va(d)),x=l.mul(h.mul(p)),g=yi(u.shape,i);return g.length>0&&(x=x.sum(g)),x.reshape(u.shape)}}},"Pow",{},o,[!0])}}),cMe=tt({powStrict_:function(e,t){return fn(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),dMe=tt({squaredDifferenceStrict_:function(e,t){var r=Fe(e,"a","squaredDifferenceStrict"),a=Fe(t,"b","squaredDifferenceStrict");return fn(r.shape,a.shape,"Error in squaredDifferenceStrict: "),r.squaredDifference(a)}}),ji=tt({sub_:function(e,t){var r,a=Fe(e,"a","sub"),s=Fe(t,"b","sub");r=ps(a,s),a=r[0],s=r[1];var i=Ra(a.shape,s.shape);return ht.runKernelFunc(function(o){return o.subtract(a,s)},{a,b:s},function(o){return{a:function(){var l=o,c=yi(a.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)},b:function(){var l=o,c=yi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.neg().reshape(s.shape)}}},"Sub")}}),uMe=tt({subStrict_:function(e,t){var r=Fe(e,"a","subStrict"),a=Fe(t,"b","subStrict");return fn(r.shape,a.shape,"Error in subStrict: "),r.sub(a)}}),PK=tt({equal_:function(e,t){var r,a=Fe(e,"a","equal"),s=Fe(t,"b","equal");return r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape),ht.runKernelFunc(function(i){return i.equal(a,s)},{$a:a,$b:s})}}),hMe=tt({equalStrict_:function(e,t){var r=Fe(e,"a","equalStrict"),a=Fe(t,"b","equalStrict");return fn(r.shape,a.shape,"Error in equalStrict: "),r.equal(a)}}),fMe=tt({greater_:function(e,t){var r,a=Fe(e,"a","greater"),s=Fe(t,"b","greater");return r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape),ht.runKernelFunc(function(i){return i.greater(a,s)},{a,b:s},null,"Greater")}}),OK=tt({greaterEqual_:function(e,t){var r,a=Fe(e,"a","greaterEqual"),s=Fe(t,"b","greaterEqual");return r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.greaterEqual(a,s);return o([a,s]),l},{a,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return Va(l)},b:function(){return Va(c)}}},"GreaterEqual")}}),mMe=tt({greaterEqualStrict_:function(e,t){var r=Fe(e,"a","greaterEqualStrict"),a=Fe(t,"b","greaterEqualStrict");return fn(r.shape,a.shape,"Error in greaterEqualStrict: "),r.greaterEqual(a)}}),pMe=tt({greaterStrict_:function(e,t){var r=Fe(e,"a","greaterStrict"),a=Fe(t,"b","greaterStrict");return fn(r.shape,a.shape,"Error in greaterStrict: "),r.greater(a)}}),xMe=tt({less_:function(e,t){var r,a=Fe(e,"a","less"),s=Fe(t,"b","less");return r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape),ht.runKernelFunc(function(i){return i.less(a,s)},{a,b:s},null,"Less")}}),vMe=tt({lessEqual_:function(e,t){var r,a=Fe(e,"a","lessEqual"),s=Fe(t,"b","lessEqual");return r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.lessEqual(a,s);return o([a,s]),l},{a,b:s},null,"LessEqual")}}),gMe=tt({lessEqualStrict_:function(e,t){var r=Fe(e,"a","lessEqualStrict"),a=Fe(t,"b","lessEqualStrict");return fn(r.shape,a.shape,"Error in lessEqualStrict: "),r.lessEqual(a)}}),bMe=tt({lessStrict_:function(e,t){var r=Fe(e,"a","lessStrict"),a=Fe(t,"b","lessStrict");return fn(r.shape,a.shape,"Error in lessStrict: "),r.less(a)}}),yMe=tt({notEqual_:function(e,t){var r,a=Fe(e,"a","notEqual"),s=Fe(t,"b","notEqual");return r=ps(a,s),a=r[0],s=r[1],Ra(a.shape,s.shape),ht.runKernelFunc(function(i){return i.notEqual(a,s)},{a,b:s},null,"NotEqual")}}),jMe=tt({notEqualStrict_:function(e,t){var r=Fe(e,"a","notEqualStrict"),a=Fe(t,"b","notEqualStrict");return fn(r.shape,a.shape,"Error in notEqualStrict: "),r.notEqual(a)}});function F7(e,t){for(var r=[],a=e;a<t;++a)r.push(a);return r}function L7(e){for(var t=[],r=0;r<e.length;++r)for(var a=0;a<e[r].length;++a)t.push(e[r][a]);return t}var TI=tt({gather_:function(e,t,r){r===void 0&&(r=0);var a=Fe(e,"x","gather"),s=Fe(t,"indices","gather","int32");r=Si(r,a.shape)[0];var i=function(o,l,c){for(var d=o.shape[c],u=[],h=1,f=1,p=0;p<c;p++)u.push(o.shape[p]),h*=o.shape[p];for(p=0;p<l.rank;p++)u.push(l.shape[p]);for(p=c+1;p<o.rank;p++)u.push(o.shape[p]),f*=o.shape[p];return{batchSize:h,sliceSize:f,dimSize:d,outputShape:u}}(a,s,r);return ht.runKernelFunc(function(o,l){var c=o.gather(a,s.flatten(),r);return l([s]),c},{x:a,indices:s},function(o,l){var c=l[0];return{x:function(){var d=a.shape,u=c.size,h=d.slice(0,r),f=h.length,p=d.slice(r,d.length).slice(1),x=p.length,g=F7(0,f),b=F7(f+1,f+1+x),y=L7([h,[u],p]),S=o.reshape(y),w=c.reshape([u]),k=L7([[f],g,b]),C=S.transpose(k),D=MK(C,w,a.shape[r]),E=vI(k);return D=D.transpose(E)},indices:function(){return c}}},"Gather",{axis:r}).reshape(i.outputShape)}}),MK=tt({unsortedSegmentSum_:function(e,t,r){var a=Fe(e,"x","unsortedSegmentSum"),s=Fe(t,"segmentIds","unsortedSegmentSum","int32");return We(Ws(r),function(){return"numSegments must be of dtype int"}),ht.runKernelFunc(function(i,o){var l=i.unsortedSegmentSum(a,s,r);return o([s]),l},{$x:a},function(i,o){var l=o[0];return{$x:function(){return function(c,d){for(var u=AI(d,Va(d)),h=TI(c,u),f=OK(d,Nr(0,"int32")),p=h.rank-f.rank,x=0;x<p;++x)f=zc(f,x+1);f=fC(f,_g(h.shape,"bool"));var g=Va(h);return $x(f,h,g)}(i,l)}}})}}),NMe=function(e,t,r){return Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h,f,p,x,g;return Or(this,function(b){switch(b.label){case 0:for(a=Fe(e,"tensor","boolMask"),s=Fe(t,"mask","boolMask","bool"),i=r??0,o=s.rank,l=a.shape,We(o>0,function(){return"mask cannot be scalar"}),fn(l.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,d=i;d<i+o;d++)c*=l[d];return u=l.slice(0,i).concat([c],l.slice(i+o)),h=a.reshape(u),f=s.reshape([-1]),[4,AK(f)];case 1:return p=b.sent(),x=p.squeeze([1]),g=TI(h,x,i),e!==a&&a.dispose(),t!==s&&s.dispose(),x.dispose(),h.dispose(),f.dispose(),p.dispose(),[2,g]}})})};function RK(e,t,r,a,s,i,o){i===void 0&&(i="NHWC"),We(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var l=e,c=t,d=!1;t.rank===3&&(d=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),l=[1,e[0],e[1],e[2]]),We(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),We(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),We(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank});var u=i==="NHWC"?l[3]:l[1],h=i==="NHWC"?c.shape[3]:c.shape[1];We(u===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+r.shape[2]+"."}),We(h===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+r.shape[3]+"."}),o!=null&&We(Ws(s),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var f=NI(i),p=sv(l,r.shape,a,1,s,o,!1,f),x=ht.runKernelFunc(function(g,b){var y=g.conv2dDerInput(c,r,p);return b([r,c]),y},{dy4D:c,filter:r},function(g,b){var y=b[0],S=b[1];return{dy4D:function(){return nd(g,y,a,s,i,1,o)},filter:function(){return II(g,S,y.shape,a,s,i,o)}}});return d?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}function gD(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),r=t[0],a=t[1],s=t[2];return r===1&&a===1&&s===1}function FK(e,t,r,a,s){We(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,l=!1;t.rank===4&&(l=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],d=o.shape[4];We(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),We(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),We(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+r.rank}),We(c===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+r.shape[3]+"."}),We(d===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+d+") must match output depth for filter "+r.shape[4]+"."});var u=M2(i,r.shape,a,1,s),h=ht.runKernelFunc(function(f){return f.conv3dDerInput(o,r,u)},{dy5D:o});return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var wMe=tt({conv1d_:function(e,t,r,a,s,i,o){s===void 0&&(s="NWC"),i===void 0&&(i=1);var l=Fe(e,"x","conv1d"),c=Fe(t,"filter","conv1d"),d=l,u=!1;l.rank===2&&(u=!0,d=l.as3D(1,l.shape[0],l.shape[1])),We(d.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+d.rank+"."}),We(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&We(Ws(a),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}),We(d.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+d.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),We(kl(r,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+i+"'"}),We(s==="NWC",function(){return"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."});var h=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),f=d.as4D(d.shape[0],1,d.shape[1],d.shape[2]),p=nd(f,h,[1,r],a,"NHWC",[1,i],o);return u?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),nd=tt({conv2d_:function(e,t,r,a,s,i,o){s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]);var l=Fe(e,"x","conv2d"),c=Fe(t,"filter","conv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),We(d.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."}),We(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&We(Ws(a),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var h=s==="NHWC"?d.shape[3]:d.shape[1];We(h===c.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+c.shape[2]+"."}),We(kl(r,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var f=NI(s),p=sv(d.shape,c.shape,r,i,a,o,!1,f),x=[c,d],g=ht.runKernelFunc(function(b,y){var S=b.conv2d(d,c,p);return y([c,d]),S},{x:d,filter:c},function(b,y){var S=y,w=S[0],k=S[1];return We(eg(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return LK(k.shape,b,w,r,a,s)},filter:function(){return II(k,b,w.shape,r,a,s)}}},"Conv2D",p,x);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),SMe=tt({conv3d_:function(e,t,r,a,s,i){s===void 0&&(s="NDHWC"),i===void 0&&(i=[1,1,1]);var o=Fe(e,"x","conv3d"),l=Fe(t,"filter","conv3d"),c=o,d=!1;o.rank===4&&(d=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),We(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),We(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),We(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),We(function(f,p){return gD(f)||gD(p)}(r,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),We(s==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+s+" but only NDHWC is currently supported."});var u=M2(c.shape,l.shape,r,i,a),h=ht.runKernelFunc(function(f,p){var x=f.conv3d(c,l,u);return p([c,l]),x},{x:c,$filter:l},function(f,p){We(gD(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var x=p[0],g=p[1];return{x:function(){return FK(x.shape,f,g,r,a)},$filter:function(){return function(b,y,S,w,k){var C=b;b.rank===4&&(C=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var D=y;D.rank===4&&(D=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),We(C.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+C.shape+"."}),We(D.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."}),We(S.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."}),We(C.shape[4]===S[3],function(){return"Error in conv3dDerFilter: depth of input "+C.shape[4]+") must match input depth in filter ("+S[3]+"."}),We(D.shape[4]===S[4],function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+S[4]+")."});var E=M2(C.shape,S,w,1,k);return ht.runKernelFunc(function(A){return A.conv3dDerFilter(C,D,E)},{x5D:C,dy5D:D})}(x,f,g.shape,r,a)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),II=tt({conv2dDerFilter_:function(e,t,r,a,s,i,o){i===void 0&&(i="NHWC");var l=e;e.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;c.rank===3&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),We(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),We(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),We(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1],u=i==="NHWC"?c.shape[3]:c.shape[1];We(d===r[2],function(){return"Error in conv2dDerFilter: depth of input "+d+") must match input depth in filter ("+r[2]+"."}),We(u===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+r[3]+")."}),o!=null&&We(Ws(s),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var h=NI(i),f=sv(l.shape,r,a,1,s,o,!1,h);return ht.runKernelFunc(function(p){return p.conv2dDerFilter(l,c,f)},{x4D:l,dy4D:c})}}),LK=tt({conv2dDerInput_:RK}),mC=tt({depthwiseConv2d_:function(e,t,r,a,s,i,o){i===void 0&&(i=[1,1]);var l=Fe(e,"x","depthwiseConv2d"),c=Fe(t,"filter","depthwiseConv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),We(d.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+d.rank+"."}),We(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),We(d.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+d.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),We(kl(r,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),o!=null&&We(Ws(a),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var h=sv(d.shape,c.shape,r,i,a,o,!0),f=[d,c],p=ht.runKernelFunc(function(x,g){var b=x.depthwiseConv2D(d,c,h);return g([d,c]),b},{x:d,filter:c},function(x,g){We(eg(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var b=g[0],y=g[1];return{x:function(){return BK(b.shape,x,y,h)},filter:function(){return UK(b,x,y.shape,h)}}},"DepthwiseConv2dNative",h,f);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),BK=tt({depthwiseConv2dDerInput_:function(e,t,r,a){var s=t,i=!1;t.rank===3&&(i=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=ht.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(s,r,a)},{dy4D:s});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),UK=tt({depthwiseConv2dDerFilter_:function(e,t,r,a){var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ht.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(s,i,a)},{x4D:s,dy4D:i})}}),PI=tt({separableConv2d_:function(e,t,r,a,s,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var l=Fe(e,"x","separableConv2d"),c=Fe(t,"depthwiseFilter","separableConv2d"),d=Fe(r,"pointwiseFilter","separableConv2d"),u=l,h=!1;if(l.rank===3&&(h=!0,u=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");We(u.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),We(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),We(d.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),We(d.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+d.shape[0]+"."}),We(d.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+d.shape[1]+"."});var f=c.shape[2],p=c.shape[3];We(d.shape[2]===f*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*p+", but got "+d.shape[2]+"."});var x=mC(u,c,a,s,o,i),g=nd(x,d,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),CMe=tt({conv2dTranspose_:function(e,t,r,a,s,i){return RK(r,Fe(e,"x","conv2dTranspose"),Fe(t,"filter","conv2dTranspose"),a,s,"NHWC",i)}}),kMe=tt({conv3dTranspose_:function(e,t,r,a,s){return FK(r,Fe(e,"x","conv3dTranspose"),Fe(t,"filter","conv3dTranspose"),a,s)}}),pC=tt({matMul_:function(e,t,r,a){var s;r===void 0&&(r=!1),a===void 0&&(a=!1);var i=Fe(e,"a","matMul"),o=Fe(t,"b","matMul");s=ps(i,o),i=s[0],o=s[1];var l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=a?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=a?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),f=o.shape.slice(0,-2),p=Lr(h),x=Lr(f);We(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),We(Fi(h,f),function(){return"Error in matMul: outer dimensions ("+h+") and ("+f+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),We(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+r+" and transposeB="+a+" must match."});var g=i.shape.slice(0,-2).concat([d,u]),b=r?i.as3D(p,l,d):i.as3D(p,d,l),y=a?o.as3D(x,u,c):o.as3D(x,c,u),S={transposeA:r,transposeB:a};return ht.runKernelFunc(function(w,k){var C=w.batchMatMul(b,y,r,a);return k([b,y]),C},{a:b,b:y},function(w,k){var C=k,D=C[0],E=C[1];return r||a?!r&&a?{a:function(){return w.matMul(E,!1,!1)},b:function(){return w.matMul(D,!0,!1)}}:r&&!a?{a:function(){return E.matMul(w,!1,!0)},b:function(){return D.matMul(w,!1,!1)}}:{a:function(){return E.matMul(w,!0,!0)},b:function(){return w.matMul(D,!0,!0)}}:{a:function(){return w.matMul(E,!1,!0)},b:function(){return D.matMul(w,!0,!1)}}},"BatchMatMul",S).reshape(g)}}),_Me=tt({dot_:function(e,t){var r=Fe(e,"t1","dot"),a=Fe(t,"t2","dot");We(!(r.rank!==1&&r.rank!==2||a.rank!==1&&a.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+r.rank+" and "+a.rank+"."});var s=r.rank===1?r.size:r.shape[1],i=a.rank===1?a.size:a.shape[0];return We(s===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+s+" and "+i+"."}),r.rank===1&&a.rank===1?r.as2D(1,-1).matMul(a.as2D(-1,1)).asScalar():r.rank===1&&a.rank===2?r.as2D(1,-1).matMul(a.as2D(a.shape[0],a.shape[1])).as1D():r.rank===2&&a.rank===1?r.matMul(a.as2D(-1,1)).as1D():r.matMul(a.as2D(a.shape[0],a.shape[1]))}}),EMe=tt({outerProduct_:function(e,t){var r=Fe(e,"v1","outerProduct"),a=Fe(t,"v2","outerProduct");return We(r.rank===1&&a.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+r.rank+" and "+a.rank+"."}),r.as2D(-1,1).matMul(a.as2D(1,-1))}}),F1=tt({reverse_:function(e,t){var r=Fe(e,"x","reverse");if(r.rank===0)return r.clone();var a=Si(t,r.shape);return ht.runKernelFunc(function(s){return s.reverse(r,a)},{$x:r},function(s){return{$x:function(){return s.reverse(a)}}}).reshapeAs(r)}}),DMe=tt({reverse1d_:function(e){var t=Fe(e,"x","reverse");return We(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),F1(t,0)}}),AMe=tt({reverse2d_:function(e,t){var r=Fe(e,"x","reverse");return We(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),F1(r,t)}}),TMe=tt({reverse3d_:function(e,t){var r=Fe(e,"x","reverse");return We(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),F1(r,t)}}),IMe=tt({reverse4d_:function(e,t){var r=Fe(e,"x","reverse");return We(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),F1(r,t)}});function $K(e,t,r,a,s,i){var o=Fe(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),We(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),We(kl(r,a),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}),i!=null&&We(Ws(s),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ky(l.shape,t,r,a,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Fi(d.inShape,d.outShape))return o.clone();var u=[l],h=ht.runKernelFunc(function(f,p){var x=f.maxPool(l,d);return p([l,x]),x},{x:l},function(f,p){var x=p[0],g=p[1];return{x:function(){return function(b,y,S,w,k,C,D,E){var A=Fe(b,"dy","maxPoolBackprop"),I=Fe(y,"input","maxPoolBackprop"),L=Fe(S,"output","maxPoolBackprop");We(I.rank===A.rank,function(){return"Rank of input ("+I.rank+") does not match rank of dy ("+A.rank+")"}),We(kl(k,C),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+C+"'"}),We(A.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+A.rank+"."}),We(I.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+I.rank+"."});var P=Ky(I.shape,w,k,C,D,E);return ht.runKernelFunc(function(O){return O.maxPoolBackprop(A,I,L,P)},{$dy:A,$input:I})}(f,x,g,t,r,a,s)}}},"MaxPool",d,u);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function VK(e,t,r,a,s,i){var o=Fe(e,"x","avgPool","float32");We(kl(r,a),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"});var l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),We(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),i!=null&&We(Ws(s),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ky(l.shape,t,r,a,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Fi(d.inShape,d.outShape))return o.clone();var u=ht.runKernelFunc(function(h){return h.avgPool(l,d)},{x:l},function(h){return{x:function(){return function(f,p,x,g,b,y){var S=Fe(f,"dy","avgPoolBackprop"),w=Fe(p,"input","avgPoolBackprop");We(w.rank===S.rank,function(){return"Rank of input ("+w.rank+") does not match rank of dy ("+S.rank+")"}),We(kl(g,b),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+b+"'"});var k=w,C=S,D=!1;w.rank===3&&(D=!0,k=w.as4D(1,w.shape[0],w.shape[1],w.shape[2]),C=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),We(C.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),We(k.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var E=Ky(k.shape,x,g,b,y),A=ht.runKernelFunc(function(I){return I.avgPoolBackprop(C,k,E)},{dy4D:C,input4D:k});return D?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}(h,l,t,r,a,s)}}},"AvgPool",d);return u=u.cast(o.dtype),c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Ai=tt({maxPool_:function(e,t,r,a,s){return $K(e,t,r,1,a,s)}}),L1=tt({avgPool_:function(e,t,r,a,s){return VK(e,t,r,1,a,s)}}),PMe=tt({pool_:function(e,t,r,a,s,i){s==null&&(s=[1,1]),i==null&&(i=1),a===0&&(a="valid");var o=Fe(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),We(kl(i,s),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"});var d,u=Ky(l.shape,t,i,s,a),h=[u.dilationHeight,u.dilationWidth];d=a==="same"?function(k,C){var D=k.map(function(I,L){return I+(I-1)*(C[L]-1)}).map(function(I){return I-1}),E=D.map(function(I){return Math.floor(I/2)}),A=D.map(function(I,L){return I-E[L]});return D.map(function(I,L){return[E[L],A[L]]})}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var f=h[0]===1&&h[1]===1,p=function(k,C,D){var E=D.map(function(q){return q[0]}),A=D.map(function(q){return q[1]}),I=k.concat(E,A),L=C.map(function(q,K){return(q-I[K]%q)%q}),P=A.map(function(q,K){return q+L[K]}),O=C.map(function(q,K){return[E[K],P[K]]}),Y=C.map(function(q,K){return[0,L[K]]});return[O,Y]}([u.inHeight,u.inWidth],h,d),x=p[0],g=p[1],b=f?a:"valid",y=f?l:YY(l,h,x),S=(r==="avg"?function(){return VK(y,t,i,1,b)}:function(){return $K(y,t,i,1,b)})(),w=f?S:HY(S,h,g);return c?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),OMe=tt({maxPool3d_:function(e,t,r,a,s,i,o){i===void 0&&(i="NDHWC");var l=Fe(e,"x","maxPool3d"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),We(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),We(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),We(kl(r,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&We(Ws(a),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var u=O2(c.shape,t,r,o,a,s,i),h=ht.runKernelFunc(function(f,p){var x=f.maxPool3d(c,u);return p([c,x]),x},{x:c},function(f,p){var x=p[0],g=p[1];return{x:function(){return function(b,y,S,w,k,C,D,E){var A=Fe(b,"dy","maxPool3dBackprop"),I=Fe(y,"input","maxPool3dBackprop"),L=Fe(S,"output","maxPool3dBackprop"),P=A,O=I,Y=L,q=!1;I.rank===4&&(q=!0,P=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),O=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),Y=L.as5D(1,L.shape[0],L.shape[1],L.shape[2],L.shape[3])),We(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),We(O.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+O.rank+"."}),We(Y.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Y.rank+"."}),C==null&&(C=[1,1,1]),We(kl(k,C),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+C+"'"}),E!=null&&We(Ws(D),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+D+"."});var K=O2(O.shape,w,k,C,D,E),U=ht.runKernelFunc(function(J){return J.maxPool3dBackprop(P,O,Y,K)},{dy5D:P,input5D:O});return q?U.as4D(U.shape[1],U.shape[2],U.shape[3],U.shape[4]):U}(f,x,g,t,r,o,a,s)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),MMe=tt({avgPool3d_:function(e,t,r,a,s,i,o){i===void 0&&(i="NDHWC");var l=Fe(e,"x","avgPool3d","float32"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),We(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),We(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),We(kl(r,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&We(Ws(a),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var u=O2(c.shape,t,r,o,a,s,i),h=ht.runKernelFunc(function(f){return f.avgPool3d(c,u)},{x:c},function(f){return{x:function(){return function(p,x,g,b,y,S,w){var k=Fe(p,"dy","avgPool3dBackprop"),C=Fe(x,"input","avgPool3dBackprop"),D=k,E=C,A=!1;C.rank===4&&(A=!0,D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),E=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),We(D.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."}),We(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),We(kl(b,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+y+"'"}),w!=null&&We(Ws(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+S+"."});var I=O2(E.shape,g,b,y,S,w),L=ht.runKernelFunc(function(P){return P.avgPool3dBackprop(D,E,I)},{dy5D:D,input5D:E});return A?L.as4D(L.shape[1],L.shape[2],L.shape[3],L.shape[4]):L}(f,c,t,r,o,a,s)}}});return h=h.cast(c.dtype),d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),eh=tt({slice_:function(e,t,r){var a,s,i=Fe(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(a=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(c){We(c!==-1,function(){return"slice() does not support negative begin indexing."})}),s=(s=r==null?new Array(i.rank).fill(-1):typeof r=="number"?[r].concat(new Array(i.rank-1).fill(-1)):r.length<i.rank?r.concat(new Array(i.rank-r.length).fill(-1)):r).map(function(c,d){return c>=0?c:(We(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+d+"."}),i.shape[d]-a[d])}),cIe(i,a,s);var o=i.shape,l={begin:a,size:s};return ht.runKernelFunc(function(c){return c.slice(i,a,s)},{x:i},function(c){for(var d=[],u=0;u<c.rank;u++)d.push([a[u],o[u]-a[u]-s[u]]);return{x:function(){return c.pad(d)}}},"Slice",l)}}),RMe=tt({slice1d_:function(e,t,r){var a=Fe(e,"x","slice1d");return We(a.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,[t],[r])}}),FMe=tt({slice2d_:function(e,t,r){var a=Fe(e,"x","slice2d");return We(a.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,t,r)}}),qK=tt({slice3d_:function(e,t,r){var a=Fe(e,"x","slice3d");return We(a.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,t,r)}}),LMe=tt({slice4d_:function(e,t,r){var a=Fe(e,"x","slice4d");return We(a.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+a.rank+" tensor"}),eh(a,t,r)}});function zK(e,t,r,a,s){return t.rank<r.rank&&(t=t.reshape(Cl(t.shape,a))),e.rank<r.rank&&(e=e.reshape(Cl(e.shape,a))),{x:function(){var i=e.mul(r.equal(t).cast(e.dtype));return s==null?i:i.transpose(s)}}}var BMe=tt({all_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","all","bool"),s=Si(t,a.shape),i=s,o=lh(i,a.rank);o!=null&&(a=a.transpose(o),i=ch(i.length,a.rank));var l=ht.runKernelFunc(function(d){return d.all(a,i)},{$x:a});if(r){var c=Cl(l.shape,s);return l.reshape(c)}return l}}),UMe=tt({any_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","any","bool"),s=Si(t,a.shape),i=s,o=lh(i,a.rank);o!=null&&(a=a.transpose(o),i=ch(i.length,a.rank));var l=ht.runKernelFunc(function(d){return d.any(a,i)},{$x:a});if(r){var c=Cl(l.shape,s);return l.reshape(c)}return l}}),$Me=tt({argMax_:function(e,t){t===void 0&&(t=0);var r=Fe(e,"x","argMax");t==null&&(t=0);var a=Si(t,r.shape),s=lh(a,r.rank);s!=null&&(r=r.transpose(s),a=ch(a.length,r.rank));var i={axis:a[0]},o=[r];return ht.runKernelFunc(function(l,c){var d=l.argMax(r,a[0]);return c([r]),d},{x:r},function(l,c){var d=c[0];return{x:function(){return Va(d)}}},"ArgMax",i,o)}}),VMe=tt({argMin_:function(e,t){t===void 0&&(t=0);var r=Fe(e,"x","argMin");t==null&&(t=0);var a=Si(t,r.shape),s=lh(a,r.rank);return s!=null&&(r=r.transpose(s),a=ch(a.length,r.rank)),ht.runKernelFunc(function(i,o){var l=i.argMin(r,a[0]);return o([r]),l},{$x:r},function(i,o){var l=o[0];return{$x:function(){return Va(l)}}})}}),qMe=tt({logSumExp_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","logSumExp"),s=Si(t,a.shape),i=a.max(s,!0),o=a.sub(i).exp().sum(s).log(),l=i.reshape(o.shape).add(o);if(r){var c=Cl(l.shape,s);return l.reshape(c)}return l}}),xC=tt({max_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","max"),s=a,i=Si(t,a.shape),o=i,l=lh(o,a.rank);l!=null&&(a=a.transpose(l),o=ch(o.length,a.rank));var c=[a],d=ht.runKernelFunc(function(h,f){var p=h.max(a,o);return f([s,p]),p},{x:a},function(h,f){return zK(h,f[1],f[0],i,l)},"Max",{axes:o},c,[!0]);if(r){var u=Cl(d.shape,i);d=d.reshape(u)}return d}}),zMe=tt({mean_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","mean"),s=Si(t,a.shape),i=Lr(No(a.shape,s)[1]);return uC(function(o){var l=Nr(i);return{value:(l.dtype===o.dtype?o:o.cast(l.dtype)).div(l).sum(t,r),gradFunc:function(c){var d=o.shape.slice();return s.forEach(function(u){d[u]=1}),c.reshape(d).mul(_g(o.shape,"float32")).div(i)}}})(a)}}),HMe=tt({min_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","min"),s=a,i=Si(t,a.shape),o=i,l=lh(o,a.rank);l!=null&&(a=a.transpose(l),o=ch(o.length,a.rank));var c=[a],d=ht.runKernelFunc(function(h,f){var p=h.min(a,o);return f([s,p]),p},{x:a},function(h,f){return zK(h,f[1],f[0],i,l)},"Min",{axes:o},c,[!0]);if(r){var u=Cl(d.shape,i);d=d.reshape(u)}return d}}),WMe=tt({moments_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Si(t,(e=Fe(e,"x","moments")).shape),s=e.mean(a,r),i=s.shape;r||(i=Cl(s.shape,a));var o=e.toFloat().sub(s.reshape(i)).square();return{mean:s,variance:o.mean(a,r)}}}),HK=tt({sum_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","sum");a.dtype==="bool"&&(a=a.toInt());var s=Si(t,a.shape);return uC(function(i){var o=lh(s,i.rank),l=s,c=i;o!=null&&(c=i.transpose(o),l=ch(l.length,i.rank));var d=function(p){var x=i.shape.slice();return s.forEach(function(g){x[g]=1}),p.reshape(x).mul(_g(i.shape,"float32"))},u={axes:l},h=ht.runKernelFunc(function(p){return p.sum(c,l)},{x:c},function(p){return{x:function(){return d(p)}}},"Sum",u);if(r){var f=Cl(h.shape,s);h=h.reshape(f)}return{value:h,gradFunc:d}})(a)}}),GMe=tt({prod_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var a=Fe(e,"x","prod");a.dtype==="bool"&&(a=a.toInt());var s=Si(t,a.shape),i=lh(s,a.rank),o=s,l=a;i!=null&&(l=a.transpose(i),o=ch(o.length,a.rank));var c=ht.runKernelFunc(function(u){return u.prod(l,o)},{permutedX:l});if(r){var d=Cl(c.shape,s);c=c.reshape(d)}return c}}),WK=tt({elu_:function(e){var t=Fe(e,"x","elu");return ht.runKernelFunc(function(r,a){var s=r.elu(t);return a([s]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){return ht.runKernelFunc(function(i){return i.eluDer(r,s)},{dy:r,y:s})}}})}}),YMe=tt({leakyRelu_:function(e,t){t===void 0&&(t=.2);var r=Fe(e,"x","leakyRelu");return AI(Nr(t).mul(r),r)}}),GK=tt({prelu_:function(e,t){var r=Fe(e,"x","prelu"),a=Fe(t,"alpha","prelu");return ht.runKernelFunc(function(s,i){var o=s.prelu(r,a);return i([r,a]),o},{x:r,alpha:a},function(s,i){var o=i[0],l=i[1],c=o.greater(0);return{x:function(){return $x(c,s,s.mul(l))},alpha:function(){var d=$x(c,Va(s),s.mul(o)),u=yi(l.shape,s.shape);return u.length>0&&(d=d.sum(u)),d.reshape(l.shape)}}},"Prelu")}}),ms=tt({relu_:function(e){var t=Fe(e,"x","relu");return t.dtype==="bool"?t.toInt():ht.runKernelFunc(function(r,a){var s=r.relu(t);return a([t]),s},{x:t},function(r,a){var s=a[0];return{x:function(){return r.mulStrict(s.step().toFloat())}}},"Relu")}}),YK=tt({relu6_:function(e){var t=Fe(e,"x","relu6");return t.dtype==="bool"?t.toInt():ht.runKernelFunc(function(r,a){var s=r.relu6(t);return a([t]),s},{x:t},function(r,a){var s=a[0],i=s.lessEqual(6).mul(s.step());return{x:function(){return r.mulStrict(i.toFloat())}}},"Relu6")}}),KMe=tt({selu_:function(e){var t=Fe(e,"x","selu");return ht.runKernelFunc(function(r,a){var s=r.selu(t);return a([t]),s},{$x:t},function(r,a){var s=a[0];return{$x:function(){var i=s.greater(Nr(0)),o=Nr(_I),l=Nr(EI),c=r.mul(l),d=r.mul(o).mul(s.toFloat().exp());return $x(i,c,d)}}})}}),ep=tt({transpose_:function(e,t){var r=Fe(e,"x","transpose");if(t==null&&(t=r.shape.map(function(s,i){return i}).reverse()),We(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of perm "+t+"."}),t.forEach(function(s){We(s>=0&&s<r.rank,function(){return"All entries in 'perm' must be between 0 and "+(r.rank-1)+" but got "+t})}),r.rank<=1)return r.clone();var a={perm:t};return ht.runKernelFunc(function(s){return s.transpose(r,t)},{x:r},function(s){var i=vI(t);return{x:function(){return s.transpose(i)}}},"Transpose",a)}}),XMe=tt({localResponseNormalization_:function(e,t,r,a,s){t===void 0&&(t=5),r===void 0&&(r=1),a===void 0&&(a=1),s===void 0&&(s=.5);var i=Fe(e,"x","localResponseNormalization");We(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),We(Ws(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,l=!1;i.rank===3&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=ht.runKernelFunc(function(d,u){var h=d.localResponseNormalization4D(o,t,r,a,s);return u([o,h]),h},{x4D:o},function(d,u){var h=u[0],f=u[1];return{x4D:function(){return ht.runKernelFunc(function(p){return p.LRNGrad(d,h,f,t,r,a,s)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),KK=tt({norm_:function(e,t,r,a){t===void 0&&(t="euclidean"),r===void 0&&(r=null),a===void 0&&(a=!1);var s=function l(c,d,u){if(u===void 0&&(u=null),c.rank===0)return c.abs();if(c.rank!==1&&u===null)return l(c.reshape([-1]),d,u);if(c.rank===1||typeof u=="number"||Array.isArray(u)&&u.length===1){if(d===1)return c.abs().sum(u);if(d===1/0)return c.abs().max(u);if(d===-1/0)return c.abs().min(u);if(d==="euclidean"||d===2)return c.abs().pow(Nr(2,"int32")).sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}if(Array.isArray(u)&&u.length===2){if(d===1)return c.abs().sum(u[0]).max(u[1]-1);if(d===1/0)return c.abs().sum(u[1]).max(u[0]);if(d===-1/0)return c.abs().sum(u[1]).min(u[0]);if(d==="fro"||d==="euclidean")return c.square().sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}throw new Error("Error in norm: invalid axis: "+u)}(e=Fe(e,"x","norm"),t,r),i=s.shape;if(a){var o=Si(r,e.shape);i=Cl(s.shape,o)}return s.reshape(i)}}),QMe=tt({basicLSTMCell_:function(e,t,r,a,s,i){var o=Fe(e,"forgetBias","basicLSTMCell"),l=Fe(t,"lstmKernel","basicLSTMCell"),c=Fe(r,"lstmBias","basicLSTMCell"),d=Fe(a,"data","basicLSTMCell"),u=Fe(s,"c","basicLSTMCell"),h=Fe(i,"h","basicLSTMCell"),f=d.concat(h,1).matMul(l).add(c),p=f.shape[0],x=f.shape[1]/4,g=[p,x],b=f.slice([0,0],g),y=f.slice([0,x],g),S=f.slice([0,2*x],g),w=f.slice([0,3*x],g),k=b.sigmoid().mulStrict(y.tanh()).addStrict(u.mulStrict(o.add(S).sigmoid())),C=k.tanh().mulStrict(w.sigmoid());return[k,C]}}),JMe=tt({multiRNNCell_:function(e,t,r,a){for(var s=Fe(t,"data","multiRNNCell"),i=E2(r,"c","multiRNNCell"),o=E2(a,"h","multiRNNCell"),l=s,c=[],d=0;d<e.length;d++){var u=e[d](l,i[d],o[d]);c.push(u[0]),c.push(u[1]),l=u[1]}var h=[],f=[];for(d=0;d<c.length;d+=2)h.push(c[d]),f.push(c[d+1]);return[h,f]}}),ZMe=tt({movingAverage_:function(e,t,r,a,s){s===void 0&&(s=!0);var i=Fe(e,"v","movingAverage"),o=Fe(t,"x","movingAverage"),l=Fe(r,"decay","movingAverage");XTe(i,o),We(Fi(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=Nr(1),d=c.sub(l),u=o.sub(i).mul(d);if(s){We(a!=null,function(){return"When using zeroDebias: true, step is required."});var h=Fe(a,"step","movingAverage");u=u.div(c.sub(L2(l,h)))}return i.add(u)}}),eRe=tt({stridedSlice_:function(e,t,r,a,s,i,o,l,c){if(s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),a==null&&(a=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var d=Fe(e,"x","stridedSlice"),u=v7(l),h=d.shape.slice();u.forEach(function(b){t[b]=0,r[b]=1,h.splice(b,0,1)}),d=d.reshape(h);for(var f=0;f<d.rank;f++)t[f]=dIe(s,t,a,d.shape,f),r[f]=uIe(i,r,a,d.shape,f),a[f]=a[f]||1;var p=v7(c);p.forEach(function(b){r[b]=t[b]+1,a[b]=1});var x=jI(t,r,a),g=x.filter(function(b,y){return p.indexOf(y)===-1});return a.every(function(b){return b===1})?eh(d,t,x).reshape(g):ht.runKernelFunc(function(b){return b.stridedSlice(d,t,r,a)},{$x:d}).reshape(g)}}),tRe=tt({topk_:function(e,t,r){t===void 0&&(t=1),r===void 0&&(r=!0);var a=Fe(e,"x","topk");if(a.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var s=a.shape[a.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension ("+s+") but got "+t);var i=ht.runKernelFunc(function(o){return o.topk(a,t,r)},{$x:a});return{values:i[0],indices:i[1]}}}),rRe=tt({scatterND_:function(e,t,r){var a=Fe(e,"indices","scatterND","int32"),s=Fe(t,"updates","scatterND");return lIe(s,a,r),ht.runKernelFunc(function(i){return i.scatterND(a,s,r)},{indices:a,updates:s},null,"ScatterNd",{shape:r})}}),OI=tt({fft_:function(e){We(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,a=e.as2D(r,t);return ht.runKernelFunc(function(s){return s.fft(a)},{input:e}).reshape(e.shape)}}),B2=tt({ifft_:function(e){We(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,a=e.as2D(r,t);return ht.runKernelFunc(function(s){return s.ifft(a)},{input:e}).reshape(e.shape)}}),MI=tt({rfft_:function(e,t){We(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var r,a=e.shape[e.shape.length-1],s=e.size/a;if(t!=null&&t<a){var i=e.shape.map(function(y){return 0}),o=e.shape.map(function(y){return y});o[e.shape.length-1]=t,r=e.slice(i,o),a=t}else if(t!=null&&t>a){var l=e.shape.map(function(y){return y});l[e.shape.length-1]=t-a,r=e.concat(Un(l),e.shape.length-1),a=t}else r=e;var c=r.zerosLike(),d=Ji(r,c).as2D(s,a),u=OI(d),h=Math.floor(a/2)+1,f=Wc(u),p=Mu(u),x=f.split([h,a-h],f.shape.length-1),g=p.split([h,a-h],p.shape.length-1),b=r.shape.slice();return b[r.shape.length-1]=h,Ji(x[0],g[0]).reshape(b)}}),XK=tt({irfft_:function(e){var t=e.shape[e.shape.length-1],r=e.size/t;if(t<=2){var a=e.as2D(r,t),s=B2(a);return Wc(s)}var i=[r,2*(t-1)],o=Wc(e).as2D(r,t),l=Mu(e).as2D(r,t),c=o.slice([0,1],[r,t-2]).reverse(1),d=l.slice([0,1],[r,t-2]).reverse(1).mul(Nr(-1)),u=o.concat(c,1),h=l.concat(d,1);return a=Ji(u,h).as2D(i[0],i[1]),s=B2(a),Wc(s)}}),aRe=Object.freeze({fft:OI,ifft:B2,rfft:MI,irfft:XK}),nRe=tt({sparseToDense_:function(e,t,r,a){a===void 0&&(a=0);var s=Fe(e,"sparseIndices","sparseToDense","int32"),i=Fe(t,"sparseValues","sparseToDense"),o=Fe(a,"defaultValue","sparseToDense",i.dtype);return function(l,c,d,u){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var h=l.rank>0?l.shape[0]:1,f=l.rank>1?l.shape[1]:1;if(d.length!==f)throw new Error("outputShape has incorrect number of elements:, "+d.length+", should be: "+f+".");var p=c.size;if(c.rank!==0&&(c.rank!==1||p!==h))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+h+"]");if(c.dtype!==u.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,i,r,o),ht.runKernelFunc(function(l){return l.sparseToDense(s,i,r,o)},{$sparseIndices:s,$sparseValues:i,$defaultValue:o})}}),sRe=tt({gatherND_:function(e,t){var r=Fe(t,"indices","gatherND","int32"),a=Fe(e,"x","gatherND");return ht.runKernelFunc(function(s){return s.gatherND(a,r)},{x:a,indices:r},null,"GatherNd")}}),iRe=tt({diag_:function(e){var t=Fe(e,"x","diag").flatten(),r=e.shape.concat(e.shape);return ht.runKernelFunc(function(a){return a.diag(t)},{$x:t}).reshape(r)}}),oRe=tt({dropout_:function(e,t,r,a){var s=Fe(e,"x","dropout");if(We(s.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+s.dtype+" tensor instead."}),We(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof ds?s.clone():s;var i=function(c,d){if(d==null)return c.shape.slice();if(Fi(c.shape,d))return d;if(c.shape.length===d.length){for(var u=[],h=0;h<c.shape.length;h++)d[h]==null&&c.shape[h]!=null?u.push(c.shape[h]):u.push(d[h]);return u}return d}(s,r),o=1-t,l=GY(i,0,1,"float32",a).add(o).floor().div(o);return s.mul(l)}});function QK(e,t,r){for(var a=1-e%2,s=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+a-1);s[i]=t-r*Math.cos(o)}return li(s,"float32")}var RI=tt({hannWindow_:function(e){return QK(e,.5,.5)}}),JK=tt({hammingWindow_:function(e){return QK(e,.54,.46)}}),FI=tt({frame_:function(e,t,r,a,s){a===void 0&&(a=!1),s===void 0&&(s=0);for(var i=0,o=[];i+t<=e.size;)o.push(eh(e,i,t)),i+=r;if(a)for(;i<e.size;){var l=i+t-e.size,c=vi([eh(e,i,t-l),Yu([l],s)]);o.push(c),i+=r}return o.length===0?Um([],[0,t]):vi(o).as2D(o.length,t)}}),ZK=tt({stft_:function(e,t,r,a,s){var i;s===void 0&&(s=RI),a==null&&(i=t,a=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=FI(e,t,r),l=Oo(o,s(t)),c=[],d=0;d<o.shape[0];d++)c.push(MI(l.slice([d,0],[1,t]),a));return vi(c)}}),lRe=Object.freeze({hannWindow:RI,hammingWindow:JK,frame:FI,stft:ZK}),To,cRe=function(e,t,r){return r===void 0&&(r=1),Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h,f,p,x,g,b;return Or(this,function(y){switch(y.label){case 0:return a=Fe(e,"predictions","inTopK"),s=Fe(t,"targets","inTopK"),We(a.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+a.rank}),We(a.rank-1===s.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+a.rank+" and targets rank "+s.rank}),fn(a.shape.slice(0,a.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=a.shape[a.shape.length-1],We(r>0&&r<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+r}),[4,a.data()];case 1:return o=y.sent(),[4,s.data()];case 2:for(l=y.sent(),c=[o.length/i,i],u=c[1],h=Wy("bool",d=c[0]),f=0;f<d;f++){for(p=f*u,x=o.subarray(p,p+u),g=[],b=0;b<x.length;b++)g.push({value:x[b],index:b});for(g.sort(function(S,w){return w.value-S.value}),h[f]=0,b=0;b<r;b++)if(g[b].index===l[f]){h[f]=1;break}}return e!==a&&a.dispose(),t!==s&&s.dispose(),[2,ao(h,s.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(To||(To={}));var dRe=tt({absoluteDifference_:function(e,t,r,a){a===void 0&&(a=To.SUM_BY_NONZERO_WEIGHTS);var s=Fe(e,"labels","absoluteDifference"),i=Fe(t,"predictions","absoluteDifference"),o=null;r!=null&&(o=Fe(r,"weights","absoluteDifference")),fn(s.shape,i.shape,"Error in absoluteDifference: ");var l=s.sub(i).abs();return _f(l,o,a)}}),_f=tt({computeWeightedLoss_:function(e,t,r){r===void 0&&(r=To.SUM_BY_NONZERO_WEIGHTS);var a=Fe(e,"losses","computeWeightedLoss"),s=null;t!=null&&(s=Fe(t,"weights","computeWeightedLoss"));var i=s==null?a:a.mul(s);if(r===To.NONE)return i;if(r===To.SUM)return i.sum();if(r===To.MEAN){if(s==null)return i.mean();var o=a.size/s.size,l=i.sum().div(s.sum());return o>1?l.div(Nr(o)):l}if(r===To.SUM_BY_NONZERO_WEIGHTS){if(s==null)return i.sum().div(Nr(a.size));var c=s.mul(_g(a.shape)).notEqual(Nr(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+r)}}),uRe=tt({cosineDistance_:function(e,t,r,a,s){s===void 0&&(s=To.SUM_BY_NONZERO_WEIGHTS);var i=Fe(e,"labels","cosineDistance"),o=Fe(t,"predictions","cosineDistance"),l=null;a!=null&&(l=Fe(a,"weights","cosineDistance")),fn(i.shape,o.shape,"Error in cosineDistance: ");var c=Nr(1).sub(i.mul(o).sum(r,!0));return _f(c,l,s)}}),hRe=tt({hingeLoss_:function(e,t,r,a){a===void 0&&(a=To.SUM_BY_NONZERO_WEIGHTS);var s=Fe(e,"labels","hingeLoss"),i=Fe(t,"predictions","hingeLoss"),o=null;r!=null&&(o=Fe(r,"weights","hingeLoss")),fn(s.shape,i.shape,"Error in hingeLoss: ");var l=Nr(1);s=Nr(2).mul(s).sub(l);var c=l.sub(s.mul(i)).relu();return _f(c,o,a)}}),fRe=tt({huberLoss_:function(e,t,r,a,s){a===void 0&&(a=1),s===void 0&&(s=To.SUM_BY_NONZERO_WEIGHTS);var i=Fe(e,"labels","huberLoss"),o=Fe(t,"predictions","huberLoss"),l=null;r!=null&&(l=Fe(r,"weights","huberLoss")),fn(i.shape,o.shape,"Error in huberLoss: ");var c=Nr(a),d=o.sub(i).abs(),u=IK(d,c),h=d.sub(u),f=Nr(.5).mul(u.square()).add(c.mul(h));return _f(f,l,s)}}),mRe=tt({logLoss_:function(e,t,r,a,s){a===void 0&&(a=1e-7),s===void 0&&(s=To.SUM_BY_NONZERO_WEIGHTS);var i=Fe(e,"labels","logLoss"),o=Fe(t,"predictions","logLoss"),l=null;r!=null&&(l=Fe(r,"weights","logLoss")),fn(i.shape,o.shape,"Error in logLoss: ");var c=Nr(1),d=Nr(a),u=i.mul(o.add(d).log()).neg().sub(c.sub(i).mul(c.sub(o).add(d).log()));return _f(u,l,s)}}),pRe=tt({meanSquaredError_:function(e,t,r,a){a===void 0&&(a=To.SUM_BY_NONZERO_WEIGHTS);var s=Fe(e,"labels","meanSquaredError"),i=Fe(t,"predictions","meanSquaredError"),o=null;r!=null&&(o=Fe(r,"weights","meanSquaredError")),fn(s.shape,i.shape,"Error in meanSquaredError: ");var l=s.squaredDifference(i);return _f(l,o,a)}}),xRe=tt({sigmoidCrossEntropy_:function(e,t,r,a,s){a===void 0&&(a=0),s===void 0&&(s=To.SUM_BY_NONZERO_WEIGHTS);var i=Fe(e,"multiClassLabels","sigmoidCrossEntropy"),o=Fe(t,"logits","sigmoidCrossEntropy"),l=null;if(r!=null&&(l=Fe(r,"weights","sigmoidCrossEntropy")),fn(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),a>0){var c=Nr(a),d=Nr(1),u=Nr(.5);i=i.mul(d.sub(c)).add(u.mul(c))}var h=function(f,p){var x=Fe(f,"labels","sigmoidCrossEntropyWithLogits"),g=Fe(p,"logits","sigmoidCrossEntropyWithLogits");fn(x.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=g.relu(),y=g.mul(x),S=g.abs().neg().exp().log1p();return b.sub(y).add(S)}(i,o);return _f(h,l,s)}}),vRe=tt({softmaxCrossEntropy_:function(e,t,r,a,s){a===void 0&&(a=0),s===void 0&&(s=To.SUM_BY_NONZERO_WEIGHTS);var i=Fe(e,"onehotLabels","softmaxCrossEntropy"),o=Fe(t,"logits","softmaxCrossEntropy"),l=null;if(r!=null&&(l=Fe(r,"weights","softmaxCrossEntropy")),fn(i.shape,o.shape,"Error in softmaxCrossEntropy: "),a>0){var c=Nr(a),d=Nr(1),u=Nr(i.shape[1]);i=i.mul(d.sub(c)).add(c.div(u))}var h=function(f,p,x){if(x===void 0&&(x=-1),x===-1&&(x=p.rank-1),x!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+x);return uC(function(g,b,y){var S=b.logSumExp([x],!0),w=b.toFloat().sub(S);return y([g,w]),{value:w.mul(g).neg().sum([x]),gradFunc:function(k,C){var D=C[0],E=C[1],A=Cl(k.shape,[x]);return[k.reshape(A).mul(D.toFloat().sub(E.exp())),k.reshape(A).mul(E.exp().sub(D.toFloat()))]}}})(f,p)}(i,o);return _f(h,l,s)}}),gRe=Object.freeze({get Reduction(){return To},absoluteDifference:dRe,computeWeightedLoss:_f,cosineDistance:uRe,hingeLoss:hRe,huberLoss:fRe,logLoss:mRe,meanSquaredError:pRe,sigmoidCrossEntropy:xRe,softmaxCrossEntropy:vRe});function B7(e,t){return t===void 0&&(t=!1),ht.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var r=e.shape[0],a=e.shape[1],s=WY(r),i=e.clone(),o=Um([[1]],[1,1]),l=o.clone(),c=r>=a?a:r,d=function(h){var f,p=i,x=l,g=s;f=ht.tidy(function(){var b=i.slice([h,h],[r-h,1]),y=b.norm(),S=i.slice([h,h],[1,1]),w=Um([[-1]]).where(S.greater(0),Um([[1]])),k=S.sub(w.mul(y)),C=b.div(k);l=C.shape[0]===1?o.clone():o.concat(C.slice([1,0],[C.shape[0]-1,C.shape[1]]),0);var D=w.matMul(k).div(y).neg(),E=i.slice([h,0],[r-h,a]),A=D.mul(l);if(h===0)i=E.sub(A.matMul(l.transpose().matMul(E)));else{var I=E.sub(A.matMul(l.transpose().matMul(E)));i=i.slice([0,0],[h,a]).concat(I,0)}var L=s.slice([0,h],[r,s.shape[1]-h]);if(h===0)s=L.sub(L.matMul(l).matMul(A.transpose()));else{var P=L.sub(L.matMul(l).matMul(A.transpose()));s=s.slice([0,0],[r,h]).concat(P,1)}return[l,i,s]}),l=f[0],i=f[1],s=f[2],jl([p,x,g])},u=0;u<c;++u)d(u);return!t&&r>a&&(s=s.slice([0,0],[r,a]),i=i.slice([0,0],[a,a])),[s,i]})}var bRe=tt({bandPart_:function(e,t,r){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(r%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+r+".");var a=Fe(e,"a","bandPart");if(a.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+a.rank+".");var s=a.shape,i=a.shape.slice(-2),o=i[0],l=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(r<=l))throw new Error("bandPart(): numUpper ("+r+") must not be greater than the number of columns ("+l+").");t<0&&(t=o),r<0&&(r=l);var c=D2(0,o,1,"int32").reshape([-1,1]),d=D2(0,l,1,"int32"),u=ji(c,d),h=fC(u.lessEqual(Nr(+t,"int32")),u.greaterEqual(Nr(-r,"int32"))),f=Un([o,l],a.dtype);return cc(gi(a.reshape([-1,o,l])).map(function(p){return $x(h,p,f)})).reshape(s)}}),yRe=tt({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,We(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=e[0].shape[0],a=function(c){We(e[c].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+r+")"})},s=1;s<e.length;++s)a(s)}else t=!0,e=bI(e,e.shape[0],0).map(function(c){return KY(c,[0])});We(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,l=function(c){i.push(ht.tidy(function(){var d=o[c];if(c>0)for(var u=0;u<c;++u){var h=HK(i[u].mulStrict(d)).mul(i[u]);d=d.sub(h)}return d.div(KK(d,"euclidean"))}))};for(s=0;s<e.length;++s)l(s);return t?cc(i,0):i}}),jRe=tt({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return B7(e,t);var r=e.shape.slice(0,e.shape.length-2).reduce(function(o,l){return o*l}),a=gi(e.reshape([r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],i=[];return a.forEach(function(o){var l=B7(o,t),c=l[0],d=l[1];s.push(c),i.push(d)}),[cc(s,0).reshape(e.shape),cc(i,0).reshape(e.shape)]}}),NRe=Object.freeze({bandPart:bRe,gramSchmidt:yRe,qr:jRe});function vC(e,t,r,a,s,i){a==null&&(a=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return r=Math.min(r,o),We(0<=a&&a<=1,function(){return"iouThreshold must be in [0, 1], but was '"+a+"'"}),We(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),We(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),We(t.rank===1,function(){return"scores must be a 1D tensor"}),We(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),We(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:r,iouThreshold:a,scoreThreshold:s,softNmsSigma:i}}var wRe=tt({resizeBilinear_:function(e,t,r){r===void 0&&(r=!1);var a=Fe(e,"images","resizeBilinear");We(a.rank===3||a.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+a.rank+"."}),We(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var s=a,i=!1;a.rank===3&&(i=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var o=t[0],l=t[1],c=ht.runKernelFunc(function(d,u){return u([s]),d.resizeBilinear(s,o,l,r)},{x:s},function(d,u){return{x:function(){return ht.runKernelFunc(function(h){return h.resizeBilinearBackprop(d,u[0],r)},{})}}},"ResizeBilinear",{alignCorners:r,newHeight:o,newWidth:l});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),SRe=tt({resizeNearestNeighbor_:function(e,t,r){r===void 0&&(r=!1);var a=Fe(e,"images","resizeNearestNeighbor");We(a.rank===3||a.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+a.rank+"."}),We(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),We(a.dtype==="float32"||a.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var s=a,i=!1;a.rank===3&&(i=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var o=t[0],l=t[1],c=ht.runKernelFunc(function(d,u){return u([s]),d.resizeNearestNeighbor(s,o,l,r)},{batchImages:s},function(d,u){return{batchImages:function(){return ht.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(d,u[0],r)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),CRe=tt({nonMaxSuppression_:function(e,t,r,a,s){a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY);var i=Fe(e,"boxes","nonMaxSuppression"),o=Fe(t,"scores","nonMaxSuppression"),l=vC(i,o,r,a,s);r=l.maxOutputSize,a=l.iouThreshold,s=l.scoreThreshold;var c={maxOutputSize:r,iouThreshold:a,scoreThreshold:s};return ht.runKernelFunc(function(d){return d.nonMaxSuppression(i,o,r,a,s)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),kRe=function(e,t,r,a,s){return a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),Pr(this,void 0,void 0,function(){var i,o,l,c,d,u,h;return Or(this,function(f){switch(f.label){case 0:return i=Fe(e,"boxes","nonMaxSuppressionAsync"),o=Fe(t,"scores","nonMaxSuppressionAsync"),l=vC(i,o,r,a,s),r=l.maxOutputSize,a=l.iouThreshold,s=l.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=f.sent(),d=c[0],u=c[1],h=wI(d,u,r,a,s),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}})})},_Re=tt({nonMaxSuppressionWithScore_:function(e,t,r,a,s,i){a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=Fe(e,"boxes","nonMaxSuppression"),l=Fe(t,"scores","nonMaxSuppression"),c=vC(o,l,r,a,s,i),d={maxOutputSize:r=c.maxOutputSize,iouThreshold:a=c.iouThreshold,scoreThreshold:s=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},u=ht.runKernel("NonMaxSuppressionV5",{boxes:o,scores:l},d);return{selectedIndices:u[0],selectedScores:u[1]}}}),ERe=function(e,t,r,a,s,i){return a===void 0&&(a=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Pr(this,void 0,void 0,function(){var o,l,c,d,u,h,f;return Or(this,function(p){switch(p.label){case 0:return o=Fe(e,"boxes","nonMaxSuppressionAsync"),l=Fe(t,"scores","nonMaxSuppressionAsync"),c=vC(o,l,r,a,s,i),r=c.maxOutputSize,a=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),l.data()])];case 1:return d=p.sent(),u=d[0],h=d[1],f=SI(u,h,r,a,s,i),o!==e&&o.dispose(),l!==t&&l.dispose(),[2,f]}})})},DRe=tt({cropAndResize_:function(e,t,r,a,s,i){var o=Fe(e,"image","cropAndResize"),l=Fe(t,"boxes","cropAndResize","float32"),c=Fe(r,"boxInd","cropAndResize","int32");s=s||"bilinear",i=i||0;var d=l.shape[0];return We(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),We(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+d+",4] but had shape "+l.shape+"."}),We(c.rank===1&&c.shape[0]===d,function(){return"Error in cropAndResize: boxInd must be have size ["+d+"] but had shape "+l.shape+"."}),We(a.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+a.length+"."}),We(a[0]>=1&&a[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+a}),We(s==="bilinear"||s==="nearest",function(){return"method must be bilinear or nearest, but was "+s}),ht.runKernelFunc(function(u,h){return u.cropAndResize(o,l,c,a,s,i)},{images:o,boxes:l,boxInd:c},null,"CropAndResize",{method:s,extrapolationValue:i,cropSize:a})}}),LI=Object.freeze({resizeBilinear:wRe,resizeNearestNeighbor:SRe,nonMaxSuppression:CRe,nonMaxSuppressionAsync:kRe,nonMaxSuppressionWithScore:_Re,nonMaxSuppressionWithScoreAsync:ERe,cropAndResize:DRe}),BI=function(e,t){return!(e>0)||t==="linear"},UI=function(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+r+" has not been implemented yet.")},$I=function(e,t){var r=t,a=yi(e.shape,t.shape);return a.length>0&&(r=r.sum(a)),r.reshape(e.shape)},VI=function(e,t,r){if(t==="linear")return e;if(t==="relu")return ms(e);if(t==="elu")return WK(e);if(t==="relu6")return YK(e);if(t==="prelu")return GK(e,r);throw new Error("Unknown fused activation "+t+".")},ARe=tt({fusedMatMul_:function(e){var t,r=e.a,a=e.b,s=e.transposeA,i=s!==void 0&&s,o=e.transposeB,l=o!==void 0&&o,c=e.bias,d=e.activation,u=d===void 0?"linear":d,h=e.preluActivationWeights;if(BI(ht.state.gradientDepth,u)===!1){var f=pC(r,a,i,l);return c!=null&&(f=Ta(f,c)),VI(f,u,h)}var p=Fe(r,"a","fused matMul"),x=Fe(a,"b","fused matMul");t=ps(p,x),p=t[0],x=t[1];var g=i?p.shape[p.rank-2]:p.shape[p.rank-1],b=l?x.shape[x.rank-1]:x.shape[x.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],S=l?x.shape[x.rank-2]:x.shape[x.rank-1],w=p.shape.slice(0,-2),k=x.shape.slice(0,-2),C=Lr(w),D=Lr(k);We(p.rank>=2&&x.rank>=2&&p.rank===x.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+x.rank+"."}),We(Fi(w,k),function(){return"Error in fused matMul: outer dimensions ("+w+") and ("+k+") of Tensors with shapes "+p.shape+" and "+x.shape+" must match."}),We(g===b,function(){return"Error in fused matMul: inner shapes ("+g+") and ("+b+") of Tensors with shapes "+p.shape+" and "+x.shape+" and transposeA="+i+" and transposeB="+l+" must match."});var E,A,I=p.shape.slice(0,-2).concat([y,S]),L=i?p.as3D(C,g,y):p.as3D(C,y,g),P=l?x.as3D(D,S,b):x.as3D(D,b,S);c!=null&&Ra(I,(E=ps(E=Fe(c,"bias","fused matMul"),p)[0]).shape),h!=null&&(A=Fe(h,"prelu weights","fused matMul"));var O={a:L,b:P};c!=null&&(O.bias=E),h!=null&&(O.preluActivationWeights=A);var Y=[L,P];return ht.runKernelFunc(function(q,K){var U=q.fusedBatchMatMul({a:L,b:P,transposeA:i,transposeB:l,bias:E,activation:u,preluActivationWeights:A});return K([L,P,U]),U},O,function(q,K){var U=K[0],J=K[1],F=K[2],X=UI(q,F,u),Q={};return c!=null&&(Q={bias:function(){return $I(E,X)}}),Object.assign(i||l?!i&&l?{a:function(){return X.matMul(J,!1,!1)},b:function(){return X.matMul(U,!0,!1)}}:i&&!l?{a:function(){return J.matMul(X,!1,!0)},b:function(){return U.matMul(X,!1,!1)}}:{a:function(){return J.matMul(X,!0,!0)},b:function(){return X.matMul(U,!0,!0)}}:{a:function(){return X.matMul(J,!1,!0)},b:function(){return U.matMul(X,!0,!1)}},Q)},"_FusedMatMul",{transposeA:i,transposeB:l,activation:u},Y,[!0]).reshape(I)}}),TRe=tt({fusedConv2d_:function(e){var t=e.x,r=e.filter,a=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,f=h===void 0?"linear":h,p=e.preluActivationWeights;if(f=f||"linear",BI(ht.state.gradientDepth,f)===!1){var x=nd(t,r,a,s,o,c,d);return u!=null&&(x=Ta(x,u)),VI(x,f,p)}var g=Fe(t,"x","conv2d"),b=Fe(r,"filter","conv2d"),y=g,S=!1;g.rank===3&&(S=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),We(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),We(b.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."}),d!=null&&We(Ws(s),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+s+"."}),We(y.shape[3]===b.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+b.shape[2]+"."}),We(kl(a,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+c+"'"}),We(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var w,k,C=sv(y.shape,b.shape,a,c,s,d);u!=null&&(w=ps(w=Fe(u,"bias","fused conv2d"),g)[0],Ra(C.outShape,w.shape)),p!=null&&(k=Fe(p,"prelu weights","fused conv2d"));var D={x:y,filter:b};u!=null&&(D.bias=w),p!=null&&(D.preluActivationWeights=k);var E=[b,y],A=ht.runKernelFunc(function(I,L){var P=I.fusedConv2d({input:y,filter:b,convInfo:C,bias:w,activation:f,preluActivationWeights:k});return L([b,y,P]),P},D,function(I,L){var P=L,O=P[0],Y=P[1],q=P[2],K=UI(I,q,f);We(eg(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var U={};return u!=null&&(U={bias:function(){return $I(w,K)}}),Object.assign({x:function(){return LK(Y.shape,K,O,a,s)},filter:function(){return II(Y,K,O.shape,a,s)}},U)},"FusedConv2D",{convInfo:C,activation:f},E,[!0]);return S?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),IRe=tt({fusedDepthwiseConv2d_:function(e){var t=e.x,r=e.filter,a=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,f=h===void 0?"linear":h,p=e.preluActivationWeights;if(BI(ht.state.gradientDepth,f)===!1){var x=mC(t,r,a,s,o,c,d);return u!=null&&(x=Ta(x,u)),VI(x,f,p)}var g=Fe(t,"x","depthwiseConv2d"),b=Fe(r,"filter","depthwiseConv2d"),y=g,S=!1;g.rank===3&&(S=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),We(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),We(b.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."}),We(y.shape[3]===b.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."}),c==null&&(c=[1,1]),We(kl(a,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+c+"'"}),d!=null&&We(Ws(s),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+d+" but got pad "+s+"."});var w,k,C=sv(y.shape,b.shape,a,c,s,d,!0);u!=null&&(w=ps(w=Fe(u,"bias","fused conv2d"),g)[0],Ra(C.outShape,w.shape)),p!=null&&(k=Fe(p,"prelu weights","fused depthwiseConv2d"));var D={x:y,filter:b};u!=null&&(D.bias=w),p!=null&&(D.preluActivationWeights=k);var E=[b,y],A=ht.runKernelFunc(function(I,L){var P=I.fusedDepthwiseConv2D({input:y,filter:b,convInfo:C,bias:w,activation:f,preluActivationWeights:k});return L([b,y,P]),P},D,function(I,L){We(eg(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var P=L[0],O=L[1],Y=L[2],q=UI(I,Y,f),K={};return u!=null&&(K={bias:function(){return $I(w,q)}}),Object.assign({x:function(){return BK(O.shape,q,P,C)},filter:function(){return UK(O,q,P.shape,C)}},K)},"FusedDepthwiseConv2D",{convInfo:C,activation:f},E,[!0]);return S?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),PRe=Object.freeze({matMul:ARe,conv2d:TRe,depthwiseConv2d:IRe}),ORe=Object.freeze({image:LI,linalg:NRe,losses:gRe,spectral:aRe,fused:PRe,signal:lRe,square:mOe,squaredDifference:NK,conv1d:wMe,conv2d:nd,conv3d:SMe,depthwiseConv2d:mC,separableConv2d:PI,conv2dTranspose:CMe,conv3dTranspose:kMe,op:tt,batchNormalization2d:zOe,batchNormalization3d:HOe,batchNormalization4d:WOe,batchNormalization:GOe,batchNorm:EK,batchNorm2d:YOe,batchNorm3d:KOe,batchNorm4d:XOe,booleanMaskAsync:NMe,complex:Ji,real:Wc,imag:Mu,concat:vi,concat1d:P4e,concat2d:O4e,concat3d:M4e,concat4d:R4e,split:bI,matMul:pC,dot:_Me,outerProduct:EMe,reverse:F1,reverse1d:DMe,reverse2d:AMe,reverse3d:TMe,reverse4d:IMe,maxPool:Ai,avgPool:L1,pool:PMe,maxPool3d:OMe,avgPool3d:MMe,slice:eh,slice1d:RMe,slice2d:FMe,slice3d:qK,slice4d:LMe,abs:pOe,acos:xOe,acosh:vOe,asin:gOe,asinh:bOe,atan:yOe,atanh:jOe,ceil:NOe,clipByValue:DI,cos:wOe,cosh:SOe,erf:COe,exp:T3,expm1:kOe,floor:_Oe,log:EOe,log1p:DOe,logSigmoid:AOe,neg:F2,reciprocal:TOe,round:IOe,rsqrt:wK,sigmoid:SK,sign:POe,isNaN:OOe,isInf:MOe,isFinite:ROe,sin:FOe,sinh:LOe,softplus:BOe,sqrt:UOe,step:$Oe,tan:VOe,tanh:qOe,all:BMe,any:UMe,argMax:$Me,argMin:VMe,logSumExp:qMe,max:xC,mean:zMe,min:HMe,moments:WMe,sum:HK,prod:GMe,equal:PK,equalStrict:hMe,greater:fMe,greaterEqual:OK,greaterEqualStrict:mMe,greaterStrict:pMe,less:xMe,lessEqual:vMe,lessEqualStrict:gMe,lessStrict:bMe,notEqual:yMe,notEqualStrict:jMe,add:Ta,addN:ZOe,addStrict:eMe,atan2:tMe,div:Ad,divNoNan:rMe,divStrict:aMe,floorDiv:TK,maximum:AI,maximumStrict:nMe,minimum:IK,minimumStrict:sMe,mod:iMe,modStrict:oMe,mul:Oo,mulStrict:lMe,pow:L2,powStrict:cMe,squaredDifferenceStrict:dMe,sub:ji,subStrict:uMe,elu:WK,leakyRelu:YMe,prelu:GK,relu:ms,relu6:YK,selu:KMe,logicalAnd:fC,logicalNot:QOe,logicalOr:DK,logicalXor:JOe,where:$x,whereAsync:AK,buffer:ma,print:H4e,batchToSpaceND:HY,broadcastTo:W4e,cast:G4e,clone:Y4e,cumsum:K4e,depthToSpace:X4e,expandDims:zc,eye:WY,multinomial:Q4e,oneHot:_3,pad:nv,pad1d:J4e,pad2d:Z4e,pad3d:eIe,pad4d:tIe,rand:rIe,randomNormal:aIe,randomGamma:nIe,randomUniform:GY,reshape:Md,spaceToBatchND:YY,squeeze:KY,stack:cc,tile:S0,truncatedNormal:sIe,unstack:gi,setdiff1dAsync:iIe,fill:Yu,linspace:I4e,ones:_g,range:D2,scalar:Nr,tensor:ao,tensor1d:li,tensor2d:Um,tensor3d:gI,tensor4d:pl,tensor5d:D4e,tensor6d:A4e,variable:T4e,zeros:Un,onesLike:zY,zerosLike:Va,transpose:ep,softmax:kf,logSoftmax:fIe,localResponseNormalization:XMe,norm:KK,gather:TI,unsortedSegmentSum:MK,basicLSTMCell:QMe,multiRNNCell:JMe,movingAverage:ZMe,stridedSlice:eRe,topk:tRe,scatterND:rRe,fft:OI,ifft:B2,rfft:MI,irfft:XK,sparseToDense:nRe,gatherND:sRe,diag:iRe,dropout:oRe,hannWindow:RI,hammingWindow:JK,frame:FI,stft:ZK,inTopKAsync:cRe});function nr(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&We(r.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function bD(e,t,r,a){if(r==="linear")return e.linear(t);if(r==="relu")return e.relu(t);if(r==="elu")return e.elu(t);if(r==="relu6")return e.relu6(t);if(r==="prelu")return e.prelu(t,a);throw new Error("Activation "+r+" has not been implemented for the CPU backend.")}var MRe=function(e){function t(){var r=e.call(this)||this;return r.blockSize=48,r.firstUse=!0,r.data=new rK(r,ht),r}return Wd(t,e),t.prototype.write=function(r,a,s){this.firstUse&&(this.firstUse=!1,Ht().get("IS_NODE")&&_2(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:r,dtype:s}),i},t.prototype.move=function(r,a,s,i){this.data.set(r,{values:a,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){return[2,this.readSync(r)]})})},t.prototype.readSync=function(r){var a=this.data.get(r),s=a.dtype,i=a.complexTensors;return s==="complex64"?A3(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(r).values},t.prototype.bufferSync=function(r){var a=this.readSync(r.dataId),s=a;if(r.dtype==="string")try{s=a.map(function(i){return S2(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ma(r.shape,r.dtype,s)},t.prototype.makeOutput=function(r,a,s){var i=this.write(r,a,s);return ht.makeTensorFromDataId(i,a,s,this)},t.prototype.disposeData=function(r){if(this.data.has(r)){var a=this.data.get(r).complexTensors;a!=null&&(a.real.dispose(),a.imag.dispose()),this.data.delete(r)}},t.prototype.time=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){return a=Iu(),r(),[2,{kernelMs:Iu()-a}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(r,a){var s=this.makeOutput(null,r.shape,"complex64");return this.data.get(s.dataId).complexTensors={real:ht.keep(r.clone()),imag:ht.keep(a.clone())},s},t.prototype.real=function(r){return this.data.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.data.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,a,s){if(nr(r,"slice"),eK(r.shape,a,s)){var i=tK(a,r.strides),o=Lr(s);return ao(this.readSync(r.dataId).subarray(i,i+o),s,r.dtype)}for(var l=ma(s,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d).map(function(h,f){return h+a[f]});l.values[d]=c.get.apply(c,u)}return l.toTensor()},t.prototype.stridedSlice=function(r,a,s,i){nr(r,"stridedSlice");var o=jI(a,s,i);if(o.some(function(p){return p===0}))return ao([],o);for(var l=ma(o,r.dtype),c=this.bufferSync(r),d=0;d<l.size;d++){for(var u=l.indexToLoc(d),h=new Array(u.length),f=0;f<h.length;f++)h[f]=u[f]*i[f]+a[f];l.set.apply(l,[c.get.apply(c,h)].concat(u))}return l.toTensor()},t.prototype.diag=function(r){for(var a=this.readSync(r.dataId),s=ma([r.size,r.size],r.dtype),i=s.values,o=0;o<a.length;o++)i[o*r.size+o]=a[o];return s.toTensor()},t.prototype.unstack=function(r,a){for(var s=r.shape[a],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==a&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[a]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[a]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.reverse=function(r,a){nr(r,"reverse");for(var s=ma(r.shape,r.dtype),i=this.bufferSync(r),o=function(c){var d=s.indexToLoc(c),u=d.slice();a.forEach(function(h){return u[h]=r.shape[h]-1-u[h]}),s.set.apply(s,[i.get.apply(i,u)].concat(d))},l=0;l<s.size;l++)o(l);return s.toTensor()},t.prototype.concat=function(r,a){var s=this;if(r[0].dtype==="complex64"){var i=r.map(function(p){return Wc(p)}),o=r.map(function(p){return Mu(p)});return Ji(this.concat(i,a),this.concat(o,a))}var l=r.map(function(p){var x=Lr(p.shape.slice(a));return p.as2D(-1,x)}),c=Z0(l.map(function(p){return p.shape}),1),d=ma(c,r[0].dtype).values;if(l[0].shape[0]===1){var u=0;l.forEach(function(p){d.set(s.readSync(p.dataId),u),u+=p.size})}else{var h=0;l.forEach(function(p){for(var x=s.readSync(p.dataId),g=0,b=0;b<p.shape[0];++b)for(var y=b*c[1]+h,S=0;S<p.shape[1];++S)d[y+S]=x[g++];h+=p.shape[1]})}var f=Z0(r.map(function(p){return p.shape}),a);return ao(d,f,r[0].dtype)},t.prototype.neg=function(r){return nr(r,"neg"),this.multiply(Nr(-1),r)},t.prototype.add=function(r,a){return r.dtype==="complex64"||a.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),a.cast("complex64"),function(s,i,o,l){return{real:s+o,imag:i+l}}):this.broadcastedBinaryOp(r,a,eo(r.dtype,a.dtype),function(s,i){return s+i})},t.prototype.addN=function(r){var a=this;nr(r,"addN");for(var s=r.map(function(u){return a.readSync(u.dataId)}),i=ma(r[0].shape,r[0].dtype),o=i.values,l=0;l<r.length;l++)for(var c=s[l],d=0;d<o.length;d++)o[d]+=c[d];return i.toTensor()},t.prototype.softmax=function(r,a){var s=Si([a],r.shape),i=this.max(r,s),o=Cl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.subtract=function(r,a){return r.dtype==="complex64"||a.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),a.cast("complex64"),function(s,i,o,l){return{real:s-o,imag:i-l}}):this.broadcastedBinaryOp(r,a,eo(r.dtype,a.dtype),function(s,i){return s-i})},t.prototype.pow=function(r,a){return nr([r,a],"pow"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.pow(s,i)})},t.prototype.batchMatMul=function(r,a,s,i){nr([r,a],"matMul");for(var o=s?r.shape[1]:r.shape[2],l=s?r.shape[2]:r.shape[1],c=i?a.shape[1]:a.shape[2],d=r.shape[0],u=this.readSync(r.dataId),h=this.readSync(a.dataId),f=s?[r.strides[0],1,r.strides[1]]:[r.strides[0],r.strides[1],1],p=f[0],x=f[1],g=f[2],b=i?[1,a.strides[1],a.strides[0]]:[a.strides[1],1,a.strides[0]],y=b[0],S=b[1],w=b[2],k=l*c,C=ma([d,l,c],r.dtype),D=C.values,E=this.blockSize,A=0;A<d;A++)for(var I=0;I<l;I+=E)for(var L=0;L<c;L+=E)for(var P=0;P<o;P+=E)for(var O=Math.min(I+E,l),Y=Math.min(L+E,c),q=Math.min(P+E,o),K=I;K<O;K++)for(var U=L;U<Y;U++){for(var J=0,F=P;F<q;F++)J+=u[A*p+K*x+F*g]*h[F*y+U*S+A*w];D[A*k+(K*c+U)]+=J}return C.toTensor()},t.prototype.fusedBatchMatMul=function(r){var a=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=this.batchMatMul(a,s,i,o);return l&&(u=this.add(u,l)),c&&(u=bD(this,u,c,d)),u},t.prototype.multiply=function(r,a){return r.dtype==="complex64"||a.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),a.cast("complex64"),function(s,i,o,l){return{real:s*o-i*l,imag:s*l+i*o}}):this.broadcastedBinaryOp(r,a,eo(r.dtype,a.dtype),function(s,i){return s*i})},t.prototype.realDivide=function(r,a){return nr([r,a],"realDivide"),this.broadcastedBinaryOp(r,a,"float32",function(s,i){return s/i})},t.prototype.floorDiv=function(r,a){return nr([r,a],"floorDiv"),this.broadcastedBinaryOp(r,a,"int32",function(s,i){return Math.floor(s/i)})},t.prototype.sum=function(r,a){nr(r,"sum"),Yl("sum",a,r.rank);for(var s=No(r.shape,a),i=s[0],o=s[1],l=Un(i,eo(r.dtype,"int32")),c=Lr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=0,x=0;x<c;++x)p+=u[f+x];d[h]=p}return l},t.prototype.prod=function(r,a){nr(r,"sum");for(var s=No(r.shape,a),i=s[0],o=s[1],l=Un(i,eo(r.dtype,"int32")),c=Lr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=1,x=0;x<c;++x)p*=u[f+x];d[h]=p}return l},t.prototype.unsortedSegmentSum=function(r,a,s){nr(r,"unsortedSegmentSum");for(var i=[],o=r.rank-a.rank,l=0;l<o;++l)a=a.expandDims(l+1);for(l=0;l<s;++l){var c=Nr(l,"int32"),d=PK(c,a).asType("float32").mul(r).sum(0);i.push(d)}return cc(i)},t.prototype.argMin=function(r,a){nr(r,"argMin");var s=[a];Yl("argMin",s,r.rank);for(var i=No(r.shape,s),o=i[0],l=i[1],c=Un(o,"int32"),d=Lr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),f=0;f<u.length;++f){for(var p=f*d,x=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y<x&&(x=y,g=b)}u[f]=g}return c},t.prototype.argMax=function(r,a){nr(r,"argMax");var s=[a];Yl("argMax",s,r.rank);for(var i=No(r.shape,s),o=i[0],l=i[1],c=Un(o,"int32"),d=Lr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),f=0;f<u.length;++f){for(var p=f*d,x=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y>x&&(x=y,g=b)}u[f]=g}return c},t.prototype.cumsum=function(r,a,s,i){if(nr(r,"cumsum"),a!==r.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(r.rank-1)+" but got axis="+a);for(var o=eo(r.dtype,"int32"),l=Un(r.shape,o),c=this.readSync(l.dataId),d=this.readSync(r.dataId),u=r.shape[r.rank-1],h=i?function(b,y){return b+u-y-1}:function(b,y){return b+y},f=0;f<d.length;f+=u)for(var p=0;p<u;p++){var x=h(f,p);if(p===0)c[x]=s?0:d[x];else{var g=h(f,p-1);c[x]=s?d[g]+c[g]:d[x]+c[g]}}return l},t.prototype.equal=function(r,a){return nr([r,a],"equal"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s===i?1:0})},t.prototype.notEqual=function(r,a){return nr([r,a],"notEqual"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s!==i?1:0})},t.prototype.less=function(r,a){return nr([r,a],"less"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s<i?1:0})},t.prototype.lessEqual=function(r,a){return nr([r,a],"lessEqual"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s<=i?1:0})},t.prototype.greater=function(r,a){return nr([r,a],"greater"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s>i?1:0})},t.prototype.greaterEqual=function(r,a){return nr([r,a],"greaterEqual"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s>=i?1:0})},t.prototype.logicalNot=function(r){nr(r,"logicalNot");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)s[i]=a[i]?0:1;return this.makeOutput(s,r.shape,"bool")},t.prototype.logicalAnd=function(r,a){return nr([r,a],"logicalAnd"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s&&i})},t.prototype.logicalOr=function(r,a){return nr([r,a],"logicalOr"),this.broadcastedBinaryOp(r,a,"bool",function(s,i){return s||i})},t.prototype.select=function(r,a,s){nr([r,a,s],"select");for(var i=this.readSync(r.dataId),o=this.readSync(a.dataId),l=this.readSync(s.dataId),c=Un(a.shape,eo(a.dtype,s.dtype)),d=this.readSync(c.dataId),u=0,h=r.rank===0||r.rank>1||a.rank===1?1:Lr(a.shape.slice(1)),f=0;f<i.length;f++)for(var p=0;p<h;p++)i[f]===1?d[u++]=o[f]:d[u++]=l[f];return c},t.prototype.where=function(r){nr([r],"where");var a=this.readSync(r.dataId);return CI(r.shape,a)},t.prototype.topk=function(r,a,s){return nr(r,"topk"),dK(this.readSync(r.dataId),r.shape,r.dtype,a)},t.prototype.min=function(r,a){nr(r,"min"),Yl("min",a,r.rank);for(var s=No(r.shape,a),i=s[0],o=s[1],l=Un(i,r.dtype),c=Lr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],x=0;x<c;++x){var g=u[f+x];g<p&&(p=g)}d[h]=p}return l},t.prototype.minimum=function(r,a){return nr([r,a],"minimum"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.min(s,i)})},t.prototype.mod=function(r,a){return nr([r,a],"mod"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){var o=s%i;return s<0&&i<0||s>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(r,a){nr(r,"max"),Yl("max",a,r.rank);for(var s=No(r.shape,a),i=s[0],o=s[1],l=Un(i,r.dtype),c=Lr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],x=0;x<c;++x){var g=u[f+x];g>p&&(p=g)}d[h]=p}return l},t.prototype.maximum=function(r,a){return nr([r,a],"maximum"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.max(s,i)})},t.prototype.all=function(r,a){nr(r,"all"),Yl("all",a,r.rank);for(var s=No(r.shape,a),i=s[0],o=s[1],l=Un(i,r.dtype),c=Lr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],x=0;x<c;++x){var g=u[f+x];p=p&&g}d[h]=p}return l},t.prototype.any=function(r,a){nr(r,"any"),Yl("any",a,r.rank);for(var s=No(r.shape,a),i=s[0],o=s[1],l=Un(i,r.dtype),c=Lr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var f=h*c,p=u[f],x=0;x<c;++x){var g=u[f+x];p=p||g}d[h]=p}return l},t.prototype.squaredDifference=function(r,a){return nr([r,a],"squaredDifference"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){var o=s-i;return o*o})},t.prototype.ceil=function(r){nr(r,"ceil");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.ceil(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.floor=function(r){nr(r,"floor");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.floor(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.sign=function(r){nr(r,"x");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)a[i]<0?s[i]=-1:a[i]>0?s[i]=1:s[i]=0;return this.makeOutput(s,r.shape,"float32")},t.prototype.isNaN=function(r){nr(r,"x");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)Number.isNaN(a[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isInf=function(r){nr(r,"x");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)Math.abs(a[i])===1/0&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isFinite=function(r){nr(r,"x");for(var a=this.readSync(r.dataId),s=new Uint8Array(a.length),i=0;i<a.length;++i)Number.isFinite(a[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.round=function(r){nr(r,"round");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=Math.floor(a[i]);a[i]-o<.5?s[i]=Math.floor(a[i]):a[i]-o>.5?s[i]=Math.ceil(a[i]):s[i]=o%2==0?o:o+1}return this.makeOutput(s,r.shape,"float32")},t.prototype.exp=function(r){nr(r,"exp");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.exp(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.expm1=function(r){nr(r,"expm1");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=Math.expm1(a[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.log=function(r){nr(r,"log");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=Math.log(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.log1p=function(r){nr(r,"log1p");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=Math.log1p(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.sqrt=function(r){nr(r,"sqrt");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.rsqrt=function(r){nr(r,"rsqrt");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i){var o=a[i];s[i]=1/Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.reciprocal=function(r){nr(r,"reciprocal");for(var a=this.readSync(r.dataId),s=new Float32Array(a.length),i=0;i<a.length;++i)s[i]=1/a[i];return this.makeOutput(s,r.shape,"float32")},t.prototype.linear=function(r){return r},t.prototype.relu=function(r){nr(r,"relu");for(var a=Un(r.shape,r.dtype),s=this.readSync(a.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.max(0,i[o]);return a},t.prototype.relu6=function(r){nr(r,"relu");for(var a=Un(r.shape,r.dtype),s=this.readSync(a.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.min(Math.max(0,i[o]),6);return a},t.prototype.prelu=function(r,a){return nr([r,a],"prelu"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return s<0?i*s:s})},t.prototype.elu=function(r){nr(r,"elu");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=s[i];a[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(a,r.shape,"float32")},t.prototype.eluDer=function(r,a){nr([r,a],"eluDer");for(var s=new Float32Array(a.size),i=this.readSync(a.dataId),o=this.readSync(r.dataId),l=0;l<i.length;++l){var c=i[l];s[l]=c>=1?o[l]:o[l]*(c+1)}return this.makeOutput(s,a.shape,"float32")},t.prototype.selu=function(r){nr(r,"selu");for(var a=_I,s=EI,i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>=0?s*c:a*(Math.exp(c)-1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.clip=function(r,a,s){nr(r,"clip");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>s?s:c<a?a:c}return this.makeOutput(i,r.shape,"float32")},t.prototype.abs=function(r){for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.abs(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.complexAbs=function(r){for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<r.size;++i){var o=s[2*i],l=s[2*i+1];a[i]=Math.hypot(o,l)}return this.makeOutput(a,r.shape,"float32")},t.prototype.int=function(r){nr(r,"int");for(var a=new Int32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=s[i];return this.makeOutput(a,r.shape,"int32")},t.prototype.sigmoid=function(r){nr(r,"sigmoid");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=1/(1+Math.exp(-s[i]));return this.makeOutput(a,r.shape,"float32")},t.prototype.softplus=function(r){nr(r,"softplus");for(var a=Math.log(11920928955078125e-23)+2,s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o]>-a,c=i[o]<a,d=Math.exp(i[o]),u=void 0;u=c?d:l?i[o]:Math.log(1+d),s[o]=u}return this.makeOutput(s,r.shape,"float32")},t.prototype.sin=function(r){nr(r,"sin");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.sin(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.cos=function(r){nr(r,"cos");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.cos(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.tan=function(r){nr(r,"tan");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.tan(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.asin=function(r){nr(r,"asin");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.asin(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.acos=function(r){nr(r,"acos");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.acos(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.atan=function(r){nr(r,"atan");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.atan(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.atan2=function(r,a){return nr([r,a],"atan2"),this.broadcastedBinaryOp(r,a,r.dtype,function(s,i){return Math.atan2(s,i)})},t.prototype.sinh=function(r){nr(r,"sinh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.sinh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.cosh=function(r){nr(r,"cosh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.cosh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.tanh=function(r){nr(r,"tanh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=RTe(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.asinh=function(r){nr(r,"asinh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.asinh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.acosh=function(r){nr(r,"acosh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.acosh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.atanh=function(r){nr(r,"atanh");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)a[i]=Math.atanh(s[i]);return this.makeOutput(a,r.shape,"float32")},t.prototype.erf=function(r){nr(r,"erf");for(var a=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=Math.sign(s[i]),l=Math.abs(s[i]),c=1/(1+.3275911*l);a[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(a,r.shape,"float32")},t.prototype.step=function(r,a){a===void 0&&(a=0),nr(r,"step");for(var s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o];isNaN(l)?s[o]=NaN:s[o]=l>0?1:a}return this.makeOutput(s,r.shape,"float32")},t.prototype.fusedConv2d=function(r){var a=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.conv2d(a,s,i);return o&&(d=this.add(d,o)),l&&(d=bD(this,d,l,c)),d},t.prototype.conv2d=function(r,a,s){nr([r,a],"conv2d");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.dataFormat==="channelsLast",f=ma(s.outShape,r.dtype),p=r.strides[0],x=h?r.strides[1]:r.strides[2],g=h?r.strides[2]:1,b=h?1:r.strides[1],y=f.strides[0],S=h?f.strides[1]:f.strides[2],w=h?f.strides[2]:1,k=h?1:f.strides[1],C=this.readSync(r.dataId),D=this.readSync(a.dataId),E=f.values,A=0;A<s.batchSize;++A)for(var I=A*p,L=A*y,P=0;P<s.outHeight;++P)for(var O=L+P*S,Y=P*s.strideHeight-u,q=0;q<i;q++){var K=Y+q*l;if(!(K<0||K>=s.inHeight))for(var U=q*a.strides[0],J=I+K*x,F=0;F<s.outWidth;++F)for(var X=O+F*w,Q=F*s.strideWidth-d,ie=0;ie<o;ie++){var M=Q+ie*c;if(!(M<0||M>=s.inWidth))for(var V=J+M*g,W=U+ie*a.strides[1],ee=0;ee<s.inChannels;++ee){for(var re=C[V+ee*b],ne=0;ne<s.outChannels;++ne)E[X+ne*k]+=re*D[W+ne];W+=s.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(r,a,s){for(var i=s.filterDepth,o=s.filterHeight,l=s.filterWidth,c=s.dilationDepth,d=s.dilationHeight,u=s.dilationWidth,h=s.padInfo.front,f=s.padInfo.left,p=s.padInfo.top,x=ma(s.outShape,r.dtype),g=this.readSync(r.dataId),b=this.readSync(a.dataId),y=x.values,S=0;S<s.batchSize;++S)for(var w=S*r.strides[0],k=S*x.strides[0],C=0;C<s.outDepth;++C)for(var D=k+C*x.strides[1],E=C*s.strideDepth-h,A=0;A<i;A++){var I=E+A*c;if(!(I<0||I>=s.inDepth))for(var L=A*a.strides[0],P=w+I*r.strides[1],O=0;O<s.outHeight;++O)for(var Y=D+O*x.strides[2],q=O*s.strideHeight-p,K=0;K<o;K++){var U=q+K*d;if(!(U<0||U>=s.inHeight))for(var J=L+K*a.strides[1],F=P+U*r.strides[2],X=0;X<s.outWidth;++X)for(var Q=Y+X*s.outChannels,ie=X*s.strideWidth-f,M=0;M<l;M++){var V=ie+M*u;if(!(V<0||V>=s.inWidth))for(var W=J+M*a.strides[2],ee=F+V*s.inChannels,re=W,ne=0;ne<s.inChannels;++ne){for(var ce=g[ee+ne],ae=0;ae<s.outChannels;++ae)y[Q+ae]+=ce*b[re+ae];re+=s.outChannels}}}}return x.toTensor()},t.prototype.conv2dDerInput=function(r,a,s){nr([r,a],"conv2dDerInput");for(var i=ma(s.inShape,"float32"),o=i.values,l=this.readSync(r.dataId),c=this.readSync(a.dataId),d=a.strides,u=d[0],h=d[1],f=d[2],p=s.batchSize,x=s.filterHeight,g=s.filterWidth,b=s.inChannels,y=s.inHeight,S=s.inWidth,w=s.outChannels,k=s.outHeight,C=s.outWidth,D=s.strideHeight,E=s.strideWidth,A=s.dataFormat,I=x-1-s.padInfo.top,L=g-1-s.padInfo.left,P=A==="channelsLast",O=i.strides[0],Y=P?i.strides[1]:i.strides[2],q=P?i.strides[2]:1,K=P?1:i.strides[1],U=r.strides[0],J=P?r.strides[1]:r.strides[2],F=P?r.strides[2]:1,X=P?1:r.strides[1],Q=0;Q<p;++Q)for(var ie=0;ie<b;++ie)for(var M=0;M<y;++M)for(var V=M-I,W=Math.max(0,Math.ceil(V/D)),ee=Math.min(k,(x+V)/D),re=0;re<S;++re){for(var ne=re-L,ce=Math.max(0,Math.ceil(ne/E)),ae=Math.min(C,(g+ne)/E),Z=0,de=W;de<ee;++de)for(var z=de*D-V,se=ce;se<ae;++se)for(var Ne=U*Q+J*de+F*se,ue=u*(x-1-z)+h*(g-1-(se*E-ne))+f*ie,oe=0;oe<w;++oe)Z+=l[Ne+X*oe]*c[ue+oe];o[O*Q+Y*M+q*re+K*ie]=Z}return i.toTensor()},t.prototype.conv3dDerInput=function(r,a,s){for(var i=ma(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=l[3],f=this.readSync(r.dataId),p=r.strides,x=p[0],g=p[1],b=p[2],y=p[3],S=this.readSync(a.dataId),w=a.strides,k=w[0],C=w[1],D=w[2],E=w[3],A=s.batchSize,I=s.filterDepth,L=s.filterHeight,P=s.filterWidth,O=s.inChannels,Y=s.inDepth,q=s.inHeight,K=s.inWidth,U=s.outChannels,J=s.outDepth,F=s.outHeight,X=s.outWidth,Q=s.strideDepth,ie=s.strideHeight,M=s.strideWidth,V=I-1-s.padInfo.front,W=L-1-s.padInfo.top,ee=P-1-s.padInfo.left,re=0;re<A;++re)for(var ne=0;ne<O;++ne)for(var ce=0;ce<Y;++ce)for(var ae=ce-V,Z=Math.max(0,Math.ceil(ae/Q)),de=Math.min(J,(I+ae)/Q),z=0;z<q;++z)for(var se=z-W,Ne=Math.max(0,Math.ceil(se/ie)),ue=Math.min(F,(L+se)/ie),oe=0;oe<K;++oe){for(var ye=oe-ee,je=Math.max(0,Math.ceil(ye/M)),Me=Math.min(X,(P+ye)/M),He=0,et=Z;et<de;++et)for(var ft=et*Q-ae,Be=Ne;Be<ue;++Be)for(var dt=Be*ie-se,Tt=je;Tt<Me;++Tt)for(var At=x*re+g*et+b*Be+y*Tt,qt=k*(I-1-ft)+C*(L-1-dt)+D*(P-1-(Tt*M-ye))+E*ne,xe=0;xe<U;++xe)He+=f[At+xe]*S[qt+xe];o[c*re+d*ce+u*z+h*oe+ne]=He}return i.toTensor()},t.prototype.conv2dDerFilter=function(r,a,s){nr([r,a],"conv2dDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dataFormat==="channelsLast",u=ma(s.filterShape,"float32"),h=s.padInfo.left,f=s.padInfo.top,p=this.bufferSync(r),x=this.bufferSync(a),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((f-g)/i)),y=Math.min(s.outHeight,(s.inHeight+f-g)/i),S=0;S<c;++S)for(var w=Math.max(0,Math.ceil((h-S)/o)),k=Math.min(s.outWidth,(s.inWidth+h-S)/o),C=0;C<s.inChannels;++C)for(var D=0;D<s.outChannels;++D){for(var E=0,A=0;A<s.batchSize;++A)for(var I=b;I<y;++I)for(var L=g+I*i-f,P=w;P<k;++P){var O=S+P*o-h;E+=d?p.get(A,L,O,C)*x.get(A,I,P,D):p.get(A,C,L,O)*x.get(A,D,I,P)}u.set(E,g,S,C,D)}return u.toTensor()},t.prototype.conv3dDerFilter=function(r,a,s){for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=ma(s.filterShape,"float32"),f=h.values,p=h.strides,x=p[0],g=p[1],b=p[2],y=p[3],S=this.readSync(a.dataId),w=a.strides,k=w[0],C=w[1],D=w[2],E=w[3],A=this.readSync(r.dataId),I=r.strides,L=I[0],P=I[1],O=I[2],Y=I[3],q=s.padInfo.front,K=s.padInfo.left,U=s.padInfo.top,J=0;J<c;++J)for(var F=Math.max(0,Math.ceil((q-J)/i)),X=Math.min(s.outDepth,(s.inDepth+q-J)/i),Q=J*x,ie=0;ie<d;++ie)for(var M=Math.max(0,Math.ceil((U-ie)/o)),V=Math.min(s.outHeight,(s.inHeight+U-ie)/o),W=ie*g+Q,ee=0;ee<u;++ee)for(var re=Math.max(0,Math.ceil((K-ee)/l)),ne=Math.min(s.outWidth,(s.inWidth+K-ee)/l),ce=ee*b+W,ae=0;ae<s.inChannels;++ae)for(var Z=ae*y+ce,de=0;de<s.outChannels;++de){for(var z=0,se=0;se<s.batchSize;++se)for(var Ne=se*L,ue=se*k,oe=F;oe<X;++oe)for(var ye=(J+oe*i-q)*P+Ne,je=oe*C+ue,Me=M;Me<V;++Me)for(var He=(ie+Me*o-U)*O+ye,et=Me*D+je,ft=re;ft<ne;++ft){var Be=ft*E+et;z+=A[(ee+ft*l-K)*Y+He+ae]*S[Be+de]}f[Z+de]=z}return h.toTensor()},t.prototype.fusedDepthwiseConv2D=function(r){var a=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.depthwiseConv2D(a,s,i);return o&&(d=this.add(d,o)),l&&(d=bD(this,d,l,c)),d},t.prototype.depthwiseConv2D=function(r,a,s){nr([r,a],"depthwiseConv2D");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.outChannels/s.inChannels,f=ma(s.outShape,r.dtype),p=this.readSync(r.dataId),x=this.readSync(a.dataId),g=f.values,b=0;b<s.batchSize;++b)for(var y=b*r.strides[0],S=b*f.strides[0],w=0;w<s.outHeight;++w)for(var k=S+w*f.strides[1],C=w*s.strideHeight-d,D=0;D<i;++D){var E=C+D*l;if(!(E<0||E>=s.inHeight))for(var A=D*a.strides[0],I=y+E*r.strides[1],L=0;L<s.outWidth;++L)for(var P=k+L*f.strides[2],O=L*s.strideWidth-u,Y=0;Y<o;++Y){var q=O+Y*c;if(!(q<0||q>=s.inWidth))for(var K=A+Y*a.strides[1],U=I+q*s.inChannels,J=P,F=K,X=0;X<s.inChannels;++X){for(var Q=p[U+X],ie=0;ie<h;++ie)g[J+ie]+=Q*x[F+ie];J+=h,F+=h}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(r,a,s){nr([r,a],"depthwiseConv2DDerInput");for(var i=ma(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=this.readSync(r.dataId),f=r.strides,p=f[0],x=f[1],g=f[2],b=this.readSync(a.dataId),y=a.strides,S=y[0],w=y[1],k=y[2],C=s.batchSize,D=s.filterHeight,E=s.filterWidth,A=s.inChannels,I=s.inHeight,L=s.inWidth,P=s.outChannels,O=s.outHeight,Y=s.outWidth,q=s.strideHeight,K=s.strideWidth,U=D-1-s.padInfo.top,J=E-1-s.padInfo.left,F=P/A,X=0;X<C;++X)for(var Q=0;Q<A;++Q)for(var ie=0;ie<I;++ie)for(var M=ie-U,V=Math.max(0,Math.ceil(M/q)),W=Math.min(O,(D+M)/q),ee=0;ee<L;++ee){for(var re=ee-J,ne=Math.max(0,Math.ceil(re/K)),ce=Math.min(Y,(E+re)/K),ae=0,Z=V;Z<W;++Z)for(var de=Z*q-M,z=ne;z<ce;++z)for(var se=p*X+x*Z+g*z,Ne=S*(D-1-de)+w*(E-1-(z*K-re))+k*Q,ue=0;ue<F;++ue)ae+=h[se+(Q*F+ue)]*b[Ne+ue];o[c*X+d*ie+u*ee+Q]=ae}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(r,a,s){nr([r,a],"depthwiseConv2DDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=ma(s.filterShape,"float32"),u=s.padInfo.left,h=s.padInfo.top,f=s.outChannels/s.inChannels,p=this.bufferSync(r),x=this.bufferSync(a),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((h-g)/i)),y=Math.min(s.outHeight,(s.inHeight+h-g)/i),S=0;S<c;++S)for(var w=Math.max(0,Math.ceil((u-S)/o)),k=Math.min(s.outWidth,(s.inWidth+u-S)/o),C=0;C<s.outChannels;++C){for(var D=Math.trunc(C/f),E=C%f,A=0,I=0;I<s.batchSize;++I)for(var L=b;L<y;++L)for(var P=g+L*i-h,O=w;O<k;++O){var Y=S+O*o-u;A+=p.get(I,P,Y,D)*x.get(I,L,O,C)}d.set(A,g,S,D,E)}return d.toTensor()},t.prototype.tile=function(r,a){return nr(r,"tile"),cK(this.bufferSync(r),a)},t.prototype.pad=function(r,a,s){nr(r,"pad");var i=a.map(function(f,p){return f[0]+r.shape[p]+f[1]}),o=a.map(function(f){return f[0]}),l=this.bufferSync(r),c=ma(i,r.dtype);s!==0&&c.values.fill(s);for(var d=0;d<r.size;d++){var u=l.indexToLoc(d),h=u.map(function(f,p){return f+o[p]});c.set.apply(c,[l.get.apply(l,u)].concat(h))}return c.toTensor()},t.prototype.transpose=function(r,a){nr(r,"transpose");for(var s=new Array(r.rank),i=0;i<s.length;i++)s[i]=r.shape[a[i]];var o=this.readSync(r.dataId),l=ma(s,r.dtype),c=this.bufferSync(r);for(i=0;i<r.size;++i){for(var d=c.indexToLoc(i),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[a[h]];var f=l.locToIndex(u);l.values[f]=o[i]}return l.toTensor()},t.prototype.gather=function(r,a,s){nr([r,a],"gather");var i=r.shape.slice(),o=this.readSync(a.dataId);i[s]=o.length;for(var l=ma(i,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d),h=u.slice();h[s]=o[u[s]];var f=c.locToIndex(h);l.values[d]=c.values[f]}return l.toTensor()},t.prototype.batchToSpaceND=function(r,a,s){nr([r],"batchToSpaceND");var i=a.reduce(function(h,f){return h*f}),o=A2(r.shape,a,i),l=T2(o.length,a.length),c=I2(r.shape,a,i),d=XY(s,a.length),u=QY(c,s,a.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,a,s){nr([r],"spaceToBatchND");var i=a.reduce(function(f,p){return f*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+a.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=A2(c.shape,a,i,!1),u=T2(d.length,a.length,!1),h=I2(c.shape,a,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.pool=function(r,a,s){nr(r,"pool");for(var i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterHeight,u=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(r.dataId),g=ma(a.outShape,r.dtype),b=g.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],S=a.outShape[2]*a.outShape[3],w=a.outShape[3],k=0;k<a.batchSize;++k)for(var C=k*y,D=k*r.strides[0],E=0;E<a.inChannels;++E)for(var A=0;A<a.outHeight;++A)for(var I=A*i-h,L=Math.max(0,I),P=Math.min(a.inHeight,d+I),O=C+A*S,Y=0;Y<a.outWidth;++Y){for(var q=Y*o-f,K=Math.max(0,q),U=Math.min(a.inWidth,u+q),J=p,F=0,X=0,Q=L;Q<P;Q+=l){for(var ie=D+Q*r.strides[1],M=K;M<U;M+=c){var V=x[ie+M*r.strides[2]+E];s==="max"&&V>J?J=V:s==="avg"&&(F+=V,X++)}if(isNaN(J))break}b[O+Y*w+E]=s==="avg"?F/X:J}return g.toTensor()},t.prototype.maxPool=function(r,a){return this.pool(r,a,"max")},t.prototype.maxPoolPositions=function(r,a){for(var s=ma(a.outShape,"int32"),i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterHeight,u=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,p=this.bufferSync(r),x=0;x<a.batchSize;++x)for(var g=0;g<a.inChannels;++g)for(var b=0;b<a.outHeight;++b){for(var y=b*i-h,S=y;S<0;)S+=l;for(var w=Math.min(a.inHeight,d+y),k=0;k<a.outWidth;++k){for(var C=k*o-f,D=C;D<0;)D+=c;for(var E=Math.min(a.inWidth,u+C),A=Number.NEGATIVE_INFINITY,I=-1,L=S;L<w;L+=l)for(var P=L-y,O=D;O<E;O+=c){var Y=O-C,q=p.get(x,L,O,g);q>A&&(A=q,I=P*u+Y)}s.set(I,x,b,k,g)}}return s.toTensor()},t.prototype.maxPoolBackprop=function(r,a,s,i){nr([a,s],"maxPoolBackprop");for(var o=this.maxPoolPositions(a,i),l=i.strideHeight,c=i.strideWidth,d=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,f=i.effectiveFilterWidth,p=f-1-i.padInfo.left,x=h-1-i.padInfo.top,g=ma(a.shape,"float32"),b=this.bufferSync(o),y=this.bufferSync(r),S=0;S<i.batchSize;++S)for(var w=0;w<i.inChannels;++w)for(var k=0;k<i.inHeight;++k)for(var C=0;C<i.inWidth;++C){for(var D=k-x,E=C-p,A=0,I=0;I<h;I+=d){var L=(D+I)/l;if(!(L<0||L>=i.outHeight||Math.floor(L)!==L))for(var P=0;P<f;P+=u){var O=(E+P)/c;if(!(O<0||O>=i.outWidth||Math.floor(O)!==O)){var Y=h*f-1-b.get(S,L,O,w)===I*f+P?1:0;Y!==0&&(A+=y.get(S,L,O,w)*Y)}}}g.set(A,S,k,C,w)}return g.toTensor()},t.prototype.avgPoolBackprop=function(r,a,s){nr([r,a],"avgPoolBackprop");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dilationHeight,u=s.dilationWidth,h=s.effectiveFilterHeight,f=s.effectiveFilterWidth,p=f-1-s.padInfo.left,x=h-1-s.padInfo.top,g=ma(a.shape,"float32"),b=1/(l*c),y=this.bufferSync(r),S=0;S<s.batchSize;++S)for(var w=0;w<s.inChannels;++w)for(var k=0;k<s.inHeight;++k)for(var C=0;C<s.inWidth;++C){for(var D=k-x,E=C-p,A=0,I=0;I<h;I+=d){var L=(D+I)/i;if(!(L<0||L>=s.outHeight||Math.floor(L)!==L))for(var P=0;P<f;P+=u){var O=(E+P)/o;O<0||O>=s.outWidth||Math.floor(O)!==O||(A+=y.get(S,L,O,w))}}g.set(A*b,S,k,C,w)}return g.toTensor()},t.prototype.pool3d=function(r,a,s){nr(r,"pool3d");for(var i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,d=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterDepth,f=a.effectiveFilterHeight,p=a.effectiveFilterWidth,x=a.padInfo.front,g=a.padInfo.top,b=a.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(r.dataId),w=ma(a.outShape,r.dtype),k=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],D=a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[3]*a.outShape[4],A=a.outShape[4],I=0;I<a.batchSize;++I)for(var L=I*C,P=I*r.strides[0],O=0;O<a.inChannels;++O)for(var Y=0;Y<a.outDepth;++Y){for(var q=Y*i-x,K=q;K<0;)K+=c;for(var U=Math.min(a.inDepth,h+q),J=L+Y*D,F=0;F<a.outHeight;++F){for(var X=F*o-g,Q=X;Q<0;)Q+=d;for(var ie=Math.min(a.inHeight,f+X),M=J+F*E,V=0;V<a.outWidth;++V){for(var W=V*l-b,ee=W;ee<0;)ee+=u;for(var re=Math.min(a.inWidth,p+W),ne=M+V*A,ce=y,ae=0,Z=0,de=K;de<U;de+=c){for(var z=P+de*r.strides[1],se=Q;se<ie;se+=d){for(var Ne=z+se*r.strides[2],ue=ee;ue<re;ue+=u){var oe=S[Ne+ue*r.strides[3]+O];if(s==="max"&&oe>ce?ce=oe:s==="avg"&&(ae+=oe,Z++),isNaN(ce))break}if(isNaN(ce))break}if(isNaN(ce))break}k[ne+O]=s==="avg"?ae/Z:ce}}}return w.toTensor()},t.prototype.avgPool3d=function(r,a){return nr(r,"avgPool3d"),this.pool3d(r,a,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(r,a,s){nr([r,a],"avgPool3dBackprop");for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=s.dilationDepth,f=s.dilationHeight,p=s.dilationWidth,x=s.effectiveFilterDepth,g=s.effectiveFilterHeight,b=s.effectiveFilterWidth,y=x-1-s.padInfo.front,S=b-1-s.padInfo.left,w=g-1-s.padInfo.top,k=ma(a.shape,"float32"),C=1/(c*d*u),D=this.bufferSync(r),E=0;E<s.batchSize;++E)for(var A=0;A<s.inChannels;++A)for(var I=0;I<s.inDepth;++I)for(var L=0;L<s.inHeight;++L)for(var P=0;P<s.inWidth;++P){for(var O=I-y,Y=L-w,q=P-S,K=0,U=0;U<x;U+=h){var J=(O+U)/i;if(!(J<0||J>=s.outDepth||Math.floor(J)!==J))for(var F=0;F<g;F+=f){var X=(Y+F)/o;if(!(X<0||X>=s.outHeight||Math.floor(X)!==X))for(var Q=0;Q<b;Q+=p){var ie=(q+Q)/l;ie<0||ie>=s.outWidth||Math.floor(ie)!==ie||(K+=D.get(E,J,X,ie,A))}}}k.set(K*C,E,I,L,P,A)}return k.toTensor()},t.prototype.maxPool3d=function(r,a){return nr(r,"maxPool3d"),this.pool3d(r,a,"max").toFloat()},t.prototype.maxPool3dPositions=function(r,a){for(var s=ma(a.outShape,"int32"),i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,d=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterDepth,f=a.effectiveFilterHeight,p=a.effectiveFilterWidth,x=a.padInfo.front,g=a.padInfo.top,b=a.padInfo.left,y=this.bufferSync(r),S=0;S<a.batchSize;++S)for(var w=0;w<a.inChannels;++w)for(var k=0;k<a.outDepth;++k){for(var C=k*i-x,D=C;D<0;)D+=c;for(var E=Math.min(a.inDepth,h+C),A=0;A<a.outHeight;++A){for(var I=A*o-g,L=I;L<0;)L+=d;for(var P=Math.min(a.inHeight,f+I),O=0;O<a.outWidth;++O){for(var Y=O*l-b,q=Y;q<0;)q+=u;for(var K=Math.min(a.inWidth,p+Y),U=Number.NEGATIVE_INFINITY,J=-1,F=D;F<E;F+=c)for(var X=F-C,Q=L;Q<P;Q+=d)for(var ie=Q-I,M=q;M<K;M+=u){var V=M-Y,W=y.get(S,F,Q,M,w);W>=U&&(U=W,J=X*f*p+ie*f+V)}s.set(J,S,k,A,O,w)}}}return s.toTensor()},t.prototype.maxPool3dBackprop=function(r,a,s,i){nr([a,s],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(a,i),l=i.strideDepth,c=i.strideHeight,d=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterDepth,x=i.effectiveFilterHeight,g=i.effectiveFilterWidth,b=p-1-i.padInfo.front,y=g-1-i.padInfo.left,S=x-1-i.padInfo.top,w=ma(a.shape,"float32"),k=this.bufferSync(o),C=this.bufferSync(r),D=0;D<i.batchSize;++D)for(var E=0;E<i.inChannels;++E)for(var A=0;A<i.inDepth;++A)for(var I=0;I<i.inHeight;++I)for(var L=0;L<i.inWidth;++L){for(var P=A-b,O=I-S,Y=L-y,q=0,K=0;K<p;K+=u){var U=(P+K)/l;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var J=0;J<x;J+=h){var F=(O+J)/c;if(!(F<0||F>=i.outHeight||Math.floor(F)!==F))for(var X=0;X<g;X+=f){var Q=(Y+X)/d;if(!(Q<0||Q>=i.outWidth||Math.floor(Q)!==Q)){var ie=p*x*g-1-k.get(D,U,F,Q,E)===K*x*g+J*g+X?1:0;ie!==0&&(q+=C.get(D,U,F,Q,E)*ie)}}}}w.set(q,D,A,I,L,E)}return w.toTensor()},t.prototype.cast=function(r,a){return sK(r,a,this)},t.prototype.reshape=function(r,a){return D3(r,a)},t.prototype.avgPool=function(r,a){return nr(r,"avgPool"),this.pool(r,a,"avg").toFloat()},t.prototype.resizeBilinear=function(r,a,s,i){nr(r,"resizeBilinear");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),f=new Float32Array(Lr([l,a,s,u])),p=[i&&a>1?c-1:c,i&&s>1?d-1:d],x=[i&&a>1?a-1:a,i&&s>1?s-1:s],g=0,b=p[0]/x[0],y=p[1]/x[1],S=0;S<l;S++)for(var w=0;w<a;w++)for(var k=b*w,C=Math.floor(k),D=k-C,E=Math.min(c-1,Math.ceil(k)),A=S*r.strides[0]+C*r.strides[1],I=S*r.strides[0]+E*r.strides[1],L=0;L<s;L++)for(var P=y*L,O=Math.floor(P),Y=P-O,q=Math.min(d-1,Math.ceil(P)),K=A+O*r.strides[2],U=I+O*r.strides[2],J=A+q*r.strides[2],F=I+q*r.strides[2],X=0;X<u;X++){var Q=h[K+X],ie=h[U+X],M=Q+(h[J+X]-Q)*Y,V=M+(ie+(h[F+X]-ie)*Y-M)*D;f[g++]=V}return ao(f,[l,a,s,u])},t.prototype.resizeBilinearBackprop=function(r,a,s){nr([r,a],"resizeBilinearBackprop");for(var i=a.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],f=u[2],p=new Float32Array(o*l*c*d),x=[s&&h>1?l-1:l,s&&f>1?c-1:c],g=[s&&h>1?h-1:h,s&&f>1?f-1:f],b=x[0]/g[0],y=x[1]/g[1],S=this.readSync(r.dataId),w=0,k=0;k<o;k++)for(var C=k*a.strides[0],D=0;D<h;D++)for(var E=D*b,A=Math.floor(E),I=Math.min(Math.ceil(E),l-1),L=C+A*a.strides[1],P=C+I*a.strides[1],O=E-A,Y=1-O,q=0;q<f;q++)for(var K=q*y,U=Math.floor(K),J=Math.min(Math.ceil(K),c-1),F=K-U,X=1-F,Q=L+U*a.strides[2],ie=L+J*a.strides[2],M=P+U*a.strides[2],V=P+J*a.strides[2],W=Y*X,ee=Y*F,re=O*X,ne=O*F,ce=0;ce<d;ce++){var ae=S[w++];p[Q+ce]+=ae*W,p[ie+ce]+=ae*ee,p[M+ce]+=ae*re,p[V+ce]+=ae*ne}return pl(p,[o,c,l,d],a.dtype)},t.prototype.resizeNearestNeighbor=function(r,a,s,i){nr(r,"resizeNearestNeighbor");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),f=new Float32Array(l*a*s*u),p=[i&&a>1?c-1:c,i&&s>1?d-1:d],x=[i&&a>1?a-1:a,i&&s>1?s-1:s],g=p[0]/x[0],b=p[1]/x[1],y=0,S=0;S<l;S++)for(var w=S*r.strides[0],k=0;k<a;k++)for(var C=g*k,D=w+Math.min(c-1,i?Math.round(C):Math.floor(C))*r.strides[1],E=0;E<s;E++)for(var A=b*E,I=D+Math.min(d-1,i?Math.round(A):Math.floor(A))*r.strides[2],L=0;L<u;L++){var P=h[I+L];f[y++]=P}return ao(f,[l,a,s,u],r.dtype)},t.prototype.resizeNearestNeighborBackprop=function(r,a,s){nr([r,a],"resizeNearestNeighborBackprop");for(var i=a.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],f=u[2],p=new Float32Array(o*l*c*d),x=this.readSync(r.dataId),g=[s&&h>1?l-1:l,s&&f>1?c-1:c],b=[s&&h>1?h-1:h,s&&f>1?f-1:f],y=g[0]/b[0],S=g[1]/b[1],w=1/y,k=1/S,C=2*Math.ceil(w)+2,D=2*Math.ceil(k)+2,E=0;E<o;E++)for(var A=E*a.strides[0],I=0;I<l;I++)for(var L=A+I*a.strides[1],P=Math.floor(I*w),O=Math.floor(P-C/2),Y=0;Y<c;Y++)for(var q=L+Y*a.strides[2],K=Math.floor(Y*k),U=Math.floor(K-D/2),J=0;J<d;J++){for(var F=0,X=0;X<C;X++){var Q=X+O;if(!(Q<0||Q>=h)){var ie=A+Q*r.strides[1],M=Q*y;if(I===Math.min(l-1,s?Math.round(M):Math.floor(M)))for(var V=0;V<D;V++){var W=V+U;if(!(W<0||W>=f)){var ee=ie+W*r.strides[2],re=W*S;Y===Math.min(c-1,s?Math.round(re):Math.floor(re))&&(F+=x[ee+J])}}}}p[q+J]=F}return pl(p,a.shape,a.dtype)},t.prototype.batchNormalization=function(r,a,s,i,o,l){nr([r,a,s,o,l],"batchNorm");for(var c=this.readSync(r.dataId),d=this.readSync(a.dataId),u=this.readSync(s.dataId),h=o?this.readSync(o.dataId):new Float32Array([1]),f=l?this.readSync(l.dataId):new Float32Array([0]),p=new Float32Array(c.length),x=f.length,g=h.length,b=u.length,y=d.length,S=0,w=0,k=0,C=0,D=0;D<c.length;++D)p[D]=f[S++]+(c[D]-d[w++])*h[k++]/Math.sqrt(u[C++]+i),S>=x&&(S=0),w>=y&&(w=0),k>=g&&(k=0),C>=b&&(C=0);return pl(p,r.shape)},t.prototype.localResponseNormalization4D=function(r,a,s,i,o){nr(r,"localResponseNormalization4D");var l=r.shape[3],c=l-1,d=this.readSync(r.dataId),u=r.size,h=new Float32Array(u);function f(b){for(var y=b%l,S=b-y+Math.max(0,y-a),w=b-y+Math.min(y+a,c),k=0;S<=w;S++){var C=d[S];k+=C*C}return k}for(var p=0;p<u;p++){var x=f(p),g=d[p]*Math.pow(s+i*x,-o);h[p]=g}return pl(h,r.shape)},t.prototype.LRNGrad=function(r,a,s,i,o,l,c){nr(r,"LRNGrad");for(var d=r.shape[3],u=this.readSync(r.dataId),h=this.readSync(a.dataId),f=this.readSync(s.dataId),p=new Float32Array(r.size),x=r.size,g=0;g<x;g++){for(var b=g%d,y=g-b+Math.max(0,b-i),S=g-b+Math.min(d,b+i+1),w=0,k=y;k<S;k++)w+=Math.pow(h[k],2);for(w=l*w+o,k=y;k<S;k++){var C=-2*l*c*h[k]*f[g]/w;g===k&&(C+=Math.pow(w,-c)),C*=u[g],p[k]+=C}}return pl(p,r.shape)},t.prototype.multinomial=function(r,a,s,i){nr(r,"multinomial");for(var o=a?r:kf(r),l=o.shape[0],c=o.shape[1],d=Un([l,s],"int32"),u=this.readSync(d.dataId),h=this.readSync(o.dataId),f=0;f<l;++f){var p=f*c,x=new Float32Array(c-1);x[0]=h[p];for(var g=1;g<x.length;++g)x[g]=x[g-1]+h[p+g];for(var b=dC(i.toString()),y=f*s,S=0;S<s;++S){var w=b();u[y+S]=x.length;for(var k=0;k<x.length;k++)if(w<x[k]){u[y+S]=k;break}}}return d},t.prototype.oneHot=function(r,a,s,i){nr(r,"oneHot");var o=new Float32Array(r.size*a);o.fill(i);for(var l=this.readSync(r.dataId),c=0;c<r.size;++c)l[c]>=0&&l[c]<a&&(o[c*a+l[c]]=s);return Um(o,[r.size,a],"int32")},t.prototype.nonMaxSuppression=function(r,a,s,i,o){return nr(r,"nonMaxSuppression"),wI(this.readSync(r.dataId),this.readSync(a.dataId),s,i,o)},t.prototype.fft=function(r){return this.fftBatch(r,!1)},t.prototype.ifft=function(r){return this.fftBatch(r,!0)},t.prototype.fftBatch=function(r,a){for(var s=r.shape[0],i=r.shape[1],o=ma(r.shape,"float32"),l=ma(r.shape,"float32"),c=Wc(r).as2D(s,i),d=Mu(r).as2D(s,i),u=0;u<s;u++)for(var h=c.slice([u,0],[1,i]),f=d.slice([u,0],[1,i]),p=Ji(h,f),x=this.readSync(this.fftImpl(p,a).dataId),g=0;g<i;g++){var b=g7(x,g);o.values[u*i+g]=b.real,l.values[u*i+g]=b.imag}return Ji(o.toTensor(),l.toTensor()).as2D(s,i)},t.prototype.fftImpl=function(r,a){var s=r.as1D(),i=s.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(s,i,a).as2D(r.shape[0],r.shape[1]);return a&&(o=Ji(Wc(o).div(Nr(i)),Mu(o).div(Nr(i)))),o}var l=this.readSync(r.dataId),c=function(d){for(var u=new Float32Array(d.length/2),h=new Float32Array(d.length/2),f=0;f<d.length;f+=2)u[f/2]=d[f],h[f/2]=d[f+1];return{real:u,imag:h}}(this.fourierTransformByMatmul(l,i,a));return Ji(c.real,c.imag).as2D(r.shape[0],r.shape[1])},t.prototype.isExponentOf2=function(r){return(r&r-1)==0},t.prototype.fftRadix2=function(r,a,s){if(a===1)return r;var i=this.readSync(r.dataId),o=a/2,l=function(y){for(var S=Math.ceil(y.length/4),w=new Float32Array(S),k=new Float32Array(S),C=0;C<y.length;C+=4)w[Math.floor(C/4)]=y[C],k[Math.floor(C/4)]=y[C+1];return{real:w,imag:k}}(i),c=Ji(l.real,l.imag).as1D(),d=function(y){for(var S=Math.floor(y.length/4),w=new Float32Array(S),k=new Float32Array(S),C=2;C<y.length;C+=4)w[Math.floor(C/4)]=y[C],k[Math.floor(C/4)]=y[C+1];return{real:w,imag:k}}(i),u=Ji(d.real,d.imag).as1D();c=this.fftRadix2(c,o,s),u=this.fftRadix2(u,o,s);var h=function(y,S){for(var w=new Float32Array(y/2),k=new Float32Array(y/2),C=0;C<Math.ceil(y/2);C++){var D=(S?2:-2)*Math.PI*(C/y);w[C]=Math.cos(D),k[C]=Math.sin(D)}return{real:w,imag:k}}(a,s),f=Ji(h.real,h.imag).mul(u),p=c.add(f),x=c.sub(f),g=Wc(p).concat(Wc(x)),b=Mu(p).concat(Mu(x));return Ji(g,b).as1D()},t.prototype.fourierTransformByMatmul=function(r,a,s){for(var i=new Float32Array(2*a),o=0;o<a;o++){for(var l=0,c=0,d=0;d<a;d++){var u=pIe(o*d,a,s),h=g7(r,d);l+=h.real*u.real-h.imag*u.imag,c+=h.real*u.imag+h.imag*u.real}s&&(l/=a,c/=a),mIe(i,l,c,o)}return i},t.prototype.depthToSpace=function(r,a,s){We(s==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+s}),We(a>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+a});for(var i=r.shape[0],o=r.shape[1],l=r.shape[2],c=r.shape[3],d=o*a,u=l*a,h=c/(a*a),f=this.readSync(r.dataId),p=new Float32Array(i*d*u*h),x=0,g=0;g<i;++g)for(var b=0;b<d;++b)for(var y=Math.floor(b/a),S=b%a,w=0;w<u;++w)for(var k=Math.floor(w/a),C=(S*a+w%a)*h,D=0;D<h;++D){var E=D+C+c*(k+l*(y+o*g));p[x++]=f[E]}return pl(p,[i,d,u,h])},t.prototype.broadcastedBinaryOp=function(r,a,s,i){var o=Ra(r.shape,a.shape),l=ma(o,s),c=this.readSync(r.dataId),d=this.readSync(a.dataId),u=Pm(r.shape,o),h=Pm(a.shape,o),f=l.values;if(u.length+h.length===0)for(var p=0;p<f.length;++p)f[p]=i(c[p%c.length],d[p%d.length]);else{var x=this.bufferSync(r),g=this.bufferSync(a),b=function(y){var S=l.indexToLoc(y),w=S.slice(-r.rank);u.forEach(function(E){return w[E]=0});var k=x.locToIndex(w),C=S.slice(-a.rank);h.forEach(function(E){return C[E]=0});var D=g.locToIndex(C);f[y]=i(c[k],d[D])};for(p=0;p<f.length;++p)b(p)}return l.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(r,a,s){var i=Ra(r.shape,a.shape),o=ma(i,"float32"),l=ma(i,"float32"),c=this.readSync(r.dataId),d=this.readSync(a.dataId),u=Pm(r.shape,i),h=Pm(a.shape,i),f=o.values,p=l.values;if(u.length+h.length===0)for(var x=0;x<f.length;x++){var g=x%c.length,b=x%d.length,y=s(c[2*g],c[2*g+1],d[2*b],d[2*b+1]);f[x]=y.real,p[x]=y.imag}else{var S=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=this.bufferSync(this.data.get(a.dataId).complexTensors.real),k=function(C){var D=o.indexToLoc(C),E=D.slice(-r.rank);u.forEach(function(O){return E[O]=0});var A=S.locToIndex(E),I=D.slice(-a.rank);h.forEach(function(O){return I[O]=0});var L=w.locToIndex(I),P=s(c[2*A],c[2*A+1],d[2*L],d[2*L+1]);f[C]=P.real,p[C]=P.imag};for(x=0;x<f.length;x++)k(x)}return this.complex(o.toTensor(),l.toTensor())},t.prototype.split=function(r,a,s){return lK(r,a,s)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(r,a,s,i,o,l){for(var c=r.shape,d=c[0],u=c[1],h=c[2],f=c[3],p=a.shape[0],x=i[0],g=i[1],b=ma([p,x,g,f],"float32"),y=this.readSync(a.dataId),S=this.readSync(s.dataId),w=this.readSync(r.dataId),k=r.strides,C=b.strides,D=0;D<p;D++){var E=4*D,A=y[E],I=y[E+1],L=y[E+2],P=y[E+3],O=S[D];if(!(O>=d))for(var Y=x>1?(L-A)*(u-1)/(x-1):0,q=g>1?(P-I)*(h-1)/(g-1):0,K=0;K<x;K++){var U=x>1?A*(u-1)+K*Y:.5*(A+L)*(u-1);if(U<0||U>u-1)for(var J=0;J<g;J++)for(var F=0;F<f;F++){var X=F+J*C[2]+K*C[1]+D*C[0];b.values[X]=l}else if(o==="bilinear"){var Q=Math.floor(U),ie=Math.ceil(U),M=U-Q;for(J=0;J<g;J++)if((de=g>1?I*(h-1)+J*q:.5*(I+P)*(h-1))<0||de>h-1)for(F=0;F<f;F++)X=F+J*C[2]+K*C[1]+D*C[0],b.values[X]=l;else{var V=Math.floor(de),W=Math.ceil(de),ee=de-V;for(F=0;F<f;F++){var re=w[X=F+V*k[2]+Q*k[1]+O*k[0]],ne=w[X=F+W*k[2]+Q*k[1]+O*k[0]],ce=w[X=F+V*k[2]+ie*k[1]+O*k[0]],ae=re+(ne-re)*ee,Z=ce+(w[X=F+W*k[2]+ie*k[1]+O*k[0]]-ce)*ee;X=F+J*C[2]+K*C[1]+D*C[0],b.values[X]=ae+(Z-ae)*M}}}else for(J=0;J<g;++J){var de;if((de=g>1?I*(h-1)+J*q:.5*(I+P)*(h-1))<0||de>h-1)for(F=0;F<f;F++)X=F+J*C[2]+K*C[1]+D*C[0],b.values[X]=l;else{var z=Math.round(de),se=Math.round(U);for(F=0;F<f;F++){var Ne=F+z*k[2]+se*k[1]+O*k[0],ue=F+J*C[2]+K*C[1]+D*C[0];b.values[ue]=w[Ne]}}}}}return b.toTensor()},t.prototype.sparseToDense=function(r,a,s,i){var o=P2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.sliceSize,u=o.strides,h=o.outputSize;return this.scatter(r,a,s,h,d,c,l,u,i,!1)},t.prototype.gatherND=function(r,a){var s=a.shape,i=s[s.length-1],o=JY(r,a),l=o[0],c=o[1],d=o[2],u=o[3];if(c===0)return ao([],l,r.dtype);for(var h=new Gy([c,d],r.dtype),f=this.readSync(a.dataId),p=this.readSync(r.dataId),x=0;x<c;x++){for(var g=[],b=0,y=0;y<i;y++){var S=f[x*i+y];b+=S*u[y],g.push(S)}if(b<0||b>=r.size/d)throw new Error("Invalid indices: "+g+" does not index into "+r.shape);for(var w=0;w<d;w++)h.values[x*d+w]=p[b*d+w]}return h.toTensor().reshape(l)},t.prototype.scatterND=function(r,a,s){var i=P2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=Nr(0);return this.scatter(r,a,s,u,c,l,o,d,h,!0)},t.prototype.fill=function(r,a,s){var i=w2(s=s||I1(a),Lr(r));return i.fill(a),ht.makeTensor(i,r,s,this)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){var a=w2(r.dtype,Lr(r.shape));return this.makeOutput(a,r.shape,r.dtype)},t.prototype.linspace=function(r,a,s){return iK(r,a,s)},t.prototype.scatter=function(r,a,s,i,o,l,c,d,u,h){var f=[i/o,o],p=this.readSync(r.dataId),x=this.readSync(a.dataId);if(i===0)return ao([],s,a.dtype);var g=new Gy(f,a.dtype);g.values.fill(this.readSync(u.dataId)[0]);for(var b=0;b<l;b++){for(var y=[],S=0,w=0;w<c;w++){var k=p[b*c+w];y.push(k),S+=k*d[w]}if(S<0||S>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+s);for(var C=0;C<o;C++)h?g.values[S*o+C]+=x[b*o+C]:g.values[S*o+C]=a.rank===0?x[0]:x[b*o+C]}return g.toTensor().reshape(s)},t}(aK);ht.registerBackend("cpu",function(){return new MRe},1);for(var yD=0,U7=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=e.attrs,s=t,i=s.boxes,o=s.scores,l=a,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,f=r;nr(i,"NonMaxSuppressionWithScore");var p=SI(f.data.get(i.dataId).values,f.data.get(o.dataId).values,c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t.x,s=r;nr(a,"square");for(var i=s.data.get(a.dataId).values,o=new Float32Array(i.length),l=0;l<i.length;++l){var c=i[l];o[l]=c*c}return{dataId:s.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:Xy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t,s=a.a,i=a.b,o=r;nr([s,i],Xy);var l=o.data.get(s.dataId).values,c=o.data.get(i.dataId).values,d=function(f,p,x,g,b,y){var S=Ra(f,p),w=S.length,k=Gu(S),C=Wy(b,Lr(S)),D=f.length,E=p.length,A=Gu(f),I=Gu(p),L=Pm(f,S),P=Pm(p,S);if(L.length+P.length===0)for(var O=0;O<C.length;++O)C[O]=y(x[O%x.length],g[O%g.length]);else{var Y=function(q){var K=HTe(q,w,k),U=K.slice(-D);L.forEach(function(Q){return U[Q]=0});var J=c7(U,D,A),F=K.slice(-E);P.forEach(function(Q){return F[Q]=0});var X=c7(F,E,I);C[q]=y(x[J],g[X])};for(O=0;O<C.length;++O)Y(O)}return[C,S]}(s.shape,i.shape,l,c,s.dtype,function(f,p){var x=f-p;return x*x}),u=d[0],h=d[1];return{dataId:o.write(u,h,s.dtype),shape:h,dtype:s.dtype}}}];yD<U7.length;yD++)TY(U7[yD]);var Kv,RRe=function(e){this.variableNames=["A"];var t=Ao(),r=e[0],a=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+a+".0, "+r+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},FRe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Ao(),r=e[0],a=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+a+".0, "+r+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var jD=0,$7=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=e.attrs,s=t.pixels,i=a.numChannels,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,c=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=c[0],u=c[1],h=[u,d],f=[u,d,i];(l||o)&&(Kv==null&&(Kv=document.createElement("canvas").getContext("2d")),Kv.canvas.width=d,Kv.canvas.height=u,Kv.drawImage(s,0,0,d,u),s=Kv.canvas);var p=r.makeTensorInfo(h,"int32");r.texData.get(p.dataId).usage=rc.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(p.dataId),s);var x=Ht().getBool("WEBGL_PACK")?new FRe(f):new RRe(f),g=r.runWebGLProgram(x,[p],"int32");return r.disposeData(p.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=e.attrs;_2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t,i=s.boxes,o=s.scores,l=a,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,f=r,p=SI(f.readSync(i.dataId),f.readSync(o.dataId),c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t.x,s=r,i=new Na(a.shape,"return x * x;");return s.runWebGLProgram(i,[a],a.dtype)}},{kernelName:Xy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,a=t,s=a.a,i=a.b,o=r,l=Ht().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $h("return (a - b) * (a - b);",s.shape,i.shape):new Ns("return (a - b) * (a - b);",s.shape,i.shape);return o.compileAndRun(l,[s,i])}}];jD<$7.length;jD++)TY($7[jD]);for(var ND=0,V7=[{kernelName:"Square",gradFunc:function(e,t){var r=t[0];return{x:function(){return e.mul(r.toFloat().mul(2))}}}},{kernelName:Xy,gradFunc:function(e,t){var r=t[0],a=t[1],s=Nr(2);return{a:function(){return Oo(e,Oo(s,ji(r,a)))},b:function(){return Oo(e,Oo(s,ji(a,r)))}}}}];ND<V7.length;ND++)OTe(V7[ND]);var LRe=function(){function e(){}return e.prototype.fetch=function(t,r){return fetch(t,r)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+r);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return new TextDecoder(r).decode(t)},e}();Ht().get("IS_BROWSER")&&Ht().setPlatform("browser",new LRe);var wD,BRe=function(){return require("node-fetch")},URe=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,r){return Ht().global.fetch!=null?Ht().global.fetch(t,r):(wD==null&&(wD=BRe()),wD(t,r))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+r);return this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return t.length===0?"":new this.util.TextDecoder(r).decode(t)},e}();Ht().get("IS_NODE")&&Ht().setPlatform("node",new URe);var I3={float32:4,int32:4,uint16:2,uint8:1,bool:1},U2=4;function eX(e,t){for(var r={},a=0,s=function(l){var c=l.name,d=l.dtype,u=l.shape,h=Lr(u),f=void 0;if("quantization"in l){var p=l.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var x=I3[p.dtype],g=e.slice(a,a+h*x),b=p.dtype==="uint8"?new Uint8Array(g):new Uint16Array(g);if(d==="float32")f=Float32Array.from(b,function(D){return D*p.scale+p.min});else{if(d!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+d);f=Int32Array.from(b,function(D){return Math.round(D*p.scale+p.min)})}a+=h*x}else if(d==="string"){var y=Lr(l.shape);f=[];for(var S=0;S<y;S++){var w=new Uint32Array(e.slice(a,a+U2))[0];a+=U2;var k=new Uint8Array(e.slice(a,a+w));f.push(k),a+=w}}else{var C=I3[d];if(g=e.slice(a,a+h*C),d==="float32")f=new Float32Array(g);else if(d==="int32")f=new Int32Array(g);else{if(d!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+d);f=new Uint8Array(g)}a+=h*C}r[c]=ao(f,u,d)},i=0,o=t;i<o.length;i++)s(o[i]);return r}function $Re(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,r=[];e.forEach(function(i){if(t+=i.byteLength,r.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var a=new Uint8Array(t),s=0;return r.forEach(function(i){a.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),a.buffer}var P3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function q7(e){return P3?Buffer.byteLength(e):new Blob([e]).size}function qI(e){var t=0;e.forEach(function(s){t+=s.byteLength});var r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(new Uint8Array(s),a),a+=s.byteLength}),r.buffer}function z7(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function B1(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:q7(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:q7(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var ac=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,r){return e.getHandlers(t,"load",r)},e.getHandlers=function(t,r,a){var s=[];return(r==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,a);o!==null&&s.push(o)}),s},e}(),k0="://",$m=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,r){We(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(k0)&&(t=t.slice(0,t.indexOf(k0))),We(t.length>0,function(){return"scheme must not be an empty string."});var a=e.getInstance();We(a.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),a.managers[t]=r},e.getManager=function(t){var r=this.getInstance().managers[t];if(r==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return r},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function ew(e){if(e.indexOf(k0)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+$m.getSchemes().join(","));return{scheme:e.split(k0)[0],path:e.split(k0)[1]}}function H7(e,t,r){return r===void 0&&(r=!1),Pr(this,void 0,void 0,function(){var a,s,i,o,l,c,d,u,h;return Or(this,function(f){switch(f.label){case 0:return We(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),We((a=ac.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),We(a.length<2,function(){return"Copying failed because more than one ("+a.length+") load handlers for source URL "+e+"."}),s=a[0],We((i=ac.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),We(i.length<2,function(){return"Copying failed because more than one ("+a.length+") save handlers for destination URL "+t+"."}),o=i[0],l=ew(e).scheme,c=ew(e).path,d=l===ew(e).scheme,[4,s.load()];case 1:return u=f.sent(),r&&d?[4,$m.getManager(l).removeModel(c)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,o.save(u)];case 4:return h=f.sent(),!r||d?[3,6]:[4,$m.getManager(l).removeModel(c)];case 5:f.sent(),f.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var hx="models_store",Om="model_info_store";function tX(){if(!Ht().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function O3(e){var t=e.result;t.createObjectStore(hx,{keyPath:"modelPath"}),t.createObjectStore(Om,{keyPath:"modelPath"})}var _0=function(){function e(t){if(this.indexedDB=tX(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,r){var a=this;return new Promise(function(s,i){var o=a.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return O3(o)},o.onsuccess=function(){var l=o.result;if(r==null){var c=l.transaction(hx,"readonly"),d=c.objectStore(hx).get(a.modelPath);d.onsuccess=function(){if(d.result==null)return l.close(),i(new Error("Cannot find model with path '"+a.modelPath+"' in IndexedDB."));s(d.result.modelArtifacts)},d.onerror=function(g){return l.close(),i(d.error)},c.oncomplete=function(){return l.close()}}else{var u,h=B1(r),f=l.transaction(Om,"readwrite"),p=f.objectStore(Om),x=p.put({modelPath:a.modelPath,modelArtifactsInfo:h});x.onsuccess=function(){var g=(u=l.transaction(hx,"readwrite")).objectStore(hx).put({modelPath:a.modelPath,modelArtifacts:r,modelArtifactsInfo:h});g.onsuccess=function(){return s({modelArtifactsInfo:h})},g.onerror=function(b){var y=(p=f.objectStore(Om)).delete(a.modelPath);y.onsuccess=function(){return l.close(),i(g.error)},y.onerror=function(S){return l.close(),i(g.error)}}},x.onerror=function(g){return l.close(),i(x.error)},f.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}}},o.onerror=function(l){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),W7=function(e){return Ht().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_0.URL_SCHEME)?(t=e.slice(_0.URL_SCHEME.length),new _0(t)):null;var t};ac.registerSaveRouter(W7),ac.registerLoadRouter(W7);var VRe=function(){function e(){this.indexedDB=tX()}return e.prototype.listModels=function(){return Pr(this,void 0,void 0,function(){var t=this;return Or(this,function(r){return[2,new Promise(function(a,s){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return O3(i)},i.onsuccess=function(){var o=i.result,l=o.transaction(Om,"readonly"),c=l.objectStore(Om).getAll();c.onsuccess=function(){for(var d={},u=0,h=c.result;u<h.length;u++){var f=h[u];d[f.modelPath]=f.modelArtifactsInfo}a(d)},c.onerror=function(d){return o.close(),s(c.error)},l.oncomplete=function(){return o.close()}},i.onerror=function(o){return s(i.error)}})]})})},e.prototype.removeModel=function(t){return Pr(this,void 0,void 0,function(){var r=this;return Or(this,function(a){var s;return t=(s=t).startsWith(_0.URL_SCHEME)?s.slice(_0.URL_SCHEME.length):s,[2,new Promise(function(i,o){var l=r.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return O3(l)},l.onsuccess=function(){var c,d=l.result,u=d.transaction(Om,"readwrite"),h=u.objectStore(Om),f=h.get(t);f.onsuccess=function(){if(f.result==null)return d.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=h.delete(t),x=function(){var g=(c=d.transaction(hx,"readwrite")).objectStore(hx).delete(t);g.onsuccess=function(){return i(f.result.modelArtifactsInfo)},g.onerror=function(b){return o(f.error)}};p.onsuccess=x,p.onerror=function(g){return x(),d.close(),o(f.error)}},f.onerror=function(p){return d.close(),o(f.error)},u.oncomplete=function(){c==null?d.close():c.oncomplete=function(){return d.close()}}},l.onerror=function(c){return o(l.error)}})]})})},e}();if(Ht().getBool("IS_BROWSER"))try{$m.registerManager(_0.URL_SCHEME,new VRe)}catch{}var zh="/",s0="tensorflowjs_models",rX="info",qRe="model_topology",zRe="weight_specs",HRe="weight_data",WRe="model_metadata";function aX(e){return{info:[s0,e,rX].join(zh),topology:[s0,e,qRe].join(zh),weightSpecs:[s0,e,zRe].join(zh),weightData:[s0,e,HRe].join(zh),modelMetadata:[s0,e,WRe].join(zh)}}function GRe(e){var t=e.split(zh);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(zh)}var E0=function(){function e(t){if(!Ht().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=aX(this.modelPath)}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,a,s;return Or(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");r=JSON.stringify(t.modelTopology),a=JSON.stringify(t.weightSpecs),s=B1(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,function(o){if(P3)return Buffer.from(o).toString("base64");for(var l=new Uint8Array(o),c="",d=0,u=l.length;d<u;d++)c+=String.fromCharCode(l[d]);return btoa(c)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:s}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+s.modelTopologyBytes+", weightSpecsBytes="+s.weightSpecsBytes+", weightDataBytes="+s.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,a,s,i,o,l;return Or(this,function(c){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(r={},(a=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(r.modelTopology=a,(s=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(r.weightSpecs=s,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),r.format=o.format,r.generatedBy=o.generatedBy,r.convertedBy=o.convertedBy,r.userDefinedMetadata=o.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return r.weightData=function(d){if(P3){var u=Buffer.from(d,"base64");return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)}for(var h=atob(d),f=new Uint8Array(h.length),p=0;p<h.length;++p)f.set([h.charCodeAt(p)],p);return f.buffer}(l),[2,r]})})},e.URL_SCHEME="localstorage://",e}(),G7=function(e){return Ht().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(E0.URL_SCHEME)?(t=e.slice(E0.URL_SCHEME.length),new E0(t)):null;var t};ac.registerSaveRouter(G7),ac.registerLoadRouter(G7);var YRe=function(){function e(){We(Ht().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),We(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Pr(this,void 0,void 0,function(){var t,r,a,s,i,o;return Or(this,function(l){for(t={},r=s0+zh,a=zh+rX,s=0;s<this.LS.length;++s)(i=this.LS.key(s)).startsWith(r)&&i.endsWith(a)&&(o=GRe(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return Pr(this,void 0,void 0,function(){var r,a;return Or(this,function(s){var i;if(t=(i=t).startsWith(E0.URL_SCHEME)?i.slice(E0.URL_SCHEME.length):i,r=aX(t),this.LS.getItem(r.info)==null)throw new Error("Cannot find model at path '"+t+"'");return a=JSON.parse(this.LS.getItem(r.info)),this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),[2,a]})})},e}();if(Ht().getBool("IS_BROWSER"))try{$m.registerManager(E0.URL_SCHEME,new YRe)}catch{}var KRe="model",XRe=".json",QRe=".weights.bin";function Y7(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var SD=function(){function e(t){if(!Ht().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=KRe),this.modelTopologyFileName=t+XRe,this.weightDataFileName=t+QRe}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l;return Or(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(r=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:a},i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,Y7(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),t.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=r,[4,Y7(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:B1(t)}]}})})},e.URL_SCHEME="downloads://",e}(),JRe=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,a=this;return Or(this,function(s){return t=this.files[0],r=this.files.slice(1),[2,new Promise(function(i,o){var l=new FileReader;l.onload=function(c){var d=JSON.parse(c.target.result),u=d.modelTopology;if(u!=null){r.length===0&&i({modelTopology:u});var h=d.weightsManifest;if(h!=null){var f;try{f=a.checkManifestAndWeightFiles(h,r)}catch(b){return void o(b)}var p=[],x=[],g=[];h.forEach(function(b){b.paths.forEach(function(y){x.push(y),g.push(null)}),p.push.apply(p,b.weights)}),h.forEach(function(b){b.paths.forEach(function(y){var S=new FileReader;S.onload=function(w){var k=w.target.result,C=x.indexOf(y);g[C]=k,g.indexOf(null)===-1&&i({modelTopology:u,weightSpecs:p,weightData:qI(g),format:d.format,generatedBy:d.generatedBy,convertedBy:d.convertedBy,userDefinedMetadata:d.userDefinedMetadata})},S.onerror=function(w){return o("Failed to weights data from file of path '"+y+"'.")},S.readAsArrayBuffer(f[y])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},l.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,r){for(var a=[],s=r.map(function(c){return z7(c.name)}),i={},o=0,l=t;o<l.length;o++)l[o].paths.forEach(function(c){var d=z7(c);if(a.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+d+"'");if(a.push(d),s.indexOf(d)===-1)throw new Error("Weight file with basename '"+d+"' is not provided.");i[c]=r[s.indexOf(d)]});if(a.length!==r.length)throw new Error("Mismatch in the number of files in weights manifest ("+a.length+") and the number of weight files provided ("+r.length+").");return i},e}();function K7(e,t,r,a){(function(i){We(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){We(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),We(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),We(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(r=r??0,a=a??1);var s=0;return Promise.all(e.map(function(i){return i.then(function(o){var l=r+ ++s/e.length*(a-r);return t(l),o}),i}))}function nX(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u;return Or(this,function(h){switch(h.label){case 0:return t==null&&(t={}),r=t.fetchFunc==null?Ht().platform.fetch:t.fetchFunc,a=e.map(function(f){return r(f,t.requestInit,{isBinary:!0})}),s=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(a)];case 1:return o=h.sent(),[3,4];case 2:return[4,K7(a,t.onProgress,s,i)];case 3:o=h.sent(),h.label=4;case 4:return l=o.map(function(f){return f.arrayBuffer()}),c=.5,d=1,t.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return u=h.sent(),[3,8];case 6:return[4,K7(l,t.onProgress,c,d)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}})})}function X7(e){var t=this;return function(r,a,s){return a===void 0&&(a=""),Pr(t,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,x;return Or(this,function(g){switch(g.label){case 0:if(i=r.map(function(){return!1}),o={},l=s!=null?s.map(function(){return!1}):[],c=[],r.forEach(function(b,y){var S=0;b.weights.forEach(function(w){var k="quantization"in w?w.quantization.dtype:w.dtype,C=I3[k]*Lr(w.shape),D=function(){i[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:w,groupOffset:S,sizeBytes:C})};s!=null?s.forEach(function(E,A){E===w.name&&(D(),l[A]=!0)}):D(),c.push(w.name),S+=C})}),!l.every(function(b){return b}))throw d=s.filter(function(b,y){return!l[y]}),new Error("Could not find weights in manifest with names: "+d.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return u=i.reduce(function(b,y,S){return y&&b.push(S),b},[]),h=[],u.forEach(function(b){r[b].paths.forEach(function(y){var S=a+(a.endsWith("/")?"":"/")+y;h.push(S)})}),[4,e(h)];case 1:return f=g.sent(),p={},x=0,u.forEach(function(b){for(var y=r[b].paths.length,S=0,w=0;w<y;w++)S+=f[x+w].byteLength;for(var k=new ArrayBuffer(S),C=new Uint8Array(k),D=0,E=0;E<y;E++){var A=new Uint8Array(f[x+E]);C.set(A,D),D+=A.byteLength}o[b].forEach(function(I){var L=eX(k.slice(I.groupOffset,I.groupOffset+I.sizeBytes),[I.manifestEntry]);for(var P in L)p[P]=L[P]}),x+=y}),[2,p]}})})}}ac.registerSaveRouter(function(e){return Ht().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(SD.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new SD(t)}(e.slice(SD.URL_SCHEME.length)):null});var sX=function(){function e(t,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,r.fetchFunc!=null?(We(typeof r.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=r.fetchFunc):this.fetch=Ht().platform.fetch,We(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&We(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,a,s,i;return Or(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,a=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:a},r.body.append("model.json",new Blob([JSON.stringify(s)],{type:"application/json"}),"model.json"),t.weightData!=null&&r.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,r)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:B1(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,a,s,i,o,l,c,d,u,h,f;return Or(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return r=p.sent(),[3,5];case 4:throw p.sent(),a="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a);case 5:if(s=r.modelTopology,i=r.weightsManifest,o=r.generatedBy,l=r.convertedBy,c=r.format,d=r.userDefinedMetadata,s==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:f=p.sent(),u=f[0],h=f[1],p.label=7;case 7:return[2,{modelTopology:s,weightSpecs:u,weightData:h,userDefinedMetadata:d,generatedBy:o,convertedBy:l,format:c}]}})})},e.prototype.loadWeights=function(t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h,f;return Or(this,function(p){switch(p.label){case 0:for(r=Array.isArray(this.path)?this.path[1]:this.path,a=function(x){var g=x.lastIndexOf("/"),b=x.lastIndexOf("?"),y=x.substring(0,g),S=b>g?x.substring(b):"";return[y+"/",S]}(r),s=a[0],i=a[1],o=this.weightPathPrefix||s,l=[],c=0,d=t;c<d.length;c++)u=d[c],l.push.apply(l,u.weights);return h=[],t.forEach(function(x){x.paths.forEach(function(g){h.push(o+g+i)})}),[4,nX(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=p.sent(),[2,[l,qI(f)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function M3(e){return e.match(sX.URL_SCHEME_REGEX)!=null}var Q7=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(r){return M3(r)}):M3(e))?R3(e,{onProgress:t}):null};function R3(e,t){return new sX(e,t)}ac.registerSaveRouter(Q7),ac.registerLoadRouter(Q7);var CD=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(t){return[2,this.modelArtifacts]})})},e}(),ZRe=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,this.saveHandler(t)]})})},e}(),iX=Object.freeze({browserFiles:function(e){return new JRe(e)},browserHTTPRequest:function(e,t){return R3(e,t)},concatenateArrayBuffers:qI,decodeWeights:eX,encodeWeights:function(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l=this;return Or(this,function(c){switch(c.label){case 0:for(r=[],a=[],s=Array.isArray(e)?e.map(function(d){return d.name}):Object.keys(e),i=function(d){var u=s[d],h=Array.isArray(e)?e[d].tensor:e[u];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+u+"': "+h.dtype);var f={name:u,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var p=new Promise(function(x){return Pr(l,void 0,void 0,function(){var g,b,y,S,w,k,C;return Or(this,function(D){switch(D.label){case 0:return[4,h.bytes()];case 1:for(g=D.sent(),b=g.reduce(function(E,A){return E+A.length},0)+U2*g.length,y=new Uint8Array(b),S=0,w=0;w<g.length;w++)k=g[w],C=new Uint8Array(new Uint32Array([k.length]).buffer),y.set(C,S),S+=U2,y.set(k,S),S+=k.length;return x(y),[2]}})})});a.push(p)}else a.push(h.data());t!=null&&(f.group=t),r.push(f)},o=0;o<s.length;++o)i(o);return[4,Promise.all(a)];case 1:return[2,{data:$Re(c.sent()),specs:r}]}})})},fromMemory:function(e,t,r,a){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new CD(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new CD({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new CD({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:a}))},getLoadHandlers:function(e,t){return ac.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:B1,getSaveHandlers:function(e){return ac.getSaveHandlers(e)},http:R3,isHTTPScheme:M3,loadWeights:function(e,t,r,a){return t===void 0&&(t=""),Pr(this,void 0,void 0,function(){return Or(this,function(s){return[2,X7(function(i){return nX(i,{requestInit:a})})(e,t,r)]})})},registerLoadRouter:function(e){return ac.registerLoadRouter(e)},registerSaveRouter:function(e){return ac.registerSaveRouter(e)},weightsLoaderFactory:X7,withSaveHandler:function(e){return new ZRe(e)},copyModel:function(e,t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,H7(e,t,!1)]})})},listModels:function(){return Pr(this,void 0,void 0,function(){var e,t,r,a,s,i,o;return Or(this,function(l){switch(l.label){case 0:e=$m.getSchemes(),t={},r=0,a=e,l.label=1;case 1:return r<a.length?(s=a[r],[4,$m.getManager(s).listModels()]):[3,4];case 2:for(o in i=l.sent())t[s+k0+o]=i[o];l.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,H7(e,t,!0)]})})},removeModel:function(e){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){return t=ew(e),[2,$m.getManager(t.scheme).removeModel(t.path)]})})}}),Xv;tt({confusionMatrix_:function(e,t,r){var a=Fe(e,"labels","confusionMatrix"),s=Fe(t,"predictions","confusionMatrix");We(r==null||r>0&&Number.isInteger(r),function(){return"If provided, numClasses must be a positive integer, but got "+r}),We(a.rank===1,function(){return"Expected the rank of labels to be 1, but got "+a.rank}),We(s.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+s.rank}),We(a.shape[0]===s.shape[0],function(){return"Mismatch in the number of examples: "+a.shape[0]+" vs. "+s.shape[0]+". Labels and predictions should have the same number of elements."}),We(r>0&&Number.isInteger(r),function(){return"numClasses is required to be a positive integer, but got "+r});var i=_3(a.asType("int32"),r),o=_3(s.asType("int32"),r);return i.transpose().matMul(o).asType("int32")}});var eFe=tt({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=!1,a=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)a=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(s&&s&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(AY("FromPixels",ht.backendName)!=null)return ht.runKernel("FromPixels",{pixels:e},{numChannels:t});var l,c,d=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=d[0],h=d[1];if(o?l=e.getContext("2d").getImageData(0,0,u,h).data:a||r?l=e.data:(i||s)&&(Xv==null&&(Xv=document.createElement("canvas").getContext("2d")),Xv.canvas.width=u,Xv.canvas.height=h,Xv.drawImage(e,0,0,u,h),l=Xv.getImageData(0,0,u,h).data),t===4)c=new Int32Array(l);else{var f=u*h;c=new Int32Array(f*t);for(var p=0;p<f;p++)for(var x=0;x<t;++x)c[p*t+x]=l[4*p+x]}return gI(c,[h,u,t],"int32")}}),zI=Object.freeze({toPixels:function(e,t){return Pr(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A;return Or(this,function(I){switch(I.label){case 0:if(r=Fe(e,"img","toPixels"),e instanceof ds||(r=r.toInt()),r.rank!==2&&r.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");if(a=r.shape.slice(0,2),s=a[0],i=a[1],(o=r.rank===2?1:r.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,r.data()];case 1:return l=I.sent(),c=r.min(),d=r.max(),[4,Promise.all([c.data(),d.data()])];case 2:if(u=I.sent(),h=u[0],f=u[1],p=h[0],x=f[0],c.dispose(),d.dispose(),r.dtype==="float32"){if(p<0||x>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+x+"].")}else{if(r.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");if(p<0||x>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+x+"].")}for(g=r.dtype==="float32"?255:1,b=new Uint8ClampedArray(i*s*4),y=0;y<s*i;++y)S=void 0,w=void 0,k=void 0,C=void 0,o===1?(S=l[y]*g,w=l[y]*g,k=l[y]*g,C=255):o===3?(S=l[3*y]*g,w=l[3*y+1]*g,k=l[3*y+2]*g,C=255):o===4&&(S=l[4*y]*g,w=l[4*y+1]*g,k=l[4*y+2]*g,C=l[4*y+3]*g),b[(D=4*y)+0]=Math.round(S),b[D+1]=Math.round(w),b[D+2]=Math.round(k),b[D+3]=Math.round(C);return t!=null&&(t.width=i,t.height=s,E=t.getContext("2d"),A=new ImageData(b,i,s),E.putImageData(A,0,0)),r!==e&&r.dispose(),[2,b]}})})},fromPixels:eFe}),tFe=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,r){return new t(r)},e}(),rFe=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function iv(e){We(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),We(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),We(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),rFe.register(e)}var ov=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Wd(t,e),t.prototype.minimize=function(r,a,s){a===void 0&&(a=!1);var i=this.computeGradients(r,s),o=i.value,l=i.grads;if(s!=null){var c=s.map(function(d){return{name:d.name,tensor:l[d.name]}});this.applyGradients(c)}else this.applyGradients(l);return jl(l),a?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(r,a){return hIe(r,a)},t.prototype.dispose=function(){this.iterations_!=null&&jl(this.iterations_)},t.prototype.saveIterations=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Nr(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){switch(s.label){case 0:return a=this,[4,r[0].tensor.data()];case 1:return a.iterations_=s.sent()[0],[2,r.slice(1)]}})})},t}(tFe);Object.defineProperty(ov,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var aFe=function(e){function t(r,a,s){s===void 0&&(s=null);var i=e.call(this)||this;return i.learningRate=r,i.rho=a,i.epsilon=s,i.accumulatedGrads=[],i.accumulatedUpdates=[],s==null&&(i.epsilon=ht.backend.epsilon()),i}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];a.accumulatedGrads[i]==null&&(a.accumulatedGrads[i]={originalName:s+"/accum_grad",variable:Er(function(){return Va(o).variable(!1)})}),a.accumulatedUpdates[i]==null&&(a.accumulatedUpdates[i]={originalName:s+"/accum_var",variable:Er(function(){return Va(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=a.accumulatedGrads[i].variable,d=a.accumulatedUpdates[i].variable;Er(function(){var u=c.mul(a.rho).add(l.square().mul(1-a.rho)),h=d.add(a.epsilon).sqrt().div(c.add(a.epsilon).sqrt()).mul(l),f=d.mul(a.rho).add(h.square().mul(1-a.rho));c.assign(u),d.assign(f);var p=h.mul(-a.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(jl(this.accumulatedGrads.map(function(r){return r.variable})),jl(this.accumulatedUpdates.map(function(r){return r.variable})))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(a){switch(a.label){case 0:return r=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[a.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),a=r.length/2,this.accumulatedGrads=r.slice(0,a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=r.slice(a,2*a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(r,a){return new r(a.learningRate,a.rho,a.epsilon)},t.className="Adadelta",t}(ov);iv(aFe);var nFe=function(e){function t(r,a){a===void 0&&(a=.1);var s=e.call(this)||this;return s.learningRate=r,s.initialAccumulatorValue=a,s.accumulatedGrads=[],s}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];a.accumulatedGrads[i]==null&&(a.accumulatedGrads[i]={originalName:s+"/accumulator",variable:Er(function(){return Yu(o.shape,a.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=a.accumulatedGrads[i].variable;Er(function(){var d=c.add(l.square());c.assign(d);var u=l.div(d.add(ht.backend.epsilon()).sqrt()).mul(-a.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&jl(this.accumulatedGrads.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulatedGrads.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:return r=a.sent(),this.accumulatedGrads=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(r,a){return new r(a.learningRate,a.initialAccumulatorValue)},t.className="Adagrad",t}(ov);iv(nFe);var sFe=function(e){function t(r,a,s,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=r,o.beta1=a,o.beta2=s,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Er(function(){o.accBeta1=Nr(a).variable(),o.accBeta2=Nr(s).variable()}),i==null&&(o.epsilon=ht.backend.epsilon()),o}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);Er(function(){var i=ji(1,a.accBeta1),o=ji(1,a.accBeta2);s.forEach(function(l,c){var d=ht.registeredVariables[l];a.accumulatedFirstMoment[c]==null&&(a.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Er(function(){return Va(d).variable(!1)})}),a.accumulatedSecondMoment[c]==null&&(a.accumulatedSecondMoment[c]={originalName:l+"/v",variable:Er(function(){return Va(d).variable(!1)})});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=a.accumulatedFirstMoment[c].variable,f=a.accumulatedSecondMoment[c].variable,p=h.mul(a.beta1).add(u.mul(1-a.beta1)),x=f.mul(a.beta2).add(u.square().mul(1-a.beta2)),g=p.div(i),b=x.div(o);h.assign(p),f.assign(x);var y=g.div(b.sqrt().add(a.epsilon)).mul(-a.learningRate).add(d);d.assign(y)}}),a.accBeta1.assign(a.accBeta1.mul(a.beta1)),a.accBeta2.assign(a.accBeta2.mul(a.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&jl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedSecondMoment!=null&&jl(this.accumulatedSecondMoment.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(a){switch(a.label){case 0:return r=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[a.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var a,s=this;return Or(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(r)];case 1:return r=i.sent(),Er(function(){s.accBeta1.assign(L2(s.beta1,s.iterations_+1)),s.accBeta2.assign(L2(s.beta2,s.iterations_+1))}),a=r.length/2,this.accumulatedFirstMoment=r.slice(0,a).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=r.slice(a,2*a).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(r,a){return new r(a.learningRate,a.beta1,a.beta2,a.epsilon)},t.className="Adam",t}(ov);iv(sFe);var iFe=function(e){function t(r,a,s,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var l=e.call(this)||this;return l.learningRate=r,l.beta1=a,l.beta2=s,l.epsilon=i,l.decay=o,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],Er(function(){l.iteration=Nr(0).variable(),l.accBeta1=Nr(a).variable()}),i==null&&(l.epsilon=ht.backend.epsilon()),l}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);Er(function(){var i=ji(1,a.accBeta1),o=Ad(-a.learningRate,a.iteration.mul(a.decay).add(1));s.forEach(function(l,c){var d=ht.registeredVariables[l];a.accumulatedFirstMoment[c]==null&&(a.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Va(d).variable(!1)}),a.accumulatedWeightedInfNorm[c]==null&&(a.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:Va(d).variable(!1)});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=a.accumulatedFirstMoment[c].variable,f=a.accumulatedWeightedInfNorm[c].variable,p=h.mul(a.beta1).add(u.mul(1-a.beta1)),x=f.mul(a.beta2),g=u.abs(),b=x.maximum(g);h.assign(p),f.assign(b);var y=o.div(i).mul(p.div(b.add(a.epsilon))).add(d);d.assign(y)}}),a.iteration.assign(a.iteration.add(1)),a.accBeta1.assign(a.accBeta1.mul(a.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&jl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedWeightedInfNorm!=null&&jl(this.accumulatedWeightedInfNorm.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(r,a){return new r(a.learningRate,a.beta1,a.beta2,a.epsilon,a.decay)},t.className="Adamax",t}(ov);iv(iFe);var oX=function(e){function t(r){var a=e.call(this)||this;return a.learningRate=r,a.setLearningRate(r),a}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=Array.isArray(r)?r[i].tensor:r[s];if(o!=null){var l=ht.registeredVariables[s];Er(function(){var c=a.c.mul(o).add(l);l.assign(c)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=k4e(Nr(-r))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()]]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:if((r=a.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(r,a){return new r(a.learningRate)},t.className="SGD",t}(ov);iv(oX);var oFe=function(e){function t(r,a,s){s===void 0&&(s=!1);var i=e.call(this,r)||this;return i.learningRate=r,i.momentum=a,i.useNesterov=s,i.accumulations=[],i.m=Nr(i.momentum),i}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];a.accumulations[i]==null&&(a.accumulations[i]={originalName:s+"/momentum",variable:Er(function(){return Va(o).variable(!1)})});var l=a.accumulations[i].variable,c=Array.isArray(r)?r[i].tensor:r[s];c!=null&&Er(function(){var d,u=a.m.mul(l).add(c);d=a.useNesterov?a.c.mul(c.add(u.mul(a.m))).add(o):a.c.mul(u).add(o),l.assign(u),o.assign(d)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&jl(this.accumulations.map(function(r){return r.variable}))},t.prototype.setMomentum=function(r){this.momentum=r},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulations.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:return r=a.sent(),this.accumulations=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(r,a){return new r(a.learningRate,a.momentum,a.useNesterov)},t.className="Momentum",t}(oX);iv(oFe);var lFe=function(e){function t(r,a,s,i,o){a===void 0&&(a=.9),s===void 0&&(s=0),i===void 0&&(i=null),o===void 0&&(o=!1);var l=e.call(this)||this;if(l.learningRate=r,l.decay=a,l.momentum=s,l.epsilon=i,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=o,i==null&&(l.epsilon=ht.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Wd(t,e),t.prototype.applyGradients=function(r){var a=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];a.accumulatedMeanSquares[i]==null&&(a.accumulatedMeanSquares[i]={originalName:s+"/rms",variable:Er(function(){return Va(o).variable(!1)})}),a.accumulatedMoments[i]==null&&(a.accumulatedMoments[i]={originalName:s+"/momentum",variable:Er(function(){return Va(o).variable(!1)})}),a.accumulatedMeanGrads[i]==null&&a.centered&&(a.accumulatedMeanGrads[i]={originalName:s+"/mg",variable:Er(function(){return Va(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=a.accumulatedMeanSquares[i].variable,d=a.accumulatedMoments[i].variable;Er(function(){var u=c.mul(a.decay).add(l.square().mul(1-a.decay));if(a.centered){var h=a.accumulatedMeanGrads[i].variable,f=h.mul(a.decay).add(l.mul(1-a.decay)),p=d.mul(a.momentum).add(l.mul(a.learningRate).div(u.sub(f.square().add(a.epsilon)).sqrt()));c.assign(u),h.assign(f),d.assign(p);var x=o.sub(p);o.assign(x)}else{var g=c.mul(a.decay).add(l.square().mul(1-a.decay));p=d.mul(a.momentum).add(l.mul(a.learningRate).div(g.add(a.epsilon).sqrt())),c.assign(g),d.assign(p),x=o.sub(p),o.assign(x)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&jl(this.accumulatedMeanSquares.map(function(r){return r.variable})),this.accumulatedMeanGrads!=null&&this.centered&&jl(this.accumulatedMeanGrads.map(function(r){return r.variable})),this.accumulatedMoments!=null&&jl(this.accumulatedMoments.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(a){switch(a.label){case 0:return r=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&r.push.apply(r,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[a.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var a;return Or(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),a=this.centered?r.length/3:r.length/2,this.accumulatedMeanSquares=r.slice(0,a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=r.slice(a,2*a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=r.slice(2*a,3*a).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(r,a){return new r(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)},t.className="RMSProp",t}(ov);iv(lFe);ds.prototype.squaredDifference=function(e){return NK(this,e)},Ut=ORe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F3=function(e,t){return F3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},F3(e,t)};function fa(e,t){F3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _o=function(){return _o=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_o.apply(this,arguments)};function Ur(e,t,r,a){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((a=a.apply(e,[])).next())})}function $r(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],s=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function uy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)a[s]=i[o];return a}var D0=function(){function e(t,r){if(!Sx(t)||!Sx(r))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:r}));this._width=t,this._height=r}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function gC(e,t){return e instanceof ds&&e.shape.length===t}function cFe(e){return gC(e,2)}function bC(e){return gC(e,3)}function Vm(e){return gC(e,4)}function dFe(e){return e%1!==0}function J7(e){return e%2===0}function uFe(e,t){t===void 0&&(t=2);var r=Math.pow(10,t);return Math.floor(e*r)/r}function Z7(e){return e&&e.width&&e.height}function hFe(e,t){var r=e.width,a=e.height,s=t/Math.max(a,r);return new D0(Math.round(r*s),Math.round(a*s))}function HI(e){return e.reduce(function(t,r){return t.add(r)},new sn(0,0)).div(new sn(e.length,e.length))}function Qy(e,t,r){return Array(e).fill(0).map(function(a,s){return t+s*r})}function Sx(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function e9(e){return Sx(e)&&0<=e&&e<=1}var sn=function(){function e(t,r){this._x=t,this._y=r}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),tp=function(){function e(t,r){r===void 0&&(r=!0);var a=t||{},s=[a.left,a.top,a.right,a.bottom].every(Sx),i=[a.x,a.y,a.width,a.height].every(Sx);if(!i&&!s)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(a));var o=i?[a.x,a.y,a.width,a.height]:[a.left,a.top,a.right-a.left,a.bottom-a.top],l=o[0],c=o[1],d=o[2],u=o[3];e.assertIsValidBox({x:l,y:c,width:d,height:u},"Box.constructor",r),this._x=l,this._y=c,this._width=d,this._height=u}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Sx)},e.assertIsValidBox=function(t,r,a){if(a===void 0&&(a=!1),!e.isRect(t))throw new Error(r+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!a&&(t.width<0||t.height<0))throw new Error(r+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new sn(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new sn(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new sn(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new sn(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),r=t[0],a=t[1],s=t[2],i=t[3];return new e({x:r,y:a,width:s,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),r=t[0],a=t[1],s=t[2],i=t[3];return new e({x:r,y:a,width:s,height:i})},e.prototype.toSquare=function(){var t=this,r=t.x,a=t.y,s=t.width,i=t.height,o=Math.abs(s-i);return s<i&&(r-=o/2,s+=o),i<s&&(a-=o/2,i+=o),new e({x:r,y:a,width:s,height:i})},e.prototype.rescale=function(t){var r=Z7(t)?t.width:t,a=Z7(t)?t.height:t;return new e({x:this.x*r,y:this.y*a,width:this.width*r,height:this.height*a})},e.prototype.pad=function(t,r){var a=[this.x-t/2,this.y-r/2,this.width+t,this.height+r],s=a[0],i=a[1],o=a[2],l=a[3];return new e({x:s,y:i,width:o,height:l})},e.prototype.clipAtImageBorders=function(t,r){var a=this,s=a.x,i=a.y,o=a.right,l=a.bottom,c=Math.max(s,0),d=Math.max(i,0),u=o-c,h=l-d,f=Math.min(u,t-c),p=Math.min(h,r-d);return new e({x:c,y:d,width:f,height:p}).floor()},e.prototype.shift=function(t,r){var a=this,s=a.width,i=a.height,o=this.x+t,l=this.y+r;return new e({x:o,y:l,width:s,height:i})},e.prototype.padAtBorders=function(t,r){var a=this.width+1,s=this.height+1,i=1,o=1,l=a,c=s,d=this.left,u=this.top,h=this.right,f=this.bottom;return h>r&&(l=-h+r+a,h=r),f>t&&(c=-f+t+s,f=t),d<1&&(c=2-d,d=1),u<1&&(c=2-u,u=1),{dy:o,edy:c,dx:i,edx:l,y:u,ey:f,x:d,ex:h,w:a,h:s}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),yC=function(e){fa(t,e);function t(r,a,s,i,o){return o===void 0&&(o=!1),e.call(this,{left:r,top:a,right:s,bottom:i},o)||this}return t}(tp),lX=function(){function e(t,r,a,s,i){this._imageDims=new D0(i.width,i.height),this._score=t,this._classScore=r,this._className=a,this._box=new tp(s).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new tp(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:r})},e}(),dh=function(e){fa(t,e);function t(r,a,s){return e.call(this,r,r,"",a,s)||this}return t.prototype.forSize=function(r,a){var s=e.prototype.forSize.call(this,r,a),i=s.score,o=s.relativeBox,l=s.imageDims;return new t(i,o,l)},t}(lX);function fFe(e,t,r){r===void 0&&(r=!0);var a=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),s=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=a*s;return r?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function mFe(e){var t=e.map(function(l){return l.x}),r=e.map(function(l){return l.y}),a=t.reduce(function(l,c){return c<l?c:l},1/0),s=r.reduce(function(l,c){return c<l?c:l},1/0),i=t.reduce(function(l,c){return l<c?c:l},0),o=r.reduce(function(l,c){return l<c?c:l},0);return new yC(a,s,i,o)}function Jy(e,t,r,a){a===void 0&&(a=!0);for(var s=t.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),i=[],o=function(){var l=s.pop();i.push(l);for(var c=s,d=[],u=0;u<c.length;u++){var h=c[u],f=e[l],p=e[h];d.push(fFe(f,p,a))}s=s.filter(function(x,g){return d[g]<=r})};s.length>0;)o();return i}function U1(e,t){return Er(function(){var r=t[0],a=t[1],s=t[2],i=Yu(uy(e.shape.slice(0,3),[1]),r),o=Yu(uy(e.shape.slice(0,3),[1]),a),l=Yu(uy(e.shape.slice(0,3),[1]),s),c=vi([i,o,l],3);return ji(e,c)})}function pFe(e,t){return t===void 0&&(t=!1),Er(function(){var r=e.shape.slice(1),a=r[0],s=r[1];if(a===s)return e;var i=Math.abs(a-s),o=Math.round(i*(t?.5:1)),l=a>s?2:1,c=function(p){var x=e.shape.slice();return x[l]=p,Yu(x,0)},d=c(o),u=i-d.shape[l],h=t&&u?c(u):null,f=[h,e,d].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return vi(f,l)})}function kD(e){return 1/(1+Math.exp(-e))}var WI=function(e){fa(t,e);function t(r,a,s,i,o){return o===void 0&&(o=!1),e.call(this,{x:r,y:a,width:s,height:i},o)||this}return t}(tp),xFe=.5,vFe=.43,gFe=.45,$2=function(){function e(t,r,a){a===void 0&&(a=new sn(0,0));var s=r.width,i=r.height;this._imgDims=new D0(s,i),this._shift=a,this._positions=t.map(function(o){return o.mul(new sn(s,i)).add(a)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new sn(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(r){return r.sub(t._shift).div(new sn(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new this.constructor(this.relativePositions,{width:t,height:r})},e.prototype.shiftBy=function(t,r){return new this.constructor(this.relativePositions,this._imgDims,new sn(t,r))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,r){if(r===void 0&&(r={}),t){var a=t instanceof dh?t.box.floor():new tp(t);return this.shiftBy(a.x,a.y).align(null,r)}var s=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},r),i=s.useDlibAlignment,o=s.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),r=t[0],a=t[1],s=t[2],i=function(h){return s.sub(h).magnitude()},o=(i(r)+i(a))/2,l=Math.floor(o/gFe),c=HI(t),d=Math.floor(Math.max(0,c.x-xFe*l)),u=Math.floor(Math.max(0,c.y-vFe*l));return new WI(d,u,Math.min(l,this.imageWidth+d),Math.min(l,this.imageHeight+u))},e.prototype.alignMinBbox=function(t){var r=mFe(this.positions);return r.pad(r.width*t,r.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),bFe=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var r=this.positions;return[r[0],r[1],HI([r[3],r[4]])]},t}($2),yFe=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(HI)},t}($2),t9=function(){function e(t,r){this._label=t,this._distance=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+uFe(this.distance)+")":"")},e}(),r9=function(e){fa(t,e);function t(r,a){var s=e.call(this,r)||this;return s._label=a,s}return t.assertIsValidLabeledBox=function(r,a){if(tp.assertIsValidBox(r,a),!Sx(r.label))throw new Error(a+" - expected property label ("+r.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(tp),f0=function(){function e(t,r){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(r)||r.some(function(a){return!(a instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var r=t.descriptors.map(function(a){return new Float32Array(a)});return new e(t.label,r)},e}();(function(e){fa(t,e);function t(r,a,s,i){var o=e.call(this,r,a)||this;return o._score=s,o._classScore=i,o}return t.assertIsValidPredictedBox=function(r,a){if(r9.assertIsValidLabeledBox(r,a),!e9(r.score)||!e9(r.classScore))throw new Error(a+" - expected properties score ("+r.score+") and ("+r.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(r9);function jFe(e){return e.detection instanceof dh}function GI(e,t){var r={detection:t};return Object.assign({},e,r)}function cX(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function dX(e){var t="";if(!e)try{e=require("fs")}catch(a){t=a.toString()}var r=e?function(a){return new Promise(function(s,i){e.readFile(a,function(o,l){return o?i(o):s(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function uX(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,r=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},a=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},s=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=dX();return _o({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:r,createImageElement:a,fetch:s},i)}function hX(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function fX(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var pi;function NFe(){if(!pi)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return pi}function L3(e){pi=e}function YI(){hX()&&L3(cX()),fX()&&L3(uX())}function wFe(e){if(pi||YI(),!pi)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,r=t===void 0?pi.Canvas:t,a=e.Image,s=a===void 0?pi.Image:a;pi.Canvas=r,pi.Image=s,pi.createCanvasElement=e.createCanvasElement||function(){return new r},pi.createImageElement=e.createImageElement||function(){return new s},pi.ImageData=e.ImageData||pi.ImageData,pi.Video=e.Video||pi.Video,pi.fetch=e.fetch||pi.fetch,pi.readFile=e.readFile||pi.readFile}var Fo={getEnv:NFe,setEnv:L3,initialize:YI,createBrowserEnv:cX,createFileSystem:dX,createNodejsEnv:uX,monkeyPatch:wFe,isBrowser:hX,isNodejs:fX};YI();function mX(e){return!Fo.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Vx(e){var t=Fo.getEnv(),r=t.Canvas,a=t.CanvasRenderingContext2D;if(e instanceof a)return e;var s=mX(e);if(!(s instanceof r))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=s.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var a9;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(a9||(a9={}));function pX(e){var t=Fo.getEnv(),r=t.Image,a=t.Video;return e instanceof r&&e.complete||e instanceof a&&e.readyState>=3}function SFe(e){return new Promise(function(t,r){if(e instanceof Fo.getEnv().Canvas||pX(e))return t();function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",s),t(i))}function s(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",s),r(i))}e.addEventListener("load",a),e.addEventListener("error",s)})}function xX(e){var t=Fo.getEnv(),r=t.Image,a=t.Video;return e instanceof r?new D0(e.naturalWidth,e.naturalHeight):e instanceof a?new D0(e.videoWidth,e.videoHeight):new D0(e.width,e.height)}function jC(e){var t=e.width,r=e.height,a=Fo.getEnv().createCanvasElement,s=a();return s.width=t,s.height=r,s}function KI(e,t){var r=Fo.getEnv().ImageData;if(!(e instanceof r)&&!pX(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var a=xX(e),s=a.width,i=a.height,o=jC({width:s,height:i});return e instanceof r?Vx(o).putImageData(e,0,0):Vx(o).drawImage(e,0,0,s,i),o}function CFe(e,t){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l;return $r(this,function(c){switch(c.label){case 0:return r=Fo.getEnv().createCanvasElement(),a=e.shape.slice(Vm(e)?1:0),s=a[0],i=a[1],o=a[2],l=Er(function(){return e.as3D(s,i,o).toInt()}),[4,zI.toPixels(l,r)];case 1:return c.sent(),l.dispose(),[2,r]}})})}function n9(e){var t=Fo.getEnv(),r=t.Image,a=t.Canvas,s=t.Video;return e instanceof r||e instanceof a||e instanceof s}function kFe(e,t,r){r===void 0&&(r=!1);var a=Fo.getEnv(),s=a.Image,i=a.Canvas;if(!(e instanceof s||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=xX(e),l=t/Math.max(o.height,o.width),c=l*o.width,d=l*o.height,u=jC({width:t,height:t}),h=e instanceof i?e:KI(e),f=Math.abs(c-d)/2,p=r&&c<d?f:0,x=r&&d<c?f:0;return Vx(u).drawImage(h,p,x,c,d),u}var V2=function(){function e(t,r){var a=this;if(r===void 0&&(r=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=r,this._batchSize=t.length,t.forEach(function(s,i){if(bC(s)){a._imageTensors[i]=s,a._inputDimensions[i]=s.shape;return}if(Vm(s)){var o=s.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");a._imageTensors[i]=s,a._inputDimensions[i]=s.shape.slice(1);return}var l=s instanceof Fo.getEnv().Canvas?s:KI(s);a._canvases[i]=l,a._inputDimensions[i]=[l.height,l.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Qy(this.batchSize,0,1).map(function(r,a){return t.getReshapedInputDimensions(a)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var r=this.getInputWidth(t),a=this.getInputHeight(t);return hFe({width:r,height:a},this.inputSize)},e.prototype.toBatchTensor=function(t,r){var a=this;return r===void 0&&(r=!0),this._inputSize=t,Er(function(){var s=Qy(a.batchSize,0,1).map(function(o){var l=a.getInput(o);if(l instanceof ds){var c=Vm(l)?l:l.expandDims();return c=pFe(c,r),(c.shape[1]!==t||c.shape[2]!==t)&&(c=LI.resizeBilinear(c,[t,t])),c.as3D(t,t,3)}if(l instanceof Fo.getEnv().Canvas)return zI.fromPixels(kFe(l,t,r));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),i=cc(s.map(function(o){return o.toFloat()})).as4D(a.batchSize,t,t,3);return i})},e}();function Li(e){return Ur(this,void 0,void 0,function(){var t,r,a;return $r(this,function(s){switch(s.label){case 0:if(e instanceof V2)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return r=function(i){return Array.isArray(e)?" at input index "+i+":":""},a=t.map(mX),a.forEach(function(i,o){if(!n9(i)&&!bC(i)&&!Vm(i))throw typeof t[o]=="string"?new Error("toNetInput -"+r(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+r(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Vm(i)){var l=i.shape[0];if(l!==1)throw new Error("toNetInput -"+r(o)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(a.map(function(i){return n9(i)&&SFe(i)}))];case 1:return s.sent(),[2,new V2(a,Array.isArray(e))]}})})}function XI(e,t){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l,c;return $r(this,function(d){switch(d.label){case 0:return r=Fo.getEnv().Canvas,a=e,e instanceof r?[3,5]:[4,Li(e)];case 1:if(s=d.sent(),s.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=s.getInput(0),i instanceof r?(o=i,[3,4]):[3,2];case 2:return[4,CFe(i)];case 3:o=d.sent(),d.label=4;case 4:a=o,d.label=5;case 5:return l=Vx(a),c=t.map(function(u){return u instanceof dh?u.forSize(a.width,a.height).box.floor():u}).map(function(u){return u.clipAtImageBorders(a.width,a.height)}),[2,c.map(function(u){var h=u.x,f=u.y,p=u.width,x=u.height,g=jC({width:p,height:x});return Vx(g).putImageData(l.getImageData(h,f,p,x),0,0),g})]}})})}function QI(e,t){return Ur(this,void 0,void 0,function(){return $r(this,function(r){if(!bC(e)&&!Vm(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Vm(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Er(function(){var a=e.shape.slice(Vm(e)?1:0),s=a[0],i=a[1],o=a[2],l=t.map(function(d){return d instanceof dh?d.forSize(i,s).box:d}).map(function(d){return d.clipAtImageBorders(i,s)}),c=l.map(function(d){var u=d.x,h=d.y,f=d.width,p=d.height;return qK(e.as3D(s,i,o),[h,u,0],[p,f,o])});return c})]})})}function _Fe(e,t){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return r=Fo.getEnv().fetch,[4,r(e,t)];case 1:if(a=s.sent(),!(a.status<400))throw new Error("failed to fetch: ("+a.status+") "+a.statusText+", from url: "+a.url);return[2,a]}})})}function EFe(e){return Ur(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,_Fe(e)];case 1:return[2,t.sent().json()]}})})}function vX(e,t){var r=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:r};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+r};var a=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(a,"");var s=e.split("/").filter(function(l){return l}),i=e.endsWith(".json")?s[s.length-1]:r,o=a+(e.endsWith(".json")?s.slice(0,s.length-1):s).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function DFe(e,t){return Ur(this,void 0,void 0,function(){var r,a,s,i;return $r(this,function(o){switch(o.label){case 0:return r=vX(e,t),a=r.manifestUri,s=r.modelBaseUri,[4,EFe(a)];case 1:return i=o.sent(),[2,iX.loadWeights(i,s)]}})})}var Ef=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var r=this.traversePropertyPath(t),a=r.obj,s=r.objProp;return a[s]},e.prototype.reassignParamFromPath=function(t,r){var a=this.traversePropertyPath(t),s=a.obj,i=a.objProp;s[i].dispose(),s[i]=r},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(r){var a=r.paramPath;return{path:a,tensor:t.getParamFromPath(a)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof J0})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof J0)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(r){var a=r.path,s=r.tensor;t.reassignParamFromPath(a,s.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(r){var a=r.path,s=r.tensor,i=ao(s.dataSync());s.dispose(),t.reassignParamFromPath(a,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(r){if(t&&r.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+r.path);r.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var r=t.tensor;return Array.from(r.dataSync())}).reduce(function(t,r){return t.concat(r)}))},e.prototype.load=function(t){return Ur(this,void 0,void 0,function(){return $r(this,function(r){switch(r.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Ur(this,void 0,void 0,function(){var r;return $r(this,function(a){switch(a.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,DFe(t,this.getDefaultModelName())];case 1:return r=a.sent(),this.loadFromWeightMap(r),[2]}})})},e.prototype.loadFromDisk=function(t){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l,c,d,u,h;return $r(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return r=Fo.getEnv().readFile,a=vX(t,this.getDefaultModelName()),s=a.manifestUri,i=a.modelBaseUri,o=function(p){return Promise.all(p.map(function(x){return r(x).then(function(g){return g.buffer})}))},l=iX.weightsLoaderFactory(o),u=(d=JSON).parse,[4,r(s)];case 1:return c=u.apply(d,[f.sent().toString()]),[4,l(c,i)];case 2:return h=f.sent(),this.loadFromWeightMap(h),[2]}})})},e.prototype.loadFromWeightMap=function(t){var r=this.extractParamsFromWeigthMap(t),a=r.paramMappings,s=r.params;this._paramMappings=a,this._params=s},e.prototype.extractWeights=function(t){var r=this.extractParams(t),a=r.paramMappings,s=r.params;this._paramMappings=a,this._params=s},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var r=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),a=r.obj,s=r.objProp;if(!a||!s||!(a[s]instanceof ds))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:a,objProp:s}},e}();function nc(e,t,r){return Er(function(){var a=PI(e,t.depthwise_filter,t.pointwise_filter,r,"same");return a=Ta(a,t.bias),a})}function _D(e,t,r){return r===void 0&&(r=!1),Er(function(){var a=ms(r?Ta(nd(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):nc(e,t.conv0,[2,2])),s=nc(a,t.conv1,[1,1]),i=ms(Ta(a,s)),o=nc(i,t.conv2,[1,1]);return ms(Ta(a,Ta(s,o)))})}function AN(e,t,r,a){return r===void 0&&(r=!1),a===void 0&&(a=!0),Er(function(){var s=ms(r?Ta(nd(e,t.conv0.filters,a?[2,2]:[1,1],"same"),t.conv0.bias):nc(e,t.conv0,a?[2,2]:[1,1])),i=nc(s,t.conv1,[1,1]),o=ms(Ta(s,i)),l=nc(o,t.conv2,[1,1]),c=ms(Ta(s,Ta(i,l))),d=nc(c,t.conv3,[1,1]);return ms(Ta(s,Ta(i,Ta(l,d))))})}function Ld(e,t,r,a){return r===void 0&&(r="same"),a===void 0&&(a=!1),Er(function(){var s=Ta(nd(e,t.filters,[1,1],r),t.bias);return a?ms(s):s})}function Df(e,t){Object.keys(e).forEach(function(r){t.some(function(a){return a.originalPath===r})||e[r].dispose()})}function NC(e,t){return function(r,a,s,i){var o=pl(e(r*a*s*s),[s,s,r,a]),l=li(e(a));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:l}}}function JI(e,t){return function(r,a,s){var i=Um(e(r*a),[r,a]),o=li(e(a));return t.push({paramPath:s+"/weights"},{paramPath:s+"/bias"}),{weights:i,bias:o}}}var gX=function(){function e(t,r,a){this.depthwise_filter=t,this.pointwise_filter=r,this.bias=a}return e}();function ZI(e,t){return function(r,a,s){var i=pl(e(9*r),[3,3,r,1]),o=pl(e(r*a),[1,1,r,a]),l=li(e(a));return t.push({paramPath:s+"/depthwise_filter"},{paramPath:s+"/pointwise_filter"},{paramPath:s+"/bias"}),new gX(i,o,l)}}function eP(e){return function(t){var r=e(t+"/depthwise_filter",4),a=e(t+"/pointwise_filter",4),s=e(t+"/bias",1);return new gX(r,a,s)}}function pp(e,t){return function(r,a,s){var i=e[r];if(!gC(i,a))throw new Error("expected weightMap["+r+"] to be a Tensor"+a+"D, instead have "+i);return t.push({originalPath:r,paramPath:s||r}),i}}function Af(e){var t=e;function r(s){var i=t.slice(0,s);return t=t.slice(s),i}function a(){return t}return{extractWeights:r,getRemainingWeights:a}}function bX(e,t){var r=NC(e,t),a=ZI(e,t);function s(o,l,c,d){d===void 0&&(d=!1);var u=d?r(o,l,3,c+"/conv0"):a(o,l,c+"/conv0"),h=a(l,l,c+"/conv1"),f=a(l,l,c+"/conv2");return{conv0:u,conv1:h,conv2:f}}function i(o,l,c,d){d===void 0&&(d=!1);var u=s(o,l,c,d),h=u.conv0,f=u.conv1,p=u.conv2,x=a(l,l,c+"/conv3");return{conv0:h,conv1:f,conv2:p,conv3:x}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:i}}function AFe(e){var t=[],r=Af(e),a=r.extractWeights,s=r.getRemainingWeights,i=bX(a,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2"),d=i(128,256,"dense3");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c,dense3:d}}}function yX(e){return function(t){var r=e(t+"/filters",4),a=e(t+"/bias",1);return{filters:r,bias:a}}}function jX(e,t){var r=pp(e,t),a=yX(r),s=eP(r);function i(l,c){c===void 0&&(c=!1);var d=c?a(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(l,c){c===void 0&&(c=!1);var d=c?a(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2"),f=s(l+"/conv3");return{conv0:d,conv1:u,conv2:h,conv3:f}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function TFe(e){var t=[],r=jX(e,t).extractDenseBlock4Params,a={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2"),dense3:r("dense3")};return Df(e,t),{params:a,paramMappings:t}}var NX=function(e){fa(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("FaceFeatureExtractor - load model before inference");return Er(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=U1(s,i).div(Nr(255)),l=AN(o,a.dense0,!0);return l=AN(l,a.dense1),l=AN(l,a.dense2),l=AN(l,a.dense3),l=L1(l,[7,7],[2,2],"valid"),l})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(r){return TFe(r)},t.prototype.extractParams=function(r){return AFe(r)},t}(Ef);function Uu(e,t){return Er(function(){return Ta(pC(e,t.weights),t.bias)})}function IFe(e,t,r){var a=[],s=Af(e),i=s.extractWeights,o=s.getRemainingWeights,l=JI(i,a),c=l(t,r,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:a,params:{fc:c}}}function PFe(e){var t=[],r=pp(e,t);function a(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:a("fc")};return Df(e,t),{params:s,paramMappings:t}}function wX(e){var t={},r={};return Object.keys(e).forEach(function(a){var s=a.startsWith("fc")?r:t;s[a]=e[a]}),{featureExtractorMap:t,classifierMap:r}}var SX=function(e){fa(t,e);function t(r,a){var s=e.call(this,r)||this;return s._faceFeatureExtractor=a,s}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var a=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return Er(function(){var i=r instanceof V2?a.faceFeatureExtractor.forwardInput(r):r;return Uu(i.as2D(i.shape[0],-1),s.fc)})},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var a=this.extractClassifierParams(r),s=a.params,i=a.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return IFe(r,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(r){var a=wX(r),s=a.featureExtractorMap,i=a.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),PFe(i)},t.prototype.extractParams=function(r){var a=this.getClassifierChannelsIn(),s=this.getClassifierChannelsOut(),i=s*a+s,o=r.slice(0,r.length-i),l=r.slice(r.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(l)},t}(Ef),s9=["neutral","happy","sad","angry","fearful","disgusted","surprised"],OFe=function(){function e(t){var r=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);s9.forEach(function(a,s){r[a]=t[s]})}return e.prototype.asSortedArray=function(){var t=this;return s9.map(function(r){return{expression:r,probability:t[r]}}).sort(function(r,a){return a.probability-r.probability})},e}(),MFe=function(e){fa(t,e);function t(r){return r===void 0&&(r=new NX),e.call(this,"FaceExpressionNet",r)||this}return t.prototype.forwardInput=function(r){var a=this;return Er(function(){return kf(a.runNet(r))})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.predictExpressions=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o,l=this;return $r(this,function(c){switch(c.label){case 0:return[4,Li(r)];case 1:return a=c.sent(),[4,this.forwardInput(a)];case 2:return s=c.sent(),[4,Promise.all(gi(s).map(function(d){return Ur(l,void 0,void 0,function(){var u;return $r(this,function(h){switch(h.label){case 0:return[4,d.data()];case 1:return u=h.sent(),d.dispose(),[2,u]}})})}))];case 3:return i=c.sent(),s.dispose(),o=i.map(function(d){return new OFe(d)}),[2,a.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(SX);function CX(e,t){var r={expressions:t};return Object.assign({},e,r)}function RFe(e){return jFe(e)&&e.landmarks instanceof $2&&e.unshiftedLandmarks instanceof $2&&e.alignedRect instanceof dh}function tP(e,t){var r=e.detection.box,a=t.shiftBy(r.x,r.y),s=a.align(),i=e.detection.imageDims,o=new dh(e.detection.score,s.rescale(i.reverse()),i),l={landmarks:a,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,l)}function FFe(e,t){var r=NC(e,t),a=ZI(e,t);function s(o,l,c){var d=a(o,l,c+"/separable_conv0"),u=a(l,l,c+"/separable_conv1"),h=r(o,l,1,c+"/expansion_conv");return{separable_conv0:d,separable_conv1:u,expansion_conv:h}}function i(o,l){var c=a(o,o,l+"/separable_conv0"),d=a(o,o,l+"/separable_conv1"),u=a(o,o,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:s,extractMainBlockParams:i}}function LFe(e,t){var r=[],a=Af(e),s=a.extractWeights,i=a.getRemainingWeights,o=FFe(s,r),l=o.extractConvParams,c=o.extractSeparableConvParams,d=o.extractReductionBlockParams,u=o.extractMainBlockParams,h=l(3,32,3,"entry_flow/conv_in"),f=d(32,64,"entry_flow/reduction_block_0"),p=d(64,128,"entry_flow/reduction_block_1"),x={conv_in:h,reduction_block_0:f,reduction_block_1:p},g={};Qy(t,0,1).forEach(function(w){g["main_block_"+w]=u(128,"middle_flow/main_block_"+w)});var b=d(128,256,"exit_flow/reduction_block"),y=c(256,512,"exit_flow/separable_conv"),S={reduction_block:b,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{entry_flow:x,middle_flow:g,exit_flow:S}}}function BFe(e,t){var r=pp(e,t),a=yX(r),s=eP(r);function i(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=a(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:u}}function o(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=s(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:a,extractSeparableConvParams:s,extractReductionBlockParams:i,extractMainBlockParams:o}}function UFe(e,t){var r=[],a=BFe(e,r),s=a.extractConvParams,i=a.extractSeparableConvParams,o=a.extractReductionBlockParams,l=a.extractMainBlockParams,c=s("entry_flow/conv_in"),d=o("entry_flow/reduction_block_0"),u=o("entry_flow/reduction_block_1"),h={conv_in:c,reduction_block_0:d,reduction_block_1:u},f={};Qy(t,0,1).forEach(function(b){f["main_block_"+b]=l("middle_flow/main_block_"+b)});var p=o("exit_flow/reduction_block"),x=i("exit_flow/separable_conv"),g={reduction_block:p,separable_conv:x};return Df(e,r),{params:{entry_flow:h,middle_flow:f,exit_flow:g},paramMappings:r}}function kX(e,t,r){return Ta(nd(e,t.filters,r,"same"),t.bias)}function ED(e,t,r){r===void 0&&(r=!0);var a=r?ms(e):e;return a=nc(a,t.separable_conv0,[1,1]),a=nc(ms(a),t.separable_conv1,[1,1]),a=Ai(a,[3,3],[2,2],"same"),a=Ta(a,kX(e,t.expansion_conv,[2,2])),a}function $Fe(e,t){var r=nc(ms(e),t.separable_conv0,[1,1]);return r=nc(ms(r),t.separable_conv1,[1,1]),r=nc(ms(r),t.separable_conv2,[1,1]),r=Ta(r,e),r}var VFe=function(e){fa(t,e);function t(r){var a=e.call(this,"TinyXception")||this;return a._numMainBlocks=r,a}return t.prototype.forwardInput=function(r){var a=this,s=this.params;if(!s)throw new Error("TinyXception - load model before inference");return Er(function(){var i=r.toBatchTensor(112,!0),o=[122.782,117.001,104.298],l=U1(i,o).div(Nr(256)),c=ms(kX(l,s.entry_flow.conv_in,[2,2]));return c=ED(c,s.entry_flow.reduction_block_0,!1),c=ED(c,s.entry_flow.reduction_block_1),Qy(a._numMainBlocks,0,1).forEach(function(d){c=$Fe(c,s.middle_flow["main_block_"+d])}),c=ED(c,s.exit_flow.reduction_block),c=ms(nc(c,s.exit_flow.separable_conv,[1,1])),c})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(r){return UFe(r,this._numMainBlocks)},t.prototype.extractParams=function(r){return LFe(r,this._numMainBlocks)},t}(Ef);function qFe(e){var t=[],r=Af(e),a=r.extractWeights,s=r.getRemainingWeights,i=JI(a,t),o=i(512,1,"fc/age"),l=i(512,2,"fc/gender");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{fc:{age:o,gender:l}}}}function zFe(e){var t=[],r=pp(e,t);function a(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:{age:a("fc/age"),gender:a("fc/gender")}};return Df(e,t),{params:s,paramMappings:t}}var q2;(function(e){e.FEMALE="female",e.MALE="male"})(q2||(q2={}));var HFe=function(e){fa(t,e);function t(r){r===void 0&&(r=new VFe(2));var a=e.call(this,"AgeGenderNet")||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var a=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return Er(function(){var i=r instanceof V2?a.faceFeatureExtractor.forwardInput(r):r,o=L1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),l=Uu(o,s.fc.age).as1D(),c=Uu(o,s.fc.gender);return{age:l,gender:c}})},t.prototype.forwardInput=function(r){var a=this;return Er(function(){var s=a.runNet(r),i=s.age,o=s.gender;return{age:i,gender:kf(o)}})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.predictAgeAndGender=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o,l,c,d=this;return $r(this,function(u){switch(u.label){case 0:return[4,Li(r)];case 1:return a=u.sent(),[4,this.forwardInput(a)];case 2:return s=u.sent(),i=gi(s.age),o=gi(s.gender),l=i.map(function(h,f){return{ageTensor:h,genderTensor:o[f]}}),[4,Promise.all(l.map(function(h){var f=h.ageTensor,p=h.genderTensor;return Ur(d,void 0,void 0,function(){var x,g,b,y,S;return $r(this,function(w){switch(w.label){case 0:return[4,f.data()];case 1:return x=w.sent()[0],[4,p.data()];case 2:return g=w.sent()[0],b=g>.5,y=b?q2.MALE:q2.FEMALE,S=b?g:1-g,f.dispose(),p.dispose(),[2,{age:x,gender:y,genderProbability:S}]}})})}))];case 3:return c=u.sent(),s.age.dispose(),s.gender.dispose(),[2,a.isBatchInput?c:c[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var a=this.extractClassifierParams(r),s=a.params,i=a.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return qFe(r)},t.prototype.extractParamsFromWeigthMap=function(r){var a=wX(r),s=a.featureExtractorMap,i=a.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),zFe(i)},t.prototype.extractParams=function(r){var a=1539,s=r.slice(0,r.length-a),i=r.slice(r.length-a);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(i)},t}(Ef),_X=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(r,a,s){var i=s.map(function(l){var c=l.width,d=l.height,u=a/Math.max(d,c);return{width:c*u,height:d*u}}),o=i.length;return Er(function(){var l=function(f,p){return cc([Yu([68],f),Yu([68],p)],1).as2D(1,136).as1D()},c=function(f,p){var x=i[f],g=x.width,b=x.height;return p(g,b)?Math.abs(g-b)/2:0},d=function(f){return c(f,function(p,x){return p<x})},u=function(f){return c(f,function(p,x){return x<p})},h=r.mul(Yu([o,136],a)).sub(cc(Array.from(Array(o),function(f,p){return l(d(p),u(p))}))).div(cc(Array.from(Array(o),function(f,p){return l(i[p].width,i[p].height)})));return h})},t.prototype.forwardInput=function(r){var a=this;return Er(function(){var s=a.runNet(r);return a.postProcess(s,r.inputSize,r.inputDimensions.map(function(i){var o=i[0],l=i[1];return{height:o,width:l}}))})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.detectLandmarks=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o=this;return $r(this,function(l){switch(l.label){case 0:return[4,Li(r)];case 1:return a=l.sent(),s=Er(function(){return gi(o.forwardInput(a))}),[4,Promise.all(s.map(function(c,d){return Ur(o,void 0,void 0,function(){var u,h,f,p,x;return $r(this,function(g){switch(g.label){case 0:return f=(h=Array).from,[4,c.data()];case 1:return u=f.apply(h,[g.sent()]),p=u.filter(function(b,y){return J7(y)}),x=u.filter(function(b,y){return!J7(y)}),[2,new yFe(Array(68).fill(0).map(function(b,y){return new sn(p[y],x[y])}),{height:a.getInputHeight(d),width:a.getInputWidth(d)})]}})})}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,a.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(SX),EX=function(e){fa(t,e);function t(r){return r===void 0&&(r=new NX),e.call(this,"FaceLandmark68Net",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(_X);function WFe(e){var t=[],r=jX(e,t).extractDenseBlock3Params,a={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2")};return Df(e,t),{params:a,paramMappings:t}}function GFe(e){var t=[],r=Af(e),a=r.extractWeights,s=r.getRemainingWeights,i=bX(a,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c}}}var YFe=function(e){fa(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Er(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=U1(s,i).div(Nr(255)),l=_D(o,a.dense0,!0);return l=_D(l,a.dense1),l=_D(l,a.dense2),l=L1(l,[14,14],[2,2],"valid"),l})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(r){return WFe(r)},t.prototype.extractParams=function(r){return GFe(r)},t}(Ef),KFe=function(e){fa(t,e);function t(r){return r===void 0&&(r=new YFe),e.call(this,"FaceLandmark68TinyNet",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(_X);(function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(EX);function XFe(e,t){return Ta(Oo(e,t.weights),t.biases)}function rP(e,t,r,a,s){s===void 0&&(s="same");var i=t.conv,o=i.filters,l=i.bias,c=nd(e,o,r,s);return c=Ta(c,l),c=XFe(c,t.scale),a?ms(c):c}function QFe(e,t){return rP(e,t,[1,1],!0)}function DX(e,t){return rP(e,t,[1,1],!1)}function AX(e,t){return rP(e,t,[2,2],!0,"valid")}function JFe(e,t){function r(l,c,d){var u=e(l),h=u.length/(c*d*d);if(dFe(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+u.length+", numFilters: "+c+", filterSize: "+d);return Er(function(){return ep(pl(u,[c,h,d,d]),[2,3,1,0])})}function a(l,c,d,u){var h=r(l,c,d),f=li(e(c));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:h,bias:f}}function s(l,c){var d=li(e(l)),u=li(e(l));return t.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:d,biases:u}}function i(l,c,d,u){var h=a(l,c,d,u+"/conv"),f=s(c,u+"/scale");return{conv:h,scale:f}}function o(l,c,d,u,h){h===void 0&&(h=!1);var f=i((h?.5:1)*l,c,d,u+"/conv1"),p=i(l,c,d,u+"/conv2");return{conv1:f,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function ZFe(e){var t=Af(e),r=t.extractWeights,a=t.getRemainingWeights,s=[],i=JFe(r,s),o=i.extractConvLayerParams,l=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),d=l(9216,32,3,"conv32_1"),u=l(9216,32,3,"conv32_2"),h=l(9216,32,3,"conv32_3"),f=l(36864,64,3,"conv64_down",!0),p=l(36864,64,3,"conv64_1"),x=l(36864,64,3,"conv64_2"),g=l(36864,64,3,"conv64_3"),b=l(147456,128,3,"conv128_down",!0),y=l(147456,128,3,"conv128_1"),S=l(147456,128,3,"conv128_2"),w=l(589824,256,3,"conv256_down",!0),k=l(589824,256,3,"conv256_1"),C=l(589824,256,3,"conv256_2"),D=l(589824,256,3,"conv256_down_out"),E=Er(function(){return ep(Um(r(256*128),[128,256]),[1,0])});if(s.push({paramPath:"fc"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);var A={conv32_down:c,conv32_1:d,conv32_2:u,conv32_3:h,conv64_down:f,conv64_1:p,conv64_2:x,conv64_3:g,conv128_down:b,conv128_1:y,conv128_2:S,conv256_down:w,conv256_1:k,conv256_2:C,conv256_down_out:D,fc:E};return{params:A,paramMappings:s}}function eLe(e,t){var r=pp(e,t);function a(o){var l=r(o+"/scale/weights",1),c=r(o+"/scale/biases",1);return{weights:l,biases:c}}function s(o){var l=r(o+"/conv/filters",4),c=r(o+"/conv/bias",1),d=a(o);return{conv:{filters:l,bias:c},scale:d}}function i(o){return{conv1:s(o+"/conv1"),conv2:s(o+"/conv2")}}return{extractConvLayerParams:s,extractResidualLayerParams:i}}function tLe(e){var t=[],r=eLe(e,t),a=r.extractConvLayerParams,s=r.extractResidualLayerParams,i=a("conv32_down"),o=s("conv32_1"),l=s("conv32_2"),c=s("conv32_3"),d=s("conv64_down"),u=s("conv64_1"),h=s("conv64_2"),f=s("conv64_3"),p=s("conv128_down"),x=s("conv128_1"),g=s("conv128_2"),b=s("conv256_down"),y=s("conv256_1"),S=s("conv256_2"),w=s("conv256_down_out"),k=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!cFe(k))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+k);var C={conv32_down:i,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:d,conv64_1:u,conv64_2:h,conv64_3:f,conv128_down:p,conv128_1:x,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:S,conv256_down_out:w,fc:k};return Df(e,t),{params:C,paramMappings:t}}function Su(e,t){var r=QFe(e,t.conv1);return r=DX(r,t.conv2),r=Ta(r,e),r=ms(r),r}function TN(e,t){var r=AX(e,t.conv1);r=DX(r,t.conv2);var a=L1(e,2,2,"valid"),s=Un(a.shape),i=a.shape[3]!==r.shape[3],o=a.shape[1]!==r.shape[1]||a.shape[2]!==r.shape[2];if(o){var l=uy(r.shape);l[1]=1;var c=Un(l);r=vi([r,c],1);var d=uy(r.shape);d[2]=1;var u=Un(d);r=vi([r,u],2)}return a=i?vi([a,s],3):a,r=Ta(a,r),r=ms(r),r}var rLe=function(e){fa(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("FaceRecognitionNet - load model before inference");return Er(function(){var s=r.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=U1(s,i).div(Nr(256)),l=AX(o,a.conv32_down);l=Ai(l,3,2,"valid"),l=Su(l,a.conv32_1),l=Su(l,a.conv32_2),l=Su(l,a.conv32_3),l=TN(l,a.conv64_down),l=Su(l,a.conv64_1),l=Su(l,a.conv64_2),l=Su(l,a.conv64_3),l=TN(l,a.conv128_down),l=Su(l,a.conv128_1),l=Su(l,a.conv128_2),l=TN(l,a.conv256_down),l=Su(l,a.conv256_1),l=Su(l,a.conv256_2),l=TN(l,a.conv256_down_out);var c=l.mean([1,2]),d=pC(c,a.fc);return d})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.computeFaceDescriptor=function(r){return Ur(this,void 0,void 0,function(){var a,s,i,o=this;return $r(this,function(l){switch(l.label){case 0:return[4,Li(r)];case 1:return a=l.sent(),s=Er(function(){return gi(o.forwardInput(a))}),[4,Promise.all(s.map(function(c){return c.data()}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,a.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(r){return tLe(r)},t.prototype.extractParams=function(r){return ZFe(r)},t}(Ef);function TX(e,t){var r={descriptor:t};return Object.assign({},e,r)}function IX(e,t){var r={age:t};return Object.assign({},e,r)}function PX(e,t,r){var a={gender:t,genderProbability:r};return Object.assign({},e,a)}var OX=function(){function e(t){var r=t===void 0?{}:t,a=r.minFaceSize,s=r.scaleFactor,i=r.maxNumScales,o=r.scoreThresholds,l=r.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=a||20,this._scaleFactor=s||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function aLe(e,t){function r(c,d){var u=pl(e(9*c),[3,3,c,1]),h=li(e(c)),f=li(e(c)),p=li(e(c)),x=li(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/batch_norm_scale"},{paramPath:d+"/batch_norm_offset"},{paramPath:d+"/batch_norm_mean"},{paramPath:d+"/batch_norm_variance"}),{filters:u,batch_norm_scale:h,batch_norm_offset:f,batch_norm_mean:p,batch_norm_variance:x}}function a(c,d,u,h,f){var p=pl(e(c*d*u*u),[u,u,c,d]),x=li(e(d));return t.push({paramPath:h+"/filters"},{paramPath:h+"/"+(f?"batch_norm_offset":"bias")}),{filters:p,bias:x}}function s(c,d,u,h){var f=a(c,d,u,h,!0),p=f.filters,x=f.bias;return{filters:p,batch_norm_offset:x}}function i(c,d,u){var h=r(c,u+"/depthwise_conv"),f=s(c,d,1,u+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:f}}function o(){var c=s(3,32,3,"mobilenetv1/conv_0"),d=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),h=i(128,128,"mobilenetv1/conv_3"),f=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),x=i(256,512,"mobilenetv1/conv_6"),g=i(512,512,"mobilenetv1/conv_7"),b=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),S=i(512,512,"mobilenetv1/conv_10"),w=i(512,512,"mobilenetv1/conv_11"),k=i(512,1024,"mobilenetv1/conv_12"),C=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:f,conv_5:p,conv_6:x,conv_7:g,conv_8:b,conv_9:y,conv_10:S,conv_11:w,conv_12:k,conv_13:C}}function l(){var c=s(1024,256,1,"prediction_layer/conv_0"),d=s(256,512,3,"prediction_layer/conv_1"),u=s(512,128,1,"prediction_layer/conv_2"),h=s(128,256,3,"prediction_layer/conv_3"),f=s(256,128,1,"prediction_layer/conv_4"),p=s(128,256,3,"prediction_layer/conv_5"),x=s(256,64,1,"prediction_layer/conv_6"),g=s(64,128,3,"prediction_layer/conv_7"),b=a(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=a(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=a(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),w=a(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),k=a(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),C=a(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=a(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=a(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),A=a(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),I=a(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),L=a(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=a(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),O={box_encoding_predictor:b,class_predictor:y},Y={box_encoding_predictor:S,class_predictor:w},q={box_encoding_predictor:k,class_predictor:C},K={box_encoding_predictor:D,class_predictor:E},U={box_encoding_predictor:A,class_predictor:I},J={box_encoding_predictor:L,class_predictor:P};return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:f,conv_5:p,conv_6:x,conv_7:g,box_predictor_0:O,box_predictor_1:Y,box_predictor_2:q,box_predictor_3:K,box_predictor_4:U,box_predictor_5:J}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function nLe(e){var t=[],r=Af(e),a=r.extractWeights,s=r.getRemainingWeights,i=aLe(a,t),o=i.extractMobilenetV1Params,l=i.extractPredictionLayerParams,c=o(),d=l(),u=gI(a(5118*4),[1,5118,4]),h={extra_dim:u};if(t.push({paramPath:"output_layer/extra_dim"}),s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:{mobilenetv1:c,prediction_layer:d,output_layer:h},paramMappings:t}}function sLe(e,t){var r=pp(e,t);function a(d,u,h){var f=r(d+"/Conv2d_"+u+"_pointwise/weights",4,h+"/filters"),p=r(d+"/Conv2d_"+u+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:f,batch_norm_offset:p}}function s(d){var u="mobilenetv1/conv_"+d,h="MobilenetV1/Conv2d_"+d+"_depthwise",f=u+"/depthwise_conv",p=u+"/pointwise_conv",x=r(h+"/depthwise_weights",4,f+"/filters"),g=r(h+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),b=r(h+"/BatchNorm/beta",1,f+"/batch_norm_offset"),y=r(h+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),S=r(h+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:x,batch_norm_scale:g,batch_norm_offset:b,batch_norm_mean:y,batch_norm_variance:S},pointwise_conv:a("MobilenetV1",d,p)}}function i(){return{conv_0:a("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:s(1),conv_2:s(2),conv_3:s(3),conv_4:s(4),conv_5:s(5),conv_6:s(6),conv_7:s(7),conv_8:s(8),conv_9:s(9),conv_10:s(10),conv_11:s(11),conv_12:s(12),conv_13:s(13)}}function o(d,u){var h=r(d+"/weights",4,u+"/filters"),f=r(d+"/biases",1,u+"/bias");return{filters:h,bias:f}}function l(d){var u=o("Prediction/BoxPredictor_"+d+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+d+"/box_encoding_predictor"),h=o("Prediction/BoxPredictor_"+d+"/ClassPredictor","prediction_layer/box_predictor_"+d+"/class_predictor");return{box_encoding_predictor:u,class_predictor:h}}function c(){return{conv_0:a("Prediction",0,"prediction_layer/conv_0"),conv_1:a("Prediction",1,"prediction_layer/conv_1"),conv_2:a("Prediction",2,"prediction_layer/conv_2"),conv_3:a("Prediction",3,"prediction_layer/conv_3"),conv_4:a("Prediction",4,"prediction_layer/conv_4"),conv_5:a("Prediction",5,"prediction_layer/conv_5"),conv_6:a("Prediction",6,"prediction_layer/conv_6"),conv_7:a("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function iLe(e){var t=[],r=sLe(e,t),a=r.extractMobilenetV1Params,s=r.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!bC(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:a(),prediction_layer:s(),output_layer:{extra_dim:i}};return Df(e,t),{params:o,paramMappings:t}}function Eu(e,t,r){return Er(function(){var a=nd(e,t.filters,r,"same");return a=Ta(a,t.batch_norm_offset),DI(a,0,6)})}var oLe=.0010000000474974513;function lLe(e,t,r){return Er(function(){var a=mC(e,t.filters,r,"same");return a=EK(a,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,oLe),DI(a,0,6)})}function cLe(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function dLe(e,t){return Er(function(){var r=null,a=Eu(e,t.conv_0,[2,2]),s=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(s.forEach(function(i,o){var l=o+1,c=cLe(l);a=lLe(a,i.depthwise_conv,c),a=Eu(a,i.pointwise_conv,[1,1]),l===11&&(r=a)}),r===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:a,conv11:r}})}function uLe(e,t,r,a,s){var i=e.shape[0],o=Math.min(r,i),l=t.map(function(u,h){return{score:u,boxIndex:h}}).filter(function(u){return u.score>s}).sort(function(u,h){return h.score-u.score}),c=function(u){return u<=a?1:0},d=[];return l.forEach(function(u){if(!(d.length>=o)){for(var h=u.score,f=d.length-1;f>=0;--f){var p=hLe(e,u.boxIndex,d[f]);if(p!==0&&(u.score*=c(p),u.score<=s))break}h===u.score&&d.push(u.boxIndex)}}),d}function hLe(e,t,r){var a=e.arraySync(),s=Math.min(a[t][0],a[t][2]),i=Math.min(a[t][1],a[t][3]),o=Math.max(a[t][0],a[t][2]),l=Math.max(a[t][1],a[t][3]),c=Math.min(a[r][0],a[r][2]),d=Math.min(a[r][1],a[r][3]),u=Math.max(a[r][0],a[r][2]),h=Math.max(a[r][1],a[r][3]),f=(o-s)*(l-i),p=(u-c)*(h-d);if(f<=0||p<=0)return 0;var x=Math.max(s,c),g=Math.max(i,d),b=Math.min(o,u),y=Math.min(l,h),S=Math.max(b-x,0)*Math.max(y-g,0);return S/(f+p-S)}function fLe(e){var t=gi(ep(e,[1,0])),r=[ji(t[2],t[0]),ji(t[3],t[1])],a=[Ta(t[0],Ad(r[0],Nr(2))),Ta(t[1],Ad(r[1],Nr(2)))];return{sizes:r,centers:a}}function mLe(e,t){var r=fLe(e),a=r.sizes,s=r.centers,i=gi(ep(t,[1,0])),o=Ad(Oo(T3(Ad(i[2],Nr(5))),a[0]),Nr(2)),l=Ta(Oo(Ad(i[0],Nr(10)),a[0]),s[0]),c=Ad(Oo(T3(Ad(i[3],Nr(5))),a[1]),Nr(2)),d=Ta(Oo(Ad(i[1],Nr(10)),a[1]),s[1]);return ep(cc([ji(l,o),ji(d,c),Ta(l,o),Ta(d,c)]),[1,0])}function pLe(e,t,r){return Er(function(){var a=e.shape[0],s=mLe(Md(S0(r.extra_dim,[a,1,1]),[-1,4]),Md(e,[-1,4]));s=Md(s,[a,s.shape[0]/a,4]);var i=SK(eh(t,[0,0,1],[-1,-1,-1])),o=eh(i,[0,0,0],[-1,-1,1]);o=Md(o,[a,o.shape[1]]);var l=gi(s),c=gi(o);return{boxes:l,scores:c}})}function Qv(e,t){return Er(function(){var r=e.shape[0],a=Md(Ld(e,t.box_encoding_predictor),[r,-1,1,4]),s=Md(Ld(e,t.class_predictor),[r,-1,3]);return{boxPredictionEncoding:a,classPrediction:s}})}function xLe(e,t,r){return Er(function(){var a=Eu(e,r.conv_0,[1,1]),s=Eu(a,r.conv_1,[2,2]),i=Eu(s,r.conv_2,[1,1]),o=Eu(i,r.conv_3,[2,2]),l=Eu(o,r.conv_4,[1,1]),c=Eu(l,r.conv_5,[2,2]),d=Eu(c,r.conv_6,[1,1]),u=Eu(d,r.conv_7,[2,2]),h=Qv(t,r.box_predictor_0),f=Qv(e,r.box_predictor_1),p=Qv(s,r.box_predictor_2),x=Qv(o,r.box_predictor_3),g=Qv(c,r.box_predictor_4),b=Qv(u,r.box_predictor_5),y=vi([h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,x.boxPredictionEncoding,g.boxPredictionEncoding,b.boxPredictionEncoding],1),S=vi([h.classPrediction,f.classPrediction,p.classPrediction,x.classPrediction,g.classPrediction,b.classPrediction],1);return{boxPredictions:y,classPredictions:S}})}var $1=function(){function e(t){var r=t===void 0?{}:t,a=r.minConfidence,s=r.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=a||.5,this._maxResults=s||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),MX=function(e){fa(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(r){var a=this.params;if(!a)throw new Error("SsdMobilenetv1 - load model before inference");return Er(function(){var s=r.toBatchTensor(512,!1).toFloat(),i=ji(Oo(s,Nr(.007843137718737125)),Nr(1)),o=dLe(i,a.mobilenetv1),l=xLe(o.out,o.conv11,a.prediction_layer),c=l.boxPredictions,d=l.classPredictions;return pLe(c,d,a.output_layer)})},t.prototype.forward=function(r){return Ur(this,void 0,void 0,function(){var a;return $r(this,function(s){switch(s.label){case 0:return a=this.forwardInput,[4,Li(r)];case 1:return[2,a.apply(this,[s.sent()])]}})})},t.prototype.locateFaces=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A;return $r(this,function(I){switch(I.label){case 0:return s=new $1(a),i=s.maxResults,o=s.minConfidence,[4,Li(r)];case 1:for(l=I.sent(),c=this.forwardInput(l),d=c.boxes,u=c.scores,h=d[0],f=u[0],p=1;p<d.length;p++)d[p].dispose(),u[p].dispose();return b=(g=Array).from,[4,f.data()];case 2:return x=b.apply(g,[I.sent()]),y=.5,S=uLe(h,x,i,y,o),w=l.getReshapedInputDimensions(0),k=l.inputSize,C=k/w.width,D=k/w.height,E=h.arraySync(),A=S.map(function(L){var P=[Math.max(0,E[L][0]),Math.min(1,E[L][2])].map(function(J){return J*D}),O=P[0],Y=P[1],q=[Math.max(0,E[L][1]),Math.min(1,E[L][3])].map(function(J){return J*C}),K=q[0],U=q[1];return new dh(x[L],new WI(K,O,U-K,Y-O),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),h.dispose(),f.dispose(),[2,A]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(r){return iLe(r)},t.prototype.extractParams=function(r){return nLe(r)},t}(Ef);(function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(MX);var vLe=.4,gLe=[new sn(.738768,.874946),new sn(2.42204,2.65704),new sn(4.30971,7.04493),new sn(10.246,4.59428),new sn(12.6868,11.8741)],bLe=[new sn(1.603231,2.094468),new sn(6.041143,7.080126),new sn(2.882459,3.518061),new sn(4.266906,5.178857),new sn(9.041765,10.66308)],yLe=[117.001,114.697,97.404],jLe="tiny_yolov2_model",NLe="tiny_yolov2_separable_conv_model",IN=function(e){return typeof e=="number"};function wLe(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!IN(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return IN(t.x)&&IN(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(IN)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function aP(e){return Er(function(){var t=Oo(e,Nr(.10000000149011612));return Ta(ms(ji(e,t)),t)})}function jm(e,t){return Er(function(){var r=nv(e,[[0,0],[1,1],[1,1],[0,0]]);return r=nd(r,t.conv.filters,[1,1],"valid"),r=ji(r,t.bn.sub),r=Oo(r,t.bn.truediv),r=Ta(r,t.conv.bias),aP(r)})}function Nm(e,t){return Er(function(){var r=nv(e,[[0,0],[1,1],[1,1],[0,0]]);return r=PI(r,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),r=Ta(r,t.bias),aP(r)})}function SLe(e,t){var r=NC(e,t);function a(o,l){var c=li(e(o)),d=li(e(o));return t.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:d}}function s(o,l,c){var d=r(o,l,3,c+"/conv"),u=a(l,c+"/bn");return{conv:d,bn:u}}var i=ZI(e,t);return{extractConvParams:r,extractConvWithBatchNormParams:s,extractSeparableConvParams:i}}function CLe(e,t,r,a){var s=Af(e),i=s.extractWeights,o=s.getRemainingWeights,l=[],c=SLe(i,l),d=c.extractConvParams,u=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams,f;if(t.withSeparableConvs){var p=a[0],x=a[1],g=a[2],b=a[3],y=a[4],S=a[5],w=a[6],k=a[7],C=a[8],D=t.isFirstLayerConv2d?d(p,x,3,"conv0"):h(p,x,"conv0"),E=h(x,g,"conv1"),A=h(g,b,"conv2"),I=h(b,y,"conv3"),L=h(y,S,"conv4"),P=h(S,w,"conv5"),O=k?h(w,k,"conv6"):void 0,Y=C?h(k,C,"conv7"):void 0,q=d(C||k||w,5*r,1,"conv8");f={conv0:D,conv1:E,conv2:A,conv3:I,conv4:L,conv5:P,conv6:O,conv7:Y,conv8:q}}else{var p=a[0],x=a[1],g=a[2],b=a[3],y=a[4],S=a[5],w=a[6],k=a[7],C=a[8],D=u(p,x,"conv0"),E=u(x,g,"conv1"),A=u(g,b,"conv2"),I=u(b,y,"conv3"),L=u(y,S,"conv4"),P=u(S,w,"conv5"),O=u(w,k,"conv6"),Y=u(k,C,"conv7"),q=d(C,5*r,1,"conv8");f={conv0:D,conv1:E,conv2:A,conv3:I,conv4:L,conv5:P,conv6:O,conv7:Y,conv8:q}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:f,paramMappings:l}}function kLe(e,t){var r=pp(e,t);function a(l){var c=r(l+"/sub",1),d=r(l+"/truediv",1);return{sub:c,truediv:d}}function s(l){var c=r(l+"/filters",4),d=r(l+"/bias",1);return{filters:c,bias:d}}function i(l){var c=s(l+"/conv"),d=a(l+"/bn");return{conv:c,bn:d}}var o=eP(r);return{extractConvParams:s,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function _Le(e,t){var r=[],a=kLe(e,r),s=a.extractConvParams,i=a.extractConvWithBatchNormParams,o=a.extractSeparableConvParams,l;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;l={conv0:t.isFirstLayerConv2d?s("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:s("conv8")}}else l={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:s("conv8")};return Df(e,r),{params:l,paramMappings:r}}var i9;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(i9||(i9={}));var nP=function(){function e(t){var r=t===void 0?{}:t,a=r.inputSize,s=r.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=a||416,this._scoreThreshold=s||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),RX=function(e){fa(t,e);function t(r){var a=e.call(this,"TinyYolov2")||this;return wLe(r),a._config=r,a}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(r,a){var s=jm(r,a.conv0);return s=Ai(s,[2,2],[2,2],"same"),s=jm(s,a.conv1),s=Ai(s,[2,2],[2,2],"same"),s=jm(s,a.conv2),s=Ai(s,[2,2],[2,2],"same"),s=jm(s,a.conv3),s=Ai(s,[2,2],[2,2],"same"),s=jm(s,a.conv4),s=Ai(s,[2,2],[2,2],"same"),s=jm(s,a.conv5),s=Ai(s,[2,2],[1,1],"same"),s=jm(s,a.conv6),s=jm(s,a.conv7),Ld(s,a.conv8,"valid",!1)},t.prototype.runMobilenet=function(r,a){var s=this.config.isFirstLayerConv2d?aP(Ld(r,a.conv0,"valid",!1)):Nm(r,a.conv0);return s=Ai(s,[2,2],[2,2],"same"),s=Nm(s,a.conv1),s=Ai(s,[2,2],[2,2],"same"),s=Nm(s,a.conv2),s=Ai(s,[2,2],[2,2],"same"),s=Nm(s,a.conv3),s=Ai(s,[2,2],[2,2],"same"),s=Nm(s,a.conv4),s=Ai(s,[2,2],[2,2],"same"),s=Nm(s,a.conv5),s=Ai(s,[2,2],[1,1],"same"),s=a.conv6?Nm(s,a.conv6):s,s=a.conv7?Nm(s,a.conv7):s,Ld(s,a.conv8,"valid",!1)},t.prototype.forwardInput=function(r,a){var s=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Er(function(){var o=r.toBatchTensor(a,!1).toFloat();return o=s.config.meanRgb?U1(o,s.config.meanRgb):o,o=o.div(Nr(256)),s.config.withSeparableConvs?s.runMobilenet(o,i):s.runTinyYolov2(o,i)})},t.prototype.forward=function(r,a){return Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Li(r)];case 1:return[4,s.apply(this,[i.sent(),a])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,f,p,x,g,b,y,S=this;return $r(this,function(w){switch(w.label){case 0:return s=new nP(a),i=s.inputSize,o=s.scoreThreshold,[4,Li(r)];case 1:return l=w.sent(),[4,this.forwardInput(l,i)];case 2:return c=w.sent(),d=Er(function(){return gi(c)[0].expandDims()}),u={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(d,l.getReshapedInputDimensions(0),o)];case 3:return h=w.sent(),c.dispose(),d.dispose(),f=h.map(function(k){return k.box}),p=h.map(function(k){return k.score}),x=h.map(function(k){return k.classScore}),g=h.map(function(k){return S.config.classes[k.label]}),b=Jy(f.map(function(k){return k.rescale(i)}),p,this.config.iouThreshold,!0),y=b.map(function(k){return new lX(p[k],x[k],g[k],f[k],u)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(r){return _Le(r,this.config)},t.prototype.extractParams=function(r){var a=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,s=a?a.length:void 0;if(s!==7&&s!==8&&s!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+s+" filterSizes in config");return CLe(r,this.config,this.boxEncodingSize,a)},t.prototype.extractBoxes=function(r,a,s){return Ur(this,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A,I,L,P,O,Y,q,K,U,J,F=this;return $r(this,function(X){switch(X.label){case 0:return i=a.width,o=a.height,l=Math.max(i,o),c=l/i,d=l/o,u=r.shape[1],h=this.config.anchors.length,f=Er(function(){var Q=r.reshape([u,u,h,F.boxEncodingSize]),ie=Q.slice([0,0,0,0],[u,u,h,4]),M=Q.slice([0,0,0,4],[u,u,h,1]),V=F.withClassScores?kf(Q.slice([0,0,0,5],[u,u,h,F.config.classes.length]),3):Nr(0);return[ie,M,V]}),p=f[0],x=f[1],g=f[2],b=[],[4,x.array()];case 1:return y=X.sent(),[4,p.array()];case 2:S=X.sent(),w=0,X.label=3;case 3:if(!(w<u))return[3,12];k=0,X.label=4;case 4:if(!(k<u))return[3,11];C=0,X.label=5;case 5:return C<h?(D=kD(y[w][k][C][0]),!s||D>s?(E=(k+kD(S[w][k][C][0]))/u*c,A=(w+kD(S[w][k][C][1]))/u*d,I=Math.exp(S[w][k][C][2])*this.config.anchors[C].x/u*c,L=Math.exp(S[w][k][C][3])*this.config.anchors[C].y/u*d,P=E-I/2,O=A-L/2,Y={row:w,col:k,anchor:C},this.withClassScores?[4,this.extractPredictedClass(g,Y)]:[3,7]):[3,9]):[3,10];case 6:return J=X.sent(),[3,8];case 7:J={classScore:1,label:0},X.label=8;case 8:q=J,K=q.classScore,U=q.label,b.push(_o({box:new yC(P,O,P+I,O+L),score:D,classScore:D*K,label:U},Y)),X.label=9;case 9:return C++,[3,5];case 10:return k++,[3,4];case 11:return w++,[3,3];case 12:return p.dispose(),x.dispose(),g.dispose(),[2,b]}})})},t.prototype.extractPredictedClass=function(r,a){return Ur(this,void 0,void 0,function(){var s,i,o,l;return $r(this,function(c){switch(c.label){case 0:return s=a.row,i=a.col,o=a.anchor,[4,r.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(d,u){return l[s][i][o][u]}).map(function(d,u){return{classScore:d,label:u}}).reduce(function(d,u){return d.classScore>u.classScore?d:u})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Ef),ELe=function(e){fa(t,e);function t(r){r===void 0&&(r=!0);var a=this,s=Object.assign({},{withSeparableConvs:r,iouThreshold:vLe,classes:["face"]},r?{anchors:bLe,meanRgb:yLe}:{anchors:gLe,withClassScores:!0});return a=e.call(this,s)||this,a}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,a){return Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.detect(r,a)];case 1:return s=i.sent(),[2,s.map(function(o){return new dh(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?NLe:jLe},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(RX),sP=function(e){fa(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._name="TinyFaceDetectorOptions",r}return t}(nP),V1=function(){function e(){}return e.prototype.then=function(t){return Ur(this,void 0,void 0,function(){var r;return $r(this,function(a){switch(a.label){case 0:return r=t,[4,this.run()];case 1:return[2,r.apply(void 0,[a.sent()])]}})})},e.prototype.run=function(){return Ur(this,void 0,void 0,function(){return $r(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function wC(e,t,r,a,s){return s===void 0&&(s=function(i){var o=i.alignedRect;return o}),Ur(this,void 0,void 0,function(){var i,o,l,c,d;return $r(this,function(u){switch(u.label){case 0:return i=e.map(function(h){return RFe(h)?s(h):h.detection}),l=a,l?[3,5]:t instanceof ds?[4,QI(t,i)]:[3,2];case 1:return c=u.sent(),[3,4];case 2:return[4,XI(t,i)];case 3:c=u.sent(),u.label=4;case 4:l=c,u.label=5;case 5:return o=l,[4,r(o)];case 6:return d=u.sent(),o.forEach(function(h){return h instanceof ds&&h.dispose()}),[2,d]}})})}function iP(e,t,r,a,s){return Ur(this,void 0,void 0,function(){var i=this;return $r(this,function(o){return[2,wC([e],t,function(l){return Ur(i,void 0,void 0,function(){return $r(this,function(c){return[2,r(l[0])]})})},a,s)]})})}function DLe(e){return Er(function(){return cc(gi(e,3).reverse(),3)})}var PN=2,z2=12;function ALe(e,t){var r=NC(e,t),a=JI(e,t);function s(d,u){var h=li(e(d));return t.push({paramPath:u}),h}function i(d,u,h){h===void 0&&(h=!1);var f=r(d[0],d[1],3,u+"/conv1"),p=s(d[1],u+"/prelu1_alpha"),x=r(d[1],d[2],3,u+"/conv2"),g=s(d[2],u+"/prelu2_alpha"),b=r(d[2],d[3],h?2:3,u+"/conv3"),y=s(d[3],u+"/prelu3_alpha");return{conv1:f,prelu1_alpha:p,conv2:x,prelu2_alpha:g,conv3:b,prelu3_alpha:y}}function o(){var d=i([3,10,16,32],"pnet"),u=r(32,2,1,"pnet/conv4_1"),h=r(32,4,1,"pnet/conv4_2");return _o(_o({},d),{conv4_1:u,conv4_2:h})}function l(){var d=i([3,28,48,64],"rnet",!0),u=a(576,128,"rnet/fc1"),h=s(128,"rnet/prelu4_alpha"),f=a(128,2,"rnet/fc2_1"),p=a(128,4,"rnet/fc2_2");return _o(_o({},d),{fc1:u,prelu4_alpha:h,fc2_1:f,fc2_2:p})}function c(){var d=i([3,32,64,64],"onet"),u=r(64,128,2,"onet/conv4"),h=s(128,"onet/prelu4_alpha"),f=a(1152,256,"onet/fc1"),p=s(256,"onet/prelu5_alpha"),x=a(256,2,"onet/fc2_1"),g=a(256,4,"onet/fc2_2"),b=a(256,10,"onet/fc2_3");return _o(_o({},d),{conv4:u,prelu4_alpha:h,fc1:f,prelu5_alpha:p,fc2_1:x,fc2_2:g,fc2_3:b})}return{extractPNetParams:o,extractRNetParams:l,extractONetParams:c}}function TLe(e){var t=Af(e),r=t.extractWeights,a=t.getRemainingWeights,s=[],i=ALe(r,s),o=i.extractPNetParams,l=i.extractRNetParams,c=i.extractONetParams,d=o(),u=l(),h=c();if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{pnet:d,rnet:u,onet:h},paramMappings:s}}function ILe(e,t){var r=pp(e,t);function a(u){var h=r(u+"/weights",4,u+"/filters"),f=r(u+"/bias",1);return{filters:h,bias:f}}function s(u){var h=r(u+"/weights",2),f=r(u+"/bias",1);return{weights:h,bias:f}}function i(u){return r(u,1)}function o(u){var h=a(u+"/conv1"),f=i(u+"/prelu1_alpha"),p=a(u+"/conv2"),x=i(u+"/prelu2_alpha"),g=a(u+"/conv3"),b=i(u+"/prelu3_alpha");return{conv1:h,prelu1_alpha:f,conv2:p,prelu2_alpha:x,conv3:g,prelu3_alpha:b}}function l(){var u=o("pnet"),h=a("pnet/conv4_1"),f=a("pnet/conv4_2");return _o(_o({},u),{conv4_1:h,conv4_2:f})}function c(){var u=o("rnet"),h=s("rnet/fc1"),f=i("rnet/prelu4_alpha"),p=s("rnet/fc2_1"),x=s("rnet/fc2_2");return _o(_o({},u),{fc1:h,prelu4_alpha:f,fc2_1:p,fc2_2:x})}function d(){var u=o("onet"),h=a("onet/conv4"),f=i("onet/prelu4_alpha"),p=s("onet/fc1"),x=i("onet/prelu5_alpha"),g=s("onet/fc2_1"),b=s("onet/fc2_2"),y=s("onet/fc2_3");return _o(_o({},u),{conv4:h,prelu4_alpha:f,fc1:p,prelu5_alpha:x,fc2_1:g,fc2_2:b,fc2_3:y})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:d}}function PLe(e){var t=[],r=ILe(e,t),a=r.extractPNetParams,s=r.extractRNetParams,i=r.extractONetParams,o=a(),l=s(),c=i();return Df(e,t),{params:{pnet:o,rnet:l,onet:c},paramMappings:t}}function B3(e,t){var r=t[0],a=t[1];return{height:Math.floor(r*e),width:Math.floor(a*e)}}function OLe(e,t,r){for(var a=r[0],s=r[1],i=z2/e,o=[],l=Math.min(a,s)*i,c=0;l>=12;)o.push(i*Math.pow(t,c)),l=l*t,c+=1;return o}var oP=function(e){fa(t,e);function t(r,a,s,i){return e.call(this,{left:r,top:a,right:s,bottom:i},!0)||this}return t}(tp);function FX(e){return Er(function(){return Oo(ji(e,Nr(127.5)),Nr(.0078125))})}function A0(e,t){return Er(function(){return Ta(ms(e),Oo(t,F2(ms(F2(e)))))})}function lP(e,t,r){return r===void 0&&(r=!1),Er(function(){var a=Ld(e,t.conv1,"valid");return a=A0(a,t.prelu1_alpha),a=Ai(a,r?[2,2]:[3,3],[2,2],"same"),a=Ld(a,t.conv2,"valid"),a=A0(a,t.prelu2_alpha),a=r?a:Ai(a,[3,3],[2,2],"valid"),a=Ld(a,t.conv3,"valid"),a=A0(a,t.prelu3_alpha),a})}function MLe(e,t){return Er(function(){var r=lP(e,t,!0),a=Ld(r,t.conv4_1,"valid"),s=zc(xC(a,3),3),i=kf(ji(a,s),3),o=Ld(r,t.conv4_2,"valid");return{prob:i,regions:o}})}function RLe(e,t){return Er(function(){var r=B3(t,e.shape.slice(1)),a=r.height,s=r.width,i=LI.resizeBilinear(e,[a,s]),o=FX(i);return ep(o,[0,2,1,3])})}function FLe(e,t,r,a){for(var s=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var l=0;l<e.shape[1];l++)i[o][l]>=a&&s.push(new sn(l,o));var c=s.map(function(d){var u=new yC(Math.round((d.y*PN+1)/r),Math.round((d.x*PN+1)/r),Math.round((d.y*PN+z2)/r),Math.round((d.x*PN+z2)/r)),h=i[d.y][d.x],f=t.arraySync(),p=new oP(f[d.y][d.x][0],f[d.y][d.x][1],f[d.y][d.x][2],f[d.y][d.x][3]);return{cell:u,score:h,region:p}});return c}function LLe(e,t,r,a,s){s.stage1=[];var i=t.map(function(f){return Er(function(){var p={scale:f},x=RLe(e,f),g=Date.now(),b=MLe(x,a),y=b.prob,S=b.regions;p.pnet=Date.now()-g;var w=gi(gi(y,3)[1])[0],k=gi(S)[0];return{scoresTensor:w,regionsTensor:k,scale:f,statsForScale:p}})}),o=i.map(function(f){var p=f.scoresTensor,x=f.regionsTensor,g=f.scale,b=f.statsForScale,y=FLe(p,x,g,r);if(p.dispose(),x.dispose(),!y.length)return s.stage1.push(b),[];var S=Date.now(),w=Jy(y.map(function(k){return k.cell}),y.map(function(k){return k.score}),.5);return b.nms=Date.now()-S,b.numBoxes=w.length,s.stage1.push(b),w.map(function(k){return y[k]})}),l=o.reduce(function(f,p){return f.concat(p)},[]),c=[],d=[];if(l.length>0){var u=Date.now(),h=Jy(l.map(function(f){return f.cell}),l.map(function(f){return f.score}),.7);s.stage1_nms=Date.now()-u,d=h.map(function(f){return l[f].score}),c=h.map(function(f){return l[f]}).map(function(f){var p=f.cell,x=f.region;return new yC(p.left+x.left*p.width,p.top+x.top*p.height,p.right+x.right*p.width,p.bottom+x.bottom*p.height).toSquare().round()})}return{boxes:c,scores:d}}function LX(e,t,r){var a=r.width,s=r.height;return Ur(this,void 0,void 0,function(){var i,o,l,c=this;return $r(this,function(d){switch(d.label){case 0:return i=Vx(e),[4,Promise.all(t.map(function(u){return Ur(c,void 0,void 0,function(){var h,f,p,x,g,b,y,S;return $r(this,function(w){return h=u.padAtBorders(e.height,e.width),f=h.y,p=h.ey,x=h.x,g=h.ex,b=x-1,y=f-1,S=i.getImageData(b,y,g-b,p-y),[2,Fo.isNodejs()?KI(S):createImageBitmap(S)]})})}))];case 1:return o=d.sent(),l=[],o.forEach(function(u){var h=jC({width:a,height:s}),f=Vx(h);f.drawImage(u,0,0,a,s);for(var p=f.getImageData(0,0,a,s).data,x=[],g=0;g<p.length;g+=4)x.push(p[g+2]),x.push(p[g+1]),x.push(p[g]);l.push(x)}),[2,l.map(function(u){var h=Er(function(){var f=ep(pl(u,[1,a,s,3]),[0,2,1,3]).toFloat();return FX(f)});return h})]}})})}function BLe(e,t){return Er(function(){var r=lP(e,t),a=Md(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Uu(a,t.fc1),i=A0(s,t.prelu4_alpha),o=Uu(i,t.fc2_1),l=zc(xC(o,1),1),c=kf(ji(o,l),1),d=Uu(i,t.fc2_2),u=gi(c,1)[1];return{scores:u,regions:d}})}function ULe(e,t,r,a,s){return Ur(this,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,x,g,b,y,S;return $r(this,function(w){switch(w.label){case 0:return i=Date.now(),[4,LX(e,t,{width:24,height:24})];case 1:return o=w.sent(),s.stage2_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(k){var C=BLe(k,a);return k.dispose(),C}),s.stage2_rnet=Date.now()-i,c=l.length>1?vi(l.map(function(k){return k.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[w.sent()]),c.dispose(),f=d.map(function(k,C){return{score:k,idx:C}}).filter(function(k){return k.score>r}).map(function(k){var C=k.idx;return C}),p=f.map(function(k){return t[k]}),x=f.map(function(k){return d[k]}),g=[],b=[],p.length>0&&(i=Date.now(),y=Jy(p,x,.7),s.stage2_nms=Date.now()-i,S=y.map(function(k){var C=l[f[k]].regions.arraySync();return new oP(C[0][0],C[0][1],C[0][2],C[0][3])}),b=y.map(function(k){return x[k]}),g=y.map(function(k,C){return p[k].calibrate(S[C])})),l.forEach(function(k){k.regions.dispose(),k.scores.dispose()}),[2,{boxes:g,scores:b}]}})})}function $Le(e,t){return Er(function(){var r=lP(e,t);r=Ai(r,[2,2],[2,2],"same"),r=Ld(r,t.conv4,"valid"),r=A0(r,t.prelu4_alpha);var a=Md(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Uu(a,t.fc1),i=A0(s,t.prelu5_alpha),o=Uu(i,t.fc2_1),l=zc(xC(o,1),1),c=kf(ji(o,l),1),d=Uu(i,t.fc2_2),u=Uu(i,t.fc2_3),h=gi(c,1)[1];return{scores:h,regions:d,points:u}})}function VLe(e,t,r,a,s){return Ur(this,void 0,void 0,function(){var i,o,l,c,d,u,h,f,p,x,g,b,y,S,w;return $r(this,function(k){switch(k.label){case 0:return i=Date.now(),[4,LX(e,t,{width:48,height:48})];case 1:return o=k.sent(),s.stage3_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(C){var D=$Le(C,a);return C.dispose(),D}),s.stage3_onet=Date.now()-i,c=l.length>1?vi(l.map(function(C){return C.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[k.sent()]),c.dispose(),f=d.map(function(C,D){return{score:C,idx:D}}).filter(function(C){return C.score>r}).map(function(C){var D=C.idx;return D}),p=f.map(function(C){var D=l[C].regions.arraySync();return new oP(D[0][0],D[0][1],D[0][2],D[0][3])}),x=f.map(function(C,D){return t[C].calibrate(p[D])}),g=f.map(function(C){return d[C]}),b=[],y=[],S=[],x.length>0&&(i=Date.now(),w=Jy(x,g,.7,!1),s.stage3_nms=Date.now()-i,b=w.map(function(C){return x[C]}),y=w.map(function(C){return g[C]}),S=w.map(function(C,D){return Array(5).fill(0).map(function(E,A){var I=l[C].points.arraySync();return new sn(I[0][A]*(b[D].width+1)+b[D].left,I[0][A+5]*(b[D].height+1)+b[D].top)})})),l.forEach(function(C){C.regions.dispose(),C.scores.dispose(),C.points.dispose()}),[2,{boxes:b,scores:y,points:S}]}})})}var qLe=function(e){fa(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(r){return Ur(this,void 0,void 0,function(){return $r(this,function(a){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,r)]})})},t.prototype.loadFromDisk=function(r){return Ur(this,void 0,void 0,function(){return $r(this,function(a){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,r)]})})},t.prototype.forwardInput=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A;return $r(this,function(I){switch(I.label){case 0:if(s=this.params,!s)throw new Error("Mtcnn - load model before inference");if(i=r.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},l=Date.now(),c=Er(function(){return DLe(zc(zI.fromPixels(i)).toFloat())}),d=function(L){return c.dispose(),o.total=Date.now()-l,L},u=c.shape.slice(1),h=u[0],f=u[1],p=new OX(a),x=p.minFaceSize,g=p.scaleFactor,b=p.maxNumScales,y=p.scoreThresholds,S=p.scaleSteps,w=(S||OLe(x,g,[h,f])).filter(function(L){var P=B3(L,[h,f]);return Math.min(P.width,P.height)>z2}).slice(0,b),o.scales=w,o.pyramid=w.map(function(L){return B3(L,[h,f])}),k=Date.now(),[4,LLe(c,w,y[0],s.pnet,o)];case 1:return C=I.sent(),o.total_stage1=Date.now()-k,C.boxes.length?(o.stage2_numInputBoxes=C.boxes.length,k=Date.now(),[4,ULe(i,C.boxes,y[1],s.rnet,o)]):[2,d({results:[],stats:o})];case 2:return D=I.sent(),o.total_stage2=Date.now()-k,D.boxes.length?(o.stage3_numInputBoxes=D.boxes.length,k=Date.now(),[4,VLe(i,D.boxes,y[2],s.onet,o)]):[2,d({results:[],stats:o})];case 3:return E=I.sent(),o.total_stage3=Date.now()-k,A=E.boxes.map(function(L,P){return tP(GI({},new dh(E.scores[P],new WI(L.left/f,L.top/h,L.width/f,L.height/h),{height:h,width:f})),new bFe(E.points[P].map(function(O){return O.sub(new sn(L.left,L.top)).div(new sn(L.width,L.height))}),{width:L.width,height:L.height}))}),[2,d({results:A,stats:o})]}})})},t.prototype.forward=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Li(r)];case 1:return[4,s.apply(this,[i.sent(),a])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(r,a){return a===void 0&&(a={}),Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Li(r)];case 1:return[2,s.apply(this,[i.sent(),a])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(r){return PLe(r)},t.prototype.extractParams=function(r){return TLe(r)},t}(Ef),zLe=.4,HLe=[new sn(1.603231,2.094468),new sn(6.041143,7.080126),new sn(2.882459,3.518061),new sn(4.266906,5.178857),new sn(9.041765,10.66308)],WLe=[117.001,114.697,97.404],GLe=function(e){fa(t,e);function t(){var r=this,a={withSeparableConvs:!0,iouThreshold:zLe,classes:["face"],anchors:HLe,meanRgb:WLe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return r=e.call(this,a)||this,r}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,a){return Ur(this,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.detect(r,a)];case 1:return s=i.sent(),[2,s.map(function(o){return new dh(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(RX),Jn={ssdMobilenetv1:new MX,tinyFaceDetector:new GLe,tinyYolov2:new ELe,mtcnn:new qLe,faceLandmark68Net:new EX,faceLandmark68TinyNet:new KFe,faceRecognitionNet:new rLe,faceExpressionNet:new MFe,ageGenderNet:new HFe},BX=function(e){fa(t,e);function t(r,a,s){var i=e.call(this)||this;return i.parentTask=r,i.input=a,i.extractedFaces=s,i}return t}(V1),cP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s=this;return $r(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,wC(r,this.input,function(o){return Ur(s,void 0,void 0,function(){return $r(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Jn.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return a=i.sent(),[2,r.map(function(o,l){return CX(o,a[l])})]}})})},t.prototype.withAgeAndGender=function(){return new fP(this,this.input)},t}(BX),dP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,iP(r,this.input,function(i){return Jn.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return a=s.sent(),[2,CX(r,a)]}})})},t.prototype.withAgeAndGender=function(){return new mP(this,this.input)},t}(BX),uP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new pP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new vP(this,this.input)},t}(cP),hP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new xP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new gP(this,this.input)},t}(dP),UX=function(e){fa(t,e);function t(r,a,s){var i=e.call(this)||this;return i.parentTask=r,i.input=a,i.extractedFaces=s,i}return t}(V1),fP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s=this;return $r(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,wC(r,this.input,function(o){return Ur(s,void 0,void 0,function(){return $r(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Jn.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return a=i.sent(),[2,r.map(function(o,l){var c=a[l],d=c.age,u=c.gender,h=c.genderProbability;return IX(PX(o,u,h),d)})]}})})},t.prototype.withFaceExpressions=function(){return new cP(this,this.input)},t}(UX),mP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i,o;return $r(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?[4,iP(r,this.input,function(c){return Jn.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return a=l.sent(),s=a.age,i=a.gender,o=a.genderProbability,[2,IX(PX(r,i,o),s)]}})})},t.prototype.withFaceExpressions=function(){return new dP(this,this.input)},t}(UX),pP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new uP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new vP(this,this.input)},t}(fP),xP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new hP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new gP(this,this.input)},t}(mP),$X=function(e){fa(t,e);function t(r,a){var s=e.call(this)||this;return s.parentTask=r,s.input=a,s}return t}(V1),vP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),[4,wC(r,this.input,function(i){return Promise.all(i.map(function(o){return Jn.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return a=s.sent(),[2,a.map(function(i,o){return TX(r[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new uP(this,this.input)},t.prototype.withAgeAndGender=function(){return new pP(this,this.input)},t}($X),gP=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,iP(r,this.input,function(i){return Jn.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return a=s.sent(),[2,TX(r,a)]}})})},t.prototype.withFaceExpressions=function(){return new hP(this,this.input)},t.prototype.withAgeAndGender=function(){return new xP(this,this.input)},t}($X),VX=function(e){fa(t,e);function t(r,a,s){var i=e.call(this)||this;return i.parentTask=r,i.input=a,i.useTinyLandmarkNet=s,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Jn.faceLandmark68TinyNet:Jn.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(V1),YLe=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i,o,l=this;return $r(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return r=c.sent(),a=r.map(function(d){return d.detection}),this.input instanceof ds?[4,QI(this.input,a)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,XI(this.input,a)];case 4:i=c.sent(),c.label=5;case 5:return s=i,[4,Promise.all(s.map(function(d){return l.landmarkNet.detectLandmarks(d)}))];case 6:return o=c.sent(),s.forEach(function(d){return d instanceof ds&&d.dispose()}),[2,r.map(function(d,u){return tP(d,o[u])})]}})})},t.prototype.withFaceExpressions=function(){return new uP(this,this.input)},t.prototype.withAgeAndGender=function(){return new pP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new vP(this,this.input)},t}(VX),KLe=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i,o;return $r(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?(a=r.detection,this.input instanceof ds?[4,QI(this.input,[a])]:[3,3]):[2];case 2:return i=l.sent(),[3,5];case 3:return[4,XI(this.input,[a])];case 4:i=l.sent(),l.label=5;case 5:return s=i,[4,this.landmarkNet.detectLandmarks(s[0])];case 6:return o=l.sent(),s.forEach(function(c){return c instanceof ds&&c.dispose()}),[2,tP(r,o)]}})})},t.prototype.withFaceExpressions=function(){return new hP(this,this.input)},t.prototype.withAgeAndGender=function(){return new xP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new gP(this,this.input)},t}(VX),qX=function(e){fa(t,e);function t(r,a){a===void 0&&(a=new $1);var s=e.call(this)||this;return s.input=r,s.options=a,s}return t}(V1),zX=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a,s,i;return $r(this,function(o){switch(o.label){case 0:return r=this,a=r.input,s=r.options,s instanceof OX?[4,Jn.mtcnn.forward(a,s)]:[3,2];case 1:return[2,o.sent().map(function(l){return l.detection})];case 2:if(i=s instanceof sP?function(l){return Jn.tinyFaceDetector.locateFaces(l,s)}:s instanceof $1?function(l){return Jn.ssdMobilenetv1.locateFaces(l,s)}:s instanceof nP?function(l){return Jn.tinyYolov2.locateFaces(l,s)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(a)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var r=this;return new Promise(function(a){return Ur(r,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,a(s.map(function(o){return GI({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new YLe(this.runAndExtendWithFaceDetections(),this.input,r)},t.prototype.withFaceExpressions=function(){return new cP(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new fP(this.runAndExtendWithFaceDetections(),this.input)},t}(qX),XLe=function(e){fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ur(this,void 0,void 0,function(){var r,a;return $r(this,function(s){switch(s.label){case 0:return[4,new zX(this.input,this.options)];case 1:return r=s.sent(),a=r[0],r.forEach(function(i){i.score>a.score&&(a=i)}),[2,a]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var r=this;return new Promise(function(a){return Ur(r,void 0,void 0,function(){var s;return $r(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,a(s?GI({},s):void 0)]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new KLe(this.runAndExtendWithFaceDetection(),this.input,r)},t.prototype.withFaceExpressions=function(){return new dP(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new mP(this.runAndExtendWithFaceDetection(),this.input)},t}(qX);function QLe(e,t){return t===void 0&&(t=new $1),new XLe(e,t)}function JLe(e,t){return t===void 0&&(t=new $1),new zX(e,t)}function ZLe(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var r=Array.from(e),a=Array.from(t);return Math.sqrt(r.map(function(s,i){return s-a[i]}).reduce(function(s,i){return s+Math.pow(i,2)},0))}var HX=function(){function e(t,r){r===void 0&&(r=.6),this._distanceThreshold=r;var a=Array.isArray(t)?t:[t];if(!a.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var s=1,i=function(){return"person "+s++};this._labeledDescriptors=a.map(function(o){if(o instanceof f0)return o;if(o instanceof Float32Array)return new f0(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new f0(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,r){return r.map(function(a){return ZLe(a,t)}).reduce(function(a,s){return a+s},0)/(r.length||1)},e.prototype.matchDescriptor=function(t){var r=this;return this.labeledDescriptors.map(function(a){var s=a.descriptors,i=a.label;return new t9(i,r.computeMeanDistance(t,s))}).reduce(function(a,s){return a.distance<s.distance?a:s})},e.prototype.findBestMatch=function(t){var r=this.matchDescriptor(t);return r.distance<this.distanceThreshold?r:new t9("unknown",r.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var r=t.labeledDescriptors.map(function(a){return f0.fromJSON(a)});return new e(r,t.distanceThreshold)},e}();const e6e=()=>{const e=j.useRef(),[t,r]=j.useState(""),[a,s]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState(null),[d,u]=j.useState(!1),[h,f]=j.useState(!1),[p,x]=j.useState(!1),[g,b]=j.useState(null),[y,S]=j.useState(!1),[w,k]=j.useState(0);j.useEffect(()=>{O()},[]);const C=async()=>{try{console.log("Starting camera...");const F={video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}},X=await navigator.mediaDevices.getUserMedia(F);e.current&&(e.current.srcObject=X,e.current.onloadedmetadata=()=>{S(!0),console.log("Camera ready")})}catch(F){console.error("Camera access error:",F),alert("Camera access denied or not available")}},D={local:"/weights",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},E=async(F,X,Q)=>{const ie=[{name:"Local Weights",url:D.local},{name:"Primary CDN",url:D.cdn.primary},{name:"Backup CDN",url:D.cdn.backup}];for(const M of ie)try{return console.log(` Loading ${X} from ${M.name}...`),await F.loadFromUri(M.url),console.log(` ${X} loaded successfully from ${M.name}`),Q&&Q(),{success:!0,source:M.name}}catch(V){console.warn(` Failed to load ${X} from ${M.name}:`,V.message),M.name==="Local Weights"&&console.log(` Falling back to CDN for ${X}...`)}throw new Error(`Failed to load ${X} from all sources (local weights + CDN)`)},A=async()=>{try{console.log(" Loading face-api models (Local Weights + CDN fallback)..."),k(5);const F=[{net:Jn.tinyFaceDetector,name:"Tiny Face Detector",progress:30},{net:Jn.faceLandmark68Net,name:"Face Landmark 68",progress:65},{net:Jn.faceRecognitionNet,name:"Face Recognition",progress:95}];for(const X of F)await E(X.net,X.name,()=>k(X.progress)),await new Promise(Q=>setTimeout(Q,100));k(100),console.log(" All models loaded successfully!"),u(!0),C()}catch(F){console.error(" Critical: All model loading attempts failed:",F),k(0),I(F)}},I=F=>{const X=`
Face recognition models failed to load:
${F.message}

This might be due to:
- Corrupted local weight files
- Network connectivity issues
- Missing model files

Would you like to:
1. Try again (Recommended)
2. Continue without face recognition
3. Use CDN only
  `;confirm(X+`

Click OK to try again, Cancel to continue without face recognition`)?setTimeout(()=>A(),1e3):(console.log(" Continuing without face recognition..."),u(!1),startBasicCamera())},L=async()=>{try{console.log(" Loading models from CDN only..."),k(10);const F=D.cdn.primary;await Jn.tinyFaceDetector.loadFromUri(F),k(40),await Jn.faceLandmark68Net.loadFromUri(F),k(70),await Jn.faceRecognitionNet.loadFromUri(F),k(100),console.log(" All models loaded from CDN"),u(!0),C()}catch(F){console.error("CDN loading also failed:",F),alert("Unable to load face recognition models. Please check your internet connection.")}},P=async()=>{const F=["/weights/tiny_face_detector_model-weights_manifest.json","/weights/tiny_face_detector_model-shard1","/weights/face_landmark_68_model-weights_manifest.json","/weights/face_landmark_68_model-shard1","/weights/face_recognition_model-weights_manifest.json","/weights/face_recognition_model-shard1","/weights/face_recognition_model-shard2"];console.log(" Checking weight file integrity...");for(const X of F)try{const Q=await fetch(X,{method:"HEAD"}),ie=Q.headers.get("content-length");if(console.log(`${Q.ok?"":""} ${X}: ${ie?ie+" bytes":"Size unknown"}`),!Q.ok)return console.warn(` Missing or inaccessible: ${X}`),!1}catch(Q){return console.error(` Error checking ${X}:`,Q),!1}return console.log(" All weight files validated successfully"),!0},O=async()=>{console.log(" Starting comprehensive model loading..."),await P()?(console.log(" Local weights validated, using hybrid approach"),await A()):(console.log(" Local weights invalid, using CDN only"),await L())},Y=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}try{x(!0),console.log("Fetching employee by ID...");const F=await fetch(`/api/attendance/employee/${t.trim()}`);if(!F.ok){if(F.status===404){alert("Employee not found with this ID"),o(""),s("");return}throw new Error(`HTTP error! status: ${F.status}`)}const X=await F.json();o(X.name),s(X.name),alert(`Employee found: ${X.name}`)}catch(F){console.error("Error fetching employee:",F),alert("Error fetching employee details. Please try again."),o(""),s("")}finally{x(!1)}},q=async F=>{try{f(!0),console.log("Checking for duplicate faces...");const Q=await(await fetch("/api/attendance/employees")).json();if(Q.length===0)return b({isDuplicate:!1,message:"No existing employees to compare with."}),!1;const ie=Q.map(W=>{const ee=W.descriptor.map(ne=>parseFloat(ne)),re=new Float32Array(ee);return new f0(W._id,[re])}),V=new HX(ie,.5).findBestMatch(new Float32Array(F));if(console.log("Duplicate check result:",V.label,"Distance:",V.distance),V.label!=="unknown"){const W=Q.find(re=>re._id===V.label),ee=(100-V.distance*100).toFixed(1);return b({isDuplicate:!0,employeeName:W.name,similarity:ee,message:` Face matches existing employee: ${W.name} (${ee}% similarity)`}),!0}else return b({isDuplicate:!1,message:` No duplicate found. Face is unique (closest match: ${(100-V.distance*100).toFixed(1)}% similarity)`}),!1}catch(X){return console.error("Error checking duplicates:",X),b({isDuplicate:!1,message:" Could not check for duplicates. Proceeding anyway."}),!1}finally{f(!1)}},K=async()=>{if(!d){alert("Models are still loading, please wait...");return}if(!y||!e.current){alert("Camera not ready");return}try{console.log("Capturing face...");const F=await QLe(e.current,new sP).withFaceLandmarks().withFaceDescriptor();if(F){const X=Array.from(F.descriptor);c(X),console.log("Face captured successfully. Checking for duplicates...");const Q=await q(X);alert(Q?" Warning: This face appears to match an existing employee. Please check the details below.":"Face captured successfully! No duplicate found. You can now register.")}else alert("No face detected. Please make sure your face is clearly visible and try again."),b(null)}catch(F){console.error("Face detection error:",F),alert("Error detecting face. Please try again."),b(null)}},U=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}if(!a.trim()){alert("Please fetch employee name using Employee ID");return}if(!l){alert("Please capture face first");return}if(!(g&&g.isDuplicate&&!window.confirm(` WARNING: This face matches existing employee "${g.employeeName}" with ${g.similarity}% similarity.

Are you sure you want to register this person as a new employee?

Click OK to proceed anyway, or Cancel to stop.`)))try{console.log("Registering employee...");const F=document.createElement("canvas");F.width=e.current.videoWidth,F.height=e.current.videoHeight,F.getContext("2d").drawImage(e.current,0,0);const Q=F.toDataURL("image/png"),ie=await fetch("/api/attendance/employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:t.trim(),name:a.trim(),descriptor:l})});if(!ie.ok){const W=await ie.json();throw new Error(W.error||"Registration failed")}const M=await ie.json();alert(` Employee "${a.trim()}" registered successfully!`);const V=e.current.srcObject;V&&(V.getTracks().forEach(ee=>ee.stop()),e.current.srcObject=null),r(""),s(""),o(""),c(null),b(null),S(!1)}catch(F){console.error("Registration error:",F),alert(`Registration failed: ${F.message}`)}},J=async()=>{try{e.current&&e.current.srcObject&&e.current.srcObject.getTracks().forEach(Q=>Q.stop()),c(null),b(null),S(!1),await C()}catch(F){console.error("Error restarting camera:",F),alert("Error restarting camera")}};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Employee Face Registration"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Employee Face Registration"})]})})]})}),n.jsx("div",{children:n.jsx("div",{className:"card ",children:n.jsxs("div",{className:"card-body ",children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-lg-6",children:[n.jsx("div",{className:"text-center mb-4",children:n.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Camera Feed"})}),!d&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"progress",children:n.jsx("div",{className:"progress-bar bg-primary progress-bar-animated progress-bar-striped",style:{width:`${w}%`}})}),n.jsxs("p",{className:"text-center text-muted small mt-2",children:["Loading models... ",w,"%"]})]}),n.jsx("div",{className:"position-relative mb-4",children:n.jsxs("div",{className:"card border-3 border-secondary rounded-3 overflow-hidden shadow",children:[n.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100 h-100"}),!y&&d&&n.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-light",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border text-primary mb-2",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"text-muted mb-0",children:"Starting camera..."})]})})]})}),n.jsxs("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[n.jsx("button",{onClick:K,disabled:!d||!y||h,className:`btn btn-lg fw-semibold px-4 ${d&&y&&!h?"btn-primary shadow":"btn-secondary"}`,children:d?y?h?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-camera-fill me-2"}),"Capture & Check"]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Camera Starting..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Loading Models..."]})}),n.jsxs("button",{onClick:J,className:"btn btn-outline-info btn-lg fw-semibold px-4",children:[n.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"Restart Camera"]})]})]}),n.jsxs("div",{className:"col-lg-6",children:[n.jsx("div",{className:"text-center mb-4",children:n.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Employee Details"})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee ID"}),n.jsxs("div",{className:"input-group input-group-sm",children:[n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Employee ID",value:t,onChange:F=>r(F.target.value)}),n.jsx("button",{onClick:Y,disabled:p||!t.trim(),className:`btn ${!p&&t.trim()?"btn-success":"btn-secondary"} fw-semibold`,type:"button",children:p?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Fetching..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-search me-2"}),"Fetch"]})})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee Name"}),n.jsx("input",{type:"text",className:"form-control form-control-lg bg-light",value:a,readOnly:!0,placeholder:"Name will be fetched automatically"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("button",{onClick:U,disabled:!t.trim()||!a.trim()||!l||h,className:`btn btn-lg w-100 fw-bold py-3 ${t.trim()&&a.trim()&&l&&!h?g&&g.isDuplicate?"btn-danger":"btn-success":"btn-secondary"} shadow`,children:g&&g.isDuplicate?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Register Anyway "]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bi bi-person-plus me-2"}),"Register Employee"]})})}),n.jsxs("div",{className:"mb-4",children:[!d&&n.jsxs("div",{className:"alert alert-info d-flex align-items-center mb-2",role:"alert",children:[n.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),n.jsx("span",{children:"Loading face recognition models..."})]}),d&&!y&&n.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-2",role:"alert",children:[n.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),n.jsx("span",{children:"Starting camera..."})]}),l&&!g&&n.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[n.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking for duplicates..."]}),l&&g&&!g.isDuplicate&&n.jsxs("div",{className:"alert alert-success mb-2",role:"alert",children:[n.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"Face verified unique, ready to register"]}),l&&g&&g.isDuplicate&&n.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[n.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Potential duplicate detected"]})]})]})]}),g&&n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:`alert ${g.isDuplicate?"alert-warning border-warning":"alert-success border-success"} border-3`,children:[n.jsxs("h5",{className:`alert-heading fw-bold ${g.isDuplicate?"text-warning":"text-success"}`,children:[n.jsx("i",{className:`bi ${g.isDuplicate?"bi-exclamation-triangle":"bi-check-circle"} me-2`}),"Duplicate Check Result"]}),n.jsx("p",{className:"mb-2 fw-semibold",children:g.message}),g.isDuplicate&&n.jsxs("p",{className:"mb-0 small",children:[n.jsx("i",{className:"bi bi-info-circle me-1"}),"Proceeding will register this person as a separate employee, which may cause recognition issues."]})]})})]})})})]})},t6e=()=>{const e=j.useRef(),t=j.useRef(),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[f,p]=j.useState(null),[x,g]=j.useState(null),[b,y]=j.useState(!1),[S,w]=j.useState(!1),k=j.useRef(),C=j.useRef(),D=j.useRef(!1),[E,A]=j.useState(0);j.useEffect(()=>(O().then(()=>{q(),U()}),()=>{I()}),[]),j.useEffect(()=>(u&&o&&s&&f!=="completed"&&!S&&Q(),()=>{k.current&&clearInterval(k.current)}),[u,o,s,f,S]);const I=()=>{k.current&&(clearInterval(k.current),k.current=null),C.current&&(C.current.getTracks().forEach(ie=>ie.stop()),C.current=null)},L={local:"/facemodels",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},P=async(ie,M,V)=>{const W=[{name:"Local FaceModels",url:`${L.local}/${V}`},{name:"Primary CDN",url:L.cdn.primary},{name:"Backup CDN",url:L.cdn.backup}];for(const ee of W)try{return await ie.loadFromUri(ee.url),{success:!0,source:ee.name}}catch(re){console.warn(` Failed to load ${M} from ${ee.name}:`,re.message)}throw new Error(`Failed to load ${M} from all sources`)},O=async()=>{try{A&&A(10);const ie=[{net:Jn.tinyFaceDetector,name:"Tiny Face Detector",path:"tiny_face_detector"},{net:Jn.faceLandmark68Net,name:"Face Landmark 68",path:"face_landmark_68"},{net:Jn.faceRecognitionNet,name:"Face Recognition",path:"face_recognition"}];for(let M=0;M<ie.length;M++){const V=ie[M];await P(V.net,V.name,V.path),A&&A(30+M*20)}A&&A(100),l(!0)}catch(ie){console.error(" Error loading models:",ie);const M=`
Failed to load face recognition models: ${ie.message}

This could be due to:
- Corrupted local model files
- Network connectivity issues
- Missing model files

Would you like to try CDN-only mode?
    `;confirm(M)?await Y():(alert("Face recognition will be disabled. You can still use basic camera features."),l&&l(!1))}},Y=async()=>{try{A&&A(10);const ie=L.cdn.primary;await Jn.tinyFaceDetector.loadFromUri(ie),A&&A(40),await Jn.faceLandmark68Net.loadFromUri(ie),A&&A(70),await Jn.faceRecognitionNet.loadFromUri(ie),A&&A(100),l(!0)}catch(ie){console.error(" CDN loading also failed:",ie),alert("Unable to load face recognition models. Please check your internet connection and try again."),A&&A(0)}},q=async()=>{try{const ie=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}}});C.current=ie,e.current&&(e.current.srcObject=ie,e.current.addEventListener("loadedmetadata",()=>{t.current&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight,h(!0),w(!1))}))}catch(ie){console.error("Camera access error:",ie),alert("Camera access denied or not available")}},K=()=>{k.current&&(clearInterval(k.current),k.current=null),C.current&&(C.current.getTracks().forEach(ie=>{ie.stop()}),C.current=null),e.current&&(e.current.srcObject=null),t.current&&t.current.getContext("2d").clearRect(0,0,t.current.width,t.current.height),h(!1),w(!0),y(!1),D.current=!1},U=async()=>{try{d(!0);const ie=localStorage.getItem("selectedCompanyId");if(!ie){alert(" Company not selected. Please select a company first."),d(!1);return}const M=await Oe.get(`/api/attendance/employees?companyId=${ie}`);if(M.data.length===0){d(!1);return}const V=M.data.map(W=>{const ee=W.descriptor.map(ne=>parseFloat(ne)),re=new Float32Array(ee);return new f0(W._id,[re])});i(new HX(V,.6)),a(M.data),d(!1)}catch(ie){console.error("Error loading employees:",ie),alert("Error loading registered employees for this company"),d(!1)}},J=async(ie,M,V)=>{if(!(D.current||b))try{y(!0),D.current=!0;const W=localStorage.getItem("selectedCompanyId");if(!W){alert(" Company not selected. Please select a company first."),setTimeout(()=>{D.current=!1,y(!1)},3e3);return}const ee=await Oe.post("/api/attendance/auto",{employeeId:ie,companyId:W});g({...ee.data.attendance,confidence:V,type:ee.data.type,workingSummary:ee.data.workingSummary,employeeName:M}),ee.data.type==="IN"?(alert(` Welcome ${M}!
IN time recorded`),p("in"),setTimeout(()=>{D.current=!1,y(!1)},1e4)):ee.data.type==="OUT"?(alert(` SEE YOU TOMM ${M}!
OUT time recorded`),p("completed"),setTimeout(()=>{K()},3e3)):ee.data.type==="COMPLETED"&&(alert(` Hello ${M}!
Your attendance is already complete for today.
${ee.data.workingSummary}`),p("completed"),setTimeout(()=>{K()},3e3))}catch(W){console.error("Auto attendance error:",W),W.response&&W.response.data?alert(` Error: ${W.response.data.error}`):alert(` Failed to mark attendance for ${M}. Please try again.`),setTimeout(()=>{D.current=!1,y(!1)},8080)}},F=(ie,M)=>{const V=M.getContext("2d");V.clearRect(0,0,M.width,M.height),ie&&ie.length>0&&ie.forEach(W=>{const{box:ee,label:re,distance:ne,employeeId:ce}=W;if(re!=="unknown"&&!D.current&&!b&&f!=="completed"){const je=(100-ne*100).toFixed(1);je>60&&J(ce,re,je)}const ae=.4,Z=ee.width*(1-ae),de=ee.height*(1-ae),z=ee.x+(ee.width-Z)/2,se=ee.y+(ee.height-de)/2;V.strokeStyle=re==="unknown"?"#ff0000":"#00ff00",V.lineWidth=2,V.strokeRect(z,se,Z,de);const Ne=re==="unknown"?"Unknown":re;`${(100-ne*100).toFixed(1)}`;const oe=`${Ne} ${b?" (Capturing...)":""}`;V.font="14px Arial",V.fillStyle=re==="unknown"?"#ff0000":b?"#ff8c00":"#00ff00";const ye=V.measureText(oe).width+10;V.fillRect(z,se-25,ye,25),V.fillStyle="#ffffff",V.fillText(oe,z+5,se-8)})},X=async()=>{if(!(!e.current||!t.current||!o||!s||S))try{const M=(await JLe(e.current,new sP).withFaceLandmarks().withFaceDescriptors()).map(V=>{const W=s.findBestMatch(V.descriptor),ee=W.label!=="unknown"?r.find(re=>re._id===W.label):null;return{box:V.detection.box,label:ee?ee.name:"unknown",employeeId:W.label!=="unknown"?W.label:null,distance:W.distance}});F(M,t.current)}catch(ie){console.error("Real-time detection error:",ie)}},Q=()=>{k.current&&clearInterval(k.current),k.current=setInterval(X,1e3)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Attendance Taking"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Attendance Taking"})]})})]})}),n.jsx("div",{style:{margin:"20px 0",position:"relative",display:"inline-block"},children:S?n.jsx("div",{style:{width:"400px",height:"300px",border:"2px solid #6c757d",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:f==="completed"?"#d4edda":"#f8f9fa",color:f==="completed"?"#155724":"#495057",fontSize:"16px",fontWeight:"bold",textAlign:"center",padding:"20px",boxSizing:"border-box"},children:f==="completed"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{children:" Attendance Completed!"}),n.jsx("div",{style:{fontSize:"14px",marginTop:"10px"},children:" Camera Stopped"}),x&&x.workingSummary&&n.jsxs("div",{style:{fontSize:"14px",fontWeight:"normal",marginTop:"10px",lineHeight:"1.4"},children:[" ",x.employeeName,n.jsx("br",{})," ",x.workingSummary]})]})}):n.jsxs(n.Fragment,{children:[n.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100 h-100",style:{border:"2px solid #ccc",borderRadius:"8px"}}),n.jsx("canvas",{ref:t,width:"400",height:"300",style:{position:"absolute",top:0,left:0,pointerEvents:"none",borderRadius:"8px"}})]})}),x&&n.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:[n.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057"},children:"Last Attendance Record"}),n.jsxs("div",{style:{textAlign:"left",fontSize:"14px",color:"#6c757d"},children:[n.jsx("strong",{children:"Employee:"})," ",x.employeeName,n.jsx("br",{}),n.jsx("strong",{children:"Type:"})," ",x.type==="IN"?" Check IN":x.type==="OUT"?" Check OUT":" Already Complete",n.jsx("br",{}),x.inTime&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"IN Time:"})," ",new Date(x.inTime).toLocaleString(),n.jsx("br",{})]}),x.outTime&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"OUT Time:"})," ",new Date(x.outTime).toLocaleString(),n.jsx("br",{})]}),x.workingSummary&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Working Hours:"})," ",x.workingSummary,n.jsx("br",{})]})]})]}),n.jsx("div",{style:{margin:"20px 0"},children:S?n.jsx("div",{children:n.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"New Session"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:U,disabled:c,className:"btn btn-primary me-2",children:c?"Loading...":" Refresh Employee List"}),n.jsx("button",{onClick:K,className:"btn btn-danger",children:"Stop Camera"})]})}),n.jsx("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:S?n.jsx("div",{children:f==="completed"&&n.jsx("p",{style:{color:"#28a745",fontSize:"16px",fontWeight:"bold"},children:" Daily attendance completed successfully! Camera stopped for privacy."})}):n.jsxs(n.Fragment,{children:[!o&&n.jsx("p",{children:" Loading face recognition models..."}),o&&c&&n.jsx("p",{children:" Loading registered employees..."}),o&&!u&&n.jsx("p",{children:" Starting camera..."}),o&&!c&&r.length===0&&n.jsx("p",{style:{color:"orange"},children:" No employees registered. Please register employees first."})]})})]})},r6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(new Date().toISOString().split("T")[0]),[s,i]=j.useState(!1),[o,l]=j.useState("date"),c=localStorage.getItem("selectedCompanyId");if(!c){alert(" Company not selected. Please select a company first.");return}j.useEffect(()=>{u()},[]);const d=async(S=null)=>{i(!0);try{let w=`/api/attendance/records?companyId=${c}`;S&&(w+=`&date=${S}`),S&&(w+=`?date=${S}`);const k=await Oe.get(w);let C=[];Array.isArray(k.data)&&(C=k.data),t(C),console.log("URL:",w),console.log("Fetched attendance data:",C)}catch(w){console.error("Error fetching attendance:",w),alert("Error fetching attendance records"),t([])}i(!1)},u=async()=>{i(!0);try{const S=await Oe.get(`/api/attendance/today?companyId=${c}`);let w=[];S.data&&S.data.employees&&Array.isArray(S.data.employees)&&(w=S.data.employees.map(k=>({...k,date:S.data.date,dateObject:S.data.dateObject}))),t(w),console.log("Today's attendance data:",w),l("today")}catch(S){console.error("Error fetching today's attendance:",S),alert("Error fetching today's attendance"),t([])}i(!1)},h=async S=>{i(!0);try{const w=await Oe.get(`/api/attendance/date/${S}?companyId=${c}`);let k=[];w.data&&w.data.employees&&Array.isArray(w.data.employees)&&(k=w.data.employees.map(C=>({...C,date:w.data.date,dateObject:w.data.dateObject}))),t(k),console.log(`Attendance data for ${S}:`,k)}catch(w){console.error("Error fetching attendance by date:",w),w.response&&w.response.status===404?alert(`No attendance records found for ${S}`):alert("Error fetching attendance records"),t([])}i(!1)},f=S=>{S.preventDefault(),h(S.target.value),l("date")},p=()=>{d(),l("all")},x=S=>S?new Date(S).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-",g=S=>new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=S=>{if(!S||S===0)return"-";const w=Math.floor(S),k=Math.round(S%1*60);return w===0?`${k}m`:k===0?`${w}h`:`${w}h ${k}m`},y=()=>{const S=e.reduce((w,k)=>w+(k.workingHours||0),0);return b(S)};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:" Employee Attendance Dashboard"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" Employee Attendance Dashboard"})]})})]})}),n.jsxs("div",{className:"d-flex align-items-center mb-3 gap-3",children:[n.jsxs("div",{className:"form-group form-group-sm",children:[n.jsx("label",{className:"form-label me-1",children:" Select Date:"}),n.jsx("input",{type:"date",className:"form-control-sm",value:r,onChange:S=>{a(S.target.value),f(S)}})]}),n.jsxs("div",{children:[n.jsx("button",{onClick:u,disabled:s,className:"btn btn-sm btn-outline-primary me-2",children:"Today"}),n.jsx("button",{onClick:p,disabled:s,className:"btn btn-sm btn-outline-secondary",children:"All Records"})]})]}),s?n.jsx("div",{children:n.jsx("p",{children:" Loading attendance records..."})}):n.jsx("div",{children:e.length===0?n.jsx("div",{children:n.jsx("p",{children:"No attendance records found for the selected criteria."})}):n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee Name"}),n.jsx("th",{children:"Employee ID"}),o==="all"&&n.jsx("th",{children:"Date"}),n.jsx("th",{children:"IN Time"}),n.jsx("th",{children:"OUT Time"}),n.jsx("th",{children:"Working Hours"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:e.map((S,w)=>n.jsxs("tr",{children:[n.jsx("td",{children:`${S.firstName||""} ${S.lastName||""}`.trim()||"Unknown Employee"}),n.jsx("td",{children:S.employeeId||"N/A"}),o==="all"&&n.jsx("td",{children:g(S.date)}),n.jsx("td",{children:S.inTime?n.jsx("span",{children:x(S.inTime)}):n.jsx("span",{children:"-"})}),n.jsx("td",{children:S.outTime?n.jsx("span",{children:x(S.outTime)}):n.jsx("span",{children:"Still Working"})}),n.jsx("td",{children:n.jsx("span",{children:b(S.workingHours)})}),n.jsx("td",{children:S.status})]},`${S.employeeObjectId}-${S.date}-${w}`))})]})})})})}),e.length>0&&n.jsxs("div",{className:"card",children:[n.jsx("h4",{className:"card-header",children:" Summary Statistics"}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-3",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-body",children:[e.length,n.jsx("div",{className:"statistic-label",children:"Total Records"})]})," "]})}),n.jsx("div",{className:"col-xl-3",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[e.filter(S=>S.status==="IN"&&!S.outTime).length,n.jsx("div",{className:"statistic-label",children:"Currently Working"})]})})}),n.jsxs("div",{className:"col-xl-3",children:[n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[e.filter(S=>S.outTime).length,n.jsx("div",{className:"statistic-label",children:"Completed Shifts"})]})})," "]}),n.jsx("div",{className:"col-xl-3",children:o!=="all"&&n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[y(),n.jsx("div",{className:"statistic-label",children:"Total Hours"})]})})})]})})]})]})},a6e=()=>{const[e,t]=j.useState({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:localStorage.getItem("selectedCompanyId")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(""),[f,p]=j.useState(""),x=/^\d{0,6}$/,g=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{b()},[]);const b=async()=>{try{if(!g)return;const P={companyId:g,financialYearStart:u,financialYearEnd:f},O=await Oe.get("/api/billingcategory",{params:P});i(O.data)}catch(P){console.error("Failed to fetch categories",P)}},y=(P,O)=>{switch(P){case"categoryName":if(!O)return"Category name is required";break;case"financialYearStart":case"financialYearEnd":if(!O)return"Both start and end dates are required";break;case"rangeStart":case"rangeEnd":if(!O)return`${P==="rangeStart"?"Range start":"Range end"} is required`;if(!x.test(O))return"Max 6 digits allowed";break;case"prefix":if(O&&O.length>10)return"Max 10 characters";break}return""},S=P=>{const{name:O,value:Y}=P.target;let q=Y;switch(O){case"categoryName":q=Y.slice(0,100);break;case"prefix":q=Y.toUpperCase().slice(0,10);break;case"rangeStart":case"rangeEnd":q=Y.replace(/[^0-9]/g,"").slice(0,6);break;default:q=Y}const U=y(O,q);t(J=>({...J,[O]:q})),a(J=>({...J,[O]:U}))},w=()=>!y("categoryName",e.categoryName)&&!y("financialYearStart",e.financialYearStart)&&!y("financialYearEnd",e.financialYearEnd)&&!y("rangeStart",e.rangeStart)&&!y("rangeEnd",e.rangeEnd),k=async P=>{P.preventDefault();const O={};if(["categoryName","financialYearStart","financialYearEnd","rangeStart","rangeEnd"].forEach(q=>{O[q]=y(q,e[q])}),a(O),Object.values(O).some(q=>q))return;const Y=s.find(q=>{if(o&&q._id===o||q.financialYearStart!==e.financialYearStart||q.financialYearEnd!==e.financialYearEnd)return!1;const K=parseInt(e.rangeStart),U=parseInt(e.rangeEnd),J=parseInt(q.rangeStart),F=parseInt(q.rangeEnd);return K<=F&&U>=J});if(Y){alert(`Range overlaps with existing category "${Y.categoryName}"`);return}try{o?(await Oe.put(`/api/billingcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/billingcategory",e),alert("Category saved successfully!")),b(),C(),I()}catch(q){console.error(q),alert("Failed to save category.")}},C=()=>{t({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:g}),l(null),a({})},D=P=>{if(!P)return"";const O=new Date(P),Y=String(O.getMonth()+1).padStart(2,"0"),q=String(O.getDate()).padStart(2,"0");return`${O.getFullYear()}-${Y}-${q}`},E=P=>{t({categoryName:P.categoryName,financialYearStart:D(P.financialYearStart),financialYearEnd:D(P.financialYearEnd),rangeStart:P.rangeStart,rangeEnd:P.rangeEnd,prefix:P.prefix||"",companyId:P.companyId}),l(P._id),A()},A=()=>d(!0),I=()=>{d(!1),C()},L=(P,O)=>{const Y=P.prefix||"",q=P.financialYearStart?P.financialYearStart.slice(0,4):"----",K=P.financialYearEnd?P.financialYearEnd.slice(0,4):"----",U=`${q}-${K}`;return`${Y}${U}/${O.toString().padStart(4,"0")}`};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("h6",{children:"Billing Category Management"}),n.jsx("button",{className:"btn btn-primary",onClick:A,children:"Add Billing Category"})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Financial Year"}),n.jsx("th",{children:"Prefix"}),n.jsx("th",{children:"Range Start"}),n.jsx("th",{children:"Range End"}),n.jsx("th",{children:"Sample Billing No."}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[s.map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:P.categoryName}),n.jsx("td",{children:P.financialYearStart&&P.financialYearEnd?`${new Date(P.financialYearStart).toLocaleDateString()} to ${new Date(P.financialYearEnd).toLocaleDateString()}`:"-"}),n.jsx("td",{children:P.prefix||"-"}),n.jsx("td",{children:P.rangeStart}),n.jsx("td",{children:P.rangeEnd}),n.jsx("td",{children:L(P,parseInt(P.rangeStart))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>E(P),children:"Edit"})})]},P._id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center text-muted",children:"No categories found"})})]})]})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Billing Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:I})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Category Name:"}),n.jsx("input",{type:"text",name:"categoryName",value:e.categoryName,onChange:S,className:`form-control ${r.categoryName?"is-invalid":""}`}),r.categoryName&&n.jsx("div",{className:"invalid-feedback",children:r.categoryName})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Financial Year Start:"}),n.jsx("input",{type:"date",name:"financialYearStart",value:e.financialYearStart,onChange:S,className:`form-control ${r.financialYearStart?"is-invalid":""}`}),r.financialYearStart&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearStart})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Financial Year End:"}),n.jsx("input",{type:"date",name:"financialYearEnd",value:e.financialYearEnd,onChange:S,className:`form-control ${r.financialYearEnd?"is-invalid":""}`}),r.financialYearEnd&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearEnd})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Prefix (Optional):"}),n.jsx("input",{type:"text",name:"prefix",value:e.prefix,onChange:S,className:"form-control"})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Range Start:"}),n.jsx("input",{type:"text",name:"rangeStart",value:e.rangeStart,onChange:S,className:`form-control ${r.rangeStart?"is-invalid":""}`}),r.rangeStart&&n.jsx("div",{className:"invalid-feedback",children:r.rangeStart})]}),n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:"Range End:"}),n.jsx("input",{type:"text",name:"rangeEnd",value:e.rangeEnd,onChange:S,className:`form-control ${r.rangeEnd?"is-invalid":""}`}),r.rangeEnd&&n.jsx("div",{className:"invalid-feedback",children:r.rangeEnd})]})]}),e.financialYearStart&&e.rangeStart&&n.jsxs("div",{className:"alert alert-info",children:[n.jsx("strong",{children:"Sample Billing Number:"})," ",L(e,parseInt(e.rangeStart))]}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!w(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})};function n6e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=y=>{const{name:S,value:w}=y.target;if(S==="rangeFrom"||S==="rangeTo"){const k=w.replace(/\D/g,"");if(k.length<=6){const C=parseInt(k);k.length===6&&C>=1e5&&C<=999999?t(D=>({...D,[S]:k})):k.length<6&&t(D=>({...D,[S]:k}))}}else t(k=>({...k,[S]:w}))},l=async y=>{y.preventDefault();try{if(s){const S=await Oe.put(`/api/customer-categories/${s}`,e);alert("Customer Category Updated!"),a(w=>w.map(k=>k._id===s?S.data:k)),i(null)}else{const S=await Oe.post("/api/customer-categories",e);alert("Customer Category Added!"),a([...r,S.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),b(),window.location.reload()}catch(S){console.error(S),alert("Error adding/updating category")}},c=async()=>{try{const y=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),w=await Oe.get("/api/customer-categories",{params:{companyId:y,financialYear:S}});a(w.data)}catch(y){console.error(y)}};j.useEffect(()=>{c()},[]);const d=y=>{t({categoryName:y.categoryName,rangeFrom:y.rangeFrom,rangeTo:y.rangeTo}),i(y._id)},[u,h]=j.useState(!1),f=()=>h(!0),p=()=>h(!1),[x,g]=j.useState(!1),b=()=>g(!1);return n.jsx("div",{className:"",children:n.jsx("div",{children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Customer Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{f()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Category"]})})})]}),n.jsxs("div",{children:[u&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit Customer Category":"Add Customer Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:l,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Category Name"}),n.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Premium",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Range From"}),n.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",min:"100000",max:"999999",value:e.rangeFrom,onChange:o,required:!0,pattern:"\\d{6}",className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2 ",children:[n.jsx("label",{children:"Range To"}),n.jsx("input",{type:"text",name:"rangeTo",max:e.rangeFrom?e.rangeFrom+9999:1999,placeholder:"e.g., 199999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body",children:[" ",n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[r.map(y=>n.jsxs("tr",{children:[n.jsx("td",{children:y.categoryName}),n.jsx("td",{children:y.rangeFrom}),n.jsx("td",{children:y.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{d(y),f()},children:"Edit"})})]},y._id)),r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"5",className:"text-center",children:"No categories found."})})]})]})})]})})]})]})})})}const s6e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const f=/^\d{0,6}$/;j.useEffect(()=>{p()},[]);const p=async()=>{try{const C=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsissuecategory",{params:{companyId:C,financialYear:D}});i(E.data)}catch(C){console.error("Failed to fetch categories",C)}},x=(C,D)=>{switch(C){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${C} is required`;if(!f.test(D))return"Max 6 digits allowed";break}return""},g=C=>{const{name:D,value:E}=C.target;let A=E,I="";switch(D){case"categoryName":A=E,A.length>100&&(A=A.slice(0,100),I="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":A=E.replace(/[^0-9]/g,""),A.length>6&&(A=A.slice(0,6),I="Maximum 6 digits allowed");break}const L=x(D,A),P=I||L;t(O=>({...O,[D]:A})),a(O=>({...O,[D]:P}))},b=()=>!x("categoryName",e.categoryName)&&!x("rangeStart",e.rangeStart)&&!x("rangeEnd",e.rangeEnd),y=async C=>{C.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=x(E,e[E])}),a(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsissuecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsissuecategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},S=C=>{t({categoryName:C.categoryName,prefix:C.prefix,rangeStart:C.rangeStart,rangeEnd:C.rangeEnd}),l(C._id),w()},w=()=>d(!0),k=()=>d(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Goods Issue Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:w,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Issue Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(C=>n.jsxs("tr",{children:[n.jsx("td",{children:C.categoryName}),n.jsx("td",{children:C.rangeStart}),n.jsx("td",{children:C.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>S(C),children:"Edit"})})]},C._id))})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Issue Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:y,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(C=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:C==="categoryName"?"Category Name":C==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:C,value:e[C],onChange:g,className:"form-control"})]},C))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},i6e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const f=/^\d{0,6}$/;j.useEffect(()=>{p()},[]);const p=async()=>{try{const C=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsreceiptcategory",{params:{companyId:C,financialYear:D}});i(E.data)}catch(C){console.error("Failed to fetch categories",C)}},x=(C,D)=>{switch(C){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${C} is required`;if(!f.test(D))return"Max 6 digits allowed";break}return""},g=C=>{const{name:D,value:E}=C.target;let A=E,I="";switch(D){case"categoryName":A=E,A.length>100&&(A=A.slice(0,100),I="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":A=E.replace(/[^0-9]/g,""),A.length>6&&(A=A.slice(0,6),I="Maximum 6 digits allowed");break}const L=x(D,A),P=I||L;t(O=>({...O,[D]:A})),a(O=>({...O,[D]:P}))},b=()=>!x("categoryName",e.categoryName)&&!x("rangeStart",e.rangeStart)&&!x("rangeEnd",e.rangeEnd),y=async C=>{C.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=x(E,e[E])}),a(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsreceiptcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsreceiptcategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},S=C=>{t({categoryName:C.categoryName,prefix:C.prefix,rangeStart:C.rangeStart,rangeEnd:C.rangeEnd}),l(C._id),w()},w=()=>d(!0),k=()=>d(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Goods Receipt Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:w,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Receipt Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(C=>n.jsxs("tr",{children:[n.jsx("td",{children:C.categoryName}),n.jsx("td",{children:C.rangeStart}),n.jsx("td",{children:C.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>S(C),children:"Edit"})})]},C._id))})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Receipt Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:y,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(C=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:C==="categoryName"?"Category Name":C==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:C,value:e[C],onChange:g,className:"form-control "})]},C))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},o6e=()=>{const[e,t]=j.useState({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:localStorage.getItem("selectedCompanyId")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(""),[f,p]=j.useState(""),x=/^\d{0,6}$/,g=localStorage.getItem("selectedCompanyId");j.useEffect(()=>{b()},[]);const b=async()=>{try{if(!g){console.error("Company ID is missing!");return}const L={companyId:g,financialYearStart:u,financialYearEnd:f};console.log("Sending API request with params:",L);const P=await Oe.get("/api/invoicecategory",{params:L});console.log("Categories fetched:",P.data),i(P.data)}catch(L){console.error("Failed to fetch categories",L)}},y=(L,P)=>{switch(L){case"categoryName":if(!P)return"Category name is required";break;case"financialYearStart":case"financialYearEnd":if(!P)return"Both start and end dates are required";break;case"rangeStart":case"rangeEnd":if(!P)return`${L==="rangeStart"?"Range start":"Range end"} is required`;if(!x.test(P))return"Max 6 digits allowed";break}return""},S=L=>{const{name:P,value:O}=L.target;let Y=O,q="";switch(P){case"categoryName":Y=O,Y.length>100&&(Y=Y.slice(0,100),q="Maximum 100 characters allowed");break;case"prefix":Y=O.toUpperCase(),Y.length>10&&(Y=Y.slice(0,10),q="Maximum 10 characters allowed");break;case"rangeStart":case"rangeEnd":Y=O.replace(/[^0-9]/g,""),Y.length>6&&(Y=Y.slice(0,6),q="Maximum 6 digits allowed");break;default:Y=O;break}const K=y(P,Y),U=q||K;t(J=>({...J,[P]:Y})),a(J=>({...J,[P]:U}))},w=()=>!y("categoryName",e.categoryName)&&!y("financialYearStart",e.financialYearStart)&&!y("financialYearEnd",e.financialYearEnd)&&!y("rangeStart",e.rangeStart)&&!y("rangeEnd",e.rangeEnd),k=async L=>{L.preventDefault();const P={};if(["categoryName","financialYearStart","financialYearEnd","rangeStart","rangeEnd"].forEach(Y=>{P[Y]=y(Y,e[Y])}),a(P),Object.values(P).some(Y=>Y))return;const O=s.find(Y=>{if(o&&Y._id===o||Y.financialYearStart!==e.financialYearStart||Y.financialYearEnd!==e.financialYearEnd)return!1;const q=parseInt(e.rangeStart),K=parseInt(e.rangeEnd),U=parseInt(Y.rangeStart),J=parseInt(Y.rangeEnd);return q<=J&&K>=U});if(O){alert(`Range overlaps with existing category "${O.categoryName}"`);return}try{o?(await Oe.put(`/api/invoicecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/invoicecategory",e),alert("Category saved successfully!")),b(),C(),A()}catch(Y){console.error(Y),alert("Failed to save category.")}},C=()=>{t({categoryName:"",financialYearStart:"",financialYearEnd:"",rangeStart:"",rangeEnd:"",prefix:"",companyId:localStorage.getItem("selectedCompanyId")}),l(null),a({})},D=L=>{t({categoryName:L.categoryName,financialYearStart:L.financialYearStart,financialYearEnd:L.financialYearEnd,rangeStart:L.rangeStart,rangeEnd:L.rangeEnd,prefix:L.prefix||"",companyId:L.companyId}),l(L._id),E()},E=()=>d(!0),A=()=>{d(!1),C()},I=(L,P)=>{const O=L.prefix||"",Y=L.financialYearStart?L.financialYearStart.slice(0,4):"----",q=L.financialYearEnd?L.financialYearEnd.slice(0,4):"----",K=`${Y}-${q}`;return`${O}${K}/${P.toString().padStart(4,"0")}`};return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Invoice Category Management"})}),n.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[n.jsxs("div",{className:"me-3 d-flex gap-2 align-items-center",children:[n.jsx("input",{type:"date",className:"form-control",value:u,onChange:L=>h(L.target.value)}),n.jsx("input",{type:"date",className:"form-control",value:f,onChange:L=>p(L.target.value)}),n.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Filter"})]}),n.jsx("div",{children:n.jsxs("a",{onClick:E,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Invoice Category"]})})]})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Financial Year"}),n.jsx("th",{children:"Prefix"}),n.jsx("th",{children:"Range Start"}),n.jsx("th",{children:"Range End"}),n.jsx("th",{children:"Sample Invoice No."}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[s.map(L=>n.jsxs("tr",{children:[n.jsx("td",{children:L.categoryName}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-info",children:[L.financialYearStart&&L.financialYearEnd?new Date(L.financialYearStart).toLocaleDateString():"_"," to ",L.financialYearEnd?new Date(L.financialYearEnd).toLocaleDateString():"_"]})}),n.jsx("td",{children:L.prefix||"-"}),n.jsx("td",{children:L.rangeStart}),n.jsx("td",{children:L.rangeEnd}),n.jsx("td",{className:"text-muted",children:I(L,parseInt(L.rangeStart))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary me-1",onClick:()=>D(L),children:"Edit"})})]},L._id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"text-center text-muted",children:"No categories found"})})]})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Invoice Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:A})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Category_Name:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"text",name:"categoryName",value:e.categoryName,onChange:S,className:`form-control ${r.categoryName?"is-invalid":""}`,placeholder:"e.g., Sales Invoice, Purchase Invoice"}),r.categoryName&&n.jsx("div",{className:"invalid-feedback",children:r.categoryName})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"FY_Start:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"date",name:"financialYearStart",value:e.financialYearStart,onChange:S,className:`form-control ${r.financialYearStart?"is-invalid":""}`}),r.financialYearStart&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearStart})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"FY_End:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"date",name:"financialYearEnd",value:e.financialYearEnd,onChange:S,className:`form-control ${r.financialYearEnd?"is-invalid":""}`}),r.financialYearEnd&&n.jsx("div",{className:"invalid-feedback",children:r.financialYearEnd})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-3",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Prefix(Optional):"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"prefix",value:e.prefix,onChange:S,className:"form-control",placeholder:"e.g., INV, BILL"})})]}),n.jsxs("div",{className:"mb-3 row col-xl-4",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Range Start:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"text",name:"rangeStart",value:e.rangeStart,onChange:S,className:`form-control ${r.rangeStart?"is-invalid":""}`,placeholder:"e.g., 1"}),r.rangeStart&&n.jsx("div",{className:"invalid-feedback",children:r.rangeStart})]})]}),n.jsxs("div",{className:"mb-3 row col-xl-4",children:[n.jsx("div",{className:"col-xl-5",children:n.jsx("label",{className:"form-label",children:"Range End:"})}),n.jsxs("div",{className:"col-xl-7",children:[n.jsx("input",{type:"text",name:"rangeEnd",value:e.rangeEnd,onChange:S,className:`form-control ${r.rangeEnd?"is-invalid":""}`,placeholder:"e.g., 9999"}),r.rangeEnd&&n.jsx("div",{className:"invalid-feedback",children:r.rangeEnd})]})]})]}),e.financialYearStart&&e.rangeStart&&n.jsxs("div",{className:"alert alert-info",children:[n.jsx("strong",{children:"Sample Invoice Number:"})," ",I(e,parseInt(e.rangeStart))]}),n.jsx("div",{className:"d-flex gap-2",children:n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!w(),children:o?"Update Category":"Add Category"})})]})})]})})})]})]})})},o9=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;j.useEffect(()=>{d()},[]);const d=async()=>{try{const E=localStorage.getItem("selectedCompanyId"),A=localStorage.getItem("financialYear"),I=await Oe.get("/api/category",{params:{companyId:E,financialYear:A}});i(I.data)}catch(E){console.error("Failed to fetch categories",E)}},u=(E,A)=>{switch(E){case"categoryName":if(!A)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!A)return`${E} is required`;if(!c.test(A))return"Max 6 digits allowed";break}return""},h=E=>{const{name:A,value:I}=E.target;let L=I,P="";switch(A){case"categoryName":L=I,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=I.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=u(A,L),Y=P||O;t(q=>({...q,[A]:L})),a(q=>({...q,[A]:Y}))},f=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),[p,x]=j.useState({});j.useEffect(()=>{const E=async()=>{const A={};for(const I of s)try{const L=await Oe.post("/api/material/generate-id",{categoryId:I._id});A[I._id]=L.data.nextNumber}catch(L){console.error("Error generating ID for category:",I._id,L)}x(A)};s.length&&E()},[s]);const g=async E=>{E.preventDefault();const A={};if(Object.keys(e).forEach(I=>{A[I]=u(I,e[I])}),a(A),!Object.values(A).some(I=>I))try{o?(await Oe.put(`/api/category/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/category",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(I){console.error(I),alert("Failed to save category.")}},b=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id)},[y,S]=j.useState(!1),w=()=>S(!0),k=()=>S(!1),[C,D]=j.useState(!1);return n.jsx("div",{className:"",children:n.jsx("div",{children:n.jsx("div",{className:"content",children:n.jsxs("div",{children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Material Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{w()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Material Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.length>0&&s?.map(E=>n.jsxs("tr",{children:[n.jsx("td",{children:E.categoryName}),n.jsx("td",{children:E.rangeStart}),n.jsx("td",{children:E.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{b(E),w()},children:"Edit"})})]},E._id))})]})})})}),y&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Material Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:g,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:E,value:e[E],onChange:h,className:"form-control"})]},E))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!f(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})})})};function l6e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({});localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=()=>{let k={};const C=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?C.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?C.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{(k.target.name==="rangeFrom"||k.target.name==="rangeTo")&&(k.target.value=k.target.value.replace(/[^0-9]/g,"")),t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/po-categories/${s}`,e),alert("PO Category updated!")):(await Oe.post("/api/po-categories",e),alert("PO Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving PO Category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),D=await Oe.get("/api/po-categories",{params:{companyId:k,financialYear:C}});a(D.data)},f=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{h()},[]);const[x,g]=j.useState(!1),b=()=>g(!0),y=()=>g(!1),[S,w]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"PO Categories"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("button",{type:"button",onClick:b,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add PO Category"]})})})]}),n.jsx("h2",{}),x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," PO Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:u,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.categoryName})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{d(k),k.target.value=k.target.value.replace(/[^0-9]/g,"")},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeTo",type:"text",value:e.rangeTo,onChange:d,maxLength:6,placeholder:"Range To (6 digits)",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"RangeFrom"}),n.jsx("th",{children:"RangeTo"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+1}),n.jsx("td",{children:k.categoryName}),n.jsx("td",{children:k.rangeFrom}),n.jsx("td",{children:k.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{f(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const c6e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;j.useEffect(()=>{d()},[]);const d=async()=>{try{const w=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear"),C=await Oe.get("/api/purchasecategory",{params:{companyId:w,financialYear:k}});i(C.data)}catch(w){console.error("Failed to fetch categories",w)}},u=(w,k)=>{switch(w){case"categoryName":if(!k)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!k)return`${w} is required`;if(!c.test(k))return"Max 6 digits allowed";break}return""},h=w=>{const{name:k,value:C}=w.target;let D=C,E="";switch(k){case"categoryName":D=C,D.length>100&&(D=D.slice(0,100),E="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":D=C.replace(/[^0-9]/g,""),D.length>6&&(D=D.slice(0,6),E="Maximum 6 digits allowed");break}const A=u(k,D),I=E||A;t(L=>({...L,[k]:D})),a(L=>({...L,[k]:I}))},f=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),p=async w=>{w.preventDefault();const k={};if(Object.keys(e).forEach(C=>{k[C]=u(C,e[C])}),a(k),!Object.values(k).some(C=>C))try{o?(await Oe.put(`/api/purchasecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/purchasecategory",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(C){console.error(C),alert("Failed to save category.")}},x=w=>{t({categoryName:w.categoryName,prefix:w.prefix,rangeStart:w.rangeStart,rangeEnd:w.rangeEnd}),l(w._id)},[g,b]=j.useState(!1),y=()=>b(!0),S=()=>b(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Purchase Indent Categories"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Purchase Request Category"]})})})]}),g&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Purchase Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{S(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:p,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(w=>n.jsxs("div",{className:" col-xl-3 mb-3",children:[n.jsx("label",{className:"form-label",children:w==="categoryName"?"Category Name":w==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:w,value:e[w],onChange:h,className:"form-control "})]},w))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!f(),children:o?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(w=>n.jsxs("tr",{children:[n.jsx("td",{children:w.categoryName}),n.jsx("td",{children:w.rangeStart}),n.jsx("td",{children:w.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{x(w),y()},children:"Edit"})})]},w._id))})]})})})]})})};function d6e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),c=w=>{const{name:k,value:C}=w.target;t(D=>({...D,[k]:C}))},d=async w=>{w.preventDefault();try{s?await Oe.put(`/api/rfq-categories/${s}`,e):await Oe.post("/api/rfq-categories",e),t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),u(),S(),window.location.reload()}catch(k){console.error("Error submitting category:",k)}},u=async()=>{try{const w=await Oe.get("/api/rfq-categories",{params:{companyId:o,financialYear:l}});a(w.data)}catch(w){console.error("Error fetching categories:",w)}},h=w=>{t({categoryName:w.categoryName,rangeFrom:w.rangeFrom,rangeTo:w.rangeTo}),i(w._id)};j.useEffect(()=>{u()},[]);const[f,p]=j.useState(!1),x=()=>p(!0),g=()=>p(!1),[b,y]=j.useState(!1),S=()=>y(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"RFQ Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{x()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"isax isax-add-circle5 me-1"}),"RFQ Category"]})})})]}),n.jsx("h2",{}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit RFQ Category":"Add RFQ Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),g(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:d,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{htmlFor:"categoryName",children:"Category Name"}),n.jsx("input",{name:"categoryName",placeholder:"Category Name",value:e.categoryName,onChange:c,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{htmlFor:"rangeFrom",children:"Range From"}),n.jsx("input",{name:"rangeFrom",placeholder:"Range From",value:e.rangeFrom,onChange:w=>{w.target.value=w.target.value.replace(/[^0-9]/g,""),c(w)},required:!0,type:"text",maxLength:6,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{htmlFor:"rangeTo",children:"Range To"}),n.jsx("input",{name:"rangeTo",placeholder:"Range To",value:e.rangeTo,onChange:w=>{w.target.value=w.target.value.replace(/[^0-9]/g,""),c(w)},required:!0,type:"text",maxLength:6,className:"form-control"})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((w,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:k+1}),n.jsx("td",{children:w.categoryName}),n.jsx("td",{children:w.rangeFrom}),n.jsx("td",{children:w.rangeTo}),n.jsx("td",{children:n.jsx("button",{onClick:()=>{h(w),x()},className:"btn btn-sm btn-primary",children:"Edit"})})]},w._id))})]})})})})]})}function l9(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const d=()=>{let C={};const D=/^\d{6}$/;return C.categoryName=e.categoryName?"":"Required",C.rangeFrom=e.rangeFrom?D.test(e.rangeFrom)?"":"Must be 6 digits":"Required",C.rangeTo=e.rangeTo?D.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(C),Object.values(C).every(E=>E==="")},u=C=>{t({...e,[C.target.name]:C.target.value})},h=async C=>{if(C.preventDefault(),!!d())try{s?(await Oe.put(`/api/sale-contract-categories/${s}`,e),alert("Contract category updated successfully!")):(await Oe.post("/api/sale-contract-categories",e),alert("Contract category added successfully!")),f(),x(),S(),window.location.reload()}catch{alert("Error saving contract category. Please try again.")}},f=async()=>{try{const C=await Oe.get("/api/sale-contract-categories",{params:{companyId:c}});a(C.data)}catch(C){console.error("Error fetching contract categories:",C)}},p=C=>{t(C),i(C._id),l({})},x=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{f()},[]);const[g,b]=j.useState(!1),y=()=>b(!0),S=()=>b(!1),[w,k]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-2",children:[n.jsx("div",{className:"my-auto mb-2",children:n.jsx("h2",{className:"mb-1",children:"Sales Contract Categories"})}),n.jsx("div",{children:n.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})]}),g&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[n.jsx("i",{className:"fas fa-file-contract me-2"}),s?"Edit":"Create"," Contract Category"]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{S(),x()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:h,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Category Name ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:u,className:"form-control",placeholder:"Enter category name (e.g., Standard Contracts)"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range From ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:C=>{C.target.value=C.target.value.replace(/\D/g,""),u(C)},className:"form-control",maxLength:6,placeholder:"Enter start range (6 digits)",min:"100000",max:"999999"})]}),n.jsxs("div",{className:"col-xl-3 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Range To ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{name:"rangeTo",type:"text",className:"form-control ",value:e.rangeTo,onChange:C=>{C.target.value=C.target.value.replace(/\D/g,""),u(C)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),n.jsx("div",{className:"d-flex gap-2 justify-content-start",children:n.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",children:s?"Update Category":"Add Category"})})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((C,D)=>n.jsxs("tr",{children:[n.jsx("td",{children:D+1}),n.jsx("td",{children:n.jsx("div",{className:"d-flex align-items-center",children:n.jsx("span",{className:"fw-medium",children:C.categoryName})})}),n.jsx("td",{children:C.rangeFrom?.toLocaleString()}),n.jsx("td",{children:C.rangeTo?.toLocaleString()}),n.jsx("td",{children:n.jsx("div",{className:"d-flex gap-1",children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{p(C),y()},title:"Edit Category",children:"Edit"})})})]},C._id))})]})})})})]})}function u6e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=()=>{let k={};const C=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?C.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?C.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sale-quotation-categories/${s}`,e),alert("Category updated!")):(await Oe.post("/api/sale-quotation-categories",e),alert("Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),D=await Oe.get("/api/sale-quotation-categories",{params:{companyId:k,financialYear:C}});a(D.data)},f=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{h()},[]);const[x,g]=j.useState(!1),b=()=>g(!0),y=()=>g(!1),[S,w]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Sales Quotation Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"New Quotation Category"]})})})]}),x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Quotation Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:u,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,className:"form-control",placeholder:"Category Name"}),n.jsx("div",{style:{color:"red"},children:o.categoryName})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,className:"form-control",placeholder:"Range From (6 digits)"}),n.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"}),n.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"RangeFrom"}),n.jsx("th",{children:"RangeTo"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+1}),n.jsx("td",{children:k.categoryName}),n.jsx("td",{children:k.rangeFrom}),n.jsx("td",{children:k.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{f(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const h6e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),c=/^[A-Za-z ]{0,100}$/,d=/^\d{0,6}$/;j.useEffect(()=>{u()},[]);const u=async()=>{try{const D=localStorage.getItem("selectedCompanyId"),E=localStorage.getItem("financialYear"),A=await Oe.get("/api/salecategory",{params:{companyId:D,financialYear:E}});i(A.data)}catch(D){console.error("Failed to fetch categories",D)}},h=(D,E)=>{switch(D){case"categoryName":if(!E)return"Category name is required";if(!c.test(E))return"Only alphabets (max 100 characters)";break;case"rangeStart":case"rangeEnd":if(!E)return`${D} is required`;if(!d.test(E))return"Max 6 digits allowed";break}return""},f=D=>{const{name:E,value:A}=D.target;let I=A,L="";switch(E){case"categoryName":I=A,I.length>100&&(I=I.slice(0,100),L="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":I=A.replace(/[^0-9]/g,""),I.length>6&&(I=I.slice(0,6),L="Maximum 6 digits allowed");break}const P=h(E,I),O=L||P;t(Y=>({...Y,[E]:I})),a(Y=>({...Y,[E]:O}))},p=()=>!h("categoryName",e.categoryName)&&!h("rangeStart",e.rangeStart)&&!h("rangeEnd",e.rangeEnd),x=async D=>{D.preventDefault();const E={};if(Object.keys(e).forEach(A=>{E[A]=h(A,e[A])}),a(E),!Object.values(E).some(A=>A))try{o?(await Oe.put(`/api/salecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/salecategory",e),alert("Category saved successfully!")),u(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},g=D=>{t({categoryName:D.categoryName,rangeStart:D.rangeStart,rangeEnd:D.rangeEnd}),l(D._id)},[b,y]=j.useState(!1),S=()=>y(!0),w=()=>y(!1),[k,C]=j.useState(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Sales Indent Categories"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{S()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Enquiry Category"]})})})]}),b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Sales Indent Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{w(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:x,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(D=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:D==="categoryName"?"Category Name":D==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:D,value:e[D],onChange:f,className:"form-control "})]},D))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!p(),children:o?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(D=>n.jsxs("tr",{children:[n.jsx("td",{children:D.categoryName}),n.jsx("td",{children:D.rangeStart}),n.jsx("td",{children:D.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{g(D),S()},children:"Edit"})})]},D._id))})]})})})]})})};function f6e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState({}),c=()=>{let k={};const C=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?C.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?C.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sales-order-categories/${s}`,e),alert("Sales Order Category updated!")):(await Oe.post("/api/sales-order-categories",e),alert("Sales Order Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),D=await Oe.get("/api/sales-order-categories",{params:{companyId:k,financialYear:C}});a(D.data)},f=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};j.useEffect(()=>{h()},[]);const[x,g]=j.useState(!1),b=()=>g(!0),y=()=>g(!1),[S,w]=j.useState(!1);return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Sales Order Category  "})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Order Category"]})})})]}),x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Sales Order Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("h2",{}),n.jsxs("form",{onSubmit:u,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3",children:[n.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),n.jsx("div",{style:{color:"red"},children:o.categoryName})]}),n.jsx("div",{className:"col-xl-3",children:n.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"})}),n.jsx("div",{className:"col-xl-3",children:n.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"})})]}),n.jsx("button",{className:"btn btn-sm btn-primary mt-2 mb-2",type:"submit",children:s?"Update Category":"Add Category"})]})]})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"RangeFrom"}),n.jsx("th",{children:"RangeTo"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:C+1}),n.jsx("td",{children:k.categoryName}),n.jsx("td",{children:k.rangeFrom}),n.jsx("td",{children:k.rangeTo}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{f(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const m6e=()=>{const[e,t]=j.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(!1),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),x=/^\d{0,6}$/;j.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/goodsTransferCategory",{params:{companyId:f,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,A)=>{switch(E){case"categoryName":if(!A)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!A)return`${E} is required`;if(!x.test(A))return"Max 6 digits allowed";break}return""},y=E=>{const{name:A,value:I}=E.target;let L=I,P="";switch(A){case"categoryName":L=I,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=I.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(A,L),Y=P||O;t(q=>({...q,[A]:L})),a(q=>({...q,[A]:Y}))},S=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),w=async E=>{E.preventDefault();const A={};if(Object.keys(e).forEach(I=>{A[I]=b(I,e[I])}),a(A),!Object.values(A).some(I=>I))try{o?(await Oe.put(`/api/goodsTransferCategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsTransferCategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(I){console.error(I),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),C()},C=()=>d(!0),D=()=>d(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Goods Transfer Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:C,className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Transfer Category"]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Start"}),n.jsx("th",{children:"End"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:s.map(E=>n.jsxs("tr",{children:[n.jsx("td",{children:E.categoryName}),n.jsx("td",{children:E.rangeStart}),n.jsx("td",{children:E.rangeEnd}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Transfer Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:w,children:[n.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>n.jsxs("div",{className:"mb-3 col-xl-3",children:[n.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),n.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"}),r[E]&&n.jsx("div",{className:"invalid-feedback",children:r[E]})]},E))}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!S(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})};function p6e(){const[e,t]=j.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,a]=j.useState([]),[s,i]=j.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=b=>{const{name:y,value:S}=b.target;if(y==="rangeFrom"||y==="rangeTo"){const w=S.replace(/\D/g,"");if(w.length<=6){const k=parseInt(w);w.length===6&&k>=1e5&&k<=999999?t(C=>({...C,[y]:w})):w.length<6&&t(C=>({...C,[y]:w}))}}else t(w=>({...w,[y]:S}))},l=async b=>{b.preventDefault();try{if(s){const y=await Oe.put(`/api/vendor-categories/${s}`,e);alert("Vendor Category Updated!"),a(S=>S.map(w=>w._id===s?y.data:w)),i(null)}else{const y=await Oe.post("/api/vendor-categories",e);alert("Vendor Category Added!"),a([...r,y.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),window.location.reload()}catch(y){console.error(y),alert("Error adding/updating category")}},c=async()=>{try{const b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),S=await Oe.get("/api/vendor-categories",{params:{companyId:b,financialYear:y}});a(S.data)}catch(b){console.error(b)}};j.useEffect(()=>{c()},[]);const d=b=>{t({categoryName:b.categoryName,rangeFrom:b.rangeFrom,rangeTo:b.rangeTo}),i(b._id)},[u,h]=j.useState(!1),f=()=>h(!0),p=()=>h(!1),[x,g]=j.useState(!1);return n.jsx("div",{className:"",children:n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[n.jsx("div",{children:n.jsx("h6",{children:"Vendor Category"})}),n.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:n.jsx("div",{children:n.jsxs("a",{onClick:()=>{f()},className:"btn btn-primary d-flex align-items-center",children:[n.jsx("i",{className:"ti ti-plus me-1"}),"Add Vendor Category"]})})})]}),n.jsxs("div",{children:[u&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit Vendor Category":"Add Vendor Category"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:l,children:[n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Category Name"}),n.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Hardware",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Range From"}),n.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",value:e.rangeFrom,onChange:o,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-xl-3 mb-2",children:[n.jsx("label",{children:"Range To"}),n.jsx("input",{type:"text",name:"rangeTo",placeholder:"e.g., 999999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),n.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category Name"}),n.jsx("th",{children:"Range From"}),n.jsx("th",{children:"Range To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map(b=>n.jsxs("tr",{children:[n.jsx("td",{children:b.categoryName}),n.jsx("td",{children:b.rangeFrom}),n.jsx("td",{children:b.rangeTo}),n.jsx("td",{children:n.jsx("button",{onClick:()=>{d(b),f()},className:"btn btn-sm btn-primary",children:"Edit"})})]},b._id))})]})})})})]})]})})}function x6e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""}),[u,h]=j.useState(!1),[f,p]=j.useState(null),[x,g]=j.useState([]),[b,y]=j.useState([]),S=localStorage.getItem("selectedCompanyId"),w=localStorage.getItem("financialYear");j.useEffect(()=>{k(),C()},[]),j.useEffect(()=>{D()},[e,c]);const k=async()=>{try{i(!0);const q=await Oe.get("/api/goodsTransfer",{params:{companyId:S,financialYear:w}});t(q.data),l("")}catch(q){l("Failed to fetch goods transfers"),console.error("Error fetching transfers:",q)}finally{i(!1)}},C=async()=>{try{const q=await Oe.get("/api/goodsTransferCategory",{params:{companyId:S}});g(q.data);const K=await Oe.get("/api/locations",{params:{companyId:S,financialYear:w}});y(K.data)}catch(q){console.error("Error fetching dropdown data:",q)}},D=()=>{let q=[...e];c.category&&(q=q.filter(K=>K.category.toLowerCase().includes(c.category.toLowerCase()))),c.location&&(q=q.filter(K=>K.location.toLowerCase().includes(c.location.toLowerCase()))),c.docnumber&&(q=q.filter(K=>K.docnumber.toLowerCase().includes(c.docnumber.toLowerCase()))),c.dateFrom&&(q=q.filter(K=>new Date(K.docDate)>=new Date(c.dateFrom))),c.dateTo&&(q=q.filter(K=>new Date(K.docDate)<=new Date(c.dateTo))),a(q)},E=(q,K)=>{d(U=>({...U,[q]:K}))},A=()=>{d({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""})},I=q=>{p(q),h(!0)},L=q=>{const K=window.open("","_blank","width=800,height=600"),U=P(q);K.document.write(U),K.document.close(),K.onload=()=>{K.print()}},P=q=>{const K=new Date().toLocaleString(),U=Y(q.items);return`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Goods Transfer - ${q.docnumber}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              color: #333;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 20px;
            }
            .company-name {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .document-title {
              font-size: 20px;
              font-weight: bold;
              color: #666;
            }
            .info-section {
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            }
            .info-box {
              width: 48%;
            }
            .info-box h4 {
              background-color: #f8f9fa;
              padding: 8px;
              margin: 0 0 10px 0;
              border-left: 4px solid #007bff;
            }
            .info-table {
              width: 100%;
              border-collapse: collapse;
            }
            .info-table td {
              padding: 5px;
              border-bottom: 1px solid #eee;
            }
            .info-table td:first-child {
              font-weight: bold;
              width: 40%;
            }
            .items-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
            }
            .items-table th,
            .items-table td {
              border: 1px solid #333;
              padding: 8px;
              text-align: left;
            }
            .items-table th {
              background-color: #f8f9fa;
              font-weight: bold;
            }
            .items-table tr:nth-child(even) {
              background-color: #f9f9f9;
            }
            .total-row {
              background-color: #e9ecef !important;
              font-weight: bold;
            }
            .footer {
              margin-top: 30px;
              border-top: 1px solid #333;
              padding-top: 20px;
            }
            .signature-section {
              display: flex;
              justify-content: space-between;
              margin-top: 40px;
            }
            .signature-box {
              width: 200px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              margin-top: 50px;
              padding-top: 5px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Your Company Name</div>
            <div class="document-title">GOODS TRANSFER DOCUMENT</div>
          </div>

          <div class="info-section">
            <div class="info-box">
              <h4>Document Information</h4>
              <table class="info-table">
                <tr>
                  <td>Document No:</td>
                  <td><strong>${q.docnumber}</strong></td>
                </tr>
                <tr>
                  <td>Category:</td>
                  <td>${q.category}</td>
                </tr>
                <tr>
                  <td>Description:</td>
                  <td>${q.catdesc||"N/A"}</td>
                </tr>
                <tr>
                  <td>Location:</td>
                  <td>${q.location}</td>
                </tr>
              </table>
            </div>
            
            <div class="info-box">
              <h4>Dates & Reference</h4>
              <table class="info-table">
                <tr>
                  <td>Document Date:</td>
                  <td>${O(q.docDate)}</td>
                </tr>
                <tr>
                  <td>Posting Date:</td>
                  <td>${O(q.postDate)}</td>
                </tr>
                <tr>
                  <td>Reference:</td>
                  <td>${q.reference||"N/A"}</td>
                </tr>
                <tr>
                  <td>Print Date:</td>
                  <td>${K}</td>
                </tr>
              </table>
            </div>
          </div>

          <h4>Items Details</h4>
          <table class="items-table">
            <thead>
              <tr>
                <th style="width: 5%">#</th>
                <th style="width: 15%">Material ID</th>
                <th style="width: 25%">Description</th>
                <th style="width: 8%">Qty</th>
                <th style="width: 8%">UOM</th>
                <th style="width: 10%">Price</th>
                <th style="width: 10%">Total</th>
                <th style="width: 10%">Del Date</th>
                <th style="width: 9%">Lot No</th>
              </tr>
            </thead>
            <tbody>
              ${q.items?q.items.map((J,F)=>`
                <tr>
                  <td>${F+1}</td>
                  <td>${J.materialId||"N/A"}</td>
                  <td>${J.description||"N/A"}</td>
                  <td>${J.quantity||"0"}</td>
                  <td>${J.baseUnit||"N/A"}</td>
                  <td>${J.price||"0.00"}</td>
                  <td>${(parseFloat(J.quantity||0)*parseFloat(J.price||0)).toFixed(2)}</td>
                  <td>${O(J.deliveryDate)}</td>
                  <td>${J.lotNo||"N/A"}</td>
                </tr>
              `).join(""):'<tr><td colspan="9" style="text-align: center;">No items found</td></tr>'}
              <tr class="total-row">
                <td colspan="6" style="text-align: right;"><strong>GRAND TOTAL:</strong></td>
                <td><strong>${U}</strong></td>
                <td colspan="2"></td>
              </tr>
            </tbody>
          </table>

          <div class="footer">
            <div class="signature-section">
              <div class="signature-box">
                <div class="signature-line">Prepared By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Checked By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Approved By</div>
              </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666;">
              <p>This is a computer generated document. No signature required.</p>
              <p>Generated on: ${K} | User: ${localStorage.getItem("userLogin")||"System"}</p>
            </div>
          </div>
        </body>
      </html>
    `},O=q=>q?new Date(q).toLocaleDateString("en-IN"):"N/A",Y=q=>!q||q.length===0?0:q.reduce((K,U)=>K+parseFloat(U.quantity||0)*parseFloat(U.price||0),0).toFixed(2);return s?n.jsx("div",{className:"container p-3",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2",children:"Loading goods transfers..."})]})}):n.jsxs("div",{className:"container-fluid p-3",children:[n.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:n.jsxs("h4",{children:[n.jsx("i",{className:"fas fa-truck me-2"}),"Goods Transfer List"]})}),o&&n.jsxs("div",{className:"alert alert-danger",role:"alert",children:[n.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o]}),n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Category"})}),n.jsx("div",{className:"col-7",children:n.jsxs("select",{className:"form-select form-select-sm",value:c.category,onChange:q=>E("category",q.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),x.map((q,K)=>n.jsx("option",{value:q.categoryName,children:q.categoryName},K))]})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Location"})}),n.jsx("div",{className:"col-7",children:n.jsxs("select",{className:"form-select form-select-sm",value:c.location,onChange:q=>E("location",q.target.value),children:[n.jsx("option",{value:"",children:"All Locations"}),b.map((q,K)=>n.jsx("option",{value:q.name||q.locationName,children:q.name||q.locationName},K))]})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"Doc No"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search...",value:c.docnumber,onChange:q=>E("docnumber",q.target.value)})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"From"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateFrom,onChange:q=>E("dateFrom",q.target.value)})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:"To"})}),n.jsx("div",{className:"col-7",children:n.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateTo,onChange:q=>E("dateTo",q.target.value)})})]})}),n.jsx("div",{className:"col-md-2",children:n.jsxs("div",{className:"row g-1 align-items-center",children:[n.jsx("div",{className:"col-5",children:n.jsx("label",{className:"form-label mb-0",children:""})}),n.jsx("div",{className:"col-7",children:n.jsxs("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:A,children:[n.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})})]})})]})})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:r.length===0?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),n.jsx("h5",{children:"No goods transfers found"}),n.jsx("p",{className:"text-muted",children:"Try adjusting your filters or create a new goods transfer."})]}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Document No"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Location"}),n.jsx("th",{children:"Document Date"}),n.jsx("th",{children:"Posting Date"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Items Count"}),n.jsx("th",{children:"Total Value"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map((q,K)=>n.jsxs("tr",{children:[n.jsx("td",{children:K+1}),n.jsx("td",{children:q.docnumber}),n.jsx("td",{children:q.category}),n.jsx("td",{children:q.location}),n.jsx("td",{children:O(q.docDate)}),n.jsx("td",{children:O(q.postDate)}),n.jsx("td",{children:q.reference}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:q.items?q.items.length:0})}),n.jsx("td",{children:n.jsxs("strong",{children:["",Y(q.items)]})}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>I(q),title:"View Details",children:n.jsx("i",{className:"fas fa-eye"})}),n.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>L(q),title:"Print Document",children:n.jsx("i",{className:"fas fa-print"})})]})})]},q._id||K))})]})})})}),u&&f&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsxs("h5",{className:"modal-title",children:[n.jsx("i",{className:"fas fa-file-alt me-2"}),"Goods Transfer Details - ",f.docnumber]}),n.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>h(!1)})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h6",{className:"mb-0",children:"Document Information"})}),n.jsx("div",{className:"card-body",children:n.jsx("table",{className:"table table-sm",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("th",{width:"40%",children:"Document No:"}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:f.docnumber})})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Category:"}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:f.category})})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Description:"}),n.jsx("td",{children:f.catdesc})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Location:"}),n.jsx("td",{children:f.location})]})]})})})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h6",{className:"mb-0",children:"Dates & Reference"})}),n.jsx("div",{className:"card-body",children:n.jsx("table",{className:"table table-sm",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("th",{width:"40%",children:"Document Date:"}),n.jsx("td",{children:O(f.docDate)})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Posting Date:"}),n.jsx("td",{children:O(f.postDate)})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Reference:"}),n.jsx("td",{children:f.reference})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Created Date:"}),n.jsx("td",{children:O(f.date)})]})]})})})]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h6",{className:"mb-0",children:"Items Details"}),n.jsxs("button",{className:"btn btn-sm btn-outline-success",onClick:()=>L(f),children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print"]})]}),n.jsx("div",{className:"card-body",children:f.items&&f.items.length>0?n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-sm table-striped",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Material ID"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Delivery Date"}),n.jsx("th",{children:"Lot No"}),n.jsx("th",{children:"Text"})]})}),n.jsx("tbody",{children:f.items.map((q,K)=>n.jsxs("tr",{children:[n.jsx("td",{children:K+1}),n.jsx("td",{children:n.jsx("code",{children:q.materialId})}),n.jsx("td",{children:q.description}),n.jsx("td",{children:q.quantity}),n.jsx("td",{children:q.baseUnit}),n.jsxs("td",{children:["",q.price]}),n.jsx("td",{children:n.jsxs("strong",{children:["",(parseFloat(q.quantity||0)*parseFloat(q.price||0)).toFixed(2)]})}),n.jsx("td",{children:O(q.deliveryDate)}),n.jsx("td",{children:q.lotNo}),n.jsx("td",{children:q.text})]},K))}),n.jsx("tfoot",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{colSpan:"6",className:"text-end",children:"Grand Total:"}),n.jsxs("th",{children:["",Y(f.items)]}),n.jsx("th",{colSpan:"3"})]})})]})}):n.jsxs("div",{className:"text-center py-3",children:[n.jsx("i",{className:"fas fa-box-open fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted",children:"No items found for this transfer"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>L(f),children:[n.jsx("i",{className:"fas fa-print me-1"}),"Print Document"]}),n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:[n.jsx("i",{className:"fas fa-times me-1"}),"Close"]})]})]})})})]})}const v6e=()=>{const[e,t]=j.useState({contacts:[],loading:!1,totalCount:0,currentPage:1,pageSize:10,searchTerm:"",sortBy:"name",sortOrder:"asc"}),[r,a]=j.useState(!1),[s,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState([]),[u,h]=j.useState(null),[f,p]=j.useState(null),[x,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(!1),k="/api",C=512*1024,D=async(re,ne={})=>{try{const ce=await fetch(`${k}${re}`,{headers:{"Content-Type":"application/json",...ne.headers},...ne});if(!ce.ok)throw new Error(`API call failed: ${ce.statusText}`);return await ce.json()}catch(ce){throw console.error("API Error:",ce),ce}},E=async re=>{const ne=new FormData;ne.append("avatar",re);try{const ce=await fetch(`${k}/contacts/upload/avatar`,{method:"POST",body:ne});if(!ce.ok)throw new Error("Upload failed");return await ce.json()}catch(ce){throw console.error("Upload Error:",ce),ce}};j.useEffect(()=>{A()},[e.currentPage,e.pageSize,e.searchTerm,e.sortBy,e.sortOrder]);const A=async()=>{t(re=>({...re,loading:!0}));try{const re={page:e.currentPage,limit:e.pageSize,search:e.searchTerm,sortBy:e.sortBy,sortOrder:e.sortOrder},ne=new URLSearchParams(re).toString(),ce=await D(`/contacts?${ne}`);t(ae=>({...ae,contacts:ce.data.contacts,totalCount:ce.data.totalCount,loading:!1}))}catch(re){console.error("Error fetching contacts:",re),t(ne=>({...ne,loading:!1}))}},I=re=>{const ne=re.target.files[0];if(!ne)return;if(ne.size>C){alert("Image size must be less than 512KB"),re.target.value="";return}if(!ne.type.startsWith("image/")){alert("Please select a valid image file"),re.target.value="";return}g(ne);const ce=new FileReader;ce.onload=ae=>{y(ae.target.result)},ce.readAsDataURL(ne)},L=()=>{g(null),y(null);const re=document.querySelector('input[type="file"]');re&&(re.value="")},P=re=>{t(ne=>({...ne,searchTerm:re,currentPage:1}))},O=re=>{t(ne=>({...ne,sortBy:re,sortOrder:ne.sortBy===re&&ne.sortOrder==="asc"?"desc":"asc"}))},Y=re=>{h(re),y(re.avatar),i(!0)},q=re=>{p(re),l(!0)},K=async()=>{try{await D("/contacts",{method:"DELETE",body:JSON.stringify({ids:[f]})}),A(),l(!1),p(null)}catch(re){console.error("Error deleting contact:",re)}},U=async re=>{try{w(!0);let ne=null;x&&(ne=(await E(x)).data.url);const ce={...re,avatar:ne};await D("/contacts",{method:"POST",body:JSON.stringify(ce)}),A(),a(!1),L()}catch(ne){console.error("Error creating contact:",ne)}finally{w(!1)}},J=async re=>{try{w(!0);let ne=u.avatar;x&&(ne=(await E(x)).data.url);const ce={...re,avatar:ne};await D(`/contacts/${u._id}`,{method:"PUT",body:JSON.stringify(ce)}),A(),i(!1),h(null),L()}catch(ne){console.error("Error updating contact:",ne)}finally{w(!1)}},F=re=>n.jsxs("span",{className:"rating",children:[[1,2,3,4,5].map(ne=>n.jsx("i",{className:`ti ti-star-filled ${ne<=re?"text-warning":""}`},ne)),n.jsxs("span",{className:"ms-1",children:[re,".0"]})]}),X=re=>n.jsx("div",{className:"d-flex gap-1 flex-wrap",children:re.map((ne,ce)=>n.jsx("span",{className:"badge badge-soft-primary",children:ne},ce))}),Q=re=>e.sortBy!==re?n.jsx("i",{className:"ti ti-selector"}):e.sortOrder==="asc"?n.jsx("i",{className:"ti ti-chevron-up"}):n.jsx("i",{className:"ti ti-chevron-down"}),ie=()=>n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Profile Image (Max 512KB)"}),n.jsxs("div",{className:"d-flex align-items-center gap-3",children:[n.jsx("div",{className:"avatar avatar-lg",children:b?n.jsx("img",{src:b,alt:"Preview",className:"rounded-circle",style:{width:"60px",height:"60px",objectFit:"cover"}}):n.jsx("div",{className:"avatar-initial rounded-circle bg-secondary d-flex align-items-center justify-content-center",children:n.jsx("i",{className:"ti ti-user fs-3"})})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:I}),n.jsx("small",{className:"text-muted",children:"JPG, PNG, GIF (Max 512KB)"}),b&&n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger mt-1",onClick:L,children:"Remove Image"})]})]})]}),M=()=>e.loading?n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"",children:n.jsxs("table",{className:"table table-sm",id:"contactslist",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{className:"no-sort"}),n.jsxs("th",{onClick:()=>O("name"),style:{cursor:"pointer"},children:["Name ",Q("name")]}),n.jsxs("th",{onClick:()=>O("phone"),style:{cursor:"pointer"},children:["Phone ",Q("phone")]}),n.jsx("th",{children:"Tags"}),n.jsxs("th",{onClick:()=>O("location"),style:{cursor:"pointer"},children:["Location ",Q("location")]}),n.jsxs("th",{className:"pe-3",onClick:()=>O("rating"),style:{cursor:"pointer"},children:["Rating ",Q("rating")]}),n.jsx("th",{children:"Contact"}),n.jsxs("th",{onClick:()=>O("status"),style:{cursor:"pointer"},children:["Status ",Q("status")]}),n.jsx("th",{className:"text-end no-sort",children:"Action"})]})}),n.jsx("tbody",{children:e.contacts.map(re=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:"avatar avatar-sm rounded-circle",children:re.avatar?n.jsx("img",{src:`${re.avatar}`,className:"flex-shrink-0 rounded-circle",alt:re.name,style:{width:"40px",height:"40px",objectFit:"cover"}}):n.jsx("div",{className:"avatar-initial rounded-circle bg-primary",children:re.name.charAt(0).toUpperCase()})})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("h6",{className:"mb-0",children:re.name}),n.jsx("small",{className:"text-muted",children:re.email})]})}),n.jsx("td",{children:re.phone}),n.jsx("td",{children:X(re.tags)}),n.jsx("td",{children:re.location}),n.jsx("td",{children:F(re.rating)}),n.jsx("td",{children:re.email}),n.jsx("td",{children:n.jsx("span",{className:`badge ${re.status==="active"?"badge-soft-success":"badge-soft-danger"}`,children:re.status})}),n.jsx("td",{className:"text-end",children:n.jsxs("div",{className:"dropdown",children:[n.jsx("button",{className:"btn btn-outline-light btn-sm","data-bs-toggle":"dropdown",children:n.jsx("i",{className:"ti ti-dots-vertical"})}),n.jsxs("div",{className:"dropdown-menu",children:[n.jsxs("a",{className:"dropdown-item",href:"javascript:void(0);",onClick:()=>Y(re),children:[n.jsx("i",{className:"ti ti-edit me-1"}),"Edit"]}),n.jsxs("a",{className:"dropdown-item text-danger",href:"javascript:void(0);",onClick:()=>q(re._id),children:[n.jsx("i",{className:"ti ti-trash me-1"}),"Delete"]})]})]})})]},re._id))})]})}),V=()=>r?n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",onClick:re=>re.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Add Contact"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{a(!1),L()}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:re=>{re.preventDefault();const ne=new FormData(re.target),ce={name:ne.get("name"),phone:ne.get("phone"),email:ne.get("email"),location:ne.get("location"),rating:parseInt(ne.get("rating"))||3,status:ne.get("status")||"active",tags:ne.get("tags")?ne.get("tags").split(",").map(ae=>ae.trim()):[]};U(ce)},children:[ie(),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Name"}),n.jsx("input",{type:"text",name:"name",className:"form-control",required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",className:"form-control",required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",className:"form-control",required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsx("input",{type:"text",name:"location",className:"form-control",required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Rating"}),n.jsx("select",{name:"rating",className:"form-control",children:[1,2,3,4,5].map(re=>n.jsxs("option",{value:re,selected:re===3,children:[re," Star"]},re))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{name:"status",className:"form-control",children:[n.jsx("option",{value:"active",selected:!0,children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Tags"}),n.jsx("input",{type:"text",name:"tags",className:"form-control",placeholder:"VIP, Client"})]})})]}),n.jsxs("div",{className:"text-end",children:[n.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{a(!1),L()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Adding..."]}):"Add Contact"})]})]})})]})})}):null,W=()=>!s||!u?null:n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",onClick:re=>re.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Edit Contact"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),h(null),L()}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:re=>{re.preventDefault();const ne=new FormData(re.target),ce={name:ne.get("name"),phone:ne.get("phone"),email:ne.get("email"),location:ne.get("location"),rating:parseInt(ne.get("rating"))||3,status:ne.get("status")||"active",tags:ne.get("tags")?ne.get("tags").split(",").map(ae=>ae.trim()):[]};J(ce)},children:[ie(),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Name"}),n.jsx("input",{type:"text",name:"name",className:"form-control",defaultValue:u.name,required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",className:"form-control",defaultValue:u.phone,required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",className:"form-control",defaultValue:u.email,required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsx("input",{type:"text",name:"location",className:"form-control",defaultValue:u.location,required:!0})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Rating"}),n.jsx("select",{name:"rating",className:"form-control",defaultValue:u.rating,children:[1,2,3,4,5].map(re=>n.jsxs("option",{value:re,children:[re," Star"]},re))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{name:"status",className:"form-control",defaultValue:u.status,children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Tags"}),n.jsx("input",{type:"text",name:"tags",className:"form-control",defaultValue:u.tags.join(", "),placeholder:"VIP, Client"})]})})]}),n.jsxs("div",{className:"text-end",children:[n.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),h(null),L()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):"Update Contact"})]})]})})]})})}),ee=()=>{if(!o)return null;const re=e.contacts.find(ne=>ne._id===f);return n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",onClick:ne=>ne.stopPropagation(),children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Confirm Delete"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{l(!1),p(null)}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mb-3",children:n.jsx("i",{className:"ti ti-alert-triangle text-warning",style:{fontSize:"48px"}})}),n.jsx("h6",{children:"Are you sure you want to delete this contact?"}),re&&n.jsxs("p",{className:"text-muted",children:[n.jsx("strong",{children:re.name}),n.jsx("br",{}),re.email]}),n.jsx("p",{className:"text-danger small",children:"This action cannot be undone."})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),p(null)},children:"Cancel"}),n.jsx("button",{type:"button",className:"btn btn-danger",onClick:K,children:"Delete Contact"})]})]})})})};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"content pb-0",children:[n.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:n.jsxs("div",{children:[n.jsx("h4",{className:"mb-1",children:"Contacts"}),n.jsx("nav",{"aria-label":"breadcrumb",children:n.jsxs("ol",{className:"breadcrumb mb-0 p-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:"Home"})}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contacts"})]})})]})}),n.jsxs("div",{className:"card border-0 rounded-0",children:[n.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[n.jsxs("div",{className:"input-icon input-icon-start position-relative",children:[n.jsx("span",{className:"input-icon-addon text-dark",children:n.jsx("i",{className:"ti ti-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:e.searchTerm,onChange:re=>P(re.target.value)})]}),n.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),children:[n.jsx("i",{className:"ti ti-square-rounded-plus-filled me-1"}),"Add Contacts"]})]}),n.jsxs("div",{className:"card-body",children:[M(),n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"datatable-length",children:["Showing ",(e.currentPage-1)*e.pageSize+1," to ",Math.min(e.currentPage*e.pageSize,e.totalCount)," of ",e.totalCount," entries"]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"datatable-paginate text-end",children:[n.jsx("button",{className:"btn btn-outline-primary btn-sm me-2",disabled:e.currentPage===1,onClick:()=>t(re=>({...re,currentPage:re.currentPage-1})),children:"Previous"}),n.jsxs("span",{className:"me-2",children:["Page ",e.currentPage]}),n.jsx("button",{className:"btn btn-outline-primary btn-sm",disabled:e.currentPage*e.pageSize>=e.totalCount,onClick:()=>t(re=>({...re,currentPage:re.currentPage+1})),children:"Next"})]})})]})]})]}),V(),W(),ee()]})})},g6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState(!1),[x,g]=j.useState(""),b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),[S,w]=j.useState({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""}),k=async()=>{try{p(!0);const F=await fetch(`/api/leads?companyId=${b}&financialYear=${y}`);if(!F.ok)throw new Error("Failed to fetch leads");const X=await F.json();console.log("Fetched leads:",X),t(X||[])}catch(F){g(F.message)}finally{p(!1)}},C=async()=>{try{const F=await fetch(`/api/campaigns?companyId=${b}&financialYear=${y}`);if(!F.ok)throw new Error("Failed to fetch campaigns");const X=await F.json();a(X||[])}catch(F){console.error("Failed to fetch campaigns:",F)}},D=async F=>{try{const X=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...F,companyId:b,financialYear:y})});if(!X.ok){const ie=await X.json();throw new Error(ie.message||"Failed to create lead")}const Q=await X.json();t([...e,Q]),I(),i(!1)}catch(X){g(X.message)}},E=async(F,X)=>{try{const Q=await fetch(`/api/leads/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...X,companyId:b,financialYear:y})});if(!Q.ok){const M=await Q.json();throw new Error(M.message||"Failed to update lead")}const ie=await Q.json();t(e.map(M=>M._id===F?ie:M)),I(),i(!1),l(null)}catch(Q){g(Q.message)}},A=async F=>{if(window.confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${F}`,{method:"DELETE"})).ok)throw new Error("Failed to delete lead");t(e.filter(Q=>Q._id!==F))}catch(X){g(X.message)}},I=()=>{w({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""})},L=async F=>{F.preventDefault(),o?await E(o._id,S):await D(S)},P=F=>{w({companyName:F.companyName,contactPersonName:F.contactPersonName,email:F.email,phoneNumber:F.phoneNumber,leadSource:F.leadSource,leadStatus:F.leadStatus,industry:F.industry,companySize:F.companySize,annualRevenue:F.annualRevenue||"",leadScore:F.leadScore,assignedSalesRep:F.assignedSalesRep||"",notes:F.notes||"",expectedDealValue:F.expectedDealValue||"",expectedCloseDate:F.expectedCloseDate?F.expectedCloseDate.split("T")[0]:"",campaignId:F.campaignId?._id||F.campaignId||""}),l(F),i(!0)},O=F=>{const{name:X,value:Q}=F.target;w(ie=>({...ie,[X]:Q}))},Y=Array.isArray(e)?e.filter(F=>{const X=F.companyName?.toLowerCase().includes(c.toLowerCase())||F.contactPersonName?.toLowerCase().includes(c.toLowerCase())||F.email?.toLowerCase().includes(c.toLowerCase()),Q=u===""||F.leadStatus===u;return X&&Q}):[];j.useEffect(()=>{k(),C()},[]);const q=["Website","Social Media","Referral","Cold Call","Advertisement","Email Campaign","Google Ads","Event","Other"],K=["New","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],U=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Other"],J=["1-10","11-50","51-200","201-1000","1000+"];return n.jsxs("div",{className:"container-fluid py-4",children:[x&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:x}),s&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:o?"Edit Lead":"Add New Lead"}),n.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>{i(!1),l(null),I()},children:""})]}),n.jsxs("form",{onSubmit:L,className:"modal-body",children:[n.jsxs("div",{className:"row g-2",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Company Name*"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"companyName",className:"form-control form-control-sm",value:S.companyName,onChange:O,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Contact Person*"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"contactPersonName",className:"form-control form-control-sm",value:S.contactPersonName,onChange:O,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Email*"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("input",{type:"email",name:"email",className:"form-control form-control-sm",value:S.email,onChange:O,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Phone Number*"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"tel",name:"phoneNumber",className:"form-control form-control-sm",value:S.phoneNumber,onChange:O,required:!0})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Campaign"})}),n.jsx("div",{className:"col-xl-6",children:n.jsxs("select",{name:"campaignId",className:"form-control form-control-sm",value:S.campaignId,onChange:O,children:[n.jsx("option",{value:"",children:"Select Campaign"}),r.map(F=>n.jsx("option",{value:F._id,children:F.campaignName},F._id))]})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Lead Source"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"leadSource",className:"form-control form-control-sm",value:S.leadSource,onChange:O,children:q.map(F=>n.jsx("option",{value:F,children:F},F))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Lead Status"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"leadStatus",className:"form-control form-control-sm",value:S.leadStatus,onChange:O,children:K.map(F=>n.jsx("option",{value:F,children:F},F))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Industry"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"industry",className:"form-control form-control-sm",value:S.industry,onChange:O,children:U.map(F=>n.jsx("option",{value:F,children:F},F))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Company Size"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("select",{name:"companySize",className:"form-control form-control-sm",value:S.companySize,onChange:O,children:J.map(F=>n.jsx("option",{value:F,children:F},F))})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Annual Revenue"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",name:"annualRevenue",className:"form-control form-control-sm",value:S.annualRevenue,onChange:O,min:"0"})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Lead Score (1-100)"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",name:"leadScore",className:"form-control form-control-sm",value:S.leadScore,onChange:O,min:"1",max:"100"})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Assigned Sales Rep"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"text",name:"assignedSalesRep",className:"form-control form-control-sm",value:S.assignedSalesRep,onChange:O})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Expected Deal Value"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"number",name:"expectedDealValue",className:"form-control form-control-sm",value:S.expectedDealValue,onChange:O,min:"0"})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-6",children:n.jsx("label",{className:"form-label",children:"Expected Close Date"})}),n.jsx("div",{className:"col-xl-6",children:n.jsx("input",{type:"date",name:"expectedCloseDate",className:"form-control form-control-sm",value:S.expectedCloseDate,onChange:O})})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsx("div",{className:"col-xl-3",children:n.jsx("label",{className:"form-label",children:"Notes"})}),n.jsx("div",{className:"col-xl-9",children:n.jsx("textarea",{name:"notes",className:"form-control form-control-sm",value:S.notes,onChange:O,rows:"3"})})]})})]}),n.jsx("div",{className:"row mt-3",children:n.jsxs("div",{className:"col-auto",children:[n.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),l(null),I()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Lead":"Create Lead"})]})})]})]})})}),n.jsxs("div",{className:"card mt-3",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-user-plus me-2"}),"Leads Management"]}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:F=>d(F.target.value),className:"form-control form-control-sm",style:{width:"200px"}}),n.jsxs("select",{value:u,onChange:F=>h(F.target.value),className:"form-select form-select-sm",style:{width:"150px"},children:[n.jsx("option",{value:"",children:"All Statuses"}),K.map(F=>n.jsx("option",{value:F,children:F},F))]}),n.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{I(),l(null),i(!0)},children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add New Lead"]})]})]}),n.jsx("div",{className:"card-body",children:f?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Company"}),n.jsx("th",{children:"Contact Person"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Campaign"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Source"}),n.jsx("th",{children:"Industry"}),n.jsx("th",{children:"Score"}),n.jsx("th",{children:"Expected Value"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Y.length>0?Y.map(F=>n.jsxs("tr",{children:[n.jsx("td",{children:F.companyName}),n.jsx("td",{children:F.contactPersonName}),n.jsx("td",{children:n.jsx("a",{href:`mailto:${F.email}`,className:"text-decoration-none",children:F.email})}),n.jsx("td",{children:F.phoneNumber&&n.jsx("a",{href:`tel:${F.phoneNumber}`,className:"text-decoration-none",children:F.phoneNumber})}),n.jsx("td",{children:F.campaignId?.campaignName&&n.jsx("span",{className:"badge bg-info",children:F.campaignId.campaignName})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${b6e(F.leadStatus)}`,children:F.leadStatus})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-secondary",children:F.leadSource})}),n.jsx("td",{children:F.industry}),n.jsx("td",{children:n.jsxs("span",{className:`badge bg-${y6e(F.leadScore)}`,children:[F.leadScore,"/100"]})}),n.jsx("td",{children:F.expectedDealValue?`$${Number(F.expectedDealValue).toLocaleString()}`:"N/A"}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-1",onClick:()=>P(F),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>A(F._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},F._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"11",className:"text-center",children:e.length===0?"No leads available":"No leads match your search criteria"})})})]})})})]})]})},b6e=e=>{switch(e){case"New":return"primary";case"Contacted":return"info";case"Qualified":return"success";case"Proposal":return"warning";case"Negotiation":return"secondary";case"Closed Won":return"success";case"Closed Lost":return"danger";default:return"secondary"}},y6e=e=>e>=80?"success":e>=60?"warning":e>=40?"info":"secondary",wm="/api";function j6e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(null),[u,h]=j.useState([]),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState(!1),[k,C]=j.useState(""),[D,E]=j.useState("basic"),[A,I]=j.useState({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),L=se=>{const Ne=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposal - ${se.proposalNumber}</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .header h2 {
                        margin: 5px 0;
                        color: #34495e;
                        font-size: 20px;
                    }
                    .section {
                        margin-bottom: 25px;
                    }
                    .section h3 {
                        color: #2c3e50;
                        border-bottom: 2px solid #bdc3c7;
                        padding-bottom: 10px;
                        margin-bottom: 15px;
                        font-size: 18px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 20px;
                    }
                    .info-item {
                        margin-bottom: 10px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-left: 4px solid #3498db;
                        margin: 15px 0;
                    }
                    .value-highlight {
                        background-color: #e8f6f3;
                        padding: 15px;
                        border-radius: 5px;
                        text-align: center;
                        margin: 20px 0;
                    }
                    .value-highlight .amount {
                        font-size: 24px;
                        font-weight: bold;
                        color: #27ae60;
                    }
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        border-top: 2px solid #bdc3c7;
                        padding-top: 20px;
                        color: #7f8c8d;
                    }
                    .terms-section {
                        background-color: #f8f9fa;
                        padding: 20px;
                        border-radius: 5px;
                        margin: 20px 0;
                    }
                    @media print {
                        body { margin: 0; }
                        .section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>BUSINESS PROPOSAL</h1>
                    <h2>${se.proposalNumber}</h2>
                    <p>Date: ${Ne}</p>
                </div>

                <div class="section">
                    <h3>Client Information</h3>
                    <div class="info-grid">
                        <div>
                            <div class="info-item"><strong>Company:</strong> ${se.leadId?.companyName||"N/A"}</div>
                            <div class="info-item"><strong>Contact Person:</strong> ${se.leadId?.contactPersonName||"N/A"}</div>
                        </div>
                        <div>
                            <div class="info-item"><strong>Email:</strong> ${se.leadId?.email||"N/A"}</div>
                            <div class="info-item"><strong>Phone:</strong> ${se.leadId?.phoneNumber||"N/A"}</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Proposal Overview</h3>
                    <div class="info-item"><strong>Title:</strong> ${se.title}</div>
                    <div class="description">
                        <strong>Description:</strong><br>
                        ${se.description}
                    </div>
                    
                    <div class="value-highlight">
                        <div class="amount">${se.currency} ${se.proposalValue?.toLocaleString()}</div>
                        <div>Total Proposal Value</div>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item"><strong>Priority:</strong> ${se.priority}</div>
                        <div class="info-item"><strong>Validity:</strong> ${se.validityPeriod} days</div>
                    </div>
                </div>

                ${se.businessObjective?`
                    <div class="section">
                        <h3>Business Objective</h3>
                        <p>${se.businessObjective}</p>
                    </div>
                `:""}

                ${se.proposedSolution?`
                    <div class="section">
                        <h3>Proposed Solution</h3>
                        <p>${se.proposedSolution}</p>
                    </div>
                `:""}

                ${se.timeline||se.projectDuration?`
                    <div class="section">
                        <h3>Project Timeline</h3>
                        ${se.timeline?`<p>${se.timeline}</p>`:""}
                        ${se.projectDuration?`<div class="info-item"><strong>Duration:</strong> ${se.projectDuration} days</div>`:""}
                    </div>
                `:""}

                ${se.teamComposition?`
                    <div class="section">
                        <h3>Team Composition</h3>
                        <p>${se.teamComposition}</p>
                    </div>
                `:""}

                ${se.technicalRequirements?`
                    <div class="section">
                        <h3>Technical Requirements</h3>
                        <p>${se.technicalRequirements}</p>
                    </div>
                `:""}

                ${se.proposedTechnology?`
                    <div class="section">
                        <h3>Proposed Technology</h3>
                        <p>${se.proposedTechnology}</p>
                    </div>
                `:""}

                ${se.paymentTerms||se.deliveryTerms||se.warrantyTerms?`
                    <div class="terms-section">
                        <h3>Commercial Terms</h3>
                        ${se.paymentTerms?`
                            <div class="info-item">
                                <strong>Payment Terms:</strong><br>
                                ${se.paymentTerms}
                            </div>
                        `:""}
                        ${se.deliveryTerms?`
                            <div class="info-item">
                                <strong>Delivery Terms:</strong><br>
                                ${se.deliveryTerms}
                            </div>
                        `:""}
                        ${se.warrantyTerms?`
                            <div class="info-item">
                                <strong>Warranty Terms:</strong><br>
                                ${se.warrantyTerms}
                            </div>
                        `:""}
                    </div>
                `:""}

                ${se.riskAssessment?`
                    <div class="section">
                        <h3>Risk Assessment</h3>
                        <p>${se.riskAssessment}</p>
                    </div>
                `:""}

                ${se.companyCredentials?`
                    <div class="section">
                        <h3>Company Credentials</h3>
                        <p>${se.companyCredentials}</p>
                    </div>
                `:""}

                <div class="footer">
                    <p><strong>Valid until:</strong> ${se.expiryDate?new Date(se.expiryDate).toLocaleDateString():`${se.validityPeriod} days from submission`}</p>
                    <br>
                    <p>Thank you for considering our proposal.</p>
                    <p><strong>Prepared by:</strong> ${se.createdBy||""}</p>
                </div>
            </body>
            </html>
        `},P=se=>{const Ne=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ue=se.map(oe=>`
            <div class="proposal-item">
                <h3>${oe.proposalNumber} - ${oe.title}</h3>
                <div class="info-grid">
                    <div>
                        <div class="info-item"><strong>Company:</strong> ${oe.leadId?.companyName||"N/A"}</div>
                        <div class="info-item"><strong>Contact:</strong> ${oe.leadId?.contactPersonName||"N/A"}</div>
                        <div class="info-item"><strong>Value:</strong> ${oe.currency} ${oe.proposalValue?.toLocaleString()}</div>
                    </div>
                    <div>
                        <div class="info-item"><strong>Status:</strong> ${oe.status}</div>
                        <div class="info-item"><strong>Priority:</strong> ${oe.priority}</div>
                        <div class="info-item"><strong>Created:</strong> ${new Date(oe.createdAt).toLocaleDateString()}</div>
                    </div>
                </div>
                <div class="description">
                    <strong>Description:</strong> ${oe.description}
                </div>
            </div>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposals Summary Report</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .proposal-item {
                        margin-bottom: 30px;
                        padding: 20px;
                        border: 1px solid #bdc3c7;
                        border-radius: 5px;
                        page-break-inside: avoid;
                    }
                    .proposal-item h3 {
                        color: #2c3e50;
                        margin-top: 0;
                        border-bottom: 1px solid #bdc3c7;
                        padding-bottom: 10px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 15px;
                    }
                    .info-item {
                        margin-bottom: 8px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 10px;
                        border-left: 4px solid #3498db;
                        margin-top: 10px;
                    }
                    @media print {
                        body { margin: 0; }
                        .proposal-item { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>PROPOSALS SUMMARY REPORT</h1>
                    <p>Generated on: ${Ne}</p>
                    <p>Total Proposals: ${se.length}</p>
                </div>
                ${ue}
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #bdc3c7; padding-top: 20px;">
                    <p><strong>Report generated by:</strong> sreevatsa-B-R</p>
                </div>
            </body>
            </html>
        `},O=async se=>{try{const Ne=await fetch(`${wm}/proposals/${se._id}`);if(!Ne.ok)throw new Error("Failed to fetch proposal details");const ue=await Ne.json(),oe=L(ue),ye=window.open("","_blank");ye.document.write(oe),ye.document.close(),ye.onload=()=>{ye.focus(),ye.print(),ye.close()}}catch(Ne){C("Failed to print proposal: "+Ne.message)}},Y=()=>{if(u.length===0){alert("Please select proposals to print");return}const se=e.filter(oe=>u.includes(oe._id)),Ne=P(se),ue=window.open("","_blank");ue.document.write(Ne),ue.document.close(),ue.onload=()=>{ue.focus(),ue.print(),ue.close()}},q=se=>{h(Ne=>Ne.includes(se)?Ne.filter(ue=>ue!==se):[...Ne,se])},K=()=>{u.length===ne.length?h([]):h(ne.map(se=>se._id))},U=async()=>{try{w(!0);const se=await fetch(`${wm}/proposals`);if(!se.ok)throw new Error("Failed to fetch proposals");const Ne=await se.json();t(Ne.proposals||Ne)}catch(se){C(se.message)}finally{w(!1)}},J=async()=>{try{const se=await fetch(`${wm}/leads?status=Qualified`);if(!se.ok)throw new Error("Failed to fetch leads");const Ne=await se.json();a(Ne.leads||Ne)}catch(se){console.error("Error fetching leads:",se)}},F=async se=>{try{console.log("Sending proposal data:",se);const Ne=await fetch(`${wm}/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(console.log("Response status:",Ne.status),!Ne.ok){const oe=await Ne.json();throw console.error("Error response:",oe),new Error(oe.message||"Failed to create proposal")}const ue=await Ne.json();console.log("Created proposal:",ue),t([...e,ue]),M(),i(!1)}catch(Ne){console.error("Create proposal error:",Ne),C(Ne.message)}},X=async(se,Ne)=>{try{const ue=await fetch(`${wm}/proposals/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});if(!ue.ok){const ye=await ue.json();throw new Error(ye.message||"Failed to update proposal")}const oe=await ue.json();t(e.map(ye=>ye._id===se?oe:ye)),M(),i(!1),l(null)}catch(ue){C(ue.message)}},Q=async se=>{try{const Ne=await fetch(`${wm}/proposals/${se}/submit`,{method:"PUT"});if(!Ne.ok){const oe=await Ne.json();throw new Error(oe.message||"Failed to submit proposal")}const ue=await Ne.json();t(e.map(oe=>oe._id===se?ue:oe))}catch(Ne){C(Ne.message)}},ie=async se=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{if(!(await fetch(`${wm}/proposals/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete proposal");t(e.filter(ue=>ue._id!==se))}catch(Ne){C(Ne.message)}},M=()=>{I({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),E("basic")},V=async se=>{se.preventDefault(),o?await X(o._id,A):await F(A)},W=se=>{I({leadId:se.leadId?._id||"",title:se.title||"",description:se.description||"",proposalValue:se.proposalValue||"",currency:se.currency||"USD",validityPeriod:se.validityPeriod||30,status:se.status||"Draft",priority:se.priority||"Medium",businessObjective:se.businessObjective||"",proposedSolution:se.proposedSolution||"",timeline:se.timeline||"",paymentTerms:se.paymentTerms||"",deliveryTerms:se.deliveryTerms||"",warrantyTerms:se.warrantyTerms||"",projectDuration:se.projectDuration||"",teamComposition:se.teamComposition||"",riskAssessment:se.riskAssessment||"",companyCredentials:se.companyCredentials||"",technicalRequirements:se.technicalRequirements||"",proposedTechnology:se.proposedTechnology||"",internalNotes:se.internalNotes||""}),l(se),i(!0)},ee=async se=>{try{const Ne=await fetch(`${wm}/proposals/${se._id}`);if(!Ne.ok)throw new Error("Failed to fetch proposal details");const ue=await Ne.json();d(ue)}catch(Ne){C(Ne.message)}},re=se=>{const{name:Ne,value:ue}=se.target;I(oe=>({...oe,[Ne]:ue}))},ne=Array.isArray(e)?e.filter(se=>{const Ne=se.proposalNumber?.toLowerCase().includes(f.toLowerCase())||se.title?.toLowerCase().includes(f.toLowerCase())||se.leadId?.companyName?.toLowerCase().includes(f.toLowerCase()),ue=x===""||se.status===x,oe=b===""||se.priority===b;return Ne&&ue&&oe}):[];j.useEffect(()=>{U(),J()},[]);const ce=["Draft","Submitted","Under Review","Approved","Rejected","Expired","Withdrawn"],ae=["Low","Medium","High","Critical"],Z=["USD","EUR","INR","GBP","CAD","AUD"],de=se=>{switch(se){case"Draft":return"secondary";case"Submitted":return"primary";case"Under Review":return"warning";case"Approved":return"success";case"Rejected":return"danger";case"Expired":return"dark";case"Withdrawn":return"secondary";default:return"secondary"}},z=se=>{switch(se){case"Low":return"success";case"Medium":return"warning";case"High":return"danger";case"Critical":return"dark";default:return"secondary"}};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Proposals"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Proposals"})]})})]}),n.jsx("div",{children:n.jsxs("div",{className:"d-flex gap-2",children:[u.length>0&&n.jsxs("button",{className:"btn btn-info",onClick:Y,children:[n.jsx("i",{className:"fas fa-print"})," Print Selected (",u.length,")"]}),n.jsx("button",{className:"btn btn-primary",onClick:()=>{M(),l(null),i(!0)},children:"Create New Proposal"})]})})]}),n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",placeholder:"Search proposals...",value:f,onChange:se=>p(se.target.value),className:"form-control"})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{value:x,onChange:se=>g(se.target.value),className:"form-select",children:[n.jsx("option",{value:"",children:"All Statuses"}),ce.map(se=>n.jsx("option",{value:se,children:se},se))]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{value:b,onChange:se=>y(se.target.value),className:"form-select",children:[n.jsx("option",{value:"",children:"All Priorities"}),ae.map(se=>n.jsx("option",{value:se,children:se},se))]})}),n.jsx("div",{className:"col-md-2",children:n.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{p(""),g(""),y("")},children:"Clear Filters"})})]})})}),s&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{className:"modal-title",children:o?"Edit Proposal":"Create New Proposal"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),l(null),M()}})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("ul",{className:"nav nav-tabs mb-3",children:[n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${D==="basic"?"active":""}`,onClick:()=>E("basic"),children:"Basic Info"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${D==="business"?"active":""}`,onClick:()=>E("business"),children:"Business Details"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${D==="technical"?"active":""}`,onClick:()=>E("technical"),children:"Technical"})}),n.jsx("li",{className:"nav-item",children:n.jsx("button",{className:`nav-link ${D==="commercial"?"active":""}`,onClick:()=>E("commercial"),children:"Commercial"})})]}),n.jsxs("form",{onSubmit:V,children:[D==="basic"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Select Lead *"}),n.jsxs("select",{name:"leadId",className:"form-select",value:A.leadId,onChange:re,required:!0,disabled:o,children:[n.jsx("option",{value:"",children:"Select a qualified lead..."}),r.map(se=>n.jsxs("option",{value:se._id,children:[se.companyName," - ",se.contactPersonName]},se._id))]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Proposal Title *"}),n.jsx("input",{type:"text",name:"title",className:"form-control",value:A.title,onChange:re,required:!0,placeholder:"Enter proposal title"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Description *"}),n.jsx("textarea",{name:"description",className:"form-control",value:A.description,onChange:re,required:!0,rows:"4",placeholder:"Enter proposal description"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Proposal Value *"}),n.jsx("input",{type:"number",name:"proposalValue",className:"form-control",value:A.proposalValue,onChange:re,required:!0,min:"0",step:"0.01"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Currency"}),n.jsx("select",{name:"currency",className:"form-select",value:A.currency,onChange:re,children:Z.map(se=>n.jsx("option",{value:se,children:se},se))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Validity Period (Days)"}),n.jsx("input",{type:"number",name:"validityPeriod",className:"form-control",value:A.validityPeriod,onChange:re,min:"1",max:"365"})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{name:"status",className:"form-select",value:A.status,onChange:re,children:ce.map(se=>n.jsx("option",{value:se,children:se},se))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{name:"priority",className:"form-select",value:A.priority,onChange:re,children:ae.map(se=>n.jsx("option",{value:se,children:se},se))})]}),n.jsxs("div",{className:"col-md-4",children:[n.jsx("label",{className:"form-label",children:"Created By"}),n.jsx("input",{type:"text",name:"createdBy",className:"form-control",value:A.createdBy,onChange:re})]})]}),D==="business"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Business Objective"}),n.jsx("textarea",{name:"businessObjective",className:"form-control",value:A.businessObjective,onChange:re,rows:"3",placeholder:"Describe the business objective"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Proposed Solution"}),n.jsx("textarea",{name:"proposedSolution",className:"form-control",value:A.proposedSolution,onChange:re,rows:"4",placeholder:"Describe the proposed solution"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Project Timeline"}),n.jsx("textarea",{name:"timeline",className:"form-control",value:A.timeline,onChange:re,rows:"3",placeholder:"Project timeline and milestones"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Project Duration (Days)"}),n.jsx("input",{type:"number",name:"projectDuration",className:"form-control",value:A.projectDuration,onChange:re,min:"1"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Team Composition"}),n.jsx("textarea",{name:"teamComposition",className:"form-control",value:A.teamComposition,onChange:re,rows:"3",placeholder:"Describe the project team composition"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Risk Assessment"}),n.jsx("textarea",{name:"riskAssessment",className:"form-control",value:A.riskAssessment,onChange:re,rows:"3",placeholder:"Risk assessment and mitigation strategies"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Company Credentials"}),n.jsx("textarea",{name:"companyCredentials",className:"form-control",value:A.companyCredentials,onChange:re,rows:"4",placeholder:"Company credentials and past experience"})]})]}),D==="technical"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Technical Requirements"}),n.jsx("textarea",{name:"technicalRequirements",className:"form-control",value:A.technicalRequirements,onChange:re,rows:"5",placeholder:"Detailed technical requirements"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Proposed Technology"}),n.jsx("textarea",{name:"proposedTechnology",className:"form-control",value:A.proposedTechnology,onChange:re,rows:"4",placeholder:"Technology stack and tools to be used"})]})]}),D==="commercial"&&n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Payment Terms"}),n.jsx("textarea",{name:"paymentTerms",className:"form-control",value:A.paymentTerms,onChange:re,rows:"3",placeholder:"Payment terms and conditions"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Delivery Terms"}),n.jsx("textarea",{name:"deliveryTerms",className:"form-control",value:A.deliveryTerms,onChange:re,rows:"3",placeholder:"Delivery terms and conditions"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Warranty Terms"}),n.jsx("textarea",{name:"warrantyTerms",className:"form-control",value:A.warrantyTerms,onChange:re,rows:"3",placeholder:"Warranty and support terms"})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("label",{className:"form-label",children:"Internal Notes"}),n.jsx("textarea",{name:"internalNotes",className:"form-control",value:A.internalNotes,onChange:re,rows:"3",placeholder:"Internal notes (not visible to client)"})]})]}),n.jsx("div",{className:"row mt-4",children:n.jsxs("div",{className:"col-12 d-flex justify-content-end gap-2",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),l(null),M()},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Proposal":"Create Proposal"})]})})]})]})]})})}),c&&n.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h2",{className:"modal-title",children:["Proposal Details - ",c.proposalNumber]}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(null)})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Company:"})," ",c.leadId?.companyName]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Contact:"})," ",c.leadId?.contactPersonName]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Title:"})," ",c.title]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Value:"})," ",c.currency," ",c.proposalValue?.toLocaleString()]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Status:"}),n.jsx("span",{className:`badge bg-${de(c.status)} ms-2`,children:c.status})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("strong",{children:"Priority:"}),n.jsx("span",{className:`badge bg-${z(c.priority)} ms-2`,children:c.priority})]}),n.jsxs("div",{className:"col-12",children:[n.jsx("strong",{children:"Description:"}),n.jsx("p",{children:c.description})]}),c.businessObjective&&n.jsxs("div",{className:"col-12",children:[n.jsx("strong",{children:"Business Objective:"}),n.jsx("p",{children:c.businessObjective})]}),c.proposedSolution&&n.jsxs("div",{className:"col-12",children:[n.jsx("strong",{children:"Proposed Solution:"}),n.jsx("p",{children:c.proposedSolution})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(null),children:"Close"})})]})})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Proposals"})}),n.jsx("div",{className:"card-body p-0",children:n.jsx("div",{children:n.jsxs("table",{className:"table table-sm table-bordered mb-2 mt-2",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx("input",{type:"checkbox",checked:u.length===ne.length&&ne.length>0,onChange:K})}),n.jsx("th",{children:"Proposal #"}),n.jsx("th",{children:"Company"}),n.jsx("th",{children:"Title"}),n.jsx("th",{children:"Value"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:ne.length>0?ne.map(se=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:u.includes(se._id),onChange:()=>q(se._id)})}),n.jsx("td",{children:n.jsx("strong",{children:se.proposalNumber})}),n.jsx("td",{children:se.leadId?.companyName||"N/A"}),n.jsx("td",{children:se.title}),n.jsxs("td",{children:[se.currency," ",se.proposalValue?.toLocaleString()]}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${de(se.status)}`,children:se.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${z(se.priority)}`,children:se.priority})}),n.jsx("td",{children:new Date(se.createdAt).toLocaleDateString()}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group btn-group-sm",children:[n.jsx("button",{className:"btn btn-outline-primary",onClick:()=>ee(se),title:"View Details",children:n.jsx("i",{className:"fas fa-eye"})}),n.jsx("button",{className:"btn btn-outline-info",onClick:()=>O(se),title:"Print",children:n.jsx("i",{className:"fas fa-print"})}),n.jsx("button",{className:"btn btn-outline-warning",onClick:()=>W(se),title:"Edit",children:n.jsx("i",{className:"fas fa-edit"})}),se.status==="Draft"&&n.jsx("button",{className:"btn btn-outline-success",onClick:()=>Q(se._id),title:"Submit",children:n.jsx("i",{className:"fas fa-paper-plane"})}),n.jsx("button",{className:"btn btn-outline-danger",onClick:()=>ie(se._id),title:"Delete",children:n.jsx("i",{className:"fas fa-trash"})})]})})]},se._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center py-4",children:e.length===0?"No proposals available":"No proposals match your search criteria"})})})]})})})]})]})}const N6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({name:"",description:""}),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");j.useEffect(()=>{x()},[]);const x=async()=>{a(!0);try{const k=await(await fetch(`/api/crm/sources?companyId=${f}&financialYear=${p}`)).json();t(k),i("")}catch{i("Failed to load sources")}finally{a(!1)}},g=()=>{d(null),h({name:"",description:""}),l(!0)},b=w=>{d(w),h({name:w.name,description:w.description}),l(!0)},y=async w=>{w.preventDefault();try{const k=c?`/api/crm/sources/${c._id}`:"/api/crm/sources";(await fetch(k,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:f,financialYear:p})})).ok?(await x(),l(!1),i("")):i("Failed to save source")}catch{i("Failed to save source")}},S=async w=>{if(window.confirm("Are you sure you want to delete this source?"))try{(await fetch(`/api/crm/sources/${w}`,{method:"DELETE"})).ok?(await x(),i("")):i("Failed to delete source")}catch{i("Failed to delete source")}};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h4",{className:"card-title mb-0",children:"Sources Management"}),n.jsxs("button",{className:"btn btn-primary",onClick:g,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Source"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(w=>n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:w.name}),n.jsx("td",{children:w.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${w.isActive?"bg-success":"bg-secondary"}`,children:w.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(w.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(w),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(w._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},w._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Source":"Add Source"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Source Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.name,onChange:w=>h({...u,name:w.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:w=>h({...u,description:w.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},w6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({reason:"",category:"",description:""}),f=["Price","Competition","Timeline","Budget","Feature","Service","Other"],p=localStorage.getItem("selectedCompanyId"),x=localStorage.getItem("financialYear");j.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const D=await(await fetch(`/api/crm/lost-reasons?companyId=${p}&financialYear=${x}`)).json();t(D),i("")}catch{i("Failed to load lost reasons")}finally{a(!1)}},b=()=>{d(null),h({reason:"",category:"",description:""}),l(!0)},y=C=>{d(C),h({reason:C.reason,category:C.category,description:C.description}),l(!0)},S=async C=>{C.preventDefault();try{const D=c?`/api/crm/lost-reasons/${c._id}`:"/api/crm/lost-reasons";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:x})})).ok?(await g(),l(!1),i("")):i("Failed to save lost reason")}catch{i("Failed to save lost reason")}},w=async C=>{if(window.confirm("Are you sure you want to delete this lost reason?"))try{(await fetch(`/api/crm/lost-reasons/${C}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete lost reason")}catch{i("Failed to delete lost reason")}},k=C=>({Price:"bg-danger",Competition:"bg-warning",Timeline:"bg-info",Budget:"bg-danger",Feature:"bg-primary",Service:"bg-secondary",Other:"bg-dark"})[C]||"bg-secondary";return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h4",{className:"card-title mb-0",children:"Lost Reasons Management"}),n.jsxs("button",{className:"btn btn-primary",onClick:b,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Lost Reason"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Reason"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(C=>n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:C.reason}),n.jsx("td",{children:n.jsx("span",{className:`badge ${k(C.category)}`,children:C.category})}),n.jsx("td",{children:C.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${C.isActive?"bg-success":"bg-secondary"}`,children:C.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(C.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(C),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(C._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},C._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Lost Reason":"Add Lost Reason"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Lost Reason"}),n.jsx("input",{type:"text",className:"form-control",value:u.reason,onChange:C=>h({...u,reason:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:u.category,onChange:C=>h({...u,category:C.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),f.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:C=>h({...u,description:C.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},S6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({stageName:"",description:"",probability:0,color:"#007bff"}),f=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");j.useEffect(()=>{x()},[]);const x=async()=>{a(!0);try{const C=await(await fetch(`/api/crm/contact-stages?companyId=${f}&financialYear=${p}`)).json();t(C.sort((D,E)=>D.order-E.order)),i("")}catch{i("Failed to load contact stages")}finally{a(!1)}},g=()=>{d(null),h({stageName:"",description:"",probability:0,color:"#007bff"}),l(!0)},b=k=>{d(k),h({stageName:k.stageName,description:k.description,probability:k.probability,color:k.color}),l(!0)},y=async k=>{k.preventDefault();try{const C=c?`/api/crm/contact-stages/${c._id}`:"/api/crm/contact-stages";(await fetch(C,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:f,financialYear:p,order:c?c.order:e.length+1})})).ok?(await x(),l(!1),i("")):i("Failed to save contact stage")}catch{i("Failed to save contact stage")}},S=async k=>{if(window.confirm("Are you sure you want to delete this contact stage?"))try{(await fetch(`/api/crm/contact-stages/${k}`,{method:"DELETE"})).ok?(await x(),i("")):i("Failed to delete contact stage")}catch{i("Failed to delete contact stage")}},w=async(k,C)=>{try{(await fetch(`/api/crm/contact-stages/${k}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:C})})).ok?await x():i("Failed to reorder contact stage")}catch{i("Failed to reorder contact stage")}};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsx("h4",{className:"card-title mb-0",children:"Contact Stages Management"}),n.jsxs("button",{className:"btn btn-primary",onClick:g,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Contact Stage"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order"}),n.jsx("th",{children:"Stage Name"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Probability %"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map((k,C)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("span",{className:"me-2",children:k.order}),n.jsxs("div",{className:"btn-group-vertical btn-group-sm",children:[n.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>w(k._id,"up"),disabled:C===0,children:n.jsx("i",{className:"fas fa-chevron-up"})}),n.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>w(k._id,"down"),disabled:C===e.length-1,children:n.jsx("i",{className:"fas fa-chevron-down"})})]})]})}),n.jsx("td",{children:n.jsx("span",{className:"badge text-white",style:{backgroundColor:k.color},children:k.stageName})}),n.jsx("td",{children:k.description}),n.jsxs("td",{children:[k.probability,"%"]}),n.jsx("td",{children:n.jsx("span",{className:`badge ${k.isActive?"bg-success":"bg-secondary"}`,children:k.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(k.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(k),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(k._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},k._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Contact Stage":"Add Contact Stage"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Stage Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.stageName,onChange:k=>h({...u,stageName:k.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:k=>h({...u,description:k.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Probability (%)"}),n.jsx("input",{type:"number",className:"form-control",min:"0",max:"100",value:u.probability,onChange:k=>h({...u,probability:Number(k.target.value)}),required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Color"}),n.jsx("input",{type:"color",className:"form-control form-control-color",value:u.color,onChange:k=>h({...u,color:k.target.value})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},C6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({industryName:"",category:"",description:""}),f=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Real Estate","Transportation","Energy","Media","Hospitality","Construction","Agriculture","Other"],p=localStorage.getItem("selectedCompanyId"),x=localStorage.getItem("financialYear");j.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const D=await(await fetch(`/api/crm/industries?companyId=${p}&financialYear=${x}`)).json();t(D),i("")}catch{i("Failed to load industries")}finally{a(!1)}},b=()=>{d(null),h({industryName:"",category:"",description:""}),l(!0)},y=C=>{d(C),h({industryName:C.industryName,category:C.category,description:C.description}),l(!0)},S=async C=>{C.preventDefault();try{const D=c?`/api/crm/industries/${c._id}`:"/api/crm/industries";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:x})})).ok?(await g(),l(!1),i("")):i("Failed to save industry")}catch{i("Failed to save industry")}},w=async C=>{if(window.confirm("Are you sure you want to delete this industry?"))try{(await fetch(`/api/crm/industries/${C}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete industry")}catch{i("Failed to delete industry")}},k=C=>({Technology:"bg-primary",Healthcare:"bg-success",Finance:"bg-warning",Manufacturing:"bg-info",Retail:"bg-secondary",Education:"bg-primary","Real Estate":"bg-success",Transportation:"bg-info",Energy:"bg-warning",Media:"bg-secondary",Hospitality:"bg-primary",Construction:"bg-info",Agriculture:"bg-success",Other:"bg-dark"})[C]||"bg-secondary";return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-building me-2"}),"Industry Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:b,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Industry"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Industry Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(C=>n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:C.industryName}),n.jsx("td",{children:n.jsx("span",{className:`badge ${k(C.category)}`,children:C.category})}),n.jsx("td",{children:C.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${C.isActive?"bg-success":"bg-secondary"}`,children:C.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(C.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(C),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(C._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},C._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Industry":"Add Industry"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Industry Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.industryName,onChange:C=>h({...u,industryName:C.target.value}),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:u.category,onChange:C=>h({...u,category:C.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),f.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:C=>h({...u,description:C.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},k6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({callType:"",purpose:"",outcome:"",description:""}),f=["Inbound","Outbound","Missed","Voicemail"],p=["Sales","Support","Follow-up","Demo","Meeting","Consultation","Other"],x=["Successful","No Answer","Busy","Follow-up Required","Completed","Cancelled","Rescheduled"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");j.useEffect(()=>{y()},[]);const y=async()=>{a(!0);try{const L=await(await fetch(`/api/crm/calls?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load calls")}finally{a(!1)}},S=()=>{d(null),h({callType:"",purpose:"",outcome:"",description:""}),l(!0)},w=I=>{d(I),h({callType:I.callType,purpose:I.purpose,outcome:I.outcome,description:I.description}),l(!0)},k=async I=>{I.preventDefault();try{const L=c?`/api/crm/calls/${c._id}`:"/api/crm/calls";(await fetch(L,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:g,financialYear:b})})).ok?(await y(),l(!1),i("")):i("Failed to save call")}catch{i("Failed to save call")}},C=async I=>{if(window.confirm("Are you sure you want to delete this call setting?"))try{(await fetch(`/api/crm/calls/${I}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete call")}catch{i("Failed to delete call")}},D=I=>{switch(I){case"Inbound":return"fas fa-phone-alt text-success";case"Outbound":return"fas fa-phone text-primary";case"Missed":return"fas fa-phone-slash text-danger";case"Voicemail":return"fas fa-voicemail text-warning";default:return"fas fa-phone"}},E=I=>{switch(I){case"Successful":case"Completed":return"bg-success";case"Follow-up Required":case"Rescheduled":return"bg-warning";case"No Answer":case"Busy":case"Cancelled":return"bg-danger";default:return"bg-secondary"}},A=I=>{switch(I){case"Sales":return"bg-success";case"Support":return"bg-info";case"Follow-up":return"bg-warning";case"Demo":return"bg-primary";case"Meeting":return"bg-secondary";default:return"bg-dark"}};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-phone me-2"}),"Call Settings Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:S,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Call Setting"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Call Type"}),n.jsx("th",{children:"Purpose"}),n.jsx("th",{children:"Outcome"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(I=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("i",{className:D(I.callType)}),n.jsx("span",{className:"ms-2",children:I.callType})]})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${A(I.purpose)}`,children:I.purpose})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${E(I.outcome)}`,children:I.outcome})}),n.jsx("td",{children:I.description}),n.jsx("td",{children:n.jsx("span",{className:`badge ${I.isActive?"bg-success":"bg-secondary"}`,children:I.isActive?"Active":"Inactive"})}),n.jsx("td",{children:new Date(I.createdAt).toLocaleDateString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(I),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(I._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},I._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Call Setting":"Add Call Setting"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Call Type"}),n.jsxs("select",{className:"form-select",value:u.callType,onChange:I=>h({...u,callType:I.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Call Type"}),f.map(I=>n.jsx("option",{value:I,children:I},I))]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Purpose"}),n.jsxs("select",{className:"form-select",value:u.purpose,onChange:I=>h({...u,purpose:I.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Purpose"}),p.map(I=>n.jsx("option",{value:I,children:I},I))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Outcome"}),n.jsxs("select",{className:"form-select",value:u.outcome,onChange:I=>h({...u,outcome:I.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Outcome"}),x.map(I=>n.jsx("option",{value:I,children:I},I))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:I=>h({...u,description:I.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},_6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(""),[c,d]=j.useState(!1),[u,h]=j.useState(null),[f,p]=j.useState({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),x=["Pending","In Progress","Completed","Delayed","Cancelled"],g=["Low","Medium","High","Critical"],b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear");j.useEffect(()=>{S(),w()},[]);const S=async()=>{i(!0);try{const O=await(await fetch(`/api/milestones?companyId=${b}&financialYear=${y}`)).json();t(O),l("")}catch{l("Failed to load milestones")}finally{i(!1)}},w=async()=>{try{const O=await(await fetch(`/api/projects?companyId=${b}&financialYear=${y}`)).json();a(O)}catch{console.error("Failed to load projects")}},k=()=>{h(null),p({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),d(!0)},C=P=>{h(P),p({milestoneName:P.milestoneName,description:P.description,projectId:P.projectId._id||P.projectId,dueDate:P.dueDate?P.dueDate.split("T")[0]:"",status:P.status,priority:P.priority,deliverables:P.deliverables.join(`
`),budget:P.budget,completionPercentage:P.completionPercentage}),d(!0)},D=async P=>{P.preventDefault();try{const O=u?`/api/milestones/${u._id}`:"/api/milestones",Y=u?"PUT":"POST",q={...f,deliverables:f.deliverables.split(`
`).filter(U=>U.trim()),companyId:b,financialYear:y};(await fetch(O,{method:Y,headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok?(await S(),d(!1),l("")):l("Failed to save milestone")}catch{l("Failed to save milestone")}},E=async P=>{if(window.confirm("Are you sure you want to delete this milestone?"))try{(await fetch(`/api/milestones/${P}`,{method:"DELETE"})).ok?(await S(),l("")):l("Failed to delete milestone")}catch{l("Failed to delete milestone")}},A=P=>({Pending:"bg-secondary","In Progress":"bg-primary",Completed:"bg-success",Delayed:"bg-warning",Cancelled:"bg-danger"})[P]||"bg-secondary",I=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",L=P=>P?new Date(P)<new Date:!1;return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-flag-checkered me-2"}),"Milestones Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:k,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Milestone"]})]}),n.jsxs("div",{className:"card-body",children:[o&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Milestone Name"}),n.jsx("th",{children:"Project"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Progress"}),n.jsx("th",{children:"Due Date"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Deliverables"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(P=>n.jsxs("tr",{className:L(P.dueDate)&&P.status!=="Completed"?"table-danger":"",children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:P.milestoneName}),P.description&&n.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),n.jsx("td",{children:P.projectId?.projectName||"No Project"}),n.jsx("td",{children:n.jsx("span",{className:`badge ${A(P.status)}`,children:P.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${I(P.priority)}`,children:P.priority})}),n.jsx("td",{children:n.jsx("div",{className:"progress",style:{height:"20px",width:"100px"},children:n.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${P.completionPercentage}%`},children:[P.completionPercentage,"%"]})})}),n.jsx("td",{children:P.dueDate?n.jsxs("div",{children:[new Date(P.dueDate).toLocaleDateString(),L(P.dueDate)&&P.status!=="Completed"&&n.jsxs("div",{className:"text-danger small",children:[n.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),n.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-info",children:[P.deliverables?.length||0," items"]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>C(P),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>E(P._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),c&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:u?"Edit Milestone":"Add Milestone"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),n.jsxs("form",{onSubmit:D,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Milestone Name"}),n.jsx("input",{type:"text",className:"form-control",value:f.milestoneName,onChange:P=>p({...f,milestoneName:P.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project"}),n.jsxs("select",{className:"form-select",value:f.projectId,onChange:P=>p({...f,projectId:P.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Project"}),r.map(P=>n.jsx("option",{value:P._id,children:P.projectName},P._id))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:f.description,onChange:P=>p({...f,description:P.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:f.status,onChange:P=>p({...f,status:P.target.value}),required:!0,children:x.map(P=>n.jsx("option",{value:P,children:P},P))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:f.priority,onChange:P=>p({...f,priority:P.target.value}),required:!0,children:g.map(P=>n.jsx("option",{value:P,children:P},P))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Due Date"}),n.jsx("input",{type:"date",className:"form-control",value:f.dueDate,onChange:P=>p({...f,dueDate:P.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Budget ($)"}),n.jsx("input",{type:"number",className:"form-control",value:f.budget,onChange:P=>p({...f,budget:P.target.value})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Completion Percentage"}),n.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:f.completionPercentage,onChange:P=>p({...f,completionPercentage:P.target.value})}),n.jsxs("div",{className:"text-center",children:[f.completionPercentage,"%"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Deliverables (one per line)"}),n.jsx("textarea",{className:"form-control",rows:"4",value:f.deliverables,onChange:P=>p({...f,deliverables:P.target.value}),placeholder:`Design mockups
Database schema
API documentation`})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},E6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(""),[u,h]=j.useState(!1),[f,p]=j.useState(null),[x,g]=j.useState({taskName:"",description:"",projectId:"",assignedTo:[],status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),b=["To Do","In Progress","Review","Testing","Done","Blocked"],y=["Low","Medium","High","Critical"],S=["Development","Testing","Design","Documentation","Bug Fix","Research","Other"],w=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear");j.useEffect(()=>{C(),D()},[]);const C=async()=>{l(!0);try{const X=await(await fetch(`/api/tasks?companyId=${w}&financialYear=${k}`)).json();t(X),d("")}catch{d("Failed to load tasks")}finally{l(!1)}},D=async()=>{try{const X=await(await fetch(`/api/projects?companyId=${w}&financialYear=${k}`)).json();console.log("Projects loaded:",X),a(X)}catch{console.error("Failed to load projects")}},E=async F=>{if(!F){i([]);return}try{const Q=await(await fetch(`/api/tasks/project/${F}/team-members`)).json();i(Q||[])}catch{console.error("Failed to load team members"),i([])}},A=()=>{p(null),g({taskName:"",description:"",projectId:"",assignedTo:[],status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),i([]),h(!0)},I=F=>{p(F),g({taskName:F.taskName,description:F.description,projectId:F.projectId._id||F.projectId,assignedTo:F.assignedTo.map(X=>X._id||X),status:F.status,priority:F.priority,dueDate:F.dueDate?F.dueDate.split("T")[0]:"",estimatedHours:F.estimatedHours,actualHours:F.actualHours,category:F.category}),(F.projectId._id||F.projectId)&&E(F.projectId._id||F.projectId),h(!0)},L=F=>{g({...x,projectId:F,assignedTo:[]}),E(F)},P=F=>{const X=[...x.assignedTo],Q=X.indexOf(F);Q>-1?X.splice(Q,1):X.push(F),g({...x,assignedTo:X})},O=async F=>{F.preventDefault();try{const X=f?`/api/tasks/${f._id}`:"/api/tasks";(await fetch(X,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,companyId:w,financialYear:k})})).ok?(await C(),h(!1),d("")):d("Failed to save task")}catch{d("Failed to save task")}},Y=async F=>{if(window.confirm("Are you sure you want to delete this task?"))try{(await fetch(`/api/tasks/${F}`,{method:"DELETE"})).ok?(await C(),d("")):d("Failed to delete task")}catch{d("Failed to delete task")}},q=F=>({"To Do":"bg-secondary","In Progress":"bg-primary",Review:"bg-warning",Testing:"bg-info",Done:"bg-success",Blocked:"bg-danger"})[F]||"bg-secondary",K=F=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[F]||"bg-secondary",U=F=>F?new Date(F)<new Date:!1,J=F=>!F||F.length===0?"Not Assigned":F.map(X=>`${X.firstName} ${X.lastName}`).join(", ");return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-tasks me-2"}),"Tasks Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:A,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Task"]})]}),n.jsxs("div",{className:"card-body",children:[c&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Task Name"}),n.jsx("th",{children:"Project"}),n.jsx("th",{children:"Assigned To"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Due Date"}),n.jsx("th",{children:"Hours"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(F=>n.jsxs("tr",{className:U(F.dueDate)&&F.status!=="Done"?"table-danger":"",children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:F.taskName}),F.description&&n.jsxs("div",{className:"text-muted small",children:[F.description.substring(0,50),"..."]})]})}),n.jsx("td",{children:F.projectId?.projectName||"No Project"}),n.jsx("td",{children:n.jsx("div",{className:"small",children:J(F.assignedTo)})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${q(F.status)}`,children:F.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${K(F.priority)}`,children:F.priority})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:F.category})}),n.jsx("td",{children:F.dueDate?n.jsxs("div",{children:[new Date(F.dueDate).toLocaleDateString(),U(F.dueDate)&&F.status!=="Done"&&n.jsxs("div",{className:"text-danger small",children:[n.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),n.jsx("td",{children:n.jsxs("div",{className:"small",children:[n.jsxs("div",{children:["Est: ",F.estimatedHours||0,"h"]}),n.jsxs("div",{children:["Act: ",F.actualHours||0,"h"]})]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>I(F),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Y(F._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},F._id))})]})})]})]})})}),u&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:f?"Edit Task":"Add Task"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),n.jsxs("form",{onSubmit:O,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Task Name"}),n.jsx("input",{type:"text",className:"form-control",value:x.taskName,onChange:F=>g({...x,taskName:F.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project"}),n.jsxs("select",{className:"form-select",value:x.projectId,onChange:F=>L(F.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Project"}),r.map(F=>n.jsx("option",{value:F._id,children:F.projectName},F._id))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:x.description,onChange:F=>g({...x,description:F.target.value})})]}),x.projectId&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Assign To Team Members"}),n.jsx("div",{className:"border rounded p-3",style:{maxHeight:"200px",overflowY:"auto"},children:s.length===0?n.jsx("p",{className:"text-muted mb-0",children:"No team members found for this project"}):s.map(F=>n.jsxs("div",{className:"form-check",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",id:`member-${F._id}`,checked:x.assignedTo.includes(F._id),onChange:()=>P(F._id)}),n.jsxs("label",{className:"form-check-label d-flex align-items-center",htmlFor:`member-${F._id}`,children:[F.profilePhoto&&n.jsx("img",{src:F.profilePhoto,alt:"",className:"rounded-circle me-2",width:"24",height:"24"}),n.jsxs("div",{children:[n.jsxs("div",{children:[F.firstName," ",F.lastName]}),n.jsxs("small",{className:"text-muted",children:[F.department,"  ",F.employeeId]})]})]})]},F._id))}),x.assignedTo.length>0&&n.jsxs("small",{className:"text-info",children:[x.assignedTo.length," member(s) selected"]})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:x.status,onChange:F=>g({...x,status:F.target.value}),required:!0,children:b.map(F=>n.jsx("option",{value:F,children:F},F))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:x.priority,onChange:F=>g({...x,priority:F.target.value}),required:!0,children:y.map(F=>n.jsx("option",{value:F,children:F},F))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:x.category,onChange:F=>g({...x,category:F.target.value}),children:[n.jsx("option",{value:"",children:"Select Category"}),S.map(F=>n.jsx("option",{value:F,children:F},F))]})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Due Date"}),n.jsx("input",{type:"date",className:"form-control",value:x.dueDate,onChange:F=>g({...x,dueDate:F.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Estimated Hours"}),n.jsx("input",{type:"number",className:"form-control",value:x.estimatedHours,onChange:F=>g({...x,estimatedHours:F.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Actual Hours"}),n.jsx("input",{type:"number",className:"form-control",value:x.actualHours,onChange:F=>g({...x,actualHours:F.target.value})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:f?"Update":"Create"})]})]})]})})})]})},D6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(""),[u,h]=j.useState(!1),[f,p]=j.useState(null),[x,g]=j.useState(!1),[b,y]=j.useState(0),[S,w]=j.useState({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),k=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear");j.useEffect(()=>{D(),E(),A()},[]),j.useEffect(()=>{let F=null;return x?F=setInterval(()=>{y(X=>X+1)},1e3):!x&&b!==0&&clearInterval(F),()=>clearInterval(F)},[x,b]);const D=async()=>{l(!0);try{const X=await(await fetch(`/api/time-entries?companyId=${k}&financialYear=${C}`)).json();t(X),d("")}catch{d("Failed to load time entries")}finally{l(!1)}},E=async()=>{try{const X=await(await fetch(`/api/projects?companyId=${k}&financialYear=${C}`)).json();a(X)}catch{console.error("Failed to load projects")}},A=async()=>{try{const X=await(await fetch(`/api/tasks?companyId=${k}&financialYear=${C}`)).json();i(X)}catch{console.error("Failed to load tasks")}},I=()=>{g(!0),y(0);const F=new Date;w({...S,startTime:F.toTimeString().slice(0,5),date:F.toISOString().split("T")[0]})},L=()=>{g(!1);const F=new Date,X=(b/3600).toFixed(2);w({...S,endTime:F.toTimeString().slice(0,5),hours:X}),h(!0)},P=F=>{const X=Math.floor(F/3600),Q=Math.floor(F%3600/60),ie=F%60;return`${X.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`},O=()=>{p(null),w({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),h(!0)},Y=F=>{p(F),w({projectId:F.projectId._id||F.projectId,taskId:F.taskId?._id||F.taskId||"",description:F.description,startTime:F.startTime,endTime:F.endTime,hours:F.hours,date:F.date?F.date.split("T")[0]:"",billable:F.billable}),h(!0)},q=async F=>{F.preventDefault();try{const X=f?`/api/time-entries/${f._id}`:"/api/time-entries";(await fetch(X,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...S,companyId:k,financialYear:C})})).ok?(await D(),h(!1),d(""),y(0)):d("Failed to save time entry")}catch{d("Failed to save time entry")}},K=async F=>{if(window.confirm("Are you sure you want to delete this time entry?"))try{(await fetch(`/api/time-entries/${F}`,{method:"DELETE"})).ok?(await D(),d("")):d("Failed to delete time entry")}catch{d("Failed to delete time entry")}},U=()=>e.reduce((F,X)=>F+parseFloat(X.hours||0),0).toFixed(2),J=()=>e.filter(F=>F.billable).reduce((F,X)=>F+parseFloat(X.hours||0),0).toFixed(2);return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-12",children:n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-body text-center",children:[n.jsx("h3",{className:"display-4 mb-3",children:P(b)}),n.jsxs("div",{className:"btn-group",children:[x?n.jsxs("button",{className:"btn btn-danger btn-lg",onClick:L,children:[n.jsx("i",{className:"fas fa-stop me-2"}),"Stop Timer"]}):n.jsxs("button",{className:"btn btn-success btn-lg",onClick:I,children:[n.jsx("i",{className:"fas fa-play me-2"}),"Start Timer"]}),n.jsxs("button",{className:"btn btn-secondary btn-lg",onClick:()=>{y(0),g(!1)},children:[n.jsx("i",{className:"fas fa-redo me-2"}),"Reset"]})]})]})})})}),n.jsxs("div",{className:"row mb-4",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("div",{className:"card bg-primary text-white",children:n.jsxs("div",{className:"card-body",children:[n.jsx("h5",{className:"card-title",children:"Total Hours"}),n.jsxs("h3",{children:[U(),"h"]})]})})}),n.jsx("div",{className:"col-md-4",children:n.jsx("div",{className:"card bg-success text-white",children:n.jsxs("div",{className:"card-body",children:[n.jsx("h5",{className:"card-title",children:"Billable Hours"}),n.jsxs("h3",{children:[J(),"h"]})]})})}),n.jsx("div",{className:"col-md-4",children:n.jsx("div",{className:"card bg-info text-white",children:n.jsxs("div",{className:"card-body",children:[n.jsx("h5",{className:"card-title",children:"Entries"}),n.jsx("h3",{children:e.length})]})})})]}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-clock me-2"}),"Time Tracking"]}),n.jsxs("button",{className:"btn btn-primary",onClick:O,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Entry"]})]}),n.jsxs("div",{className:"card-body",children:[c&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Project"}),n.jsx("th",{children:"Task"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Start Time"}),n.jsx("th",{children:"End Time"}),n.jsx("th",{children:"Hours"}),n.jsx("th",{children:"Billable"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(F=>n.jsxs("tr",{children:[n.jsx("td",{children:new Date(F.date).toLocaleDateString()}),n.jsx("td",{children:F.projectId?.projectName||"No Project"}),n.jsx("td",{children:F.taskId?.taskName||"No Task"}),n.jsx("td",{children:F.description}),n.jsx("td",{children:F.startTime}),n.jsx("td",{children:F.endTime}),n.jsxs("td",{className:"fw-bold",children:[F.hours,"h"]}),n.jsx("td",{children:n.jsx("span",{className:`badge ${F.billable?"bg-success":"bg-secondary"}`,children:F.billable?"Billable":"Non-billable"})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Y(F),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>K(F._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},F._id))})]})})]})]})})}),u&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:f?"Edit Time Entry":"Add Time Entry"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),n.jsxs("form",{onSubmit:q,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project"}),n.jsxs("select",{className:"form-select",value:S.projectId,onChange:F=>w({...S,projectId:F.target.value}),required:!0,children:[n.jsx("option",{value:"",children:"Select Project"}),r.map(F=>n.jsx("option",{value:F._id,children:F.projectName},F._id))]})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Task (Optional)"}),n.jsxs("select",{className:"form-select",value:S.taskId,onChange:F=>w({...S,taskId:F.target.value}),children:[n.jsx("option",{value:"",children:"Select Task"}),s.filter(F=>F.projectId._id===S.projectId).map(F=>n.jsx("option",{value:F._id,children:F.taskName},F._id))]})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:S.description,onChange:F=>w({...S,description:F.target.value}),required:!0})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Date"}),n.jsx("input",{type:"date",className:"form-control",value:S.date,onChange:F=>w({...S,date:F.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Start Time"}),n.jsx("input",{type:"time",className:"form-control",value:S.startTime,onChange:F=>w({...S,startTime:F.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"End Time"}),n.jsx("input",{type:"time",className:"form-control",value:S.endTime,onChange:F=>w({...S,endTime:F.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Hours"}),n.jsx("input",{type:"number",step:"0.25",className:"form-control",value:S.hours,onChange:F=>w({...S,hours:F.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"form-check mt-4",children:[n.jsx("input",{className:"form-check-input",type:"checkbox",checked:S.billable,onChange:F=>w({...S,billable:F.target.checked})}),n.jsx("label",{className:"form-check-label",children:"Billable"})]})})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:f?"Update":"Create"})]})]})]})})})]})},A6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState([]),[f,p]=j.useState(!1),[x,g]=j.useState(""),[b,y]=j.useState(""),[S,w]=j.useState([]),[k,C]=j.useState(null),[D,E]=j.useState({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:[],teamMembers:[],technologies:"",category:""}),A=["Planning","In Progress","Testing","Completed","On Hold","Cancelled"],I=["Low","Medium","High","Critical"],L=["Web Development","Mobile App","Desktop App","API Development","Data Analysis","Other"],P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear");j.useEffect(()=>{Y()},[]);const Y=async()=>{a(!0);try{const Z=await(await fetch(`/api/projects?companyId=${P}&financialYear=${O}`)).json();t(Z),i("")}catch{i("Failed to load projects")}finally{a(!1)}},q=async()=>{try{const ae=localStorage.getItem("selectedCompanyId"),Z=localStorage.getItem("financialYear"),de=await Oe.get("/api/faculties",{params:{companyId:ae,financialYear:Z}});h(de.data),console.log("Fetched faculties:",de.data)}catch(ae){console.error("Error fetching faculties:",ae)}};j.useEffect(()=>{q()},[]);const K=u.filter(ae=>`${ae.firstName} ${ae.lastName}`.toLowerCase().includes(b.toLowerCase())||ae.email?.toLowerCase().includes(b.toLowerCase())||ae.employeeId?.toLowerCase().includes(b.toLowerCase())),U=()=>{d(null),w([]),C(null),E({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:[],teamMembers:[],technologies:"",category:""}),l(!0)},J=ae=>{d(ae);const Z=ae.projectManager||[];C(Z.length>0?Z[0]:null);const de=ae.teamMembers||[];w(de),E({projectName:ae.projectName,description:ae.description,clientName:ae.clientName,startDate:ae.startDate?ae.startDate.split("T")[0]:"",endDate:ae.endDate?ae.endDate.split("T")[0]:"",budget:ae.budget,status:ae.status,priority:ae.priority,projectManager:Z,teamMembers:de,technologies:Array.isArray(ae.technologies)?ae.technologies.join(", "):ae.technologies||"",category:ae.category}),l(!0)},F=ae=>{g(ae),y(""),p(!0)},X=()=>{p(!1),g(""),y("")},Q=ae=>{const Z={_id:ae._id,firstName:ae.firstName,lastName:ae.lastName,email:ae.email,employeeId:ae.employeeId,department:ae.department,profilePhoto:ae.profilePhoto};C(Z),E({...D,projectManager:[Z]}),X()},ie=ae=>{if(!S.some(de=>de._id===ae._id)){const de={_id:ae._id,firstName:ae.firstName,lastName:ae.lastName,email:ae.email,employeeId:ae.employeeId,department:ae.department,profilePhoto:ae.profilePhoto},z=[...S,de];w(z),E({...D,teamMembers:z})}},M=ae=>{const Z=S.filter(de=>de._id!==ae);w(Z),E({...D,teamMembers:Z})},V=()=>{C(null),E({...D,projectManager:[]})},W=async ae=>{ae.preventDefault();try{const Z=c?`/api/projects/${c._id}`:"/api/projects",de=c?"PUT":"POST",z={...D,technologies:D.technologies.split(",").map(Ne=>Ne.trim()).filter(Ne=>Ne),companyId:P,financialYear:O};console.log("Sending project data:",z),(await fetch(Z,{method:de,headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).ok?(await Y(),l(!1),w([]),C(null),i("")):i("Failed to save project")}catch{i("Failed to save project")}},ee=async ae=>{if(window.confirm("Are you sure you want to delete this project?"))try{(await fetch(`/api/projects/${ae}`,{method:"DELETE"})).ok?(await Y(),i("")):i("Failed to delete project")}catch{i("Failed to delete project")}},re=ae=>({Planning:"bg-info","In Progress":"bg-primary",Testing:"bg-warning",Completed:"bg-success","On Hold":"bg-secondary",Cancelled:"bg-danger"})[ae]||"bg-secondary",ne=ae=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[ae]||"bg-secondary",ce=(ae,Z)=>{if(!ae||!Z)return 0;const de=new Date(ae),z=new Date(Z),se=new Date;if(se<de)return 0;if(se>z)return 100;const Ne=z-de,ue=se-de;return Math.round(ue/Ne*100)};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-project-diagram me-2"}),"Projects Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:U,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Project"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Project Name"}),n.jsx("th",{children:"Client"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Progress"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Start Date"}),n.jsx("th",{children:"End Date"}),n.jsx("th",{children:"Project Manager"}),n.jsx("th",{children:"Team Size"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(ae=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:ae.projectName}),ae.category&&n.jsx("div",{className:"text-muted small",children:ae.category})]})}),n.jsx("td",{children:ae.clientName}),n.jsx("td",{children:n.jsx("span",{className:`badge ${re(ae.status)}`,children:ae.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${ne(ae.priority)}`,children:ae.priority})}),n.jsx("td",{children:n.jsx("div",{className:"progress",style:{height:"20px"},children:n.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${ce(ae.startDate,ae.endDate)}%`},children:[ce(ae.startDate,ae.endDate),"%"]})})}),n.jsx("td",{children:ae.budget?`$${Number(ae.budget).toLocaleString()}`:"N/A"}),n.jsx("td",{children:ae.startDate?new Date(ae.startDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:ae.endDate?new Date(ae.endDate).toLocaleDateString():"N/A"}),n.jsx("td",{children:ae.projectManager&&ae.projectManager.length>0?`${ae.projectManager[0].firstName} ${ae.projectManager[0].lastName}`:"Not assigned"}),n.jsx("td",{children:n.jsxs("span",{className:"badge bg-info",children:[ae.teamMembers?ae.teamMembers.length:0," members"]})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>J(ae),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>ee(ae._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},ae._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Project":"Add Project"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:W,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project Name"}),n.jsx("input",{type:"text",className:"form-control",value:D.projectName,onChange:ae=>E({...D,projectName:ae.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Client Name"}),n.jsx("input",{type:"text",className:"form-control",value:D.clientName,onChange:ae=>E({...D,clientName:ae.target.value}),required:!0})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:D.description,onChange:ae=>E({...D,description:ae.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:D.status,onChange:ae=>E({...D,status:ae.target.value}),required:!0,children:A.map(ae=>n.jsx("option",{value:ae,children:ae},ae))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:D.priority,onChange:ae=>E({...D,priority:ae.target.value}),required:!0,children:I.map(ae=>n.jsx("option",{value:ae,children:ae},ae))})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("select",{className:"form-select",value:D.category,onChange:ae=>E({...D,category:ae.target.value}),children:[n.jsx("option",{value:"",children:"Select Category"}),L.map(ae=>n.jsx("option",{value:ae,children:ae},ae))]})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Start Date"}),n.jsx("input",{type:"date",className:"form-control",value:D.startDate,onChange:ae=>E({...D,startDate:ae.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"End Date"}),n.jsx("input",{type:"date",className:"form-control",value:D.endDate,onChange:ae=>E({...D,endDate:ae.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Budget ($)"}),n.jsx("input",{type:"number",className:"form-control",value:D.budget,onChange:ae=>E({...D,budget:ae.target.value})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Project Manager"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control",value:k?`${k.firstName} ${k.lastName}`:"",placeholder:"Select project manager"}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>F("manager"),children:n.jsx("i",{className:"fas fa-search"})})]}),k&&n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"d-flex align-items-center p-2 bg-light rounded",children:[n.jsx("div",{className:"me-2",children:n.jsxs("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px",fontSize:"12px"},children:[k.firstName?.charAt(0),k.lastName?.charAt(0)]})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("strong",{children:[k.firstName," ",k.lastName]}),n.jsxs("div",{className:"text-muted small",children:[k.employeeId,"  ",k.department]})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:V,children:n.jsx("i",{className:"fas fa-times"})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Team Members"}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"text",className:"form-control",value:S.length>0?`${S.length} members selected`:"",placeholder:"Select team members",readOnly:!0}),n.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>F("team"),children:n.jsx("i",{className:"fas fa-search"})})]}),S.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("small",{className:"text-muted",children:"Selected team members:"}),n.jsx("div",{className:"row mt-2",children:S.map(ae=>n.jsx("div",{className:"col-md-6 mb-2",children:n.jsxs("div",{className:"d-flex align-items-center p-2 bg-light rounded",children:[n.jsx("div",{className:"me-2",children:n.jsxs("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px",fontSize:"12px"},children:[ae.firstName?.charAt(0),ae.lastName?.charAt(0)]})}),n.jsxs("div",{className:"flex-grow-1",children:[n.jsxs("strong",{className:"small",children:[ae.firstName," ",ae.lastName]}),n.jsx("div",{className:"text-muted",style:{fontSize:"11px"},children:ae.employeeId})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>M(ae._id),children:n.jsx("i",{className:"fas fa-times"})})]})},ae._id))})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Technologies (comma-separated)"}),n.jsx("input",{type:"text",className:"form-control",value:D.technologies,onChange:ae=>E({...D,technologies:ae.target.value}),placeholder:"React, Node.js, MongoDB"})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal-backdrop fade show"}),n.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h4",{className:"modal-title",children:["Select ",x==="manager"?"Project Manager":"Team Members"]}),n.jsx("button",{type:"button",className:"btn-close",onClick:X,"aria-label":"Close"})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"input-group",children:[n.jsx("span",{className:"input-group-text",children:n.jsx("i",{className:"fas fa-search"})}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, or employee ID...",value:b,onChange:ae=>y(ae.target.value)})]})}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:K.length>0?n.jsx("div",{className:"list-group",children:K.map(ae=>n.jsxs("div",{className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center ${x==="team"&&S.some(Z=>Z._id===ae._id)||x==="manager"&&k?._id===ae._id?"active":""}`,onClick:()=>{x==="manager"?Q(ae):ie(ae)},style:{cursor:"pointer"},children:[n.jsxs("div",{className:"d-flex align-items-center",children:[n.jsx("div",{className:"me-3",children:n.jsxs("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:[ae.firstName?.charAt(0),ae.lastName?.charAt(0)]})}),n.jsxs("div",{children:[n.jsxs("h6",{className:"mb-0",children:[ae.firstName," ",ae.lastName]}),n.jsxs("small",{className:"text-muted",children:[ae.employeeId,"  ",ae.email,"  ",ae.department]})]})]}),(x==="team"&&S.some(Z=>Z._id===ae._id)||x==="manager"&&k?._id===ae._id)&&n.jsx("i",{className:"fas fa-check text-success"})]},ae._id))}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),n.jsx("p",{className:"text-muted",children:b?"No employees found matching your search.":"No employees available."})]})}),x==="team"&&S.length>0&&n.jsx("div",{className:"mt-3",children:n.jsxs("small",{className:"text-muted",children:["Selected: ",S.length," member(s)"]})})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:X,children:x==="team"?"Done":"Cancel"})})]})})})]})]})},T6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),f=["Email","Social Media","Google Ads","Facebook Ads","Content Marketing","Print","TV/Radio","Event","Influencer","SEO","Other"],p=["Draft","Scheduled","Active","Paused","Completed","Cancelled"],x=["Low","Medium","High","Critical"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");j.useEffect(()=>{y()},[]);const y=async()=>{a(!0);try{const O=await(await fetch(`/api/campaigns?companyId=${g}&financialYear=${b}`)).json();t(O),i("")}catch{i("Failed to load campaigns")}finally{a(!1)}},S=()=>{d(null),h({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),l(!0)},w=P=>{d(P),h({campaignName:P.campaignName,description:P.description,campaignType:P.campaignType,status:P.status,startDate:P.startDate?P.startDate.split("T")[0]:"",endDate:P.endDate?P.endDate.split("T")[0]:"",budget:P.budget,targetAudience:P.targetAudience,channels:P.channels.join(", "),objectives:P.objectives.join(`
`),expectedROI:P.expectedROI,actualROI:P.actualROI,leads:P.leads,conversions:P.conversions,clickThroughRate:P.clickThroughRate,openRate:P.openRate,assignedTo:P.assignedTo,priority:P.priority}),l(!0)},k=async P=>{P.preventDefault();try{const O=c?`/api/campaigns/${c._id}`:"/api/campaigns",Y=c?"PUT":"POST",q={...u,channels:u.channels.split(",").map(U=>U.trim()).filter(U=>U),objectives:u.objectives.split(`
`).map(U=>U.trim()).filter(U=>U),companyId:g,financialYear:b};(await fetch(O,{method:Y,headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok?(await y(),l(!1),i("")):i("Failed to save campaign")}catch{i("Failed to save campaign")}},C=async P=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{(await fetch(`/api/campaigns/${P}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete campaign")}catch{i("Failed to delete campaign")}},D=P=>({Draft:"bg-secondary",Scheduled:"bg-info",Active:"bg-success",Paused:"bg-warning",Completed:"bg-primary",Cancelled:"bg-danger"})[P]||"bg-secondary",E=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",A=(P,O)=>!P||!O||O===0?0:((P-O)/O*100).toFixed(2),I=(P,O)=>!P||!O||O===0?0:(P/O*100).toFixed(2),L=(P,O)=>{const Y=new Date,q=new Date(P),K=new Date(O);return Y>=q&&Y<=K};return n.jsxs("div",{className:"container-fluid py-4",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-bullhorn me-2"}),"Campaign Management"]}),n.jsxs("button",{className:"btn btn-primary",onClick:S,children:[n.jsx("i",{className:"fas fa-plus me-2"}),"Add Campaign"]})]}),n.jsxs("div",{className:"card-body",children:[s&&n.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Campaign Name"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Period"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Leads"}),n.jsx("th",{children:"Conversions"}),n.jsx("th",{children:"ROI"}),n.jsx("th",{children:"Assigned To"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(P=>n.jsxs("tr",{className:L(P.startDate,P.endDate)&&P.status==="Active"?"table-success":"",children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("strong",{children:P.campaignName}),P.description&&n.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:P.campaignType})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${D(P.status)}`,children:P.status})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${E(P.priority)}`,children:P.priority})}),n.jsx("td",{children:n.jsxs("div",{className:"small",children:[n.jsxs("div",{children:["Start: ",P.startDate?new Date(P.startDate).toLocaleDateString():"N/A"]}),n.jsxs("div",{children:["End: ",P.endDate?new Date(P.endDate).toLocaleDateString():"N/A"]})]})}),n.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:P.leads||0})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("span",{className:"badge bg-success",children:P.conversions||0}),n.jsxs("div",{className:"small text-muted",children:[I(P.conversions,P.leads),"% rate"]})]})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsxs("div",{className:"fw-bold",children:[A(P.actualROI,P.budget),"%"]}),n.jsxs("div",{className:"small text-muted",children:["$",P.actualROI?Number(P.actualROI).toLocaleString():0]})]})}),n.jsx("td",{children:P.assignedTo}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(P),children:n.jsx("i",{className:"fas fa-edit"})}),n.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(P._id),children:n.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),o&&n.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Campaign":"Add Campaign"}),n.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),n.jsxs("form",{onSubmit:k,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-8",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Campaign Name"}),n.jsx("input",{type:"text",className:"form-control",value:u.campaignName,onChange:P=>h({...u,campaignName:P.target.value}),required:!0})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Campaign Type"}),n.jsx("select",{className:"form-select",value:u.campaignType,onChange:P=>h({...u,campaignType:P.target.value}),required:!0,children:f.map(P=>n.jsx("option",{value:P,children:P},P))})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:P=>h({...u,description:P.target.value})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:u.status,onChange:P=>h({...u,status:P.target.value}),required:!0,children:p.map(P=>n.jsx("option",{value:P,children:P},P))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("select",{className:"form-select",value:u.priority,onChange:P=>h({...u,priority:P.target.value}),required:!0,children:x.map(P=>n.jsx("option",{value:P,children:P},P))})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Start Date"}),n.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:P=>h({...u,startDate:P.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"End Date"}),n.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:P=>h({...u,endDate:P.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Budget ($)"}),n.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:P=>h({...u,budget:P.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Expected ROI ($)"}),n.jsx("input",{type:"number",className:"form-control",value:u.expectedROI,onChange:P=>h({...u,expectedROI:P.target.value})})]})}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Actual ROI ($)"}),n.jsx("input",{type:"number",className:"form-control",value:u.actualROI,onChange:P=>h({...u,actualROI:P.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Leads Generated"}),n.jsx("input",{type:"number",className:"form-control",value:u.leads,onChange:P=>h({...u,leads:P.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Conversions"}),n.jsx("input",{type:"number",className:"form-control",value:u.conversions,onChange:P=>h({...u,conversions:P.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Click Through Rate (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.clickThroughRate,onChange:P=>h({...u,clickThroughRate:P.target.value})})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Open Rate (%)"}),n.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.openRate,onChange:P=>h({...u,openRate:P.target.value})})]})})]}),n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Target Audience"}),n.jsx("input",{type:"text",className:"form-control",value:u.targetAudience,onChange:P=>h({...u,targetAudience:P.target.value}),placeholder:"Demographics, interests, location, etc."})]})}),n.jsx("div",{className:"col-md-6",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Assigned To"}),n.jsx("input",{type:"text",className:"form-control",value:u.assignedTo,onChange:P=>h({...u,assignedTo:P.target.value})})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Channels (comma-separated)"}),n.jsx("input",{type:"text",className:"form-control",value:u.channels,onChange:P=>h({...u,channels:P.target.value}),placeholder:"Email, Facebook, Google Ads, Instagram"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Objectives (one per line)"}),n.jsx("textarea",{className:"form-control",rows:"4",value:u.objectives,onChange:P=>h({...u,objectives:P.target.value}),placeholder:`Increase brand awareness
Generate 100 leads
Achieve 5% conversion rate`})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},I6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState({totalCampaigns:0,activeCampaigns:0,totalLeads:0,totalConversions:0,averageConversionRate:0,totalBudget:0,totalROI:0,topPerformingCampaign:null}),[o,l]=j.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear");j.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const g=await(await fetch(`/api/campaigns?companyId=${c}&financialYear=${d}`)).json();t(g);const y=await(await fetch(`/api/leads?companyId=${c}&financialYear=${d}`)).json();a(y),h(g,y)}catch(x){console.error("Failed to load analytics data:",x)}finally{l(!1)}},h=(x,g)=>{const b=x.length,y=x.filter(A=>A.status==="Active").length,S=g.length,w=g.filter(A=>A.leadStatus==="Closed Won").length,k=S>0?(w/S*100).toFixed(2):0,C=x.reduce((A,I)=>A+(I.budget||0),0),D=x.reduce((A,I)=>A+(I.actualROI||0),0),E=x.reduce((A,I)=>{const L=I.leads>0?I.conversions/I.leads:0,P=A&&A.leads>0?A.conversions/A.leads:0;return L>P?I:A},null);i({totalCampaigns:b,activeCampaigns:y,totalLeads:S,totalConversions:w,averageConversionRate:k,totalBudget:C,totalROI:D,topPerformingCampaign:E})},f=x=>({Draft:"secondary",Scheduled:"info",Active:"success",Paused:"warning",Completed:"primary",Cancelled:"danger"})[x]||"secondary",p=(x,g)=>!x||!g||g===0?0:((x-g)/g*100).toFixed(2);return n.jsx("div",{className:"container-fluid py-4",children:n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("h4",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-chart-bar me-2"}),"Campaign Analytics"]})}),n.jsx("div",{className:"card-body",children:o?n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"spinner-border",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-primary text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Total Campaigns"}),n.jsx("h3",{className:"mb-0",children:s.totalCampaigns}),n.jsxs("small",{children:[s.activeCampaigns," Active"]})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-bullhorn fa-2x"})})]})})})}),n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-success text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Total Leads"}),n.jsx("h3",{className:"mb-0",children:s.totalLeads}),n.jsxs("small",{children:[s.totalConversions," Conversions"]})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-user-plus fa-2x"})})]})})})}),n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-warning text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Conversion Rate"}),n.jsxs("h3",{className:"mb-0",children:[s.averageConversionRate,"%"]}),n.jsx("small",{children:"Average across all campaigns"})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-percentage fa-2x"})})]})})})}),n.jsx("div",{className:"col-xl-3 col-md-6",children:n.jsx("div",{className:"card bg-info text-white",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"d-flex justify-content-between",children:[n.jsxs("div",{children:[n.jsx("h6",{className:"card-title",children:"Total ROI"}),n.jsxs("h3",{className:"mb-0",children:["$",s.totalROI.toLocaleString()]}),n.jsxs("small",{children:["Budget: $",s.totalBudget.toLocaleString()]})]}),n.jsx("div",{className:"align-self-center",children:n.jsx("i",{className:"fas fa-dollar-sign fa-2x"})})]})})})})]}),s.topPerformingCampaign&&n.jsx("div",{className:"row mb-4",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card border-success",children:[n.jsx("div",{className:"card-header bg-success text-white",children:n.jsxs("h5",{className:"card-title mb-0",children:[n.jsx("i",{className:"fas fa-trophy me-2"}),"Top Performing Campaign"]})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("strong",{children:"Campaign:"}),n.jsx("br",{}),s.topPerformingCampaign.campaignName]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("strong",{children:"Type:"}),n.jsx("br",{}),s.topPerformingCampaign.campaignType]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("strong",{children:"Leads:"}),n.jsx("br",{}),s.topPerformingCampaign.leads||0]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("strong",{children:"Conversions:"}),n.jsx("br",{}),s.topPerformingCampaign.conversions||0]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("strong",{children:"Conversion Rate:"}),n.jsx("br",{}),s.topPerformingCampaign.leads>0?(s.topPerformingCampaign.conversions/s.topPerformingCampaign.leads*100).toFixed(2):0,"%"]})]})})]})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h5",{className:"card-title mb-0",children:"Campaign Performance Details"})}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-striped table-hover",children:[n.jsx("thead",{className:"table-dark",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Campaign Name"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Budget"}),n.jsx("th",{children:"Leads"}),n.jsx("th",{children:"Conversions"}),n.jsx("th",{children:"Conversion Rate"}),n.jsx("th",{children:"ROI"}),n.jsx("th",{children:"ROI %"})]})}),n.jsx("tbody",{children:e.map(x=>{const g=x.leads>0?(x.conversions/x.leads*100).toFixed(2):0;return n.jsxs("tr",{children:[n.jsx("td",{className:"fw-bold",children:x.campaignName}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-info",children:x.campaignType})}),n.jsx("td",{children:n.jsx("span",{className:`badge bg-${f(x.status)}`,children:x.status})}),n.jsxs("td",{children:["$",(x.budget||0).toLocaleString()]}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:x.leads||0})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-success",children:x.conversions||0})}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${g>=10?"bg-success":g>=5?"bg-warning":"bg-secondary"}`,children:[g,"%"]})}),n.jsxs("td",{children:["$",(x.actualROI||0).toLocaleString()]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${p(x.actualROI,x.budget)>0?"bg-success":"bg-danger"}`,children:[p(x.actualROI,x.budget),"%"]})})]},x._id)})})]})})})]})})})]})})]})})})})};function P6e(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState(""),[x,g]=j.useState(""),[b,y]=j.useState("");j.useEffect(()=>{const K=e.filter(U=>{const J=U.deliveryNumber?.toLowerCase().includes(c.toLowerCase())||U.soNumber?.toLowerCase().includes(c.toLowerCase())||U.customerName?.toLowerCase().includes(c.toLowerCase())||U.category?.toLowerCase().includes(c.toLowerCase())||U.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||U.vehicleNumber?.toLowerCase().includes(c.toLowerCase())||U.driverName?.toLowerCase().includes(c.toLowerCase()),F=new Date(U.createdAt),X=u?new Date(u):null,Q=f?new Date(f):null,ie=(!X||F>=X)&&(!Q||F<=Q),M=!x||U.deliveryStatus===x,V=!b||U.deliveryType===b;return J&&ie&&M&&V});a(K)},[c,u,f,x,b,e]);const[S,w]=j.useState(1),[k]=j.useState(10);j.useEffect(()=>{C()},[]);const C=()=>{i(!0),Oe.get("/api/del/salesdeliveries",{params:{companyId:o,financialYear:l}}).then(K=>{const U=K.data.sort((J,F)=>new Date(F.createdAt)-new Date(J.createdAt));t(U),a(U),i(!1)}).catch(K=>{console.error("Error fetching deliveries:",K),alert("Failed to fetch deliveries"),i(!1)})},D=S*k,E=D-k,A=r.slice(E,D),I=Math.ceil(r.length/k),L=K=>w(K),P=K=>`badge ${{Pending:"bg-warning","In Transit":"bg-info",Delivered:"bg-success",Cancelled:"bg-danger"}[K]||"bg-secondary"}`,O=K=>K==="Full"?"badge bg-success":"badge bg-warning",Y=K=>{const U=K.items.map((X,Q)=>`
      <tr>
        <td>${Q+1}</td>
        <td>${X.materialId}</td>
        <td>${X.description}</td>
        <td>${X.orderedQuantity}</td>
        <td>${X.deliveredQuantity}</td>
        <td>${X.pendingQuantity}</td>
        <td>${X.baseUnit}</td>
        <td>${X.price}</td>
        <td>${X.deliveryDate}</td>
        <td>${X.actualDeliveryDate}</td>
        <td>${X.note||""}</td>
      </tr>
    `).join(""),J=`
      <html>
      <head>
        <title>Sales Delivery - ${K.deliveryNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; font-size: 12px; }
          th { background-color: #f0f0f0; }
          .header-info { display: flex; justify-content: space-between; margin-bottom: 20px; }
          .status-badge { padding: 4px 8px; border-radius: 4px; color: white; font-weight: bold; }
          .status-delivered { background-color: #28a745; }
          .status-pending { background-color: #ffc107; color: black; }
          .status-transit { background-color: #17a2b8; }
          .status-cancelled { background-color: #dc3545; }
        </style>
      </head>
      <body>
        <div class="header-info">
          <div>
            <h2>Sales Delivery Details</h2>
            <p><strong>Delivery Number:</strong> ${K.deliveryNumber}</p>
            <p><strong>SO Reference:</strong> ${K.soNumber}</p>
            <p><strong>Customer:</strong> ${K.customerName}</p>
            <p><strong>Category:</strong> ${K.category}</p>
          </div>
          <div>
            <p><strong>Delivery Date:</strong> ${K.deliveryDate}</p>
            <p><strong>Actual Delivery:</strong> ${K.actualDeliveryDate}</p>
            <p><strong>Status:</strong> <span class="status-badge status-${K.deliveryStatus.toLowerCase()}">${K.deliveryStatus}</span></p>
            <p><strong>Type:</strong> ${K.deliveryType}</p>
          </div>
        </div>

        <div style="margin-bottom: 20px;">
          <h3>Delivery Information</h3>
          <p><strong>Delivery Location:</strong> ${K.deliveryLocation}</p>
          <p><strong>Delivery Address:</strong> ${K.deliveryAddress}</p>
          <p><strong>Contact Person:</strong> ${K.contactPerson}</p>
          <p><strong>Sales Group:</strong> ${K.salesGroup}</p>
        </div>

        <div style="margin-bottom: 20px;">
          <h3>Transport Details</h3>
          <p><strong>Transport Details:</strong> ${K.transportDetails||"N/A"}</p>
          <p><strong>Vehicle Number:</strong> ${K.vehicleNumber||"N/A"}</p>
          <p><strong>Driver Name:</strong> ${K.driverName||"N/A"}</p>
          <p><strong>Driver Phone:</strong> ${K.driverPhone||"N/A"}</p>
        </div>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Ordered Qty</th>
              <th>Delivered Qty</th>
              <th>Pending Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Delivery Date</th>
              <th>Actual Delivery</th>
              <th>Note</th>
            </tr>
          </thead>
          <tbody>
            ${U}
          </tbody>
        </table>

        <div style="margin-top: 20px;">
          <h3>Summary</h3>
          <p><strong>Total Delivered Amount:</strong> ${K.total}</p>
          <p><strong>Remarks:</strong> ${K.remarks||"None"}</p>
        </div>
      </body>
      </html>
    `,F=window.open("","","width=800,height=600");F.document.write(J),F.document.close(),F.print()},q=async(K,U)=>{try{await Oe.patch(`/api/del/salesdeliveries/${K}/status`,{deliveryStatus:U,actualDeliveryDate:U==="Delivered"?new Date().toISOString().substring(0,10):void 0}),C(),alert(`Delivery status updated to ${U}`)}catch(J){console.error("Error updating status:",J),alert("Failed to update delivery status")}};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-4",children:[n.jsxs("div",{className:"my-auto",children:[n.jsx("h2",{className:"mb-1",children:"Sales Delivery Display"}),n.jsx("nav",{children:n.jsxs("ol",{className:"breadcrumb mb-0",children:[n.jsx("li",{className:"breadcrumb-item",children:n.jsx("a",{href:"/dashboard",children:n.jsx("i",{className:"ti ti-smart-home"})})}),n.jsx("li",{className:"breadcrumb-item",children:"Sales"}),n.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Deliveries"})]})})]}),n.jsx("div",{className:"d-flex",children:n.jsxs("button",{className:"btn btn-primary",onClick:C,children:[n.jsx("i",{className:"fas fa-sync me-1"}),"Refresh"]})})]}),n.jsx("div",{className:"card mb-4",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row g-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search delivery number, SO, customer...",value:c,onChange:K=>{d(K.target.value),w(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"From Date"}),n.jsx("input",{type:"date",className:"form-control",value:u,onChange:K=>{h(K.target.value),w(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"To Date"}),n.jsx("input",{type:"date",className:"form-control",value:f,onChange:K=>{p(K.target.value),w(1)}})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-select",value:x,onChange:K=>{g(K.target.value),w(1)},children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Delivered",children:"Delivered"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Type"}),n.jsxs("select",{className:"form-select",value:b,onChange:K=>{y(K.target.value),w(1)},children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"Full",children:"Full"}),n.jsx("option",{value:"Partial",children:"Partial"})]})]}),n.jsxs("div",{className:"col-md-1",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(""),y(""),w(1)},children:"Reset"})]})]})})}),s?n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})}),n.jsx("p",{className:"mt-2 text-muted",children:"Loading deliveries..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"",children:n.jsxs("table",{className:"table table-sm table-bordered",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Delivery Number"}),n.jsx("th",{children:"SO Reference"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Delivery Location"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Total Amount"}),n.jsx("th",{children:"Vehicle"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:A.length>0?A.map(K=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:K.deliveryNumber})}),n.jsx("td",{children:n.jsx("span",{className:"badge bg-primary",children:K.soNumber})}),n.jsx("td",{children:new Date(K.deliveryDate).toLocaleDateString()}),n.jsx("td",{children:K.customerName}),n.jsx("td",{children:K.deliveryLocation}),n.jsx("td",{children:n.jsx("span",{className:P(K.deliveryStatus),children:K.deliveryStatus})}),n.jsx("td",{children:n.jsx("span",{className:O(K.deliveryType),children:K.deliveryType})}),n.jsxs("td",{children:["",K.total]}),n.jsx("td",{children:K.vehicleNumber||"N/A"}),n.jsx("td",{children:n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Y(K),title:"Print Delivery",children:n.jsx("i",{className:"fas fa-print"})}),K.deliveryStatus!=="Delivered"&&K.deliveryStatus!=="Cancelled"&&n.jsxs("div",{className:"btn-group",role:"group",children:[n.jsx("button",{type:"button",className:"btn btn-success btn-sm dropdown-toggle","data-bs-toggle":"dropdown",title:"Update Status",children:n.jsx("i",{className:"fas fa-edit"})}),n.jsxs("ul",{className:"dropdown-menu",children:[K.deliveryStatus!=="In Transit"&&n.jsx("li",{children:n.jsxs("a",{className:"dropdown-item",href:"#",onClick:U=>{U.preventDefault(),q(K._id,"In Transit")},children:[n.jsx("i",{className:"fas fa-truck me-2"}),"Mark In Transit"]})}),n.jsx("li",{children:n.jsxs("a",{className:"dropdown-item",href:"#",onClick:U=>{U.preventDefault(),q(K._id,"Delivered")},children:[n.jsx("i",{className:"fas fa-check me-2"}),"Mark Delivered"]})}),n.jsx("li",{children:n.jsxs("a",{className:"dropdown-item text-danger",href:"#",onClick:U=>{U.preventDefault(),confirm("Are you sure you want to cancel this delivery?")&&q(K._id,"Cancelled")},children:[n.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]})})]})]})]})})]},K._id)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"10",className:"text-center py-4",children:[n.jsx("i",{className:"fas fa-truck fa-2x text-muted mb-2"}),n.jsx("p",{className:"text-muted mb-0",children:"No sales deliveries found"}),(c||u||f||x||b)&&n.jsx("small",{className:"text-muted",children:"Try adjusting your filters"})]})})})]})})})}),I>1&&n.jsx("nav",{"aria-label":"Sales Deliveries pagination",className:"mt-3",children:n.jsxs("ul",{className:"pagination justify-content-end",children:[n.jsx("li",{className:`page-item ${S===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>L(S-1),disabled:S===1,children:n.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const U=[],J=[];U.push(1);for(let Q=Math.max(2,S-2);Q<=Math.min(I-1,S+2);Q++)U.push(Q);I>1&&U.push(I);const F=[...new Set(U)].sort((Q,ie)=>Q-ie);let X;for(let Q of F)X&&(Q-X===2?J.push(X+1):Q-X!==1&&J.push("...")),J.push(Q),X=Q;return J.map((Q,ie)=>Q==="..."?n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ie}`):n.jsx("li",{className:`page-item ${S===Q?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>L(Q),children:Q})},Q))})(),n.jsx("li",{className:`page-item ${S===I?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>L(S+1),disabled:S===I,children:n.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}const O6e=()=>{const[e,t]=j.useState({}),[r,a]=j.useState(!1),[s,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState(null),[f,p]=j.useState({currentPage:1,itemsPerPage:5,totalPages:1}),[x,g]=j.useState({companyId:"",firstName:"",lastName:"",email:"",phone:"",roles:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),[b,y]=j.useState(0),[S,w]=j.useState(0),[k,C]=j.useState(null),[D,E]=j.useState(null),[A,I]=j.useState([]),[L,P]=j.useState(0);j.useEffect(()=>{K(),Y(),O()},[]);const O=async()=>{try{const z=await Oe.get("/api/departments");I(z.data)}catch(z){console.error("Error fetching departments:",z)}},Y=async()=>{try{const z=await Oe.get("/api/roles");if(Array.isArray(z.data))i(z.data);else{console.error("Unexpected roles format:",z.data);const se=q();i(se.map(Ne=>({_id:Ne,roleName:Ne})))}}catch(z){const se=q();i(se.map(Ne=>({_id:Ne,roleName:Ne}))),console.error("Error fetching roles:",z)}},q=()=>{const z=new Set;return o.forEach(se=>{Array.isArray(se.role)&&se.role.forEach(Ne=>{Ne&&z.add(Ne)})}),Array.from(z).sort()},K=async()=>{try{const z=localStorage.getItem("selectedCompanyId"),se=localStorage.getItem("financialYear"),Ne=await Oe.get("/api/faculties",{params:{companyId:z,financialYear:se}});l(Ne.data);const ue=Ne.data.reduce((oe,ye)=>{if(ye.employeeId){const je=ye.employeeId.match(/FAC-(\d+)$/);if(je){const Me=parseInt(je[1],10);return Me>oe?Me:oe}}return oe},0);P(ue)}catch(z){console.error("Error fetching faculties:",z)}},[U,J]=j.useState({isChecking:!1,exists:!1,message:""}),F=async z=>{if(!(!z||!/\S+@\S+\.\S+/.test(z))){J(se=>({...se,isChecking:!0}));try{const Ne=(await Oe.get(`/api/Faculty/check-email-exists?email=${z}`)).data.exists;J({isChecking:!1,exists:Ne,message:Ne?"This email is already registered":"Email is available"})}catch(se){console.error("Error checking email:",se),J({isChecking:!1,exists:!1,message:"Unable to verify email"})}}},X=j.useRef(null),Q=z=>{const se=z.target.files[0];if(se){C(se);const Ne=new FileReader;Ne.onloadend=()=>{E(Ne.result)},Ne.readAsDataURL(se)}},ie=z=>{const{name:se,type:Ne,value:ue,options:oe}=z.target;let ye=ue,je="";if(se==="phone"){let He=ue.replace(/\D/g,"");He.startsWith("91")&&He.length>10&&(He=He.slice(2)),/^\d{0,10}$/.test(He)?(He.length>10&&(He=He.slice(0,10)),g(et=>({...et,[se]:He})),He.length===0?je="Phone number is required.":He.length===1&&!/^[6-9]$/.test(He)?je="Phone number must start with 6, 7, 8, or 9.":He.length>0&&He.length<10?je="Phone number must be exactly 10 digits.":He.length===10&&!/^[6-9]\d{9}$/.test(He)&&(je="Invalid phone number format. It must start with 6, 7, 8, or 9."),t(et=>({...et,[se]:je}))):t(et=>({...et,[se]:"Only numbers are allowed."}));return}(se==="firstName"||se==="lastName")&&(/^[A-Za-z\s]*$/.test(ue)||(je="Only alphabets are allowed.")),se==="email"&&ue&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ue)&&(je="Enter a valid email."),t(He=>({...He,[se]:je})),Ne==="select-multiple"&&(ye=Array.from(oe).filter(He=>He.selected).map(He=>He.value));let Me={...x,[se]:ye};if(g(Me),se==="email"&&(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{F(ye)},500)),se==="firstName"&&ue&&!c){const He=L+1,et=`FAC-${String(He).padStart(3,"0")}`;g(ft=>({...ft,employeeId:et}))}},[M,V]=j.useState({searchQuery:"",roleName:""}),W=z=>{const{name:se,value:Ne}=z.target;V(ue=>({...ue,[se]:Ne}))},ee=()=>o.filter(z=>{if(M.roleName&&!(Array.isArray(z.roles)?z.roles.map(Ne=>typeof Ne=="object"?Ne.roleName:Ne):[]).includes(M.roleName))return!1;if(M.searchQuery){const se=M.searchQuery.toLowerCase();return z.firstName?.toLowerCase().includes(se)||z.lastName?.toLowerCase().includes(se)||z.email?.toLowerCase().includes(se)||z.employeeId?.toLowerCase().includes(se)||z.department?.toLowerCase().includes(se)}return!0}),re=async z=>{z.preventDefault();const se=Object.values(e).some(ft=>ft);if(!x.roles||x.roles.length===0){alert("Please select at least one role.");return}const Ne=new Date(x.dob),ue=new Date(x.joinDate);let oe=ue.getFullYear()-Ne.getFullYear();const ye=ue.getMonth()-Ne.getMonth(),je=ue.getDate()-Ne.getDate();if((ye<0||ye===0&&je<0)&&oe--,oe<19){alert("Faculty must be at least 19 years old on the joining date.");return}if(se){alert("Please fix the validation errors before submitting.");return}let Me=x.phone;Me.startsWith("+91")||(Me="+91"+Me);const He=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const et={companyId:He,firstName:x.firstName,lastName:x.lastName,email:x.email,phone:Me,department:x.department,qualification:x.qualification,otherQualification:x.otherQualification,experience:x.experience,dob:x.dob,joinDate:x.joinDate,address:x.address,gender:x.gender,employmentType:x.employmentType,status:x.status,salary:x.salary,employeeId:x.employeeId,roles:x.roles};x.password&&x.password.trim()!==""&&(et.password=x.password),console.log("submitData",et);try{let ft;c?ft=await Oe.put(`/api/faculties/${c}`,et,{headers:{"Content-Type":"application/json"}}):ft=await Oe.post("/api/faculties",et,{headers:{"Content-Type":"application/json"}}),alert(ft.data.message||"Faculty saved successfully!"),ne(),K()}catch(ft){alert(ft.response?.data?.message||"An error occurred while saving faculty.")}},ne=()=>{g({firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),C(null),E(null),J({}),d(null)},ce=z=>{console.log("Editing faculty:",z);let se=[];Array.isArray(z.roles)&&(typeof z.roles[0]=="string"?se=z.roles.map(ye=>{const je=s.find(Me=>Me.roleName===ye);return je?je._id:null}).filter(ye=>ye!==null):typeof z.roles[0]=="object"?se=z.roles.map(ye=>typeof ye=="string"?ye:ye._id||ye):se=z.roles);const Ne=ye=>{if(!ye)return{years:0,months:0};const je=ye.match(/(\d+)\s*years?/i),Me=ye.match(/(\d+)\s*months?/i);return{years:je?parseInt(je[1],10):0,months:Me?parseInt(Me[1],10):0}},ue={...z,roles:se,password:""},oe=Ne(z.experience);if(y(oe.years),w(oe.months),g(ue),d(z._id),z.profilePhoto){const je=`/${z.profilePhoto.startsWith("/")?z.profilePhoto.substring(1):z.profilePhoto}`;E(je)}else E(null)},ae=async z=>{if(window.confirm("Are you sure you want to delete this faculty?"))try{await Oe.delete(`/api/faculties/${z}`),alert("Faculty deleted successfully"),K()}catch(se){alert(se.response?.data?.message||"Error deleting faculty")}},Z=()=>{const z=ee(),se=Math.max(1,Math.ceil(z.length/f.itemsPerPage));f.totalPages!==se&&p(oe=>({...oe,totalPages:se}));const Ne=(f.currentPage-1)*f.itemsPerPage,ue=Ne+f.itemsPerPage;return z.slice(Ne,ue)},de=z=>{z<1||z>f.totalPages||p(se=>({...se,currentPage:z}))};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"container",children:n.jsx("div",{className:"d-flex justify-content-between align-items-center",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsx("div",{className:"row",children:n.jsx("div",{className:"",children:n.jsx("h3",{children:"Staff Management"})})})})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-4",children:n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, employee ID...",name:"searchQuery",value:M.searchQuery,onChange:W})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("select",{className:"form-select",name:"roleName",value:M.roleName,onChange:W,children:[n.jsx("option",{value:"",children:"All Roles"}),q().map(z=>n.jsx("option",{value:z,children:z},z))]})}),n.jsx("div",{className:"col-md-2",children:n.jsx("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:ne,children:"Add Staff"})})]}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover table-center mb-0 table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Experience"}),n.jsx("th",{children:"Join Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Z().length>0?Z().map(z=>n.jsxs("tr",{children:[n.jsx("td",{children:z.employeeId}),n.jsxs("td",{children:[z.firstName," ",z.lastName]}),n.jsx("td",{children:z.email}),n.jsx("td",{children:z.phone}),n.jsx("td",{children:z.department}),n.jsxs("td",{children:[z.experience," years"]}),n.jsx("td",{children:z.joinDate}),n.jsx("td",{children:n.jsxs("div",{className:"hstack gap-2 fs-15",children:[n.jsx("button",{className:"btn btn-icon btn-sm btn-soft-warning rounded-pill","data-bs-toggle":"modal","data-bs-target":"#viewModal",onClick:()=>h(z),children:n.jsx("i",{className:"feather-eye"})}),n.jsx("button",{onClick:()=>ce(z),className:"btn btn-icon btn-sm btn-soft-info rounded-pill","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",children:n.jsx("i",{className:"feather-edit"})}),n.jsx("button",{onClick:()=>ae(z._id),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",children:n.jsx("i",{className:"feather-trash"})})]})})]},z._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"text-center",children:"No faculties found matching your criteria"})})})]})}),n.jsx("div",{className:"d-flex justify-content-left mt-3",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination",children:[n.jsx("li",{className:`page-item ${f.currentPage===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>de(f.currentPage-1),children:n.jsx("i",{className:"fas fa-angle-double-left"})})}),[...Array(f.totalPages)].map((z,se)=>{const Ne=se+1;return Ne===1||Ne===f.totalPages||Ne>=f.currentPage-1&&Ne<=f.currentPage+1?n.jsx("li",{className:`page-item ${f.currentPage===Ne?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>de(Ne),children:Ne})},se):null}),n.jsx("li",{className:`page-item ${f.currentPage===f.totalPages?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>de(f.currentPage+1),children:n.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]}),n.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[n.jsxs("div",{className:"offcanvas-header",children:[n.jsx("h5",{className:"modal-title",children:c?"Edit Staff":"Add Staff"}),n.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"offcanvas","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsx("div",{className:"offcanvas-body",children:n.jsxs("form",{onSubmit:re,children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{children:"Profile Photo"}),n.jsxs("div",{className:"d-flex align-items-center gap-2",children:[n.jsx("input",{type:"file",name:"profilePhoto",accept:"image/*",onChange:Q,className:"form-control",style:{maxWidth:"300px"}}),D&&n.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>{C(null),E(null),g(z=>({...z,profilePhoto:""}))},children:"Remove"})]}),D&&n.jsx("div",{className:"mt-2",children:n.jsx("img",{src:D,alt:"Profile Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover"},className:"rounded"})})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"First Name"}),n.jsx("input",{type:"text",className:"form-control",name:"firstName",placeholder:"First Name",value:x.firstName,onChange:ie,required:!0}),e.firstName&&n.jsx("p",{style:{color:"red"},children:e.firstName})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Last Name"}),n.jsx("input",{type:"text",className:"form-control",name:"lastName",placeholder:"Last Name",value:x.lastName,onChange:ie,required:!0}),e.lastName&&n.jsx("p",{style:{color:"red"},children:e.lastName})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",className:"form-control",value:x.email,onChange:ie,placeholder:"Email",required:!0}),U.isChecking&&n.jsx("small",{className:"text-muted",children:"Checking email..."}),U.message&&!U.isChecking&&n.jsx("small",{className:U.exists?"text-danger":"text-success",children:U.message}),e.email&&n.jsx("p",{style:{color:"red"},children:e.email})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Phone Number"}),n.jsx("input",{type:"text",name:"phone",placeholder:"Phone",className:"form-control",value:x.phone,onChange:ie,required:!0}),e.phone&&n.jsx("p",{style:{color:"red"},children:e.phone})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Department"}),n.jsxs("select",{name:"department",value:x.department,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"",children:"--Select--"}),A.length>0?A.map(z=>n.jsx("option",{value:z.departmentName,children:z.departmentName},z._id)):n.jsx("option",{disabled:!0,children:"Loading departments..."})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Employee ID"}),n.jsx("input",{type:"text",name:"employeeId",placeholder:"Employee ID",value:x.employeeId,onChange:ie,readOnly:!0,className:"form-control"}),n.jsx("small",{className:"text-muted",children:"Auto-generated"})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"col-form-label",children:["Roles ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("div",{className:"checkbox-group",children:s.length>0?s.map((z,se)=>{const Ne=z.roleName,ue=z._id;return Ne?.toLowerCase()==="student"?null:n.jsxs("div",{className:"form-check",style:{display:"flex",gap:"5px",alignItems:"center",marginTop:"9px"},children:[n.jsx("input",{type:"checkbox",className:"form-check-input",id:`role-${se}`,value:ue,checked:Array.isArray(x.roles)&&x.roles.includes(ue),onChange:oe=>{const ye=oe.target.checked,je=ue;g(Me=>{const He=Array.isArray(Me.roles)?Me.roles:[];let et;return ye?et=[...He,je]:et=He.filter(ft=>ft!==je),console.log("Updated role IDs:",et),{...Me,roles:et}})}}),n.jsx("label",{className:"form-check-label mt-1",htmlFor:`role-${se}`,children:Ne})]},ue)}):n.jsx("p",{children:"No roles found."})}),(!x.roles||x.roles.length===0)&&n.jsx("small",{className:"text-danger",children:"Please select at least one role"})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"col-form-label",children:["Qualification ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsxs("select",{name:"qualification",className:"form-control",value:x.qualification,onChange:ie,required:!0,children:[n.jsx("option",{value:"",children:"Select Qualification"}),n.jsx("option",{value:"BE",children:"BE"}),n.jsx("option",{value:"BTech",children:"BTech"}),n.jsx("option",{value:"MCA",children:"MCA"}),n.jsx("option",{value:"ME",children:"ME"}),n.jsx("option",{value:"MTech",children:"MTech"}),n.jsx("option",{value:"Diploma",children:"Diploma"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),x.qualification==="Other"&&n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"col-form-label",children:["Other Qualification ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx("input",{type:"text",name:"otherQualification",className:"form-control",value:x.otherQualification||"",onChange:ie,required:!0})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Experience"}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("input",{type:"number",name:"experienceYear",placeholder:"Years",value:b,onChange:z=>{const se=parseInt(z.target.value)||0;if(se>=0&&se<=50){y(se);const Ne=`${se} years ${S} months`;g(ue=>({...ue,experience:Ne}))}},min:"0",max:"50",className:"form-control"}),n.jsx("small",{className:"text-muted",children:"Years"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("input",{type:"number",name:"experienceMonth",placeholder:"Months",value:S,onChange:z=>{const se=parseInt(z.target.value)||0;if(se>=0&&se<=11){w(se);const Ne=`${b} years ${se} months`;g(ue=>({...ue,experience:Ne}))}},min:"0",max:"11",className:"form-control"}),n.jsx("small",{className:"text-muted",children:"Months"})]})]})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Date of Birth"}),n.jsx("input",{type:"date",name:"dob",value:x.dob,onChange:ie,required:!0,className:"form-control"})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Joining Date"}),n.jsx("input",{type:"date",className:"form-control",name:"joinDate",value:x.joinDate,onChange:ie,required:!0})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Gender"}),n.jsxs("select",{name:"gender",value:x.gender,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Gender"}),n.jsx("option",{value:"Male",children:"Male"}),n.jsx("option",{value:"Female",children:"Female"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Address"}),n.jsx("input",{type:"text",className:"form-control",name:"address",placeholder:"Address",value:x.address,onChange:ie,required:!0})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{htmlFor:"employmentType",className:"form-label",children:"Employment Type"}),n.jsxs("select",{id:"employmentType",name:"employmentType",value:x.employmentType,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"Full-Time",children:"Full-Time"}),n.jsx("option",{value:"Part-Time",children:"Part-Time"})]})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),n.jsxs("select",{id:"status",name:"status",value:x.status,onChange:ie,required:!0,className:"form-select",children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"col-form-label",children:"Salary"}),n.jsx("input",{type:"text",className:"form-control",name:"salary",placeholder:"Salary per month",value:x.salary,onChange:ie,required:!0})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsxs("label",{className:"col-form-label",children:["Password ",c?"(Leave blank to keep current)":""]}),n.jsx("input",{type:"password",name:"password",placeholder:c?"Leave blank to keep current":"Password",value:x.password,onChange:ie,required:!c,className:"form-control"})]})]}),n.jsxs("div",{className:"row mt-4",children:[n.jsx("div",{className:"col-6",children:n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Submit"})}),n.jsx("div",{className:"col-6 text-end",children:n.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"offcanvas",children:"Cancel"})})]})]})})]})]})})})]})})}),n.jsx("div",{className:"modal fade",id:"viewModal",role:"dialog",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",children:"Faculty Details"}),n.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsx("div",{className:"modal-body",children:u?n.jsx("table",{className:"table table-bordered",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("td",{children:u.employeeId})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsxs("td",{children:[u.firstName," ",u.lastName]})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Email"}),n.jsx("td",{children:u.email})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Phone"}),n.jsx("td",{children:u.phone})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Department"}),n.jsx("td",{children:u.department})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Qualification"}),n.jsx("td",{children:u.qualification})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Experience"}),n.jsxs("td",{children:[u.experience," years"]})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Role"}),n.jsx("td",{children:Array.isArray(u.role)?u.role.join(", "):u.role})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Employment Type"}),n.jsx("td",{children:u.employmentType})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Status"}),n.jsx("td",{children:n.jsx("span",{className:`badge ${u.status==="Active"?"bg-success":"bg-danger"}`,children:u.status})})]})]})}):n.jsx("h6",{children:"No faculty selected"})})]})})}),n.jsx("style",{jsx:!0,children:`
        .checkbox-group {
          display: flex;
          gap: 10px;
          padding: 10px;
          flex-wrap: wrap;
          max-height: 150px;
          overflow-y: auto;
          border: 1px solid #ced4da;
          border-radius: 0.25rem;
          padding: 0.5rem;
        }
        .form-check {
          margin: 5px 0;
        }
        .form-select[multiple] option {
          padding: 8px 12px;
          margin: 2px 0;
        }
        .form-select[multiple] option:checked {
          background-color: #0d6efd;
          color: white;
        }
        .badge {
          font-size: 0.75em;
          padding: 0.25em 0.5em;
        }
      `})]})},M6e=()=>{const[e,t]=j.useState({departmentName:""}),[r,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(1),c=5;j.useEffect(()=>{d()},[]);const d=async()=>{try{const w=await Oe.get("/api/departments");a(w.data)}catch(w){console.error("Error fetching departments:",w)}},u=w=>{const{name:k,value:C}=w.target;t(D=>({...D,[k]:C}))},h=async w=>{w.preventDefault();try{s?await Oe.put(`/api/departments/${s}`,e):await Oe.post("/api/departments",e),t({departmentName:""}),i(null),d()}catch(k){console.error(k)}},f=w=>{t({departmentName:w.departmentName}),i(w._id)},p=async w=>{if(window.confirm("Are you sure you want to delete this department?"))try{await Oe.delete(`/api/departments/${w}`),d()}catch(k){console.error(k)}},x=o*c,g=x-c,b=r.slice(g,x),y=Math.ceil(r.length/c),S=w=>l(w);return n.jsxs("div",{className:"container mt-4",children:[n.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[n.jsx("h3",{className:"text-primary",children:"Department Master"}),n.jsx("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>{t({departmentName:""}),i(null)},children:"+ Add Department"})]}),n.jsx("div",{className:"card shadow",children:n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:r.length>0?n.jsxs("table",{className:"table table-bordered table-striped align-middle",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Department ID"}),n.jsx("th",{children:"Department Name"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:b.map(w=>n.jsxs("tr",{children:[n.jsx("td",{children:w.dep_id||w._id.slice(-5)}),n.jsx("td",{children:w.departmentName}),n.jsxs("td",{children:[n.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>f(w),children:[n.jsx("i",{className:"bi bi-pencil-square"})," Edit"]}),n.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>p(w._id),children:[n.jsx("i",{className:"bi bi-trash"})," Delete"]})]})]},w._id))})]}):n.jsx("p",{className:"text-muted",children:"No departments added yet."})}),y>1&&n.jsx("nav",{className:"mt-4",children:n.jsxs("ul",{className:"pagination justify-content-left",children:[n.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>S(o-1),children:""})}),Array.from({length:y},(w,k)=>n.jsx("li",{className:`page-item ${o===k+1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>S(k+1),children:k+1})},k)),n.jsx("li",{className:`page-item ${o===y?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>S(o+1),children:""})})]})})]})}),n.jsx("div",{className:"modal fade",id:"department-modal",tabIndex:"-1","aria-labelledby":"departmentModalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered modal-sm",children:n.jsx("div",{className:"modal-content",children:n.jsxs("form",{onSubmit:h,children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h5",{className:"modal-title",id:"departmentModalLabel",children:s?"Edit Department":"Add Department"}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{t({departmentName:""}),i(null)}})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Department Name"}),n.jsx("input",{type:"text",name:"departmentName",className:"form-control",value:e.departmentName,onChange:u,placeholder:"Enter department name",required:!0})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{type:"submit",className:"btn btn-primary w-100","data-bs-dismiss":"modal",children:s?"Update":"Save"})})]})})})})]})},R6e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState([]),[c,d]=j.useState(!1),[u,h]=j.useState(null),f=j.useRef();j.useEffect(()=>{p(),x()},[]);const p=()=>{Oe.get("/api/departments").then(C=>t(C.data)).catch(C=>console.error("Error fetching departments",C))},x=()=>{Oe.get("/api/designations").then(C=>l(C.data)).catch(C=>console.error("Error fetching designations",C))},g=()=>{d(!1),a(""),i(""),new window.bootstrap.Modal(f.current).show()},b=()=>{window.bootstrap.Modal.getInstance(f.current).hide()},y=C=>{C.preventDefault();const D={designName:r,departmentId:s};(c?Oe.put(`/api/designations/${u}`,D):Oe.post("/api/designations",D)).then(()=>{x(),b(),k()}).catch(A=>console.error("Error saving designation",A))},S=C=>{d(!0),h(C._id),a(C.designName),i(C.departmentId?._id||""),new window.bootstrap.Modal(f.current).show()},w=C=>{window.confirm("Are you sure you want to delete this designation?")&&Oe.delete(`/api/designations/${C}`).then(()=>x()).catch(D=>console.error("Error deleting designation",D))},k=()=>{a(""),i(""),d(!1),h(null)};return n.jsxs("div",{className:"container mt-3",children:[n.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[n.jsx("h4",{className:"mb-4 text-primary",children:"Material Master"}),n.jsx("div",{className:"mb-3",children:n.jsx("button",{className:"btn btn-primary",onClick:g,children:"Add Designation"})})]}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h5",{className:"card-title mb-3",children:"All Designations"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-hover",children:[n.jsx("thead",{className:"table-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Designation"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Actions"})]})}),n.jsxs("tbody",{children:[o.map((C,D)=>n.jsxs("tr",{children:[n.jsx("td",{children:D+1}),n.jsx("td",{children:C.designName}),n.jsx("td",{children:C.departmentId?.departmentName||"N/A"}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>S(C),children:"Edit"}),n.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>w(C._id),children:"Delete"})]})]},C._id)),o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"No designations found"})})]})]})})]}),n.jsx("div",{className:"modal fade",ref:f,tabIndex:"-1","aria-labelledby":"designationModalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",children:n.jsx("div",{className:"modal-content",children:n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h5",{className:"modal-title",id:"designationModalLabel",children:[c?"Edit":"Add"," Designation"]}),n.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Designation Name"}),n.jsx("input",{type:"text",className:"form-control",value:r,onChange:C=>a(C.target.value),required:!0})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Department"}),n.jsxs("select",{className:"form-select",value:s,onChange:C=>i(C.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Department --"}),e.map(C=>n.jsx("option",{value:C._id,children:C.departmentName},C._id))]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Add"}),n.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:k,children:"Cancel"})]})]})})})})]})},F6e=()=>{const[e,t]=j.useState({employeeId:"",name:"",leaveType:"",fromDate:"",toDate:"",reason:""}),[r,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(!1);j.useEffect(()=>{const f=localStorage.getItem("user");if(f)try{const p=JSON.parse(f);console.log("User data from localStorage:",p),t(x=>({...x,employeeId:p.employeeId||"",name:p.username}))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]);const c=async f=>await(await fetch("/api/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json(),d=async f=>await(await fetch(`/api/leave?employeeId=${f}`)).json(),u=f=>{t({...e,[f.target.name]:f.target.value})},h=async()=>{if(!e.leaveType||!e.fromDate||!e.toDate||!e.reason){alert("Please fill in all required fields");return}if(new Date(e.fromDate)>new Date(e.toDate)){alert("From date cannot be later than to date");return}try{const f=await c(e);f.success&&(alert(f.message),a(p=>[...p,f.data]),t(p=>({...p,leaveType:"",fromDate:"",toDate:"",reason:""})),i(!1))}catch(f){alert("Failed to submit leave request"),console.error("Submission error:",f)}};return j.useEffect(()=>{const f=localStorage.getItem("user");if(f)try{const p=JSON.parse(f);console.log("User data from localStorage:",p),p.employeeId&&d(p.employeeId).then(x=>a(x)).catch(x=>console.error("Error fetching leave requests:",x))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]),j.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[s]),n.jsxs("div",{className:"d-flex justify-content-between align-items-center",style:{backgroundColor:"#f8f9fa"},children:[n.jsxs("div",{className:"content container-fluid",style:{padding:"20px",margin:"0 auto"},children:[n.jsx("div",{className:"page-header",children:n.jsxs("div",{className:"row align-items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"col",children:n.jsx("h3",{className:"page-title",style:{color:"#333",fontSize:"24px",margin:0},children:"Employee Leave Request"})}),n.jsx("div",{className:"col-auto text-end",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[n.jsx("span",{style:{marginRight:"5px"},children:"+"})," Apply for Leave"]})})]})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"card",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[n.jsx("h4",{className:"card-title",style:{marginBottom:"20px",color:"#333"},children:"My Leave Requests"}),n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered",style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Leave Type"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"From Date"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"To Date"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Reason"}),n.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Status"})]})}),n.jsx("tbody",{children:r.length>0?r.map((f,p)=>n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:f.leaveType}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(f.fromDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(f.toDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:f.reason}),n.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:n.jsx("span",{className:`badge ${f.status==="Approved"?"bg-success":f.status==="Rejected"?"bg-danger":"bg-warning"}`,style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"white",backgroundColor:f.status==="Approved"?"#28a745":f.status==="Rejected"?"#dc3545":"#ffc107"},children:f.status})})]},p)):n.jsx("tr",{children:n.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#666",border:"1px solid #dee2e6"},children:"No leave requests found"})})})]})})]})})})})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"modal fade show",style:{display:"block",zIndex:1050,position:"fixed",top:0,left:0,width:"100%",height:"100%",outline:0,overflow:"auto"},onClick:f=>{f.target===f.currentTarget&&i(!1)},children:n.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:f=>f.stopPropagation(),style:{margin:"1.75rem auto",maxWidth:"500px",pointerEvents:"all"},children:n.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[n.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid #e9ecef",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h5",{className:"modal-title",style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Apply for Leave"}),n.jsx("button",{type:"button",className:"close",onClick:()=>i(!1),style:{cursor:"pointer",background:"none",border:"none",fontSize:"24px",padding:0,lineHeight:1},children:n.jsx("span",{children:""})})]}),n.jsx("div",{className:"modal-body",style:{padding:"1rem"},children:n.jsxs("div",{children:[n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Employee ID"}),n.jsx("input",{type:"text",name:"employeeId",value:e.employeeId,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Name"}),n.jsx("input",{type:"text",name:"name",value:e.name,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"3rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Leave Type"}),n.jsxs("select",{name:"leaveType",value:e.leaveType,onChange:u,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"},children:[n.jsx("option",{value:"",children:"Select Leave Type"}),n.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),n.jsx("option",{value:"Casual Leave",children:"Casual Leave"}),n.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),n.jsx("option",{value:"Emergency Leave",children:"Emergency Leave"})]})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"From Date"}),n.jsx("input",{type:"date",name:"fromDate",value:e.fromDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"To Date"}),n.jsx("input",{type:"date",name:"toDate",value:e.toDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),n.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Reason"}),n.jsx("textarea",{name:"reason",value:e.reason,onChange:u,className:"form-control",rows:"4",required:!0,placeholder:"Please provide the reason for your leave request...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",resize:"vertical"}})]}),n.jsxs("div",{className:"submit-section",style:{marginTop:"20px"},children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),style:{width:"100%",marginBottom:"10px",backgroundColor:"#6c757d",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:h,className:"btn btn-danger",disabled:o,style:{width:"100%",backgroundColor:o?"#ccc":"#dc3545",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:o?"not-allowed":"pointer"},children:o?"Submitting...":"Submit Request"})]})]})})]})})}),n.jsx("div",{className:"modal-backdrop fade show",style:{position:"fixed",top:0,left:0,zIndex:1040,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},onClick:()=>i(!1)})]})]})},WX=6048e5,L6e=864e5,SC=6e4,CC=36e5,B6e=1e3,c9=Symbol.for("constructDateFrom");function Nn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&c9 in e?e[c9](t):e instanceof Date?new e.constructor(t):new Date(t)}function Vr(e,t){return Nn(t||e,e)}function Bd(e,t,r){const a=Vr(e,r?.in);return isNaN(t)?Nn(r?.in||e,NaN):(t&&a.setDate(a.getDate()+t),a)}function $d(e,t,r){const a=Vr(e,r?.in);if(isNaN(t))return Nn(e,NaN);if(!t)return a;const s=a.getDate(),i=Nn(e,a.getTime());i.setMonth(a.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(a.setFullYear(i.getFullYear(),i.getMonth(),s),a)}function GX(e,t,r){return Nn(e,+Vr(e)+t)}function U6e(e,t,r){return GX(e,t*CC)}let $6e={};function lv(){return $6e}function ff(e,t){const r=lv(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Vr(e,t?.in),i=s.getDay(),o=(i<a?7:0)+i-a;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function tg(e,t){return ff(e,{...t,weekStartsOn:1})}function YX(e,t){const r=Vr(e,t?.in),a=r.getFullYear(),s=Nn(r,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);const i=tg(s),o=Nn(r,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=tg(o);return r.getTime()>=i.getTime()?a+1:r.getTime()>=l.getTime()?a:a-1}function H2(e){const t=Vr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Tf(e,...t){const r=Nn.bind(null,t.find(a=>typeof a=="object"));return t.map(r)}function qx(e,t){const r=Vr(e,t?.in);return r.setHours(0,0,0,0),r}function rg(e,t,r){const[a,s]=Tf(r?.in,e,t),i=qx(a),o=qx(s),l=+i-H2(i),c=+o-H2(o);return Math.round((l-c)/L6e)}function V6e(e,t){const r=YX(e,t),a=Nn(e,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),tg(a)}function U3(e,t,r){const a=Vr(e,r?.in);return a.setTime(a.getTime()+t*SC),a}function bP(e,t,r){return $d(e,t*3,r)}function q6e(e,t,r){return GX(e,t*1e3)}function W2(e,t,r){return Bd(e,t*7,r)}function tf(e,t,r){return $d(e,t*12,r)}function d9(e,t){let r,a=t?.in;return e.forEach(s=>{!a&&typeof s=="object"&&(a=Nn.bind(null,s));const i=Vr(s,a);(!r||r<i||isNaN(+i))&&(r=i)}),Nn(a,r||NaN)}function u9(e,t){let r,a=t?.in;return e.forEach(s=>{!a&&typeof s=="object"&&(a=Nn.bind(null,s));const i=Vr(s,a);(!r||r>i||isNaN(+i))&&(r=i)}),Nn(a,r||NaN)}function z6e(e,t,r){const[a,s]=Tf(r?.in,e,t);return+qx(a)==+qx(s)}function rf(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function G2(e){return!(!rf(e)&&typeof e!="number"||isNaN(+Vr(e)))}function Y2(e,t,r){const[a,s]=Tf(r?.in,e,t),i=a.getFullYear()-s.getFullYear(),o=a.getMonth()-s.getMonth();return i*12+o}function Cx(e,t){const r=Vr(e,t?.in);return Math.trunc(r.getMonth()/3)+1}function K2(e,t,r){const[a,s]=Tf(r?.in,e,t),i=a.getFullYear()-s.getFullYear(),o=Cx(a)-Cx(s);return i*4+o}function X2(e,t,r){const[a,s]=Tf(r?.in,e,t);return a.getFullYear()-s.getFullYear()}function H6e(e,t,r){const[a,s]=Tf(r?.in,e,t),i=h9(a,s),o=Math.abs(rg(a,s));a.setDate(a.getDate()-i*o);const l=+(h9(a,s)===-i),c=i*(o-l);return c===0?0:c}function h9(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function KX(e,t){const r=Vr(e,t?.in);return r.setHours(23,59,59,999),r}function XX(e,t){const r=Vr(e,t?.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function $3(e,t){const r=Vr(e,t?.in),a=r.getMonth(),s=a-a%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function QX(e,t){const r=Vr(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function JX(e,t){const r=Vr(e,t?.in),a=r.getFullYear();return r.setFullYear(a+1,0,0),r.setHours(23,59,59,999),r}function kC(e,t){const r=Vr(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function W6e(e,t){const r=lv(),a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Vr(e,t?.in),i=s.getDay(),o=(i<a?-7:0)+6-(i-a);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const G6e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Y6e=(e,t,r)=>{let a;const s=G6e[e];return typeof s=="string"?a=s:t===1?a=s.one:a=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function DD(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const K6e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},X6e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Q6e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J6e={date:DD({formats:K6e,defaultWidth:"full"}),time:DD({formats:X6e,defaultWidth:"full"}),dateTime:DD({formats:Q6e,defaultWidth:"full"})},Z6e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},e8e=(e,t,r,a)=>Z6e[e];function Lb(e){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let s;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const t8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},a8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},i8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o8e=(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},l8e={ordinalNumber:o8e,era:Lb({values:t8e,defaultWidth:"wide"}),quarter:Lb({values:r8e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Lb({values:a8e,defaultWidth:"wide"}),day:Lb({values:n8e,defaultWidth:"wide"}),dayPeriod:Lb({values:s8e,defaultWidth:"wide",formattingValues:i8e,defaultFormattingWidth:"wide"})};function Bb(e){return(t,r={})=>{const a=r.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?d8e(l,h=>h.test(o)):c8e(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function c8e(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function d8e(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function u8e(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const s=a[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const h8e=/^(\d+)(th|st|nd|rd)?/i,f8e=/\d+/i,m8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},p8e={any:[/^b/i,/^(a|c)/i]},x8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},v8e={any:[/1/i,/2/i,/3/i,/4/i]},g8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},b8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},y8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},j8e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},N8e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},w8e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},S8e={ordinalNumber:u8e({matchPattern:h8e,parsePattern:f8e,valueCallback:e=>parseInt(e,10)}),era:Bb({matchPatterns:m8e,defaultMatchWidth:"wide",parsePatterns:p8e,defaultParseWidth:"any"}),quarter:Bb({matchPatterns:x8e,defaultMatchWidth:"wide",parsePatterns:v8e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Bb({matchPatterns:g8e,defaultMatchWidth:"wide",parsePatterns:b8e,defaultParseWidth:"any"}),day:Bb({matchPatterns:y8e,defaultMatchWidth:"wide",parsePatterns:j8e,defaultParseWidth:"any"}),dayPeriod:Bb({matchPatterns:N8e,defaultMatchWidth:"any",parsePatterns:w8e,defaultParseWidth:"any"})},ZX={code:"en-US",formatDistance:Y6e,formatLong:J6e,formatRelative:e8e,localize:l8e,match:S8e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function C8e(e,t){const r=Vr(e,t?.in);return rg(r,kC(r))+1}function yP(e,t){const r=Vr(e,t?.in),a=+tg(r)-+V6e(r);return Math.round(a/WX)+1}function jP(e,t){const r=Vr(e,t?.in),a=r.getFullYear(),s=lv(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Nn(t?.in||e,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=ff(o,t),c=Nn(t?.in||e,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=ff(c,t);return+r>=+l?a+1:+r>=+d?a:a-1}function k8e(e,t){const r=lv(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=jP(e,t),i=Nn(t?.in||e,0);return i.setFullYear(s,0,a),i.setHours(0,0,0,0),ff(i,t)}function eQ(e,t){const r=Vr(e,t?.in),a=+ff(r,t)-+k8e(r,t);return Math.round(a/WX)+1}function gn(e,t){const r=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return r+a}const Sm={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return gn(t==="yy"?a%100:a,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):gn(r+1,2)},d(e,t){return gn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return gn(e.getHours()%12||12,t.length)},H(e,t){return gn(e.getHours(),t.length)},m(e,t){return gn(e.getMinutes(),t.length)},s(e,t){return gn(e.getSeconds(),t.length)},S(e,t){const r=t.length,a=e.getMilliseconds(),s=Math.trunc(a*Math.pow(10,r-3));return gn(s,t.length)}},Jv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},f9={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const a=e.getFullYear(),s=a>0?a:1-a;return r.ordinalNumber(s,{unit:"year"})}return Sm.y(e,t)},Y:function(e,t,r,a){const s=jP(e,a),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return gn(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):gn(i,t.length)},R:function(e,t){const r=YX(e);return gn(r,t.length)},u:function(e,t){const r=e.getFullYear();return gn(r,t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return gn(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return gn(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return Sm.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return gn(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const s=eQ(e,a);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):gn(s,t.length)},I:function(e,t,r){const a=yP(e);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):gn(a,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Sm.d(e,t)},D:function(e,t,r){const a=C8e(e);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):gn(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const s=e.getDay(),i=(s-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return gn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const s=e.getDay(),i=(s-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return gn(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),s=a===0?7:a;switch(t){case"i":return String(s);case"ii":return gn(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let s;switch(a===12?s=Jv.noon:a===0?s=Jv.midnight:s=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let s;switch(a>=17?s=Jv.evening:a>=12?s=Jv.afternoon:a>=4?s=Jv.morning:s=Jv.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Sm.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Sm.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):gn(a,t.length)},k:function(e,t,r){let a=e.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):gn(a,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Sm.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Sm.s(e,t)},S:function(e,t){return Sm.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return p9(a);case"XXXX":case"XX":return Kp(a);case"XXXXX":case"XXX":default:return Kp(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return p9(a);case"xxxx":case"xx":return Kp(a);case"xxxxx":case"xxx":default:return Kp(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m9(a,":");case"OOOO":default:return"GMT"+Kp(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m9(a,":");case"zzzz":default:return"GMT"+Kp(a,":")}},t:function(e,t,r){const a=Math.trunc(+e/1e3);return gn(a,t.length)},T:function(e,t,r){return gn(+e,t.length)}};function m9(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),s=Math.trunc(a/60),i=a%60;return i===0?r+String(s):r+String(s)+t+gn(i,2)}function p9(e,t){return e%60===0?(e>0?"-":"+")+gn(Math.abs(e)/60,2):Kp(e,t)}function Kp(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),s=gn(Math.trunc(a/60),2),i=gn(a%60,2);return r+s+t+i}const x9=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},tQ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},_8e=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],s=r[2];if(!s)return x9(e,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",x9(a,t)).replace("{{time}}",tQ(s,t))},V3={p:tQ,P:_8e},E8e=/^D+$/,D8e=/^Y+$/,A8e=["D","DD","YY","YYYY"];function T8e(e){return E8e.test(e)}function I8e(e){return D8e.test(e)}function P8e(e,t,r){const a=O8e(e,t,r);if(console.warn(a),A8e.includes(e))throw new RangeError(a)}function O8e(e,t,r){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const M8e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,R8e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,F8e=/^'([^]*?)'?$/,L8e=/''/g,B8e=/[a-zA-Z]/;function v9(e,t,r){const a=lv(),s=r?.locale??a.locale??ZX,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,l=Vr(e,r?.in);if(!G2(l))throw new RangeError("Invalid time value");let c=t.match(R8e).map(u=>{const h=u[0];if(h==="p"||h==="P"){const f=V3[h];return f(u,s.formatLong)}return u}).join("").match(M8e).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:U8e(u)};if(f9[h])return{isToken:!0,value:u};if(h.match(B8e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!r?.useAdditionalWeekYearTokens&&I8e(h)||!r?.useAdditionalDayOfYearTokens&&T8e(h))&&P8e(h,t,String(e));const f=f9[h[0]];return f(l,h,s.localize,d)}).join("")}function U8e(e){const t=e.match(F8e);return t?t[1].replace(L8e,"'"):e}function g9(e,t){return Vr(e,t?.in).getDate()}function $8e(e,t){return Vr(e,t?.in).getDay()}function V8e(e,t){const r=Vr(e,t?.in),a=r.getFullYear(),s=r.getMonth(),i=Nn(r,0);return i.setFullYear(a,s+1,0),i.setHours(0,0,0,0),i.getDate()}function q8e(){return Object.assign({},lv())}function af(e,t){return Vr(e,t?.in).getHours()}function z8e(e,t){const r=Vr(e,t?.in).getDay();return r===0?7:r}function nf(e,t){return Vr(e,t?.in).getMinutes()}function Io(e,t){return Vr(e,t?.in).getMonth()}function qm(e){return Vr(e).getSeconds()}function q3(e){return+Vr(e)}function Ea(e,t){return Vr(e,t?.in).getFullYear()}function rp(e,t){return+Vr(e)>+Vr(t)}function zx(e,t){return+Vr(e)<+Vr(t)}function H8e(e,t){return+Vr(e)==+Vr(t)}function W8e(e,t){const r=G8e(t)?new t(0):Nn(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function G8e(e){return typeof e=="function"&&e.prototype?.constructor===e}const Y8e=10;class rQ{subPriority=0;validate(t,r){return!0}}class K8e extends rQ{constructor(t,r,a,s,i){super(),this.value=t,this.validateValue=r,this.setValue=a,this.priority=s,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,a){return this.setValue(t,r,this.value,a)}}class X8e extends rQ{priority=Y8e;subPriority=-1;constructor(t,r){super(),this.context=t||(a=>Nn(r,a))}set(t,r){return r.timestampIsSet?t:Nn(t,W8e(t,this.context))}}class ln{run(t,r,a,s){const i=this.parse(t,r,a,s);return i?{setter:new K8e(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,a){return!0}}class Q8e extends ln{priority=140;parse(t,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(t,{width:"abbreviated"})||a.era(t,{width:"narrow"});case"GGGGG":return a.era(t,{width:"narrow"});case"GGGG":default:return a.era(t,{width:"wide"})||a.era(t,{width:"abbreviated"})||a.era(t,{width:"narrow"})}}set(t,r,a){return r.era=a,t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const qs={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ru={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function zs(e,t){return e&&{value:t(e.value),rest:e.rest}}function us(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Fu(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const a=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:a*(s*CC+i*SC+o*B6e),rest:t.slice(r[0].length)}}function aQ(e){return us(qs.anyDigitsSigned,e)}function Ds(e,t){switch(e){case 1:return us(qs.singleDigit,t);case 2:return us(qs.twoDigits,t);case 3:return us(qs.threeDigits,t);case 4:return us(qs.fourDigits,t);default:return us(new RegExp("^\\d{1,"+e+"}"),t)}}function Q2(e,t){switch(e){case 1:return us(qs.singleDigitSigned,t);case 2:return us(qs.twoDigitsSigned,t);case 3:return us(qs.threeDigitsSigned,t);case 4:return us(qs.fourDigitsSigned,t);default:return us(new RegExp("^-?\\d{1,"+e+"}"),t)}}function NP(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function nQ(e,t){const r=t>0,a=r?t:1-t;let s;if(a<=50)s=e||100;else{const i=a+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return r?s:1-s}function sQ(e){return e%400===0||e%4===0&&e%100!==0}class J8e extends ln{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,r,a){const s=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return zs(Ds(4,t),s);case"yo":return zs(a.ordinalNumber(t,{unit:"year"}),s);default:return zs(Ds(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,a){const s=t.getFullYear();if(a.isTwoDigitYear){const o=nQ(a.year,s);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const i=!("era"in r)||r.era===1?a.year:1-a.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class Z8e extends ln{priority=130;parse(t,r,a){const s=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return zs(Ds(4,t),s);case"Yo":return zs(a.ordinalNumber(t,{unit:"year"}),s);default:return zs(Ds(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,a,s){const i=jP(t,s);if(a.isTwoDigitYear){const l=nQ(a.year,i);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ff(t,s)}const o=!("era"in r)||r.era===1?a.year:1-a.year;return t.setFullYear(o,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ff(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class eBe extends ln{priority=130;parse(t,r){return Q2(r==="R"?4:r.length,t)}set(t,r,a){const s=Nn(t,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),tg(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class tBe extends ln{priority=130;parse(t,r){return Q2(r==="u"?4:r.length,t)}set(t,r,a){return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class rBe extends ln{priority=120;parse(t,r,a){switch(r){case"Q":case"QQ":return Ds(r.length,t);case"Qo":return a.ordinalNumber(t,{unit:"quarter"});case"QQQ":return a.quarter(t,{width:"abbreviated",context:"formatting"})||a.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(t,{width:"wide",context:"formatting"})||a.quarter(t,{width:"abbreviated",context:"formatting"})||a.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,a){return t.setMonth((a-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class aBe extends ln{priority=120;parse(t,r,a){switch(r){case"q":case"qq":return Ds(r.length,t);case"qo":return a.ordinalNumber(t,{unit:"quarter"});case"qqq":return a.quarter(t,{width:"abbreviated",context:"standalone"})||a.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(t,{width:"wide",context:"standalone"})||a.quarter(t,{width:"abbreviated",context:"standalone"})||a.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,a){return t.setMonth((a-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class nBe extends ln{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,r,a){const s=i=>i-1;switch(r){case"M":return zs(us(qs.month,t),s);case"MM":return zs(Ds(2,t),s);case"Mo":return zs(a.ordinalNumber(t,{unit:"month"}),s);case"MMM":return a.month(t,{width:"abbreviated",context:"formatting"})||a.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(t,{width:"wide",context:"formatting"})||a.month(t,{width:"abbreviated",context:"formatting"})||a.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.setMonth(a,1),t.setHours(0,0,0,0),t}}class sBe extends ln{priority=110;parse(t,r,a){const s=i=>i-1;switch(r){case"L":return zs(us(qs.month,t),s);case"LL":return zs(Ds(2,t),s);case"Lo":return zs(a.ordinalNumber(t,{unit:"month"}),s);case"LLL":return a.month(t,{width:"abbreviated",context:"standalone"})||a.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(t,{width:"wide",context:"standalone"})||a.month(t,{width:"abbreviated",context:"standalone"})||a.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.setMonth(a,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function iBe(e,t,r){const a=Vr(e,r?.in),s=eQ(a,r)-t;return a.setDate(a.getDate()-s*7),Vr(a,r?.in)}class oBe extends ln{priority=100;parse(t,r,a){switch(r){case"w":return us(qs.week,t);case"wo":return a.ordinalNumber(t,{unit:"week"});default:return Ds(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,a,s){return ff(iBe(t,a,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function lBe(e,t,r){const a=Vr(e,r?.in),s=yP(a,r)-t;return a.setDate(a.getDate()-s*7),a}class cBe extends ln{priority=100;parse(t,r,a){switch(r){case"I":return us(qs.week,t);case"Io":return a.ordinalNumber(t,{unit:"week"});default:return Ds(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,a){return tg(lBe(t,a))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const dBe=[31,28,31,30,31,30,31,31,30,31,30,31],uBe=[31,29,31,30,31,30,31,31,30,31,30,31];class hBe extends ln{priority=90;subPriority=1;parse(t,r,a){switch(r){case"d":return us(qs.date,t);case"do":return a.ordinalNumber(t,{unit:"date"});default:return Ds(r.length,t)}}validate(t,r){const a=t.getFullYear(),s=sQ(a),i=t.getMonth();return s?r>=1&&r<=uBe[i]:r>=1&&r<=dBe[i]}set(t,r,a){return t.setDate(a),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class fBe extends ln{priority=90;subpriority=1;parse(t,r,a){switch(r){case"D":case"DD":return us(qs.dayOfYear,t);case"Do":return a.ordinalNumber(t,{unit:"date"});default:return Ds(r.length,t)}}validate(t,r){const a=t.getFullYear();return sQ(a)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,a){return t.setMonth(0,a),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function wP(e,t,r){const a=lv(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,i=Vr(e,r?.in),o=i.getDay(),c=(t%7+7)%7,d=7-s,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return Bd(i,u,r)}class mBe extends ln{priority=90;parse(t,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,s){return t=wP(t,a,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class pBe extends ln{priority=90;parse(t,r,a,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return zs(Ds(r.length,t),i);case"eo":return zs(a.ordinalNumber(t,{unit:"day"}),i);case"eee":return a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"eeeee":return a.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,s){return t=wP(t,a,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class xBe extends ln{priority=90;parse(t,r,a,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return zs(Ds(r.length,t),i);case"co":return zs(a.ordinalNumber(t,{unit:"day"}),i);case"ccc":return a.day(t,{width:"abbreviated",context:"standalone"})||a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"});case"ccccc":return a.day(t,{width:"narrow",context:"standalone"});case"cccccc":return a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(t,{width:"wide",context:"standalone"})||a.day(t,{width:"abbreviated",context:"standalone"})||a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,s){return t=wP(t,a,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function vBe(e,t,r){const a=Vr(e,r?.in),s=z8e(a,r),i=t-s;return Bd(a,i,r)}class gBe extends ln{priority=90;parse(t,r,a){const s=i=>i===0?7:i;switch(r){case"i":case"ii":return Ds(r.length,t);case"io":return a.ordinalNumber(t,{unit:"day"});case"iii":return zs(a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return zs(a.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return zs(a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return zs(a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,a){return t=vBe(t,a),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class bBe extends ln{priority=80;parse(t,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(NP(a),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class yBe extends ln{priority=80;parse(t,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(NP(a),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class jBe extends ln{priority=80;parse(t,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(NP(a),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class NBe extends ln{priority=70;parse(t,r,a){switch(r){case"h":return us(qs.hour12h,t);case"ho":return a.ordinalNumber(t,{unit:"hour"});default:return Ds(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,a){const s=t.getHours()>=12;return s&&a<12?t.setHours(a+12,0,0,0):!s&&a===12?t.setHours(0,0,0,0):t.setHours(a,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class wBe extends ln{priority=70;parse(t,r,a){switch(r){case"H":return us(qs.hour23h,t);case"Ho":return a.ordinalNumber(t,{unit:"hour"});default:return Ds(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,a){return t.setHours(a,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class SBe extends ln{priority=70;parse(t,r,a){switch(r){case"K":return us(qs.hour11h,t);case"Ko":return a.ordinalNumber(t,{unit:"hour"});default:return Ds(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.getHours()>=12&&a<12?t.setHours(a+12,0,0,0):t.setHours(a,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class CBe extends ln{priority=70;parse(t,r,a){switch(r){case"k":return us(qs.hour24h,t);case"ko":return a.ordinalNumber(t,{unit:"hour"});default:return Ds(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,a){const s=a<=24?a%24:a;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class kBe extends ln{priority=60;parse(t,r,a){switch(r){case"m":return us(qs.minute,t);case"mo":return a.ordinalNumber(t,{unit:"minute"});default:return Ds(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,a){return t.setMinutes(a,0,0),t}incompatibleTokens=["t","T"]}class _Be extends ln{priority=50;parse(t,r,a){switch(r){case"s":return us(qs.second,t);case"so":return a.ordinalNumber(t,{unit:"second"});default:return Ds(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,a){return t.setSeconds(a,0),t}incompatibleTokens=["t","T"]}class EBe extends ln{priority=30;parse(t,r){const a=s=>Math.trunc(s*Math.pow(10,-r.length+3));return zs(Ds(r.length,t),a)}set(t,r,a){return t.setMilliseconds(a),t}incompatibleTokens=["t","T"]}class DBe extends ln{priority=10;parse(t,r){switch(r){case"X":return Fu(Ru.basicOptionalMinutes,t);case"XX":return Fu(Ru.basic,t);case"XXXX":return Fu(Ru.basicOptionalSeconds,t);case"XXXXX":return Fu(Ru.extendedOptionalSeconds,t);case"XXX":default:return Fu(Ru.extended,t)}}set(t,r,a){return r.timestampIsSet?t:Nn(t,t.getTime()-H2(t)-a)}incompatibleTokens=["t","T","x"]}class ABe extends ln{priority=10;parse(t,r){switch(r){case"x":return Fu(Ru.basicOptionalMinutes,t);case"xx":return Fu(Ru.basic,t);case"xxxx":return Fu(Ru.basicOptionalSeconds,t);case"xxxxx":return Fu(Ru.extendedOptionalSeconds,t);case"xxx":default:return Fu(Ru.extended,t)}}set(t,r,a){return r.timestampIsSet?t:Nn(t,t.getTime()-H2(t)-a)}incompatibleTokens=["t","T","X"]}class TBe extends ln{priority=40;parse(t){return aQ(t)}set(t,r,a){return[Nn(t,a*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class IBe extends ln{priority=20;parse(t){return aQ(t)}set(t,r,a){return[Nn(t,a),{timestampIsSet:!0}]}incompatibleTokens="*"}const PBe={G:new Q8e,y:new J8e,Y:new Z8e,R:new eBe,u:new tBe,Q:new rBe,q:new aBe,M:new nBe,L:new sBe,w:new oBe,I:new cBe,d:new hBe,D:new fBe,E:new mBe,e:new pBe,c:new xBe,i:new gBe,a:new bBe,b:new yBe,B:new jBe,h:new NBe,H:new wBe,K:new SBe,k:new CBe,m:new kBe,s:new _Be,S:new EBe,X:new DBe,x:new ABe,t:new TBe,T:new IBe},OBe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MBe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RBe=/^'([^]*?)'?$/,FBe=/''/g,LBe=/\S/,BBe=/[a-zA-Z]/;function UBe(e,t,r,a){const s=()=>Nn(a?.in||r,NaN),i=q8e(),o=a?.locale??i.locale??ZX,l=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!t)return e?s():Vr(r,a?.in);const d={firstWeekContainsDate:l,weekStartsOn:c,locale:o},u=[new X8e(a?.in,r)],h=t.match(MBe).map(b=>{const y=b[0];if(y in V3){const S=V3[y];return S(b,o.formatLong)}return b}).join("").match(OBe),f=[];for(let b of h){const y=b[0],S=PBe[y];if(S){const{incompatibleTokens:w}=S;if(Array.isArray(w)){const C=f.find(D=>w.includes(D.token)||D.token===y);if(C)throw new RangeError(`The format string mustn't contain \`${C.fullToken}\` and \`${b}\` at the same time`)}else if(S.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);f.push({token:y,fullToken:b});const k=S.run(e,b,o.match,d);if(!k)return s();u.push(k.setter),e=k.rest}else{if(y.match(BBe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(b==="''"?b="'":y==="'"&&(b=$Be(b)),e.indexOf(b)===0)e=e.slice(b.length);else return s()}}if(e.length>0&&LBe.test(e))return s();const p=u.map(b=>b.priority).sort((b,y)=>y-b).filter((b,y,S)=>S.indexOf(b)===y).map(b=>u.filter(y=>y.priority===b).sort((y,S)=>S.subPriority-y.subPriority)).map(b=>b[0]);let x=Vr(r,a?.in);if(isNaN(+x))return s();const g={};for(const b of p){if(!b.validate(x,d))return s();const y=b.set(x,g,d);Array.isArray(y)?(x=y[0],Object.assign(g,y[1])):x=y}return x}function $Be(e){return e.match(RBe)[1].replace(FBe,"'")}function VBe(e,t,r){const[a,s]=Tf(r?.in,e,t);return a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()}function qBe(e,t,r){const[a,s]=Tf(r?.in,e,t);return+$3(a)==+$3(s)}function zBe(e,t,r){const[a,s]=Tf(r?.in,e,t);return a.getFullYear()===s.getFullYear()}function Zy(e,t,r){const a=+Vr(e,r?.in),[s,i]=[+Vr(t.start,r?.in),+Vr(t.end,r?.in)].sort((o,l)=>o-l);return a>=s&&a<=i}function HBe(e,t,r){return Bd(e,-1,r)}function WBe(e,t){const r=()=>Nn(t?.in,NaN),s=XBe(e);let i;if(s.date){const d=QBe(s.date,2);i=JBe(d.restDateString,d.year)}if(!i||isNaN(+i))return r();const o=+i;let l=0,c;if(s.time&&(l=ZBe(s.time),isNaN(l)))return r();if(s.timezone){if(c=e7e(s.timezone),isNaN(c))return r()}else{const d=new Date(o+l),u=Vr(0,t?.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return Vr(o+l+c,t?.in)}const ON={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},GBe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YBe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,KBe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function XBe(e){const t={},r=e.split(ON.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],ON.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ON.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const s=ON.timezone.exec(a);s?(t.time=a.replace(s[1],""),t.timezone=s[1]):t.time=a}return t}function QBe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};const s=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((a[1]||a[2]).length)}}function JBe(e,t){if(t===null)return new Date(NaN);const r=e.match(GBe);if(!r)return new Date(NaN);const a=!!r[4],s=Ub(r[1]),i=Ub(r[2])-1,o=Ub(r[3]),l=Ub(r[4]),c=Ub(r[5])-1;if(a)return s7e(t,l,c)?t7e(t,l,c):new Date(NaN);{const d=new Date(0);return!a7e(t,i,o)||!n7e(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,o)),d)}}function Ub(e){return e?parseInt(e):1}function ZBe(e){const t=e.match(YBe);if(!t)return NaN;const r=AD(t[1]),a=AD(t[2]),s=AD(t[3]);return i7e(r,a,s)?r*CC+a*SC+s*1e3:NaN}function AD(e){return e&&parseFloat(e.replace(",","."))||0}function e7e(e){if(e==="Z")return 0;const t=e.match(KBe);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return o7e(a,s)?r*(a*CC+s*SC):NaN}function t7e(e,t,r){const a=new Date(0);a.setUTCFullYear(e,0,4);const s=a.getUTCDay()||7,i=(t-1)*7+r+1-s;return a.setUTCDate(a.getUTCDate()+i),a}const r7e=[31,null,31,30,31,30,31,31,30,31,30,31];function iQ(e){return e%400===0||e%4===0&&e%100!==0}function a7e(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(r7e[t]||(iQ(e)?29:28))}function n7e(e,t){return t>=1&&t<=(iQ(e)?366:365)}function s7e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function i7e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function o7e(e,t){return t>=0&&t<=59}function Vc(e,t,r){const a=Vr(e,r?.in),s=a.getFullYear(),i=a.getDate(),o=Nn(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=V8e(o);return a.setMonth(t,Math.min(i,l)),a}function tw(e,t,r){const a=Vr(e,r?.in);return a.setHours(t),a}function rw(e,t,r){const a=Vr(e,r?.in);return a.setMinutes(t),a}function i0(e,t,r){const a=Vr(e,r?.in),s=Math.trunc(a.getMonth()/3)+1,i=t-s;return Vc(a,a.getMonth()+i*3)}function aw(e,t,r){const a=Vr(e,r?.in);return a.setSeconds(t),a}function Du(e,t,r){const a=Vr(e,r?.in);return isNaN(+a)?Nn(e,NaN):(a.setFullYear(t),a)}function kx(e,t,r){return $d(e,-t,r)}function oQ(e,t,r){return bP(e,-1,r)}function b9(e,t,r){return W2(e,-1,r)}function ag(e,t,r){return tf(e,-t,r)}var l7e=typeof document<"u",c7e=function(){},J2=l7e?j.useLayoutEffect:c7e;const d7e={...uw},u7e=d7e.useInsertionEffect,h7e=u7e||(e=>e());function f7e(e){const t=j.useRef(()=>{});return h7e(()=>{t.current=e}),j.useCallback(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}var m7e=typeof document<"u",p7e=function(){},nw=m7e?j.useLayoutEffect:p7e;function Z2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Z2(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=r;a--!==0;){const i=s[a];if(!(i==="_owner"&&e.$$typeof)&&!Z2(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function lQ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function y9(e,t){const r=lQ(e);return Math.round(t*r)/r}function TD(e){const t=j.useRef(e);return nw(()=>{t.current=e}),t}function x7e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=j.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=j.useState(a);Z2(f,a)||p(a);const[x,g]=j.useState(null),[b,y]=j.useState(null),S=j.useCallback(F=>{F!==D.current&&(D.current=F,g(F))},[]),w=j.useCallback(F=>{F!==E.current&&(E.current=F,y(F))},[]),k=i||x,C=o||b,D=j.useRef(null),E=j.useRef(null),A=j.useRef(u),I=c!=null,L=TD(c),P=TD(s),O=TD(d),Y=j.useCallback(()=>{if(!D.current||!E.current)return;const F={placement:t,strategy:r,middleware:f};P.current&&(F.platform=P.current),O5e(D.current,E.current,F).then(X=>{const Q={...X,isPositioned:O.current!==!1};q.current&&!Z2(A.current,Q)&&(A.current=Q,a1.flushSync(()=>{h(Q)}))})},[f,t,r,P,O]);nw(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[d]);const q=j.useRef(!1);nw(()=>(q.current=!0,()=>{q.current=!1}),[]),nw(()=>{if(k&&(D.current=k),C&&(E.current=C),k&&C){if(L.current)return L.current(k,C,Y);Y()}},[k,C,Y,L,I]);const K=j.useMemo(()=>({reference:D,floating:E,setReference:S,setFloating:w}),[S,w]),U=j.useMemo(()=>({reference:k,floating:C}),[k,C]),J=j.useMemo(()=>{const F={position:r,left:0,top:0};if(!U.floating)return F;const X=y9(U.floating,u.x),Q=y9(U.floating,u.y);return l?{...F,transform:"translate("+X+"px, "+Q+"px)",...lQ(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:X,top:Q}},[r,l,U.floating,u.x,u.y]);return j.useMemo(()=>({...u,update:Y,refs:K,elements:U,floatingStyles:J}),[u,Y,K,U,J])}const v7e=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:s}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?OB({element:a.current,padding:s}).fn(r):{}:a?OB({element:a,padding:s}).fn(r):{}}}},g7e=(e,t)=>({...I5e(e),options:[e,t]}),b7e=(e,t)=>({...P5e(e),options:[e,t]}),y7e=(e,t)=>({...v7e(e),options:[e,t]}),j7e={...uw};let j9=!1,N7e=0;const N9=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+N7e++;function w7e(){const[e,t]=j.useState(()=>j9?N9():void 0);return J2(()=>{e==null&&t(N9())},[]),j.useEffect(()=>{j9=!0},[]),e}const S7e=j7e.useId,cQ=S7e||w7e,C7e=j.forwardRef(function(t,r){const{context:{placement:a,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:h,stroke:f,d:p,style:{transform:x,...g}={},...b}=t,y=cQ(),[S,w]=j.useState(!1);if(J2(()=>{if(!s)return;Zc(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[k,C]=a.split("-"),D=k==="top"||k==="bottom";let E=h;(D&&o!=null&&o.x||!D&&o!=null&&o.y)&&(E=null);const A=u*2,I=A/2,L=l/2*(d/-8+1),P=c/2*d/4,O=!!p,Y=E&&C==="end"?"bottom":"top";let q=E&&C==="end"?"right":"left";E&&S&&(q=C==="end"?"left":"right");const K=i?.x!=null?E||i.x:"",U=i?.y!=null?E||i.y:"",J=p||"M0,0"+(" H"+l)+(" L"+(l-L)+","+(c-P))+(" Q"+l/2+","+c+" "+L+","+(c-P))+" Z",F={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[k];return n.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:O?l:l+A,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[q]:K,[Y]:U,[k]:D||O?"100%":"calc(100% - "+A/2+"px)",transform:[F,x].filter(X=>!!X).join(" "),...g},children:[A>0&&n.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:f,strokeWidth:A+(p?0:1),d:J}),n.jsx("path",{stroke:A&&!p?b.fill:"none",d:J}),n.jsx("clipPath",{id:y,children:n.jsx("rect",{x:-I,y:I*(O?-1:1),width:l+A,height:l})})]})});function k7e(){const e=new Map;return{emit(t,r){var a;(a=e.get(t))==null||a.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var a;(a=e.get(t))==null||a.delete(r)}}}const _7e=j.createContext(null),E7e=j.createContext(null),D7e=()=>{var e;return((e=j.useContext(_7e))==null?void 0:e.id)||null},A7e=()=>j.useContext(E7e);function T7e(e){const{open:t=!1,onOpenChange:r,elements:a}=e,s=cQ(),i=j.useRef({}),[o]=j.useState(()=>k7e()),l=D7e()!=null,[c,d]=j.useState(a.reference),u=f7e((p,x,g)=>{i.current.openEvent=p?x:void 0,o.emit("openchange",{open:p,event:x,reason:g,nested:l}),r?.(p,x,g)}),h=j.useMemo(()=>({setPositionReference:d}),[]),f=j.useMemo(()=>({reference:c||a.reference||null,floating:a.floating||null,domReference:a.reference}),[c,a.reference,a.floating]);return j.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:f,events:o,floatingId:s,refs:h}),[t,u,f,o,s,h])}function I7e(e){e===void 0&&(e={});const{nodeId:t}=e,r=T7e({...e,elements:{reference:null,floating:null,...e.elements}}),a=e.rootContext||r,s=a.elements,[i,o]=j.useState(null),[l,c]=j.useState(null),u=s?.domReference||i,h=j.useRef(null),f=A7e();J2(()=>{u&&(h.current=u)},[u]);const p=x7e({...e,elements:{...s,...l&&{reference:l}}}),x=j.useCallback(w=>{const k=Ko(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;c(k),p.refs.setReference(k)},[p.refs]),g=j.useCallback(w=>{(Ko(w)||w===null)&&(h.current=w,o(w)),(Ko(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!Ko(w))&&p.refs.setReference(w)},[p.refs]),b=j.useMemo(()=>({...p.refs,setReference:g,setPositionReference:x,domReference:h}),[p.refs,g,x]),y=j.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),S=j.useMemo(()=>({...p,...a,refs:b,elements:y,nodeId:t}),[p,b,y,t,a]);return J2(()=>{a.dataRef.current.floatingContext=S;const w=f?.nodesRef.current.find(k=>k.id===t);w&&(w.context=S)}),j.useMemo(()=>({...p,context:S,refs:b,elements:y}),[p,b,y,S])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var z3=function(t,r){return z3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},z3(t,r)};function $i(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");z3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wa=function(){return Wa=Object.assign||function(r){for(var a,s=1,i=arguments.length;s<i;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},Wa.apply(this,arguments)};function $u(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,i;a<s;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}var P7e=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,a=e.showTime,s=a===void 0?!1:a,i=e.className,o=e.children,l=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return Yt.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},O7e=function(e,t){var r=j.useRef(null),a=j.useRef(e);a.current=e;var s=j.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;r.current&&!r.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=a.current)===null||o===void 0||o.call(a,i))},[t]);return j.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},_C=function(e){var t=e.children,r=e.onClickOutside,a=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=O7e(r,o);return Yt.createElement("div",{className:a,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},kr;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(kr||(kr={}));function dQ(){var e=typeof window<"u"?window:globalThis;return e}var q1=12;function hn(e){if(e==null)return new Date;var t=typeof e=="string"?WBe(e):Vr(e);return EC(t)?t:new Date}function ID(e,t,r,a,s){s===void 0&&(s=hn());for(var i=ng(r)||ng(SP()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var d=c[l],u=UBe(e,d,s,{locale:i});if(EC(u)&&(!a||e===es(u,d,r)))return u}return null}function EC(e,t){return G2(e)&&!zx(e,new Date("1/1/1800"))}function es(e,t,r){if(r==="en")return v9(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var a=r?ng(r):void 0;return r&&!a&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),a=a||ng(SP()),v9(e,t,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function $c(e,t){var r=t.dateFormat,a=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&es(e,s,a)||""}var uQ=" - ";function M7e(e,t,r){if(!e)return"";var a=$c(e,r),s=t?$c(t,r):"";return"".concat(a).concat(uQ).concat(s)}function R7e(e,t){if(!e?.length)return"";var r=e[0]?$c(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var a=$c(e[1],t);return"".concat(r,", ").concat(a)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function PD(e,t){var r=t.hour,a=r===void 0?0:r,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return tw(rw(aw(e,l),i),a)}function F7e(e){return yP(e)}function L7e(e,t){return es(e,"ddd",t)}function sw(e){return qx(e)}function zm(e,t,r){var a=ng(t||SP());return ff(e,{locale:a,weekStartsOn:r})}function sf(e){return QX(e)}function Xb(e){return kC(e)}function w9(e){return $3(e)}function S9(){return qx(hn())}function C9(e){return KX(e)}function B7e(e){return W6e(e)}function U7e(e){return XX(e)}function Pu(e,t){return e&&t?zBe(e,t):!e&&!t}function Go(e,t){return e&&t?VBe(e,t):!e&&!t}function eS(e,t){return e&&t?qBe(e,t):!e&&!t}function Ha(e,t){return e&&t?z6e(e,t):!e&&!t}function fx(e,t){return e&&t?H8e(e,t):!e&&!t}function Qb(e,t,r){var a,s=qx(t),i=KX(r);try{a=Zy(e,{start:s,end:i})}catch{a=!1}return a}function SP(){var e=dQ();return e.__localeId__}function ng(e){if(typeof e=="string"){var t=dQ();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function $7e(e,t,r){return t(es(e,"EEEE",r))}function V7e(e,t){return es(e,"EEEEEE",t)}function q7e(e,t){return es(e,"EEE",t)}function CP(e,t){return es(Vc(hn(),e),"LLLL",t)}function hQ(e,t){return es(Vc(hn(),e),"LLL",t)}function z7e(e,t){return es(i0(hn(),e),"QQQ",t)}function Hc(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.excludeDateIntervals,l=r.includeDates,c=r.includeDateIntervals,d=r.filterDate;return z1(e,{minDate:a,maxDate:s})||i&&i.some(function(u){return u instanceof Date?Ha(e,u):Ha(e,u.date)})||o&&o.some(function(u){var h=u.start,f=u.end;return Zy(e,{start:h,end:f})})||l&&!l.some(function(u){return Ha(e,u)})||c&&!c.some(function(u){var h=u.start,f=u.end;return Zy(e,{start:h,end:f})})||d&&!d(hn(e))||!1}function kP(e,t){var r=t===void 0?{}:t,a=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return Zy(e,{start:o,end:l})}):a&&a.some(function(i){var o;return i instanceof Date?Ha(e,i):Ha(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function fQ(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return z1(e,{minDate:a?QX(a):void 0,maxDate:s?XX(s):void 0})||i?.some(function(c){return Go(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return Go(e,c)})||l&&!l(hn(e))||!1}function MN(e,t,r,a){var s=Ea(e),i=Io(e),o=Ea(t),l=Io(t),c=Ea(a);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function H7e(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates;return z1(e,{minDate:a,maxDate:s})||i&&i.some(function(l){return Go(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return Go(l,e)})||!1}function RN(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return z1(e,{minDate:a,maxDate:s})||i?.some(function(c){return eS(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return eS(e,c)})||l&&!l(hn(e))||!1}function FN(e,t,r){if(!t||!r||!G2(t)||!G2(r))return!1;var a=Ea(t),s=Ea(r);return a<=e&&s>=e}function iw(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate,c=new Date(e,0,1);return z1(c,{minDate:a?kC(a):void 0,maxDate:s?JX(s):void 0})||i?.some(function(d){return Pu(c,d instanceof Date?d:d.date)})||o&&!o.some(function(d){return Pu(c,d)})||l&&!l(hn(c))||!1}function LN(e,t,r,a){var s=Ea(e),i=Cx(e),o=Ea(t),l=Cx(t),c=Ea(a);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function z1(e,t){var r,a=t===void 0?{}:t,s=a.minDate,i=a.maxDate;return(r=s&&rg(e,s)<0||i&&rg(e,i)>0)!==null&&r!==void 0?r:!1}function k9(e,t){return t.some(function(r){return af(r)===af(e)&&nf(r)===nf(e)&&qm(r)===qm(e)})}function _9(e,t){var r=t===void 0?{}:t,a=r.excludeTimes,s=r.includeTimes,i=r.filterTime;return a&&k9(e,a)||s&&!k9(e,s)||i&&!i(e)||!1}function E9(e,t){var r=t.minTime,a=t.maxTime;if(!r||!a)throw new Error("Both minTime and maxTime props required");var s=hn();s=tw(s,af(e)),s=rw(s,nf(e)),s=aw(s,qm(e));var i=hn();i=tw(i,af(r)),i=rw(i,nf(r)),i=aw(i,qm(r));var o=hn();o=tw(o,af(a)),o=rw(o,nf(a)),o=aw(o,qm(a));var l;try{l=!Zy(s,{start:i,end:o})}catch{l=!1}return l}function D9(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.includeDates,i=kx(e,1);return a&&Y2(a,i)>0||s&&s.every(function(o){return Y2(o,i)>0})||!1}function A9(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.includeDates,i=$d(e,1);return a&&Y2(i,a)>0||s&&s.every(function(o){return Y2(i,o)>0})||!1}function W7e(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.includeDates,i=kC(e),o=oQ(i);return a&&K2(a,o)>0||s&&s.every(function(l){return K2(l,o)>0})||!1}function G7e(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.includeDates,i=JX(e),o=bP(i,1);return a&&K2(o,a)>0||s&&s.every(function(l){return K2(o,l)>0})||!1}function T9(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.includeDates,i=ag(e,1);return a&&X2(a,i)>0||s&&s.every(function(o){return X2(o,i)>0})||!1}function Y7e(e,t){var r=t===void 0?{}:t,a=r.minDate,s=r.yearItemNumber,i=s===void 0?q1:s,o=Xb(ag(e,i)),l=Mm(o,i).endPeriod,c=a&&Ea(a);return c&&c>l||!1}function I9(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.includeDates,i=tf(e,1);return a&&X2(i,a)>0||s&&s.every(function(o){return X2(i,o)>0})||!1}function K7e(e,t){var r=t===void 0?{}:t,a=r.maxDate,s=r.yearItemNumber,i=s===void 0?q1:s,o=tf(e,i),l=Mm(o,i).startPeriod,c=a&&Ea(a);return c&&c<l||!1}function mQ(e){var t=e.minDate,r=e.includeDates;if(r&&t){var a=r.filter(function(s){return rg(s,t)>=0});return u9(a)}else return r?u9(r):t}function pQ(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var a=r.filter(function(s){return rg(s,t)<=0});return d9(a)}else return r?d9(r):t}function P9(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var a=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(rf(o)){var l=es(o,"MM.dd.yyyy"),c=a.get(l)||[];c.includes(t)||(c.push(t),a.set(l,c))}else if(typeof o=="object"){var d=Object.keys(o),u=(r=d[0])!==null&&r!==void 0?r:"",h=o[u];if(typeof u=="string"&&Array.isArray(h))for(var f=0,p=h.length;f<p;f++){var x=h[f];if(x){var l=es(x,"MM.dd.yyyy"),c=a.get(l)||[];c.includes(u)||(c.push(u),a.set(l,c))}}}}return a}function X7e(e,t){return e.length!==t.length?!1:e.every(function(r,a){return r===t[a]})}function Q7e(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(a){var s=a.date,i=a.holidayName;if(rf(s)){var o=es(s,"MM.dd.yyyy"),l=r.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&X7e(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?$u($u([],c,!0),[i],!1):[i],r.set(o,l)}}}),r}function J7e(e,t,r,a,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,d=s[l];d&&(c=U6e(c,af(d)),c=U3(c,nf(d)),c=q6e(c,qm(d)));var u=U3(e,(r+1)*a);rp(c,t)&&zx(c,u)&&d!=null&&o.push(d)}return o}function O9(e){return e<10?"0".concat(e):"".concat(e)}function Mm(e,t){t===void 0&&(t=q1);var r=Math.ceil(Ea(e)/t)*t,a=r-(t-1);return{startPeriod:a,endPeriod:r}}function Z7e(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function M9(e){var t=e.getSeconds(),r=e.getMilliseconds();return Vr(e.getTime()-t*1e3-r)}function e9e(e,t){return M9(e).getTime()===M9(t).getTime()}function R9(e){if(!rf(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function F9(e,t){if(!rf(e)||!rf(t))throw new Error("Invalid date received");var r=R9(e),a=R9(t);return zx(r,a)}function xQ(e){return e.key===kr.Space}var t9e=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.inputRef=Yt.createRef(),a.onTimeChange=function(s){var i,o;a.setState({time:s});var l=a.props.date,c=l instanceof Date&&!isNaN(+l),d=c?l:new Date;if(s?.includes(":")){var u=s.split(":"),h=u[0],f=u[1];d.setHours(Number(h)),d.setMinutes(Number(f))}(o=(i=a.props).onChange)===null||o===void 0||o.call(i,d)},a.renderTimeInput=function(){var s=a.state.time,i=a.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?j.cloneElement(c,{date:o,value:s,onChange:a.onTimeChange}):Yt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:a.inputRef,onClick:function(){var d;(d=a.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){a.onTimeChange(d.target.value||l)}})},a.state={time:a.props.timeString},a}return t.getDerivedStateFromProps=function(r,a){return r.timeString!==a.time?{time:r.timeString}:null},t.prototype.render=function(){return Yt.createElement("div",{className:"react-datepicker__input-time-container"},Yt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Yt.createElement("div",{className:"react-datepicker-time__input-container"},Yt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(j.Component),r9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=j.createRef(),r.handleClick=function(a){!r.isDisabled()&&r.props.onClick&&r.props.onClick(a)},r.handleMouseEnter=function(a){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(a)},r.handleOnKeyDown=function(a){var s,i,o=a.key;o===kr.Space&&(a.preventDefault(),a.key=kr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,a)},r.isSameDay=function(a){return Ha(r.props.day,a)},r.isKeyboardSelected=function(){var a;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(a=r.props.selectedDates)===null||a===void 0?void 0:a.some(function(o){return r.isSameDayOrWeek(o)}):r.isSameDayOrWeek(r.props.selected),i=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!i},r.isDisabled=function(a){return a===void 0&&(a=r.props.day),Hc(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return kP(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return Ha(r.props.day,zm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(a){return r.props.showWeekPicker&&Ha(a,zm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(a){return r.isSameDay(a)||r.isSameWeek(a)},r.getHighLightedClass=function(){var a=r.props,s=a.day,i=a.highlightDates;if(!i)return!1;var o=es(s,"MM.dd.yyyy");return i.get(o)},r.getHolidaysClass=function(){var a,s=r.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=es(i,"MM.dd.yyyy");return o.has(l)?[(a=o.get(l))===null||a===void 0?void 0:a.className]:[void 0]},r.isInRange=function(){var a=r.props,s=a.day,i=a.startDate,o=a.endDate;return!i||!o?!1:Qb(s,i,o)},r.isInSelectingRange=function(){var a,s=r.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,u=s.startDate,h=s.endDate,f=(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection;return!(o||l||c)||!f||!d&&r.isDisabled()?!1:o&&h&&(zx(f,h)||fx(f,h))?Qb(i,f,h):l&&u&&(rp(f,u)||fx(f,u))||c&&u&&!h&&(rp(f,u)||fx(f,u))?Qb(i,u,f):!1},r.isSelectingRangeStart=function(){var a;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection;return l?Ha(i,c):Ha(i,o)},r.isSelectingRangeEnd=function(){var a;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection;return l||c?Ha(i,d):Ha(i,o)},r.isRangeStart=function(){var a=r.props,s=a.day,i=a.startDate,o=a.endDate;return!i||!o?!1:Ha(i,s)},r.isRangeEnd=function(){var a=r.props,s=a.day,i=a.startDate,o=a.endDate;return!i||!o?!1:Ha(o,s)},r.isWeekend=function(){var a=$8e(r.props.day);return a===0||a===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===Io(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(Io(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(hn())},r.isSelected=function(){var a;return r.props.selectsMultiple?(a=r.props.selectedDates)===null||a===void 0?void 0:a.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(a){var s=r.props.dayClassName?r.props.dayClassName(a):void 0;return ia("react-datepicker__day",s,"react-datepicker__day--"+L7e(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var a=r.props,s=a.day,i=a.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=a.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,d=r.isDisabled()||r.isExcluded()?c:o;return"".concat(d," ").concat(es(s,"PPPP",r.props.locale))},r.getTitle=function(){var a=r.props,s=a.day,i=a.holidays,o=i===void 0?new Map:i,l=a.excludeDates,c=es(s,"MM.dd.yyyy"),d=[];return o.has(c)&&d.push.apply(d,o.get(c).holidayNames),r.isExcluded()&&d.push(l?.filter(function(u){return u instanceof Date?Ha(u,s):Ha(u?.date,s)}).map(function(u){if(!(u instanceof Date))return u?.message})),d.join(", ")},r.getTabIndex=function(){var a=r.props.selected,s=r.props.preSelection,i=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(a)&&Ha(s,a))?0:-1;return i},r.handleFocusDay=function(){var a;r.shouldFocusDay()&&((a=r.dayEl.current)===null||a===void 0||a.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(g9(r.props.day),r.props.day):g9(r.props.day)},r.render=function(){return Yt.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&Yt.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,a,s;return((a=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||a===void 0?void 0:a.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(j.Component),a9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=j.createRef(),r.handleClick=function(a){r.props.onClick&&r.props.onClick(a)},r.handleOnKeyDown=function(a){var s,i,o=a.key;o===kr.Space&&(a.preventDefault(),a.key=kr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,a)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!Ha(r.props.date,r.props.selected)&&Ha(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||Ha(r.props.date,r.props.selected)&&Ha(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(a){var s=!1;r.getTabIndex()===0&&!a?.isInputFocused&&Ha(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,a=r.weekNumber,s=r.isWeekDisabled,i=r.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&Ha(this.props.date,this.props.selected)};return Yt.createElement("div",{ref:this.weekNumberEl,className:ia(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},a)},t}(j.Component),n9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(a){return Hc(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(a,s){r.props.onDayClick&&r.props.onDayClick(a,s)},r.handleDayMouseEnter=function(a){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(a)},r.handleWeekClick=function(a,s,i){for(var o,l,c,d=new Date(a),u=0;u<7;u++){var h=new Date(a);h.setDate(h.getDate()+u);var f=!r.isDisabled(h);if(f){d=h;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,s,i),r.props.showWeekPicker&&r.handleDayClick(d,i),((o=r.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!1))},r.formatWeekNumber=function(a){return r.props.formatWeekNumber?r.props.formatWeekNumber(a):F7e(a)},r.isWeekDisabled=function(){for(var a=r.startOfWeek(),s=Bd(a,6),i=new Date(a);i<=s;){if(!r.isDisabled(i))return!1;i=Bd(i,1)}return!0},r.renderDays=function(){var a=r.startOfWeek(),s=[],i=r.formatWeekNumber(a);if(r.props.showWeekNumber){var o=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,a,i):void 0;s.push(Yt.createElement(a9e,Wa({key:"W"},t.defaultProps,r.props,{weekNumber:i,isWeekDisabled:r.isWeekDisabled(),date:a,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=Bd(a,l);return Yt.createElement(r9e,Wa({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:r.handleDayClick.bind(r,c),onMouseEnter:r.handleDayMouseEnter.bind(r,c)}))}))},r.startOfWeek=function(){return zm(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!Ha(r.startOfWeek(),r.props.selected)&&Ha(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":Ha(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Yt.createElement("div",{className:ia(r)},this.renderDays())},t}(j.Component),$b,s9e=6,T0={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},OD=($b={},$b[T0.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},$b[T0.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},$b[T0.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},$b),BN=1;function L9(e,t){return e?T0.FOUR_COLUMNS:t?T0.TWO_COLUMNS:T0.THREE_COLUMNS}var i9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=$u([],Array(12),!0).map(function(){return j.createRef()}),r.QUARTER_REFS=$u([],Array(4),!0).map(function(){return j.createRef()}),r.isDisabled=function(a){return Hc(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(a){return kP(a,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(a,s){var i,o;(o=(i=r.props).onDayClick)===null||o===void 0||o.call(i,a,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(a){var s,i;(i=(s=r.props).onDayMouseEnter)===null||i===void 0||i.call(s,a)},r.handleMouseLeave=function(){var a,s;(s=(a=r.props).onMouseLeave)===null||s===void 0||s.call(a)},r.isRangeStartMonth=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Go(Vc(i,a),o)},r.isRangeStartQuarter=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:eS(i0(i,a),o)},r.isRangeEndMonth=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Go(Vc(i,a),l)},r.isRangeEndQuarter=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:eS(i0(i,a),l)},r.isInSelectingRangeMonth=function(a){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!f?!1:l&&h?MN(f,h,a,o):c&&u||d&&u&&!h?MN(u,f,a,o):!1},r.isSelectingMonthRangeStart=function(a){var s;if(!r.isInSelectingRangeMonth(a))return!1;var i=r.props,o=i.day,l=i.startDate,c=i.selectsStart,d=Vc(o,a),u=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c?Go(d,u):Go(d,l)},r.isSelectingMonthRangeEnd=function(a){var s;if(!r.isInSelectingRangeMonth(a))return!1;var i=r.props,o=i.day,l=i.endDate,c=i.selectsEnd,d=i.selectsRange,u=Vc(o,a),h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c||d?Go(u,h):Go(u,l)},r.isInSelectingRangeQuarter=function(a){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!f?!1:l&&h?LN(f,h,a,o):c&&u||d&&u&&!h?LN(u,f,a,o):!1},r.isWeekInMonth=function(a){var s=r.props.day,i=Bd(a,6);return Go(a,s)||Go(i,s)},r.isCurrentMonth=function(a,s){return Ea(a)===Ea(hn())&&s===Io(hn())},r.isCurrentQuarter=function(a,s){return Ea(a)===Ea(hn())&&s===Cx(hn())},r.isSelectedMonth=function(a,s,i){return Io(i)===s&&Ea(a)===Ea(i)},r.isSelectMonthInList=function(a,s,i){return i.some(function(o){return r.isSelectedMonth(a,s,o)})},r.isSelectedQuarter=function(a,s,i){return Cx(a)===s&&Ea(a)===Ea(i)},r.isMonthSelected=function(){var a=r.props,s=a.day,i=a.selected,o=a.selectedDates,l=a.selectsMultiple,c=Io(s);return l?o?.some(function(d){return r.isSelectedMonth(s,c,d)}):!!i&&r.isSelectedMonth(s,c,i)},r.renderWeeks=function(){for(var a=[],s=r.props.fixedHeight,i=0,o=!1,l=zm(sf(r.props.day),r.props.locale,r.props.calendarStartDay),c=function(x){return r.props.showWeekPicker?zm(x,r.props.locale,r.props.calendarStartDay):r.props.preSelection},d=function(x){return r.props.showWeekPicker?zm(x,r.props.locale,r.props.calendarStartDay):r.props.selected},u=r.props.selected?d(r.props.selected):void 0,h=r.props.preSelection?c(r.props.preSelection):void 0;a.push(Yt.createElement(n9e,Wa({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:l,month:Io(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:u,preSelection:h,showWeekNumber:r.props.showWeekNumbers}))),!o;){i++,l=W2(l,1);var f=s&&i>=s9e,p=!s&&!r.isWeekInMonth(l);if(f||p)if(r.props.peekNextMonth)o=!0;else break}return a},r.onMonthClick=function(a,s){var i=r.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||r.handleDayClick(sf(l),a)},r.onMonthMouseEnter=function(a){var s=r.isMonthDisabledForLabelDate(a),i=s.isDisabled,o=s.labelDate;i||r.handleDayMouseEnter(sf(o))},r.handleMonthNavigation=function(a,s){var i,o,l,c;(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.MONTH_REFS[a])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},r.handleKeyboardNavigation=function(a,s,i){var o,l=r.props,c=l.selected,d=l.preSelection,u=l.setPreSelection,h=l.minDate,f=l.maxDate,p=l.showFourColumnMonthYearPicker,x=l.showTwoColumnMonthYearPicker;if(d){var g=L9(p,x),b=r.getVerticalOffset(g),y=(o=OD[g])===null||o===void 0?void 0:o.grid,S=function(E,A,I){var L,P,O=A,Y=I;switch(E){case kr.ArrowRight:O=$d(A,BN),Y=I===11?0:I+BN;break;case kr.ArrowLeft:O=kx(A,BN),Y=I===0?11:I-BN;break;case kr.ArrowUp:O=kx(A,b),Y=!((L=y?.[0])===null||L===void 0)&&L.includes(I)?I+12-b:I-b;break;case kr.ArrowDown:O=$d(A,b),Y=!((P=y?.[y.length-1])===null||P===void 0)&&P.includes(I)?I-12+b:I+b;break}return{newCalculatedDate:O,newCalculatedMonth:Y}},w=function(E,A,I){for(var L=40,P=E,O=!1,Y=0,q=S(P,A,I),K=q.newCalculatedDate,U=q.newCalculatedMonth;!O;){if(Y>=L){K=A,U=I;break}if(h&&K<h){P=kr.ArrowRight;var J=S(P,K,U);K=J.newCalculatedDate,U=J.newCalculatedMonth}if(f&&K>f){P=kr.ArrowLeft;var J=S(P,K,U);K=J.newCalculatedDate,U=J.newCalculatedMonth}if(H7e(K,r.props)){var J=S(P,K,U);K=J.newCalculatedDate,U=J.newCalculatedMonth}else O=!0;Y++}return{newCalculatedDate:K,newCalculatedMonth:U}};if(s===kr.Enter){r.isMonthDisabled(i)||(r.onMonthClick(a,i),u?.(c));return}var k=w(s,d,i),C=k.newCalculatedDate,D=k.newCalculatedMonth;switch(s){case kr.ArrowRight:case kr.ArrowLeft:case kr.ArrowUp:case kr.ArrowDown:r.handleMonthNavigation(D,C);break}}},r.getVerticalOffset=function(a){var s,i;return(i=(s=OD[a])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},r.onMonthKeyDown=function(a,s){var i=r.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=a.key;c!==kr.Tab&&a.preventDefault(),o||r.handleKeyboardNavigation(a,c,s),l&&l(a)},r.onQuarterClick=function(a,s){var i=i0(r.props.day,s);RN(i,r.props)||r.handleDayClick(w9(i),a)},r.onQuarterMouseEnter=function(a){var s=i0(r.props.day,a);RN(s,r.props)||r.handleDayMouseEnter(w9(s))},r.handleQuarterNavigation=function(a,s){var i,o,l,c;r.isDisabled(s)||r.isExcluded(s)||((o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.QUARTER_REFS[a-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},r.onQuarterKeyDown=function(a,s){var i,o,l=a.key;if(!r.props.disabledKeyboardNavigation)switch(l){case kr.Enter:r.onQuarterClick(a,s),(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,r.props.selected);break;case kr.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,bP(r.props.preSelection,1));break;case kr.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,oQ(r.props.preSelection));break}},r.isMonthDisabledForLabelDate=function(a){var s,i=r.props,o=i.day,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=Vc(o,a);return{isDisabled:(s=(l||c||d||u)&&fQ(h,r.props))!==null&&s!==void 0?s:!1,labelDate:h}},r.isMonthDisabled=function(a){var s=r.isMonthDisabledForLabelDate(a).isDisabled;return s},r.getMonthClassNames=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,d=s.monthClassName,u=d?d(Vc(i,a)):void 0,h=r.getSelection();return ia("react-datepicker__month-text","react-datepicker__month-".concat(a),u,{"react-datepicker__month-text--disabled":r.isMonthDisabled(a),"react-datepicker__month-text--selected":h?r.isSelectMonthInList(i,a,h):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&c&&r.isSelectedMonth(i,a,c)&&!r.isMonthSelected()&&!r.isMonthDisabled(a),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(a),"react-datepicker__month-text--in-range":o&&l?MN(o,l,a,i):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(a),"react-datepicker__month-text--range-end":r.isRangeEndMonth(a),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(a),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(a),"react-datepicker__month-text--today":r.isCurrentMonth(i,a)})},r.getTabIndex=function(a){if(r.props.preSelection==null)return"-1";var s=Io(r.props.preSelection),i=r.isMonthDisabledForLabelDate(s).isDisabled,o=a===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getQuarterTabIndex=function(a){if(r.props.preSelection==null)return"-1";var s=Cx(r.props.preSelection),i=RN(r.props.day,r.props),o=a===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getAriaLabel=function(a){var s=r.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,d=s.day,u=s.locale,h=Vc(d,a),f=r.isDisabled(h)||r.isExcluded(h)?c:o;return"".concat(f," ").concat(es(h,"MMMM yyyy",u))},r.getQuarterClassNames=function(a){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,d=s.minDate,u=s.maxDate,h=s.excludeDates,f=s.includeDates,p=s.filterDate,x=s.preSelection,g=s.disabledKeyboardNavigation,b=(d||u||h||f||p)&&RN(i0(i,a),r.props);return ia("react-datepicker__quarter-text","react-datepicker__quarter-".concat(a),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":c?r.isSelectedQuarter(i,a,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!g&&x&&r.isSelectedQuarter(i,a,x)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(a),"react-datepicker__quarter-text--in-range":o&&l?LN(o,l,a,i):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(a),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(a),"react-datepicker__quarter-text--today":r.isCurrentQuarter(i,a)})},r.getMonthContent=function(a){var s=r.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,d=hQ(a,l),u=CP(a,l);return o?o(a,d,u,c):i?u:d},r.getQuarterContent=function(a){var s,i=r.props,o=i.renderQuarterContent,l=i.locale,c=z7e(a,l);return(s=o?.(a,c))!==null&&s!==void 0?s:c},r.renderMonths=function(){var a,s=r.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,d=(a=OD[L9(o,i)])===null||a===void 0?void 0:a.grid;return d?.map(function(u,h){return Yt.createElement("div",{className:"react-datepicker__month-wrapper",key:h},u.map(function(f,p){return Yt.createElement("div",{ref:r.MONTH_REFS[f],key:p,onClick:function(x){r.onMonthClick(x,f)},onKeyDown:function(x){xQ(x)&&(x.preventDefault(),x.key=kr.Enter),r.onMonthKeyDown(x,f)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(f)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(f)}:void 0,tabIndex:Number(r.getTabIndex(f)),className:r.getMonthClassNames(f),"aria-disabled":r.isMonthDisabled(f),role:"option","aria-label":r.getAriaLabel(f),"aria-current":r.isCurrentMonth(l,f)?"date":void 0,"aria-selected":c?r.isSelectedMonth(l,f,c):void 0},r.getMonthContent(f))}))})},r.renderQuarters=function(){var a=r.props,s=a.day,i=a.selected,o=[1,2,3,4];return Yt.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return Yt.createElement("div",{key:c,ref:r.QUARTER_REFS[c],role:"option",onClick:function(d){r.onQuarterClick(d,l)},onKeyDown:function(d){r.onQuarterKeyDown(d,l)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(l)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(l)}:void 0,className:r.getQuarterClassNames(l),"aria-selected":i?r.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(r.getQuarterTabIndex(l)),"aria-current":r.isCurrentQuarter(s,l)?"date":void 0},r.getQuarterContent(l))}))},r.getClassNames=function(){var a=r.props,s=a.selectingDate,i=a.selectsStart,o=a.selectsEnd,l=a.showMonthYearPicker,c=a.showQuarterYearPicker,d=a.showWeekPicker;return ia("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},r}return t.prototype.getSelection=function(){var r=this.props,a=r.selected,s=r.selectedDates,i=r.selectsMultiple;if(i)return s;if(a)return[a]},t.prototype.render=function(){var r=this.props,a=r.showMonthYearPicker,s=r.showQuarterYearPicker,i=r.day,o=r.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return Yt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(es(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},a?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(j.Component),o9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(a){return r.props.month===a},r.renderOptions=function(){return r.props.monthNames.map(function(a,s){return Yt.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:a,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?Yt.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",a)})},r.onChange=function(a){return r.props.onChange(a)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return Yt.createElement(_C,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(j.Component),l9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(a){return a.map(function(s,i){return Yt.createElement("option",{key:s,value:i},s)})},r.renderSelectMode=function(a){return Yt.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(a))},r.renderReadView=function(a,s){return Yt.createElement("div",{key:"read",style:{visibility:a?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},Yt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Yt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(a){return Yt.createElement(o9e,Wa({key:"dropdown"},r.props,{monthNames:a,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(a){var s=r.state.dropdownVisible,i=[r.renderReadView(!s,a)];return s&&i.unshift(r.renderDropdown(a)),i},r.onChange=function(a){r.toggleDropdown(),a!==r.props.month&&r.props.onChange(a)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,a=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return hQ(i,r.props.locale)}:function(i){return CP(i,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(a);break;case"select":s=this.renderSelectMode(a);break}return Yt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(j.Component);function c9e(e,t){for(var r=[],a=sf(e),s=sf(t);!rp(a,s);)r.push(hn(a)),a=$d(a,1);return r}var d9e=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.renderOptions=function(){return a.state.monthYearsList.map(function(s){var i=q3(s),o=Pu(a.props.date,s)&&Go(a.props.date,s);return Yt.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:a.onChange.bind(a,i),"aria-selected":o?"true":void 0},o?Yt.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",es(s,a.props.dateFormat,a.props.locale))})},a.onChange=function(s){return a.props.onChange(s)},a.handleClickOutside=function(){a.props.onCancel()},a.state={monthYearsList:c9e(a.props.minDate,a.props.maxDate)},a}return t.prototype.render=function(){var r=ia({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Yt.createElement(_C,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(j.Component),u9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var a=sf(r.props.minDate),s=sf(r.props.maxDate),i=[];!rp(a,s);){var o=q3(a);i.push(Yt.createElement("option",{key:o,value:o},es(a,r.props.dateFormat,r.props.locale))),a=$d(a,1)}return i},r.onSelectChange=function(a){r.onChange(parseInt(a.target.value))},r.renderSelectMode=function(){return Yt.createElement("select",{value:q3(sf(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(a){var s=es(r.props.date,r.props.dateFormat,r.props.locale);return Yt.createElement("div",{key:"read",style:{visibility:a?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},Yt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Yt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return Yt.createElement(d9e,Wa({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var a=r.state.dropdownVisible,s=[r.renderReadView(!a)];return a&&s.unshift(r.renderDropdown()),s},r.onChange=function(a){r.toggleDropdown();var s=hn(a);Pu(r.props.date,s)&&Go(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Yt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(j.Component),h9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var a,s,i;r.list&&(r.list.scrollTop=(i=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(a=r.header)===null||a===void 0?void 0:a.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&i!==void 0?i:0)})},r.handleClick=function(a){var s,i;(r.props.minTime||r.props.maxTime)&&E9(a,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&_9(a,r.props)||(i=(s=r.props).onChange)===null||i===void 0||i.call(s,a)},r.isSelectedTime=function(a){return r.props.selected&&e9e(r.props.selected,a)},r.isDisabledTime=function(a){return(r.props.minTime||r.props.maxTime)&&E9(a,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&_9(a,r.props)},r.liClasses=function(a){var s,i=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(a):void 0];return r.isSelectedTime(a)&&i.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(a)&&i.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(af(a)*3600+nf(a)*60+qm(a))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},r.handleOnKeyDown=function(a,s){var i,o;a.key===kr.Space&&(a.preventDefault(),a.key=kr.Enter),(a.key===kr.ArrowUp||a.key===kr.ArrowLeft)&&a.target instanceof HTMLElement&&a.target.previousSibling&&(a.preventDefault(),a.target.previousSibling instanceof HTMLElement&&a.target.previousSibling.focus()),(a.key===kr.ArrowDown||a.key===kr.ArrowRight)&&a.target instanceof HTMLElement&&a.target.nextSibling&&(a.preventDefault(),a.target.nextSibling instanceof HTMLElement&&a.target.nextSibling.focus()),a.key===kr.Enter&&r.handleClick(s),(o=(i=r.props).handleOnKeyDown)===null||o===void 0||o.call(i,a)},r.renderTimes=function(){for(var a,s=[],i=typeof r.props.format=="string"?r.props.format:"p",o=(a=r.props.intervals)!==null&&a!==void 0?a:t.defaultProps.intervals,l=r.props.selected||r.props.openToDate||hn(),c=sw(l),d=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),u=60*Z7e(l),h=u/o,f=0;f<h;f++){var p=U3(c,f*o);if(s.push(p),d){var x=J7e(c,p,f,o,d);s=s.concat(x)}}var g=s.reduce(function(b,y){return y.getTime()<=l.getTime()?y:b},s[0]);return s.map(function(b){return Yt.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===g&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===g?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},es(b,i,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?Yt.createElement(Yt.Fragment,null):Yt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(a){r.header=a}},Yt.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,a=this.props.monthRef;this.updateContainerHeight(),a&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(a))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,a,s=this.state.height;return Yt.createElement("div",{className:"react-datepicker__time-container ".concat(((a=this.props.todayButton)!==null&&a!==void 0?a:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Yt.createElement("div",{className:"react-datepicker__time"},Yt.createElement("div",{className:"react-datepicker__time-box"},Yt.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,a){return a.offsetTop-(r/2-a.clientHeight/2)},t}(j.Component),B9=3,f9e=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.YEAR_REFS=$u([],Array(a.props.yearItemNumber),!0).map(function(){return j.createRef()}),a.isDisabled=function(s){return Hc(s,{minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,includeDates:a.props.includeDates,filterDate:a.props.filterDate})},a.isExcluded=function(s){return kP(s,{excludeDates:a.props.excludeDates})},a.selectingDate=function(){var s;return(s=a.props.selectingDate)!==null&&s!==void 0?s:a.props.preSelection},a.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=a.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},a.handleYearClick=function(s,i){a.props.onDayClick&&a.props.onDayClick(s,i)},a.handleYearNavigation=function(s,i){var o,l,c,d,u=a.props,h=u.date,f=u.yearItemNumber;if(!(h===void 0||f===void 0)){var p=Mm(h,f).startPeriod;a.isDisabled(i)||a.isExcluded(i)||((l=(o=a.props).setPreSelection)===null||l===void 0||l.call(o,i),s-p<0?a.updateFocusOnPaginate(f-(p-s)):s-p>=f?a.updateFocusOnPaginate(Math.abs(f-(s-p))):(d=(c=a.YEAR_REFS[s-p])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},a.isSameDay=function(s,i){return Ha(s,i)},a.isCurrentYear=function(s){return s===Ea(hn())},a.isRangeStart=function(s){return a.props.startDate&&a.props.endDate&&Pu(Du(hn(),s),a.props.startDate)},a.isRangeEnd=function(s){return a.props.startDate&&a.props.endDate&&Pu(Du(hn(),s),a.props.endDate)},a.isInRange=function(s){return FN(s,a.props.startDate,a.props.endDate)},a.isInSelectingRange=function(s){var i=a.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,d=i.startDate,u=i.endDate;return!(o||l||c)||!a.selectingDate()?!1:o&&u?FN(s,a.selectingDate(),u):l&&d||c&&d&&!u?FN(s,d,a.selectingDate()):!1},a.isSelectingRangeStart=function(s){var i;if(!a.isInSelectingRange(s))return!1;var o=a.props,l=o.startDate,c=o.selectsStart,d=Du(hn(),s);return c?Pu(d,(i=a.selectingDate())!==null&&i!==void 0?i:null):Pu(d,l??null)},a.isSelectingRangeEnd=function(s){var i;if(!a.isInSelectingRange(s))return!1;var o=a.props,l=o.endDate,c=o.selectsEnd,d=o.selectsRange,u=Du(hn(),s);return c||d?Pu(u,(i=a.selectingDate())!==null&&i!==void 0?i:null):Pu(u,l??null)},a.isKeyboardSelected=function(s){if(!(a.props.date===void 0||a.props.selected==null||a.props.preSelection==null)){var i=a.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,d=i.includeDates,u=i.filterDate,h=Xb(Du(a.props.date,s)),f=(o||l||c||d||u)&&iw(s,a.props);return!a.props.disabledKeyboardNavigation&&!a.props.inline&&!Ha(h,Xb(a.props.selected))&&Ha(h,Xb(a.props.preSelection))&&!f}},a.isSelectedYear=function(s){var i=a.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c?.some(function(d){return s===Ea(d)}):!!l&&s===Ea(l)},a.onYearClick=function(s,i){var o=a.props.date;o!==void 0&&a.handleYearClick(Xb(Du(o,i)),s)},a.onYearKeyDown=function(s,i){var o,l,c=s.key,d=a.props,u=d.date,h=d.yearItemNumber,f=d.handleOnKeyDown;if(c!==kr.Tab&&s.preventDefault(),!a.props.disabledKeyboardNavigation)switch(c){case kr.Enter:if(a.props.selected==null)break;a.onYearClick(s,i),(l=(o=a.props).setPreSelection)===null||l===void 0||l.call(o,a.props.selected);break;case kr.ArrowRight:if(a.props.preSelection==null)break;a.handleYearNavigation(i+1,tf(a.props.preSelection,1));break;case kr.ArrowLeft:if(a.props.preSelection==null)break;a.handleYearNavigation(i-1,ag(a.props.preSelection,1));break;case kr.ArrowUp:{if(u===void 0||h===void 0||a.props.preSelection==null)break;var p=Mm(u,h).startPeriod,x=B9,g=i-x;if(g<p){var b=h%x;i>=p&&i<p+b?x=b:x+=b,g=i-x}a.handleYearNavigation(g,ag(a.props.preSelection,x));break}case kr.ArrowDown:{if(u===void 0||h===void 0||a.props.preSelection==null)break;var y=Mm(u,h).endPeriod,x=B9,g=i+x;if(g>y){var b=h%x;i<=y&&i>y-b?x=b:x+=b,g=i+x}a.handleYearNavigation(g,tf(a.props.preSelection,x));break}}f&&f(s)},a.getYearClassNames=function(s){var i=a.props,o=i.date,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=i.filterDate,f=i.yearClassName;return ia("react-datepicker__year-text","react-datepicker__year-".concat(s),o?f?.(Du(o,s)):void 0,{"react-datepicker__year-text--selected":a.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||d||u||h)&&iw(s,a.props),"react-datepicker__year-text--keyboard-selected":a.isKeyboardSelected(s),"react-datepicker__year-text--range-start":a.isRangeStart(s),"react-datepicker__year-text--range-end":a.isRangeEnd(s),"react-datepicker__year-text--in-range":a.isInRange(s),"react-datepicker__year-text--in-selecting-range":a.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":a.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":a.isSelectingRangeEnd(s),"react-datepicker__year-text--today":a.isCurrentYear(s)})},a.getYearTabIndex=function(s){if(a.props.disabledKeyboardNavigation||a.props.preSelection==null)return"-1";var i=Ea(a.props.preSelection),o=iw(s,a.props);return s===i&&!o?"0":"-1"},a.getYearContent=function(s){return a.props.renderYearContent?a.props.renderYearContent(s):s},a}return t.prototype.render=function(){var r=this,a=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var d=Mm(i,o),u=d.startPeriod,h=d.endPeriod,f=function(g){a.push(Yt.createElement("div",{ref:p.YEAR_REFS[g-u],onClick:function(b){r.onYearClick(b,g)},onKeyDown:function(b){xQ(b)&&(b.preventDefault(),b.key=kr.Enter),r.onYearKeyDown(b,g)},tabIndex:Number(p.getYearTabIndex(g)),className:p.getYearClassNames(g),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return l(b,g)},onPointerEnter:p.props.usePointerEvent?function(b){return l(b,g)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return c(b,g)},onPointerLeave:p.props.usePointerEvent?function(b){return c(b,g)}:void 0,key:g,"aria-current":p.isCurrentYear(g)?"date":void 0},p.getYearContent(g)))},p=this,x=u;x<=h;x++)f(x);return Yt.createElement("div",{className:"react-datepicker__year"},Yt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},a))},t}(j.Component);function m9e(e,t,r,a){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;r&&(l=Ea(r)<=o),a&&l&&(l=Ea(a)>=o),l&&s.push(o)}return s}var p9e=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;a.renderOptions=function(){var l=a.props.year,c=a.state.yearsList.map(function(h){return Yt.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:a.onChange.bind(a,h),"aria-selected":l===h?"true":void 0},l===h?Yt.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),d=a.props.minDate?Ea(a.props.minDate):null,u=a.props.maxDate?Ea(a.props.maxDate):null;return(!u||!a.state.yearsList.find(function(h){return h===u}))&&c.unshift(Yt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:a.incrementYears},Yt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!a.state.yearsList.find(function(h){return h===d}))&&c.push(Yt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:a.decrementYears},Yt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},a.onChange=function(l){a.props.onChange(l)},a.handleClickOutside=function(){a.props.onCancel()},a.shiftYears=function(l){var c=a.state.yearsList.map(function(d){return d+l});a.setState({yearsList:c})},a.incrementYears=function(){return a.shiftYears(1)},a.decrementYears=function(){return a.shiftYears(-1)};var s=r.yearDropdownItemNumber,i=r.scrollableYearDropdown,o=s||(i?10:5);return a.state={yearsList:m9e(a.props.year,o,a.props.minDate,a.props.maxDate)},a.dropdownRef=j.createRef(),a}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var a=r.children?Array.from(r.children):null,s=a?a.find(function(i){return i.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=ia({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Yt.createElement(_C,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(j.Component),x9e=function(e){$i(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var a=r.props.minDate?Ea(r.props.minDate):1900,s=r.props.maxDate?Ea(r.props.maxDate):2100,i=[],o=a;o<=s;o++)i.push(Yt.createElement("option",{key:o,value:o},o));return i},r.onSelectChange=function(a){r.onChange(parseInt(a.target.value))},r.renderSelectMode=function(){return Yt.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(a){return Yt.createElement("div",{key:"read",style:{visibility:a?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},Yt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Yt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return Yt.createElement(p9e,Wa({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var a=r.state.dropdownVisible,s=[r.renderReadView(!a)];return a&&s.unshift(r.renderDropdown()),s},r.onChange=function(a){r.toggleDropdown(),a!==r.props.year&&r.props.onChange(a)},r.toggleDropdown=function(a){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,a)})},r.handleYearChange=function(a,s){var i;(i=r.onSelect)===null||i===void 0||i.call(r,a,s),r.setOpen()},r.onSelect=function(a,s){var i,o;(o=(i=r.props).onSelect)===null||o===void 0||o.call(i,a,s)},r.setOpen=function(){var a,s;(s=(a=r.props).setOpen)===null||s===void 0||s.call(a,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Yt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(j.Component),v9e=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],g9e=function(e){var t=(e.className||"").split(/\s+/);return v9e.some(function(r){return t.indexOf(r)>=0})},b9e=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.monthContainer=void 0,a.handleClickOutside=function(s){a.props.onClickOutside(s)},a.setClickOutsideRef=function(){return a.containerRef.current},a.handleDropdownFocus=function(s){var i,o;g9e(s.target)&&((o=(i=a.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},a.getDateInView=function(){var s=a.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=mQ(a.props),d=pQ(a.props),u=hn(),h=l||o||i;return h||(c&&zx(u,c)?c:d&&rp(u,d)?d:u)},a.increaseMonth=function(){a.setState(function(s){var i=s.date;return{date:$d(i,1)}},function(){return a.handleMonthChange(a.state.date)})},a.decreaseMonth=function(){a.setState(function(s){var i=s.date;return{date:kx(i,1)}},function(){return a.handleMonthChange(a.state.date)})},a.handleDayClick=function(s,i,o){a.props.onSelect(s,i,o),a.props.setPreSelection&&a.props.setPreSelection(s)},a.handleDayMouseEnter=function(s){a.setState({selectingDate:s}),a.props.onDayMouseEnter&&a.props.onDayMouseEnter(s)},a.handleMonthMouseLeave=function(){a.setState({selectingDate:void 0}),a.props.onMonthMouseLeave&&a.props.onMonthMouseLeave()},a.handleYearMouseEnter=function(s,i){a.setState({selectingDate:Du(hn(),i)}),a.props.onYearMouseEnter&&a.props.onYearMouseEnter(s,i)},a.handleYearMouseLeave=function(s,i){a.props.onYearMouseLeave&&a.props.onYearMouseLeave(s,i)},a.handleYearChange=function(s){var i,o,l,c;(o=(i=a.props).onYearChange)===null||o===void 0||o.call(i,s),a.setState({isRenderAriaLiveMessage:!0}),a.props.adjustDateOnChange&&(a.props.onSelect(s),(c=(l=a.props).setOpen)===null||c===void 0||c.call(l,!0)),a.props.setPreSelection&&a.props.setPreSelection(s)},a.getEnabledPreSelectionDateForMonth=function(s){if(!Hc(s,a.props))return s;for(var i=sf(s),o=U7e(s),l=H6e(o,i),c=null,d=0;d<=l;d++){var u=Bd(i,d);if(!Hc(u,a.props)){c=u;break}}return c},a.handleMonthChange=function(s){var i,o,l,c=(i=a.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;a.handleCustomMonthChange(c),a.props.adjustDateOnChange&&(a.props.onSelect(c),(l=(o=a.props).setOpen)===null||l===void 0||l.call(o,!0)),a.props.setPreSelection&&a.props.setPreSelection(c)},a.handleCustomMonthChange=function(s){var i,o;(o=(i=a.props).onMonthChange)===null||o===void 0||o.call(i,s),a.setState({isRenderAriaLiveMessage:!0})},a.handleMonthYearChange=function(s){a.handleYearChange(s),a.handleMonthChange(s)},a.changeYear=function(s){a.setState(function(i){var o=i.date;return{date:Du(o,Number(s))}},function(){return a.handleYearChange(a.state.date)})},a.changeMonth=function(s){a.setState(function(i){var o=i.date;return{date:Vc(o,Number(s))}},function(){return a.handleMonthChange(a.state.date)})},a.changeMonthYear=function(s){a.setState(function(i){var o=i.date;return{date:Du(Vc(o,Io(s)),Ea(s))}},function(){return a.handleMonthYearChange(a.state.date)})},a.header=function(s){s===void 0&&(s=a.state.date);var i=zm(s,a.props.locale,a.props.calendarStartDay),o=[];return a.props.showWeekNumbers&&o.push(Yt.createElement("div",{key:"W",className:"react-datepicker__day-name"},a.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=Bd(i,l),d=a.formatWeekday(c,a.props.locale),u=a.props.weekDayClassName?a.props.weekDayClassName(c):void 0;return Yt.createElement("div",{key:l,"aria-label":es(c,"EEEE",a.props.locale),className:ia("react-datepicker__day-name",u)},d)}))},a.formatWeekday=function(s,i){return a.props.formatWeekDay?$7e(s,a.props.formatWeekDay,i):a.props.useWeekdaysShort?q7e(s,i):V7e(s,i)},a.decreaseYear=function(){a.setState(function(s){var i,o=s.date;return{date:ag(o,a.props.showYearPicker?(i=a.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return a.handleYearChange(a.state.date)})},a.clearSelectingDate=function(){a.setState({selectingDate:void 0})},a.renderPreviousButton=function(){var s,i,o;if(!a.props.renderCustomHeader){var l=(s=a.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=a.props.showPreviousMonths?l-1:0,d=(i=a.props.monthSelectedIn)!==null&&i!==void 0?i:c,u=kx(a.state.date,d),h;switch(!0){case a.props.showMonthYearPicker:h=T9(a.state.date,a.props);break;case a.props.showYearPicker:h=Y7e(a.state.date,a.props);break;case a.props.showQuarterYearPicker:h=W7e(a.state.date,a.props);break;default:h=D9(u,a.props);break}if(!(!((o=a.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!a.props.showDisabledMonthNavigation&&h||a.props.showTimeSelectOnly)){var f=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],x=a.decreaseMonth;(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker)&&(x=a.decreaseYear),h&&a.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),x=void 0);var g=a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker,b=a.props,y=b.previousMonthButtonLabel,S=y===void 0?t.defaultProps.previousMonthButtonLabel:y,w=b.previousYearButtonLabel,k=w===void 0?t.defaultProps.previousYearButtonLabel:w,C=a.props,D=C.previousMonthAriaLabel,E=D===void 0?typeof S=="string"?S:"Previous Month":D,A=C.previousYearAriaLabel,I=A===void 0?typeof k=="string"?k:"Previous Year":A;return Yt.createElement("button",{type:"button",className:p.join(" "),onClick:x,onKeyDown:a.props.handleOnKeyDown,"aria-label":g?I:E},Yt.createElement("span",{className:f.join(" ")},g?k:S))}}},a.increaseYear=function(){a.setState(function(s){var i,o=s.date;return{date:tf(o,a.props.showYearPicker?(i=a.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return a.handleYearChange(a.state.date)})},a.renderNextButton=function(){var s;if(!a.props.renderCustomHeader){var i;switch(!0){case a.props.showMonthYearPicker:i=I9(a.state.date,a.props);break;case a.props.showYearPicker:i=K7e(a.state.date,a.props);break;case a.props.showQuarterYearPicker:i=G7e(a.state.date,a.props);break;default:i=A9(a.state.date,a.props);break}if(!(!((s=a.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!a.props.showDisabledMonthNavigation&&i||a.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];a.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),a.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=a.increaseMonth;(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker)&&(c=a.increaseYear),i&&a.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker,u=a.props,h=u.nextMonthButtonLabel,f=h===void 0?t.defaultProps.nextMonthButtonLabel:h,p=u.nextYearButtonLabel,x=p===void 0?t.defaultProps.nextYearButtonLabel:p,g=a.props,b=g.nextMonthAriaLabel,y=b===void 0?typeof f=="string"?f:"Next Month":b,S=g.nextYearAriaLabel,w=S===void 0?typeof x=="string"?x:"Next Year":S;return Yt.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:a.props.handleOnKeyDown,"aria-label":d?w:y},Yt.createElement("span",{className:l.join(" ")},d?x:f))}}},a.renderCurrentMonth=function(s){s===void 0&&(s=a.state.date);var i=["react-datepicker__current-month"];return a.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),a.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),a.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),Yt.createElement("h2",{className:i.join(" ")},es(s,a.props.dateFormat,a.props.locale))},a.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!a.props.showYearDropdown||s))return Yt.createElement(x9e,Wa({},t.defaultProps,a.props,{date:a.state.date,onChange:a.changeYear,year:Ea(a.state.date)}))},a.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!a.props.showMonthDropdown||s))return Yt.createElement(l9e,Wa({},t.defaultProps,a.props,{month:Io(a.state.date),onChange:a.changeMonth}))},a.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!a.props.showMonthYearDropdown||s))return Yt.createElement(u9e,Wa({},t.defaultProps,a.props,{date:a.state.date,onChange:a.changeMonthYear}))},a.handleTodayButtonClick=function(s){a.props.onSelect(S9(),s),a.props.setPreSelection&&a.props.setPreSelection(S9())},a.renderTodayButton=function(){if(!(!a.props.todayButton||a.props.showTimeSelectOnly))return Yt.createElement("div",{className:"react-datepicker__today-button",onClick:a.handleTodayButtonClick},a.props.todayButton)},a.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return Yt.createElement("div",{className:"react-datepicker__header ".concat(a.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},a.renderCurrentMonth(i),Yt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(a.props.dropdownMode),onFocus:a.handleDropdownFocus},a.renderMonthDropdown(o!==0),a.renderMonthYearDropdown(o!==0),a.renderYearDropdown(o!==0)),Yt.createElement("div",{className:"react-datepicker__day-names"},a.header(i)))},a.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(a.props.showTimeSelect&&!a.state.monthContainer||a.props.showTimeSelectOnly)return null;var d=D9(a.state.date,a.props),u=A9(a.state.date,a.props),h=T9(a.state.date,a.props),f=I9(a.state.date,a.props),p=!a.props.showMonthYearPicker&&!a.props.showQuarterYearPicker&&!a.props.showYearPicker;return Yt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:a.props.onDropdownFocus},(o=(i=a.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,Wa(Wa({},a.state),{customHeaderCount:c,monthDate:l,changeMonth:a.changeMonth,changeYear:a.changeYear,decreaseMonth:a.decreaseMonth,increaseMonth:a.increaseMonth,decreaseYear:a.decreaseYear,increaseYear:a.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:h,nextYearButtonDisabled:f})),p&&Yt.createElement("div",{className:"react-datepicker__day-names"},a.header(l)))},a.renderYearHeader=function(s){var i=s.monthDate,o=a.props,l=o.showYearPicker,c=o.yearItemNumber,d=c===void 0?t.defaultProps.yearItemNumber:c,u=Mm(i,d),h=u.startPeriod,f=u.endPeriod;return Yt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(f):Ea(i))},a.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case a.props.renderCustomHeader!==void 0:return a.renderCustomHeader(c);case(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker):return a.renderYearHeader(c);default:return a.renderDefaultHeader(c)}},a.renderMonths=function(){var s,i;if(!(a.props.showTimeSelectOnly||a.props.showYearPicker)){for(var o=[],l=(s=a.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=a.props.showPreviousMonths?l-1:0,d=a.props.showMonthYearPicker||a.props.showQuarterYearPicker?tf(a.state.date,c):kx(a.state.date,c),u=(i=a.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var f=h-u+c,p=a.props.showMonthYearPicker||a.props.showQuarterYearPicker?tf(d,f):$d(d,f),x="month-".concat(h),g=h<l-1,b=h>0;o.push(Yt.createElement("div",{key:x,ref:function(y){a.monthContainer=y??void 0},className:"react-datepicker__month-container"},a.renderHeader({monthDate:p,i:h}),Yt.createElement(i9e,Wa({},t.defaultProps,a.props,{containerRef:a.containerRef,ariaLabelPrefix:a.props.monthAriaLabelPrefix,day:p,onDayClick:a.handleDayClick,handleOnKeyDown:a.props.handleOnDayKeyDown,handleOnMonthKeyDown:a.props.handleOnKeyDown,onDayMouseEnter:a.handleDayMouseEnter,onMouseLeave:a.handleMonthMouseLeave,orderInDisplay:h,selectingDate:a.state.selectingDate,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:b}))))}return o}},a.renderYears=function(){if(!a.props.showTimeSelectOnly&&a.props.showYearPicker)return Yt.createElement("div",{className:"react-datepicker__year--container"},a.renderHeader({monthDate:a.state.date}),Yt.createElement(f9e,Wa({},t.defaultProps,a.props,{selectingDate:a.state.selectingDate,date:a.state.date,onDayClick:a.handleDayClick,clearSelectingDate:a.clearSelectingDate,onYearMouseEnter:a.handleYearMouseEnter,onYearMouseLeave:a.handleYearMouseLeave})))},a.renderTimeSection=function(){if(a.props.showTimeSelect&&(a.state.monthContainer||a.props.showTimeSelectOnly))return Yt.createElement(h9e,Wa({},t.defaultProps,a.props,{onChange:a.props.onTimeChange,format:a.props.timeFormat,intervals:a.props.timeIntervals,monthRef:a.state.monthContainer}))},a.renderInputTimeSection=function(){var s=a.props.selected?new Date(a.props.selected):void 0,i=s&&EC(s)&&!!a.props.selected,o=i?"".concat(O9(s.getHours()),":").concat(O9(s.getMinutes())):"";if(a.props.showTimeInput)return Yt.createElement(t9e,Wa({},t.defaultProps,a.props,{date:s,timeString:o,onChange:a.props.onTimeChange}))},a.renderAriaLiveRegion=function(){var s,i=Mm(a.state.date,(s=a.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return a.props.showYearPicker?c="".concat(o," - ").concat(l):a.props.showMonthYearPicker||a.props.showQuarterYearPicker?c=Ea(a.state.date):c="".concat(CP(Io(a.state.date),a.props.locale)," ").concat(Ea(a.state.date)),Yt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},a.state.isRenderAriaLiveMessage&&c)},a.renderChildren=function(){if(a.props.children)return Yt.createElement("div",{className:"react-datepicker__children-container"},a.props.children)},a.containerRef=j.createRef(),a.state={date:a.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},a}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:q1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var a=this;if(this.props.preSelection&&(!Ha(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Go(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&a.handleCustomMonthChange(a.state.date)})}else this.props.openToDate&&!Ha(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||P7e;return Yt.createElement(_C,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Yt.createElement("div",{style:{display:"contents"},ref:this.containerRef},Yt.createElement(r,{className:ia("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(j.Component),y9e=function(e){var t=e.icon,r=e.className,a=r===void 0?"":r,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return Yt.createElement("i",{className:"".concat(i," ").concat(t," ").concat(a),"aria-hidden":"true",onClick:s});if(Yt.isValidElement(t)){var o=t;return Yt.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(a),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return Yt.createElement("svg",{className:"".concat(i," ").concat(a),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Yt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},vQ=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.portalRoot=null,a.el=document.createElement("div"),a}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return wee.createPortal(this.props.children,this.el)},t}(j.Component),j9e="[tabindex], a, button, input, select, textarea",N9e=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},gQ=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.getTabChildren=function(){var s;return Array.prototype.slice.call((s=a.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(j9e),1,-1).filter(N9e)},a.handleFocusStart=function(){var s=a.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},a.handleFocusEnd=function(){var s=a.getTabChildren();s&&s.length>1&&s[0].focus()},a.tabLoopRef=j.createRef(),a}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?Yt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Yt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Yt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(j.Component);function w9e(e){var t=function(r){var a,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,i=j.useRef(null),o=I7e(Wa({open:!s,whileElementsMounted:sY,placement:r.popperPlacement,middleware:$u([b7e({padding:15}),g7e(10),y7e({element:i})],(a=r.popperModifiers)!==null&&a!==void 0?a:[],!0)},r.popperProps)),l=Wa(Wa({},r),{hidePopper:s,popperProps:Wa(Wa({},o),{arrowRef:i})});return Yt.createElement(e,Wa({},l))};return t}var S9e=function(e){$i(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,a=r.className,s=r.wrapperClassName,i=r.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=r.popperComponent,c=r.targetComponent,d=r.enableTabLoop,u=r.popperOnKeyDown,h=r.portalId,f=r.portalHost,p=r.popperProps,x=r.showArrow,g=void 0;if(!o){var b=ia("react-datepicker-popper",a);g=Yt.createElement(gQ,{enableTabLoop:d},Yt.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:u},l,x&&Yt.createElement(C7e,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(g=j.createElement(this.props.popperContainer,{},g)),h&&!o&&(g=Yt.createElement(vQ,{portalId:h,portalHost:f},g));var y=ia("react-datepicker-wrapper",s);return Yt.createElement(Yt.Fragment,null,Yt.createElement("div",{ref:p.refs.setReference,className:y},c),g)},t}(j.Component),C9e=w9e(S9e),U9="react-datepicker-ignore-onclickoutside";function k9e(e,t){return e&&t?Io(e)!==Io(t)||Ea(e)!==Ea(t):e!==t}var MD="Date input not valid.",$9=function(e){$i(t,e);function t(r){var a=e.call(this,r)||this;return a.calendar=null,a.input=null,a.getPreSelection=function(){return a.props.openToDate?a.props.openToDate:a.props.selectsEnd&&a.props.startDate?a.props.startDate:a.props.selectsStart&&a.props.endDate?a.props.endDate:hn()},a.modifyHolidays=function(){var s;return(s=a.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return EC(l)?$u($u([],i,!0),[Wa(Wa({},o),{date:l})],!1):i},[])},a.calcInitialState=function(){var s,i=a.getPreSelection(),o=mQ(a.props),l=pQ(a.props),c=o&&zx(i,sw(o))?o:l&&rp(i,C9(l))?l:i;return{open:a.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=a.props.selectsRange?a.props.startDate:a.props.selected)!==null&&s!==void 0?s:c,highlightDates:P9(a.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},a.resetHiddenStatus=function(){a.setState(Wa(Wa({},a.state),{wasHidden:!1}))},a.setHiddenStatus=function(){a.setState(Wa(Wa({},a.state),{wasHidden:!0}))},a.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&a.setHiddenStatus()},a.clearPreventFocusTimeout=function(){a.preventFocusTimeout&&clearTimeout(a.preventFocusTimeout)},a.setFocus=function(){var s,i;(i=(s=a.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},a.setBlur=function(){var s,i;(i=(s=a.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),a.cancelFocusInput()},a.deferBlur=function(){requestAnimationFrame(function(){a.setBlur()})},a.setOpen=function(s,i){i===void 0&&(i=!1),a.setState({open:s,preSelection:s&&a.state.open?a.state.preSelection:a.calcInitialState().preSelection,lastPreSelectChange:RD},function(){s||a.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&a.deferBlur(),a.setState({inputValue:null})})})},a.inputOk=function(){return rf(a.state.preSelection)},a.isCalendarOpen=function(){return a.props.open===void 0?a.state.open&&!a.props.disabled&&!a.props.readOnly:a.props.open},a.handleFocus=function(s){var i,o,l=a.state.wasHidden,c=l?a.state.open:!0;l&&a.resetHiddenStatus(),a.state.preventFocus||((o=(i=a.props).onFocus)===null||o===void 0||o.call(i,s),c&&!a.props.preventOpenOnFocus&&!a.props.readOnly&&a.setOpen(!0)),a.setState({focused:!0})},a.sendFocusBackToInput=function(){a.preventFocusTimeout&&a.clearPreventFocusTimeout(),a.setState({preventFocus:!0},function(){a.preventFocusTimeout=setTimeout(function(){a.setFocus(),a.setState({preventFocus:!1})})})},a.cancelFocusInput=function(){clearTimeout(a.inputFocusTimeout),a.inputFocusTimeout=void 0},a.deferFocusInput=function(){a.cancelFocusInput(),a.inputFocusTimeout=setTimeout(function(){return a.setFocus()},1)},a.handleDropdownFocus=function(){a.cancelFocusInput()},a.handleBlur=function(s){var i,o;(!a.state.open||a.props.withPortal||a.props.showTimeInput)&&((o=(i=a.props).onBlur)===null||o===void 0||o.call(i,s)),a.state.open&&a.props.open===!1&&a.setOpen(!1),a.setState({focused:!1})},a.handleCalendarClickOutside=function(s){var i,o;a.props.inline||a.setOpen(!1),(o=(i=a.props).onClickOutside)===null||o===void 0||o.call(i,s),a.props.withPortal&&s.preventDefault()},a.handleChange=function(){for(var s,i,o,l,c,d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];var h=d[0];if(!(a.props.onChangeRaw&&(a.props.onChangeRaw.apply(a,d),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){a.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:_9e});var f=a.props,p=f.selectsRange,x=f.startDate,g=f.endDate,b=(s=a.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=a.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,S=h?.target instanceof HTMLInputElement?h.target.value:"";if(p){var w=S.split(b.includes("-")?uQ:"-",2).map(function(P){return P.trim()}),k=w[0],C=w[1],D=ID(k??"",b,a.props.locale,y),E=ID(C??"",b,a.props.locale,y),A=x?.getTime()!==D?.getTime(),I=g?.getTime()!==E?.getTime();if(!A&&!I||D&&Hc(D,a.props)||E&&Hc(E,a.props))return;(l=(o=a.props).onChange)===null||l===void 0||l.call(o,[D,E],h)}else{var L=ID(S,b,a.props.locale,y,(c=a.props.selected)!==null&&c!==void 0?c:void 0);(L||!S)&&a.setSelected(L,h,!0)}}},a.handleSelect=function(s,i,o){if(!a.props.readOnly){if(a.props.shouldCloseOnSelect&&!a.props.showTimeSelect&&a.sendFocusBackToInput(),a.props.onChangeRaw&&a.props.onChangeRaw(i),a.setSelected(s,i,!1,o),a.props.showDateSelect&&a.setState({isRenderAriaLiveMessage:!0}),!a.props.shouldCloseOnSelect||a.props.showTimeSelect)a.setPreSelection(s);else if(!a.props.inline){a.props.selectsRange||a.setOpen(!1);var l=a.props,c=l.startDate,d=l.endDate;c&&!d&&(a.props.swapRange||!F9(s,c))&&a.setOpen(!1)}}},a.setSelected=function(s,i,o,l){var c,d,u=s;if(a.props.showYearPicker){if(u!==null&&iw(Ea(u),a.props))return}else if(a.props.showMonthYearPicker){if(u!==null&&fQ(u,a.props))return}else if(u!==null&&Hc(u,a.props))return;var h=a.props,f=h.onChange,p=h.selectsRange,x=h.startDate,g=h.endDate,b=h.selectsMultiple,y=h.selectedDates,S=h.minTime,w=h.swapRange;if(!fx(a.props.selected,u)||a.props.allowSameDay||p||b)if(u!==null&&(a.props.selected&&(!o||!a.props.showTimeSelect&&!a.props.showTimeSelectOnly&&!a.props.showTimeInput)&&(u=PD(u,{hour:af(a.props.selected),minute:nf(a.props.selected),second:qm(a.props.selected)})),!o&&(a.props.showTimeSelect||a.props.showTimeSelectOnly)&&S&&(u=PD(u,{hour:S.getHours(),minute:S.getMinutes(),second:S.getSeconds()})),a.props.inline||a.setState({preSelection:u}),a.props.focusSelectedMonth||a.setState({monthSelectedIn:l})),p){var k=!x&&!g,C=x&&!g,D=x&&g;k?f?.([u,null],i):C&&(u===null?f?.([null,null],i):F9(u,x)?f?.(w?[u,x]:[u,null],i):f?.([x,u],i)),D&&f?.([u,null],i)}else if(b){if(u!==null)if(!y?.length)f?.([u],i);else{var E=y.some(function(I){return Ha(I,u)});if(E){var A=y.filter(function(I){return!Ha(I,u)});f?.(A,i)}else f?.($u($u([],y,!0),[u],!1),i)}}else f?.(u,i);o||((d=(c=a.props).onSelect)===null||d===void 0||d.call(c,u,i),a.setState({inputValue:null}))},a.setPreSelection=function(s){if(!a.props.readOnly){var i=rf(a.props.minDate),o=rf(a.props.maxDate),l=!0;if(s){var c=sw(s);if(i&&o)l=Qb(s,a.props.minDate,a.props.maxDate);else if(i){var d=sw(a.props.minDate);l=rp(s,d)||fx(c,d)}else if(o){var u=C9(a.props.maxDate);l=zx(s,u)||fx(c,u)}}l&&a.setState({preSelection:s})}},a.toggleCalendar=function(){a.setOpen(!a.state.open)},a.handleTimeChange=function(s){var i,o;if(!(a.props.selectsRange||a.props.selectsMultiple)){var l=a.props.selected?a.props.selected:a.getPreSelection(),c=a.props.selected?s:PD(l,{hour:af(s),minute:nf(s)});a.setState({preSelection:c}),(o=(i=a.props).onChange)===null||o===void 0||o.call(i,c),a.props.shouldCloseOnSelect&&!a.props.showTimeInput&&(a.sendFocusBackToInput(),a.setOpen(!1)),a.props.showTimeInput&&a.setOpen(!0),(a.props.showTimeSelectOnly||a.props.showTimeSelect)&&a.setState({isRenderAriaLiveMessage:!0}),a.setState({inputValue:null})}},a.onInputClick=function(){var s,i;!a.props.disabled&&!a.props.readOnly&&a.setOpen(!0),(i=(s=a.props).onInputClick)===null||i===void 0||i.call(s)},a.onInputKeyDown=function(s){var i,o,l,c,d,u;(o=(i=a.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!a.state.open&&!a.props.inline&&!a.props.preventOpenOnFocus){(h===kr.ArrowDown||h===kr.ArrowUp||h===kr.Enter)&&((l=a.onInputClick)===null||l===void 0||l.call(a));return}if(a.state.open){if(h===kr.ArrowDown||h===kr.ArrowUp){s.preventDefault();var f=a.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":a.props.showWeekPicker&&a.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':a.props.showFullMonthYearPicker||a.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=a.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&a.calendar.containerRef.current.querySelector(f);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var x=hn(a.state.preSelection);h===kr.Enter?(s.preventDefault(),s.target.blur(),a.inputOk()&&a.state.lastPreSelectChange===RD?(a.handleSelect(x,s),!a.props.shouldCloseOnSelect&&a.setPreSelection(x)):a.setOpen(!1)):h===kr.Escape?(s.preventDefault(),s.target.blur(),a.sendFocusBackToInput(),a.setOpen(!1)):h===kr.Tab&&a.setOpen(!1),a.inputOk()||(u=(d=a.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:MD})}},a.onPortalKeyDown=function(s){var i=s.key;i===kr.Escape&&(s.preventDefault(),a.setState({preventFocus:!0},function(){a.setOpen(!1),setTimeout(function(){a.setFocus(),a.setState({preventFocus:!1})})}))},a.onDayKeyDown=function(s){var i,o,l,c,d,u,h=a.props,f=h.minDate,p=h.maxDate,x=h.disabledKeyboardNavigation,g=h.showWeekPicker,b=h.shouldCloseOnSelect,y=h.locale,S=h.calendarStartDay,w=h.adjustDateOnChange,k=h.inline;if((o=(i=a.props).onKeyDown)===null||o===void 0||o.call(i,s),!x){var C=s.key,D=s.shiftKey,E=hn(a.state.preSelection),A=function(K,U){var J=U;switch(K){case kr.ArrowRight:J=g?W2(U,1):Bd(U,1);break;case kr.ArrowLeft:J=g?b9(U):HBe(U);break;case kr.ArrowUp:J=b9(U);break;case kr.ArrowDown:J=W2(U,1);break;case kr.PageUp:J=D?ag(U,1):kx(U,1);break;case kr.PageDown:J=D?tf(U,1):$d(U,1);break;case kr.Home:J=zm(U,y,S);break;case kr.End:J=B7e(U);break}return J},I=function(K,U){for(var J=40,F=K,X=!1,Q=0,ie=A(K,U);!X;){if(Q>=J){ie=U;break}f&&ie<f&&(F=kr.ArrowRight,ie=Hc(f,a.props)?A(F,ie):f),p&&ie>p&&(F=kr.ArrowLeft,ie=Hc(p,a.props)?A(F,ie):p),Hc(ie,a.props)?((F===kr.PageUp||F===kr.Home)&&(F=kr.ArrowRight),(F===kr.PageDown||F===kr.End)&&(F=kr.ArrowLeft),ie=A(F,ie)):X=!0,Q++}return ie};if(C===kr.Enter){s.preventDefault(),a.handleSelect(E,s),!b&&a.setPreSelection(E);return}else if(C===kr.Escape){s.preventDefault(),a.setOpen(!1),a.inputOk()||(c=(l=a.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:MD});return}var L=null;switch(C){case kr.ArrowLeft:case kr.ArrowRight:case kr.ArrowUp:case kr.ArrowDown:case kr.PageUp:case kr.PageDown:case kr.Home:case kr.End:L=I(C,E);break}if(!L){(u=(d=a.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:MD});return}if(s.preventDefault(),a.setState({lastPreSelectChange:RD}),w&&a.setSelected(L),a.setPreSelection(L),k){var P=Io(E),O=Io(L),Y=Ea(E),q=Ea(L);P!==O||Y!==q?a.setState({shouldFocusDayInline:!0}):a.setState({shouldFocusDayInline:!1})}}},a.onPopperKeyDown=function(s){var i=s.key;i===kr.Escape&&(s.preventDefault(),a.sendFocusBackToInput(),a.setOpen(!1))},a.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),a.sendFocusBackToInput();var i=a.props,o=i.selectsRange,l=i.onChange;l?.(o?[null,null]:null,s),a.setState({inputValue:null})},a.clear=function(){a.onClearClick()},a.onScroll=function(s){typeof a.props.closeOnScroll=="boolean"&&a.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&a.setOpen(!1):typeof a.props.closeOnScroll=="function"&&a.props.closeOnScroll(s)&&a.setOpen(!1)},a.renderCalendar=function(){var s,i;return!a.props.inline&&!a.isCalendarOpen()?null:Yt.createElement(b9e,Wa({showMonthYearDropdown:void 0,ref:function(o){a.calendar=o}},a.props,a.state,{setOpen:a.setOpen,dateFormat:(s=a.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:a.handleSelect,onClickOutside:a.handleCalendarClickOutside,holidays:Q7e(a.modifyHolidays()),outsideClickIgnoreClass:U9,onDropdownFocus:a.handleDropdownFocus,onTimeChange:a.handleTimeChange,className:a.props.calendarClassName,container:a.props.calendarContainer,handleOnKeyDown:a.props.onKeyDown,handleOnDayKeyDown:a.onDayKeyDown,setPreSelection:a.setPreSelection,dropdownMode:(i=a.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),a.props.children)},a.renderAriaLiveRegion=function(){var s=a.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=a.props.showTimeInput||a.props.showTimeSelect,d=c?"PPPPp":"PPPP",u;return a.props.selectsRange?u="Selected start date: ".concat($c(a.props.startDate,{dateFormat:d,locale:l}),". ").concat(a.props.endDate?"End date: "+$c(a.props.endDate,{dateFormat:d,locale:l}):""):a.props.showTimeSelectOnly?u="Selected time: ".concat($c(a.props.selected,{dateFormat:o,locale:l})):a.props.showYearPicker?u="Selected year: ".concat($c(a.props.selected,{dateFormat:"yyyy",locale:l})):a.props.showMonthYearPicker?u="Selected month: ".concat($c(a.props.selected,{dateFormat:"MMMM yyyy",locale:l})):a.props.showQuarterYearPicker?u="Selected quarter: ".concat($c(a.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):u="Selected date: ".concat($c(a.props.selected,{dateFormat:d,locale:l})),Yt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},a.renderDateInput=function(){var s,i,o,l=ia(a.props.className,(s={},s[U9]=a.state.open,s)),c=a.props.customInput||Yt.createElement("input",{type:"text"}),d=a.props.customInputRef||"ref",u=a.props,h=u.dateFormat,f=h===void 0?t.defaultProps.dateFormat:h,p=u.locale,x=typeof a.props.value=="string"?a.props.value:typeof a.state.inputValue=="string"?a.state.inputValue:a.props.selectsRange?M7e(a.props.startDate,a.props.endDate,{dateFormat:f,locale:p}):a.props.selectsMultiple?R7e((o=a.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:f,locale:p}):$c(a.props.selected,{dateFormat:f,locale:p});return j.cloneElement(c,(i={},i[d]=function(g){a.input=g},i.value=x,i.onBlur=a.handleBlur,i.onChange=a.handleChange,i.onClick=a.onInputClick,i.onFocus=a.handleFocus,i.onKeyDown=a.onInputKeyDown,i.id=a.props.id,i.name=a.props.name,i.form=a.props.form,i.autoFocus=a.props.autoFocus,i.placeholder=a.props.placeholderText,i.disabled=a.props.disabled,i.autoComplete=a.props.autoComplete,i.className=ia(c.props.className,l),i.title=a.props.title,i.readOnly=a.props.readOnly,i.required=a.props.required,i.tabIndex=a.props.tabIndex,i["aria-describedby"]=a.props.ariaDescribedBy,i["aria-invalid"]=a.props.ariaInvalid,i["aria-labelledby"]=a.props.ariaLabelledBy,i["aria-required"]=a.props.ariaRequired,i))},a.renderClearButton=function(){var s=a.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,d=s.endDate,u=s.clearButtonTitle,h=s.clearButtonClassName,f=h===void 0?"":h,p=s.ariaLabelClose,x=p===void 0?"Close":p,g=s.selectedDates,b=s.readOnly;return i&&!b&&(l!=null||c!=null||d!=null||g?.length)?Yt.createElement("button",{type:"button",className:ia("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":x,onClick:a.onClearClick,title:u,tabIndex:-1}):null},a.state=a.calcInitialState(),a.preventFocusTimeout=void 0,a}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:q1,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,a){var s,i,o,l;r.inline&&k9e(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:P9(this.props.highlightDates)}),!a.focused&&!fx(r.selected,this.props.selected)&&this.setState({inputValue:null}),a.open!==this.state.open&&(a.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),a.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,a=r.showIcon,s=r.icon,i=r.calendarIconClassname,o=r.calendarIconClassName,l=r.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Yt.createElement("div",{className:"react-datepicker__input-container".concat(a?" react-datepicker__view-calendar-icon":"")},a&&Yt.createElement(y9e,Wa({icon:s,className:ia(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var a=this.state.open?Yt.createElement(gQ,{enableTabLoop:this.props.enableTabLoop},Yt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(a=Yt.createElement(vQ,Wa({portalId:this.props.portalId},this.props),a)),Yt.createElement("div",null,this.renderInputContainer(),a)}return Yt.createElement(C9e,Wa({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(j.Component),_9e="input",RD="navigate";const E9e=()=>{const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(1),[o]=j.useState(5),[l,c]=j.useState(!0),[d,u]=j.useState(0),[h,f]=j.useState(""),[p,x]=j.useState(""),[g,b]=j.useState(null),[y,S]=j.useState(null);j.useEffect(()=>{w()},[]),j.useEffect(()=>{C()},[e,p,g,y,s,h]);const w=()=>{c(!0),Oe.get("/api/leave/all").then(I=>{const L=I.data.sort((P,O)=>new Date(O.createdAt)-new Date(P.createdAt));console.log("Sorted Data:",L),t(L),c(!1)}).catch(I=>{console.error("Error fetching leave requests:",I),c(!1)})},k=(I,L)=>{Oe.put(`/api/leave/${I}`,{status:L}).then(()=>{w()}).catch(P=>{console.error("Error updating leave status:",P)})},C=()=>{let I=[...e];if(p&&(I=I.filter(q=>q.status===p)),g&&y&&(I=I.filter(q=>{const K=new Date(q.requestedDate),U=new Date(K.getFullYear(),K.getMonth(),K.getDate()),J=new Date(g.getFullYear(),g.getMonth(),g.getDate()),F=new Date(y.getFullYear(),y.getMonth(),y.getDate());return U>=J&&U<=F})),h.trim()!==""){const q=h.toLowerCase();I=I.filter(K=>K.employeeId&&K.employeeId.toLowerCase().includes(q)||(K.name||K.employeeName)&&(K.name||K.employeeName).toLowerCase().includes(q)||K.leaveType&&K.leaveType.toLowerCase().includes(q)||K.reason&&K.reason.toLowerCase().includes(q))}const L=Math.ceil(I.length/o);u(L);const P=s*o,O=P-o,Y=I.slice(O,P);a(Y)},D=()=>{x(""),b(null),S(null),i(1),f("")},E=I=>{i(I)},A=I=>{if(!I)return"-";try{return new Date(I).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(" ","/")}catch{return"-"}};return n.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("h3",{children:"Leave Request Management"})})})})})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row gx-3",children:[n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{className:"form-select",value:p,onChange:I=>x(I.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"}),n.jsx("option",{value:"Hold",children:"Hold"})]})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by employee ID, name, leave type, or reason...",value:h,onChange:I=>f(I.target.value)})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Request Date Range"}),n.jsxs("div",{className:"d-flex gap-2",children:[n.jsx($9,{selected:g,onChange:I=>b(I),selectsStart:!0,startDate:g,endDate:y,placeholderText:"dd/mm/yyyy",className:"form-control me-2",dateFormat:"dd/MM/yyyy"}),n.jsx($9,{selected:y,onChange:I=>S(I),selectsEnd:!0,startDate:g,endDate:y,minDate:g,placeholderText:"dd/mm/yyyy",className:"form-control",dateFormat:"dd/MM/yyyy"})]})]}),n.jsxs("div",{className:"col-5 d-flex justify-content-end mt-3",children:[n.jsx("button",{className:"btn btn-primary me-2",onClick:C,style:{width:"120px",height:"38px"},children:"Apply Filters"}),n.jsx("button",{className:"btn btn-secondary",onClick:D,style:{width:"120px",height:"38px"},children:"Reset Filters"})]})]})})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"table-responsive",children:[l?n.jsx("div",{className:"text-center p-4",children:n.jsx("div",{className:"spinner-border text-primary",role:"status",children:n.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):n.jsxs("table",{className:"table table-bordered",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Leave Type"}),n.jsx("th",{children:"Requested Date"}),n.jsx("th",{children:"From Date"}),n.jsx("th",{children:"To Date"}),n.jsx("th",{children:"Reason"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:r.length>0?r.map(I=>n.jsxs("tr",{children:[n.jsx("td",{style:{textWrap:"wrap"},children:I.employeeId}),n.jsx("td",{style:{textWrap:"wrap"},children:I.name||I.employeeName}),n.jsx("td",{children:I.leaveType}),n.jsx("td",{children:I.requestedDate?A(I.requestedDate):"-"}),n.jsx("td",{children:A(I.fromDate)}),n.jsx("td",{children:A(I.toDate)}),n.jsx("td",{children:n.jsx("div",{className:"text-truncate",style:{maxWidth:"200px"},children:I.reason})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${I.status==="Approved"?"bg-success":I.status==="Rejected"?"bg-danger":I.status==="Hold"?"bg-info":"bg-warning"}`,children:I.status})}),n.jsx("td",{children:n.jsxs("select",{className:"form-select form-select-sm",style:{minWidth:"120px"},value:I.status,onChange:L=>k(I._id,L.target.value),disabled:I.status==="Approved"||I.status==="Rejected",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"}),n.jsx("option",{value:"Hold",children:"Hold"})]})})]},I._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"text-center",children:"No leave requests found."})})})]}),d>0&&n.jsx("div",{className:"d-flex justify-content-left mt-4",children:n.jsx("nav",{children:n.jsxs("ul",{className:"pagination",children:[n.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(s-1),disabled:s===1,children:n.jsx("i",{className:"fas fa-angle-double-left"})})}),n.jsx("li",{className:`page-item ${s===1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(1),children:"1"})}),s>3&&d>4&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),Array.from({length:d},(I,L)=>{const P=L+1;return P>1&&P<d&&Math.abs(P-s)<=1?n.jsx("li",{className:`page-item ${s===P?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(P),children:P})},P):null}),s<d-2&&d>4&&n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})}),d>1&&n.jsx("li",{className:`page-item ${s===d?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(d),children:d})}),n.jsx("li",{className:`page-item ${s===d?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>E(s+1),disabled:s===d,children:n.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]})})})]})})},D9e="modulepreload",A9e=function(e){return"/"+e},V9={},H3=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=A9e(d),d in V9)return;V9[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":D9e,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,x)=>{f.addEventListener("load",p),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var Po=Uint8Array,sc=Uint16Array,_P=Int32Array,DC=new Po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),AC=new Po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),W3=new Po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bQ=function(e,t){for(var r=new sc(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new _P(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},yQ=bQ(DC,2),jQ=yQ.b,G3=yQ.r;jQ[28]=258,G3[258]=28;var NQ=bQ(AC,0),T9e=NQ.b,q9=NQ.r,Y3=new sc(32768);for(var zn=0;zn<32768;++zn){var Cm=(zn&43690)>>1|(zn&21845)<<1;Cm=(Cm&52428)>>2|(Cm&13107)<<2,Cm=(Cm&61680)>>4|(Cm&3855)<<4,Y3[zn]=((Cm&65280)>>8|(Cm&255)<<8)>>1}var Ku=function(e,t,r){for(var a=e.length,s=0,i=new sc(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new sc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new sc(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=o[e[s]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[Y3[h]>>c]=d}else for(l=new sc(a),s=0;s<a;++s)e[s]&&(l[s]=Y3[o[e[s]-1]++]>>15-e[s]);return l},ap=new Po(288);for(var zn=0;zn<144;++zn)ap[zn]=8;for(var zn=144;zn<256;++zn)ap[zn]=9;for(var zn=256;zn<280;++zn)ap[zn]=7;for(var zn=280;zn<288;++zn)ap[zn]=8;var e1=new Po(32);for(var zn=0;zn<32;++zn)e1[zn]=5;var I9e=Ku(ap,9,0),P9e=Ku(ap,9,1),O9e=Ku(e1,5,0),M9e=Ku(e1,5,1),FD=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},_d=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},LD=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},EP=function(e){return(e+7)/8|0},wQ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Po(e.subarray(t,r))},R9e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Dd=function(e,t,r){var a=new Error(t||R9e[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Dd),!r)throw a;return a},F9e=function(e,t,r,a){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new Po(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Po(s*3));var d=function(de){var z=r.length;if(de>z){var se=new Po(Math.max(z*2,de));se.set(r),r=se}},u=t.f||0,h=t.p||0,f=t.b||0,p=t.l,x=t.d,g=t.m,b=t.n,y=s*8;do{if(!p){u=_d(e,h,1);var S=_d(e,h+1,3);if(h+=3,S)if(S==1)p=P9e,x=M9e,g=9,b=5;else if(S==2){var D=_d(e,h,31)+257,E=_d(e,h+10,15)+4,A=D+_d(e,h+5,31)+1;h+=14;for(var I=new Po(A),L=new Po(19),P=0;P<E;++P)L[W3[P]]=_d(e,h+P*3,7);h+=E*3;for(var O=FD(L),Y=(1<<O)-1,q=Ku(L,O,1),P=0;P<A;){var K=q[_d(e,h,Y)];h+=K&15;var w=K>>4;if(w<16)I[P++]=w;else{var U=0,J=0;for(w==16?(J=3+_d(e,h,3),h+=2,U=I[P-1]):w==17?(J=3+_d(e,h,7),h+=3):w==18&&(J=11+_d(e,h,127),h+=7);J--;)I[P++]=U}}var F=I.subarray(0,D),X=I.subarray(D);g=FD(F),b=FD(X),p=Ku(F,g,1),x=Ku(X,b,1)}else Dd(1);else{var w=EP(h)+4,k=e[w-4]|e[w-3]<<8,C=w+k;if(C>s){c&&Dd(0);break}l&&d(f+k),r.set(e.subarray(w,C),f),t.b=f+=k,t.p=h=C*8,t.f=u;continue}if(h>y){c&&Dd(0);break}}l&&d(f+131072);for(var Q=(1<<g)-1,ie=(1<<b)-1,M=h;;M=h){var U=p[LD(e,h)&Q],V=U>>4;if(h+=U&15,h>y){c&&Dd(0);break}if(U||Dd(2),V<256)r[f++]=V;else if(V==256){M=h,p=null;break}else{var W=V-254;if(V>264){var P=V-257,ee=DC[P];W=_d(e,h,(1<<ee)-1)+jQ[P],h+=ee}var re=x[LD(e,h)&ie],ne=re>>4;re||Dd(3),h+=re&15;var X=T9e[ne];if(ne>3){var ee=AC[ne];X+=LD(e,h)&(1<<ee)-1,h+=ee}if(h>y){c&&Dd(0);break}l&&d(f+131072);var ce=f+W;if(f<X){var ae=i-X,Z=Math.min(X,ce);for(ae+f<0&&Dd(3);f<Z;++f)r[f]=a[ae+f]}for(;f<ce;++f)r[f]=r[f-X]}}t.l=p,t.p=M,t.b=f,t.f=u,p&&(u=1,t.m=g,t.d=x,t.n=b)}while(!u);return f!=r.length&&o?wQ(r,0,f):r.subarray(0,f)},Uh=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},Vb=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},BD=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:CQ,l:0};if(s==1){var o=new Po(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(C,D){return C.f-D.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=i[0].s,a=1;a<s;++a)i[a].s>f&&(f=i[a].s);var p=new sc(f+1),x=K3(r[u-1],p,0);if(x>t){var a=0,g=0,b=x-t,y=1<<b;for(i.sort(function(D,E){return p[E.s]-p[D.s]||D.f-E.f});a<s;++a){var S=i[a].s;if(p[S]>t)g+=y-(1<<x-p[S]),p[S]=t;else break}for(g>>=b;g>0;){var w=i[a].s;p[w]<t?g-=1<<t-p[w]++-1:++a}for(;a>=0&&g;--a){var k=i[a].s;p[k]==t&&(--p[k],++g)}x=t}return{t:new Po(p),l:x}},K3=function(e,t,r){return e.s==-1?Math.max(K3(e.l,t,r+1),K3(e.r,t,r+1)):t[e.s]=r},z9=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new sc(++t),a=0,s=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},qb=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},SQ=function(e,t,r){var a=r.length,s=EP(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},H9=function(e,t,r,a,s,i,o,l,c,d,u){Uh(t,u++,r),++s[256];for(var h=BD(s,15),f=h.t,p=h.l,x=BD(i,15),g=x.t,b=x.l,y=z9(f),S=y.c,w=y.n,k=z9(g),C=k.c,D=k.n,E=new sc(19),A=0;A<S.length;++A)++E[S[A]&31];for(var A=0;A<C.length;++A)++E[C[A]&31];for(var I=BD(E,7),L=I.t,P=I.l,O=19;O>4&&!L[W3[O-1]];--O);var Y=d+5<<3,q=qb(s,ap)+qb(i,e1)+o,K=qb(s,f)+qb(i,g)+o+14+3*O+qb(E,L)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&Y<=q&&Y<=K)return SQ(t,u,e.subarray(c,c+d));var U,J,F,X;if(Uh(t,u,1+(K<q)),u+=2,K<q){U=Ku(f,p,0),J=f,F=Ku(g,b,0),X=g;var Q=Ku(L,P,0);Uh(t,u,w-257),Uh(t,u+5,D-1),Uh(t,u+10,O-4),u+=14;for(var A=0;A<O;++A)Uh(t,u+3*A,L[W3[A]]);u+=3*O;for(var ie=[S,C],M=0;M<2;++M)for(var V=ie[M],A=0;A<V.length;++A){var W=V[A]&31;Uh(t,u,Q[W]),u+=L[W],W>15&&(Uh(t,u,V[A]>>5&127),u+=V[A]>>12)}}else U=I9e,J=ap,F=O9e,X=e1;for(var A=0;A<l;++A){var ee=a[A];if(ee>255){var W=ee>>18&31;Vb(t,u,U[W+257]),u+=J[W+257],W>7&&(Uh(t,u,ee>>23&31),u+=DC[W]);var re=ee&31;Vb(t,u,F[re]),u+=X[re],re>3&&(Vb(t,u,ee>>5&8191),u+=AC[re])}else Vb(t,u,U[ee]),u+=J[ee]}return Vb(t,u,U[256]),u+J[256]},L9e=new _P([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),CQ=new Po(0),B9e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new Po(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=L9e[t-1],f=h>>13,p=h&8191,x=(1<<r)-1,g=i.p||new sc(32768),b=i.h||new sc(x+1),y=Math.ceil(r/3),S=2*y,w=function(Ne){return(e[Ne]^e[Ne+1]<<y^e[Ne+2]<<S)&x},k=new _P(25e3),C=new sc(288),D=new sc(32),E=0,A=0,I=i.i||0,L=0,P=i.w||0,O=0;I+2<o;++I){var Y=w(I),q=I&32767,K=b[Y];if(g[q]=K,b[Y]=q,P<=I){var U=o-I;if((E>7e3||L>24576)&&(U>423||!d)){u=H9(e,c,0,k,C,D,A,L,O,I-O,u),L=E=A=0,O=I;for(var J=0;J<286;++J)C[J]=0;for(var J=0;J<30;++J)D[J]=0}var F=2,X=0,Q=p,ie=q-K&32767;if(U>2&&Y==w(I-ie))for(var M=Math.min(f,U)-1,V=Math.min(32767,I),W=Math.min(258,U);ie<=V&&--Q&&q!=K;){if(e[I+F]==e[I+F-ie]){for(var ee=0;ee<W&&e[I+ee]==e[I+ee-ie];++ee);if(ee>F){if(F=ee,X=ie,ee>M)break;for(var re=Math.min(ie,ee-2),ne=0,J=0;J<re;++J){var ce=I-ie+J&32767,ae=g[ce],Z=ce-ae&32767;Z>ne&&(ne=Z,K=ce)}}}q=K,K=g[q],ie+=q-K&32767}if(X){k[L++]=268435456|G3[F]<<18|q9[X];var de=G3[F]&31,z=q9[X]&31;A+=DC[de]+AC[z],++C[257+de],++D[z],P=I+F,++E}else k[L++]=e[I],++C[e[I]]}}for(I=Math.max(I,P);I<o;++I)k[L++]=e[I],++C[e[I]];u=H9(e,c,d,k,C,D,A,L,O,I-O,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=I,i.w=P)}else{for(var I=i.w||0;I<o+d;I+=65535){var se=I+65535;se>=o&&(c[u/8|0]=d,se=o),u=SQ(c,u+1,e.subarray(I,se))}i.i=o}return wQ(l,0,a+EP(u)+s)},kQ=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},U9e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Po(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return B9e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},_Q=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},$9e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=kQ();s.p(t.dictionary),_Q(e,2,s.d())}},V9e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Dd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Dd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function X3(e,t){t||(t={});var r=kQ();r.p(e);var a=U9e(e,t,t.dictionary?6:2,4);return $9e(a,t),_Q(a,a.length-4,r.d()),a}function q9e(e,t){return F9e(e.subarray(V9e(e),-4),{i:2},t,t)}var z9e=typeof TextDecoder<"u"&&new TextDecoder,H9e=0;try{z9e.decode(CQ,{stream:!0}),H9e=1}catch{}var na=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function UD(){na.console&&typeof na.console.log=="function"&&na.console.log.apply(na.console,arguments)}var An={log:UD,warn:function(e){na.console&&(typeof na.console.warn=="function"?na.console.warn.apply(na.console,arguments):UD.call(null,arguments))},error:function(e){na.console&&(typeof na.console.error=="function"?na.console.error.apply(na.console,arguments):UD(e))}};function $D(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Xp(a.response,t,r)},a.onerror=function(){An.error("could not download file")},a.send()}function W9(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function UN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var hy,Q3,Xp=na.saveAs||((typeof window>"u"?"undefined":$a(window))!=="object"||window!==na?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=na.URL||na.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?W9(s.href)?$D(e,t,r):UN(s,s.target="_blank"):UN(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){UN(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(W9(e))$D(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){UN(a)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:$a(i)!=="object"&&(An.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return $D(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(na.HTMLElement)||na.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":$a(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=na.URL||na.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function EQ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function VD(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=po(r,a,s,i,t[0],7,-680876936),i=po(i,r,a,s,t[1],12,-389564586),s=po(s,i,r,a,t[2],17,606105819),a=po(a,s,i,r,t[3],22,-1044525330),r=po(r,a,s,i,t[4],7,-176418897),i=po(i,r,a,s,t[5],12,1200080426),s=po(s,i,r,a,t[6],17,-1473231341),a=po(a,s,i,r,t[7],22,-45705983),r=po(r,a,s,i,t[8],7,1770035416),i=po(i,r,a,s,t[9],12,-1958414417),s=po(s,i,r,a,t[10],17,-42063),a=po(a,s,i,r,t[11],22,-1990404162),r=po(r,a,s,i,t[12],7,1804603682),i=po(i,r,a,s,t[13],12,-40341101),s=po(s,i,r,a,t[14],17,-1502002290),r=xo(r,a=po(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=xo(i,r,a,s,t[6],9,-1069501632),s=xo(s,i,r,a,t[11],14,643717713),a=xo(a,s,i,r,t[0],20,-373897302),r=xo(r,a,s,i,t[5],5,-701558691),i=xo(i,r,a,s,t[10],9,38016083),s=xo(s,i,r,a,t[15],14,-660478335),a=xo(a,s,i,r,t[4],20,-405537848),r=xo(r,a,s,i,t[9],5,568446438),i=xo(i,r,a,s,t[14],9,-1019803690),s=xo(s,i,r,a,t[3],14,-187363961),a=xo(a,s,i,r,t[8],20,1163531501),r=xo(r,a,s,i,t[13],5,-1444681467),i=xo(i,r,a,s,t[2],9,-51403784),s=xo(s,i,r,a,t[7],14,1735328473),r=vo(r,a=xo(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=vo(i,r,a,s,t[8],11,-2022574463),s=vo(s,i,r,a,t[11],16,1839030562),a=vo(a,s,i,r,t[14],23,-35309556),r=vo(r,a,s,i,t[1],4,-1530992060),i=vo(i,r,a,s,t[4],11,1272893353),s=vo(s,i,r,a,t[7],16,-155497632),a=vo(a,s,i,r,t[10],23,-1094730640),r=vo(r,a,s,i,t[13],4,681279174),i=vo(i,r,a,s,t[0],11,-358537222),s=vo(s,i,r,a,t[3],16,-722521979),a=vo(a,s,i,r,t[6],23,76029189),r=vo(r,a,s,i,t[9],4,-640364487),i=vo(i,r,a,s,t[12],11,-421815835),s=vo(s,i,r,a,t[15],16,530742520),r=go(r,a=vo(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=go(i,r,a,s,t[7],10,1126891415),s=go(s,i,r,a,t[14],15,-1416354905),a=go(a,s,i,r,t[5],21,-57434055),r=go(r,a,s,i,t[12],6,1700485571),i=go(i,r,a,s,t[3],10,-1894986606),s=go(s,i,r,a,t[10],15,-1051523),a=go(a,s,i,r,t[1],21,-2054922799),r=go(r,a,s,i,t[8],6,1873313359),i=go(i,r,a,s,t[15],10,-30611744),s=go(s,i,r,a,t[6],15,-1560198380),a=go(a,s,i,r,t[13],21,1309151649),r=go(r,a,s,i,t[4],6,-145523070),i=go(i,r,a,s,t[11],10,-1120210379),s=go(s,i,r,a,t[2],15,718787259),a=go(a,s,i,r,t[9],21,-343485551),e[0]=Rm(r,e[0]),e[1]=Rm(a,e[1]),e[2]=Rm(s,e[2]),e[3]=Rm(i,e[3])}function TC(e,t,r,a,s,i){return t=Rm(Rm(t,e),Rm(a,i)),Rm(t<<s|t>>>32-s,r)}function po(e,t,r,a,s,i,o){return TC(t&r|~t&a,e,t,s,i,o)}function xo(e,t,r,a,s,i,o){return TC(t&a|r&~a,e,t,s,i,o)}function vo(e,t,r,a,s,i,o){return TC(t^r^a,e,t,s,i,o)}function go(e,t,r,a,s,i,o){return TC(r^(t|~a),e,t,s,i,o)}function DQ(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)VD(a,W9e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(VD(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,VD(a,s),a}function W9e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}hy=na.atob.bind(na),Q3=na.btoa.bind(na);var G9="0123456789abcdef".split("");function G9e(e){for(var t="",r=0;r<4;r++)t+=G9[e>>8*r+4&15]+G9[e>>8*r&15];return t}function Y9e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function J3(e){return DQ(e).map(Y9e).join("")}var K9e=function(e){for(var t=0;t<e.length;t++)e[t]=G9e(e[t]);return e.join("")}(DQ("hello"))!="5d41402abc4b2a76b9719d911017c592";function Rm(e,t){if(K9e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Z3(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var h=t.length,f=0,p=0,x="";for(c=0;c<h;c++)p=(p+(u=l[f=(f+1)%256]))%256,l[f]=l[p],l[p]=u,o=l[(l[f]+l[p])%256],x+=String.fromCharCode(t.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Y9={print:4,modify:8,copy:16,"annot-forms":32};function o0(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(Y9.perm!==void 0)throw new Error("Invalid permission: "+l);s+=Y9[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=J3(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Z3(this.encryptionKey,this.padding)}function l0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function K9(e){if($a(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){na.console&&An.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function tS(e){if(!(this instanceof tS))return new tS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function AQ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Zp(e,t,r,a,s){if(!(this instanceof Zp))return new Zp(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,AQ.call(this,a,s)}function m0(e,t,r,a,s){if(!(this instanceof m0))return new m0(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,AQ.call(this,a,s)}function ta(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;$a(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=K9;var x="1.3",g=p.__private__.getPdfVersion=function(){return x};p.__private__.setPdfVersion=function(G){x=G};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(G){return b[G]};s=s||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},w=S.COMPAT;function k(){this.saveGraphicsState(),oe(new Ft(pe,0,0,-pe,0,Jd()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),d="n",w=S.ADVANCED}function C(){this.restoreGraphicsState(),d="S",w=S.COMPAT}var D=p.__private__.combineFontStyleAndFontWeight=function(G,be){if(G=="bold"&&be=="normal"||G=="bold"&&be==400||G=="normal"&&be=="italic"||G=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(G=be==400||be==="normal"?G==="italic"?"italic":"normal":be!=700&&be!=="bold"||G!=="normal"?(be==700?"bold":be)+""+G:"bold"),G};p.advancedAPI=function(G){var be=w===S.COMPAT;return be&&k.call(this),typeof G!="function"||(G(this),be&&C.call(this)),this},p.compatAPI=function(G){var be=w===S.ADVANCED;return be&&C.call(this),typeof G!="function"||(G(this),be&&k.call(this)),this},p.isAdvancedAPI=function(){return w===S.ADVANCED};var E,A=function(G){if(w!==S.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(G,be){var Ge=t||be;if(isNaN(G)||isNaN(Ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(Ge).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,c)}:c==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,16)};var L=p.f2=p.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return I(G,2)},P=p.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return I(G,3)},O=p.scale=p.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return w===S.COMPAT?G*pe:w===S.ADVANCED?G:void 0},Y=function(G){return w===S.COMPAT?Jd()-G:w===S.ADVANCED?G:void 0},q=function(G){return O(Y(G))};p.__private__.setPrecision=p.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var K,U="00000000000000000000000000000000",J=p.__private__.getFileId=function(){return U},F=p.__private__.setFileId=function(G){return U=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(vs=new o0(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};p.setFileId=function(G){return F(G),this},p.getFileId=function(){return J()};var X=p.__private__.convertDateToPDFDate=function(G){var be=G.getTimezoneOffset(),Ge=be<0?"+":"-",rt=Math.floor(Math.abs(be/60)),jt=Math.abs(be%60),Vt=[Ge,W(rt),"'",W(jt),"'"].join("");return["D:",G.getFullYear(),W(G.getMonth()+1),W(G.getDate()),W(G.getHours()),W(G.getMinutes()),W(G.getSeconds()),Vt].join("")},Q=p.__private__.convertPDFDateToDate=function(G){var be=parseInt(G.substr(2,4),10),Ge=parseInt(G.substr(6,2),10)-1,rt=parseInt(G.substr(8,2),10),jt=parseInt(G.substr(10,2),10),Vt=parseInt(G.substr(12,2),10),lr=parseInt(G.substr(14,2),10);return new Date(be,Ge,rt,jt,Vt,lr,0)},ie=p.__private__.setCreationDate=function(G){var be;if(G===void 0&&(G=new Date),G instanceof Date)be=X(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=G}return K=be},M=p.__private__.getCreationDate=function(G){var be=K;return G==="jsDate"&&(be=Q(K)),be};p.setCreationDate=function(G){return ie(G),this},p.getCreationDate=function(G){return M(G)};var V,W=p.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},ee=p.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},re=0,ne=[],ce=[],ae=0,Z=[],de=[],z=!1,se=ce,Ne=function(){re=0,ae=0,ce=[],ne=[],Z=[],Te=Lt(),_e=Lt()};p.__private__.setCustomOutputDestination=function(G){z=!0,se=G};var ue=function(G){z||(se=G)};p.__private__.resetCustomOutputDestination=function(){z=!1,se=ce};var oe=p.__private__.out=function(G){return G=G.toString(),ae+=G.length+1,se.push(G),se},ye=p.__private__.write=function(G){return oe(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},je=p.__private__.getArrayBuffer=function(G){for(var be=G.length,Ge=new ArrayBuffer(be),rt=new Uint8Array(Ge);be--;)rt[be]=G.charCodeAt(be);return Ge},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Me};var He=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(G){return He=w===S.ADVANCED?G/pe:G,this};var et,ft=p.__private__.getFontSize=p.getFontSize=function(){return w===S.COMPAT?He:He*pe},Be=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(G){return Be=G,this},p.__private__.getR2L=p.getR2L=function(){return Be};var dt,Tt=p.__private__.setZoomMode=function(G){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))et=G;else if(isNaN(G)){if(be.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');et=G}else et=parseInt(G,10)};p.__private__.getZoomMode=function(){return et};var At,qt=p.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');dt=G};p.__private__.getPageMode=function(){return dt};var xe=p.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');At=G};p.__private__.getLayoutMode=function(){return At},p.__private__.setDisplayMode=p.setDisplayMode=function(G,be,Ge){return Tt(G),xe(be),qt(Ge),this};var he={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(G){if(Object.keys(he).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return he[G]},p.__private__.getDocumentProperties=function(){return he},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(G){for(var be in he)he.hasOwnProperty(be)&&G[be]&&(he[be]=G[be]);return this},p.__private__.setDocumentProperty=function(G,be){if(Object.keys(he).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return he[G]=be};var ve,pe,De,Ke,Nt,Je={},Qe={},Ue=[],qe={},mt={},Ie={},Xe={},Ye=null,lt=0,Mt=[],Ae=new K9(p),ke=e.hotfixes||[],ot={},bt={},Xt=[],Ft=function G(be,Ge,rt,jt,Vt,lr){if(!(this instanceof G))return new G(be,Ge,rt,jt,Vt,lr);isNaN(be)&&(be=1),isNaN(Ge)&&(Ge=0),isNaN(rt)&&(rt=0),isNaN(jt)&&(jt=1),isNaN(Vt)&&(Vt=0),isNaN(lr)&&(lr=0),this._matrix=[be,Ge,rt,jt,Vt,lr]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(G)},Ft.prototype.multiply=function(G){var be=G.sx*this.sx+G.shy*this.shx,Ge=G.sx*this.shy+G.shy*this.sy,rt=G.shx*this.sx+G.sy*this.shx,jt=G.shx*this.shy+G.sy*this.sy,Vt=G.tx*this.sx+G.ty*this.shx+this.tx,lr=G.tx*this.shy+G.ty*this.sy+this.ty;return new Ft(be,Ge,rt,jt,Vt,lr)},Ft.prototype.decompose=function(){var G=this.sx,be=this.shy,Ge=this.shx,rt=this.sy,jt=this.tx,Vt=this.ty,lr=Math.sqrt(G*G+be*be),wr=(G/=lr)*Ge+(be/=lr)*rt;Ge-=G*wr,rt-=be*wr;var Fr=Math.sqrt(Ge*Ge+rt*rt);return wr/=Fr,G*(rt/=Fr)<be*(Ge/=Fr)&&(G=-G,be=-be,wr=-wr,lr=-lr),{scale:new Ft(lr,0,0,Fr,0,0),translate:new Ft(1,0,0,1,jt,Vt),rotate:new Ft(G,be,-be,G,0,0),skew:new Ft(1,0,wr,1,0,0)}},Ft.prototype.toString=function(G){return this.join(" ")},Ft.prototype.inversed=function(){var G=this.sx,be=this.shy,Ge=this.shx,rt=this.sy,jt=this.tx,Vt=this.ty,lr=1/(G*rt-be*Ge),wr=rt*lr,Fr=-be*lr,ha=-Ge*lr,ca=G*lr;return new Ft(wr,Fr,ha,ca,-wr*jt-ha*Vt,-Fr*jt-ca*Vt)},Ft.prototype.applyToPoint=function(G){var be=G.x*this.sx+G.y*this.shx+this.tx,Ge=G.x*this.shy+G.y*this.sy+this.ty;return new Lf(be,Ge)},Ft.prototype.applyToRectangle=function(G){var be=this.applyToPoint(G),Ge=this.applyToPoint(new Lf(G.x+G.w,G.y+G.h));return new vp(be.x,be.y,Ge.x-be.x,Ge.y-be.y)},Ft.prototype.clone=function(){var G=this.sx,be=this.shy,Ge=this.shx,rt=this.sy,jt=this.tx,Vt=this.ty;return new Ft(G,be,Ge,rt,jt,Vt)},p.Matrix=Ft;var rr=p.matrixMult=function(G,be){return be.multiply(G)},pr=new Ft(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=pr;var jr=function(G,be){if(!mt[G]){var Ge=(be instanceof Zp?"Sh":"P")+(Object.keys(qe).length+1).toString(10);be.id=Ge,mt[G]=Ge,qe[Ge]=be,Ae.publish("addPattern",be)}};p.ShadingPattern=Zp,p.TilingPattern=m0,p.addShadingPattern=function(G,be){return A("addShadingPattern()"),jr(G,be),this},p.beginTilingPattern=function(G){A("beginTilingPattern()"),Bf(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},p.endTilingPattern=function(G,be){A("endTilingPattern()"),be.stream=de[V].join(`
`),jr(G,be),Ae.publish("endTilingPattern",be),Xt.pop().restore()};var vt=p.__private__.newObject=function(){var G=Lt();return fe(G,!0),G},Lt=p.__private__.newObjectDeferred=function(){return re++,ne[re]=function(){return ae},re},fe=function(G,be){return be=typeof be=="boolean"&&be,ne[G]=ae,be&&oe(G+" 0 obj"),G},Re=p.__private__.newAdditionalObject=function(){var G={objId:Lt(),content:""};return Z.push(G),G},Te=Lt(),_e=Lt(),Le=p.__private__.decodeColorString=function(G){var be=G.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var Ge=parseFloat(be[0]);be=[Ge,Ge,Ge,"r"]}for(var rt="#",jt=0;jt<3;jt++)rt+=("0"+Math.floor(255*parseFloat(be[jt])).toString(16)).slice(-2);return rt},Ve=p.__private__.encodeColorString=function(G){var be;typeof G=="string"&&(G={ch1:G});var Ge=G.ch1,rt=G.ch2,jt=G.ch3,Vt=G.ch4,lr=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ge=="string"&&Ge.charAt(0)!=="#"){var wr=new EQ(Ge);if(wr.ok)Ge=wr.toHex();else if(!/^\d*\.?\d*$/.test(Ge))throw new Error('Invalid color "'+Ge+'" passed to jsPDF.encodeColorString.')}if(typeof Ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ge)&&(Ge="#"+Ge[1]+Ge[1]+Ge[2]+Ge[2]+Ge[3]+Ge[3]),typeof Ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ge)){var Fr=parseInt(Ge.substr(1),16);Ge=Fr>>16&255,rt=Fr>>8&255,jt=255&Fr}if(rt===void 0||Vt===void 0&&Ge===rt&&rt===jt)if(typeof Ge=="string")be=Ge+" "+lr[0];else switch(G.precision){case 2:be=L(Ge/255)+" "+lr[0];break;case 3:default:be=P(Ge/255)+" "+lr[0]}else if(Vt===void 0||$a(Vt)==="object"){if(Vt&&!isNaN(Vt.a)&&Vt.a===0)return be=["1.","1.","1.",lr[1]].join(" ");if(typeof Ge=="string")be=[Ge,rt,jt,lr[1]].join(" ");else switch(G.precision){case 2:be=[L(Ge/255),L(rt/255),L(jt/255),lr[1]].join(" ");break;default:case 3:be=[P(Ge/255),P(rt/255),P(jt/255),lr[1]].join(" ")}}else if(typeof Ge=="string")be=[Ge,rt,jt,Vt,lr[2]].join(" ");else switch(G.precision){case 2:be=[L(Ge),L(rt),L(jt),L(Vt),lr[2]].join(" ");break;case 3:default:be=[P(Ge),P(rt),P(jt),P(Vt),lr[2]].join(" ")}return be},pt=p.__private__.getFilters=function(){return o},wt=p.__private__.putStream=function(G){var be=(G=G||{}).data||"",Ge=G.filters||pt(),rt=G.alreadyAppliedFilters||[],jt=G.addLength1||!1,Vt=be.length,lr=G.objectId,wr=function(ss){return ss};if(u!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(wr=vs.encryptor(lr,0));var Fr={};Ge===!0&&(Ge=["FlateEncode"]);var ha=G.additionalKeyValues||[],ca=(Fr=ta.API.processDataByFilters!==void 0?ta.API.processDataByFilters(be,Ge):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(rt)?rt.join(" "):rt.toString());if(Fr.data.length!==0&&(ha.push({key:"Length",value:Fr.data.length}),jt===!0&&ha.push({key:"Length1",value:Vt})),ca.length!=0)if(ca.split("/").length-1==1)ha.push({key:"Filter",value:ca});else{ha.push({key:"Filter",value:"["+ca+"]"});for(var Ia=0;Ia<ha.length;Ia+=1)if(ha[Ia].key==="DecodeParms"){for(var In=[],Ln=0;Ln<Fr.reverseChain.split("/").length-1;Ln+=1)In.push("null");In.push(ha[Ia].value),ha[Ia].value="["+In.join(" ")+"]"}}oe("<<");for(var ns=0;ns<ha.length;ns++)oe("/"+ha[ns].key+" "+ha[ns].value);oe(">>"),Fr.data.length!==0&&(oe("stream"),oe(wr(Fr.data)),oe("endstream"))},st=p.__private__.putPage=function(G){var be=G.number,Ge=G.data,rt=G.objId,jt=G.contentsObjId;fe(rt,!0),oe("<</Type /Page"),oe("/Parent "+G.rootDictionaryObjId+" 0 R"),oe("/Resources "+G.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(E(G.mediaBox.bottomLeftX))+" "+parseFloat(E(G.mediaBox.bottomLeftY))+" "+E(G.mediaBox.topRightX)+" "+E(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&oe("/CropBox ["+E(G.cropBox.bottomLeftX)+" "+E(G.cropBox.bottomLeftY)+" "+E(G.cropBox.topRightX)+" "+E(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&oe("/BleedBox ["+E(G.bleedBox.bottomLeftX)+" "+E(G.bleedBox.bottomLeftY)+" "+E(G.bleedBox.topRightX)+" "+E(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&oe("/TrimBox ["+E(G.trimBox.bottomLeftX)+" "+E(G.trimBox.bottomLeftY)+" "+E(G.trimBox.topRightX)+" "+E(G.trimBox.topRightY)+"]"),G.artBox!==null&&oe("/ArtBox ["+E(G.artBox.bottomLeftX)+" "+E(G.artBox.bottomLeftY)+" "+E(G.artBox.topRightX)+" "+E(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&oe("/UserUnit "+G.userUnit),Ae.publish("putPage",{objId:rt,pageContext:Mt[be],pageNumber:be,page:Ge}),oe("/Contents "+jt+" 0 R"),oe(">>"),oe("endobj");var Vt=Ge.join(`
`);return w===S.ADVANCED&&(Vt+=`
Q`),fe(jt,!0),wt({data:Vt,filters:pt(),objectId:jt}),oe("endobj"),rt},St=p.__private__.putPages=function(){var G,be,Ge=[];for(G=1;G<=lt;G++)Mt[G].objId=Lt(),Mt[G].contentsObjId=Lt();for(G=1;G<=lt;G++)Ge.push(st({number:G,data:de[G],objId:Mt[G].objId,contentsObjId:Mt[G].contentsObjId,mediaBox:Mt[G].mediaBox,cropBox:Mt[G].cropBox,bleedBox:Mt[G].bleedBox,trimBox:Mt[G].trimBox,artBox:Mt[G].artBox,userUnit:Mt[G].userUnit,rootDictionaryObjId:Te,resourceDictionaryObjId:_e}));fe(Te,!0),oe("<</Type /Pages");var rt="/Kids [";for(be=0;be<lt;be++)rt+=Ge[be]+" 0 R ";oe(rt+"]"),oe("/Count "+lt),oe(">>"),oe("endobj"),Ae.publish("postPutPages")},Ct=function(G){Ae.publish("putFont",{font:G,out:oe,newObject:vt,putStream:wt}),G.isAlreadyPutted!==!0&&(G.objectNumber=vt(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+l0(G.postScriptName)),oe("/Subtype /Type1"),typeof G.encoding=="string"&&oe("/Encoding /"+G.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},Jt=function(){for(var G in Je)Je.hasOwnProperty(G)&&(h===!1||h===!0&&f.hasOwnProperty(G))&&Ct(Je[G])},ir=function(G){G.objectNumber=vt();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[E(G.x),E(G.y),E(G.x+G.width),E(G.y+G.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var Ge=G.pages[1].join(`
`);wt({data:Ge,additionalKeyValues:be,objectId:G.objectNumber}),oe("endobj")},xr=function(){for(var G in ot)ot.hasOwnProperty(G)&&ir(ot[G])},or=function(G,be){var Ge,rt=[],jt=1/(be-1);for(Ge=0;Ge<1;Ge+=jt)rt.push(Ge);if(rt.push(1),G[0].offset!=0){var Vt={offset:0,color:G[0].color};G.unshift(Vt)}if(G[G.length-1].offset!=1){var lr={offset:1,color:G[G.length-1].color};G.push(lr)}for(var wr="",Fr=0,ha=0;ha<rt.length;ha++){for(Ge=rt[ha];Ge>G[Fr+1].offset;)Fr++;var ca=G[Fr].offset,Ia=(Ge-ca)/(G[Fr+1].offset-ca),In=G[Fr].color,Ln=G[Fr+1].color;wr+=ee(Math.round((1-Ia)*In[0]+Ia*Ln[0]).toString(16))+ee(Math.round((1-Ia)*In[1]+Ia*Ln[1]).toString(16))+ee(Math.round((1-Ia)*In[2]+Ia*Ln[2]).toString(16))}return wr.trim()},ze=function(G,be){be||(be=21);var Ge=vt(),rt=or(G.colors,be),jt=[];jt.push({key:"FunctionType",value:"0"}),jt.push({key:"Domain",value:"[0.0 1.0]"}),jt.push({key:"Size",value:"["+be+"]"}),jt.push({key:"BitsPerSample",value:"8"}),jt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt({data:rt,additionalKeyValues:jt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ge}),oe("endobj"),G.objectNumber=vt(),oe("<< /ShadingType "+G.type),oe("/ColorSpace /DeviceRGB");var Vt="/Coords ["+E(parseFloat(G.coords[0]))+" "+E(parseFloat(G.coords[1]))+" ";G.type===2?Vt+=E(parseFloat(G.coords[2]))+" "+E(parseFloat(G.coords[3])):Vt+=E(parseFloat(G.coords[2]))+" "+E(parseFloat(G.coords[3]))+" "+E(parseFloat(G.coords[4]))+" "+E(parseFloat(G.coords[5])),oe(Vt+="]"),G.matrix&&oe("/Matrix ["+G.matrix.toString()+"]"),oe("/Function "+Ge+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},dr=function(G,be){var Ge=Lt(),rt=vt();be.push({resourcesOid:Ge,objectOid:rt}),G.objectNumber=rt;var jt=[];jt.push({key:"Type",value:"/Pattern"}),jt.push({key:"PatternType",value:"1"}),jt.push({key:"PaintType",value:"1"}),jt.push({key:"TilingType",value:"1"}),jt.push({key:"BBox",value:"["+G.boundingBox.map(E).join(" ")+"]"}),jt.push({key:"XStep",value:E(G.xStep)}),jt.push({key:"YStep",value:E(G.yStep)}),jt.push({key:"Resources",value:Ge+" 0 R"}),G.matrix&&jt.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),wt({data:G.stream,additionalKeyValues:jt,objectId:G.objectNumber}),oe("endobj")},ur=function(G){var be;for(be in qe)qe.hasOwnProperty(be)&&(qe[be]instanceof Zp?ze(qe[be]):qe[be]instanceof m0&&dr(qe[be],G))},qr=function(G){for(var be in G.objectNumber=vt(),oe("<<"),G)switch(be){case"opacity":oe("/ca "+L(G[be]));break;case"stroke-opacity":oe("/CA "+L(G[be]))}oe(">>"),oe("endobj")},va=function(){var G;for(G in Ie)Ie.hasOwnProperty(G)&&qr(Ie[G])},rn=function(){for(var G in oe("/XObject <<"),ot)ot.hasOwnProperty(G)&&ot[G].objectNumber>=0&&oe("/"+G+" "+ot[G].objectNumber+" 0 R");Ae.publish("putXobjectDict"),oe(">>")},Qs=function(){vs.oid=vt(),oe("<<"),oe("/Filter /Standard"),oe("/V "+vs.v),oe("/R "+vs.r),oe("/U <"+vs.toHexString(vs.U)+">"),oe("/O <"+vs.toHexString(vs.O)+">"),oe("/P "+vs.P),oe(">>"),oe("endobj")},Gn=function(){for(var G in oe("/Font <<"),Je)Je.hasOwnProperty(G)&&(h===!1||h===!0&&f.hasOwnProperty(G))&&oe("/"+G+" "+Je[G].objectNumber+" 0 R");oe(">>")},xs=function(){if(Object.keys(qe).length>0){for(var G in oe("/Shading <<"),qe)qe.hasOwnProperty(G)&&qe[G]instanceof Zp&&qe[G].objectNumber>=0&&oe("/"+G+" "+qe[G].objectNumber+" 0 R");Ae.publish("putShadingPatternDict"),oe(">>")}},As=function(G){if(Object.keys(qe).length>0){for(var be in oe("/Pattern <<"),qe)qe.hasOwnProperty(be)&&qe[be]instanceof p.TilingPattern&&qe[be].objectNumber>=0&&qe[be].objectNumber<G&&oe("/"+be+" "+qe[be].objectNumber+" 0 R");Ae.publish("putTilingPatternDict"),oe(">>")}},yt=function(){if(Object.keys(Ie).length>0){var G;for(G in oe("/ExtGState <<"),Ie)Ie.hasOwnProperty(G)&&Ie[G].objectNumber>=0&&oe("/"+G+" "+Ie[G].objectNumber+" 0 R");Ae.publish("putGStateDict"),oe(">>")}},mr=function(G){fe(G.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Gn(),xs(),As(G.objectOid),yt(),rn(),oe(">>"),oe("endobj")},hr=function(){var G=[];Jt(),va(),xr(),ur(G),Ae.publish("putResources"),G.forEach(mr),mr({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),Ae.publish("postPutResources")},Kr=function(){Ae.publish("putAdditionalObjects");for(var G=0;G<Z.length;G++){var be=Z[G];fe(be.objId,!0),oe(be.content),oe("endobj")}Ae.publish("postPutAdditionalObjects")},Rr=function(G){Qe[G.fontName]=Qe[G.fontName]||{},Qe[G.fontName][G.fontStyle]=G.id},cn=function(G,be,Ge,rt,jt){var Vt={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:G,fontName:be,fontStyle:Ge,encoding:rt,isStandardFont:jt||!1,metadata:{}};return Ae.publish("addFont",{font:Vt,instance:this}),Je[Vt.id]=Vt,Rr(Vt),Vt.id},Zo=function(G){for(var be=0,Ge=Me.length;be<Ge;be++){var rt=cn.call(this,G[be][0],G[be][1],G[be][2],Me[be][3],!0);h===!1&&(f[rt]=!0);var jt=G[be][0].split("-");Rr({id:rt,fontName:jt[0],fontStyle:jt[1]||""})}Ae.publish("addFonts",{fonts:Je,dictionary:Qe})},as=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(rt){var be=rt.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var Ge="Error in function "+be.split(`
`)[0].split("<")[0]+": "+rt.message;if(!na.console)throw new Error(Ge);na.console.error(Ge,rt),na.alert&&alert(Ge)}},G.foo.bar=G,G.foo},Bo=function(G,be){var Ge,rt,jt,Vt,lr,wr,Fr,ha,ca;if(jt=(be=be||{}).sourceEncoding||"Unicode",lr=be.outputEncoding,(be.autoencode||lr)&&Je[ve].metadata&&Je[ve].metadata[jt]&&Je[ve].metadata[jt].encoding&&(Vt=Je[ve].metadata[jt].encoding,!lr&&Je[ve].encoding&&(lr=Je[ve].encoding),!lr&&Vt.codePages&&(lr=Vt.codePages[0]),typeof lr=="string"&&(lr=Vt[lr]),lr)){for(Fr=!1,wr=[],Ge=0,rt=G.length;Ge<rt;Ge++)(ha=lr[G.charCodeAt(Ge)])?wr.push(String.fromCharCode(ha)):wr.push(G[Ge]),wr[Ge].charCodeAt(0)>>8&&(Fr=!0);G=wr.join("")}for(Ge=G.length;Fr===void 0&&Ge!==0;)G.charCodeAt(Ge-1)>>8&&(Fr=!0),Ge--;if(!Fr)return G;for(wr=be.noBOM?[]:[254,255],Ge=0,rt=G.length;Ge<rt;Ge++){if((ca=(ha=G.charCodeAt(Ge))>>8)>>8)throw new Error("Character at position "+Ge+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(ca),wr.push(ha-(ca<<8))}return String.fromCharCode.apply(void 0,wr)},xa=p.__private__.pdfEscape=p.pdfEscape=function(G,be){return Bo(G,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ui=p.__private__.beginPage=function(G){de[++lt]=[],Mt[lt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},Vi(lt),ue(de[V])},el=function(G,be){var Ge,rt,jt;switch(r=be||r,typeof G=="string"&&(Ge=y(G.toLowerCase()),Array.isArray(Ge)&&(rt=Ge[0],jt=Ge[1])),Array.isArray(G)&&(rt=G[0]*pe,jt=G[1]*pe),isNaN(rt)&&(rt=s[0],jt=s[1]),(rt>14400||jt>14400)&&(An.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),rt=Math.min(14400,rt),jt=Math.min(14400,jt)),s=[rt,jt],r.substr(0,1)){case"l":jt>rt&&(s=[jt,rt]);break;case"p":rt>jt&&(s=[jt,rt])}ui(s),Of(gc),oe(Il),xp!==0&&oe(xp+" J"),Ff!==0&&oe(Ff+" j"),Ae.publish("addPage",{pageNumber:lt})},tl=function(G){G>0&&G<=lt&&(de.splice(G,1),Mt.splice(G,1),lt--,V>lt&&(V=lt),this.setPage(V))},Vi=function(G){G>0&&G<=lt&&(V=G)},qa=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return de.length-1},qi=function(G,be,Ge){var rt,jt=void 0;return Ge=Ge||{},G=G!==void 0?G:Je[ve].fontName,be=be!==void 0?be:Je[ve].fontStyle,rt=G.toLowerCase(),Qe[rt]!==void 0&&Qe[rt][be]!==void 0?jt=Qe[rt][be]:Qe[G]!==void 0&&Qe[G][be]!==void 0?jt=Qe[G][be]:Ge.disableWarning===!1&&An.warn("Unable to look up font label for font '"+G+"', '"+be+"'. Refer to getFontList() for available fonts."),jt||Ge.noFallback||(jt=Qe.times[be])==null&&(jt=Qe.times.normal),jt},Ts=p.__private__.putInfo=function(){var G=vt(),be=function(rt){return rt};for(var Ge in u!==null&&(be=vs.encryptor(G,0)),oe("<<"),oe("/Producer ("+xa(be("jsPDF "+ta.version))+")"),he)he.hasOwnProperty(Ge)&&he[Ge]&&oe("/"+Ge.substr(0,1).toUpperCase()+Ge.substr(1)+" ("+xa(be(he[Ge]))+")");oe("/CreationDate ("+xa(be(K))+")"),oe(">>"),oe("endobj")},fc=p.__private__.putCatalog=function(G){var be=(G=G||{}).rootDictionaryObjId||Te;switch(vt(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+be+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ge=""+et;Ge.substr(Ge.length-1)==="%"&&(et=parseInt(et)/100),typeof et=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+L(et)+"]")}switch(At||(At="continuous"),At){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}dt&&oe("/PageMode /"+dt),Ae.publish("putCatalog"),oe(">>"),oe("endobj")},sd=p.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(re+1)),oe("/Root "+re+" 0 R"),oe("/Info "+(re-1)+" 0 R"),u!==null&&oe("/Encrypt "+vs.oid+" 0 R"),oe("/ID [ <"+U+"> <"+U+"> ]"),oe(">>")},El=p.__private__.putHeader=function(){oe("%PDF-"+x),oe("%")},id=p.__private__.putXRef=function(){var G="0000000000";oe("xref"),oe("0 "+(re+1)),oe("0000000000 65535 f ");for(var be=1;be<=re;be++)typeof ne[be]=="function"?oe((G+ne[be]()).slice(-10)+" 00000 n "):ne[be]!==void 0?oe((G+ne[be]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},Dl=p.__private__.buildDocument=function(){Ne(),ue(ce),Ae.publish("buildDocument"),El(),St(),Kr(),hr(),u!==null&&Qs(),Ts(),fc();var G=ae;return id(),sd(),oe("startxref"),oe(""+G),oe("%%EOF"),ue(de[V]),ce.join(`
`)},mc=p.__private__.getBlob=function(G){return new Blob([je(G)],{type:"application/pdf"})},Al=p.output=p.__private__.output=as(function(G,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",G){case void 0:return Dl();case"save":p.save(be.filename);break;case"arraybuffer":return je(Dl());case"blob":return mc(Dl());case"bloburi":case"bloburl":if(na.URL!==void 0&&typeof na.URL.createObjectURL=="function")return na.URL&&na.URL.createObjectURL(mc(Dl()))||void 0;An.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ge="",rt=Dl();try{Ge=Q3(rt)}catch{Ge=Q3(unescape(encodeURIComponent(rt)))}return"data:application/pdf;filename="+be.filename+";base64,"+Ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(na)==="[object Window]"){var jt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(jt=be.pdfObjectUrl,Vt="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+jt+'"'+Vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",wr=na.open();return wr!==null&&wr.document.write(lr),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(na)==="[object Window]"){var Fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',ha=na.open();if(ha!==null){ha.document.write(Fr);var ca=this;ha.document.documentElement.querySelector("#pdfViewer").onload=function(){ha.document.title=be.filename,ha.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ca.output("bloburl"))}}return ha}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(na)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ia='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',In=na.open();if(In!==null&&(In.document.write(Ia),In.document.title=be.filename),In||typeof safari>"u")return In;break;case"datauri":case"dataurl":return na.document.location.href=this.output("datauristring",be);default:return null}}),pc=function(G){return Array.isArray(ke)===!0&&ke.indexOf(G)>-1};switch(a){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=pc("px_scaling")==1?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);pe=a}var vs=null;ie(),F();var xc=function(G){return u!==null?vs.encryptor(G,0):function(be){return be}},Tl=p.__private__.getPageInfo=p.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[G].objId,pageNumber:G,pageContext:Mt[G]}},Jr=p.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in Mt)if(Mt[be].objId===G)break;return Tl(be)},hh=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Mt[V].objId,pageNumber:V,pageContext:Mt[V]}};p.addPage=function(){return el.apply(this,arguments),this},p.setPage=function(){return Vi.apply(this,arguments),ue.call(this,de[V]),this},p.insertPage=function(G){return this.addPage(),this.movePage(V,G),this},p.movePage=function(G,be){var Ge,rt;if(G>be){Ge=de[G],rt=Mt[G];for(var jt=G;jt>be;jt--)de[jt]=de[jt-1],Mt[jt]=Mt[jt-1];de[be]=Ge,Mt[be]=rt,this.setPage(be)}else if(G<be){Ge=de[G],rt=Mt[G];for(var Vt=G;Vt<be;Vt++)de[Vt]=de[Vt+1],Mt[Vt]=Mt[Vt+1];de[be]=Ge,Mt[be]=rt,this.setPage(be)}return this},p.deletePage=function(){return tl.apply(this,arguments),this},p.__private__.text=p.text=function(G,be,Ge,rt,jt){var Vt,lr,wr,Fr,ha,ca,Ia,In,Ln,ns=(rt=rt||{}).scope||this;if(typeof G=="number"&&typeof be=="number"&&(typeof Ge=="string"||Array.isArray(Ge))){var ss=Ge;Ge=be,be=G,G=ss}if(arguments[3]instanceof Ft?(A("The transform parameter of text() with a Matrix value"),Ln=jt):(wr=arguments[4],Fr=arguments[5],$a(Ia=arguments[3])==="object"&&Ia!==null||(typeof wr=="string"&&(Fr=wr,wr=null),typeof Ia=="string"&&(Fr=Ia,Ia=null),typeof Ia=="number"&&(wr=Ia,Ia=null),rt={flags:Ia,angle:wr,align:Fr})),isNaN(be)||isNaN(Ge)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return ns;var Js="",Pl=!1,$o=typeof rt.lineHeightFactor=="number"?rt.lineHeightFactor:Ci,Ol=ns.internal.scaleFactor;function yp(Ca){return Ca=Ca.split("	").join(Array(rt.TabLen||9).join(" ")),xa(Ca,Ia)}function ld(Ca){for(var ka,wn=Ca.concat(),is=[],ol=wn.length;ol--;)typeof(ka=wn.shift())=="string"?is.push(ka):Array.isArray(Ca)&&(ka.length===1||ka[1]===void 0&&ka[2]===void 0)?is.push(ka[0]):is.push([ka[0],ka[1],ka[2]]);return is}function cd(Ca,ka){var wn;if(typeof Ca=="string")wn=ka(Ca)[0];else if(Array.isArray(Ca)){for(var is,ol,lu=Ca.concat(),cu=[],hd=lu.length;hd--;)typeof(is=lu.shift())=="string"?cu.push(ka(is)[0]):Array.isArray(is)&&typeof is[0]=="string"&&(ol=ka(is[0],is[1],is[2]),cu.push([ol[0],ol[1],ol[2]]));wn=cu}return wn}var Vf=!1,Zd=!0;if(typeof G=="string")Vf=!0;else if(Array.isArray(G)){var qf=G.concat();lr=[];for(var xh,Ps=qf.length;Ps--;)(typeof(xh=qf.shift())!="string"||Array.isArray(xh)&&typeof xh[0]!="string")&&(Zd=!1);Vf=Zd}if(Vf===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var eu=He/ns.internal.scaleFactor,vh=eu*($o-1);switch(rt.baseline){case"bottom":Ge-=vh;break;case"top":Ge+=eu-vh;break;case"hanging":Ge+=eu-2*vh;break;case"middle":Ge+=eu/2-vh}if((ca=rt.maxWidth||0)>0&&(typeof G=="string"?G=ns.splitTextToSize(G,ca):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce(function(Ca,ka){return Ca.concat(ns.splitTextToSize(ka,ca))},[]))),Vt={text:G,x:be,y:Ge,options:rt,mutex:{pdfEscape:xa,activeFontKey:ve,fonts:Je,activeFontSize:He}},Ae.publish("preProcessText",Vt),G=Vt.text,wr=(rt=Vt.options).angle,!(Ln instanceof Ft)&&wr&&typeof wr=="number"){wr*=Math.PI/180,rt.rotationDirection===0&&(wr=-wr),w===S.ADVANCED&&(wr=-wr);var gh=Math.cos(wr),zf=Math.sin(wr);Ln=new Ft(gh,zf,-zf,gh,0,0)}else wr&&wr instanceof Ft&&(Ln=wr);w!==S.ADVANCED||Ln||(Ln=pr),(ha=rt.charSpace||Rf)!==void 0&&(Js+=E(O(ha))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(In=rt.horizontalScale)!==void 0&&(Js+=E(100*In)+` Tz
`),rt.lang;var oo=-1,Ig=rt.renderingMode!==void 0?rt.renderingMode:rt.stroke,jp=ns.internal.getCurrentPageInfo().pageContext;switch(Ig){case 0:case!1:case"fill":oo=0;break;case 1:case!0:case"stroke":oo=1;break;case 2:case"fillThenStroke":oo=2;break;case 3:case"invisible":oo=3;break;case 4:case"fillAndAddForClipping":oo=4;break;case 5:case"strokeAndAddPathForClipping":oo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":oo=6;break;case 7:case"addToPathForClipping":oo=7}var uv=jp.usedRenderingMode!==void 0?jp.usedRenderingMode:-1;oo!==-1?Js+=oo+` Tr
`:uv!==-1&&(Js+=`0 Tr
`),oo!==-1&&(jp.usedRenderingMode=oo),Fr=rt.align||"left";var il,Zs=He*$o,tu=ns.internal.pageSize.getWidth(),Np=Je[ve];ha=rt.charSpace||Rf,ca=rt.maxWidth||0,Ia=Object.assign({autoencode:!0,noBOM:!0},rt.flags);var dd=[],ru=function(Ca){return ns.getStringUnitWidth(Ca,{font:Np,charSpace:ha,fontSize:He,doKerning:!1})*He/Ol};if(Object.prototype.toString.call(G)==="[object Array]"){var zi;lr=ld(G),Fr!=="left"&&(il=lr.map(ru));var hi,au=0;if(Fr==="right"){be-=il[0],G=[],Ps=lr.length;for(var lo=0;lo<Ps;lo++)lo===0?(hi=Uo(be),zi=bc(Ge)):(hi=O(au-il[lo]),zi=-Zs),G.push([lr[lo],hi,zi]),au=il[lo]}else if(Fr==="center"){be-=il[0]/2,G=[],Ps=lr.length;for(var Ml=0;Ml<Ps;Ml++)Ml===0?(hi=Uo(be),zi=bc(Ge)):(hi=O((au-il[Ml])/2),zi=-Zs),G.push([lr[Ml],hi,zi]),au=il[Ml]}else if(Fr==="left"){G=[],Ps=lr.length;for(var yc=0;yc<Ps;yc++)G.push(lr[yc])}else if(Fr==="justify"&&Np.encoding==="Identity-H"){G=[],Ps=lr.length,ca=ca!==0?ca:tu;for(var Rl=0,Yn=0;Yn<Ps;Yn++)if(zi=Yn===0?bc(Ge):-Zs,hi=Yn===0?Uo(be):Rl,Yn<Ps-1){var Fl=O((ca-il[Yn])/(lr[Yn].split(" ").length-1)),gs=lr[Yn].split(" ");G.push([gs[0]+" ",hi,zi]),Rl=0;for(var co=1;co<gs.length;co++){var bh=(ru(gs[co-1]+" "+gs[co])-ru(gs[co]))*Ol+Fl;co==gs.length-1?G.push([gs[co],bh,0]):G.push([gs[co]+" ",bh,0]),Rl-=bh}}else G.push([lr[Yn],hi,zi]);G.push(["",Rl,0])}else{if(Fr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],Ps=lr.length,ca=ca!==0?ca:tu,Yn=0;Yn<Ps;Yn++)zi=Yn===0?bc(Ge):-Zs,hi=Yn===0?Uo(be):0,Yn<Ps-1?dd.push(E(O((ca-il[Yn])/(lr[Yn].split(" ").length-1)))):dd.push(0),G.push([lr[Yn],hi,zi])}}var jc=typeof rt.R2L=="boolean"?rt.R2L:Be;jc===!0&&(G=cd(G,function(Ca,ka,wn){return[Ca.split("").reverse().join(""),ka,wn]})),Vt={text:G,x:be,y:Ge,options:rt,mutex:{pdfEscape:xa,activeFontKey:ve,fonts:Je,activeFontSize:He}},Ae.publish("postProcessText",Vt),G=Vt.text,Pl=Vt.mutex.isHex||!1;var Hf=Je[ve].encoding;Hf!=="WinAnsiEncoding"&&Hf!=="StandardEncoding"||(G=cd(G,function(Ca,ka,wn){return[yp(Ca),ka,wn]})),lr=ld(G),G=[];for(var nu,su,iu,yh=0,Wf=1,ou=Array.isArray(lr[0])?Wf:yh,ud="",jh=function(Ca,ka,wn){var is="";return wn instanceof Ft?(wn=typeof rt.angle=="number"?rr(wn,new Ft(1,0,0,1,Ca,ka)):rr(new Ft(1,0,0,1,Ca,ka),wn),w===S.ADVANCED&&(wn=rr(new Ft(1,0,0,-1,0,0),wn)),is=wn.join(" ")+` Tm
`):is=E(Ca)+" "+E(ka)+` Td
`,is},Kn=0;Kn<lr.length;Kn++){switch(ud="",ou){case Wf:iu=(Pl?"<":"(")+lr[Kn][0]+(Pl?">":")"),nu=parseFloat(lr[Kn][1]),su=parseFloat(lr[Kn][2]);break;case yh:iu=(Pl?"<":"(")+lr[Kn]+(Pl?">":")"),nu=Uo(be),su=bc(Ge)}dd!==void 0&&dd[Kn]!==void 0&&(ud=dd[Kn]+` Tw
`),Kn===0?G.push(ud+jh(nu,su,Ln)+iu):ou===yh?G.push(ud+iu):ou===Wf&&G.push(ud+jh(nu,su,Ln)+iu)}G=ou===yh?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var Vo=`BT
/`;return Vo+=ve+" "+He+` Tf
`,Vo+=E(He*$o)+` TL
`,Vo+=mh+`
`,Vo+=Js,Vo+=G,oe(Vo+="ET"),f[ve]=!0,ns};var If=p.__private__.clip=p.clip=function(G){return oe(G==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return If("evenodd")},p.__private__.discardPath=p.discardPath=function(){return oe("n"),this};var at=p.__private__.isValidStyle=function(G){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(be=!0),be};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(G){return at(G)&&(d=G),this};var fr=p.__private__.getStyle=p.getStyle=function(G){var be=d;switch(G){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=G}return be},ar=p.close=function(){return oe("h"),this};p.stroke=function(){return oe("S"),this},p.fill=function(G){return Dr("f",G),this},p.fillEvenOdd=function(G){return Dr("f*",G),this},p.fillStroke=function(G){return Dr("B",G),this},p.fillStrokeEvenOdd=function(G){return Dr("B*",G),this};var Dr=function(G,be){$a(be)==="object"?rl(be,G):oe(G)},_r=function(G){G===null||w===S.ADVANCED&&G===void 0||(G=fr(G),oe(G))};function En(G,be,Ge,rt,jt){var Vt=new m0(be||this.boundingBox,Ge||this.xStep,rt||this.yStep,this.gState,jt||this.matrix);Vt.stream=this.stream;var lr=G+"$$"+this.cloneIndex+++"$$";return jr(lr,Vt),Vt}var rl=function(G,be){var Ge=mt[G.key],rt=qe[Ge];if(rt instanceof Zp)oe("q"),oe(Pf(be)),rt.gState&&p.setGState(rt.gState),oe(G.matrix.toString()+" cm"),oe("/"+Ge+" sh"),oe("Q");else if(rt instanceof m0){var jt=new Ft(1,0,0,-1,0,Jd());G.matrix&&(jt=jt.multiply(G.matrix||pr),Ge=En.call(rt,G.key,G.boundingBox,G.xStep,G.yStep,jt).id),oe("q"),oe("/Pattern cs"),oe("/"+Ge+" scn"),rt.gState&&p.setGState(rt.gState),oe(be),oe("Q")}},Pf=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vc=p.moveTo=function(G,be){return oe(E(O(G))+" "+E(q(be))+" m"),this},al=p.lineTo=function(G,be){return oe(E(O(G))+" "+E(q(be))+" l"),this},nl=p.curveTo=function(G,be,Ge,rt,jt,Vt){return oe([E(O(G)),E(q(be)),E(O(Ge)),E(q(rt)),E(O(jt)),E(q(Vt)),"c"].join(" ")),this};p.__private__.line=p.line=function(G,be,Ge,rt,jt){if(isNaN(G)||isNaN(be)||isNaN(Ge)||isNaN(rt)||!at(jt))throw new Error("Invalid arguments passed to jsPDF.line");return w===S.COMPAT?this.lines([[Ge-G,rt-be]],G,be,[1,1],jt||"S"):this.lines([[Ge-G,rt-be]],G,be,[1,1]).stroke()},p.__private__.lines=p.lines=function(G,be,Ge,rt,jt,Vt){var lr,wr,Fr,ha,ca,Ia,In,Ln,ns,ss,Js,Pl;if(typeof G=="number"&&(Pl=Ge,Ge=be,be=G,G=Pl),rt=rt||[1,1],Vt=Vt||!1,isNaN(be)||isNaN(Ge)||!Array.isArray(G)||!Array.isArray(rt)||!at(jt)||typeof Vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vc(be,Ge),lr=rt[0],wr=rt[1],ha=G.length,ss=be,Js=Ge,Fr=0;Fr<ha;Fr++)(ca=G[Fr]).length===2?(ss=ca[0]*lr+ss,Js=ca[1]*wr+Js,al(ss,Js)):(Ia=ca[0]*lr+ss,In=ca[1]*wr+Js,Ln=ca[2]*lr+ss,ns=ca[3]*wr+Js,ss=ca[4]*lr+ss,Js=ca[5]*wr+Js,nl(Ia,In,Ln,ns,ss,Js));return Vt&&ar(),_r(jt),this},p.path=function(G){for(var be=0;be<G.length;be++){var Ge=G[be],rt=Ge.c;switch(Ge.op){case"m":vc(rt[0],rt[1]);break;case"l":al(rt[0],rt[1]);break;case"c":nl.apply(this,rt);break;case"h":ar()}}return this},p.__private__.rect=p.rect=function(G,be,Ge,rt,jt){if(isNaN(G)||isNaN(be)||isNaN(Ge)||isNaN(rt)||!at(jt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===S.COMPAT&&(rt=-rt),oe([E(O(G)),E(q(be)),E(O(Ge)),E(O(rt)),"re"].join(" ")),_r(jt),this},p.__private__.triangle=p.triangle=function(G,be,Ge,rt,jt,Vt,lr){if(isNaN(G)||isNaN(be)||isNaN(Ge)||isNaN(rt)||isNaN(jt)||isNaN(Vt)||!at(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ge-G,rt-be],[jt-Ge,Vt-rt],[G-jt,be-Vt]],G,be,[1,1],lr,!0),this},p.__private__.roundedRect=p.roundedRect=function(G,be,Ge,rt,jt,Vt,lr){if(isNaN(G)||isNaN(be)||isNaN(Ge)||isNaN(rt)||isNaN(jt)||isNaN(Vt)||!at(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return jt=Math.min(jt,.5*Ge),Vt=Math.min(Vt,.5*rt),this.lines([[Ge-2*jt,0],[jt*wr,0,jt,Vt-Vt*wr,jt,Vt],[0,rt-2*Vt],[0,Vt*wr,-jt*wr,Vt,-jt,Vt],[2*jt-Ge,0],[-jt*wr,0,-jt,-Vt*wr,-jt,-Vt],[0,2*Vt-rt],[0,-Vt*wr,jt*wr,-Vt,jt,-Vt]],G+jt,be,[1,1],lr,!0),this},p.__private__.ellipse=p.ellipse=function(G,be,Ge,rt,jt){if(isNaN(G)||isNaN(be)||isNaN(Ge)||isNaN(rt)||!at(jt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Vt=4/3*(Math.SQRT2-1)*Ge,lr=4/3*(Math.SQRT2-1)*rt;return vc(G+Ge,be),nl(G+Ge,be-lr,G+Vt,be-rt,G,be-rt),nl(G-Vt,be-rt,G-Ge,be-lr,G-Ge,be),nl(G-Ge,be+lr,G-Vt,be+rt,G,be+rt),nl(G+Vt,be+rt,G+Ge,be+lr,G+Ge,be),_r(jt),this},p.__private__.circle=p.circle=function(G,be,Ge,rt){if(isNaN(G)||isNaN(be)||isNaN(Ge)||!at(rt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,be,Ge,Ge,rt)},p.setFont=function(G,be,Ge){return Ge&&(be=D(be,Ge)),ve=qi(G,be,{disableWarning:!1}),this};var Is=p.__private__.getFont=p.getFont=function(){return Je[qi.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var G,be,Ge={};for(G in Qe)if(Qe.hasOwnProperty(G))for(be in Ge[G]=[],Qe[G])Qe[G].hasOwnProperty(be)&&Ge[G].push(be);return Ge},p.addFont=function(G,be,Ge,rt,jt){var Vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Vt.indexOf(arguments[3])!==-1?jt=arguments[3]:arguments[3]&&Vt.indexOf(arguments[3])==-1&&(Ge=D(Ge,rt)),jt=jt||"Identity-H",cn.call(this,G,be,Ge,jt)};var Ci,gc=e.lineWidth||.200025,sl=p.__private__.getLineWidth=p.getLineWidth=function(){return gc},Of=p.__private__.setLineWidth=p.setLineWidth=function(G){return gc=G,oe(E(O(G))+" w"),this};p.__private__.setLineDash=ta.API.setLineDash=ta.API.setLineDashPattern=function(G,be){if(G=G||[],be=be||0,isNaN(be)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map(function(Ge){return E(O(Ge))}).join(" "),be=E(O(be)),oe("["+G+"] "+be+" d"),this};var od=p.__private__.getLineHeight=p.getLineHeight=function(){return He*Ci};p.__private__.getLineHeight=p.getLineHeight=function(){return He*Ci};var Mf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(Ci=G),this},Xd=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ci};Mf(e.lineHeight);var Uo=p.__private__.getHorizontalCoordinate=function(G){return O(G)},bc=p.__private__.getVerticalCoordinate=function(G){return w===S.ADVANCED?G:Mt[V].mediaBox.topRightY-Mt[V].mediaBox.bottomLeftY-O(G)},Eg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(G){return E(Uo(G))},Qd=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(G){return E(bc(G))},Il=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Le(Il)},p.__private__.setStrokeColor=p.setDrawColor=function(G,be,Ge,rt){return Il=Ve({ch1:G,ch2:be,ch3:Ge,ch4:rt,pdfColorType:"draw",precision:2}),oe(Il),this};var fh=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Le(fh)},p.__private__.setFillColor=p.setFillColor=function(G,be,Ge,rt){return fh=Ve({ch1:G,ch2:be,ch3:Ge,ch4:rt,pdfColorType:"fill",precision:2}),oe(fh),this};var mh=e.textColor||"0 g",Dg=p.__private__.getTextColor=p.getTextColor=function(){return Le(mh)};p.__private__.setTextColor=p.setTextColor=function(G,be,Ge,rt){return mh=Ve({ch1:G,ch2:be,ch3:Ge,ch4:rt,pdfColorType:"text",precision:3}),this};var Rf=e.charSpace,Ag=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Rf||0)};p.__private__.setCharSpace=p.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rf=G,this};var xp=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(G){var be=p.CapJoinStyles[G];if(be===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xp=be,oe(be+" J"),this};var Ff=0;p.__private__.setLineJoin=p.setLineJoin=function(G){var be=p.CapJoinStyles[G];if(be===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ff=be,oe(be+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(E(O(G))+" M"),this},p.GState=tS,p.setGState=function(G){(G=typeof G=="string"?Ie[Xe[G]]:dv(null,G)).equals(Ye)||(oe("/"+G.id+" gs"),Ye=G)};var dv=function(G,be){if(!G||!Xe[G]){var Ge=!1;for(var rt in Ie)if(Ie.hasOwnProperty(rt)&&Ie[rt].equals(be)){Ge=!0;break}if(Ge)be=Ie[rt];else{var jt="GS"+(Object.keys(Ie).length+1).toString(10);Ie[jt]=be,be.id=jt}return G&&(Xe[G]=be.id),Ae.publish("addGState",be),be}};p.addGState=function(G,be){return dv(G,be),this},p.saveGraphicsState=function(){return oe("q"),Ue.push({key:ve,size:He,color:mh}),this},p.restoreGraphicsState=function(){oe("Q");var G=Ue.pop();return ve=G.key,He=G.size,mh=G.color,Ye=null,this},p.setCurrentTransformationMatrix=function(G){return oe(G.toString()+" cm"),this},p.comment=function(G){return oe("#"+G),this};var Lf=function(G,be){var Ge=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ge},set:function(Vt){isNaN(Vt)||(Ge=parseFloat(Vt))}});var rt=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return rt},set:function(Vt){isNaN(Vt)||(rt=parseFloat(Vt))}});var jt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return jt},set:function(Vt){jt=Vt.toString()}}),this},vp=function(G,be,Ge,rt){Lf.call(this,G,be),this.type="rect";var jt=Ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return jt},set:function(lr){isNaN(lr)||(jt=parseFloat(lr))}});var Vt=rt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Vt},set:function(lr){isNaN(lr)||(Vt=parseFloat(lr))}}),this},gp=function(){this.page=lt,this.currentPage=V,this.pages=de.slice(0),this.pagesContext=Mt.slice(0),this.x=De,this.y=Ke,this.matrix=Nt,this.width=ph(V),this.height=Jd(V),this.outputDestination=se,this.id="",this.objectNumber=-1};gp.prototype.restore=function(){lt=this.page,V=this.currentPage,Mt=this.pagesContext,de=this.pages,De=this.x,Ke=this.y,Nt=this.matrix,$f(V,this.width),bp(V,this.height),se=this.outputDestination};var Bf=function(G,be,Ge,rt,jt){Xt.push(new gp),lt=V=0,de=[],De=G,Ke=be,Nt=jt,ui([Ge,rt])},Tg=function(G){if(bt[G])Xt.pop().restore();else{var be=new gp,Ge="Xo"+(Object.keys(ot).length+1).toString(10);be.id=Ge,bt[G]=Ge,ot[Ge]=be,Ae.publish("addFormObject",be),Xt.pop().restore()}};for(var Uf in p.beginFormObject=function(G,be,Ge,rt,jt){return Bf(G,be,Ge,rt,jt),this},p.endFormObject=function(G){return Tg(G),this},p.doFormObject=function(G,be){var Ge=ot[bt[G]];return oe("q"),oe(be.toString()+" cm"),oe("/"+Ge.id+" Do"),oe("Q"),this},p.getFormObject=function(G){var be=ot[bt[G]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},p.save=function(G,be){return G=G||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(Xp(mc(Dl()),G),typeof Xp.unload=="function"&&na.setTimeout&&setTimeout(Xp.unload,911),this):new Promise(function(Ge,rt){try{var jt=Xp(mc(Dl()),G);typeof Xp.unload=="function"&&na.setTimeout&&setTimeout(Xp.unload,911),Ge(jt)}catch(Vt){rt(Vt.message)}})},ta.API)ta.API.hasOwnProperty(Uf)&&(Uf==="events"&&ta.API.events.length?function(G,be){var Ge,rt,jt;for(jt=be.length-1;jt!==-1;jt--)Ge=be[jt][0],rt=be[jt][1],G.subscribe.apply(G,[Ge].concat(typeof rt=="function"?[rt]:rt))}(Ae,ta.API.events):p[Uf]=ta.API[Uf]);var ph=p.getPageWidth=function(G){return(Mt[G=G||V].mediaBox.topRightX-Mt[G].mediaBox.bottomLeftX)/pe},$f=p.setPageWidth=function(G,be){Mt[G].mediaBox.topRightX=be*pe+Mt[G].mediaBox.bottomLeftX},Jd=p.getPageHeight=function(G){return(Mt[G=G||V].mediaBox.topRightY-Mt[G].mediaBox.bottomLeftY)/pe},bp=p.setPageHeight=function(G,be){Mt[G].mediaBox.topRightY=be*pe+Mt[G].mediaBox.bottomLeftY};return p.internal={pdfEscape:xa,getStyle:fr,getFont:Is,getFontSize:ft,getCharSpace:Ag,getTextColor:Dg,getLineHeight:od,getLineHeightFactor:Xd,getLineWidth:sl,write:ye,getHorizontalCoordinate:Uo,getVerticalCoordinate:bc,getCoordinateString:Eg,getVerticalCoordinateString:Qd,collections:{},newObject:vt,newAdditionalObject:Re,newObjectDeferred:Lt,newObjectDeferredBegin:fe,getFilters:pt,putStream:wt,events:Ae,scaleFactor:pe,pageSize:{getWidth:function(){return ph(V)},setWidth:function(G){$f(V,G)},getHeight:function(){return Jd(V)},setHeight:function(G){bp(V,G)}},encryptionOptions:u,encryption:vs,getEncryptor:xc,output:Al,getNumberOfPages:qa,pages:de,out:oe,f2:L,f3:P,getPageInfo:Tl,getPageInfoByObjId:Jr,getCurrentPageInfo:hh,getPDFVersion:g,Point:Lf,Rectangle:vp,Matrix:Ft,hasHotfix:pc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ph(V)},set:function(G){$f(V,G)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Jd(V)},set:function(G){bp(V,G)},enumerable:!0,configurable:!0}),Zo.call(p,Me),ve="F1",el(s,r),Ae.publish("initialized"),p}o0.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},o0.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},o0.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},o0.prototype.processOwnerPassword=function(e,t){return Z3(J3(t).substr(0,5),e)},o0.prototype.encryptor=function(e,t){var r=J3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Z3(r,a)}},tS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||$a(e)!==$a(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},ta.API={events:[]},ta.version="3.0.1";var ws=ta.API,DP=1,cv=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pa=function(e){return e.toFixed(2)},km=function(e){return e.toFixed(5)};ws.__acroform__={};var _l=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},X9=function(e){return e*DP},_u=function(e){var t=new IQ,r=Ir.internal.getHeight(e)||0,a=Ir.internal.getWidth(e)||0;return t.BBox=[0,0,Number(pa(a)),Number(pa(r))],t},X9e=ws.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Q9e=ws.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},J9e=ws.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Us=ws.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J9e(e,t-1)},$s=ws.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return X9e(e,t-1)},Vs=ws.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Q9e(e,t-1)},Z9e=ws.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=a(i)||0,[Number(pa(c.lowerLeft_X)),Number(pa(c.lowerLeft_Y)),Number(pa(c.upperRight_X)),Number(pa(c.upperRight_Y))]},eUe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=eA(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+pa(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=_u(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},eA=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var i=r,o=Ir.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ir.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,O,Y){if(P+1<s.length){var q=O+" "+s[P+1][0];return $N(q,e,Y).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=$N("3",e,i).height,f=e.multiline?o-i:(o-h)/2,p=f+=2,x=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+$N(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",S=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var k=!1;if(s[w].length!==1&&b!==s[w].length-1){if((h+2)*(S+2)+2>o)continue e;y+=s[w][b],k=!0,g=w,w--}else{y=(y+=s[w][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var C=parseInt(w),D=c(C,y,i),E=w>=s.length-1;if(D&&!E){y+=" ",b=0;continue}if(D||E){if(E)g=C;else if(e.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(S+2)+2>o)continue e;g=C}}for(var A="",I=x;I<=g;I++){var L=s[I];if(e.multiline){if(I===g){A+=L[b]+" ",b=(b+1)%L.length;continue}if(I===x){A+=L[L.length-1]+" ";continue}}A+=L[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,u=$N(A,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=pa(d)+" "+pa(p)+` Td
`,t+="("+cv(A)+`) Tj
`,t+=-pa(d)+` 0 Td
`,p=-(i+2),u=0,x=k?g:g+1,S++,y=""}break}return a.text=t,a.fontSize=i,a},$N=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},tUe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},rUe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},aUe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),$a(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},nUe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Yd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(tUe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");DP=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new PQ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&rUe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Z9e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ir.createDefaultAppearanceStream(l),$a(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=eUe(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var p=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var x=p[o];typeof x=="function"&&(x=x.call(s,l)),h+="/"+o+" "+x+" ",s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x)}}else typeof(x=p)=="function"&&(x=x.call(s,l)),h+="/"+o+" "+x,s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&aUe(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},TQ=ws.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),$a(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+cv(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qD=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+cv(a(e))+")"},Vu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Vu.prototype.toString=function(){return this.objId+" 0 R"},Vu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Vu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:TQ(s,this.objId,this.scope)}):s instanceof Vu?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var IQ=function(){Vu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};_l(IQ,Vu);var PQ=function(){Vu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+cv(r(e))+")"}},set:function(r){e=r}})};_l(PQ,Vu);var Yd=function e(){Vu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Us(t,3)},set:function(y){y?this.F=$s(t,3):this.F=Vs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof rS)return;i="FieldObject"+e.FieldNum++}var y=function(S){return S};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+cv(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/DP:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof rS||this instanceof _x))return qD(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Pi?f:qD(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof Pi?y:y.substr(0,1)==="("?Zv(y.substr(1,y.length-2)):Zv(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi?Zv(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Pi?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Pi?p:qD(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Pi?y:y.substr(0,1)==="("?Zv(y.substr(1,y.length-2)):Zv(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi?Zv(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Pi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(y){x=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,1)},set:function(y){y?this.Ff=$s(this.Ff,1):this.Ff=Vs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,2)},set:function(y){y?this.Ff=$s(this.Ff,2):this.Ff=Vs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,3)},set:function(y){y?this.Ff=$s(this.Ff,3):this.Ff=Vs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};_l(Yd,Vu);var I0=function(){Yd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TQ(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,18)},set:function(r){r?this.Ff=$s(this.Ff,18):this.Ff=Vs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=$s(this.Ff,19):this.Ff=Vs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,20)},set:function(r){r?(this.Ff=$s(this.Ff,20),t.sort()):this.Ff=Vs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,22)},set:function(r){r?this.Ff=$s(this.Ff,22):this.Ff=Vs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,23)},set:function(r){r?this.Ff=$s(this.Ff,23):this.Ff=Vs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,27)},set:function(r){r?this.Ff=$s(this.Ff,27):this.Ff=Vs(this.Ff,27)}}),this.hasAppearanceStream=!1};_l(I0,Yd);var P0=function(){I0.call(this),this.fontName="helvetica",this.combo=!1};_l(P0,I0);var O0=function(){P0.call(this),this.combo=!0};_l(O0,P0);var ow=function(){O0.call(this),this.edit=!0};_l(ow,O0);var Pi=function(){Yd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,15)},set:function(r){r?this.Ff=$s(this.Ff,15):this.Ff=Vs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,16)},set:function(r){r?this.Ff=$s(this.Ff,16):this.Ff=Vs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,17)},set:function(r){r?this.Ff=$s(this.Ff,17):this.Ff=Vs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,26)},set:function(r){r?this.Ff=$s(this.Ff,26):this.Ff=Vs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+cv(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){$a(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};_l(Pi,Yd);var lw=function(){Pi.call(this),this.pushButton=!0};_l(lw,Pi);var M0=function(){Pi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};_l(M0,Pi);var rS=function(){var e,t;Yd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+cv(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){$a(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_l(rS,Yd),M0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},M0.prototype.createOption=function(e){var t=new rS;return t.Parent=this,t.optionName=e,this.Kids.push(t),sUe.call(this.scope,t),t};var cw=function(){Pi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ir.CheckBox.createAppearanceStream()};_l(cw,Pi);var _x=function(){Yd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,13)},set:function(t){t?this.Ff=$s(this.Ff,13):this.Ff=Vs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,21)},set:function(t){t?this.Ff=$s(this.Ff,21):this.Ff=Vs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,23)},set:function(t){t?this.Ff=$s(this.Ff,23):this.Ff=Vs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,24)},set:function(t){t?this.Ff=$s(this.Ff,24):this.Ff=Vs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,25)},set:function(t){t?this.Ff=$s(this.Ff,25):this.Ff=Vs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,26)},set:function(t){t?this.Ff=$s(this.Ff,26):this.Ff=Vs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_l(_x,Yd);var dw=function(){_x.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Us(this.Ff,14)},set:function(e){e?this.Ff=$s(this.Ff,14):this.Ff=Vs(this.Ff,14)}}),this.password=!0};_l(dw,_x);var Ir={CheckBox:{createAppearanceStream:function(){return{N:{On:Ir.CheckBox.YesNormal},D:{On:Ir.CheckBox.YesPushDown,Off:Ir.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=_u(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=eA(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+pa(Ir.internal.getWidth(e))+" "+pa(Ir.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+pa(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=_u(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Ir.internal.getHeight(e),o=Ir.internal.getWidth(e),l=eA(e,e.caption);return s.push("1 g"),s.push("0 0 "+pa(o)+" "+pa(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+pa(o-1)+" "+pa(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+pa(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=_u(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pa(Ir.internal.getWidth(e))+" "+pa(Ir.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ir.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ir.RadioButton.Circle.YesNormal,t.D[e]=Ir.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=_u(e);t.scope=e.scope;var r=[],a=Ir.internal.getWidth(e)<=Ir.internal.getHeight(e)?Ir.internal.getWidth(e)/4:Ir.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Ir.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+km(Ir.internal.getWidth(e)/2)+" "+km(Ir.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=_u(e);t.scope=e.scope;var r=[],a=Ir.internal.getWidth(e)<=Ir.internal.getHeight(e)?Ir.internal.getWidth(e)/4:Ir.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Ir.internal.Bezier_C).toFixed(5)),o=Number((a*Ir.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+km(Ir.internal.getWidth(e)/2)+" "+km(Ir.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+km(Ir.internal.getWidth(e)/2)+" "+km(Ir.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=_u(e);t.scope=e.scope;var r=[],a=Ir.internal.getWidth(e)<=Ir.internal.getHeight(e)?Ir.internal.getWidth(e)/4:Ir.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Ir.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+km(Ir.internal.getWidth(e)/2)+" "+km(Ir.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ir.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ir.RadioButton.Cross.YesNormal,t.D[e]=Ir.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=_u(e);t.scope=e.scope;var r=[],a=Ir.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+pa(Ir.internal.getWidth(e)-2)+" "+pa(Ir.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(pa(a.x1.x)+" "+pa(a.x1.y)+" m"),r.push(pa(a.x2.x)+" "+pa(a.x2.y)+" l"),r.push(pa(a.x4.x)+" "+pa(a.x4.y)+" m"),r.push(pa(a.x3.x)+" "+pa(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=_u(e);t.scope=e.scope;var r=Ir.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+pa(Ir.internal.getWidth(e))+" "+pa(Ir.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+pa(Ir.internal.getWidth(e)-2)+" "+pa(Ir.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(pa(r.x1.x)+" "+pa(r.x1.y)+" m"),a.push(pa(r.x2.x)+" "+pa(r.x2.y)+" l"),a.push(pa(r.x4.x)+" "+pa(r.x4.y)+" m"),a.push(pa(r.x3.x)+" "+pa(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=_u(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pa(Ir.internal.getWidth(e))+" "+pa(Ir.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ir.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ir.internal.getWidth(e),r=Ir.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Ir.internal.getWidth=function(e){var t=0;return $a(e)==="object"&&(t=X9(e.Rect[2])),t},Ir.internal.getHeight=function(e){var t=0;return $a(e)==="object"&&(t=X9(e.Rect[3])),t};var sUe=ws.addField=function(e){if(nUe(this,e),!(e instanceof Yd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ws.AcroFormChoiceField=I0,ws.AcroFormListBox=P0,ws.AcroFormComboBox=O0,ws.AcroFormEditBox=ow,ws.AcroFormButton=Pi,ws.AcroFormPushButton=lw,ws.AcroFormRadioButton=M0,ws.AcroFormCheckBox=cw,ws.AcroFormTextField=_x,ws.AcroFormPasswordField=dw,ws.AcroFormAppearance=Ir,ws.AcroForm={ChoiceField:I0,ListBox:P0,ComboBox:O0,EditBox:ow,Button:Pi,PushButton:lw,RadioButton:M0,CheckBox:cw,TextField:_x,PasswordField:dw,Appearance:Ir},ta.AcroForm={ChoiceField:I0,ListBox:P0,ComboBox:O0,EditBox:ow,Button:Pi,PushButton:lw,RadioButton:M0,CheckBox:cw,TextField:_x,PasswordField:dw,Appearance:Ir};ta.AcroForm;function OQ(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(P,O){var Y,q,K,U,J,F=t;if((O=O||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(D(P))for(J in r)for(K=r[J],Y=0;Y<K.length;Y+=1){for(U=!0,q=0;q<K[Y].length;q+=1)if(K[Y][q]!==void 0&&K[Y][q]!==P[q]){U=!1;break}if(U===!0){F=J;break}}else for(J in r)for(K=r[J],Y=0;Y<K.length;Y+=1){for(U=!0,q=0;q<K[Y].length;q+=1)if(K[Y][q]!==void 0&&K[Y][q]!==P.charCodeAt(q)){U=!1;break}if(U===!0){F=J;break}}return F===t&&O!==t&&(F=O),F},s=function P(O){for(var Y=this.internal.write,q=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:O.width}),U.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var J="",F=0,X=O.transparency.length;F<X;F++)J+=O.transparency[F]+" "+O.transparency[F]+" ";U.push({key:"Mask",value:"["+J+"]"})}O.sMask!==void 0&&U.push({key:"SMask",value:O.objectId+1+" 0 R"});var Q=O.filter!==void 0?["/"+O.filter]:void 0;if(q({data:O.data,additionalKeyValues:U,alreadyAppliedFilters:Q,objectId:O.objectId}),Y("endobj"),"sMask"in O&&O.sMask!==void 0){var ie="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,M={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:ie,data:O.sMask};"filter"in O&&(M.filter=O.filter),P.call(this,M)}if(O.colorSpace===b.INDEXED){var V=this.internal.newObject();q({data:A(new Uint8Array(O.palette)),objectId:V}),Y("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var O in P)s.call(this,P[O])},o=function(){var P,O=this.internal.collections.addImage_images,Y=this.internal.write;for(var q in O)Y("/I"+(P=O[q]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},h=function(P){return $a(P)==="object"&&P.nodeType===1},f=function(P,O){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var Y=""+P.getAttribute("src");if(Y.indexOf("data:image/")===0)return hy(unescape(Y).split("base64,").pop());var q=e.loadFile(Y,!0);if(q!==void 0)return q}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var K;switch(O){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return hy(P.toDataURL(K,1).split("base64,").pop())}},p=function(P){var O=this.internal.collections.addImage_images;if(O){for(var Y in O)if(P===O[Y].alias)return O[Y]}},x=function(P,O,Y){return P||O||(P=-96,O=-96),P<0&&(P=-1*Y.width*72/P/this.internal.scaleFactor),O<0&&(O=-1*Y.height*72/O/this.internal.scaleFactor),P===0&&(P=O*Y.width/Y.height),O===0&&(O=P*Y.height/Y.width),[P,O]},g=function(P,O,Y,q,K,U){var J=x.call(this,Y,q,K),F=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,Q=c.call(this);if(Y=J[0],q=J[1],Q[K.index]=K,U){U*=Math.PI/180;var ie=Math.cos(U),M=Math.sin(U),V=function(ee){return ee.toFixed(4)},W=[V(ie),V(M),V(-1*M),V(ie),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,F(P),X(O+q),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([F(Y),"0","0",F(q),"0","0","cm"].join(" "))):this.internal.write([F(Y),"0","0",F(q),F(P),X(O+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(P){var O,Y,q=0;if(typeof P=="string")for(Y=P.length,O=0;O<Y;O++)q=(q<<5)-q+P.charCodeAt(O),q|=0;else if(D(P))for(Y=P.byteLength/2,O=0;O<Y;O++)q=(q<<5)-q+P[O],q|=0;return q},w=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var O=!0;return P.length===0&&(O=!1),P.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(O=!1),O},k=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var O=P.indexOf(",");return O<0?null:P.substring(0,O).trim().endsWith("base64")?P.substring(O+1):null},C=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return C()&&P instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(P){return C()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var O=P.length,Y=new Uint8Array(O),q=0;q<O;q++)Y[q]=P.charCodeAt(q);return Y},A=e.__addimage__.arrayBufferToBinaryString=function(P){for(var O="",Y=D(P)?P:new Uint8Array(P),q=0;q<Y.length;q+=8192)O+=String.fromCharCode.apply(null,Y.subarray(q,q+8192));return O};e.addImage=function(){var P,O,Y,q,K,U,J,F,X;if(typeof arguments[1]=="number"?(O=t,Y=arguments[1],q=arguments[2],K=arguments[3],U=arguments[4],J=arguments[5],F=arguments[6],X=arguments[7]):(O=arguments[1],Y=arguments[2],q=arguments[3],K=arguments[4],U=arguments[5],J=arguments[6],F=arguments[7],X=arguments[8]),$a(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var Q=P;P=Q.imageData,O=Q.format||O||t,Y=Q.x||Y||0,q=Q.y||q||0,K=Q.w||Q.width||K,U=Q.h||Q.height||U,J=Q.alias||J,F=Q.compression||F,X=Q.rotation||Q.angle||X}var ie=this.internal.getFilters();if(F===void 0&&ie.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(Y)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=I.call(this,P,O,J,F);return g.call(this,Y,q,K,U,M,X),this};var I=function(P,O,Y,q){var K,U,J;if(typeof P=="string"&&a(P)===t){P=unescape(P);var F=L(P,!1);(F!==""||(F=e.loadFile(P,!0))!==void 0)&&(P=F)}if(h(P)&&(P=f(P,O)),O=a(P,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((J=Y)==null||J.length===0)&&(Y=function(X){return typeof X=="string"||D(X)?S(X):D(X.data)?S(X.data):null}(P)),(K=p.call(this,Y))||(C()&&(P instanceof Uint8Array||O==="RGBA"||(U=P,P=E(P))),K=this["process"+O.toUpperCase()](P,d.call(this),Y,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:y.NONE}(q),U)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},L=e.__addimage__.convertBase64ToBinaryString=function(P,O){O=typeof O!="boolean"||O;var Y,q="";if(typeof P=="string"){var K;Y=(K=k(P))!==null&&K!==void 0?K:P;try{q=hy(Y)}catch(U){if(O)throw w(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(P){var O,Y,q="";if(h(P)&&(P=f(P)),typeof P=="string"&&a(P)===t&&((q=L(P,!1))===""&&(q=e.loadFile(P)||""),P=q),Y=a(P),!u(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!C()||P instanceof Uint8Array||(P=E(P)),!(O=this["process"+Y.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=Y,O}})(ta.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ta.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((a=d[h]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){a=d[f];var p=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),S=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+p(y(a.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(S))+") >>",g.content=i;var w=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+w,a.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var k=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(x(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var C=this.annotations._nameMap[a.options.name];a.options.pageNumber=C.page,a.options.top=C.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(x(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var D=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+D+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(ta.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=r,S="",w=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(w++,typeof(y=y[g.charCodeAt(b)])=="number"&&(S+=String.fromCharCode(y),y=r,w=0),b===g.length-1&&(y=r,S+=g.charAt(b-(w-1)),b-=w-1,w=0)):(y=r,S+=g.charAt(b-w),b-=w,w=0);return S};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&a[g.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(y)||!o(y)&&l(b)||l(g)&&!o(b)||l(g)&&c(b)||l(g)&&l(b)?0:u(g)&&o(b)&&!l(b)&&o(y)&&d(y)?3:l(g)||!o(y)?1:2:-1},p=function(g){var b=0,y=0,S=0,w="",k="",C="",D=(g=g||"").split("\\s+"),E=[];for(b=0;b<D.length;b+=1){for(E.push(""),y=0;y<D[b].length;y+=1)w=D[b][y],k=D[b][y-1],C=D[b][y+1],o(w)?(S=f(w,k,C),E[b]+=S!==-1?String.fromCharCode(t[w.charCodeAt(0)][S]):w):E[b]+=w;E[b]=h(E[b])}return E.join(" ")},x=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var S=0;for(y=[],S=0;S<b.length;S+=1)Array.isArray(b[S])?y.push([p(b[S][0]),b[S][1],b[S][2]]):y.push([p(b[S])]);g=y}else g=p(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",x])}(ta.API),ta.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ta.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(g){x=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,x=0,g=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,k){return w.concat(b.splitTextToSize(k,y))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)p<(g=this.getStringUnitWidth(c[S],{font:h})*u)&&(p=g);return p!==0&&(x=c.length),{w:p/=f,h:Math.max((x*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,f){if(a.call(this),!u)throw new Error("No data for PDF table.");var p,x,g,b,y=[],S=[],w=[],k={},C={},D=[],E=[],A=(f=f||{}).autoSize||!1,I=f.printHeaders!==!1,L=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,P=f.margins||Object.assign({width:this.getPageWidth()},t),O=typeof f.padding=="number"?f.padding:3,Y=f.headerBackgroundColor||"#c8c8c8",q=f.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=q,this.setFontSize(L),h==null)S=y=Object.keys(u[0]),w=y.map(function(){return"left"});else if(Array.isArray(h)&&$a(h[0])==="object")for(y=h.map(function(Q){return Q.name}),S=h.map(function(Q){return Q.prompt||Q.name||""}),w=h.map(function(Q){return Q.align||"left"}),p=0;p<h.length;p+=1)C[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=y=h,w=y.map(function(){return"left"}));if(A||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=u.map(function(Q){return Q[b]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=k[b],this.setFont(void 0,"normal"),g=0;g<x.length;g+=1)D.push(this.getTextDimensions(x[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[b]=Math.max.apply(null,D)+O+O,D=[]}if(I){var K={};for(p=0;p<y.length;p+=1)K[y[p]]={},K[y[p]].text=S[p],K[y[p]].align=w[p];var U=l.call(this,K,C);E=y.map(function(Q){return new i(c,d,C[Q],U,K[Q].text,void 0,K[Q].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var J=h.reduce(function(Q,ie){return Q[ie.name]=ie.align,Q},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var F=l.call(this,u[p],C);for(g=0;g<y.length;g+=1){var X=u[p][y[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:g,data:X},this),o.call(this,new i(c,d,C[y[g]],F,X,p+2,J[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(p){var x=c[p];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/f+u+u},this).reduce(function(p,x){return Math.max(p,x)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(x)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(ta.API);var MQ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},RQ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tA=OQ(RQ),FQ=[100,200,300,400,500,600,700,800,900],iUe=OQ(FQ);function rA(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return MQ[i=i||"normal"]?i:"normal"}(e.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof tA[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function Q9(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var oUe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},J9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Z9(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lUe(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},oUe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=rA(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+Z9(i)+"' and default family '"+a+"'.");if(o=function(c,d){if(d[c])return d[c];var u=tA[c],h=u<=tA.normal?-1:1,f=Q9(d,RQ,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=MQ[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=iUe[c],h=Q9(d,FQ,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Z9(i)+"'.");return o}function eU(e){return e.trimLeft()}function cUe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function dUe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var VN,tU,rU,zD=["times"];(function(e){var t,r,a,s,i,o,l,c,d,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=M;Object.defineProperty(this,"pdf",{get:function(){return V}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(ue){W=!!ue}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(ue){ee=!!ue}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ue){isNaN(ue)||(re=ue)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(ue){isNaN(ue)||(ne=ue)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ue){var oe;typeof ue=="number"?oe=[ue,ue,ue,ue]:((oe=new Array(4))[0]=ue[0],oe[1]=ue.length>=2?ue[1]:oe[0],oe[2]=ue.length>=3?ue[2]:oe[0],oe[3]=ue.length>=4?ue[3]:oe[1]),d.margin=oe}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(ue){ce=ue}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(ue){ae=ue}});var Z=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Z},set:function(ue){Z=ue}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ue){ue instanceof u&&(d=ue)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ue){d.path=ue}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(ue){de=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var oe;oe=f(ue),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var oe=f(ue);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var z=null;function se(ue,oe){if(z===null){var ye=function(je){var Me=[];return Object.keys(je).forEach(function(He){je[He].forEach(function(et){var ft=null;switch(et){case"bold":ft={family:He,weight:"bold"};break;case"italic":ft={family:He,style:"italic"};break;case"bolditalic":ft={family:He,weight:"bold",style:"italic"};break;case"":case"normal":ft={family:He}}ft!==null&&(ft.ref={name:He,style:et},Me.push(ft))})}),Me}(ue.getFontList());z=function(je){for(var Me={},He=0;He<je.length;++He){var et=rA(je[He]),ft=et.family,Be=et.stretch,dt=et.style,Tt=et.weight;Me[ft]=Me[ft]||{},Me[ft][Be]=Me[ft][Be]||{},Me[ft][Be][dt]=Me[ft][Be][dt]||{},Me[ft][Be][dt][Tt]=et}return Me}(ye.concat(oe))}return z}var Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(ue){z=null,Ne=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var oe;if(this.ctx.font=ue,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var ye=oe[1];oe[2];var je=oe[3],Me=oe[4];oe[5];var He=oe[6],et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(et==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var ft=function(he){var ve,pe,De=[],Ke=he.trim();if(Ke==="")return zD;if(Ke in J9)return[J9[Ke]];for(;Ke!=="";){switch(pe=null,ve=(Ke=eU(Ke)).charAt(0)){case'"':case"'":pe=cUe(Ke.substring(1),ve);break;default:pe=dUe(Ke)}if(pe===null||(De.push(pe[0]),(Ke=eU(pe[1]))!==""&&Ke.charAt(0)!==","))return zD;Ke=Ke.replace(/^,/,"")}return De}(He);if(this.fontFaces){var Be=lUe(se(this.pdf,this.fontFaces),ft.map(function(he){return{family:he,stretch:"normal",weight:je,style:ye}}));this.pdf.setFont(Be.ref.name,Be.ref.style)}else{var dt="";(je==="bold"||parseInt(je,10)>=700||ye==="bold")&&(dt="bold"),ye==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var Tt="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qt=0;qt<ft.length;qt++){if(this.pdf.internal.getFont(ft[qt],dt,{noFallback:!0,disableWarning:!0})!==void 0){Tt=ft[qt];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(ft[qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Tt=ft[qt],dt="bold";else if(this.pdf.internal.getFont(ft[qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Tt=ft[qt],dt="normal";break}}if(Tt===""){for(var xe=0;xe<ft.length;xe++)if(At[ft[xe]]){Tt=At[ft[xe]];break}}Tt=Tt===""?"Times":Tt,this.pdf.setFont(Tt,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,V){if(isNaN(M)||isNaN(V))throw An.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(M,V)},h.prototype.closePath=function(){var M=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&$a(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){M=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,V){if(isNaN(M)||isNaN(V))throw An.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,V,W,ee){if(isNaN(W)||isNaN(ee)||isNaN(M)||isNaN(V))throw An.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(W,ee)),ne=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.bezierCurveTo=function(M,V,W,ee,re,ne){if(isNaN(re)||isNaN(ne)||isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw An.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(re,ne)),ae=this.ctx.transform.applyToPoint(new o(M,V)),Z=this.ctx.transform.applyToPoint(new o(W,ee));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:Z.x,y2:Z.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},h.prototype.arc=function(M,V,W,ee,re,ne){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee)||isNaN(re))throw An.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(M,V));M=ce.x,V=ce.y;var ae=this.ctx.transform.applyToPoint(new o(0,W)),Z=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(ae.x-Z.x,2)+Math.pow(ae.y-Z.y,2))}Math.abs(re-ee)>=2*Math.PI&&(ee=0,re=2*Math.PI),this.path.push({type:"arc",x:M,y:V,radius:W,startAngle:ee,endAngle:re,counterclockwise:ne})},h.prototype.arcTo=function(M,V,W,ee,re){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw An.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,V),this.lineTo(M+W,V),this.lineTo(M+W,V+ee),this.lineTo(M,V+ee),this.lineTo(M,V),this.lineTo(M+W,V),this.lineTo(M,V)},h.prototype.fillRect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw An.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,V,W,ee),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},h.prototype.strokeRect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw An.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(M,V,W,ee),this.stroke())},h.prototype.clearRect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw An.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,V,W,ee))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(V),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(M){var V,W,ee,re;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))V=0,W=0,ee=0,re=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ne!==null)V=parseInt(ne[1]),W=parseInt(ne[2]),ee=parseInt(ne[3]),re=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)V=parseInt(ne[1]),W=parseInt(ne[2]),ee=parseInt(ne[3]),re=parseFloat(ne[4]);else{if(re=1,typeof M=="string"&&M.charAt(0)!=="#"){var ce=new EQ(M);M=ce.ok?ce.toHex():"#000000"}M.length===4?(V=M.substring(1,2),V+=V,W=M.substring(2,3),W+=W,ee=M.substring(3,4),ee+=ee):(V=M.substring(1,3),W=M.substring(3,5),ee=M.substring(5,7)),V=parseInt(V,16),W=parseInt(W,16),ee=parseInt(ee,16)}}return{r:V,g:W,b:ee,a:re,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,V,W,ee){if(isNaN(V)||isNaN(W)||typeof M!="string")throw An.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var re=F(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:M,x:V,y:W,scale:ne,angle:re,align:this.textAlign,maxWidth:ee})}},h.prototype.strokeText=function(M,V,W,ee){if(isNaN(V)||isNaN(W)||typeof M!="string")throw An.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ee=isNaN(ee)?void 0:ee;var re=F(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:M,x:V,y:W,scale:ne,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:ee})}},h.prototype.measureText=function(M){if(typeof M!="string")throw An.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,W=this.pdf.internal.scaleFactor,ee=V.internal.getFontSize(),re=V.getStringUnitWidth(M)*ee/V.internal.scaleFactor,ne=function(ce){var ae=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new ne({width:re*=Math.round(96*W/72*1e4)/1e4})},h.prototype.scale=function(M,V){if(isNaN(M)||isNaN(V))throw An.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(M,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.rotate=function(M){if(isNaN(M))throw An.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},h.prototype.translate=function(M,V){if(isNaN(M)||isNaN(V))throw An.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,M,V);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.transform=function(M,V,W,ee,re,ne){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee)||isNaN(re)||isNaN(ne))throw An.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new c(M,V,W,ee,re,ne);this.ctx.transform=this.ctx.transform.multiply(ce)},h.prototype.setTransform=function(M,V,W,ee,re,ne){M=isNaN(M)?1:M,V=isNaN(V)?0:V,W=isNaN(W)?0:W,ee=isNaN(ee)?1:ee,re=isNaN(re)?0:re,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(M,V,W,ee,re,ne)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,V,W,ee,re,ne,ce,ae,Z){var de=this.pdf.getImageProperties(M),z=1,se=1,Ne=1,ue=1;ee!==void 0&&ae!==void 0&&(Ne=ae/ee,ue=Z/re,z=de.width/ee*ae/ee,se=de.height/re*Z/re),ne===void 0&&(ne=V,ce=W,V=0,W=0),ee!==void 0&&ae===void 0&&(ae=ee,Z=re),ee===void 0&&ae===void 0&&(ae=de.width,Z=de.height);for(var oe,ye=this.ctx.transform.decompose(),je=F(ye.rotate.shx),Me=new c,He=(Me=(Me=(Me=Me.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new l(ne-V*Ne,ce-W*ue,ee*z,re*se)),et=b.call(this,He),ft=[],Be=0;Be<et.length;Be+=1)ft.indexOf(et[Be])===-1&&ft.push(et[Be]);if(w(ft),this.autoPaging)for(var dt=ft[0],Tt=ft[ft.length-1],At=dt;At<Tt+1;At++){this.pdf.setPage(At);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xe=At===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=At===1?0:he+(At-2)*ve;if(this.ctx.clip_path.length!==0){var De=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(oe,this.posX+this.margin[3],-pe+xe+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=De}var Ke=JSON.parse(JSON.stringify(He));Ke=S([Ke],this.posX+this.margin[3],-pe+xe+this.ctx.prevPageLastElemOffset)[0];var Nt=(At>dt||At<Tt)&&g.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,ve,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,je),Nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",He.x,He.y,He.w,He.h,null,null,je)};var b=function(M,V,W){var ee=[];V=V||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ee.push(Math.floor((M.y+re)/W)+1);break;case"arc":ee.push(Math.floor((M.y+re-M.radius)/W)+1),ee.push(Math.floor((M.y+re+M.radius)/W)+1);break;case"qct":var ne=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ee.push(Math.floor((ne.y+re)/W)+1),ee.push(Math.floor((ne.y+ne.h+re)/W)+1);break;case"bct":var ce=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ee.push(Math.floor((ce.y+re)/W)+1),ee.push(Math.floor((ce.y+ce.h+re)/W)+1);break;case"rect":ee.push(Math.floor((M.y+re)/W)+1),ee.push(Math.floor((M.y+M.h+re)/W)+1)}for(var ae=0;ae<ee.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<ee[ae];)y.call(this);return ee},y=function(){var M=this.fillStyle,V=this.strokeStyle,W=this.font,ee=this.lineCap,re=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=V,this.font=W,this.lineCap=ee,this.lineWidth=re,this.lineJoin=ne},S=function(M,V,W){for(var ee=0;ee<M.length;ee++)switch(M[ee].type){case"bct":M[ee].x2+=V,M[ee].y2+=W;case"qct":M[ee].x1+=V,M[ee].y1+=W;case"mt":case"lt":case"arc":default:M[ee].x+=V,M[ee].y+=W}return M},w=function(M){return M.sort(function(V,W){return V-W})},k=function(M,V){for(var W,ee,re=this.fillStyle,ne=this.strokeStyle,ce=this.lineCap,ae=this.lineWidth,Z=Math.abs(ae*this.ctx.transform.scaleX),de=this.lineJoin,z=JSON.parse(JSON.stringify(this.path)),se=JSON.parse(JSON.stringify(this.path)),Ne=[],ue=0;ue<se.length;ue++)if(se[ue].x!==void 0)for(var oe=b.call(this,se[ue]),ye=0;ye<oe.length;ye+=1)Ne.indexOf(oe[ye])===-1&&Ne.push(oe[ye]);for(var je=0;je<Ne.length;je++)for(;this.pdf.internal.getNumberOfPages()<Ne[je];)y.call(this);if(w(Ne),this.autoPaging)for(var Me=Ne[0],He=Ne[Ne.length-1],et=Me;et<He+1;et++){this.pdf.setPage(et),this.fillStyle=re,this.strokeStyle=ne,this.lineCap=ce,this.lineWidth=Z,this.lineJoin=de;var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=et===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=et===1?0:dt+(et-2)*Tt;if(this.ctx.clip_path.length!==0){var qt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(W,this.posX+this.margin[3],-At+Be+this.ctx.prevPageLastElemOffset),C.call(this,M,!0),this.path=qt}if(ee=JSON.parse(JSON.stringify(z)),this.path=S(ee,this.posX+this.margin[3],-At+Be+this.ctx.prevPageLastElemOffset),V===!1||et===0){var xe=(et>Me||et<He)&&g.call(this);xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Tt,null).clip().discardPath()),C.call(this,M,V),xe&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=Z,C.call(this,M,V),this.lineWidth=ae;this.path=z},C=function(M,V){if((M!=="stroke"||V||!x.call(this))&&(M==="stroke"||V||!p.call(this))){for(var W,ee,re=[],ne=this.path,ce=0;ce<ne.length;ce++){var ae=ne[ce];switch(ae.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:ae,deltas:[],abs:[]});break;case"lt":var Z=re.length;if(ne[ce-1]&&!isNaN(ne[ce-1].x)&&(W=[ae.x-ne[ce-1].x,ae.y-ne[ce-1].y],Z>0)){for(;Z>=0;Z--)if(re[Z-1].close!==!0&&re[Z-1].begin!==!0){re[Z-1].deltas.push(W),re[Z-1].abs.push(ae);break}}break;case"bct":W=[ae.x1-ne[ce-1].x,ae.y1-ne[ce-1].y,ae.x2-ne[ce-1].x,ae.y2-ne[ce-1].y,ae.x-ne[ce-1].x,ae.y-ne[ce-1].y],re[re.length-1].deltas.push(W);break;case"qct":var de=ne[ce-1].x+2/3*(ae.x1-ne[ce-1].x),z=ne[ce-1].y+2/3*(ae.y1-ne[ce-1].y),se=ae.x+2/3*(ae.x1-ae.x),Ne=ae.y+2/3*(ae.y1-ae.y),ue=ae.x,oe=ae.y;W=[de-ne[ce-1].x,z-ne[ce-1].y,se-ne[ce-1].x,Ne-ne[ce-1].y,ue-ne[ce-1].x,oe-ne[ce-1].y],re[re.length-1].deltas.push(W);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(ae)}}ee=V?null:M==="stroke"?"stroke":"fill";for(var ye=!1,je=0;je<re.length;je++)if(re[je].arc)for(var Me=re[je].abs,He=0;He<Me.length;He++){var et=Me[He];et.type==="arc"?A.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,V,!ye):Y.call(this,et.x,et.y),ye=!0}else if(re[je].close===!0)this.pdf.internal.out("h"),ye=!1;else if(re[je].begin!==!0){var ft=re[je].start.x,Be=re[je].start.y;q.call(this,re[je].deltas,ft,Be),ye=!0}ee&&I.call(this,ee),V&&L.call(this)}},D=function(M){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-W;case"top":return M+V-W;case"hanging":return M+V-2*W;case"middle":return M+V/2-W;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(V,W){this.colorStops.push([V,W])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(M,V,W,ee,re,ne,ce,ae,Z){for(var de=U.call(this,W,ee,re,ne),z=0;z<de.length;z++){var se=de[z];z===0&&(Z?P.call(this,se.x1+M,se.y1+V):Y.call(this,se.x1+M,se.y1+V)),K.call(this,M,V,se.x2,se.y2,se.x3,se.y3,se.x4,se.y4)}ae?L.call(this):I.call(this,ce)},I=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(M,V){this.pdf.internal.out(r(M)+" "+a(V)+" m")},O=function(M){var V;switch(M.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var W=this.pdf.getTextDimensions(M.text),ee=D.call(this,M.y),re=E.call(this,ee)-W.h,ne=this.ctx.transform.applyToPoint(new o(M.x,ee)),ce=this.ctx.transform.decompose(),ae=new c;ae=(ae=(ae=ae.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var Z,de,z,se=this.ctx.transform.applyToRectangle(new l(M.x,ee,W.w,W.h)),Ne=ae.applyToRectangle(new l(M.x,re,W.w,W.h)),ue=b.call(this,Ne),oe=[],ye=0;ye<ue.length;ye+=1)oe.indexOf(ue[ye])===-1&&oe.push(ue[ye]);if(w(oe),this.autoPaging)for(var je=oe[0],Me=oe[oe.length-1],He=je;He<Me+1;He++){this.pdf.setPage(He);var et=He===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],dt=Be-this.margin[0],Tt=this.pdf.internal.pageSize.width-this.margin[1],At=Tt-this.margin[3],qt=He===1?0:ft+(He-2)*dt;if(this.ctx.clip_path.length!==0){var xe=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-1*qt+et),C.call(this,"fill",!0),this.path=xe}var he=S([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-qt+et+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),z=this.lineWidth,this.lineWidth=z*M.scale);var ve=this.autoPaging!=="text";if(ve||he.y+he.h<=Be){if(ve||he.y>=et&&he.x<=Tt){var pe=ve?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Tt-he.x)[0],De=S([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-qt+et+this.ctx.prevPageLastElemOffset)[0],Ke=ve&&(He>je||He<Me)&&g.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,dt,null).clip().discardPath()),this.pdf.text(pe,De.x,De.y,{angle:M.angle,align:V,renderingMode:M.renderingMode}),Ke&&this.pdf.restoreGraphicsState()}}else he.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-he.y);M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=z)}else M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),z=this.lineWidth,this.lineWidth=z*M.scale),this.pdf.text(M.text,ne.x+this.posX,ne.y+this.posY,{angle:M.angle,align:V,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=z)},Y=function(M,V,W,ee){W=W||0,ee=ee||0,this.pdf.internal.out(r(M+W)+" "+a(V+ee)+" l")},q=function(M,V,W){return this.pdf.lines(M,V,W,null,null)},K=function(M,V,W,ee,re,ne,ce,ae){this.pdf.internal.out([t(s(W+M)),t(i(ee+V)),t(s(re+M)),t(i(ne+V)),t(s(ce+M)),t(i(ae+V)),"c"].join(" "))},U=function(M,V,W,ee){for(var re=2*Math.PI,ne=Math.PI/2;V>W;)V-=re;var ce=Math.abs(W-V);ce<re&&ee&&(ce=re-ce);for(var ae=[],Z=ee?-1:1,de=V;ce>1e-5;){var z=de+Z*Math.min(ce,ne);ae.push(J.call(this,M,de,z)),ce-=Math.abs(z-de),de=z}return ae},J=function(M,V,W){var ee=(W-V)/2,re=M*Math.cos(ee),ne=M*Math.sin(ee),ce=re,ae=-ne,Z=ce*ce+ae*ae,de=Z+ce*re+ae*ne,z=4/3*(Math.sqrt(2*Z*de)-de)/(ce*ne-ae*re),se=ce-z*ae,Ne=ae+z*ce,ue=se,oe=-Ne,ye=ee+V,je=Math.cos(ye),Me=Math.sin(ye);return{x1:M*Math.cos(V),y1:M*Math.sin(V),x2:se*je-Ne*Me,y2:se*Me+Ne*je,x3:ue*je-oe*Me,y3:ue*Me+oe*je,x4:M*Math.cos(W),y4:M*Math.sin(W)}},F=function(M){return 180*M/Math.PI},X=function(M,V,W,ee,re,ne){var ce=M+.5*(W-M),ae=V+.5*(ee-V),Z=re+.5*(W-re),de=ne+.5*(ee-ne),z=Math.min(M,re,ce,Z),se=Math.max(M,re,ce,Z),Ne=Math.min(V,ne,ae,de),ue=Math.max(V,ne,ae,de);return new l(z,Ne,se-z,ue-Ne)},Q=function(M,V,W,ee,re,ne,ce,ae){var Z,de,z,se,Ne,ue,oe,ye,je,Me,He,et,ft,Be,dt=W-M,Tt=ee-V,At=re-W,qt=ne-ee,xe=ce-re,he=ae-ne;for(de=0;de<41;de++)je=(oe=(z=M+(Z=de/40)*dt)+Z*((Ne=W+Z*At)-z))+Z*(Ne+Z*(re+Z*xe-Ne)-oe),Me=(ye=(se=V+Z*Tt)+Z*((ue=ee+Z*qt)-se))+Z*(ue+Z*(ne+Z*he-ue)-ye),de==0?(He=je,et=Me,ft=je,Be=Me):(He=Math.min(He,je),et=Math.min(et,Me),ft=Math.max(ft,je),Be=Math.max(Be,Me));return new l(Math.round(He),Math.round(et),Math.round(ft-He),Math.round(Be-et))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,V,W=(M=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:V}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(ta.API),function(e){var t=function(i){var o,l,c,d,u,h,f,p,x,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(x=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,l.push(h+33,f+33,p+33,x+33,g+33)):l.push(122);return function(b,y){for(var S=y;S>0;S--)b.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,f="length",p=255,x="charCodeAt",g="slice",b="replace";for(i[g](-2),i=i[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[f]%5||5))[f];u>d;d+=5)l=52200625*(i[x](d)-33)+614125*(i[x](d+1)-33)+7225*(i[x](d+2)-33)+85*(i[x](d+3)-33)+(i[x](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(y,S){for(var w=S;w>0;w--)y.pop()}(c,o[f]),h.fromCharCode.apply(h,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=X3(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(ta.API),function(e){e.loadFile=function(t,r,a){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,p=function(x){var g=x.length,b=[],y=String.fromCharCode;for(f=0;f<g;f+=1)b.push(y(255&x.charCodeAt(f)));return b.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(s,i,o)}catch{}return l}(t,r,a)},e.loadImageFile=e.loadFile}(ta.API),function(e){function t(){return(na.html2canvas?Promise.resolve(na.html2canvas):H3(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(na.DOMPurify?Promise.resolve(na.DOMPurify):H3(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=$a(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],x=p.src.find(function(g){return g.format==="truetype"});x&&c.addFont(x.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||ta.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,ta.getPageSize=function(o,l,c){if($a(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,x=0,g=0;if(f.hasOwnProperty(h))x=f[h][1]/u,g=f[h][0]/u;else try{x=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>x&&(p=g,g=x,x=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>g&&(p=g,g=x,x=p)}return{width:g,height:x,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(rA):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(ta.API),ta.API.addJS=function(e){return rU=e,this.internal.events.subscribe("postPutResources",function(){VN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(VN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tU=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rU+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){VN!==void 0&&tU!==void 0&&this.internal.out("/Names <</JavaScript "+VN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var f=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])}(ta.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var f,p=256*h.charCodeAt(4)+h.charCodeAt(5),x=h.length,g={width:0,height:0,numcomponents:1},b=4;b<x;b+=2){if(b+=p,t.indexOf(h.charCodeAt(b+1))!==-1){f=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:f,numcomponents:h.charCodeAt(b+9)};break}p=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return u}}(ta.API);var e0,qN,aU,nU,sU,uUe=function(){var e,t,r;function a(i){var o,l,c,d,u,h,f,p,x,g,b,y,S,w;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),x=(function(){var k,C;for(C=[],k=0;k<4;++k)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),i=h?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(S=0;0<=g?S<g:S>g;0<=g?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(b=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,b.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,f,p,x){var g,b,y,S,w,k,C,D,E,A,I,L,P,O,Y,q,K,U,J,F,X,Q=Math.ceil((d.width-h)/p),ie=Math.ceil((d.height-f)/x),M=d.width==Q&&d.height==ie;for(O=o*Q,L=M?l:new Uint8Array(O*ie),k=i.length,P=0,b=0;P<ie&&c<k;){switch(i[c++]){case 0:for(S=K=0;K<O;S=K+=1)L[b++]=i[c++];break;case 1:for(S=U=0;U<O;S=U+=1)g=i[c++],w=S<o?0:L[b-o],L[b++]=(g+w)%256;break;case 2:for(S=J=0;J<O;S=J+=1)g=i[c++],y=(S-S%o)/o,Y=P&&L[(P-1)*O+y*o+S%o],L[b++]=(Y+g)%256;break;case 3:for(S=F=0;F<O;S=F+=1)g=i[c++],y=(S-S%o)/o,w=S<o?0:L[b-o],Y=P&&L[(P-1)*O+y*o+S%o],L[b++]=(g+Math.floor((w+Y)/2))%256;break;case 4:for(S=X=0;X<O;S=X+=1)g=i[c++],y=(S-S%o)/o,w=S<o?0:L[b-o],P===0?Y=q=0:(Y=L[(P-1)*O+y*o+S%o],q=y&&L[(P-1)*O+(y-1)*o+S%o]),C=w+Y-q,D=Math.abs(C-w),A=Math.abs(C-Y),I=Math.abs(C-q),E=D<=A&&D<=I?w:A<=I?Y:q,L[b++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var V=((f+P*x)*d.width+h)*o,W=P*O;for(S=0;S<Q;S+=1){for(var ee=0;ee<o;ee+=1)l[V++]=L[W++];V+=(p-1)*o}}P++}}return i=q9e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,h,f,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,f=l.length;h<f;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,h,f,p,x,g,b,y;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),x=(d=i.data||i).length,h=g||o,u=f=0,c===1)for(;u<x;)p=g?4*o[u/4]:f,b=h[p++],d[u++]=b,d[u++]=b,d[u++]=b,d[u++]=l?h[p++]:255,f=p;else for(;u<x;)p=g?4*o[u/4]:f,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,f=p},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(na)==="[object Window]"){try{t=na.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,h,f,p;if(this.animation){for(p=[],l=u=0,h=(f=this.animation.frames).length;u<h;l=++u)o=f[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,h,f=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,x;if(p=l++%d,x=c[p],f.renderFrame(i,p),d>1&&l/d<u)return f.animation._timeout=setTimeout(o,x.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hUe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,f=null,p=0,x=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,x=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],(1&g)==0&&(f=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,k=e[t++],C=k>>6&1,D=1<<(7&k)+1,E=l,A=c,I=!1;k>>7&&(I=!0,E=t,A=D,t+=3*D);var L=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:b,y,width:S,height:w,has_local_palette:I,palette_offset:E,palette_size:A,data_offset:L,data_length:t-L,transparent_index:f,interlaced:!!C,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return x},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,Y){var q=this.frameInfo(O),K=q.width*q.height,U=new Uint8Array(K);iU(e,q.data_offset,U,K);var J=q.palette_offset,F=q.transparent_index;F===null&&(F=256);var X=q.width,Q=r-X,ie=X,M=4*(q.y*r+q.x),V=4*((q.y+q.height)*r+q.x),W=M,ee=4*Q;q.interlaced===!0&&(ee+=4*r*7);for(var re=8,ne=0,ce=U.length;ne<ce;++ne){var ae=U[ne];if(ie===0&&(ie=X,(W+=ee)>=V&&(ee=4*Q+4*r*(re-1),W=M+(X+Q)*(re<<1),re>>=1)),ae===F)W+=4;else{var Z=e[J+3*ae],de=e[J+3*ae+1],z=e[J+3*ae+2];Y[W++]=z,Y[W++]=de,Y[W++]=Z,Y[W++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(O,Y){var q=this.frameInfo(O),K=q.width*q.height,U=new Uint8Array(K);iU(e,q.data_offset,U,K);var J=q.palette_offset,F=q.transparent_index;F===null&&(F=256);var X=q.width,Q=r-X,ie=X,M=4*(q.y*r+q.x),V=4*((q.y+q.height)*r+q.x),W=M,ee=4*Q;q.interlaced===!0&&(ee+=4*r*7);for(var re=8,ne=0,ce=U.length;ne<ce;++ne){var ae=U[ne];if(ie===0&&(ie=X,(W+=ee)>=V&&(ee=4*Q+4*r*(re-1),W=M+(X+Q)*(re<<1),re>>=1)),ae===F)W+=4;else{var Z=e[J+3*ae],de=e[J+3*ae+1],z=e[J+3*ae+2];Y[W++]=Z,Y[W++]=de,Y[W++]=z,Y[W++]=255}--ie}}}function iU(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,h=0,f=0,p=e[t++],x=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var b=h&d;if(h>>=c,u-=c,b!==i){if(b===o)break;for(var y=b<l?b:g,S=0,w=y;w>i;)w=x[w]>>8,++S;var k=w;if(f+S+(y!==b?1:0)>a)return void An.log("Warning, gif stream longer than expected.");r[f++]=k;var C=f+=S;for(y!==b&&(r[f++]=k),w=y;S--;)w=x[w],r[--C]=255&w,w>>=8;g!==null&&l<4096&&(x[l++]=g<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=b}else l=o+1,d=(1<<(c=s+1))-1,g=null}return f!==a&&An.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function HD(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),x=new Array(64),g=[],b=0,y=7,S=new Array(64),w=new Array(64),k=new Array(64),C=new Array(256),D=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(M,V){for(var W=0,ee=0,re=new Array,ne=1;ne<=16;ne++){for(var ce=1;ce<=M[ne];ce++)re[V[ee]]=[],re[V[ee]][0]=W,re[V[ee]][1]=ne,ee++,W++;W*=2}return re}function J(M){for(var V=M[0],W=M[1]-1;W>=0;)V&1<<W&&(b|=1<<y),W--,--y<0&&(b==255?(F(255),F(0)):F(b),y=7,b=0)}function F(M){g.push(M)}function X(M){F(M>>8&255),F(255&M)}function Q(M,V,W,ee,re){for(var ne,ce=re[0],ae=re[240],Z=function(Me,He){var et,ft,Be,dt,Tt,At,qt,xe,he,ve,pe=0;for(he=0;he<8;++he){et=Me[pe],ft=Me[pe+1],Be=Me[pe+2],dt=Me[pe+3],Tt=Me[pe+4],At=Me[pe+5],qt=Me[pe+6];var De=et+(xe=Me[pe+7]),Ke=et-xe,Nt=ft+qt,Je=ft-qt,Qe=Be+At,Ue=Be-At,qe=dt+Tt,mt=dt-Tt,Ie=De+qe,Xe=De-qe,Ye=Nt+Qe,lt=Nt-Qe;Me[pe]=Ie+Ye,Me[pe+4]=Ie-Ye;var Mt=.707106781*(lt+Xe);Me[pe+2]=Xe+Mt,Me[pe+6]=Xe-Mt;var Ae=.382683433*((Ie=mt+Ue)-(lt=Je+Ke)),ke=.5411961*Ie+Ae,ot=1.306562965*lt+Ae,bt=.707106781*(Ye=Ue+Je),Xt=Ke+bt,Ft=Ke-bt;Me[pe+5]=Ft+ke,Me[pe+3]=Ft-ke,Me[pe+1]=Xt+ot,Me[pe+7]=Xt-ot,pe+=8}for(pe=0,he=0;he<8;++he){et=Me[pe],ft=Me[pe+8],Be=Me[pe+16],dt=Me[pe+24],Tt=Me[pe+32],At=Me[pe+40],qt=Me[pe+48];var rr=et+(xe=Me[pe+56]),pr=et-xe,jr=ft+qt,vt=ft-qt,Lt=Be+At,fe=Be-At,Re=dt+Tt,Te=dt-Tt,_e=rr+Re,Le=rr-Re,Ve=jr+Lt,pt=jr-Lt;Me[pe]=_e+Ve,Me[pe+32]=_e-Ve;var wt=.707106781*(pt+Le);Me[pe+16]=Le+wt,Me[pe+48]=Le-wt;var st=.382683433*((_e=Te+fe)-(pt=vt+pr)),St=.5411961*_e+st,Ct=1.306562965*pt+st,Jt=.707106781*(Ve=fe+vt),ir=pr+Jt,xr=pr-Jt;Me[pe+40]=xr+St,Me[pe+24]=xr-St,Me[pe+8]=ir+Ct,Me[pe+56]=ir-Ct,pe++}for(he=0;he<64;++he)ve=Me[he]*He[he],p[he]=ve>0?ve+.5|0:ve-.5|0;return p}(M,V),de=0;de<64;++de)x[E[de]]=Z[de];var z=x[0]-W;W=x[0],z==0?J(ee[0]):(J(ee[f[ne=32767+z]]),J(h[ne]));for(var se=63;se>0&&x[se]==0;)se--;if(se==0)return J(ce),W;for(var Ne,ue=1;ue<=se;){for(var oe=ue;x[ue]==0&&ue<=se;)++ue;var ye=ue-oe;if(ye>=16){Ne=ye>>4;for(var je=1;je<=Ne;++je)J(ae);ye&=15}ne=32767+x[ue],J(re[(ye<<4)+f[ne]]),J(h[ne]),ue++}return se!=63&&J(ce),W}function ie(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(V){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var re=o((W[ee]*V+50)/100);re=Math.min(Math.max(re,1),255),l[E[ee]]=re}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var ae=o((ne[ce]*V+50)/100);ae=Math.min(Math.max(ae,1),255),c[E[ce]]=ae}for(var Z=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,z=0;z<8;z++)for(var se=0;se<8;se++)d[de]=1/(l[E[de]]*Z[z]*Z[se]*8),u[de]=1/(c[E[de]]*Z[z]*Z[se]*8),de++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,V){V&&ie(V),g=new Array,b=0,y=7,X(65496),X(65504),X(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),X(1),X(1),F(0),F(0),function(){X(65499),X(132),F(0);for(var ft=0;ft<64;ft++)F(l[ft]);F(1);for(var Be=0;Be<64;Be++)F(c[Be])}(),function(ft,Be){X(65472),X(17),F(8),X(Be),X(ft),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(M.width,M.height),function(){X(65476),X(418),F(0);for(var ft=0;ft<16;ft++)F(A[ft+1]);for(var Be=0;Be<=11;Be++)F(I[Be]);F(16);for(var dt=0;dt<16;dt++)F(L[dt+1]);for(var Tt=0;Tt<=161;Tt++)F(P[Tt]);F(1);for(var At=0;At<16;At++)F(O[At+1]);for(var qt=0;qt<=11;qt++)F(Y[qt]);F(17);for(var xe=0;xe<16;xe++)F(q[xe+1]);for(var he=0;he<=161;he++)F(K[he])}(),X(65498),X(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var W=0,ee=0,re=0;b=0,y=7,this.encode.displayName="_encode_";for(var ne,ce,ae,Z,de,z,se,Ne,ue,oe=M.data,ye=M.width,je=M.height,Me=4*ye,He=0;He<je;){for(ne=0;ne<Me;){for(de=Me*He+ne,se=-1,Ne=0,ue=0;ue<64;ue++)z=de+(Ne=ue>>3)*Me+(se=4*(7&ue)),He+Ne>=je&&(z-=Me*(He+1+Ne-je)),ne+se>=Me&&(z-=ne+se-Me+4),ce=oe[z++],ae=oe[z++],Z=oe[z++],S[ue]=(D[ce]+D[ae+256>>0]+D[Z+512>>0]>>16)-128,w[ue]=(D[ce+768>>0]+D[ae+1024>>0]+D[Z+1280>>0]>>16)-128,k[ue]=(D[ce+1280>>0]+D[ae+1536>>0]+D[Z+1792>>0]>>16)-128;W=Q(S,d,W,t,a),ee=Q(w,u,ee,r,s),re=Q(k,u,re,r,s),ne+=32}He+=8}if(y>=0){var et=[];et[1]=y+1,et[0]=(1<<y+1)-1,J(et)}return X(65497),new Uint8Array(g)},e=e||50,function(){for(var M=String.fromCharCode,V=0;V<256;V++)C[V]=M(V)}(),t=U(A,I),r=U(O,Y),a=U(L,P),s=U(q,K),function(){for(var M=1,V=2,W=1;W<=15;W++){for(var ee=M;ee<V;ee++)f[32767+ee]=W,h[32767+ee]=[],h[32767+ee][1]=W,h[32767+ee][0]=ee;for(var re=-(V-1);re<=-M;re++)f[32767+re]=W,h[32767+re]=[],h[32767+re][1]=W,h[32767+re][0]=V-1+re;M<<=1,V<<=1}}(),function(){for(var M=0;M<256;M++)D[M]=19595*M,D[M+256>>0]=38470*M,D[M+512>>0]=7471*M+32768,D[M+768>>0]=-11059*M,D[M+1024>>0]=-21709*M,D[M+1280>>0]=32768*M+8421375,D[M+1536>>0]=-27439*M,D[M+1792>>0]=-5329*M}(),ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ed(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function oU(e){function t(A){if(!A)throw Error("assert :P")}function r(A,I,L){for(var P=0;4>P;P++)if(A[I+P]!=L.charCodeAt(P))return!0;return!1}function a(A,I,L,P,O){for(var Y=0;Y<O;Y++)A[I+Y]=L[P+Y]}function s(A,I,L,P){for(var O=0;O<P;O++)A[I+O]=L}function i(A){return new Int32Array(A)}function o(A,I){for(var L=[],P=0;P<A;P++)L.push(new I);return L}function l(A,I){var L=[];return function P(O,Y,q){for(var K=q[Y],U=0;U<K&&(O.push(q.length>Y+1?[]:new I),!(q.length<Y+1));U++)P(O[U],Y+1,q)}(L,0,A),L}var c=function(){var A=this;function I(T,B){for(var te=1<<B-1>>>0;T&te;)te>>>=1;return te?(T&te-1)+te:T}function L(T,B,te,le,ge){t(!(le%te));do T[B+(le-=te)]=ge;while(0<le)}function P(T,B,te,le,ge){if(t(2328>=ge),512>=ge)var we=i(512);else if((we=i(ge))==null)return 0;return function(Se,Ce,Pe,$e,nt,Et){var kt,xt,Zt=Ce,Rt=1<<Pe,it=i(16),ut=i(16);for(t(nt!=0),t($e!=null),t(Se!=null),t(0<Pe),xt=0;xt<nt;++xt){if(15<$e[xt])return 0;++it[$e[xt]]}if(it[0]==nt)return 0;for(ut[1]=0,kt=1;15>kt;++kt){if(it[kt]>1<<kt)return 0;ut[kt+1]=ut[kt]+it[kt]}for(xt=0;xt<nt;++xt)kt=$e[xt],0<$e[xt]&&(Et[ut[kt]++]=xt);if(ut[15]==1)return($e=new O).g=0,$e.value=Et[0],L(Se,Zt,1,Rt,$e),Rt;var Wt,er=-1,Kt=Rt-1,Sr=0,br=1,zr=1,yr=1<<Pe;for(xt=0,kt=1,nt=2;kt<=Pe;++kt,nt<<=1){if(br+=zr<<=1,0>(zr-=it[kt]))return 0;for(;0<it[kt];--it[kt])($e=new O).g=kt,$e.value=Et[xt++],L(Se,Zt+Sr,nt,yr,$e),Sr=I(Sr,kt)}for(kt=Pe+1,nt=2;15>=kt;++kt,nt<<=1){if(br+=zr<<=1,0>(zr-=it[kt]))return 0;for(;0<it[kt];--it[kt]){if($e=new O,(Sr&Kt)!=er){for(Zt+=yr,Wt=1<<(er=kt)-Pe;15>er&&!(0>=(Wt-=it[er]));)++er,Wt<<=1;Rt+=yr=1<<(Wt=er-Pe),Se[Ce+(er=Sr&Kt)].g=Wt+Pe,Se[Ce+er].value=Zt-Ce-er}$e.g=kt-Pe,$e.value=Et[xt++],L(Se,Zt+(Sr>>Pe),nt,yr,$e),Sr=I(Sr,kt)}}return br!=2*ut[15]-1?0:Rt}(T,B,te,le,ge,we)}function O(){this.value=this.g=0}function Y(){this.value=this.g=0}function q(){this.G=o(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ps,Y)}function K(T,B,te,le){t(T!=null),t(B!=null),t(2147483648>le),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=B,T.pa=te,T.Jd=B,T.Yc=te+le,T.Zc=4<=le?te+le-4+1:te,ne(T)}function U(T,B){for(var te=0;0<B--;)te|=ae(T,128)<<B;return te}function J(T,B){var te=U(T,B);return ce(T)?-te:te}function F(T,B,te,le){var ge,we=0;for(t(T!=null),t(B!=null),t(4294967288>le),T.Sb=le,T.Ra=0,T.u=0,T.h=0,4<le&&(le=4),ge=0;ge<le;++ge)we+=B[te+ge]<<8*ge;T.Ra=we,T.bb=le,T.oa=B,T.pa=te}function X(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<gh-8>>>0,++T.bb,T.u-=8;W(T)&&(T.h=1,T.u=0)}function Q(T,B){if(t(0<=B),!T.h&&B<=vh){var te=V(T)&eu[B];return T.u+=B,X(T),te}return T.h=1,T.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(T){return T.Ra>>>(T.u&gh-1)>>>0}function W(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>gh}function ee(T,B){T.u=B,T.h=W(T)}function re(T){T.u>=zf&&(t(T.u>=zf),X(T))}function ne(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function ce(T){return U(T,1)}function ae(T,B){var te=T.Ca;0>T.b&&ne(T);var le=T.b,ge=te*B>>>8,we=(T.I>>>le>ge)+0;for(we?(te-=ge,T.I-=ge+1<<le>>>0):te=ge+1,le=te,ge=0;256<=le;)ge+=8,le>>=8;return le=7^ge+oo[le],T.b-=le,T.Ca=(te<<le)-1,we}function Z(T,B,te){T[B+0]=te>>24&255,T[B+1]=te>>16&255,T[B+2]=te>>8&255,T[B+3]=te>>0&255}function de(T,B){return T[B+0]<<0|T[B+1]<<8}function z(T,B){return de(T,B)|T[B+2]<<16}function se(T,B){return de(T,B)|de(T,B+2)<<16}function Ne(T,B){var te=1<<B;return t(T!=null),t(0<B),T.X=i(te),T.X==null?0:(T.Mb=32-B,T.Xa=B,1)}function ue(T,B){t(T!=null),t(B!=null),t(T.Xa==B.Xa),a(B.X,0,T.X,0,1<<B.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function ye(T,B,te,le){t(te!=null),t(le!=null);var ge=te[0],we=le[0];return ge==0&&(ge=(T*we+B/2)/B),we==0&&(we=(B*ge+T/2)/T),0>=ge||0>=we?0:(te[0]=ge,le[0]=we,1)}function je(T,B){return T+(1<<B)-1>>>B}function Me(T,B){return((4278255360&T)+(4278255360&B)>>>0&4278255360)+((16711935&T)+(16711935&B)>>>0&16711935)>>>0}function He(T,B){A[B]=function(te,le,ge,we,Se,Ce,Pe){var $e;for($e=0;$e<Se;++$e){var nt=A[T](Ce[Pe+$e-1],ge,we+$e);Ce[Pe+$e]=Me(te[le+$e],nt)}}}function et(){this.ud=this.hd=this.jd=0}function ft(T,B){return((4278124286&(T^B))>>>1)+(T&B)>>>0}function Be(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function dt(T,B){return Be(T+(T-B+.5>>1))}function Tt(T,B,te){return Math.abs(B-te)-Math.abs(T-te)}function At(T,B,te,le,ge,we,Se){for(le=we[Se-1],te=0;te<ge;++te)we[Se+te]=le=Me(T[B+te],le)}function qt(T,B,te,le,ge){var we;for(we=0;we<te;++we){var Se=T[B+we],Ce=Se>>8&255,Pe=16711935&(Pe=(Pe=16711935&Se)+((Ce<<16)+Ce));le[ge+we]=(4278255360&Se)+Pe>>>0}}function xe(T,B){B.jd=T>>0&255,B.hd=T>>8&255,B.ud=T>>16&255}function he(T,B,te,le,ge,we){var Se;for(Se=0;Se<le;++Se){var Ce=B[te+Se],Pe=Ce>>>8,$e=Ce,nt=255&(nt=(nt=Ce>>>16)+((T.jd<<24>>24)*(Pe<<24>>24)>>>5));$e=255&($e=($e=$e+((T.hd<<24>>24)*(Pe<<24>>24)>>>5))+((T.ud<<24>>24)*(nt<<24>>24)>>>5)),ge[we+Se]=(4278255360&Ce)+(nt<<16)+$e}}function ve(T,B,te,le,ge){A[B]=function(we,Se,Ce,Pe,$e,nt,Et,kt,xt){for(Pe=Et;Pe<kt;++Pe)for(Et=0;Et<xt;++Et)$e[nt++]=ge(Ce[le(we[Se++])])},A[T]=function(we,Se,Ce,Pe,$e,nt,Et){var kt=8>>we.b,xt=we.Ea,Zt=we.K[0],Rt=we.w;if(8>kt)for(we=(1<<we.b)-1,Rt=(1<<kt)-1;Se<Ce;++Se){var it,ut=0;for(it=0;it<xt;++it)it&we||(ut=le(Pe[$e++])),nt[Et++]=ge(Zt[ut&Rt]),ut>>=kt}else A["VP8LMapColor"+te](Pe,$e,Zt,Rt,nt,Et,Se,Ce,xt)}}function pe(T,B,te,le,ge){for(te=B+te;B<te;){var we=T[B++];le[ge++]=we>>16&255,le[ge++]=we>>8&255,le[ge++]=we>>0&255}}function De(T,B,te,le,ge){for(te=B+te;B<te;){var we=T[B++];le[ge++]=we>>16&255,le[ge++]=we>>8&255,le[ge++]=we>>0&255,le[ge++]=we>>24&255}}function Ke(T,B,te,le,ge){for(te=B+te;B<te;){var we=(Se=T[B++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;le[ge++]=we,le[ge++]=Se}}function Nt(T,B,te,le,ge){for(te=B+te;B<te;){var we=(Se=T[B++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;le[ge++]=we,le[ge++]=Se}}function Je(T,B,te,le,ge){for(te=B+te;B<te;){var we=T[B++];le[ge++]=we>>0&255,le[ge++]=we>>8&255,le[ge++]=we>>16&255}}function Qe(T,B,te,le,ge,we){if(we==0)for(te=B+te;B<te;)Z(le,((we=T[B++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),ge+=32;else a(le,ge,T,B,te)}function Ue(T,B){A[B][0]=A[T+"0"],A[B][1]=A[T+"1"],A[B][2]=A[T+"2"],A[B][3]=A[T+"3"],A[B][4]=A[T+"4"],A[B][5]=A[T+"5"],A[B][6]=A[T+"6"],A[B][7]=A[T+"7"],A[B][8]=A[T+"8"],A[B][9]=A[T+"9"],A[B][10]=A[T+"10"],A[B][11]=A[T+"11"],A[B][12]=A[T+"12"],A[B][13]=A[T+"13"],A[B][14]=A[T+"0"],A[B][15]=A[T+"0"]}function qe(T){return T==Sp||T==du||T==md||T==Yf}function mt(){this.eb=[],this.size=this.A=this.fb=0}function Ie(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new mt,this.f.kb=new Ie,this.sd=null}function Ye(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mt(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function Ae(T,B){var te=T.T,le=B.ba.f.RGBA,ge=le.eb,we=le.fb+T.ka*le.A,Se=ti[B.ba.S],Ce=T.y,Pe=T.O,$e=T.f,nt=T.N,Et=T.ea,kt=T.W,xt=B.cc,Zt=B.dc,Rt=B.Mc,it=B.Nc,ut=T.ka,Wt=T.ka+T.T,er=T.U,Kt=er+1>>1;for(ut==0?Se(Ce,Pe,null,null,$e,nt,Et,kt,$e,nt,Et,kt,ge,we,null,null,er):(Se(B.ec,B.fc,Ce,Pe,xt,Zt,Rt,it,$e,nt,Et,kt,ge,we-le.A,ge,we,er),++te);ut+2<Wt;ut+=2)xt=$e,Zt=nt,Rt=Et,it=kt,nt+=T.Rc,kt+=T.Rc,we+=2*le.A,Se(Ce,(Pe+=2*T.fa)-T.fa,Ce,Pe,xt,Zt,Rt,it,$e,nt,Et,kt,ge,we-le.A,ge,we,er);return Pe+=T.fa,T.j+Wt<T.o?(a(B.ec,B.fc,Ce,Pe,er),a(B.cc,B.dc,$e,nt,Kt),a(B.Mc,B.Nc,Et,kt,Kt),te--):1&Wt||Se(Ce,Pe,null,null,$e,nt,Et,kt,$e,nt,Et,kt,ge,we+le.A,null,null,er),te}function ke(T,B,te){var le=T.F,ge=[T.J];if(le!=null){var we=T.U,Se=B.ba.S,Ce=Se==wh||Se==md;B=B.ba.f.RGBA;var Pe=[0],$e=T.ka;Pe[0]=T.T,T.Kb&&($e==0?--Pe[0]:(--$e,ge[0]-=T.width),T.j+T.ka+T.T==T.o&&(Pe[0]=T.o-T.j-$e));var nt=B.eb;$e=B.fb+$e*B.A,T=ka(le,ge[0],T.width,we,Pe,nt,$e+(Ce?0:3),B.A),t(te==Pe),T&&qe(Se)&&Vo(nt,$e,Ce,we,Pe,B.A)}return 0}function ot(T){var B=T.ma,te=B.ba.S,le=11>te,ge=te==Gf||te==wp||te==wh||te==fd||te==12||qe(te);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!Zd(B.Oa,T,ge?11:12))return 0;if(ge&&qe(te)&&lr(),T.da)alert("todo:use_scaling");else{if(le){if(B.Ib=Mt,T.Kb){if(te=T.U+1>>1,B.memory=i(T.U+2*te),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+T.U,B.Mc=B.cc,B.Nc=B.dc+te,B.Ib=Ae,lr()}}else alert("todo:EmitYUV");ge&&(B.Jb=ke,le&&jt())}if(le&&!Y1){for(T=0;256>T;++T)PC[T]=89858*(T-128)+Ms>>kc,_p[T]=-22014*(T-128)+Ms,Og[T]=-45773*(T-128),Rs[T]=113618*(T-128)+Ms>>kc;for(T=fu;T<gv;++T)B=76283*(T-16)+Ms>>kc,Ep[T-fu]=$o(B,255),Mg[T-fu]=$o(B+8>>4,15);Y1=1}return 1}function bt(T){var B=T.ma,te=T.U,le=T.T;return t(!(1&T.ka)),0>=te||0>=le?0:(te=B.Ib(T,B),B.Jb!=null&&B.Jb(T,B,te),B.Dc+=te,1)}function Xt(T){T.ma.memory=null}function Ft(T,B,te,le){return Q(T,8)!=47?0:(B[0]=Q(T,14)+1,te[0]=Q(T,14)+1,le[0]=Q(T,1),Q(T,3)!=0?0:!T.h)}function rr(T,B){if(4>T)return T+1;var te=T-2>>1;return(2+(1&T)<<te)+Q(B,te)+1}function pr(T,B){return 120<B?B-120:1<=(te=((te=xd[B-1])>>4)*T+(8-(15&te)))?te:1;var te}function jr(T,B,te){var le=V(te),ge=T[B+=255&le].g-8;return 0<ge&&(ee(te,te.u+8),le=V(te),B+=T[B].value,B+=le&(1<<ge)-1),ee(te,te.u+T[B].g),T[B].value}function vt(T,B,te){return te.g+=T.g,te.value+=T.value<<B>>>0,t(8>=te.g),T.g}function Lt(T,B,te){var le=T.xc;return t((B=le==0?0:T.vc[T.md*(te>>le)+(B>>le)])<T.Wb),T.Ya[B]}function fe(T,B,te,le){var ge=T.ab,we=T.c*B,Se=T.C;B=Se+B;var Ce=te,Pe=le;for(le=T.Ta,te=T.Ua;0<ge--;){var $e=T.gc[ge],nt=Se,Et=B,kt=Ce,xt=Pe,Zt=(Pe=le,Ce=te,$e.Ea);switch(t(nt<Et),t(Et<=$e.nc),$e.hc){case 2:uv(kt,xt,(Et-nt)*Zt,Pe,Ce);break;case 0:var Rt=nt,it=Et,ut=Pe,Wt=Ce,er=(yr=$e).Ea;Rt==0&&(Ig(kt,xt,null,null,1,ut,Wt),At(kt,xt+1,0,0,er-1,ut,Wt+1),xt+=er,Wt+=er,++Rt);for(var Kt=1<<yr.b,Sr=Kt-1,br=je(er,yr.b),zr=yr.K,yr=yr.w+(Rt>>yr.b)*br;Rt<it;){var La=zr,Ka=yr,Sa=1;for(jp(kt,xt,ut,Wt-er,1,ut,Wt);Sa<er;){var ya=(Sa&~Sr)+Kt;ya>er&&(ya=er),(0,dd[La[Ka++]>>8&15])(kt,xt+ +Sa,ut,Wt+Sa-er,ya-Sa,ut,Wt+Sa),Sa=ya}xt+=er,Wt+=er,++Rt&Sr||(yr+=br)}Et!=$e.nc&&a(Pe,Ce-Zt,Pe,Ce+(Et-nt-1)*Zt,Zt);break;case 1:for(Zt=kt,it=xt,er=(kt=$e.Ea)-(Wt=kt&~(ut=(xt=1<<$e.b)-1)),Rt=je(kt,$e.b),Kt=$e.K,$e=$e.w+(nt>>$e.b)*Rt;nt<Et;){for(Sr=Kt,br=$e,zr=new et,yr=it+Wt,La=it+kt;it<yr;)xe(Sr[br++],zr),ru(zr,Zt,it,xt,Pe,Ce),it+=xt,Ce+=xt;it<La&&(xe(Sr[br++],zr),ru(zr,Zt,it,er,Pe,Ce),it+=er,Ce+=er),++nt&ut||($e+=Rt)}break;case 3:if(kt==Pe&&xt==Ce&&0<$e.b){for(it=Pe,kt=Zt=Ce+(Et-nt)*Zt-(Wt=(Et-nt)*je($e.Ea,$e.b)),xt=Pe,ut=Ce,Rt=[],Wt=(er=Wt)-1;0<=Wt;--Wt)Rt[Wt]=xt[ut+Wt];for(Wt=er-1;0<=Wt;--Wt)it[kt+Wt]=Rt[Wt];il($e,nt,Et,Pe,Zt,Pe,Ce)}else il($e,nt,Et,kt,xt,Pe,Ce)}Ce=le,Pe=te}Pe!=te&&a(le,te,Ce,Pe,we)}function Re(T,B){var te=T.V,le=T.Ba+T.c*T.C,ge=B-T.C;if(t(B<=T.l.o),t(16>=ge),0<ge){var we=T.l,Se=T.Ta,Ce=T.Ua,Pe=we.width;if(fe(T,ge,te,le),ge=Ce=[Ce],t((te=T.C)<(le=B)),t(we.v<we.va),le>we.o&&(le=we.o),te<we.j){var $e=we.j-te;te=we.j,ge[0]+=$e*Pe}if(te>=le?te=0:(ge[0]+=4*we.v,we.ka=te-we.j,we.U=we.va-we.v,we.T=le-te,te=1),te){if(Ce=Ce[0],11>(te=T.ca).S){var nt=te.f.RGBA,Et=(le=te.S,ge=we.U,we=we.T,$e=nt.eb,nt.A),kt=we;for(nt=nt.fb+T.Ma*nt.A;0<kt--;){var xt=Se,Zt=Ce,Rt=ge,it=$e,ut=nt;switch(le){case ki:zi(xt,Zt,Rt,it,ut);break;case Gf:hi(xt,Zt,Rt,it,ut);break;case Sp:hi(xt,Zt,Rt,it,ut),Vo(it,ut,0,Rt,1,0);break;case Nc:Ml(xt,Zt,Rt,it,ut);break;case wp:Qe(xt,Zt,Rt,it,ut,1);break;case du:Qe(xt,Zt,Rt,it,ut,1),Vo(it,ut,0,Rt,1,0);break;case wh:Qe(xt,Zt,Rt,it,ut,0);break;case md:Qe(xt,Zt,Rt,it,ut,0),Vo(it,ut,1,Rt,1,0);break;case fd:au(xt,Zt,Rt,it,ut);break;case Yf:au(xt,Zt,Rt,it,ut),Ca(it,ut,Rt,1,0);break;case fv:lo(xt,Zt,Rt,it,ut);break;default:t(0)}Ce+=Pe,nt+=Et}T.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=te.height)}}T.C=B,t(T.C<=T.i)}function Te(T){var B;if(0<T.ua)return 0;for(B=0;B<T.Wb;++B){var te=T.Ya[B].G,le=T.Ya[B].H;if(0<te[1][le[1]+0].g||0<te[2][le[2]+0].g||0<te[3][le[3]+0].g)return 0}return 1}function _e(T,B,te,le,ge,we){if(T.Z!=0){var Se=T.qd,Ce=T.rd;for(t(Sc[T.Z]!=null);B<te;++B)Sc[T.Z](Se,Ce,le,ge,le,ge,we),Se=le,Ce=ge,ge+=we;T.qd=Se,T.rd=Ce}}function Le(T,B){var te=T.l.ma,le=te.Z==0||te.Z==1?T.l.j:T.C;if(le=T.C<le?le:T.C,t(B<=T.l.o),B>le){var ge=T.l.width,we=te.ca,Se=te.tb+ge*le,Ce=T.V,Pe=T.Ba+T.c*le,$e=T.gc;t(T.ab==1),t($e[0].hc==3),tu($e[0],le,B,Ce,Pe,we,Se),_e(te,le,B,we,Se,ge)}T.C=T.Ma=B}function Ve(T,B,te,le,ge,we,Se){var Ce=T.$/le,Pe=T.$%le,$e=T.m,nt=T.s,Et=te+T.$,kt=Et;ge=te+le*ge;var xt=te+le*we,Zt=280+nt.ua,Rt=T.Pb?Ce:16777216,it=0<nt.ua?nt.Wa:null,ut=nt.wc,Wt=Et<xt?Lt(nt,Pe,Ce):null;t(T.C<we),t(xt<=ge);var er=!1;e:for(;;){for(;er||Et<xt;){var Kt=0;if(Ce>=Rt){var Sr=Et-te;t((Rt=T).Pb),Rt.wd=Rt.m,Rt.xd=Sr,0<Rt.s.ua&&ue(Rt.s.Wa,Rt.s.vb),Rt=Ce+H1}if(Pe&ut||(Wt=Lt(nt,Pe,Ce)),t(Wt!=null),Wt.Qb&&(B[Et]=Wt.qb,er=!0),!er)if(re($e),Wt.jc){Kt=$e,Sr=B;var br=Et,zr=Wt.pd[V(Kt)&Ps-1];t(Wt.jc),256>zr.g?(ee(Kt,Kt.u+zr.g),Sr[br]=zr.value,Kt=0):(ee(Kt,Kt.u+zr.g-256),t(256<=zr.value),Kt=zr.value),Kt==0&&(er=!0)}else Kt=jr(Wt.G[0],Wt.H[0],$e);if($e.h)break;if(er||256>Kt){if(!er)if(Wt.nd)B[Et]=(Wt.qb|Kt<<8)>>>0;else{if(re($e),er=jr(Wt.G[1],Wt.H[1],$e),re($e),Sr=jr(Wt.G[2],Wt.H[2],$e),br=jr(Wt.G[3],Wt.H[3],$e),$e.h)break;B[Et]=(br<<24|er<<16|Kt<<8|Sr)>>>0}if(er=!1,++Et,++Pe>=le&&(Pe=0,++Ce,Se!=null&&Ce<=we&&!(Ce%16)&&Se(T,Ce),it!=null))for(;kt<Et;)Kt=B[kt++],it.X[(506832829*Kt&4294967295)>>>it.Mb]=Kt}else if(280>Kt){if(Kt=rr(Kt-256,$e),Sr=jr(Wt.G[4],Wt.H[4],$e),re($e),Sr=pr(le,Sr=rr(Sr,$e)),$e.h)break;if(Et-te<Sr||ge-Et<Kt)break e;for(br=0;br<Kt;++br)B[Et+br]=B[Et+br-Sr];for(Et+=Kt,Pe+=Kt;Pe>=le;)Pe-=le,++Ce,Se!=null&&Ce<=we&&!(Ce%16)&&Se(T,Ce);if(t(Et<=ge),Pe&ut&&(Wt=Lt(nt,Pe,Ce)),it!=null)for(;kt<Et;)Kt=B[kt++],it.X[(506832829*Kt&4294967295)>>>it.Mb]=Kt}else{if(!(Kt<Zt))break e;for(er=Kt-280,t(it!=null);kt<Et;)Kt=B[kt++],it.X[(506832829*Kt&4294967295)>>>it.Mb]=Kt;Kt=Et,t(!(er>>>(Sr=it).Xa)),B[Kt]=Sr.X[er],er=!0}er||t($e.h==W($e))}if(T.Pb&&$e.h&&Et<ge)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&ue(T.s.vb,T.s.Wa);else{if($e.h)break e;Se?.(T,Ce>we?we:Ce),T.a=0,T.$=Et-te}return 1}return T.a=3,0}function pt(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var B=T.Wa;B!=null&&(B.X=null),T.vb=null,t(T!=null)}function wt(){var T=new Tg;return T==null?null:(T.a=0,T.xb=Kf,Ue("Predictor","VP8LPredictors"),Ue("Predictor","VP8LPredictors_C"),Ue("PredictorAdd","VP8LPredictorsAdd"),Ue("PredictorAdd","VP8LPredictorsAdd_C"),uv=qt,ru=he,zi=pe,hi=De,au=Ke,lo=Nt,Ml=Je,A.VP8LMapColor32b=Zs,A.VP8LMapColor8b=Np,T)}function st(T,B,te,le,ge){var we=1,Se=[T],Ce=[B],Pe=le.m,$e=le.s,nt=null,Et=0;e:for(;;){if(te)for(;we&&Q(Pe,1);){var kt=Se,xt=Ce,Zt=le,Rt=1,it=Zt.m,ut=Zt.gc[Zt.ab],Wt=Q(it,2);if(Zt.Oc&1<<Wt)we=0;else{switch(Zt.Oc|=1<<Wt,ut.hc=Wt,ut.Ea=kt[0],ut.nc=xt[0],ut.K=[null],++Zt.ab,t(4>=Zt.ab),Wt){case 0:case 1:ut.b=Q(it,3)+2,Rt=st(je(ut.Ea,ut.b),je(ut.nc,ut.b),0,Zt,ut.K),ut.K=ut.K[0];break;case 3:var er,Kt=Q(it,8)+1,Sr=16<Kt?0:4<Kt?1:2<Kt?2:3;if(kt[0]=je(ut.Ea,Sr),ut.b=Sr,er=Rt=st(Kt,1,0,Zt,ut.K)){var br,zr=Kt,yr=ut,La=1<<(8>>yr.b),Ka=i(La);if(Ka==null)er=0;else{var Sa=yr.K[0],ya=yr.w;for(Ka[0]=yr.K[0][0],br=1;br<1*zr;++br)Ka[br]=Me(Sa[ya+br],Ka[br-1]);for(;br<4*La;++br)Ka[br]=0;yr.K[0]=null,yr.K[0]=Ka,er=1}}Rt=er;break;case 2:break;default:t(0)}we=Rt}}if(Se=Se[0],Ce=Ce[0],we&&Q(Pe,1)&&!(we=1<=(Et=Q(Pe,4))&&11>=Et)){le.a=3;break e}var dn;if(dn=we)t:{var Xa,ua,mn,Yr=le,aa=Se,Fa=Ce,Ba=Et,ri=te,Fs=Yr.m,os=Yr.s,ls=[null],bs=1,dl=0,Qa=Ch[Ba];r:for(;;){if(ri&&Q(Fs,1)){var ys=Q(Fs,3)+2,Ll=je(aa,ys),mu=je(Fa,ys),Eh=Ll*mu;if(!st(Ll,mu,0,Yr,ls))break r;for(ls=ls[0],os.xc=ys,Xa=0;Xa<Eh;++Xa){var pu=ls[Xa]>>8&65535;ls[Xa]=pu,pu>=bs&&(bs=pu+1)}}if(Fs.h)break r;for(ua=0;5>ua;++ua){var Pn=qo[ua];!ua&&0<Ba&&(Pn+=1<<Ba),dl<Pn&&(dl=Pn)}var Dp=o(bs*Qa,O),bv=bs,Wi=o(bv,q);if(Wi==null)var Bn=null;else t(65536>=bv),Bn=Wi;var Dh=i(dl);if(Bn==null||Dh==null||Dp==null){Yr.a=1;break r}var xu=Dp;for(Xa=mn=0;Xa<bs;++Xa){var uo=Bn[Xa],vu=uo.G,ho=uo.H,Ap=0,Qf=1,yv=0;for(ua=0;5>ua;++ua){Pn=qo[ua],vu[ua]=xu,ho[ua]=mn,!ua&&0<Ba&&(Pn+=1<<Ba);n:{var Tp,jv=Pn,Ip=Yr,Jf=Dh,Q1=xu,J1=mn,Pp=0,yd=Ip.m,MC=Q(yd,1);if(s(Jf,0,0,jv),MC){var Z1=Q(yd,1)+1,ej=Q(yd,1),Rg=Q(yd,ej==0?1:8);Jf[Rg]=1,Z1==2&&(Jf[Rg=Q(yd,8)]=1);var Zf=1}else{var Fg=i(19),Lg=Q(yd,4)+4;if(19<Lg){Ip.a=3;var Op=0;break n}for(Tp=0;Tp<Lg;++Tp)Fg[pd[Tp]]=Q(yd,3);var Nv=void 0,em=void 0,tj=Ip,rj=Fg,jd=jv,Mp=Jf,wv=0,Bl=tj.m,tm=8,Bg=o(128,O);a:for(;P(Bg,0,7,rj,19);){if(Q(Bl,1)){var aj=2+2*Q(Bl,3);if((Nv=2+Q(Bl,aj))>jd)break a}else Nv=jd;for(em=0;em<jd&&Nv--;){re(Bl);var Ug=Bg[0+(127&V(Bl))];ee(Bl,Bl.u+Ug.g);var Ah=Ug.value;if(16>Ah)Mp[em++]=Ah,Ah!=0&&(tm=Ah);else{var nj=Ah==16,$g=Ah-16,Vg=cl[$g],qg=Q(Bl,mv[$g])+Vg;if(em+qg>jd)break a;for(var sj=nj?tm:0;0<qg--;)Mp[em++]=sj}}wv=1;break a}wv||(tj.a=3),Zf=wv}(Zf=Zf&&!yd.h)&&(Pp=P(Q1,J1,8,Jf,jv)),Zf&&Pp!=0?Op=Pp:(Ip.a=3,Op=0)}if(Op==0)break r;if(Qf&&Sh[ua]==1&&(Qf=xu[mn].g==0),Ap+=xu[mn].g,mn+=Op,3>=ua){var Th,Sv=Dh[0];for(Th=1;Th<Pn;++Th)Dh[Th]>Sv&&(Sv=Dh[Th]);yv+=Sv}}if(uo.nd=Qf,uo.Qb=0,Qf&&(uo.qb=(vu[3][ho[3]+0].value<<24|vu[1][ho[1]+0].value<<16|vu[2][ho[2]+0].value)>>>0,Ap==0&&256>vu[0][ho[0]+0].value&&(uo.Qb=1,uo.qb+=vu[0][ho[0]+0].value<<8)),uo.jc=!uo.Qb&&6>yv,uo.jc){var Rp,Nd=uo;for(Rp=0;Rp<Ps;++Rp){var _c=Rp,wd=Nd.pd[_c],Fp=Nd.G[0][Nd.H[0]+_c];256<=Fp.value?(wd.g=Fp.g+256,wd.value=Fp.value):(wd.g=0,wd.value=0,_c>>=vt(Fp,8,wd),_c>>=vt(Nd.G[1][Nd.H[1]+_c],16,wd),_c>>=vt(Nd.G[2][Nd.H[2]+_c],0,wd),vt(Nd.G[3][Nd.H[3]+_c],24,wd))}}}os.vc=ls,os.Wb=bs,os.Ya=Bn,os.yc=Dp,dn=1;break t}dn=0}if(!(we=dn)){le.a=3;break e}if(0<Et){if($e.ua=1<<Et,!Ne($e.Wa,Et)){le.a=1,we=0;break e}}else $e.ua=0;var Lp=le,zg=Se,ij=Ce,Hg=Lp.s,Wg=Hg.xc;if(Lp.c=zg,Lp.i=ij,Hg.md=je(zg,Wg),Hg.wc=Wg==0?-1:(1<<Wg)-1,te){le.xb=G1;break e}if((nt=i(Se*Ce))==null){le.a=1,we=0;break e}we=(we=Ve(le,nt,0,Se,Ce,Ce,null))&&!Pe.h;break e}return we?(ge!=null?ge[0]=nt:(t(nt==null),t(te)),le.$=0,te||pt($e)):pt($e),we}function St(T,B){var te=T.c*T.i,le=te+B+16*B;return t(T.c<=B),T.V=i(le),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+te+B,1)}function Ct(T,B){var te=T.C,le=B-te,ge=T.V,we=T.Ba+T.c*te;for(t(B<=T.l.o);0<le;){var Se=16<le?16:le,Ce=T.l.ma,Pe=T.l.width,$e=Pe*Se,nt=Ce.ca,Et=Ce.tb+Pe*te,kt=T.Ta,xt=T.Ua;fe(T,Se,ge,we),wn(kt,xt,nt,Et,$e),_e(Ce,te,te+Se,nt,Et,Pe),le-=Se,ge+=Se*T.c,te+=Se}t(te==B),T.C=T.Ma=B}function Jt(){this.ub=this.yd=this.td=this.Rb=0}function ir(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function or(){this.Yb=function(){var T=[];return function B(te,le,ge){for(var we=ge[le],Se=0;Se<we&&(te.push(ge.length>le+1?[]:0),!(ge.length<le+1));Se++)B(te[Se],le+1,ge)}(T,0,[3,11]),T}()}function ze(){this.jb=i(3),this.Wc=l([4,8],or),this.Xc=l([4,17],or)}function dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ur(){this.ld=this.La=this.dd=this.tc=0}function qr(){this.Na=this.la=0}function va(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rn(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qs(){this.uc=this.M=this.Nb=0,this.wa=Array(new ur),this.Y=0,this.ya=Array(new rn),this.aa=0,this.l=new As}function Gn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function xs(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Jt,this.Kc=new ir,this.ed=new dr,this.Qa=new xr,this.Ic=this.$c=this.Aa=0,this.D=new Qs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ie),this.ia=0,this.pb=o(4,va),this.Pa=new ze,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gn),this.Hd=0,this.rb=Array(new qr),this.sb=0,this.wa=Array(new ur),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rn),this.L=this.aa=0,this.gd=l([4,2],ur),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function As(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function yt(){var T=new xs;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Os||(Os=Rr)),T}function mr(T,B,te){return T.a==0&&(T.a=B,T.sc=te,T.cb=0),0}function hr(T,B,te){return 3<=te&&T[B+0]==157&&T[B+1]==1&&T[B+2]==42}function Kr(T,B){if(T==null)return 0;if(T.a=0,T.sc="OK",B==null)return mr(T,2,"null VP8Io passed to VP8GetHeaders()");var te=B.data,le=B.w,ge=B.ha;if(4>ge)return mr(T,7,"Truncated header.");var we=te[le+0]|te[le+1]<<8|te[le+2]<<16,Se=T.Od;if(Se.Rb=!(1&we),Se.td=we>>1&7,Se.yd=we>>4&1,Se.ub=we>>5,3<Se.td)return mr(T,3,"Incorrect keyframe parameters.");if(!Se.yd)return mr(T,4,"Frame not displayable.");le+=3,ge-=3;var Ce=T.Kc;if(Se.Rb){if(7>ge)return mr(T,7,"cannot parse picture header");if(!hr(te,le,ge))return mr(T,3,"Bad code word");Ce.c=16383&(te[le+4]<<8|te[le+3]),Ce.Td=te[le+4]>>6,Ce.i=16383&(te[le+6]<<8|te[le+5]),Ce.Ud=te[le+6]>>6,le+=7,ge-=7,T.za=Ce.c+15>>4,T.Ub=Ce.i+15>>4,B.width=Ce.c,B.height=Ce.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,s((we=T.Pa).jb,0,255,we.jb.length),t((we=T.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,s(we.Zb,0,0,we.Zb.length),s(we.Lb,0,0,we.Lb)}if(Se.ub>ge)return mr(T,7,"bad partition length");K(we=T.m,te,le,Se.ub),le+=Se.ub,ge-=Se.ub,Se.Rb&&(Ce.Ld=ce(we),Ce.Kd=ce(we)),Ce=T.Qa;var Pe,$e=T.Pa;if(t(we!=null),t(Ce!=null),Ce.Cb=ce(we),Ce.Cb){if(Ce.Bb=ce(we),ce(we)){for(Ce.Fb=ce(we),Pe=0;4>Pe;++Pe)Ce.Zb[Pe]=ce(we)?J(we,7):0;for(Pe=0;4>Pe;++Pe)Ce.Lb[Pe]=ce(we)?J(we,6):0}if(Ce.Bb)for(Pe=0;3>Pe;++Pe)$e.jb[Pe]=ce(we)?U(we,8):255}else Ce.Bb=0;if(we.Ka)return mr(T,3,"cannot parse segment header");if((Ce=T.ed).zd=ce(we),Ce.Tb=U(we,6),Ce.wb=U(we,3),Ce.Pc=ce(we),Ce.Pc&&ce(we)){for($e=0;4>$e;++$e)ce(we)&&(Ce.vd[$e]=J(we,6));for($e=0;4>$e;++$e)ce(we)&&(Ce.od[$e]=J(we,6))}if(T.L=Ce.Tb==0?0:Ce.zd?1:2,we.Ka)return mr(T,3,"cannot parse filter header");var nt=ge;if(ge=Pe=le,le=Pe+nt,Ce=nt,T.Xb=(1<<U(T.m,2))-1,nt<3*($e=T.Xb))te=7;else{for(Pe+=3*$e,Ce-=3*$e,nt=0;nt<$e;++nt){var Et=te[ge+0]|te[ge+1]<<8|te[ge+2]<<16;Et>Ce&&(Et=Ce),K(T.Jc[+nt],te,Pe,Et),Pe+=Et,Ce-=Et,ge+=3}K(T.Jc[+$e],te,Pe,Ce),te=Pe<le?0:5}if(te!=0)return mr(T,te,"cannot parse partitions");for(te=U(Pe=T.m,7),ge=ce(Pe)?J(Pe,4):0,le=ce(Pe)?J(Pe,4):0,Ce=ce(Pe)?J(Pe,4):0,$e=ce(Pe)?J(Pe,4):0,Pe=ce(Pe)?J(Pe,4):0,nt=T.Qa,Et=0;4>Et;++Et){if(nt.Cb){var kt=nt.Zb[Et];nt.Fb||(kt+=te)}else{if(0<Et){T.pb[Et]=T.pb[0];continue}kt=te}var xt=T.pb[Et];xt.Sc[0]=Cp[$o(kt+ge,127)],xt.Sc[1]=kp[$o(kt+0,127)],xt.Eb[0]=2*Cp[$o(kt+le,127)],xt.Eb[1]=101581*kp[$o(kt+Ce,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=Cp[$o(kt+$e,117)],xt.Qc[1]=kp[$o(kt+Pe,127)],xt.lc=kt+Pe}if(!Se.Rb)return mr(T,4,"Not a key frame.");for(ce(we),Se=T.Pa,te=0;4>te;++te){for(ge=0;8>ge;++ge)for(le=0;3>le;++le)for(Ce=0;11>Ce;++Ce)$e=ae(we,kh[te][ge][le][Ce])?U(we,8):wc[te][ge][le][Ce],Se.Wc[te][ge].Yb[le][Ce]=$e;for(ge=0;17>ge;++ge)Se.Xc[te][ge]=Se.Wc[te][W1[ge]]}return T.kc=ce(we),T.kc&&(T.Bd=U(we,8)),T.cb=1}function Rr(T,B,te,le,ge,we,Se){var Ce=B[ge].Yb[te];for(te=0;16>ge;++ge){if(!ae(T,Ce[te+0]))return ge;for(;!ae(T,Ce[te+1]);)if(Ce=B[++ge].Yb[0],te=0,ge==16)return 16;var Pe=B[ge+1].Yb;if(ae(T,Ce[te+2])){var $e=T,nt=0;if(ae($e,(kt=Ce)[(Et=te)+3]))if(ae($e,kt[Et+6])){for(Ce=0,Et=2*(nt=ae($e,kt[Et+8]))+(kt=ae($e,kt[Et+9+nt])),nt=0,kt=Xn[Et];kt[Ce];++Ce)nt+=nt+ae($e,kt[Ce]);nt+=3+(8<<Et)}else ae($e,kt[Et+7])?(nt=7+2*ae($e,165),nt+=ae($e,145)):nt=5+ae($e,159);else nt=ae($e,kt[Et+4])?3+ae($e,kt[Et+5]):2;Ce=Pe[2]}else nt=1,Ce=Pe[1];Pe=Se+za[ge],0>($e=T).b&&ne($e);var Et,kt=$e.b,xt=(Et=$e.Ca>>1)-($e.I>>kt)>>31;--$e.b,$e.Ca+=xt,$e.Ca|=1,$e.I-=(Et+1&xt)<<kt,we[Pe]=((nt^xt)-xt)*le[(0<ge)+0]}return 16}function cn(T){var B=T.rb[T.sb-1];B.la=0,B.Na=0,s(T.zc,0,0,T.zc.length),T.ja=0}function Zo(T,B){if(T==null)return 0;if(B==null)return mr(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Kr(T,B))return 0;if(t(T.cb),B.ac==null||B.ac(B)){B.ob&&(T.L=0);var te=bd[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=B.v-te>>4,T.zb=B.j-te>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=B.o+15+te>>4,T.Hb=B.va+15+te>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var le=T.ed;for(te=0;4>te;++te){var ge;if(T.Qa.Cb){var we=T.Qa.Lb[te];T.Qa.Fb||(we+=le.Tb)}else we=le.Tb;for(ge=0;1>=ge;++ge){var Se=T.gd[te][ge],Ce=we;if(le.Pc&&(Ce+=le.vd[0],ge&&(Ce+=le.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var Pe=Ce;0<le.wb&&(Pe=4<le.wb?Pe>>2:Pe>>1)>9-le.wb&&(Pe=9-le.wb),1>Pe&&(Pe=1),Se.dd=Pe,Se.tc=2*Ce+Pe,Se.ld=40<=Ce?2:15<=Ce?1:0}else Se.tc=0;Se.La=ge}}}te=0}else mr(T,6,"Frame setup failed"),te=T.a;if(te=te==0){if(te){T.$c=0,0<T.Aa||(T.Ic=K1);e:{te=T.Ic,le=4*(Pe=T.za);var $e=32*Pe,nt=Pe+1,Et=0<T.L?Pe*(0<T.Aa?2:1):0,kt=(T.Aa==2?2:1)*Pe;if((Se=le+832+(ge=3*(16*te+bd[T.L])/2*$e)+(we=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=Se)te=0;else{if(Se>T.Vb){if(T.Vb=0,T.Ec=i(Se),T.Fc=0,T.Ec==null){te=mr(T,1,"no memory during frame initialization.");break e}T.Vb=Se}Se=T.Ec,Ce=T.Fc,T.Ac=Se,T.Bc=Ce,Ce+=le,T.Gd=o($e,Gn),T.Hd=0,T.rb=o(nt+1,qr),T.sb=1,T.wa=Et?o(Et,ur):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Pe),t(!0),T.oc=Se,T.pc=Ce,Ce+=832,T.ya=o(kt,rn),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Pe),T.R=16*Pe,T.B=8*Pe,Pe=($e=bd[T.L])*T.R,$e=$e/2*T.B,T.sa=Se,T.ta=Ce+Pe,T.qa=T.sa,T.ra=T.ta+16*te*T.R+$e,T.Ha=T.qa,T.Ia=T.ra+8*te*T.B+$e,T.$c=0,Ce+=ge,T.mb=we?Se:null,T.nb=we?Ce:null,t(Ce+we<=T.Fc+T.Vb),cn(T),s(T.Ac,T.Bc,0,le),te=1}}if(te){if(B.ka=0,B.y=T.sa,B.O=T.ta,B.f=T.qa,B.N=T.ra,B.ea=T.Ha,B.Vd=T.Ia,B.fa=T.R,B.Rc=T.B,B.F=null,B.J=0,!hd){for(te=-255;255>=te;++te)is[255+te]=0>te?-te:te;for(te=-1020;1020>=te;++te)ol[1020+te]=-128>te?-128:127<te?127:te;for(te=-112;112>=te;++te)lu[112+te]=-16>te?-16:15<te?15:te;for(te=-255;510>=te;++te)cu[255+te]=0>te?0:255<te?255:te;hd=1}yc=Ts,Rl=tl,Fl=Vi,gs=qa,co=qi,Yn=el,bh=fh,jc=mh,Hf=Ag,nu=xp,su=Dg,iu=Rf,yh=Ff,Wf=dv,ou=Xd,ud=Uo,jh=bc,Kn=Eg,Hi[0]=at,Hi[1]=sd,Hi[2]=hh,Hi[3]=If,Hi[4]=fr,Hi[5]=Dr,Hi[6]=ar,Hi[7]=_r,Hi[8]=rl,Hi[9]=En,vd[0]=pc,vd[1]=id,vd[2]=Dl,vd[3]=mc,vd[4]=vs,vd[5]=xc,vd[6]=Tl,zo[0]=nl,zo[1]=El,zo[2]=Pf,zo[3]=vc,zo[4]=Ci,zo[5]=Is,zo[6]=gc,te=1}else te=0}te&&(te=function(xt,Zt){for(xt.M=0;xt.M<xt.Va;++xt.M){var Rt,it=xt.Jc[xt.M&xt.Xb],ut=xt.m,Wt=xt;for(Rt=0;Rt<Wt.za;++Rt){var er=ut,Kt=Wt,Sr=Kt.Ac,br=Kt.Bc+4*Rt,zr=Kt.zc,yr=Kt.ya[Kt.aa+Rt];if(Kt.Qa.Bb?yr.$b=ae(er,Kt.Pa.jb[0])?2+ae(er,Kt.Pa.jb[2]):ae(er,Kt.Pa.jb[1]):yr.$b=0,Kt.kc&&(yr.Ad=ae(er,Kt.Bd)),yr.Za=!ae(er,145)+0,yr.Za){var La=yr.Ob,Ka=0;for(Kt=0;4>Kt;++Kt){var Sa,ya=zr[0+Kt];for(Sa=0;4>Sa;++Sa){ya=Pg[Sr[br+Sa]][ya];for(var dn=uu[ae(er,ya[0])];0<dn;)dn=uu[2*dn+ae(er,ya[dn])];ya=-dn,Sr[br+Sa]=ya}a(La,Ka,Sr,br,4),Ka+=4,zr[0+Kt]=ya}}else ya=ae(er,156)?ae(er,128)?1:3:ae(er,163)?2:0,yr.Ob[0]=ya,s(Sr,br,ya,4),s(zr,0,ya,4);yr.Dd=ae(er,142)?ae(er,114)?ae(er,183)?1:3:2:0}if(Wt.m.Ka)return mr(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(Wt=it,er=(ut=xt).rb[ut.sb-1],Sr=ut.rb[ut.sb+ut.ja],Rt=ut.ya[ut.aa+ut.ja],br=ut.kc?Rt.Ad:0)er.la=Sr.la=0,Rt.Za||(er.Na=Sr.Na=0),Rt.Hc=0,Rt.Gc=0,Rt.ia=0;else{var Xa,ua;if(er=Sr,Sr=Wt,br=ut.Pa.Xc,zr=ut.ya[ut.aa+ut.ja],yr=ut.pb[zr.$b],Kt=zr.ad,La=0,Ka=ut.rb[ut.sb-1],ya=Sa=0,s(Kt,La,0,384),zr.Za)var mn=0,Yr=br[3];else{dn=i(16);var aa=er.Na+Ka.Na;if(aa=Os(Sr,br[1],aa,yr.Eb,0,dn,0),er.Na=Ka.Na=(0<aa)+0,1<aa)yc(dn,0,Kt,La);else{var Fa=dn[0]+3>>3;for(dn=0;256>dn;dn+=16)Kt[La+dn]=Fa}mn=1,Yr=br[0]}var Ba=15&er.la,ri=15&Ka.la;for(dn=0;4>dn;++dn){var Fs=1&ri;for(Fa=ua=0;4>Fa;++Fa)Ba=Ba>>1|(Fs=(aa=Os(Sr,Yr,aa=Fs+(1&Ba),yr.Sc,mn,Kt,La))>mn)<<7,ua=ua<<2|(3<aa?3:1<aa?2:Kt[La+0]!=0),La+=16;Ba>>=4,ri=ri>>1|Fs<<7,Sa=(Sa<<8|ua)>>>0}for(Yr=Ba,mn=ri>>4,Xa=0;4>Xa;Xa+=2){for(ua=0,Ba=er.la>>4+Xa,ri=Ka.la>>4+Xa,dn=0;2>dn;++dn){for(Fs=1&ri,Fa=0;2>Fa;++Fa)aa=Fs+(1&Ba),Ba=Ba>>1|(Fs=0<(aa=Os(Sr,br[2],aa,yr.Qc,0,Kt,La)))<<3,ua=ua<<2|(3<aa?3:1<aa?2:Kt[La+0]!=0),La+=16;Ba>>=2,ri=ri>>1|Fs<<5}ya|=ua<<4*Xa,Yr|=Ba<<4<<Xa,mn|=(240&ri)<<Xa}er.la=Yr,Ka.la=mn,zr.Hc=Sa,zr.Gc=ya,zr.ia=43690&ya?0:yr.ia,br=!(Sa|ya)}if(0<ut.L&&(ut.wa[ut.Y+ut.ja]=ut.gd[Rt.$b][Rt.Za],ut.wa[ut.Y+ut.ja].La|=!br),Wt.Ka)return mr(xt,7,"Premature end-of-file encountered.")}if(cn(xt),ut=Zt,Wt=1,Rt=(it=xt).D,er=0<it.L&&it.M>=it.zb&&it.M<=it.Va,it.Aa==0)e:{if(Rt.M=it.M,Rt.uc=er,cd(it,Rt),Wt=1,Rt=(ua=it.D).Nb,er=(ya=bd[it.L])*it.R,Sr=ya/2*it.B,dn=16*Rt*it.R,Fa=8*Rt*it.B,br=it.sa,zr=it.ta-er+dn,yr=it.qa,Kt=it.ra-Sr+Fa,La=it.Ha,Ka=it.Ia-Sr+Fa,ri=(Ba=ua.M)==0,Sa=Ba>=it.Va-1,it.Aa==2&&cd(it,ua),ua.uc)for(Fs=(aa=it).D.M,t(aa.D.uc),ua=aa.yb;ua<aa.Hb;++ua){mn=ua,Yr=Fs;var os=(ls=(Pn=aa).D).Nb;Xa=Pn.R;var ls=ls.wa[ls.Y+mn],bs=Pn.sa,dl=Pn.ta+16*os*Xa+16*mn,Qa=ls.dd,ys=ls.tc;if(ys!=0)if(t(3<=ys),Pn.L==1)0<mn&&ud(bs,dl,Xa,ys+4),ls.La&&Kn(bs,dl,Xa,ys),0<Yr&&ou(bs,dl,Xa,ys+4),ls.La&&jh(bs,dl,Xa,ys);else{var Ll=Pn.B,mu=Pn.qa,Eh=Pn.ra+8*os*Ll+8*mn,pu=Pn.Ha,Pn=Pn.Ia+8*os*Ll+8*mn;os=ls.ld,0<mn&&(jc(bs,dl,Xa,ys+4,Qa,os),nu(mu,Eh,pu,Pn,Ll,ys+4,Qa,os)),ls.La&&(iu(bs,dl,Xa,ys,Qa,os),Wf(mu,Eh,pu,Pn,Ll,ys,Qa,os)),0<Yr&&(bh(bs,dl,Xa,ys+4,Qa,os),Hf(mu,Eh,pu,Pn,Ll,ys+4,Qa,os)),ls.La&&(su(bs,dl,Xa,ys,Qa,os),yh(mu,Eh,pu,Pn,Ll,ys,Qa,os))}}if(it.ia&&alert("todo:DitherRow"),ut.put!=null){if(ua=16*Ba,Ba=16*(Ba+1),ri?(ut.y=it.sa,ut.O=it.ta+dn,ut.f=it.qa,ut.N=it.ra+Fa,ut.ea=it.Ha,ut.W=it.Ia+Fa):(ua-=ya,ut.y=br,ut.O=zr,ut.f=yr,ut.N=Kt,ut.ea=La,ut.W=Ka),Sa||(Ba-=ya),Ba>ut.o&&(Ba=ut.o),ut.F=null,ut.J=null,it.Fa!=null&&0<it.Fa.length&&ua<Ba&&(ut.J=bp(it,ut,ua,Ba-ua),ut.F=it.mb,ut.F==null&&ut.F.length==0)){Wt=mr(it,3,"Could not decode alpha data.");break e}ua<ut.j&&(ya=ut.j-ua,ua=ut.j,t(!(1&ya)),ut.O+=it.R*ya,ut.N+=it.B*(ya>>1),ut.W+=it.B*(ya>>1),ut.F!=null&&(ut.J+=ut.width*ya)),ua<Ba&&(ut.O+=ut.v,ut.N+=ut.v>>1,ut.W+=ut.v>>1,ut.F!=null&&(ut.J+=ut.v),ut.ka=ua-ut.j,ut.U=ut.va-ut.v,ut.T=Ba-ua,Wt=ut.put(ut))}Rt+1!=it.Ic||Sa||(a(it.sa,it.ta-er,br,zr+16*it.R,er),a(it.qa,it.ra-Sr,yr,Kt+8*it.B,Sr),a(it.Ha,it.Ia-Sr,La,Ka+8*it.B,Sr))}if(!Wt)return mr(xt,6,"Output aborted.")}return 1}(T,B)),B.bc!=null&&B.bc(B),te&=1}return te?(T.cb=0,te):0}function as(T,B,te,le,ge){ge=T[B+te+32*le]+(ge>>3),T[B+te+32*le]=-256&ge?0>ge?0:255:ge}function Bo(T,B,te,le,ge,we){as(T,B,0,te,le+ge),as(T,B,1,te,le+we),as(T,B,2,te,le-we),as(T,B,3,te,le-ge)}function xa(T){return(20091*T>>16)+T}function ui(T,B,te,le){var ge,we=0,Se=i(16);for(ge=0;4>ge;++ge){var Ce=T[B+0]+T[B+8],Pe=T[B+0]-T[B+8],$e=(35468*T[B+4]>>16)-xa(T[B+12]),nt=xa(T[B+4])+(35468*T[B+12]>>16);Se[we+0]=Ce+nt,Se[we+1]=Pe+$e,Se[we+2]=Pe-$e,Se[we+3]=Ce-nt,we+=4,B++}for(ge=we=0;4>ge;++ge)Ce=(T=Se[we+0]+4)+Se[we+8],Pe=T-Se[we+8],$e=(35468*Se[we+4]>>16)-xa(Se[we+12]),as(te,le,0,0,Ce+(nt=xa(Se[we+4])+(35468*Se[we+12]>>16))),as(te,le,1,0,Pe+$e),as(te,le,2,0,Pe-$e),as(te,le,3,0,Ce-nt),we++,le+=32}function el(T,B,te,le){var ge=T[B+0]+4,we=35468*T[B+4]>>16,Se=xa(T[B+4]),Ce=35468*T[B+1]>>16;Bo(te,le,0,ge+Se,T=xa(T[B+1]),Ce),Bo(te,le,1,ge+we,T,Ce),Bo(te,le,2,ge-we,T,Ce),Bo(te,le,3,ge-Se,T,Ce)}function tl(T,B,te,le,ge){ui(T,B,te,le),ge&&ui(T,B+16,te,le+4)}function Vi(T,B,te,le){Rl(T,B+0,te,le,1),Rl(T,B+32,te,le+128,1)}function qa(T,B,te,le){var ge;for(T=T[B+0]+4,ge=0;4>ge;++ge)for(B=0;4>B;++B)as(te,le,B,ge,T)}function qi(T,B,te,le){T[B+0]&&gs(T,B+0,te,le),T[B+16]&&gs(T,B+16,te,le+4),T[B+32]&&gs(T,B+32,te,le+128),T[B+48]&&gs(T,B+48,te,le+128+4)}function Ts(T,B,te,le){var ge,we=i(16);for(ge=0;4>ge;++ge){var Se=T[B+0+ge]+T[B+12+ge],Ce=T[B+4+ge]+T[B+8+ge],Pe=T[B+4+ge]-T[B+8+ge],$e=T[B+0+ge]-T[B+12+ge];we[0+ge]=Se+Ce,we[8+ge]=Se-Ce,we[4+ge]=$e+Pe,we[12+ge]=$e-Pe}for(ge=0;4>ge;++ge)Se=(T=we[0+4*ge]+3)+we[3+4*ge],Ce=we[1+4*ge]+we[2+4*ge],Pe=we[1+4*ge]-we[2+4*ge],$e=T-we[3+4*ge],te[le+0]=Se+Ce>>3,te[le+16]=$e+Pe>>3,te[le+32]=Se-Ce>>3,te[le+48]=$e-Pe>>3,le+=64}function fc(T,B,te){var le,ge=B-32,we=ei,Se=255-T[ge-1];for(le=0;le<te;++le){var Ce,Pe=we,$e=Se+T[B-1];for(Ce=0;Ce<te;++Ce)T[B+Ce]=Pe[$e+T[ge+Ce]];B+=32}}function sd(T,B){fc(T,B,4)}function El(T,B){fc(T,B,8)}function id(T,B){fc(T,B,16)}function Dl(T,B){var te;for(te=0;16>te;++te)a(T,B+32*te,T,B-32,16)}function mc(T,B){var te;for(te=16;0<te;--te)s(T,B,T[B-1],16),B+=32}function Al(T,B,te){var le;for(le=0;16>le;++le)s(B,te+32*le,T,16)}function pc(T,B){var te,le=16;for(te=0;16>te;++te)le+=T[B-1+32*te]+T[B+te-32];Al(le>>5,T,B)}function vs(T,B){var te,le=8;for(te=0;16>te;++te)le+=T[B-1+32*te];Al(le>>4,T,B)}function xc(T,B){var te,le=8;for(te=0;16>te;++te)le+=T[B+te-32];Al(le>>4,T,B)}function Tl(T,B){Al(128,T,B)}function Jr(T,B,te){return T+2*B+te+2>>2}function hh(T,B){var te,le=B-32;for(le=new Uint8Array([Jr(T[le-1],T[le+0],T[le+1]),Jr(T[le+0],T[le+1],T[le+2]),Jr(T[le+1],T[le+2],T[le+3]),Jr(T[le+2],T[le+3],T[le+4])]),te=0;4>te;++te)a(T,B+32*te,le,0,le.length)}function If(T,B){var te=T[B-1],le=T[B-1+32],ge=T[B-1+64],we=T[B-1+96];Z(T,B+0,16843009*Jr(T[B-1-32],te,le)),Z(T,B+32,16843009*Jr(te,le,ge)),Z(T,B+64,16843009*Jr(le,ge,we)),Z(T,B+96,16843009*Jr(ge,we,we))}function at(T,B){var te,le=4;for(te=0;4>te;++te)le+=T[B+te-32]+T[B-1+32*te];for(le>>=3,te=0;4>te;++te)s(T,B+32*te,le,4)}function fr(T,B){var te=T[B-1+0],le=T[B-1+32],ge=T[B-1+64],we=T[B-1-32],Se=T[B+0-32],Ce=T[B+1-32],Pe=T[B+2-32],$e=T[B+3-32];T[B+0+96]=Jr(le,ge,T[B-1+96]),T[B+1+96]=T[B+0+64]=Jr(te,le,ge),T[B+2+96]=T[B+1+64]=T[B+0+32]=Jr(we,te,le),T[B+3+96]=T[B+2+64]=T[B+1+32]=T[B+0+0]=Jr(Se,we,te),T[B+3+64]=T[B+2+32]=T[B+1+0]=Jr(Ce,Se,we),T[B+3+32]=T[B+2+0]=Jr(Pe,Ce,Se),T[B+3+0]=Jr($e,Pe,Ce)}function ar(T,B){var te=T[B+1-32],le=T[B+2-32],ge=T[B+3-32],we=T[B+4-32],Se=T[B+5-32],Ce=T[B+6-32],Pe=T[B+7-32];T[B+0+0]=Jr(T[B+0-32],te,le),T[B+1+0]=T[B+0+32]=Jr(te,le,ge),T[B+2+0]=T[B+1+32]=T[B+0+64]=Jr(le,ge,we),T[B+3+0]=T[B+2+32]=T[B+1+64]=T[B+0+96]=Jr(ge,we,Se),T[B+3+32]=T[B+2+64]=T[B+1+96]=Jr(we,Se,Ce),T[B+3+64]=T[B+2+96]=Jr(Se,Ce,Pe),T[B+3+96]=Jr(Ce,Pe,Pe)}function Dr(T,B){var te=T[B-1+0],le=T[B-1+32],ge=T[B-1+64],we=T[B-1-32],Se=T[B+0-32],Ce=T[B+1-32],Pe=T[B+2-32],$e=T[B+3-32];T[B+0+0]=T[B+1+64]=we+Se+1>>1,T[B+1+0]=T[B+2+64]=Se+Ce+1>>1,T[B+2+0]=T[B+3+64]=Ce+Pe+1>>1,T[B+3+0]=Pe+$e+1>>1,T[B+0+96]=Jr(ge,le,te),T[B+0+64]=Jr(le,te,we),T[B+0+32]=T[B+1+96]=Jr(te,we,Se),T[B+1+32]=T[B+2+96]=Jr(we,Se,Ce),T[B+2+32]=T[B+3+96]=Jr(Se,Ce,Pe),T[B+3+32]=Jr(Ce,Pe,$e)}function _r(T,B){var te=T[B+0-32],le=T[B+1-32],ge=T[B+2-32],we=T[B+3-32],Se=T[B+4-32],Ce=T[B+5-32],Pe=T[B+6-32],$e=T[B+7-32];T[B+0+0]=te+le+1>>1,T[B+1+0]=T[B+0+64]=le+ge+1>>1,T[B+2+0]=T[B+1+64]=ge+we+1>>1,T[B+3+0]=T[B+2+64]=we+Se+1>>1,T[B+0+32]=Jr(te,le,ge),T[B+1+32]=T[B+0+96]=Jr(le,ge,we),T[B+2+32]=T[B+1+96]=Jr(ge,we,Se),T[B+3+32]=T[B+2+96]=Jr(we,Se,Ce),T[B+3+64]=Jr(Se,Ce,Pe),T[B+3+96]=Jr(Ce,Pe,$e)}function En(T,B){var te=T[B-1+0],le=T[B-1+32],ge=T[B-1+64],we=T[B-1+96];T[B+0+0]=te+le+1>>1,T[B+2+0]=T[B+0+32]=le+ge+1>>1,T[B+2+32]=T[B+0+64]=ge+we+1>>1,T[B+1+0]=Jr(te,le,ge),T[B+3+0]=T[B+1+32]=Jr(le,ge,we),T[B+3+32]=T[B+1+64]=Jr(ge,we,we),T[B+3+64]=T[B+2+64]=T[B+0+96]=T[B+1+96]=T[B+2+96]=T[B+3+96]=we}function rl(T,B){var te=T[B-1+0],le=T[B-1+32],ge=T[B-1+64],we=T[B-1+96],Se=T[B-1-32],Ce=T[B+0-32],Pe=T[B+1-32],$e=T[B+2-32];T[B+0+0]=T[B+2+32]=te+Se+1>>1,T[B+0+32]=T[B+2+64]=le+te+1>>1,T[B+0+64]=T[B+2+96]=ge+le+1>>1,T[B+0+96]=we+ge+1>>1,T[B+3+0]=Jr(Ce,Pe,$e),T[B+2+0]=Jr(Se,Ce,Pe),T[B+1+0]=T[B+3+32]=Jr(te,Se,Ce),T[B+1+32]=T[B+3+64]=Jr(le,te,Se),T[B+1+64]=T[B+3+96]=Jr(ge,le,te),T[B+1+96]=Jr(we,ge,le)}function Pf(T,B){var te;for(te=0;8>te;++te)a(T,B+32*te,T,B-32,8)}function vc(T,B){var te;for(te=0;8>te;++te)s(T,B,T[B-1],8),B+=32}function al(T,B,te){var le;for(le=0;8>le;++le)s(B,te+32*le,T,8)}function nl(T,B){var te,le=8;for(te=0;8>te;++te)le+=T[B+te-32]+T[B-1+32*te];al(le>>4,T,B)}function Is(T,B){var te,le=4;for(te=0;8>te;++te)le+=T[B+te-32];al(le>>3,T,B)}function Ci(T,B){var te,le=4;for(te=0;8>te;++te)le+=T[B-1+32*te];al(le>>3,T,B)}function gc(T,B){al(128,T,B)}function sl(T,B,te){var le=T[B-te],ge=T[B+0],we=3*(ge-le)+hv[1020+T[B-2*te]-T[B+te]],Se=Nh[112+(we+4>>3)];T[B-te]=ei[255+le+Nh[112+(we+3>>3)]],T[B+0]=ei[255+ge-Se]}function Of(T,B,te,le){var ge=T[B+0],we=T[B+te];return ll[255+T[B-2*te]-T[B-te]]>le||ll[255+we-ge]>le}function od(T,B,te,le){return 4*ll[255+T[B-te]-T[B+0]]+ll[255+T[B-2*te]-T[B+te]]<=le}function Mf(T,B,te,le,ge){var we=T[B-3*te],Se=T[B-2*te],Ce=T[B-te],Pe=T[B+0],$e=T[B+te],nt=T[B+2*te],Et=T[B+3*te];return 4*ll[255+Ce-Pe]+ll[255+Se-$e]>le?0:ll[255+T[B-4*te]-we]<=ge&&ll[255+we-Se]<=ge&&ll[255+Se-Ce]<=ge&&ll[255+Et-nt]<=ge&&ll[255+nt-$e]<=ge&&ll[255+$e-Pe]<=ge}function Xd(T,B,te,le){var ge=2*le+1;for(le=0;16>le;++le)od(T,B+le,te,ge)&&sl(T,B+le,te)}function Uo(T,B,te,le){var ge=2*le+1;for(le=0;16>le;++le)od(T,B+le*te,1,ge)&&sl(T,B+le*te,1)}function bc(T,B,te,le){var ge;for(ge=3;0<ge;--ge)Xd(T,B+=4*te,te,le)}function Eg(T,B,te,le){var ge;for(ge=3;0<ge;--ge)Uo(T,B+=4,te,le)}function Qd(T,B,te,le,ge,we,Se,Ce){for(we=2*we+1;0<ge--;){if(Mf(T,B,te,we,Se))if(Of(T,B,te,Ce))sl(T,B,te);else{var Pe=T,$e=B,nt=te,Et=Pe[$e-2*nt],kt=Pe[$e-nt],xt=Pe[$e+0],Zt=Pe[$e+nt],Rt=Pe[$e+2*nt],it=27*(Wt=hv[1020+3*(xt-kt)+hv[1020+Et-Zt]])+63>>7,ut=18*Wt+63>>7,Wt=9*Wt+63>>7;Pe[$e-3*nt]=ei[255+Pe[$e-3*nt]+Wt],Pe[$e-2*nt]=ei[255+Et+ut],Pe[$e-nt]=ei[255+kt+it],Pe[$e+0]=ei[255+xt-it],Pe[$e+nt]=ei[255+Zt-ut],Pe[$e+2*nt]=ei[255+Rt-Wt]}B+=le}}function Il(T,B,te,le,ge,we,Se,Ce){for(we=2*we+1;0<ge--;){if(Mf(T,B,te,we,Se))if(Of(T,B,te,Ce))sl(T,B,te);else{var Pe=T,$e=B,nt=te,Et=Pe[$e-nt],kt=Pe[$e+0],xt=Pe[$e+nt],Zt=Nh[112+((Rt=3*(kt-Et))+4>>3)],Rt=Nh[112+(Rt+3>>3)],it=Zt+1>>1;Pe[$e-2*nt]=ei[255+Pe[$e-2*nt]+it],Pe[$e-nt]=ei[255+Et+Rt],Pe[$e+0]=ei[255+kt-Zt],Pe[$e+nt]=ei[255+xt-it]}B+=le}}function fh(T,B,te,le,ge,we){Qd(T,B,te,1,16,le,ge,we)}function mh(T,B,te,le,ge,we){Qd(T,B,1,te,16,le,ge,we)}function Dg(T,B,te,le,ge,we){var Se;for(Se=3;0<Se;--Se)Il(T,B+=4*te,te,1,16,le,ge,we)}function Rf(T,B,te,le,ge,we){var Se;for(Se=3;0<Se;--Se)Il(T,B+=4,1,te,16,le,ge,we)}function Ag(T,B,te,le,ge,we,Se,Ce){Qd(T,B,ge,1,8,we,Se,Ce),Qd(te,le,ge,1,8,we,Se,Ce)}function xp(T,B,te,le,ge,we,Se,Ce){Qd(T,B,1,ge,8,we,Se,Ce),Qd(te,le,1,ge,8,we,Se,Ce)}function Ff(T,B,te,le,ge,we,Se,Ce){Il(T,B+4*ge,ge,1,8,we,Se,Ce),Il(te,le+4*ge,ge,1,8,we,Se,Ce)}function dv(T,B,te,le,ge,we,Se,Ce){Il(T,B+4,1,ge,8,we,Se,Ce),Il(te,le+4,1,ge,8,we,Se,Ce)}function Lf(){this.ba=new Xe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vp(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bf(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new O}function Tg(){this.xb=this.a=0,this.l=new As,this.ca=new Xe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bf,this.ab=0,this.gc=o(4,gp),this.Oc=0}function Uf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new As,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ph(T,B,te,le,ge,we,Se){for(T=T==null?0:T[B+0],B=0;B<Se;++B)ge[we+B]=T+te[le+B]&255,T=ge[we+B]}function $f(T,B,te,le,ge,we,Se){var Ce;if(T==null)ph(null,null,te,le,ge,we,Se);else for(Ce=0;Ce<Se;++Ce)ge[we+Ce]=T[B+Ce]+te[le+Ce]&255}function Jd(T,B,te,le,ge,we,Se){if(T==null)ph(null,null,te,le,ge,we,Se);else{var Ce,Pe=T[B+0],$e=Pe,nt=Pe;for(Ce=0;Ce<Se;++Ce)$e=nt+(Pe=T[B+Ce])-$e,nt=te[le+Ce]+(-256&$e?0>$e?0:255:$e)&255,$e=Pe,ge[we+Ce]=nt}}function bp(T,B,te,le){var ge=B.width,we=B.o;if(t(T!=null&&B!=null),0>te||0>=le||te+le>we)return null;if(!T.Cc){if(T.ga==null){var Se;if(T.ga=new Uf,(Se=T.ga==null)||(Se=B.width*B.o,t(T.Gb.length==0),T.Gb=i(Se),T.Uc=0,T.Gb==null?Se=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,Se=1),Se=!Se),!Se){Se=T.ga;var Ce=T.Fa,Pe=T.P,$e=T.qc,nt=T.mb,Et=T.nb,kt=Pe+1,xt=$e-1,Zt=Se.l;if(t(Ce!=null&&nt!=null&&B!=null),Sc[0]=null,Sc[1]=ph,Sc[2]=$f,Sc[3]=Jd,Se.ca=nt,Se.tb=Et,Se.c=B.width,Se.i=B.height,t(0<Se.c&&0<Se.i),1>=$e)B=0;else if(Se.$a=Ce[Pe+0]>>0&3,Se.Z=Ce[Pe+0]>>2&3,Se.Lc=Ce[Pe+0]>>4&3,Pe=Ce[Pe+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Pe)B=0;else if(Zt.put=bt,Zt.ac=ot,Zt.bc=Xt,Zt.ma=Se,Zt.width=B.width,Zt.height=B.height,Zt.Da=B.Da,Zt.v=B.v,Zt.va=B.va,Zt.j=B.j,Zt.o=B.o,Se.$a)e:{t(Se.$a==1),B=wt();t:for(;;){if(B==null){B=0;break e}if(t(Se!=null),Se.mc=B,B.c=Se.c,B.i=Se.i,B.l=Se.l,B.l.ma=Se,B.l.width=Se.c,B.l.height=Se.i,B.a=0,F(B.m,Ce,kt,xt),!st(Se.c,Se.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&Te(B.s)?(Se.ic=1,Ce=B.c*B.i,B.Ta=null,B.Ua=0,B.V=i(Ce),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Se.ic=0,B=St(B,Se.c)),!B))break t;B=1;break e}Se.mc=null,B=0}else B=xt>=Se.c*Se.i;Se=!B}if(Se)return null;T.ga.Lc!=1?T.Ga=0:le=we-te}t(T.ga!=null),t(te+le<=we);e:{if(B=(Ce=T.ga).c,we=Ce.l.o,Ce.$a==0){if(kt=T.rc,xt=T.Vc,Zt=T.Fa,Pe=T.P+1+te*B,$e=T.mb,nt=T.nb+te*B,t(Pe<=T.P+T.qc),Ce.Z!=0)for(t(Sc[Ce.Z]!=null),Se=0;Se<le;++Se)Sc[Ce.Z](kt,xt,Zt,Pe,$e,nt,B),kt=$e,xt=nt,nt+=B,Pe+=B;else for(Se=0;Se<le;++Se)a($e,nt,Zt,Pe,B),kt=$e,xt=nt,nt+=B,Pe+=B;T.rc=kt,T.Vc=xt}else{if(t(Ce.mc!=null),B=te+le,t((Se=Ce.mc)!=null),t(B<=Se.i),Se.C>=B)B=1;else if(Ce.ic||jt(),Ce.ic){Ce=Se.V,kt=Se.Ba,xt=Se.c;var Rt=Se.i,it=(Zt=1,Pe=Se.$/xt,$e=Se.$%xt,nt=Se.m,Et=Se.s,Se.$),ut=xt*Rt,Wt=xt*B,er=Et.wc,Kt=it<Wt?Lt(Et,$e,Pe):null;t(it<=ut),t(B<=Rt),t(Te(Et));t:for(;;){for(;!nt.h&&it<Wt;){if($e&er||(Kt=Lt(Et,$e,Pe)),t(Kt!=null),re(nt),256>(Rt=jr(Kt.G[0],Kt.H[0],nt)))Ce[kt+it]=Rt,++it,++$e>=xt&&($e=0,++Pe<=B&&!(Pe%16)&&Le(Se,Pe));else{if(!(280>Rt)){Zt=0;break t}Rt=rr(Rt-256,nt);var Sr,br=jr(Kt.G[4],Kt.H[4],nt);if(re(nt),!(it>=(br=pr(xt,br=rr(br,nt)))&&ut-it>=Rt)){Zt=0;break t}for(Sr=0;Sr<Rt;++Sr)Ce[kt+it+Sr]=Ce[kt+it+Sr-br];for(it+=Rt,$e+=Rt;$e>=xt;)$e-=xt,++Pe<=B&&!(Pe%16)&&Le(Se,Pe);it<Wt&&$e&er&&(Kt=Lt(Et,$e,Pe))}t(nt.h==W(nt))}Le(Se,Pe>B?B:Pe);break t}!Zt||nt.h&&it<ut?(Zt=0,Se.a=nt.h?5:3):Se.$=it,B=Zt}else B=Ve(Se,Se.V,Se.Ba,Se.c,Se.i,B,Ct);if(!B){le=0;break e}}te+le>=we&&(T.Cc=1),le=1}if(!le)return null;if(T.Cc&&((le=T.ga)!=null&&(le.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+te*ge}function G(T,B,te,le,ge,we){for(;0<ge--;){var Se,Ce=T,Pe=B+(te?1:0),$e=T,nt=B+(te?0:3);for(Se=0;Se<le;++Se){var Et=$e[nt+4*Se];Et!=255&&(Et*=32897,Ce[Pe+4*Se+0]=Ce[Pe+4*Se+0]*Et>>23,Ce[Pe+4*Se+1]=Ce[Pe+4*Se+1]*Et>>23,Ce[Pe+4*Se+2]=Ce[Pe+4*Se+2]*Et>>23)}B+=we}}function be(T,B,te,le,ge){for(;0<le--;){var we;for(we=0;we<te;++we){var Se=T[B+2*we+0],Ce=15&($e=T[B+2*we+1]),Pe=4369*Ce,$e=(240&$e|$e>>4)*Pe>>16;T[B+2*we+0]=(240&Se|Se>>4)*Pe>>16&240|(15&Se|Se<<4)*Pe>>16>>4&15,T[B+2*we+1]=240&$e|Ce}B+=ge}}function Ge(T,B,te,le,ge,we,Se,Ce){var Pe,$e,nt=255;for($e=0;$e<ge;++$e){for(Pe=0;Pe<le;++Pe){var Et=T[B+Pe];we[Se+4*Pe]=Et,nt&=Et}B+=te,Se+=Ce}return nt!=255}function rt(T,B,te,le,ge){var we;for(we=0;we<ge;++we)te[le+we]=T[B+we]>>8}function jt(){Vo=G,Ca=be,ka=Ge,wn=rt}function Vt(T,B,te){A[T]=function(le,ge,we,Se,Ce,Pe,$e,nt,Et,kt,xt,Zt,Rt,it,ut,Wt,er){var Kt,Sr=er-1>>1,br=Ce[Pe+0]|$e[nt+0]<<16,zr=Et[kt+0]|xt[Zt+0]<<16;t(le!=null);var yr=3*br+zr+131074>>2;for(B(le[ge+0],255&yr,yr>>16,Rt,it),we!=null&&(yr=3*zr+br+131074>>2,B(we[Se+0],255&yr,yr>>16,ut,Wt)),Kt=1;Kt<=Sr;++Kt){var La=Ce[Pe+Kt]|$e[nt+Kt]<<16,Ka=Et[kt+Kt]|xt[Zt+Kt]<<16,Sa=br+La+zr+Ka+524296,ya=Sa+2*(La+zr)>>3;yr=ya+br>>1,br=(Sa=Sa+2*(br+Ka)>>3)+La>>1,B(le[ge+2*Kt-1],255&yr,yr>>16,Rt,it+(2*Kt-1)*te),B(le[ge+2*Kt-0],255&br,br>>16,Rt,it+(2*Kt-0)*te),we!=null&&(yr=Sa+zr>>1,br=ya+Ka>>1,B(we[Se+2*Kt-1],255&yr,yr>>16,ut,Wt+(2*Kt-1)*te),B(we[Se+2*Kt+0],255&br,br>>16,ut,Wt+(2*Kt+0)*te)),br=La,zr=Ka}1&er||(yr=3*br+zr+131074>>2,B(le[ge+er-1],255&yr,yr>>16,Rt,it+(er-1)*te),we!=null&&(yr=3*zr+br+131074>>2,B(we[Se+er-1],255&yr,yr>>16,ut,Wt+(er-1)*te)))}}function lr(){ti[ki]=gd,ti[Gf]=Cc,ti[Nc]=hu,ti[wp]=pv,ti[wh]=xv,ti[fd]=Xf,ti[fv]=vv,ti[Sp]=Cc,ti[du]=pv,ti[md]=xv,ti[Yf]=Xf}function wr(T){return T&-16384?0>T?0:255:T>>IC}function Fr(T,B){return wr((19077*T>>8)+(26149*B>>8)-14234)}function ha(T,B,te){return wr((19077*T>>8)-(6419*B>>8)-(13320*te>>8)+8708)}function ca(T,B){return wr((19077*T>>8)+(33050*B>>8)-17685)}function Ia(T,B,te,le,ge){le[ge+0]=Fr(T,te),le[ge+1]=ha(T,B,te),le[ge+2]=ca(T,B)}function In(T,B,te,le,ge){le[ge+0]=ca(T,B),le[ge+1]=ha(T,B,te),le[ge+2]=Fr(T,te)}function Ln(T,B,te,le,ge){var we=ha(T,B,te);B=we<<3&224|ca(T,B)>>3,le[ge+0]=248&Fr(T,te)|we>>5,le[ge+1]=B}function ns(T,B,te,le,ge){var we=240&ca(T,B)|15;le[ge+0]=240&Fr(T,te)|ha(T,B,te)>>4,le[ge+1]=we}function ss(T,B,te,le,ge){le[ge+0]=255,Ia(T,B,te,le,ge+1)}function Js(T,B,te,le,ge){In(T,B,te,le,ge),le[ge+3]=255}function Pl(T,B,te,le,ge){Ia(T,B,te,le,ge),le[ge+3]=255}function $o(T,B){return 0>T?0:T>B?B:T}function Ol(T,B,te){A[T]=function(le,ge,we,Se,Ce,Pe,$e,nt,Et){for(var kt=nt+(-2&Et)*te;nt!=kt;)B(le[ge+0],we[Se+0],Ce[Pe+0],$e,nt),B(le[ge+1],we[Se+0],Ce[Pe+0],$e,nt+te),ge+=2,++Se,++Pe,nt+=2*te;1&Et&&B(le[ge+0],we[Se+0],Ce[Pe+0],$e,nt)}}function yp(T,B,te){return te==0?T==0?B==0?6:5:B==0?4:0:te}function ld(T,B,te,le,ge){switch(T>>>30){case 3:Rl(B,te,le,ge,0);break;case 2:Yn(B,te,le,ge);break;case 1:gs(B,te,le,ge)}}function cd(T,B){var te,le,ge=B.M,we=B.Nb,Se=T.oc,Ce=T.pc+40,Pe=T.oc,$e=T.pc+584,nt=T.oc,Et=T.pc+600;for(te=0;16>te;++te)Se[Ce+32*te-1]=129;for(te=0;8>te;++te)Pe[$e+32*te-1]=129,nt[Et+32*te-1]=129;for(0<ge?Se[Ce-1-32]=Pe[$e-1-32]=nt[Et-1-32]=129:(s(Se,Ce-32-1,127,21),s(Pe,$e-32-1,127,9),s(nt,Et-32-1,127,9)),le=0;le<T.za;++le){var kt=B.ya[B.aa+le];if(0<le){for(te=-1;16>te;++te)a(Se,Ce+32*te-4,Se,Ce+32*te+12,4);for(te=-1;8>te;++te)a(Pe,$e+32*te-4,Pe,$e+32*te+4,4),a(nt,Et+32*te-4,nt,Et+32*te+4,4)}var xt=T.Gd,Zt=T.Hd+le,Rt=kt.ad,it=kt.Hc;if(0<ge&&(a(Se,Ce-32,xt[Zt].y,0,16),a(Pe,$e-32,xt[Zt].f,0,8),a(nt,Et-32,xt[Zt].ea,0,8)),kt.Za){var ut=Se,Wt=Ce-32+16;for(0<ge&&(le>=T.za-1?s(ut,Wt,xt[Zt].y[15],4):a(ut,Wt,xt[Zt+1].y,0,4)),te=0;4>te;te++)ut[Wt+128+te]=ut[Wt+256+te]=ut[Wt+384+te]=ut[Wt+0+te];for(te=0;16>te;++te,it<<=2)ut=Se,Wt=Ce+_h[te],Hi[kt.Ob[te]](ut,Wt),ld(it,Rt,16*+te,ut,Wt)}else if(ut=yp(le,ge,kt.Ob[0]),vd[ut](Se,Ce),it!=0)for(te=0;16>te;++te,it<<=2)ld(it,Rt,16*+te,Se,Ce+_h[te]);for(te=kt.Gc,ut=yp(le,ge,kt.Dd),zo[ut](Pe,$e),zo[ut](nt,Et),it=Rt,ut=Pe,Wt=$e,255&(kt=te>>0)&&(170&kt?Fl(it,256,ut,Wt):co(it,256,ut,Wt)),kt=nt,it=Et,255&(te>>=8)&&(170&te?Fl(Rt,320,kt,it):co(Rt,320,kt,it)),ge<T.Ub-1&&(a(xt[Zt].y,0,Se,Ce+480,16),a(xt[Zt].f,0,Pe,$e+224,8),a(xt[Zt].ea,0,nt,Et+224,8)),te=8*we*T.B,xt=T.sa,Zt=T.ta+16*le+16*we*T.R,Rt=T.qa,kt=T.ra+8*le+te,it=T.Ha,ut=T.Ia+8*le+te,te=0;16>te;++te)a(xt,Zt+te*T.R,Se,Ce+32*te,16);for(te=0;8>te;++te)a(Rt,kt+te*T.B,Pe,$e+32*te,8),a(it,ut+te*T.B,nt,Et+32*te,8)}}function Vf(T,B,te,le,ge,we,Se,Ce,Pe){var $e=[0],nt=[0],Et=0,kt=Pe!=null?Pe.kd:0,xt=Pe??new vp;if(T==null||12>te)return 7;xt.data=T,xt.w=B,xt.ha=te,B=[B],te=[te],xt.gb=[xt.gb];e:{var Zt=B,Rt=te,it=xt.gb;if(t(T!=null),t(Rt!=null),t(it!=null),it[0]=0,12<=Rt[0]&&!r(T,Zt[0],"RIFF")){if(r(T,Zt[0]+8,"WEBP")){it=3;break e}var ut=se(T,Zt[0]+4);if(12>ut||4294967286<ut){it=3;break e}if(kt&&ut>Rt[0]-8){it=7;break e}it[0]=ut,Zt[0]+=12,Rt[0]-=12}it=0}if(it!=0)return it;for(ut=0<xt.gb[0],te=te[0];;){e:{var Wt=T;Rt=B,it=te;var er=$e,Kt=nt,Sr=Zt=[0];if((yr=Et=[Et])[0]=0,8>it[0])it=7;else{if(!r(Wt,Rt[0],"VP8X")){if(se(Wt,Rt[0]+4)!=10){it=3;break e}if(18>it[0]){it=7;break e}var br=se(Wt,Rt[0]+8),zr=1+z(Wt,Rt[0]+12);if(2147483648<=zr*(Wt=1+z(Wt,Rt[0]+15))){it=3;break e}Sr!=null&&(Sr[0]=br),er!=null&&(er[0]=zr),Kt!=null&&(Kt[0]=Wt),Rt[0]+=18,it[0]-=18,yr[0]=1}it=0}}if(Et=Et[0],Zt=Zt[0],it!=0)return it;if(Rt=!!(2&Zt),!ut&&Et)return 3;if(we!=null&&(we[0]=!!(16&Zt)),Se!=null&&(Se[0]=Rt),Ce!=null&&(Ce[0]=0),Se=$e[0],Zt=nt[0],Et&&Rt&&Pe==null){it=0;break}if(4>te){it=7;break}if(ut&&Et||!ut&&!Et&&!r(T,B[0],"ALPH")){te=[te],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{br=T,it=B,ut=te;var yr=xt.gb;er=xt.na,Kt=xt.P,Sr=xt.Sa,zr=22,t(br!=null),t(ut!=null),Wt=it[0];var La=ut[0];for(t(er!=null),t(Sr!=null),er[0]=null,Kt[0]=null,Sr[0]=0;;){if(it[0]=Wt,ut[0]=La,8>La){it=7;break e}var Ka=se(br,Wt+4);if(4294967286<Ka){it=3;break e}var Sa=8+Ka+1&-2;if(zr+=Sa,0<yr&&zr>yr){it=3;break e}if(!r(br,Wt,"VP8 ")||!r(br,Wt,"VP8L")){it=0;break e}if(La[0]<Sa){it=7;break e}r(br,Wt,"ALPH")||(er[0]=br,Kt[0]=Wt+8,Sr[0]=Ka),Wt+=Sa,La-=Sa}}if(te=te[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],it!=0)break}te=[te],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(yr=T,it=B,ut=te,er=xt.gb[0],Kt=xt.Ja,Sr=xt.xa,br=it[0],Wt=!r(yr,br,"VP8 "),zr=!r(yr,br,"VP8L"),t(yr!=null),t(ut!=null),t(Kt!=null),t(Sr!=null),8>ut[0])it=7;else{if(Wt||zr){if(yr=se(yr,br+4),12<=er&&yr>er-12){it=3;break e}if(kt&&yr>ut[0]-8){it=7;break e}Kt[0]=yr,it[0]+=8,ut[0]-=8,Sr[0]=zr}else Sr[0]=5<=ut[0]&&yr[br+0]==47&&!(yr[br+4]>>5),Kt[0]=ut[0];it=0}if(te=te[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],B=B[0],it!=0)break;if(4294967286<xt.Ja)return 3;if(Ce==null||Rt||(Ce[0]=xt.xa?2:1),Se=[Se],Zt=[Zt],xt.xa){if(5>te){it=7;break}Ce=Se,kt=Zt,Rt=we,T==null||5>te?T=0:5<=te&&T[B+0]==47&&!(T[B+4]>>5)?(ut=[0],yr=[0],er=[0],F(Kt=new M,T,B,te),Ft(Kt,ut,yr,er)?(Ce!=null&&(Ce[0]=ut[0]),kt!=null&&(kt[0]=yr[0]),Rt!=null&&(Rt[0]=er[0]),T=1):T=0):T=0}else{if(10>te){it=7;break}Ce=Zt,T==null||10>te||!hr(T,B+3,te-3)?T=0:(kt=T[B+0]|T[B+1]<<8|T[B+2]<<16,Rt=16383&(T[B+7]<<8|T[B+6]),T=16383&(T[B+9]<<8|T[B+8]),1&kt||3<(kt>>1&7)||!(kt>>4&1)||kt>>5>=xt.Ja||!Rt||!T?T=0:(Se&&(Se[0]=Rt),Ce&&(Ce[0]=T),T=1))}if(!T||(Se=Se[0],Zt=Zt[0],Et&&($e[0]!=Se||nt[0]!=Zt)))return 3;Pe!=null&&(Pe[0]=xt,Pe.offset=B-Pe.w,t(4294967286>B-Pe.w),t(Pe.offset==Pe.ha-te));break}return it==0||it==7&&Et&&Pe==null?(we!=null&&(we[0]|=xt.na!=null&&0<xt.na.length),le!=null&&(le[0]=Se),ge!=null&&(ge[0]=Zt),0):it}function Zd(T,B,te){var le=B.width,ge=B.height,we=0,Se=0,Ce=le,Pe=ge;if(B.Da=T!=null&&0<T.Da,B.Da&&(Ce=T.cd,Pe=T.bd,we=T.v,Se=T.j,11>te||(we&=-2,Se&=-2),0>we||0>Se||0>=Ce||0>=Pe||we+Ce>le||Se+Pe>ge))return 0;if(B.v=we,B.j=Se,B.va=we+Ce,B.o=Se+Pe,B.U=Ce,B.T=Pe,B.da=T!=null&&0<T.da,B.da){if(!ye(Ce,Pe,te=[T.ib],we=[T.hb]))return 0;B.ib=te[0],B.hb=we[0]}return B.ob=T!=null&&T.ob,B.Kb=T==null||!T.Sd,B.da&&(B.ob=B.ib<3*le/4&&B.hb<3*ge/4,B.Kb=0),1}function qf(T){if(T==null)return 2;if(11>T.S){var B=T.f.RGBA;B.fb+=(T.height-1)*B.A,B.A=-B.A}else B=T.f.kb,T=T.height,B.O+=(T-1)*B.fa,B.fa=-B.fa,B.N+=(T-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(T-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(T-1)*B.lb,B.lb=-B.lb);return 0}function xh(T,B,te,le){if(le==null||0>=T||0>=B)return 2;if(te!=null){if(te.Da){var ge=te.cd,we=te.bd,Se=-2&te.v,Ce=-2&te.j;if(0>Se||0>Ce||0>=ge||0>=we||Se+ge>T||Ce+we>B)return 2;T=ge,B=we}if(te.da){if(!ye(T,B,ge=[te.ib],we=[te.hb]))return 2;T=ge[0],B=we[0]}}le.width=T,le.height=B;e:{var Pe=le.width,$e=le.height;if(T=le.S,0>=Pe||0>=$e||!(T>=ki&&13>T))T=2;else{if(0>=le.Rd&&le.sd==null){Se=we=ge=B=0;var nt=(Ce=Pe*X1[T])*$e;if(11>T||(we=($e+1)/2*(B=(Pe+1)/2),T==12&&(Se=(ge=Pe)*$e)),($e=i(nt+2*we+Se))==null){T=1;break e}le.sd=$e,11>T?((Pe=le.f.RGBA).eb=$e,Pe.fb=0,Pe.A=Ce,Pe.size=nt):((Pe=le.f.kb).y=$e,Pe.O=0,Pe.fa=Ce,Pe.Fd=nt,Pe.f=$e,Pe.N=0+nt,Pe.Ab=B,Pe.Cd=we,Pe.ea=$e,Pe.W=0+nt+we,Pe.Db=B,Pe.Ed=we,T==12&&(Pe.F=$e,Pe.J=0+nt+2*we),Pe.Tc=Se,Pe.lb=ge)}if(B=1,ge=le.S,we=le.width,Se=le.height,ge>=ki&&13>ge)if(11>ge)T=le.f.RGBA,B&=(Ce=Math.abs(T.A))*(Se-1)+we<=T.size,B&=Ce>=we*X1[ge],B&=T.eb!=null;else{T=le.f.kb,Ce=(we+1)/2,nt=(Se+1)/2,Pe=Math.abs(T.fa),$e=Math.abs(T.Ab);var Et=Math.abs(T.Db),kt=Math.abs(T.lb),xt=kt*(Se-1)+we;B&=Pe*(Se-1)+we<=T.Fd,B&=$e*(nt-1)+Ce<=T.Cd,B=(B&=Et*(nt-1)+Ce<=T.Ed)&Pe>=we&$e>=Ce&Et>=Ce,B&=T.y!=null,B&=T.f!=null,B&=T.ea!=null,ge==12&&(B&=kt>=we,B&=xt<=T.Tc,B&=T.F!=null)}else B=0;T=B?0:2}}return T!=0||te!=null&&te.fd&&(T=qf(le)),T}var Ps=64,eu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vh=24,gh=32,zf=8,oo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(T){return T},A.Predictor2=function(T,B,te){return B[te+0]},A.Predictor3=function(T,B,te){return B[te+1]},A.Predictor4=function(T,B,te){return B[te-1]},A.Predictor5=function(T,B,te){return ft(ft(T,B[te+1]),B[te+0])},A.Predictor6=function(T,B,te){return ft(T,B[te-1])},A.Predictor7=function(T,B,te){return ft(T,B[te+0])},A.Predictor8=function(T,B,te){return ft(B[te-1],B[te+0])},A.Predictor9=function(T,B,te){return ft(B[te+0],B[te+1])},A.Predictor10=function(T,B,te){return ft(ft(T,B[te-1]),ft(B[te+0],B[te+1]))},A.Predictor11=function(T,B,te){var le=B[te+0];return 0>=Tt(le>>24&255,T>>24&255,(B=B[te-1])>>24&255)+Tt(le>>16&255,T>>16&255,B>>16&255)+Tt(le>>8&255,T>>8&255,B>>8&255)+Tt(255&le,255&T,255&B)?le:T},A.Predictor12=function(T,B,te){var le=B[te+0];return(Be((T>>24&255)+(le>>24&255)-((B=B[te-1])>>24&255))<<24|Be((T>>16&255)+(le>>16&255)-(B>>16&255))<<16|Be((T>>8&255)+(le>>8&255)-(B>>8&255))<<8|Be((255&T)+(255&le)-(255&B)))>>>0},A.Predictor13=function(T,B,te){var le=B[te-1];return(dt((T=ft(T,B[te+0]))>>24&255,le>>24&255)<<24|dt(T>>16&255,le>>16&255)<<16|dt(T>>8&255,le>>8&255)<<8|dt(T>>0&255,le>>0&255))>>>0};var Ig=A.PredictorAdd0;A.PredictorAdd1=At,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var jp=A.PredictorAdd2;ve("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var uv,il=A.ColorIndexInverseTransform,Zs=A.MapARGB,tu=A.VP8LColorIndexInverseTransformAlpha,Np=A.MapAlpha,dd=A.VP8LPredictorsAdd=[];dd.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var ru,zi,hi,au,lo,Ml,yc,Rl,Yn,Fl,gs,co,bh,jc,Hf,nu,su,iu,yh,Wf,ou,ud,jh,Kn,Vo,Ca,ka,wn,is=i(511),ol=i(2041),lu=i(225),cu=i(767),hd=0,hv=ol,Nh=lu,ei=cu,ll=is,ki=0,Gf=1,Nc=2,wp=3,wh=4,fd=5,fv=6,Sp=7,du=8,md=9,Yf=10,mv=[2,3,7],cl=[3,3,11],qo=[280,256,256,256,40],Sh=[0,1,1,1,0],pd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ch=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],H1=8,Cp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Os=null,Xn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],za=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Pg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],kh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],W1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vd=[],Hi=[],zo=[],G1=1,Kf=2,Sc=[],ti=[];Vt("UpsampleRgbLinePair",Ia,3),Vt("UpsampleBgrLinePair",In,3),Vt("UpsampleRgbaLinePair",Pl,4),Vt("UpsampleBgraLinePair",Js,4),Vt("UpsampleArgbLinePair",ss,4),Vt("UpsampleRgba4444LinePair",ns,2),Vt("UpsampleRgb565LinePair",Ln,2);var gd=A.UpsampleRgbLinePair,hu=A.UpsampleBgrLinePair,Cc=A.UpsampleRgbaLinePair,pv=A.UpsampleBgraLinePair,xv=A.UpsampleArgbLinePair,Xf=A.UpsampleRgba4444LinePair,vv=A.UpsampleRgb565LinePair,kc=16,Ms=1<<kc-1,fu=-227,gv=482,IC=6,Y1=0,PC=i(256),Rs=i(256),Og=i(256),_p=i(256),Ep=i(gv-fu),Mg=i(gv-fu);Ol("YuvToRgbRow",Ia,3),Ol("YuvToBgrRow",In,3),Ol("YuvToRgbaRow",Pl,4),Ol("YuvToBgraRow",Js,4),Ol("YuvToArgbRow",ss,4),Ol("YuvToRgba4444Row",ns,2),Ol("YuvToRgb565Row",Ln,2);var _h=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bd=[0,2,8],OC=[8,7,6,4,4,2,2,2,1,1,1,1],K1=1;this.WebPDecodeRGBA=function(T,B,te,le,ge){var we=Gf,Se=new Lf,Ce=new Xe;Se.ba=Ce,Ce.S=we,Ce.width=[Ce.width],Ce.height=[Ce.height];var Pe=Ce.width,$e=Ce.height,nt=new Ye;if(nt==null||T==null)var Et=2;else t(nt!=null),Et=Vf(T,B,te,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(Et!=0?Pe=0:(Pe!=null&&(Pe[0]=nt.width[0]),$e!=null&&($e[0]=nt.height[0]),Pe=1),Pe){Ce.width=Ce.width[0],Ce.height=Ce.height[0],le!=null&&(le[0]=Ce.width),ge!=null&&(ge[0]=Ce.height);e:{if(le=new As,(ge=new vp).data=T,ge.w=B,ge.ha=te,ge.kd=1,B=[0],t(ge!=null),((T=Vf(ge.data,ge.w,ge.ha,null,null,null,B,null,ge))==0||T==7)&&B[0]&&(T=4),(B=T)==0){if(t(Se!=null),le.data=ge.data,le.w=ge.w+ge.offset,le.ha=ge.ha-ge.offset,le.put=bt,le.ac=ot,le.bc=Xt,le.ma=Se,ge.xa){if((T=wt())==null){Se=1;break e}if(function(kt,xt){var Zt=[0],Rt=[0],it=[0];t:for(;;){if(kt==null)return 0;if(xt==null)return kt.a=2,0;if(kt.l=xt,kt.a=0,F(kt.m,xt.data,xt.w,xt.ha),!Ft(kt.m,Zt,Rt,it)){kt.a=3;break t}if(kt.xb=Kf,xt.width=Zt[0],xt.height=Rt[0],!st(Zt[0],Rt[0],1,kt,null))break t;return 1}return t(kt.a!=0),0}(T,le)){if(le=(B=xh(le.width,le.height,Se.Oa,Se.ba))==0){t:{le=T;r:for(;;){if(le==null){le=0;break t}if(t(le.s.yc!=null),t(le.s.Ya!=null),t(0<le.s.Wb),t((te=le.l)!=null),t((ge=te.ma)!=null),le.xb!=0){if(le.ca=ge.ba,le.tb=ge.tb,t(le.ca!=null),!Zd(ge.Oa,te,wp)){le.a=2;break r}if(!St(le,te.width)||te.da)break r;if((te.da||qe(le.ca.S))&&jt(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&jt()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!Ne(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Ve(le,le.V,le.Ba,le.c,le.i,te.o,Re))break r;ge.Dc=le.Ma,le=1;break t}t(le.a!=0),le=0}le=!le}le&&(B=T.a)}else B=T.a}else{if((T=new yt)==null){Se=1;break e}if(T.Fa=ge.na,T.P=ge.P,T.qc=ge.Sa,Kr(T,le)){if((B=xh(le.width,le.height,Se.Oa,Se.ba))==0){if(T.Aa=0,te=Se.Oa,t((ge=T)!=null),te!=null){if(0<(Pe=0>(Pe=te.Md)?0:100<Pe?255:255*Pe/100)){for($e=nt=0;4>$e;++$e)12>(Et=ge.pb[$e]).lc&&(Et.ia=Pe*OC[0>Et.lc?0:Et.lc]>>3),nt|=Et.ia;nt&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=te.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}Zo(T,le)||(B=T.a)}}else B=T.a}B==0&&Se.Oa!=null&&Se.Oa.fd&&(B=qf(Se.ba))}Se=B}we=Se!=0?null:11>we?Ce.f.RGBA.eb:Ce.f.kb.y}else we=null;return we};var X1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(A,I){for(var L="",P=0;P<4;P++)L+=String.fromCharCode(A[I++]);return L}function u(A,I){return(A[I+0]<<0|A[I+1]<<8|A[I+2]<<16)>>>0}function h(A,I){return(A[I+0]<<0|A[I+1]<<8|A[I+2]<<16|A[I+3]<<24)>>>0}new c;var f=[0],p=[0],x=[],g=new c,b=e,y=function(A,I){var L={},P=0,O=!1,Y=0,q=0;if(L.frames=[],!function(V,W,ee,re){for(var ne=0;ne<re;ne++)if(V[W+ne]!=ee.charCodeAt(ne))return!0;return!1}(A,I,"RIFF",4)){for(h(A,I+=4),I+=8;I<A.length;){var K=d(A,I),U=h(A,I+=4);I+=4;var J=U+(1&U);switch(K){case"VP8 ":case"VP8L":L.frames[P]===void 0&&(L.frames[P]={}),(Q=L.frames[P]).src_off=O?q:I-8,Q.src_size=Y+U+8,P++,O&&(O=!1,Y=0,q=0);break;case"VP8X":(Q=L.header={}).feature_flags=A[I];var F=I+4;Q.canvas_width=1+u(A,F),F+=3,Q.canvas_height=1+u(A,F),F+=3;break;case"ALPH":O=!0,Y=J+8,q=I-8;break;case"ANIM":(Q=L.header).bgcolor=h(A,I),F=I+4,Q.loop_count=(ie=A)[(M=F)+0]<<0|ie[M+1]<<8,F+=2;break;case"ANMF":var X,Q;(Q=L.frames[P]={}).offset_x=2*u(A,I),I+=3,Q.offset_y=2*u(A,I),I+=3,Q.width=1+u(A,I),I+=3,Q.height=1+u(A,I),I+=3,Q.duration=u(A,I),I+=3,X=A[I++],Q.dispose=1&X,Q.blend=X>>1&1}K!="ANMF"&&(I+=J)}var ie,M;return L}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var S=y.header?y.header:null,w=y.frames?y.frames:null;if(S){S.loop_counter=S.loop_count,f=[S.canvas_height],p=[S.canvas_width];for(var k=0;k<w.length&&w[k].blend!=0;k++);}var C=w[0],D=g.WebPDecodeRGBA(b,C.src_off,C.src_size,p,f);C.rgba=D,C.imgwidth=p[0],C.imgheight=f[0];for(var E=0;E<p[0]*f[0]*4;E++)x[E]=D[E];return this.width=p,this.height=f,this.data=x,this}(function(e){var t=function(){return typeof X3=="function"},r=function(f,p,x,g){var b=4,y=o;switch(g){case e.image_compression.FAST:b=1,y=i;break;case e.image_compression.MEDIUM:b=6,y=l;break;case e.image_compression.SLOW:b=9,y=c}f=a(f,p,x,y);var S=X3(f,{level:b});return e.__addimage__.arrayBufferToBinaryString(S)},a=function(f,p,x,g){for(var b,y,S,w=f.length/p,k=new Uint8Array(f.length+w),C=u(),D=0;D<w;D+=1){if(S=D*p,b=f.subarray(S,S+p),g)k.set(g(b,x,y),S+D);else{for(var E,A=C.length,I=[];E<A;E+=1)I[E]=C[E](b,x,y);var L=h(I.concat());k.set(I[L],S+D)}y=b}return k},s=function(f){var p=Array.apply([],f);return p.unshift(0),p},i=function(f,p){var x,g=[],b=f.length;g[0]=1;for(var y=0;y<b;y+=1)x=f[y-p]||0,g[y+1]=f[y]-x+256&255;return g},o=function(f,p,x){var g,b=[],y=f.length;b[0]=2;for(var S=0;S<y;S+=1)g=x&&x[S]||0,b[S+1]=f[S]-g+256&255;return b},l=function(f,p,x){var g,b,y=[],S=f.length;y[0]=3;for(var w=0;w<S;w+=1)g=f[w-p]||0,b=x&&x[w]||0,y[w+1]=f[w]+256-(g+b>>>1)&255;return y},c=function(f,p,x){var g,b,y,S,w=[],k=f.length;w[0]=4;for(var C=0;C<k;C+=1)g=f[C-p]||0,b=x&&x[C]||0,y=x&&x[C-p]||0,S=d(g,b,y),w[C+1]=f[C]-S+256&255;return w},d=function(f,p,x){if(f===p&&p===x)return f;var g=Math.abs(p-x),b=Math.abs(f-x),y=Math.abs(f+p-x-x);return g<=b&&g<=y?f:b<=y?p:x},u=function(){return[s,i,o,l,c]},h=function(f){var p=f.map(function(x){return x.reduce(function(g,b){return g+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(f,p,x,g){var b,y,S,w,k,C,D,E,A,I,L,P,O,Y,q,K=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(S=new uUe(f)).imgData,y=S.bits,b=S.colorSpace,k=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){A=(E=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,L=new Uint8Array(A*S.colors),I=new Uint8Array(A);var J,F=S.pixelBitlength-S.bits;for(Y=0,q=0;Y<A;Y++){for(O=E[Y],J=0;J<F;)L[q++]=O>>>J&255,J+=S.bits;I[Y]=O>>>J&255}}if(S.bits===16){A=(E=new Uint32Array(S.decodePixels().buffer)).length,L=new Uint8Array(A*(32/S.pixelBitlength)*S.colors),I=new Uint8Array(A*(32/S.pixelBitlength)),P=S.colors>1,Y=0,q=0;for(var X=0;Y<A;)O=E[Y++],L[q++]=O>>>0&255,P&&(L[q++]=O>>>16&255,O=E[Y++],L[q++]=O>>>0&255),I[X++]=O>>>16&255;y=8}g!==e.image_compression.NONE&&t()?(f=r(L,S.width*S.colors,S.colors,g),D=r(I,S.width,1,g)):(f=L,D=I,K=void 0)}if(S.colorType===3&&(b=this.color_spaces.INDEXED,C=S.palette,S.transparency.indexed)){var Q=S.transparency.indexed,ie=0;for(Y=0,A=Q.length;Y<A;++Y)ie+=Q[Y];if((ie/=255)===A-1&&Q.indexOf(0)!==-1)w=[Q.indexOf(0)];else if(ie!==A){for(E=S.decodePixels(),I=new Uint8Array(E.length),Y=0,A=E.length;Y<A;Y++)I[Y]=Q[E[Y]];D=r(I,S.width,1)}}var M=function(V){var W;switch(V){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(g);return K===this.decode.FLATE_DECODE&&(U="/Predictor "+M+" "),U+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:x,data:f,index:p,filter:K,decodeParameters:U,transparency:w,palette:C,sMask:D,predictor:M,width:S.width,height:S.height,bitsPerComponent:y,colorSpace:b}}}})(ta.API),function(e){e.processGIF89A=function(t,r,a,s){var i=new hUe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new HD(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)},e.processGIF87A=e.processGIF89A}(ta.API),Ed.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ed.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){An.log("bit decode error:"+r)}},Ed.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ed.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ed.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ed.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Ed.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Ed.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Ed.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},Ed.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,s){var i=new Ed(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new HD(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}}(ta.API),oU.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,s){var i=new oU(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new HD(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}}(ta.API),ta.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=a[d],h=a[d+1],f=a[d+2],p=a[d+3];i[l++]=u,i[l++]=h,i[l++]=f,o[c++]=p}var x=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ta.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},e0=ta.API,qN=e0.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,f=0,p=e.length,x=0,g=l[0]||c,b=[];for(r=0;r<p;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(f=h&&$a(d[a])==="object"&&!isNaN(parseInt(d[a][x],10))?d[a][x]/u:0,b.push((l[a]||g)/c+f)),x=a;return b},aU=e0.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return e0.processArabic&&(e=e0.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:qN.apply(this,arguments).reduce(function(i,o){return i+o},0)},nU=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},sU=function(e,t,r){r||(r={});var a,s,i,o,l,c,d,u=[],h=[u],f=r.textIndent||0,p=0,x=0,g=e.split(" "),b=qN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),S=[];g.map(function(k){(k=k.split(/\s*\n/)).length>1?S=S.concat(k.map(function(C,D){return(D&&C.length?`
`:"")+C})):S.push(k[0])}),g=S,c=aU.apply(this,[y,r])}for(i=0,o=g.length;i<o;i++){var w=0;if(a=g[i],c&&a[0]==`
`&&(a=a.substr(1),w=1),f+p+(x=(s=qN.apply(this,[a,r])).reduce(function(k,C){return k+C},0))>t||w){if(x>t){for(l=nU.apply(this,[a,s,t-(f+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);x=s.slice(a.length-(u[0]?u[0].length:0)).reduce(function(k,C){return k+C},0)}else u=[a];h.push(u),f=x+c,p=b}else u.push(a),f+=p+x,p=b}return d=c?function(k,C){return(C?y:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},e0.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(sU.apply(this,[a[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var f,p,x,g,b=["{"];for(var y in h){if(f=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+a[p.slice(-1)]),typeof f=="number")f<0?(x=i(f).slice(3),g="-"):(x=i(f).slice(2),g=""),x=g+x.slice(0,-1)+a[x.slice(-1)];else{if($a(f)!=="object")throw new Error("Don't know what to do with value type "+$a(f)+".");x=o(f)}b.push(p+x)}return b.push("}"),b.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,x,g,b={},y=1,S=b,w=[],k="",C="",D=h.length-1,E=1;E<D;E+=1)(g=h[E])=="'"?f?(x=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(w.push([S,x]),S={},x=void 0):g=="}"?((p=w.pop())[0][p[1]]=S,x=void 0,S=p[0]):g=="-"?y=-1:x===void 0?r.hasOwnProperty(g)?(k+=r[g],x=parseInt(k,16)*y,y=1,k=""):k+=g:r.hasOwnProperty(g)?(C+=r[g],S[x]=parseInt(C,16)*y,y=1,x=void 0,C=""):C+=g;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var f=h.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var x=d.Unicode[f.postScriptName];x&&(f.metadata.Unicode.encoding=x,f.encoding=x.codePages[0])}])}(ta.API),function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(hy(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])}(ta),function(e){function t(){return(na.canvg?Promise.resolve(na.canvg):H3(()=>import("./index.es-Bl8WGsBZ.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ta.API.addSvgAsImage=function(r,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw An.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw An.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(x){return x.fromString(h,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),a,s,i,o,c,d)})}}(),ta.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},ta.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(x,g){var b,y=!1;for(b=0;b<x.length;b+=1)x[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if($a(e)==="object"){for(s in e)if(i=e[s],f(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&f(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,g=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?g.push("/"+x+" /"+r[x].value):g.push("/"+x+" "+r[x].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ta.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=i.length;h<f;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(i).sort(function(p,x){return p-x})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",x=0;x<f.length;x++)p+=String.fromCharCode(f[x]);var g=d();u({data:p,addLength1:!0,objectId:g}),c("endobj");var b=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+l0(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+l0(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+l0(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var x=d();u({data:f,addLength1:!0,objectId:x}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+l0(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+l0(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},f=h.pdfEscape,p=h.activeFontKey,x=h.fonts,g=p,b="",y=0,S="",w=x[g].encoding;if(x[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(S=l,g=p,Array.isArray(l)&&(S=l[0]),y=0;y<S.length;y+=1)x[g].metadata.hasOwnProperty("cmap")&&(o=x[g].metadata.cmap.unicode.codeMap[S[y].charCodeAt(0)]),o||S[y].charCodeAt(0)<256&&x[g].metadata.hasOwnProperty("Unicode")?b+=S[y]:b+="";var k="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?k=f(b,g).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(k=r(b,x[g])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(ta),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ta.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,u,h=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,w=0;this.__bidiEngine__={};var k=function(P){var O=P.charCodeAt(),Y=O>>8,q=g[Y];return q!==void 0?h[256*q+(255&O)]:Y===252||Y===253?"AL":y.test(Y)?"L":Y===8?"R":"N"},C=function(P){for(var O,Y=0;Y<P.length;Y++){if((O=k(P.charAt(Y)))==="L")return!1;if(O==="R")return!0}return!1},D=function(P,O,Y,q){var K,U,J,F,X=O[q];switch(X){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(X="AN");break;case"AL":S=!0,X="R";break;case"WS":X="N";break;case"CS":q<1||q+1>=O.length||(K=Y[q-1])!=="EN"&&K!=="AN"||(U=O[q+1])!=="EN"&&U!=="AN"?X="N":S&&(U="AN"),X=U===K?U:"N";break;case"ES":X=(K=q>0?Y[q-1]:"B")==="EN"&&q+1<O.length&&O[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&Y[q-1]==="EN"){X="EN";break}if(S){X="N";break}for(J=q+1,F=O.length;J<F&&O[J]==="ET";)J++;X=J<F&&O[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(F=O.length,J=q+1;J<F&&O[J]==="NSM";)J++;if(J<F){var Q=P[q],ie=Q>=1425&&Q<=2303||Q===64286;if(K=O[J],ie&&(K==="R"||K==="AL")){X="R";break}}}X=q<1||(K=O[q-1])==="B"?"N":Y[q-1];break;case"B":S=!1,s=!0,X=w;break;case"S":i=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":X="N"}return X},E=function(P,O,Y){var q=P.split("");return Y&&A(q,Y,{hiLevel:w}),q.reverse(),O&&O.reverse(),q.join("")},A=function(P,O,Y){var q,K,U,J,F,X=-1,Q=P.length,ie=0,M=[],V=w?p:f,W=[];for(S=!1,s=!1,i=!1,K=0;K<Q;K++)W[K]=k(P[K]);for(U=0;U<Q;U++){if(F=ie,M[U]=D(P,W,M,U),q=240&(ie=V[F][x[M[U]]]),ie&=15,O[U]=J=V[ie][5],q>0)if(q===16){for(K=X;K<U;K++)O[K]=1;X=-1}else X=-1;if(V[ie][6])X===-1&&(X=U);else if(X>-1){for(K=X;K<U;K++)O[K]=J;X=-1}W[U]==="B"&&(O[U]=0),Y.hiLevel|=J}i&&function(ee,re,ne){for(var ce=0;ce<ne;ce++)if(ee[ce]==="S"){re[ce]=w;for(var ae=ce-1;ae>=0&&ee[ae]==="WS";ae--)re[ae]=w}}(W,O,Q)},I=function(P,O,Y,q,K){if(!(K.hiLevel<P)){if(P===1&&w===1&&!s)return O.reverse(),void(Y&&Y.reverse());for(var U,J,F,X,Q=O.length,ie=0;ie<Q;){if(q[ie]>=P){for(F=ie+1;F<Q&&q[F]>=P;)F++;for(X=ie,J=F-1;X<J;X++,J--)U=O[X],O[X]=O[J],O[J]=U,Y&&(U=Y[X],Y[X]=Y[J],Y[J]=U);ie=F}ie++}}},L=function(P,O,Y){var q=P.split(""),K={hiLevel:w};return Y||(Y=[]),A(q,Y,K),function(U,J,F){if(F.hiLevel!==0&&u)for(var X,Q=0;Q<U.length;Q++)J[Q]===1&&(X=b.indexOf(U[Q]))>=0&&(U[Q]=b[X+1])}(q,Y,K),I(2,q,O,Y,K),I(1,q,O,Y,K),q.join("")};return this.__bidiEngine__.doBidiReorder=function(P,O,Y){if(function(K,U){if(U)for(var J=0;J<K.length;J++)U[J]=J;l===void 0&&(l=C(K)),d===void 0&&(d=C(K))}(P,O),o||!c||d)if(o&&c&&l^d)w=l?1:0,P=E(P,O,Y);else if(!o&&c&&d)w=l?1:0,P=L(P,O,Y),P=E(P,O);else if(!o||l||c||d){if(o&&!c&&l^d)P=E(P,O),l?(w=0,P=L(P,O,Y)):(w=1,P=L(P,O,Y),P=E(P,O));else if(o&&l&&!c&&d)w=1,P=L(P,O,Y),P=E(P,O);else if(!o&&!c&&l^d){var q=u;l?(w=1,P=L(P,O,Y),w=0,u=!1,P=L(P,O,Y),u=q):(w=0,P=L(P,O,Y),P=E(P,O),w=1,u=!1,P=L(P,O,Y),u=q,P=E(P,O))}}else w=0,P=L(P,O,Y);else w=l?1:0,P=L(P,O,Y);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,d=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(ta),ta.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new np(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _Ue(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new fUe(this.contents),this.head=new pUe(this),this.name=new yUe(this),this.cmap=new LQ(this),this.toUnicode={},this.hhea=new xUe(this),this.maxp=new jUe(this),this.hmtx=new NUe(this),this.post=new gUe(this),this.os2=new vUe(this),this.loca=new kUe(this),this.glyf=new wUe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var Kd,np=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e}(),fUe=function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,c,d,u,h,f,p,x,g;for(g in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(s=new np).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(o),s.writeShort(u),i=16*p,d=s.pos+i,l=null,x=[],r)for(f=r[g],s.writeString(g),s.writeInt(e(f)),s.writeInt(d),s.writeInt(f.length),x=x.concat(f),g==="head"&&(l=d),d+=f.length;d%4;)x.push(0),d++;return s.write(x),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=BQ.call(r);r.length%4;)r.push(0);for(i=new np(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t}(),mUe={}.hasOwnProperty,uh=function(e,t){for(var r in t)mUe.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};Kd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var pUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new np).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),lU=function(){function e(t,r){var a,s,i,o,l,c,d,u,h,f,p,x,g,b,y,S,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),f=p/2,t.pos+=6,i=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),t.pos+=2,g=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),d=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),u=function(){var k,C;for(C=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)C.push(t.readUInt16());return C}(),s=(this.length-t.pos+this.offset)/2,l=function(){var k,C;for(C=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)C.push(t.readUInt16());return C}(),c=y=0,w=i.length;y<w;c=++y)for(b=i[c],a=S=x=g[c];x<=b?S<=b:S>=b;a=x<=b?++S:--S)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-x)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=h}return e.encode=function(t,r){var a,s,i,o,l,c,d,u,h,f,p,x,g,b,y,S,w,k,C,D,E,A,I,L,P,O,Y,q,K,U,J,F,X,Q,ie,M,V,W,ee,re,ne,ce,ae,Z,de,z;switch(q=new np,o=Object.keys(t).sort(function(se,Ne){return se-Ne}),r){case"macroman":for(g=0,b=function(){var se=[];for(x=0;x<256;++x)se.push(0);return se}(),S={0:0},i={},K=0,X=o.length;K<X;K++)S[ae=t[s=o[K]]]==null&&(S[ae]=++g),i[s]={old:t[s],new:S[t[s]]},b[s]=S[t[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(b),{charMap:i,subtable:q.data,maxGlyphID:g+1};case"unicode":for(O=[],h=[],w=0,S={},a={},y=d=null,U=0,Q=o.length;U<Q;U++)S[C=t[s=o[U]]]==null&&(S[C]=++w),a[s]={old:C,new:S[C]},l=S[C]-s,y!=null&&l===d||(y&&h.push(y),O.push(s),d=l),y=s;for(y&&h.push(y),h.push(65535),O.push(65535),L=2*(I=O.length),A=2*Math.pow(Math.log(I)/Math.LN2,2),f=Math.log(A/2)/Math.LN2,E=2*I-A,c=[],D=[],p=[],x=J=0,ie=O.length;J<ie;x=++J){if(P=O[x],u=h[x],P===65535){c.push(0),D.push(0);break}if(P-(Y=a[P].new)>=32768)for(c.push(0),D.push(2*(p.length+I-x)),s=F=P;P<=u?F<=u:F>=u;s=P<=u?++F:--F)p.push(a[s].new);else c.push(Y-P),D.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*I+2*p.length),q.writeUInt16(0),q.writeUInt16(L),q.writeUInt16(A),q.writeUInt16(f),q.writeUInt16(E),ne=0,M=h.length;ne<M;ne++)s=h[ne],q.writeUInt16(s);for(q.writeUInt16(0),ce=0,V=O.length;ce<V;ce++)s=O[ce],q.writeUInt16(s);for(Z=0,W=c.length;Z<W;Z++)l=c[Z],q.writeUInt16(l);for(de=0,ee=D.length;de<ee;de++)k=D[de],q.writeUInt16(k);for(z=0,re=p.length;z<re;z++)g=p[z],q.writeUInt16(g);return{charMap:a,subtable:q.data,maxGlyphID:w+1}}},e}(),LQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new lU(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var s,i;return a==null&&(a="macroman"),s=lU.encode(r,a),(i=new np).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),xUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),vUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s}(),this.charRange=function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),gUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="post",t.prototype.parse=function(r){var a,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),bUe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},yUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="name",t.prototype.parse=function(r){var a,s,i,o,l,c,d,u,h,f,p;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,f=s.length;h<f;o=++h)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new bUe(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),jUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),NUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,f,p;for(p=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),BQ=[].slice,wUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,s,i,o,l,c,d,u,h,f;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,l=(c=new np(a.read(i))).readShort(),u=c.readShort(),f=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new CUe(c,u,f,d,h):new SUe(c,l,u,f,d,h),this.cache[r]))},t.prototype.encode=function(r,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),SUe=function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),CUe=function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new np(BQ.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),kUe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uh(t,Kd),t.prototype.tag="loca",t.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},t}(),_Ue=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,c,d,u,h,f,p,x,g,b,y;for(s in a=LQ.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=a.charMap)p[(c=y[s]).old]=c.new;for(x in f=a.maxGlyphID,o)x in p||(p[x]=f++);return u=function(S){var w,k;for(w in k={},S)k[S[w]]=w;return k}(p),h=Object.keys(u).sort(function(S,w){return S-w}),g=function(){var S,w,k;for(k=[],S=0,w=h.length;S<w;S++)l=h[S],k.push(u[l]);return k}(),i=this.font.glyf.encode(o,g,p),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();ta.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function EUe(){const[e,t]=j.useState([]),[r,a]=j.useState([]),[s,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState([]),[u,h]=j.useState(!1),[f,p]=j.useState(!1),[x,g]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState([]),[k,C]=j.useState(0),[D,E]=j.useState(0),[A,I]=j.useState(0),[L,P]=j.useState(0),[O,Y]=j.useState(1),[q,K]=j.useState({salary:"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString()}),[U,J]=j.useState(localStorage.getItem("activeRole")||"");JSON.parse(localStorage.getItem("user"));const F=["January","February","March","April","May","June","July","August","September","October","November","December"],X=[],Q=new Date().getFullYear();for(let he=Q-5;he<=Q+1;he++)X.push(he.toString());j.useEffect(()=>{M(),V(),ie()},[]);const ie=async()=>{try{const he=await Oe.get("/api/departments");d(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Error fetching departments:",he)}},M=async()=>{try{const he=localStorage.getItem("activeRole")||"";let ve;he==="SuperAdmin"?ve=await Oe.get("/api/faculties"):ve=await Oe.get("/api/faculties"),t(Array.isArray(ve.data)?ve.data:[])}catch(he){console.error("Error fetching faculties:",he)}},V=async()=>{try{const he=await Oe.get("/api/salary-records");a(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Error fetching salary records:",he)}},W=async he=>{try{const ve=await Oe.get(`/api/salary-records/employee/${he}`);w(Array.isArray(ve.data)?ve.data:[])}catch(ve){console.error("Error fetching employee salary history:",ve),w([])}},ee=he=>{const ve=he.joinDate||new Date().toISOString().split("T")[0],pe=new Date(ve),De=pe.toLocaleString("en-US",{month:"long"}),Ke=pe.getFullYear().toString();g(he),K({salary:he.salary||"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString(),minDate:ve,joinMonth:De,joinYear:Ke}),P(0),C(0),E(0),I(0),Y(1),h(!0),ne(he.employeeId,new Date().toLocaleString("en-US",{month:"long"}),new Date().getFullYear().toString())},re=he=>{g(he),y(he.employeeId),W(he.employeeId),p(!0)},ne=async(he,ve,pe)=>{try{const De=F.indexOf(ve)+1,Ke=De<10?`0${De}`:`${De}`,Nt=await Oe.get("/api/salary-records/leave-count",{params:{employeeId:he,month:Ke,year:pe}});C(Nt.data.leaveCount||0),E(Nt.data.sundayCount||0),I(Nt.data.totalDays||0)}catch(De){console.error("Error fetching leave count:",De),C(0),E(0),I(0)}},ce=()=>{h(!1),g(null)},ae=()=>{p(!1),y(null),g(null),w([])},Z=he=>{K({...q,[he.target.name]:he.target.value})},de=he=>{const ve=he.target.value;K({...q,month:ve}),x&&ne(x.employeeId,ve,q.year)},z=he=>{const ve=he.target.value;if(ve===q.joinYear){const pe=F.indexOf(q.month),De=F.indexOf(q.joinMonth);if(pe<De){K({...q,year:ve,month:q.joinMonth}),x&&ne(x.employeeId,q.joinMonth,ve);return}}K({...q,year:ve}),x&&ne(x.employeeId,q.month,ve)},se=he=>{P(he.target.value)},Ne=he=>{const ve=parseInt(he.target.value);Y(isNaN(ve)||ve<0?0:ve)},ue=()=>Math.max(0,k-O),oe=()=>{const he=ue()*L;return q.salary-he},ye=async()=>{try{const pe=ue(),De=pe*L,Ke=oe();await Oe.post("/api/salary-records/save",{facultyId:x._id,employeeId:x.employeeId,month:q.month,year:q.year,salary:q.salary,leaveCount:k,sundayCount:D,totalLeaveCount:A,paidLeaveCount:O,deductibleDays:pe,deductionPerDay:L,totalDeduction:De,payableSalary:Ke,date:q.date});var he=document.getElementById("standard-modal"),ve=bootstrap.Modal.getInstance(he);ve||(ve=new bootstrap.Modal(he)),ve.hide(),V(),alert("Salary saved successfully!"),ce()}catch(pe){pe.response&&pe.response.status===400?alert("Salary already recorded for this employee in the same month!"):console.error("Error saving salary:",pe)}},je=async(he,ve,pe,De=null)=>{const Ke=De?{firstName:De.facultyId?.firstName||"Unknown",lastName:De.facultyId?.lastName||"Unknown",employeeId:De.employeeId,department:De.facultyId?.department||"Unknown"}:x;if(!Ke)throw new Error("Employee information is required");try{const Nt=De?De.date:q.date,Je=De?De.month:q.month,Qe=De?De.year:q.year,Ue=De?De.salary:q.salary,qe=De?De.leaveCount:k,mt=De?De.sundayCount||0:D,Ie=De?De.paidLeaveCount||0:O,Xe=De?De.deductibleDays||0:ve,Ye=De?De.deductionPerDay||0:L,lt=De?De.totalDeduction||0:pe,Mt=De?De.payableSalary:he,Ae=new ta;Ae.setFontSize(16),Ae.setFont(void 0,"bold"),Ae.text("Your Company Name",Ae.internal.pageSize.width/2,20,{align:"center"}),Ae.setFontSize(10),Ae.setFont(void 0,"normal"),Ae.text("Company Address Line 1",Ae.internal.pageSize.width/2,30,{align:"center"}),Ae.text("Company Address Line 2",Ae.internal.pageSize.width/2,35,{align:"center"}),Ae.text("Phone: (123) 456-7890 | Email: company@email.com",Ae.internal.pageSize.width/2,40,{align:"center"}),Ae.setLineWidth(.5),Ae.line(20,45,190,45),Ae.setFontSize(14),Ae.setFont(void 0,"bold"),Ae.text("Salary Receipt",Ae.internal.pageSize.width/2,55,{align:"center"}),Ae.setFontSize(10),Ae.setFont(void 0,"normal");const ke=new Date(Nt),ot=`${String(ke.getDate()).padStart(2,"0")}-${String(ke.getMonth()+1).padStart(2,"0")}-${ke.getFullYear()}`;Ae.text(`Date: ${ot}`,170,55,{align:"right"}),Ae.setFontSize(11),Ae.text("Employee Name:",20,70),Ae.text(`${Ke.firstName} ${Ke.lastName}`,80,70),Ae.text("Employee ID:",20,77),Ae.text(`${Ke.employeeId}`,80,77),Ae.text("Department:",20,84),Ae.text(`${Ke.department}`,80,84),Ae.text("Month & Year:",20,91),Ae.text(`${Je} ${Qe}`,80,91),Ae.setLineWidth(.1),Ae.line(20,105,190,105),Ae.setFont(void 0,"bold"),Ae.text("Description",25,112),Ae.text("Amount",170,112),Ae.line(20,115,190,115),Ae.setFont(void 0,"normal"),Ae.text("Basic Salary",25,122),Ae.text(`${Ue?.toFixed(2)}/-`,185,122,{align:"right"}),Ae.text("Leave Information",25,129),Ae.text("Paid Leave",25,136),Ae.text(`${Ie}`,185,136,{align:"right"}),Ae.text("Deductible Leave Days",25,143),Ae.text(`${Xe}`,185,143,{align:"right"}),Ae.text("Deduction Per Day",25,150),Ae.text(`${Ye.toFixed(2)}/-`,185,150,{align:"right"}),Ae.line(20,155,190,155),Ae.text("Total Deduction",25,162),Ae.text(`${lt.toFixed(2)}/-`,185,162,{align:"right"}),Ae.line(20,167,190,167),Ae.setFont(void 0,"bold"),Ae.text("Payable Salary",25,174),Ae.text(`${Mt.toFixed(2)}/-`,185,174,{align:"right"}),Ae.line(20,178,190,178),Ae.setFontSize(8),Ae.text("This is a computer-generated document. No signature required.",Ae.internal.pageSize.width/2,270,{align:"center"}),Ae.save(`Salary_Receipt_${Ke.firstName}_${Je}_${Qe}.pdf`)}catch(Nt){throw console.error("Error generating salary receipt:",Nt),new Error(`Failed to generate salary receipt: ${Nt.message}`)}},Me=async he=>{if(!he)return;const ve=he.deductibleDays||0,pe=he.totalDeduction||0,De=he.payableSalary||he.salary;try{await je(De,ve,pe,he)}catch(Ke){console.error("Error downloading salary receipt:",Ke),alert("Failed to generate salary receipt. Please try again.")}},He=e.filter(he=>{const ve=`${he.firstName} ${he.lastName}`.toLowerCase(),pe=s.toLowerCase(),De=!s||ve.includes(pe)||he.employeeId&&he.employeeId.toLowerCase().includes(pe)||he.phone&&he.phone.includes(pe),Ke=!o||he.department===o;return De&&Ke}),[et,ft]=j.useState(1),[Be]=j.useState(5),dt=he=>ft(he),Tt=et*Be,At=Tt-Be,qt=He.slice(At,Tt),xe=Math.ceil(He.length/Be);return n.jsx("div",{className:"contanier",children:n.jsx("div",{className:"d-flex justify-content-between align-items-center",children:n.jsxs("div",{className:"content container-fluid",children:[n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsx("div",{className:"page-header",children:n.jsx("div",{className:"row align-items-center",children:n.jsx("div",{className:"col-md-12",children:n.jsx("h3",{className:"page-title",children:"Payroll Management"})})})})})}),n.jsx("div",{className:"row",children:n.jsx("div",{className:"col-md-12",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Search"}),n.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, employee ID, phone",value:s,onChange:he=>i(he.target.value)})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"All Departments"}),n.jsxs("select",{className:"form-select",value:o,onChange:he=>l(he.target.value),children:[n.jsx("option",{value:"",children:"All Departments"}),c.map(he=>n.jsx("option",{value:he.name,children:he.departmentName},he._id))]})]})})]})}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-hover table-bordered",children:[n.jsx("thead",{className:"thead-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employee ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Base Salary"}),n.jsx("th",{className:"text-center",children:"Actions"})]})}),n.jsx("tbody",{children:qt.length>0?qt.map(he=>n.jsxs("tr",{children:[n.jsx("td",{children:he.employeeId}),n.jsxs("td",{children:[he.firstName," ",he.lastName]}),n.jsx("td",{children:he.role}),n.jsx("td",{children:he.department}),n.jsx("td",{children:n.jsxs("strong",{children:["",he.salary]})}),n.jsx("td",{className:"text-center",children:n.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[n.jsx("button",{className:"btn btn-primary btn-icon btn-sm",onClick:()=>ee(he),"data-bs-toggle":"modal","data-bs-target":"#standard-modal",title:"Generate Payslip",children:n.jsx("i",{className:"ti ti-file-dollar"})}),n.jsx("button",{className:"btn btn-secondary btn-icon btn-sm",onClick:()=>re(he),"data-bs-toggle":"modal","data-bs-target":"#history-modal",title:"View History",children:n.jsx("i",{className:"ti ti-history"})})]})})]},he._id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"text-center",children:"No employees found matching your criteria"})})})]})}),n.jsx("div",{className:"col-md-12",children:n.jsx("nav",{"aria-label":"Page navigation",children:n.jsxs("ul",{className:"pagination justify-content-left",children:[n.jsx("li",{className:`page-item ${et===1?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(et-1),disabled:et===1,children:""})}),(()=>{const he=et,ve=xe,pe=[];if(ve<=3)for(let De=1;De<=ve;De++)pe.push(n.jsx("li",{className:`page-item ${he===De?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(De),children:De})},De));else pe.push(n.jsx("li",{className:`page-item ${he===1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(1),children:"1"})},1)),he<=2&&pe.push(n.jsx("li",{className:`page-item ${he===2?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(2),children:"2"})},2)),he>3&&pe.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"start-ellipsis")),he>2&&he<ve-1&&pe.push(n.jsx("li",{className:"page-item active",children:n.jsx("button",{className:"page-link",onClick:()=>dt(he),children:he})},he)),he<ve-2&&pe.push(n.jsx("li",{className:"page-item disabled",children:n.jsx("span",{className:"page-link",children:"..."})},"end-ellipsis")),he>=ve-1&&pe.push(n.jsx("li",{className:`page-item ${he===ve-1?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(ve-1),children:ve-1})},ve-1)),ve>1&&pe.push(n.jsx("li",{className:`page-item ${he===ve?"active":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(ve),children:ve})},ve));return pe})(),n.jsx("li",{className:`page-item ${et>=xe?"disabled":""}`,children:n.jsx("button",{className:"page-link",onClick:()=>dt(et+1),disabled:et>=xe,children:""})})]})})})]})]})})}),n.jsx("div",{id:"standard-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-lg",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-primary text-white",children:[n.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Generate Salary"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsx("div",{className:"modal-body",children:x&&n.jsxs("div",{children:[n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body bg-light-primary",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-2",children:x.profileImage?n.jsx("div",{className:"avatar avatar-lg",children:n.jsx("img",{src:x.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):n.jsx("div",{className:"avatar avatar-lg bg-soft-primary",children:n.jsxs("span",{className:"avatar-text rounded-circle",children:[x.firstName?.charAt(0),x.lastName?.charAt(0)]})})}),n.jsxs("div",{className:"col-md-10",children:[n.jsxs("h4",{children:[x.firstName," ",x.lastName]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Employee ID:"})," ",x.employeeId]}),n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Department:"})," ",x.department]})]}),n.jsx("div",{className:"col-md-6",children:n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Role:"})," ",x.role]})})]})]})]})})}),n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Month:"}),n.jsx("select",{className:"form-select",name:"month",value:q.month,onChange:de,children:F.filter(he=>{if(q.year===q.joinYear){const ve=F.indexOf(he),pe=F.indexOf(q.joinMonth);return ve>=pe}return!0}).map(he=>n.jsx("option",{value:he,children:he},he))})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Year:"}),n.jsx("select",{className:"form-select",name:"year",value:q.year,onChange:z,children:X.filter(he=>parseInt(he)>=parseInt(q.joinYear)).map(he=>n.jsx("option",{value:he,children:he},he))})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Payment Date:"}),n.jsx("input",{type:"date",name:"date",className:"form-control",value:q.date,onChange:Z,min:q.minDate})]}),n.jsxs("div",{className:"col-md-3",children:[n.jsx("label",{className:"form-label",children:"Base Salary ():"}),n.jsx("input",{type:"number",name:"salary",className:"form-control",value:q.salary,onChange:Z,readOnly:!0})]}),n.jsxs("div",{className:"col-md-2",children:[n.jsx("label",{className:"form-label",children:"Per Day ():"}),n.jsx("input",{type:"number",className:"form-control",value:L,onChange:se})]})]}),n.jsxs("div",{className:"row mb-3",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Base Salary ():"}),n.jsx("input",{type:"number",name:"salary",className:"form-control",value:q.salary,onChange:Z,readOnly:!0})]}),n.jsxs("div",{className:"col-md-6",children:[n.jsx("label",{className:"form-label",children:"Deduction Per Day ():"}),n.jsx("input",{type:"number",className:"form-control",value:L,onChange:se})]})]}),n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header bg-light",children:n.jsx("h5",{className:"card-title mb-0",children:"Attendance & Leave Information"})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Total Leave Days:"}),n.jsx("input",{type:"number",className:"form-control",value:k,readOnly:!0}),n.jsxs("small",{className:"text-muted",children:["Excluding ",D," Sundays"]})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"form-label",children:"Paid Leave Allowed:"}),n.jsx("input",{type:"number",className:"form-control",value:O,onChange:Ne}),n.jsx("small",{className:"text-muted",children:"Default: 1 paid leave per month"})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-0",children:[n.jsx("label",{className:"form-label",children:"Deductible Leave Days:"}),n.jsx("input",{type:"number",className:"form-control",value:ue(),readOnly:!0}),n.jsx("small",{className:"text-muted",children:"After deducting paid leave"})]})}),n.jsx("div",{className:"col-md-3",children:n.jsxs("div",{className:"mb-0",children:[n.jsx("label",{className:"form-label",children:"Total Deduction ():"}),n.jsx("input",{type:"number",className:"form-control",value:ue()*L,readOnly:!0})]})})]})})]}),n.jsxs("div",{className:"card mb-3",children:[n.jsx("div",{className:"card-header bg-light-success",children:n.jsx("h5",{className:"card-title mb-0",children:"Final Salary"})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"row align-items-center",children:[n.jsxs("div",{className:"col-md-8",children:[n.jsx("label",{className:"form-label",children:"Payable Salary ():"}),n.jsx("input",{type:"number",className:"form-control form-control-lg",value:oe(),readOnly:!0}),n.jsxs("small",{className:"text-info",children:["Sundays and ",O," paid leave days are not included in salary deductions"]})]}),n.jsx("div",{className:"col-md-4",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"h1 mb-0 text-success",children:["",oe()]}),n.jsx("div",{className:"small text-muted",children:"Final Amount"})]})})]})})]})]})}),n.jsxs("div",{className:"d-flex justify-content-end p-3 gap-2",children:[n.jsx("button",{className:"btn btn-light","data-bs-dismiss":"modal",children:"Cancel"}),n.jsxs("button",{className:"btn btn-primary",onClick:ye,children:[n.jsx("i",{className:"ti ti-device-floppy me-1"})," Save"]})]})]})})}),n.jsx("div",{id:"history-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"history-modalLabel","aria-hidden":"true",children:n.jsx("div",{className:"modal-dialog modal-xl",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header bg-secondary text-white",children:[n.jsx("h4",{className:"modal-title",id:"history-modalLabel",children:"Salary History"}),n.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:n.jsx("i",{className:"ti ti-x"})})]}),n.jsxs("div",{className:"modal-body",children:[x&&n.jsx("div",{className:"card mb-3",children:n.jsx("div",{className:"card-body bg-light",children:n.jsxs("div",{className:"row",children:[n.jsx("div",{className:"col-md-2",children:x.profileImage?n.jsx("div",{className:"avatar avatar-lg",children:n.jsx("img",{src:x.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):n.jsx("div",{className:"avatar avatar-lg bg-soft-secondary",children:n.jsxs("span",{className:"avatar-text rounded-circle",children:[x.firstName?.charAt(0),x.lastName?.charAt(0)]})})}),n.jsxs("div",{className:"col-md-10",children:[n.jsxs("h4",{children:[x.firstName," ",x.lastName]}),n.jsxs("div",{className:"row",children:[n.jsxs("div",{className:"col-md-6",children:[n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Employee ID:"})," ",x.employeeId]}),n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Department:"})," ",x.department]})]}),n.jsx("div",{className:"col-md-6",children:n.jsxs("p",{className:"mb-1",children:[n.jsx("strong",{children:"Role:"})," ",x.role]})})]})]})]})})}),S.length>0?n.jsx("div",{className:"table-responsive",children:n.jsxs("table",{className:"table table-bordered table-hover",children:[n.jsx("thead",{className:"thead-light",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Month & Year"}),n.jsx("th",{children:"Basic Salary"}),n.jsx("th",{children:"Leave Days"}),n.jsx("th",{children:"Total Deduction"}),n.jsx("th",{children:"Payable Salary"}),n.jsx("th",{children:"Payment Date"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:[...S].sort((he,ve)=>new Date(ve.date)-new Date(he.date)).map(he=>n.jsxs("tr",{children:[n.jsxs("td",{children:[he.month," ",he.year]}),n.jsxs("td",{children:["",he.salary]}),n.jsxs("td",{children:["Total: ",he.leaveCount||0,n.jsx("span",{className:"text-muted d-block small",children:he.sundayCount>0&&` (Sundays: ${he.sundayCount})`})]}),n.jsx("td",{children:n.jsxs("span",{className:"text-danger",children:["",he.totalDeduction||0]})}),n.jsx("td",{children:n.jsxs("strong",{className:"text-success",children:["",he.payableSalary||he.salary]})}),n.jsx("td",{children:new Date(he.date).toLocaleDateString()}),n.jsx("td",{children:n.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>Me(he),children:[n.jsx("i",{className:"ti ti-download me-1"})," ","Download"]})})]},he._id))})]})}):n.jsxs("div",{className:"text-center py-5",children:[n.jsx("div",{className:"mb-3",children:n.jsx("i",{className:"ti ti-file-off text-muted",style:{fontSize:"48px"}})}),n.jsx("h5",{children:"No salary records found"}),n.jsx("p",{className:"text-muted",children:"No salary has been processed for this employee yet."})]})]}),n.jsx("div",{children:n.jsx("button",{className:"btn btn-secondary m-3",onClick:ae,"data-bs-dismiss":"modal",style:{width:"200px"},children:"Close"})})]})})})]})})})}function DUe(){const[e,t]=j.useState(!1),r=({children:a})=>n.jsx(rre,{children:n.jsxs("div",{className:`  main-wrapper ${e?"slide-nav":""}`,children:[n.jsx(ere,{}),n.jsx(tre,{toggleSidebar:()=>t(s=>!s)}),n.jsx("div",{className:"page-wrapper ",children:a})]})});return n.jsx(n.Fragment,{children:n.jsx(fee,{children:n.jsxs(qZ,{children:[n.jsx(cr,{path:"/login",element:n.jsx(bge,{})}),n.jsx(cr,{path:"/register",element:n.jsx(jge,{})}),n.jsx(cr,{path:"/Access",element:n.jsx(yTe,{})}),n.jsx(cr,{path:"/gst",element:n.jsx(r,{children:n.jsx(jTe,{})})}),n.jsx(cr,{path:"loginscreen",element:n.jsx(yge,{})}),n.jsx(cr,{path:"/company-form",element:n.jsx(r,{children:n.jsx(oTe,{})})}),n.jsx(cr,{path:"/",element:n.jsx(r,{children:n.jsx(gge,{})})}),n.jsx(cr,{path:"/eway",element:n.jsx(r,{children:n.jsx(bTe,{})})}),n.jsx(cr,{path:"/MaterialCategory",element:n.jsx(r,{children:n.jsx(o9,{})})}),n.jsx(cr,{path:"/PurchaseIndentsummary",element:n.jsx(r,{children:n.jsx(_Ee,{})})}),n.jsx(cr,{path:"/PurchaseOrderList",element:n.jsx(r,{children:n.jsx(ZAe,{})})}),n.jsx(cr,{path:"/SaleContractCategory",element:n.jsx(r,{children:n.jsx(l9,{})})}),n.jsx(cr,{path:"/PurchaseQuotation",element:n.jsx(r,{children:n.jsx(EEe,{})})}),n.jsx(cr,{path:"/PurchaseQuotationsDisplay",element:n.jsx(r,{children:n.jsx(QAe,{})})}),n.jsx(cr,{path:"/PurchaseOrder",element:n.jsx(r,{children:n.jsx(JAe,{})})}),n.jsx(cr,{path:"/PurchaseEnquiry",element:n.jsx(r,{children:n.jsx(kEe,{})})}),n.jsx(cr,{path:"/PurchaseContractsummary",element:n.jsx(r,{children:n.jsx(NTe,{})})}),n.jsx(cr,{path:"/PurchaseContract",element:n.jsx(r,{children:n.jsx(wTe,{})})}),n.jsx(cr,{path:"/SalesContract",element:n.jsx(r,{children:n.jsx(STe,{})})}),n.jsx(cr,{path:"/SalesContractsummary",element:n.jsx(r,{children:n.jsx(CTe,{})})}),n.jsx(cr,{path:"/SalesEnquiry",element:n.jsx(r,{children:n.jsx(eTe,{})})}),n.jsx(cr,{path:"/SalesEnquiryList",element:n.jsx(r,{children:n.jsx(tTe,{})})}),n.jsx(cr,{path:"/SalesQuotation",element:n.jsx(r,{children:n.jsx(rTe,{})})}),n.jsx(cr,{path:"/SalesQuotationList",element:n.jsx(r,{children:n.jsx(aTe,{})})}),n.jsx(cr,{path:"/SalesOrder",element:n.jsx(r,{children:n.jsx(nTe,{})})}),n.jsx(cr,{path:"/SalesOrderList",element:n.jsx(r,{children:n.jsx(sTe,{})})}),n.jsx(cr,{path:"/MatrialIssue",element:n.jsx(r,{children:n.jsx(ZB,{})})}),n.jsx(cr,{path:"/MatrialReceipt",element:n.jsx(r,{children:n.jsx(t7,{})})}),n.jsx(cr,{path:"/MatrialTransfer",element:n.jsx(r,{children:n.jsx(a7,{})})}),n.jsx(cr,{path:"/MatrialTransferList",element:n.jsx(r,{children:n.jsx(x6e,{})})}),n.jsx(cr,{path:"/MaterialIssueList",element:n.jsx(r,{children:n.jsx(e7,{})})}),n.jsx(cr,{path:"/MatrialReceiptList",element:n.jsx(r,{children:n.jsx(r7,{})})}),n.jsx(cr,{path:"/StockListERP",element:n.jsx(r,{children:n.jsx(n7,{})})}),n.jsx(cr,{path:"/GeneralCondition",element:n.jsx(r,{children:n.jsx(CEe,{})})}),n.jsx(cr,{path:"/ProcessList",element:n.jsx(r,{children:n.jsx(SEe,{})})}),n.jsx(cr,{path:"/customer-form",element:n.jsx(r,{children:n.jsx(lTe,{})})}),n.jsx(cr,{path:"/customer-price-list",element:n.jsx(r,{children:n.jsx(cTe,{})})}),n.jsx(cr,{path:"/locationmaster",element:n.jsx(r,{children:n.jsx(dTe,{})})}),n.jsx(cr,{path:"/material-form",element:n.jsx(r,{children:n.jsx(NEe,{})})}),n.jsx(cr,{path:"/tax-form",element:n.jsx(r,{children:n.jsx(uTe,{})})}),n.jsx(cr,{path:"/vendor-form",element:n.jsx(r,{children:n.jsx(hTe,{})})}),n.jsx(cr,{path:"/vendor-price-list",element:n.jsx(r,{children:n.jsx(fTe,{})})}),n.jsx(cr,{path:"/GoodsIssueFormUI",element:n.jsx(r,{children:n.jsx(ZB,{})})}),n.jsx(cr,{path:"/goods-issue-list",element:n.jsx(r,{children:n.jsx(e7,{})})}),n.jsx(cr,{path:"/GoodsReciept",element:n.jsx(r,{children:n.jsx(t7,{})})}),n.jsx(cr,{path:"/GoodsReceiptList",element:n.jsx(r,{children:n.jsx(r7,{})})}),n.jsx(cr,{path:"/GoodsTransfer",element:n.jsx(r,{children:n.jsx(a7,{})})}),n.jsx(cr,{path:"/StockListERP",element:n.jsx(r,{children:n.jsx(n7,{})})}),n.jsx(cr,{path:"/InvoiceList",element:n.jsx(r,{children:n.jsx(pTe,{})})}),n.jsx(cr,{path:"/InvoiceForm",element:n.jsx(r,{children:n.jsx(xTe,{})})}),n.jsx(cr,{path:"/BillingForm",element:n.jsx(r,{children:n.jsx(vTe,{})})}),n.jsx(cr,{path:"/BillingDisplay",element:n.jsx(r,{children:n.jsx(gTe,{})})}),n.jsx(cr,{path:"/Ledger",element:n.jsx(r,{children:n.jsx(_Te,{})})}),n.jsx(cr,{path:"/Payments",element:n.jsx(r,{children:n.jsx(DTe,{})})}),n.jsx(cr,{path:"/MRP",element:n.jsx(r,{children:n.jsx(ETe,{})})}),n.jsx(cr,{path:"/PaymentDisplay",element:n.jsx(r,{children:n.jsx(kTe,{})})}),n.jsx(cr,{path:"/MaterialCategory",element:n.jsx(r,{children:n.jsx(o9,{})})}),n.jsx(cr,{path:"/customer-category-form",element:n.jsx(r,{children:n.jsx(n6e,{})})}),n.jsx(cr,{path:"/GoodsIssueCategory",element:n.jsx(r,{children:n.jsx(s6e,{})})}),n.jsx(cr,{path:"/GoodsReceiptCategory",element:n.jsx(r,{children:n.jsx(i6e,{})})}),n.jsx(cr,{path:"/InvoiceCategory",element:n.jsx(r,{children:n.jsx(o6e,{})})}),n.jsx(cr,{path:"/BillingCategory",element:n.jsx(r,{children:n.jsx(a6e,{})})}),n.jsx(cr,{path:"/POCategory",element:n.jsx(r,{children:n.jsx(l6e,{})})}),n.jsx(cr,{path:"/Purchaserequestcat",element:n.jsx(r,{children:n.jsx(c6e,{})})}),n.jsx(cr,{path:"/sale-quotation-category-form",element:n.jsx(r,{children:n.jsx(u6e,{})})}),n.jsx(cr,{path:"/SalesCategory",element:n.jsx(r,{children:n.jsx(h6e,{})})}),n.jsx(cr,{path:"/SalesOrderCategoryForm",element:n.jsx(r,{children:n.jsx(f6e,{})})}),n.jsx(cr,{path:"/SaleContractCategoryForm",element:n.jsx(r,{children:n.jsx(l9,{})})}),n.jsx(cr,{path:"/TransferCategory",element:n.jsx(r,{children:n.jsx(m6e,{})})}),n.jsx(cr,{path:"/vendor-category",element:n.jsx(r,{children:n.jsx(p6e,{})})}),n.jsx(cr,{path:"/RFQCategoryForm",element:n.jsx(r,{children:n.jsx(d6e,{})})}),n.jsx(cr,{path:"/PurchaseContractCategory",element:n.jsx(r,{children:n.jsx(ATe,{})})}),n.jsx(cr,{path:"/contacts",element:n.jsx(r,{children:n.jsx(v6e,{})})}),n.jsx(cr,{path:"/leads",element:n.jsx(r,{children:n.jsx(g6e,{})})}),n.jsx(cr,{path:"/proposals",element:n.jsx(r,{children:n.jsx(j6e,{})})}),n.jsx(cr,{path:"/sources",element:n.jsx(r,{children:n.jsx(N6e,{})})}),n.jsx(cr,{path:"/lost-reason",element:n.jsx(r,{children:n.jsx(w6e,{})})}),n.jsx(cr,{path:"/contact-stage",element:n.jsx(r,{children:n.jsx(S6e,{})})}),n.jsx(cr,{path:"/industry",element:n.jsx(r,{children:n.jsx(C6e,{})})}),n.jsx(cr,{path:"/calls",element:n.jsx(r,{children:n.jsx(k6e,{})})}),n.jsx(cr,{path:"/milestones",element:n.jsx(r,{children:n.jsx(_6e,{})})}),n.jsx(cr,{path:"/tasks",element:n.jsx(r,{children:n.jsx(E6e,{})})}),n.jsx(cr,{path:"/time-entries",element:n.jsx(r,{children:n.jsx(D6e,{})})}),n.jsx(cr,{path:"/projects",element:n.jsx(r,{children:n.jsx(A6e,{})})}),n.jsx(cr,{path:"/campaigns",element:n.jsx(r,{children:n.jsx(T6e,{})})}),n.jsx(cr,{path:"/analytics",element:n.jsx(r,{children:n.jsx(I6e,{})})}),n.jsx(cr,{path:"/SalesDelivery",element:n.jsx(r,{children:n.jsx(iTe,{})})}),n.jsx(cr,{path:"/SalesDeliveryList",element:n.jsx(r,{children:n.jsx(P6e,{})})}),n.jsx(cr,{path:"/employee",element:n.jsx(r,{children:n.jsx(O6e,{})})}),n.jsx(cr,{path:"/leaverequest",element:n.jsx(r,{children:n.jsx(F6e,{})})}),n.jsx(cr,{path:"/leavemanagement",element:n.jsx(r,{children:n.jsx(E9e,{})})}),n.jsx(cr,{path:"/payroll",element:n.jsx(r,{children:n.jsx(EUe,{})})}),n.jsx(cr,{path:"/departments",element:n.jsx(r,{children:n.jsx(M6e,{})})}),n.jsx(cr,{path:"/designation",element:n.jsx(r,{children:n.jsx(R6e,{})})}),n.jsx(cr,{path:"/attendancereg",element:n.jsx(r,{children:n.jsx(e6e,{})})}),n.jsx(cr,{path:"/attendancetaking",element:n.jsx(r,{children:n.jsx(t6e,{})})}),n.jsx(cr,{path:"/attendancereport",element:n.jsx(r,{children:n.jsx(r6e,{})})})]})})})}QJ.createRoot(document.getElementById("root")).render(n.jsx(j.StrictMode,{children:n.jsx(DUe,{})}));export{Kb as _,AUe as c,Vd as g};
